/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------------------------------------------*/

var ub=Object.create;var Os=Object.defineProperty,fb=Object.defineProperties,hb=Object.getOwnPropertyDescriptor,db=Object.getOwnPropertyDescriptors,pb=Object.getOwnPropertyNames,Yu=Object.getOwnPropertySymbols,mb=Object.getPrototypeOf,Ku=Object.prototype.hasOwnProperty,gb=Object.prototype.propertyIsEnumerable;var Ju=(t,e,r)=>e in t?Os(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,H=(t,e)=>{for(var r in e||(e={}))Ku.call(e,r)&&Ju(t,r,e[r]);if(Yu)for(var r of Yu(e))gb.call(e,r)&&Ju(t,r,e[r]);return t},ie=(t,e)=>fb(t,db(e)),Xu=t=>Os(t,"__esModule",{value:!0});var j=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var vb=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of pb(e))!Ku.call(t,n)&&n!=="default"&&Os(t,n,{get:()=>e[n],enumerable:!(r=hb(e,n))||r.enumerable});return t},Q=t=>vb(Xu(Os(t!=null?ub(mb(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var vh=j((h1,gh)=>{"use strict";gh.exports=function t(e){var r=arguments.length;if(typeof e=="function"&&e.length===1){for(var n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return function(a){if(n==null)throw new TypeError("partial sink should only be called once!");var c=n;switch(n=null,r){case 1:return t(a,c[0]);case 2:return t(a,c[0],c[1]);case 3:return t(a,c[0],c[1],c[2]);case 4:return t(a,c[0],c[1],c[2],c[3]);default:return c.unshift(a),t.apply(null,c)}}}var s=e;s&&typeof s.source=="function"&&(s=s.source);for(var i=1;i<r;i++){var o=arguments[i];typeof o=="function"?s=o(s):o&&typeof o=="object"&&(o.sink(s),s=o.source)}return s}});var yh=j((p1,wh)=>{var d1=wh.exports=function(t){(function e(){var r=!0,n=!1,i=!1;do i=!0,r=!1,t.call(this,function(){i?r=!0:e()}),i=!1;while(r)})()}});var xh=j((tr,Ch)=>{var m1=vh(),tE=yh();function bh(t){t.destroy?t.destroy():console.error("warning, stream-to-pull-stream: \nthe wrapped node-stream does not implement `destroy`, \nthis may cause resource leaks.")}function Eh(t,e,r){var n,i=!1,s;function o(){s||(s=!0,r&&r(n===!0?null:n))}function a(){i||(i=!0,u(),n?o():t(n=!0,o))}function c(l){u(),n||t(n=l,o)}function u(){e.on("finish",a),e.removeListener("close",a),e.removeListener("error",c)}e.on("close",a),e.on("finish",a),e.on("error",c),process.nextTick(function(){tE(function(l){t(null,function(f,h){if(n=n||f,f===!0)return e._isStdio?o():e.end();if(n=n||f)return bh(e),o(n);if(e._isStdio)e.write(h,function(){l()});else{var d=e.write(h);d===!1?e.once("drain",l):l()}})})})}function rE(t){var e=!1,r=!1,n;function i(){var s=t.read();if(s!==null&&n){var o=n;n=null,o(null,s)}}return t.on("readable",function(){r=!0,n&&i()}).on("end",function(){e=!0,n&&n(e)}).on("error",function(s){e=s,n&&n(e)}),function(s,o){n=o,e?o(e):r&&i()}}function Gs(t){var e=[],r=[],n,i=!1,s;function o(){for(;(e.length||n)&&r.length;)r.shift()(e.length?null:n,e.shift());!e.length&&i&&(i=!1,t.resume())}return t.on("data",function(a){e.push(a),o(),e.length&&t.pause&&(i=!0,t.pause())}),t.on("end",function(){n=!0,o()}),t.on("close",function(){n=!0,o()}),t.on("error",function(a){n=a,o()}),function(a,c){if(!c)throw new Error("*must* provide cb");if(a){let l=function(){for(;r.length;)r.shift()(a);c(a)};var u=l;if(n)return l();t.once("close",l),bh(t)}else r.push(c),o()}}var nE=Gs,Vs=function(t,e){return function(r){return Eh(r,t,e)}},Ys=function(t){return Gs(t)};tr=Ch.exports=function(t,e){return t.writable&&t.write?t.readable?function(r){return Eh(r,t,e),Gs(t)}:Vs(t,e):Ys(t)};tr.sink=Vs;tr.source=Ys;tr.read=nE;tr.read1=Gs;tr.read2=rE;tr.duplex=function(t,e){return{source:Ys(t),sink:Vs(t,e)}};tr.transform=function(t){return function(e){var r=Ys(t);return Vs(t)(e),r}}});var Gd=j(Bc=>{Bc.quote=function(t){return t.map(function(e){return e&&typeof e=="object"?e.op.replace(/(.)/g,"\\$1"):/["\s]/.test(e)&&!/'/.test(e)?"'"+e.replace(/(['\\])/g,"\\$1")+"'":/["'\s]/.test(e)?'"'+e.replace(/(["\\$`!])/g,"\\$1")+'"':String(e).replace(/([A-Za-z]:)?([#!"$&'()*,:;<=>?@\[\\\]^`{|}])/g,"$1\\$2")}).join(" ")};var Uc="(?:"+["\\|\\|","\\&\\&",";;","\\|\\&","\\<\\(",">>",">\\&","[&;()|<>]"].join("|")+")",zd="|&;()<> \\t",Q0=`(\\\\['"`+zd+`]|[^\\s'"`+zd+"])+",ex='"((\\\\"|[^"])*?)"',tx="'((\\\\'|[^'])*?)'",tn="";for(Mc=0;Mc<4;Mc++)tn+=(Math.pow(16,8)*Math.random()).toString(16);var Mc;Bc.parse=function(t,e,r){var n=rx(t,e,r);return typeof e!="function"?n:n.reduce(function(i,s){if(typeof s=="object")return i.concat(s);var o=s.split(RegExp("("+tn+".*?"+tn+")","g"));return o.length===1?i.concat(o[0]):i.concat(o.filter(Boolean).map(function(a){return RegExp("^"+tn).test(a)?JSON.parse(a.split(tn)[1]):a}))},[])};function rx(t,e,r){var n=new RegExp(["("+Uc+")","("+Q0+"|"+ex+"|"+tx+")*"].join("|"),"g"),i=t.match(n).filter(Boolean),s=!1;if(!i)return[];return e||(e={}),r||(r={}),i.map(function(a,c){if(s)return;if(RegExp("^"+Uc+"$").test(a))return{op:a};for(var u="'",l='"',f="$",h=r.escape||"\\",d=!1,m=!1,p="",v=!1,w=0,b=a.length;w<b;w++){var E=a.charAt(w);if(v=v||!d&&(E==="*"||E==="?"),m)p+=E,m=!1;else if(d)E===d?d=!1:d==u?p+=E:E===h?(w+=1,E=a.charAt(w),E===l||E===h||E===f?p+=E:p+=h+E):E===f?p+=A():p+=E;else if(E===l||E===u)d=E;else{if(RegExp("^"+Uc+"$").test(E))return{op:a};if(RegExp("^#$").test(E))return s=!0,p.length?[p,{comment:a.slice(w+1)+i.slice(c+1).join(" ")}]:[{comment:a.slice(w+1)+i.slice(c+1).join(" ")}];E===h?m=!0:E===f?p+=A():p+=E}}if(v)return{op:"glob",pattern:p};return p;function A(){w+=1;var M,R;if(a.charAt(w)==="{"){if(w+=1,a.charAt(w)==="}")throw new Error("Bad substitution: "+a.substr(w-2,3));if(M=a.indexOf("}",w),M<0)throw new Error("Bad substitution: "+a.substr(w));R=a.substr(w,M-w),w=M}else/[*@#?$!_\-]/.test(a.charAt(w))?(R=a.charAt(w),w+=1):(M=a.substr(w).match(/[^\w\d_]/),M?(R=a.substr(w,M.index),w+=M.index-1):(R=a.substr(w),w=a.length));return o(null,"",R)}}).reduce(function(a,c){return c===void 0?a:a.concat(c)},[]);function o(a,c,u){var l=typeof e=="function"?e(u):e[u];return l===void 0&&u!=""?l="":l===void 0&&(l="$"),typeof l=="object"?c+tn+JSON.stringify(l)+tn:c+l}}});var Gn=j((rL,sp)=>{"use strict";var ip=new Map([["C","cwd"],["f","file"],["z","gzip"],["P","preservePaths"],["U","unlink"],["strip-components","strip"],["stripComponents","strip"],["keep-newer","newer"],["keepNewer","newer"],["keep-newer-files","newer"],["keepNewerFiles","newer"],["k","keep"],["keep-existing","keep"],["keepExisting","keep"],["m","noMtime"],["no-mtime","noMtime"],["p","preserveOwner"],["L","follow"],["h","follow"]]);sp.exports=t=>t?Object.keys(t).map(e=>[ip.has(e)?ip.get(e):e,t[e]]).reduce((e,r)=>(e[r[0]]=r[1],e),Object.create(null)):{}});var ap=j((nL,op)=>{"use strict";op.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var Wi=j((iL,cp)=>{"use strict";cp.exports=de;de.Node=an;de.create=de;function de(t){var e=this;if(e instanceof de||(e=new de),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)e.push(arguments[r]);return e}de.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;return e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null,e};de.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};de.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};de.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)cx(this,arguments[t]);return this.length};de.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)lx(this,arguments[t]);return this.length};de.prototype.pop=function(){if(!!this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};de.prototype.shift=function(){if(!!this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};de.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,n=0;r!==null;n++)t.call(e,r.value,n,this),r=r.next};de.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,n=this.length-1;r!==null;n--)t.call(e,r.value,n,this),r=r.prev};de.prototype.get=function(t){for(var e=0,r=this.head;r!==null&&e<t;e++)r=r.next;if(e===t&&r!==null)return r.value};de.prototype.getReverse=function(t){for(var e=0,r=this.tail;r!==null&&e<t;e++)r=r.prev;if(e===t&&r!==null)return r.value};de.prototype.map=function(t,e){e=e||this;for(var r=new de,n=this.head;n!==null;)r.push(t.call(e,n.value,this)),n=n.next;return r};de.prototype.mapReverse=function(t,e){e=e||this;for(var r=new de,n=this.tail;n!==null;)r.push(t.call(e,n.value,this)),n=n.prev;return r};de.prototype.reduce=function(t,e){var r,n=this.head;if(arguments.length>1)r=e;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)r=t(r,n.value,i),n=n.next;return r};de.prototype.reduceReverse=function(t,e){var r,n=this.tail;if(arguments.length>1)r=e;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)r=t(r,n.value,i),n=n.prev;return r};de.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;r!==null;e++)t[e]=r.value,r=r.next;return t};de.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;r!==null;e++)t[e]=r.value,r=r.prev;return t};de.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new de;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(;i!==null&&n<e;n++,i=i.next)r.push(i.value);return r};de.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new de;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=this.length,i=this.tail;i!==null&&n>e;n--)i=i.prev;for(;i!==null&&n>t;n--,i=i.prev)r.push(i.value);return r};de.prototype.splice=function(t,e,...r){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(var s=[],n=0;i&&n<e;n++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<r.length;n++)i=ax(this,i,r[n]);return s};de.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=e,this.tail=t,this};function ax(t,e,r){var n=e===t.head?new an(r,null,e,t):new an(r,e,e.next,t);return n.next===null&&(t.tail=n),n.prev===null&&(t.head=n),t.length++,n}function cx(t,e){t.tail=new an(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function lx(t,e){t.head=new an(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function an(t,e,r,n){if(!(this instanceof an))return new an(t,e,r,n);this.list=n,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{ap()(de)}catch{}});var Vn=j((sL,vp)=>{"use strict";var ux=require("events"),lp=require("stream"),zi=Wi(),up=require("string_decoder").StringDecoder,or=Symbol("EOF"),Gi=Symbol("maybeEmitEnd"),Pr=Symbol("emittedEnd"),wo=Symbol("emittingEnd"),yo=Symbol("closed"),fp=Symbol("read"),Wc=Symbol("flush"),hp=Symbol("flushChunk"),ot=Symbol("encoding"),ar=Symbol("decoder"),bo=Symbol("flowing"),Vi=Symbol("paused"),Yi=Symbol("resume"),Qe=Symbol("bufferLength"),dp=Symbol("bufferPush"),zc=Symbol("bufferShift"),Ve=Symbol("objectMode"),Ye=Symbol("destroyed"),pp=global._MP_NO_ITERATOR_SYMBOLS_!=="1",fx=pp&&Symbol.asyncIterator||Symbol("asyncIterator not implemented"),hx=pp&&Symbol.iterator||Symbol("iterator not implemented"),mp=t=>t==="end"||t==="finish"||t==="prefinish",dx=t=>t instanceof ArrayBuffer||typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,px=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t);vp.exports=class gp extends lp{constructor(e){super();this[bo]=!1,this[Vi]=!1,this.pipes=new zi,this.buffer=new zi,this[Ve]=e&&e.objectMode||!1,this[Ve]?this[ot]=null:this[ot]=e&&e.encoding||null,this[ot]==="buffer"&&(this[ot]=null),this[ar]=this[ot]?new up(this[ot]):null,this[or]=!1,this[Pr]=!1,this[wo]=!1,this[yo]=!1,this.writable=!0,this.readable=!0,this[Qe]=0,this[Ye]=!1}get bufferLength(){return this[Qe]}get encoding(){return this[ot]}set encoding(e){if(this[Ve])throw new Error("cannot set encoding in objectMode");if(this[ot]&&e!==this[ot]&&(this[ar]&&this[ar].lastNeed||this[Qe]))throw new Error("cannot change encoding");this[ot]!==e&&(this[ar]=e?new up(e):null,this.buffer.length&&(this.buffer=this.buffer.map(r=>this[ar].write(r)))),this[ot]=e}setEncoding(e){this.encoding=e}get objectMode(){return this[Ve]}set objectMode(e){this[Ve]=this[Ve]||!!e}write(e,r,n){if(this[or])throw new Error("write after end");return this[Ye]?(this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0):(typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8"),!this[Ve]&&!Buffer.isBuffer(e)&&(px(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):dx(e)?e=Buffer.from(e):typeof e!="string"&&(this.objectMode=!0)),!this.objectMode&&!e.length?(this[Qe]!==0&&this.emit("readable"),n&&n(),this.flowing):(typeof e=="string"&&!this[Ve]&&!(r===this[ot]&&!this[ar].lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[ot]&&(e=this[ar].write(e)),this.flowing?(this[Qe]!==0&&this[Wc](!0),this.emit("data",e)):this[dp](e),this[Qe]!==0&&this.emit("readable"),n&&n(),this.flowing))}read(e){if(this[Ye])return null;try{return this[Qe]===0||e===0||e>this[Qe]?null:(this[Ve]&&(e=null),this.buffer.length>1&&!this[Ve]&&(this.encoding?this.buffer=new zi([Array.from(this.buffer).join("")]):this.buffer=new zi([Buffer.concat(Array.from(this.buffer),this[Qe])])),this[fp](e||null,this.buffer.head.value))}finally{this[Gi]()}}[fp](e,r){return e===r.length||e===null?this[zc]():(this.buffer.head.value=r.slice(e),r=r.slice(0,e),this[Qe]-=e),this.emit("data",r),!this.buffer.length&&!this[or]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=null),typeof r=="function"&&(n=r,r="utf8"),e&&this.write(e,r),n&&this.once("end",n),this[or]=!0,this.writable=!1,(this.flowing||!this[Vi])&&this[Gi](),this}[Yi](){this[Ye]||(this[Vi]=!1,this[bo]=!0,this.emit("resume"),this.buffer.length?this[Wc]():this[or]?this[Gi]():this.emit("drain"))}resume(){return this[Yi]()}pause(){this[bo]=!1,this[Vi]=!0}get destroyed(){return this[Ye]}get flowing(){return this[bo]}get paused(){return this[Vi]}[dp](e){return this[Ve]?this[Qe]+=1:this[Qe]+=e.length,this.buffer.push(e)}[zc](){return this.buffer.length&&(this[Ve]?this[Qe]-=1:this[Qe]-=this.buffer.head.value.length),this.buffer.shift()}[Wc](e){do;while(this[hp](this[zc]()));!e&&!this.buffer.length&&!this[or]&&this.emit("drain")}[hp](e){return e?(this.emit("data",e),this.flowing):!1}pipe(e,r){if(this[Ye])return;let n=this[Pr];r=r||{},e===process.stdout||e===process.stderr?r.end=!1:r.end=r.end!==!1;let i={dest:e,opts:r,ondrain:s=>this[Yi]()};return this.pipes.push(i),e.on("drain",i.ondrain),this[Yi](),n&&i.opts.end&&i.dest.end(),e}addListener(e,r){return this.on(e,r)}on(e,r){try{return super.on(e,r)}finally{e==="data"&&!this.pipes.length&&!this.flowing?this[Yi]():mp(e)&&this[Pr]&&(super.emit(e),this.removeAllListeners(e))}}get emittedEnd(){return this[Pr]}[Gi](){!this[wo]&&!this[Pr]&&!this[Ye]&&this.buffer.length===0&&this[or]&&(this[wo]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[yo]&&this.emit("close"),this[wo]=!1)}emit(e,r){if(e!=="error"&&e!=="close"&&e!==Ye&&this[Ye])return;if(e==="data"){if(!r)return;this.pipes.length&&this.pipes.forEach(i=>i.dest.write(r)===!1&&this.pause())}else if(e==="end"){if(this[Pr]===!0)return;this[Pr]=!0,this.readable=!1,this[ar]&&(r=this[ar].end(),r&&(this.pipes.forEach(i=>i.dest.write(r)),super.emit("data",r))),this.pipes.forEach(i=>{i.dest.removeListener("drain",i.ondrain),i.opts.end&&i.dest.end()})}else if(e==="close"&&(this[yo]=!0,!this[Pr]&&!this[Ye]))return;let n=new Array(arguments.length);if(n[0]=e,n[1]=r,arguments.length>2)for(let i=2;i<arguments.length;i++)n[i]=arguments[i];try{return super.emit.apply(this,n)}finally{mp(e)?this.removeAllListeners(e):this[Gi]()}}collect(){let e=[];this[Ve]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[Ve]||(e.dataLength+=n.length)}),r.then(()=>e)}concat(){return this[Ve]?Promise.reject(new Error("cannot concat in objectMode")):this.collect().then(e=>this[Ve]?Promise.reject(new Error("cannot concat in objectMode")):this[ot]?e.join(""):Buffer.concat(e,e.dataLength))}promise(){return new Promise((e,r)=>{this.on(Ye,()=>r(new Error("stream destroyed"))),this.on("end",()=>e()),this.on("error",n=>r(n))})}[fx](){return{next:()=>{let r=this.read();if(r!==null)return Promise.resolve({done:!1,value:r});if(this[or])return Promise.resolve({done:!0});let n=null,i=null,s=u=>{this.removeListener("data",o),this.removeListener("end",a),i(u)},o=u=>{this.removeListener("error",s),this.removeListener("end",a),this.pause(),n({value:u,done:!!this[or]})},a=()=>{this.removeListener("error",s),this.removeListener("data",o),n({done:!0})},c=()=>s(new Error("stream destroyed"));return new Promise((u,l)=>{i=l,n=u,this.once(Ye,c),this.once("error",s),this.once("end",a),this.once("data",o)})}}}[hx](){return{next:()=>{let r=this.read();return{value:r,done:r===null}}}}destroy(e){return this[Ye]?(e?this.emit("error",e):this.emit(Ye),this):(this[Ye]=!0,this.buffer=new zi,this[Qe]=0,typeof this.close=="function"&&!this[yo]&&this.close(),e?this.emit("error",e):this.emit(Ye),this)}static isStream(e){return!!e&&(e instanceof gp||e instanceof lp||e instanceof ux&&(typeof e.pipe=="function"||typeof e.write=="function"&&typeof e.end=="function"))}}});var yp=j((oL,wp)=>{var mx=require("zlib").constants||{ZLIB_VERNUM:4736};wp.exports=Object.freeze(Object.assign(Object.create(null),{Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_VERSION_ERROR:-6,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,DEFLATE:1,INFLATE:2,GZIP:3,GUNZIP:4,DEFLATERAW:5,INFLATERAW:6,UNZIP:7,BROTLI_DECODE:8,BROTLI_ENCODE:9,Z_MIN_WINDOWBITS:8,Z_MAX_WINDOWBITS:15,Z_DEFAULT_WINDOWBITS:15,Z_MIN_CHUNK:64,Z_MAX_CHUNK:1/0,Z_DEFAULT_CHUNK:16384,Z_MIN_MEMLEVEL:1,Z_MAX_MEMLEVEL:9,Z_DEFAULT_MEMLEVEL:8,Z_MIN_LEVEL:-1,Z_MAX_LEVEL:9,Z_DEFAULT_LEVEL:-1,BROTLI_OPERATION_PROCESS:0,BROTLI_OPERATION_FLUSH:1,BROTLI_OPERATION_FINISH:2,BROTLI_OPERATION_EMIT_METADATA:3,BROTLI_MODE_GENERIC:0,BROTLI_MODE_TEXT:1,BROTLI_MODE_FONT:2,BROTLI_DEFAULT_MODE:0,BROTLI_MIN_QUALITY:0,BROTLI_MAX_QUALITY:11,BROTLI_DEFAULT_QUALITY:11,BROTLI_MIN_WINDOW_BITS:10,BROTLI_MAX_WINDOW_BITS:24,BROTLI_LARGE_MAX_WINDOW_BITS:30,BROTLI_DEFAULT_WINDOW:22,BROTLI_MIN_INPUT_BLOCK_BITS:16,BROTLI_MAX_INPUT_BLOCK_BITS:24,BROTLI_PARAM_MODE:0,BROTLI_PARAM_QUALITY:1,BROTLI_PARAM_LGWIN:2,BROTLI_PARAM_LGBLOCK:3,BROTLI_PARAM_DISABLE_LITERAL_CONTEXT_MODELING:4,BROTLI_PARAM_SIZE_HINT:5,BROTLI_PARAM_LARGE_WINDOW:6,BROTLI_PARAM_NPOSTFIX:7,BROTLI_PARAM_NDIRECT:8,BROTLI_DECODER_RESULT_ERROR:0,BROTLI_DECODER_RESULT_SUCCESS:1,BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT:2,BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_PARAM_DISABLE_RING_BUFFER_REALLOCATION:0,BROTLI_DECODER_PARAM_LARGE_WINDOW:1,BROTLI_DECODER_NO_ERROR:0,BROTLI_DECODER_SUCCESS:1,BROTLI_DECODER_NEEDS_MORE_INPUT:2,BROTLI_DECODER_NEEDS_MORE_OUTPUT:3,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_NIBBLE:-1,BROTLI_DECODER_ERROR_FORMAT_RESERVED:-2,BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_META_NIBBLE:-3,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_ALPHABET:-4,BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_SAME:-5,BROTLI_DECODER_ERROR_FORMAT_CL_SPACE:-6,BROTLI_DECODER_ERROR_FORMAT_HUFFMAN_SPACE:-7,BROTLI_DECODER_ERROR_FORMAT_CONTEXT_MAP_REPEAT:-8,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_1:-9,BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_2:-10,BROTLI_DECODER_ERROR_FORMAT_TRANSFORM:-11,BROTLI_DECODER_ERROR_FORMAT_DICTIONARY:-12,BROTLI_DECODER_ERROR_FORMAT_WINDOW_BITS:-13,BROTLI_DECODER_ERROR_FORMAT_PADDING_1:-14,BROTLI_DECODER_ERROR_FORMAT_PADDING_2:-15,BROTLI_DECODER_ERROR_FORMAT_DISTANCE:-16,BROTLI_DECODER_ERROR_DICTIONARY_NOT_SET:-19,BROTLI_DECODER_ERROR_INVALID_ARGUMENTS:-20,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MODES:-21,BROTLI_DECODER_ERROR_ALLOC_TREE_GROUPS:-22,BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MAP:-25,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_1:-26,BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_2:-27,BROTLI_DECODER_ERROR_ALLOC_BLOCK_TYPE_TREES:-30,BROTLI_DECODER_ERROR_UNREACHABLE:-31},mx))});var el=j(mt=>{"use strict";var Gc=require("assert"),Ar=require("buffer").Buffer,bp=require("zlib"),cn=mt.constants=yp(),gx=Vn(),Ep=Ar.concat,ln=Symbol("_superWrite"),Ki=class extends Error{constructor(e){super("zlib: "+e.message);this.code=e.code,this.errno=e.errno,this.code||(this.code="ZLIB_ERROR"),this.message="zlib: "+e.message,Error.captureStackTrace(this,this.constructor)}get name(){return"ZlibError"}},vx=Symbol("opts"),Ji=Symbol("flushFlag"),Cp=Symbol("finishFlushFlag"),Vc=Symbol("fullFlushFlag"),be=Symbol("handle"),Eo=Symbol("onError"),Yn=Symbol("sawError"),Yc=Symbol("level"),Kc=Symbol("strategy"),Jc=Symbol("ended"),aL=Symbol("_defaultFullFlush"),Xc=class extends gx{constructor(e,r){if(!e||typeof e!="object")throw new TypeError("invalid options for ZlibBase constructor");super(e);this[Yn]=!1,this[Jc]=!1,this[vx]=e,this[Ji]=e.flush,this[Cp]=e.finishFlush;try{this[be]=new bp[r](e)}catch(n){throw new Ki(n)}this[Eo]=n=>{this[Yn]||(this[Yn]=!0,this.close(),this.emit("error",n))},this[be].on("error",n=>this[Eo](new Ki(n))),this.once("end",()=>this.close)}close(){this[be]&&(this[be].close(),this[be]=null,this.emit("close"))}reset(){if(!this[Yn])return Gc(this[be],"zlib binding closed"),this[be].reset()}flush(e){this.ended||(typeof e!="number"&&(e=this[Vc]),this.write(Object.assign(Ar.alloc(0),{[Ji]:e})))}end(e,r,n){return e&&this.write(e,r),this.flush(this[Cp]),this[Jc]=!0,super.end(null,null,n)}get ended(){return this[Jc]}write(e,r,n){if(typeof r=="function"&&(n=r,r="utf8"),typeof e=="string"&&(e=Ar.from(e,r)),this[Yn])return;Gc(this[be],"zlib binding closed");let i=this[be]._handle,s=i.close;i.close=()=>{};let o=this[be].close;this[be].close=()=>{},Ar.concat=u=>u;let a;try{let u=typeof e[Ji]=="number"?e[Ji]:this[Ji];a=this[be]._processChunk(e,u),Ar.concat=Ep}catch(u){Ar.concat=Ep,this[Eo](new Ki(u))}finally{this[be]&&(this[be]._handle=i,i.close=s,this[be].close=o,this[be].removeAllListeners("error"))}this[be]&&this[be].on("error",u=>this[Eo](new Ki(u)));let c;if(a)if(Array.isArray(a)&&a.length>0){c=this[ln](Ar.from(a[0]));for(let u=1;u<a.length;u++)c=this[ln](a[u])}else c=this[ln](Ar.from(a));return n&&n(),c}[ln](e){return super.write(e)}},Or=class extends Xc{constructor(e,r){e=e||{},e.flush=e.flush||cn.Z_NO_FLUSH,e.finishFlush=e.finishFlush||cn.Z_FINISH;super(e,r);this[Vc]=cn.Z_FULL_FLUSH,this[Yc]=e.level,this[Kc]=e.strategy}params(e,r){if(!this[Yn]){if(!this[be])throw new Error("cannot switch params when binding is closed");if(!this[be].params)throw new Error("not supported in this implementation");if(this[Yc]!==e||this[Kc]!==r){this.flush(cn.Z_SYNC_FLUSH),Gc(this[be],"zlib binding closed");let n=this[be].flush;this[be].flush=(i,s)=>{this.flush(i),s()};try{this[be].params(e,r)}finally{this[be].flush=n}this[be]&&(this[Yc]=e,this[Kc]=r)}}}},xp=class extends Or{constructor(e){super(e,"Deflate")}},Sp=class extends Or{constructor(e){super(e,"Inflate")}},Zc=Symbol("_portable"),Pp=class extends Or{constructor(e){super(e,"Gzip");this[Zc]=e&&!!e.portable}[ln](e){return this[Zc]?(this[Zc]=!1,e[9]=255,super[ln](e)):super[ln](e)}},Ap=class extends Or{constructor(e){super(e,"Gunzip")}},Op=class extends Or{constructor(e){super(e,"DeflateRaw")}},Rp=class extends Or{constructor(e){super(e,"InflateRaw")}},_p=class extends Or{constructor(e){super(e,"Unzip")}},Qc=class extends Xc{constructor(e,r){e=e||{},e.flush=e.flush||cn.BROTLI_OPERATION_PROCESS,e.finishFlush=e.finishFlush||cn.BROTLI_OPERATION_FINISH;super(e,r);this[Vc]=cn.BROTLI_OPERATION_FLUSH}},Ip=class extends Qc{constructor(e){super(e,"BrotliCompress")}},Dp=class extends Qc{constructor(e){super(e,"BrotliDecompress")}};mt.Deflate=xp;mt.Inflate=Sp;mt.Gzip=Pp;mt.Gunzip=Ap;mt.DeflateRaw=Op;mt.InflateRaw=Rp;mt.Unzip=_p;typeof bp.BrotliCompress=="function"?(mt.BrotliCompress=Ip,mt.BrotliDecompress=Dp):mt.BrotliCompress=mt.BrotliDecompress=class{constructor(){throw new Error("Brotli is not supported in this version of Node.js")}}});var Kn=j((lL,Lp)=>{var wx=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform;Lp.exports=wx!=="win32"?t=>t:t=>t&&t.replace(/\\/g,"/")});var Co=j((fL,kp)=>{"use strict";var yx=Vn(),tl=Kn(),rl=Symbol("slurp");kp.exports=class extends yx{constructor(e,r,n){super();switch(this.pause(),this.extended=r,this.globalExtended=n,this.header=e,this.startBlockSize=512*Math.ceil(e.size/512),this.blockRemain=this.startBlockSize,this.remain=e.size,this.type=e.type,this.meta=!1,this.ignore=!1,this.type){case"File":case"OldFile":case"Link":case"SymbolicLink":case"CharacterDevice":case"BlockDevice":case"Directory":case"FIFO":case"ContiguousFile":case"GNUDumpDir":break;case"NextFileHasLongLinkpath":case"NextFileHasLongPath":case"OldGnuLongPath":case"GlobalExtendedHeader":case"ExtendedHeader":case"OldExtendedHeader":this.meta=!0;break;default:this.ignore=!0}this.path=tl(e.path),this.mode=e.mode,this.mode&&(this.mode=this.mode&4095),this.uid=e.uid,this.gid=e.gid,this.uname=e.uname,this.gname=e.gname,this.size=e.size,this.mtime=e.mtime,this.atime=e.atime,this.ctime=e.ctime,this.linkpath=tl(e.linkpath),this.uname=e.uname,this.gname=e.gname,r&&this[rl](r),n&&this[rl](n,!0)}write(e){let r=e.length;if(r>this.blockRemain)throw new Error("writing more to entry than is appropriate");let n=this.remain,i=this.blockRemain;return this.remain=Math.max(0,n-r),this.blockRemain=Math.max(0,i-r),this.ignore?!0:n>=r?super.write(e):super.write(e.slice(0,n))}[rl](e,r){for(let n in e)e[n]!==null&&e[n]!==void 0&&!(r&&n==="path")&&(this[n]=n==="path"||n==="linkpath"?tl(e[n]):e[n])}}});var nl=j(xo=>{"use strict";xo.name=new Map([["0","File"],["","OldFile"],["1","Link"],["2","SymbolicLink"],["3","CharacterDevice"],["4","BlockDevice"],["5","Directory"],["6","FIFO"],["7","ContiguousFile"],["g","GlobalExtendedHeader"],["x","ExtendedHeader"],["A","SolarisACL"],["D","GNUDumpDir"],["I","Inode"],["K","NextFileHasLongLinkpath"],["L","NextFileHasLongPath"],["M","ContinuationFile"],["N","OldGnuLongPath"],["S","SparseFile"],["V","TapeVolumeHeader"],["X","OldExtendedHeader"]]);xo.code=new Map(Array.from(xo.name).map(t=>[t[1],t[0]]))});var $p=j((dL,Np)=>{"use strict";var bx=(t,e)=>{if(Number.isSafeInteger(t))t<0?Cx(t,e):Ex(t,e);else throw Error("cannot encode number outside of javascript safe integer range");return e},Ex=(t,e)=>{e[0]=128;for(var r=e.length;r>1;r--)e[r-1]=t&255,t=Math.floor(t/256)},Cx=(t,e)=>{e[0]=255;var r=!1;t=t*-1;for(var n=e.length;n>1;n--){var i=t&255;t=Math.floor(t/256),r?e[n-1]=Fp(i):i===0?e[n-1]=0:(r=!0,e[n-1]=Tp(i))}},xx=t=>{let e=t[0],r=e===128?Px(t.slice(1,t.length)):e===255?Sx(t):null;if(r===null)throw Error("invalid base256 encoding");if(!Number.isSafeInteger(r))throw Error("parsed number outside of javascript safe integer range");return r},Sx=t=>{for(var e=t.length,r=0,n=!1,i=e-1;i>-1;i--){var s=t[i],o;n?o=Fp(s):s===0?o=s:(n=!0,o=Tp(s)),o!==0&&(r-=o*Math.pow(256,e-i-1))}return r},Px=t=>{for(var e=t.length,r=0,n=e-1;n>-1;n--){var i=t[n];i!==0&&(r+=i*Math.pow(256,e-n-1))}return r},Fp=t=>(255^t)&255,Tp=t=>(255^t)+1&255;Np.exports={encode:bx,parse:xx}});var Xn=j((pL,Mp)=>{"use strict";var il=nl(),Jn=require("path").posix,jp=$p(),sl=Symbol("slurp"),gt=Symbol("type"),Up=class{constructor(e,r,n,i){this.cksumValid=!1,this.needPax=!1,this.nullBlock=!1,this.block=null,this.path=null,this.mode=null,this.uid=null,this.gid=null,this.size=null,this.mtime=null,this.cksum=null,this[gt]="0",this.linkpath=null,this.uname=null,this.gname=null,this.devmaj=0,this.devmin=0,this.atime=null,this.ctime=null,Buffer.isBuffer(e)?this.decode(e,r||0,n,i):e&&this.set(e)}decode(e,r,n,i){if(r||(r=0),!e||!(e.length>=r+512))throw new Error("need 512 bytes for header");if(this.path=un(e,r,100),this.mode=Rr(e,r+100,8),this.uid=Rr(e,r+108,8),this.gid=Rr(e,r+116,8),this.size=Rr(e,r+124,12),this.mtime=ol(e,r+136,12),this.cksum=Rr(e,r+148,12),this[sl](n),this[sl](i,!0),this[gt]=un(e,r+156,1),this[gt]===""&&(this[gt]="0"),this[gt]==="0"&&this.path.substr(-1)==="/"&&(this[gt]="5"),this[gt]==="5"&&(this.size=0),this.linkpath=un(e,r+157,100),e.slice(r+257,r+265).toString()==="ustar\x0000")if(this.uname=un(e,r+265,32),this.gname=un(e,r+297,32),this.devmaj=Rr(e,r+329,8),this.devmin=Rr(e,r+337,8),e[r+475]!==0){let o=un(e,r+345,155);this.path=o+"/"+this.path}else{let o=un(e,r+345,130);o&&(this.path=o+"/"+this.path),this.atime=ol(e,r+476,12),this.ctime=ol(e,r+488,12)}let s=8*32;for(let o=r;o<r+148;o++)s+=e[o];for(let o=r+156;o<r+512;o++)s+=e[o];this.cksumValid=s===this.cksum,this.cksum===null&&s===8*32&&(this.nullBlock=!0)}[sl](e,r){for(let n in e)e[n]!==null&&e[n]!==void 0&&!(r&&n==="path")&&(this[n]=e[n])}encode(e,r){if(e||(e=this.block=Buffer.alloc(512),r=0),r||(r=0),!(e.length>=r+512))throw new Error("need 512 bytes for header");let n=this.ctime||this.atime?130:155,i=Ax(this.path||"",n),s=i[0],o=i[1];this.needPax=i[2],this.needPax=fn(e,r,100,s)||this.needPax,this.needPax=_r(e,r+100,8,this.mode)||this.needPax,this.needPax=_r(e,r+108,8,this.uid)||this.needPax,this.needPax=_r(e,r+116,8,this.gid)||this.needPax,this.needPax=_r(e,r+124,12,this.size)||this.needPax,this.needPax=al(e,r+136,12,this.mtime)||this.needPax,e[r+156]=this[gt].charCodeAt(0),this.needPax=fn(e,r+157,100,this.linkpath)||this.needPax,e.write("ustar\x0000",r+257,8),this.needPax=fn(e,r+265,32,this.uname)||this.needPax,this.needPax=fn(e,r+297,32,this.gname)||this.needPax,this.needPax=_r(e,r+329,8,this.devmaj)||this.needPax,this.needPax=_r(e,r+337,8,this.devmin)||this.needPax,this.needPax=fn(e,r+345,n,o)||this.needPax,e[r+475]!==0?this.needPax=fn(e,r+345,155,o)||this.needPax:(this.needPax=fn(e,r+345,130,o)||this.needPax,this.needPax=al(e,r+476,12,this.atime)||this.needPax,this.needPax=al(e,r+488,12,this.ctime)||this.needPax);let a=8*32;for(let c=r;c<r+148;c++)a+=e[c];for(let c=r+156;c<r+512;c++)a+=e[c];return this.cksum=a,_r(e,r+148,8,this.cksum),this.cksumValid=!0,this.needPax}set(e){for(let r in e)e[r]!==null&&e[r]!==void 0&&(this[r]=e[r])}get type(){return il.name.get(this[gt])||this[gt]}get typeKey(){return this[gt]}set type(e){il.code.has(e)?this[gt]=il.code.get(e):this[gt]=e}},Ax=(t,e)=>{let r=100,n=t,i="",s,o=Jn.parse(t).root||".";if(Buffer.byteLength(n)<r)s=[n,i,!1];else{i=Jn.dirname(n),n=Jn.basename(n);do Buffer.byteLength(n)<=r&&Buffer.byteLength(i)<=e?s=[n,i,!1]:Buffer.byteLength(n)>r&&Buffer.byteLength(i)<=e?s=[n.substr(0,r-1),i,!0]:(n=Jn.join(Jn.basename(i),n),i=Jn.dirname(i));while(i!==o&&!s);s||(s=[t.substr(0,r-1),"",!0])}return s},un=(t,e,r)=>t.slice(e,e+r).toString("utf8").replace(/\0.*/,""),ol=(t,e,r)=>Ox(Rr(t,e,r)),Ox=t=>t===null?null:new Date(t*1e3),Rr=(t,e,r)=>t[e]&128?jp.parse(t.slice(e,e+r)):_x(t,e,r),Rx=t=>isNaN(t)?null:t,_x=(t,e,r)=>Rx(parseInt(t.slice(e,e+r).toString("utf8").replace(/\0.*$/,"").trim(),8)),Ix={12:8589934591,8:2097151},_r=(t,e,r,n)=>n===null?!1:n>Ix[r]||n<0?(jp.encode(n,t.slice(e,e+r)),!0):(Dx(t,e,r,n),!1),Dx=(t,e,r,n)=>t.write(Lx(n,r),e,r,"ascii"),Lx=(t,e)=>kx(Math.floor(t).toString(8),e),kx=(t,e)=>(t.length===e-1?t:new Array(e-t.length-1).join("0")+t+" ")+"\0",al=(t,e,r,n)=>n===null?!1:_r(t,e,r,n.getTime()/1e3),Fx=new Array(156).join("\0"),fn=(t,e,r,n)=>n===null?!1:(t.write(n+Fx,e,r,"utf8"),n.length!==Buffer.byteLength(n)||n.length>r);Mp.exports=Up});var Po=j((mL,Bp)=>{"use strict";var Tx=Xn(),Nx=require("path"),So=class{constructor(e,r){this.atime=e.atime||null,this.charset=e.charset||null,this.comment=e.comment||null,this.ctime=e.ctime||null,this.gid=e.gid||null,this.gname=e.gname||null,this.linkpath=e.linkpath||null,this.mtime=e.mtime||null,this.path=e.path||null,this.size=e.size||null,this.uid=e.uid||null,this.uname=e.uname||null,this.dev=e.dev||null,this.ino=e.ino||null,this.nlink=e.nlink||null,this.global=r||!1}encode(){let e=this.encodeBody();if(e==="")return null;let r=Buffer.byteLength(e),n=512*Math.ceil(1+r/512),i=Buffer.allocUnsafe(n);for(let s=0;s<512;s++)i[s]=0;new Tx({path:("PaxHeader/"+Nx.basename(this.path)).slice(0,99),mode:this.mode||420,uid:this.uid||null,gid:this.gid||null,size:r,mtime:this.mtime||null,type:this.global?"GlobalExtendedHeader":"ExtendedHeader",linkpath:"",uname:this.uname||"",gname:this.gname||"",devmaj:0,devmin:0,atime:this.atime||null,ctime:this.ctime||null}).encode(i),i.write(e,512,r,"utf8");for(let s=r+512;s<i.length;s++)i[s]=0;return i}encodeBody(){return this.encodeField("path")+this.encodeField("ctime")+this.encodeField("atime")+this.encodeField("dev")+this.encodeField("ino")+this.encodeField("nlink")+this.encodeField("charset")+this.encodeField("comment")+this.encodeField("gid")+this.encodeField("gname")+this.encodeField("linkpath")+this.encodeField("mtime")+this.encodeField("size")+this.encodeField("uid")+this.encodeField("uname")}encodeField(e){if(this[e]===null||this[e]===void 0)return"";let r=this[e]instanceof Date?this[e].getTime()/1e3:this[e],n=" "+(e==="dev"||e==="ino"||e==="nlink"?"SCHILY.":"")+e+"="+r+`
`,i=Buffer.byteLength(n),s=Math.floor(Math.log(i)/Math.log(10))+1;return i+s>=Math.pow(10,s)&&(s+=1),s+i+n}};So.parse=(t,e,r)=>new So($x(jx(t),e),r);var $x=(t,e)=>e?Object.keys(t).reduce((r,n)=>(r[n]=t[n],r),e):t,jx=t=>t.replace(/\n$/,"").split(`
`).reduce(Ux,Object.create(null)),Ux=(t,e)=>{let r=parseInt(e,10);if(r!==Buffer.byteLength(e)+1)return t;e=e.substr((r+" ").length);let n=e.split("="),i=n.shift().replace(/^SCHILY\.(dev|ino|nlink)/,"$1");if(!i)return t;let s=n.join("=");return t[i]=/^([A-Z]+\.)?([mac]|birth|creation)time$/.test(i)?new Date(s*1e3):/^[0-9]+$/.test(s)?+s:s,t};Bp.exports=So});var Zn=j((gL,qp)=>{qp.exports=t=>{let e=t.length-1,r=-1;for(;e>-1&&t.charAt(e)==="/";)r=e,e--;return r===-1?t:t.slice(0,r)}});var Ao=j((vL,Hp)=>{"use strict";Hp.exports=t=>class extends t{warn(e,r,n={}){this.file&&(n.file=this.file),this.cwd&&(n.cwd=this.cwd),n.code=r instanceof Error&&r.code||e,n.tarCode=e,!this.strict&&n.recoverable!==!1?(r instanceof Error&&(n=Object.assign(r,n),r=r.message),this.emit("warn",n.tarCode,r,n)):r instanceof Error?this.emit("error",Object.assign(r,n)):this.emit("error",Object.assign(new Error(`${e}: ${r}`),n))}}});var ll=j((wL,Wp)=>{"use strict";var Oo=["|","<",">","?",":"],cl=Oo.map(t=>String.fromCharCode(61440+t.charCodeAt(0))),Mx=new Map(Oo.map((t,e)=>[t,cl[e]])),Bx=new Map(cl.map((t,e)=>[t,Oo[e]]));Wp.exports={encode:t=>Oo.reduce((e,r)=>e.split(r).join(Mx.get(r)),t),decode:t=>cl.reduce((e,r)=>e.split(r).join(Bx.get(r)),t)}});var ul=j((yL,Gp)=>{var{isAbsolute:qx,parse:zp}=require("path").win32;Gp.exports=t=>{let e="",r=zp(t);for(;qx(t)||r.root;){let n=t.charAt(0)==="/"&&t.slice(0,4)!=="//?/"?"/":r.root;t=t.substr(n.length),e+=n,r=zp(t)}return[e,t]}});var Yp=j((bL,Vp)=>{"use strict";Vp.exports=(t,e,r)=>(t&=4095,r&&(t=(t|384)&~18),e&&(t&256&&(t|=64),t&32&&(t|=8),t&4&&(t|=1)),t)});var yl=j((xL,lm)=>{"use strict";var Kp=Vn(),Jp=Po(),Xp=Xn(),Vt=require("fs"),Zp=require("path"),Yt=Kn(),Hx=Zn(),Qp=(t,e)=>e?(t=Yt(t).replace(/^\.(\/|$)/,""),Hx(e)+"/"+t):Yt(t),Wx=16*1024*1024,em=Symbol("process"),tm=Symbol("file"),rm=Symbol("directory"),fl=Symbol("symlink"),nm=Symbol("hardlink"),Xi=Symbol("header"),Ro=Symbol("read"),hl=Symbol("lstat"),_o=Symbol("onlstat"),dl=Symbol("onread"),pl=Symbol("onreadlink"),ml=Symbol("openfile"),gl=Symbol("onopenfile"),Ir=Symbol("close"),Io=Symbol("mode"),vl=Symbol("awaitDrain"),wl=Symbol("ondrain"),Kt=Symbol("prefix"),im=Symbol("hadError"),sm=Ao(),zx=ll(),om=ul(),am=Yp(),Do=sm(class extends Kp{constructor(e,r){r=r||{};super(r);if(typeof e!="string")throw new TypeError("path is required");this.path=Yt(e),this.portable=!!r.portable,this.myuid=process.getuid&&process.getuid()||0,this.myuser=process.env.USER||"",this.maxReadSize=r.maxReadSize||Wx,this.linkCache=r.linkCache||new Map,this.statCache=r.statCache||new Map,this.preservePaths=!!r.preservePaths,this.cwd=Yt(r.cwd||process.cwd()),this.strict=!!r.strict,this.noPax=!!r.noPax,this.noMtime=!!r.noMtime,this.mtime=r.mtime||null,this.prefix=r.prefix?Yt(r.prefix):null,this.fd=null,this.blockLen=null,this.blockRemain=null,this.buf=null,this.offset=null,this.length=null,this.pos=null,this.remain=null,typeof r.onwarn=="function"&&this.on("warn",r.onwarn);let n=!1;if(!this.preservePaths){let[i,s]=om(this.path);i&&(this.path=s,n=i)}this.win32=!!r.win32||process.platform==="win32",this.win32&&(this.path=zx.decode(this.path.replace(/\\/g,"/")),e=e.replace(/\\/g,"/")),this.absolute=Yt(r.absolute||Zp.resolve(this.cwd,e)),this.path===""&&(this.path="./"),n&&this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:this,path:n+this.path}),this.statCache.has(this.absolute)?this[_o](this.statCache.get(this.absolute)):this[hl]()}emit(e,...r){return e==="error"&&(this[im]=!0),super.emit(e,...r)}[hl](){Vt.lstat(this.absolute,(e,r)=>{if(e)return this.emit("error",e);this[_o](r)})}[_o](e){this.statCache.set(this.absolute,e),this.stat=e,e.isFile()||(e.size=0),this.type=Vx(e),this.emit("stat",e),this[em]()}[em](){switch(this.type){case"File":return this[tm]();case"Directory":return this[rm]();case"SymbolicLink":return this[fl]();default:return this.end()}}[Io](e){return am(e,this.type==="Directory",this.portable)}[Kt](e){return Qp(e,this.prefix)}[Xi](){this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.header=new Xp({path:this[Kt](this.path),linkpath:this.type==="Link"?this[Kt](this.linkpath):this.linkpath,mode:this[Io](this.stat.mode),uid:this.portable?null:this.stat.uid,gid:this.portable?null:this.stat.gid,size:this.stat.size,mtime:this.noMtime?null:this.mtime||this.stat.mtime,type:this.type,uname:this.portable?null:this.stat.uid===this.myuid?this.myuser:"",atime:this.portable?null:this.stat.atime,ctime:this.portable?null:this.stat.ctime}),this.header.encode()&&!this.noPax&&super.write(new Jp({atime:this.portable?null:this.header.atime,ctime:this.portable?null:this.header.ctime,gid:this.portable?null:this.header.gid,mtime:this.noMtime?null:this.mtime||this.header.mtime,path:this[Kt](this.path),linkpath:this.type==="Link"?this[Kt](this.linkpath):this.linkpath,size:this.header.size,uid:this.portable?null:this.header.uid,uname:this.portable?null:this.header.uname,dev:this.portable?null:this.stat.dev,ino:this.portable?null:this.stat.ino,nlink:this.portable?null:this.stat.nlink}).encode()),super.write(this.header.block)}[rm](){this.path.substr(-1)!=="/"&&(this.path+="/"),this.stat.size=0,this[Xi](),this.end()}[fl](){Vt.readlink(this.absolute,(e,r)=>{if(e)return this.emit("error",e);this[pl](r)})}[pl](e){this.linkpath=Yt(e),this[Xi](),this.end()}[nm](e){this.type="Link",this.linkpath=Yt(Zp.relative(this.cwd,e)),this.stat.size=0,this[Xi](),this.end()}[tm](){if(this.stat.nlink>1){let e=this.stat.dev+":"+this.stat.ino;if(this.linkCache.has(e)){let r=this.linkCache.get(e);if(r.indexOf(this.cwd)===0)return this[nm](r)}this.linkCache.set(e,this.absolute)}if(this[Xi](),this.stat.size===0)return this.end();this[ml]()}[ml](){Vt.open(this.absolute,"r",(e,r)=>{if(e)return this.emit("error",e);this[gl](r)})}[gl](e){if(this.fd=e,this[im])return this[Ir]();this.blockLen=512*Math.ceil(this.stat.size/512),this.blockRemain=this.blockLen;let r=Math.min(this.blockLen,this.maxReadSize);this.buf=Buffer.allocUnsafe(r),this.offset=0,this.pos=0,this.remain=this.stat.size,this.length=this.buf.length,this[Ro]()}[Ro](){let{fd:e,buf:r,offset:n,length:i,pos:s}=this;Vt.read(e,r,n,i,s,(o,a)=>{if(o)return this[Ir](()=>this.emit("error",o));this[dl](a)})}[Ir](e){Vt.close(this.fd,e)}[dl](e){if(e<=0&&this.remain>0){let i=new Error("encountered unexpected EOF");return i.path=this.absolute,i.syscall="read",i.code="EOF",this[Ir](()=>this.emit("error",i))}if(e>this.remain){let i=new Error("did not encounter expected EOF");return i.path=this.absolute,i.syscall="read",i.code="EOF",this[Ir](()=>this.emit("error",i))}if(e===this.remain)for(let i=e;i<this.length&&e<this.blockRemain;i++)this.buf[i+this.offset]=0,e++,this.remain++;let r=this.offset===0&&e===this.buf.length?this.buf:this.buf.slice(this.offset,this.offset+e);this.write(r)?this[wl]():this[vl](()=>this[wl]())}[vl](e){this.once("drain",e)}write(e){if(this.blockRemain<e.length){let r=new Error("writing more data than expected");return r.path=this.absolute,this.emit("error",r)}return this.remain-=e.length,this.blockRemain-=e.length,this.pos+=e.length,this.offset+=e.length,super.write(e)}[wl](){if(!this.remain)return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),this[Ir](e=>e?this.emit("error",e):this.end());this.offset>=this.length&&(this.buf=Buffer.allocUnsafe(Math.min(this.blockRemain,this.buf.length)),this.offset=0),this.length=this.buf.length-this.offset,this[Ro]()}}),cm=class extends Do{[hl](){this[_o](Vt.lstatSync(this.absolute))}[fl](){this[pl](Vt.readlinkSync(this.absolute))}[ml](){this[gl](Vt.openSync(this.absolute,"r"))}[Ro](){let e=!0;try{let{fd:r,buf:n,offset:i,length:s,pos:o}=this,a=Vt.readSync(r,n,i,s,o);this[dl](a),e=!1}finally{if(e)try{this[Ir](()=>{})}catch{}}}[vl](e){e()}[Ir](e){Vt.closeSync(this.fd),e()}},Gx=sm(class extends Kp{constructor(e,r){r=r||{};super(r);this.preservePaths=!!r.preservePaths,this.portable=!!r.portable,this.strict=!!r.strict,this.noPax=!!r.noPax,this.noMtime=!!r.noMtime,this.readEntry=e,this.type=e.type,this.type==="Directory"&&this.portable&&(this.noMtime=!0),this.prefix=r.prefix||null,this.path=Yt(e.path),this.mode=this[Io](e.mode),this.uid=this.portable?null:e.uid,this.gid=this.portable?null:e.gid,this.uname=this.portable?null:e.uname,this.gname=this.portable?null:e.gname,this.size=e.size,this.mtime=this.noMtime?null:r.mtime||e.mtime,this.atime=this.portable?null:e.atime,this.ctime=this.portable?null:e.ctime,this.linkpath=Yt(e.linkpath),typeof r.onwarn=="function"&&this.on("warn",r.onwarn);let n=!1;if(!this.preservePaths){let[i,s]=om(this.path);i&&(this.path=s,n=i)}this.remain=e.size,this.blockRemain=e.startBlockSize,this.header=new Xp({path:this[Kt](this.path),linkpath:this.type==="Link"?this[Kt](this.linkpath):this.linkpath,mode:this.mode,uid:this.portable?null:this.uid,gid:this.portable?null:this.gid,size:this.size,mtime:this.noMtime?null:this.mtime,type:this.type,uname:this.portable?null:this.uname,atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime}),n&&this.warn("TAR_ENTRY_INFO",`stripping ${n} from absolute path`,{entry:this,path:n+this.path}),this.header.encode()&&!this.noPax&&super.write(new Jp({atime:this.portable?null:this.atime,ctime:this.portable?null:this.ctime,gid:this.portable?null:this.gid,mtime:this.noMtime?null:this.mtime,path:this[Kt](this.path),linkpath:this.type==="Link"?this[Kt](this.linkpath):this.linkpath,size:this.size,uid:this.portable?null:this.uid,uname:this.portable?null:this.uname,dev:this.portable?null:this.readEntry.dev,ino:this.portable?null:this.readEntry.ino,nlink:this.portable?null:this.readEntry.nlink}).encode()),super.write(this.header.block),e.pipe(this)}[Kt](e){return Qp(e,this.prefix)}[Io](e){return am(e,this.type==="Directory",this.portable)}write(e){let r=e.length;if(r>this.blockRemain)throw new Error("writing more to entry than is appropriate");return this.blockRemain-=r,super.write(e)}end(){return this.blockRemain&&super.write(Buffer.alloc(this.blockRemain)),super.end()}});Do.Sync=cm;Do.Tar=Gx;var Vx=t=>t.isFile()?"File":t.isDirectory()?"Directory":t.isSymbolicLink()?"SymbolicLink":"Unsupported";lm.exports=Do});var Uo=j((PL,vm)=>{"use strict";var bl=class{constructor(e,r){this.path=e||"./",this.absolute=r,this.entry=null,this.stat=null,this.readdir=null,this.pending=!1,this.ignore=!1,this.piped=!1}},Yx=Vn(),Kx=el(),Jx=Co(),El=yl(),Xx=El.Sync,Zx=El.Tar,Qx=Wi(),um=Buffer.alloc(1024),Lo=Symbol("onStat"),ko=Symbol("ended"),Jt=Symbol("queue"),Qn=Symbol("current"),hn=Symbol("process"),Fo=Symbol("processing"),fm=Symbol("processJob"),Xt=Symbol("jobs"),Cl=Symbol("jobDone"),To=Symbol("addFSEntry"),hm=Symbol("addTarEntry"),xl=Symbol("stat"),Sl=Symbol("readdir"),No=Symbol("onreaddir"),$o=Symbol("pipe"),dm=Symbol("entry"),Pl=Symbol("entryOpt"),Al=Symbol("writeEntryClass"),pm=Symbol("write"),Ol=Symbol("ondrain"),jo=require("fs"),mm=require("path"),eS=Ao(),Rl=Kn(),_l=eS(class extends Yx{constructor(e){super(e);e=e||Object.create(null),this.opt=e,this.file=e.file||"",this.cwd=e.cwd||process.cwd(),this.maxReadSize=e.maxReadSize,this.preservePaths=!!e.preservePaths,this.strict=!!e.strict,this.noPax=!!e.noPax,this.prefix=Rl(e.prefix||""),this.linkCache=e.linkCache||new Map,this.statCache=e.statCache||new Map,this.readdirCache=e.readdirCache||new Map,this[Al]=El,typeof e.onwarn=="function"&&this.on("warn",e.onwarn),this.portable=!!e.portable,this.zip=null,e.gzip?(typeof e.gzip!="object"&&(e.gzip={}),this.portable&&(e.gzip.portable=!0),this.zip=new Kx.Gzip(e.gzip),this.zip.on("data",r=>super.write(r)),this.zip.on("end",r=>super.end()),this.zip.on("drain",r=>this[Ol]()),this.on("resume",r=>this.zip.resume())):this.on("drain",this[Ol]),this.noDirRecurse=!!e.noDirRecurse,this.follow=!!e.follow,this.noMtime=!!e.noMtime,this.mtime=e.mtime||null,this.filter=typeof e.filter=="function"?e.filter:r=>!0,this[Jt]=new Qx,this[Xt]=0,this.jobs=+e.jobs||4,this[Fo]=!1,this[ko]=!1}[pm](e){return super.write(e)}add(e){return this.write(e),this}end(e){return e&&this.write(e),this[ko]=!0,this[hn](),this}write(e){if(this[ko])throw new Error("write after end");return e instanceof Jx?this[hm](e):this[To](e),this.flowing}[hm](e){let r=Rl(mm.resolve(this.cwd,e.path));if(!this.filter(e.path,e))e.resume();else{let n=new bl(e.path,r,!1);n.entry=new Zx(e,this[Pl](n)),n.entry.on("end",i=>this[Cl](n)),this[Xt]+=1,this[Jt].push(n)}this[hn]()}[To](e){let r=Rl(mm.resolve(this.cwd,e));this[Jt].push(new bl(e,r)),this[hn]()}[xl](e){e.pending=!0,this[Xt]+=1;let r=this.follow?"stat":"lstat";jo[r](e.absolute,(n,i)=>{e.pending=!1,this[Xt]-=1,n?this.emit("error",n):this[Lo](e,i)})}[Lo](e,r){this.statCache.set(e.absolute,r),e.stat=r,this.filter(e.path,r)||(e.ignore=!0),this[hn]()}[Sl](e){e.pending=!0,this[Xt]+=1,jo.readdir(e.absolute,(r,n)=>{if(e.pending=!1,this[Xt]-=1,r)return this.emit("error",r);this[No](e,n)})}[No](e,r){this.readdirCache.set(e.absolute,r),e.readdir=r,this[hn]()}[hn](){if(!this[Fo]){this[Fo]=!0;for(let e=this[Jt].head;e!==null&&this[Xt]<this.jobs;e=e.next)if(this[fm](e.value),e.value.ignore){let r=e.next;this[Jt].removeNode(e),e.next=r}this[Fo]=!1,this[ko]&&!this[Jt].length&&this[Xt]===0&&(this.zip?this.zip.end(um):(super.write(um),super.end()))}}get[Qn](){return this[Jt]&&this[Jt].head&&this[Jt].head.value}[Cl](e){this[Jt].shift(),this[Xt]-=1,this[hn]()}[fm](e){if(!e.pending){if(e.entry){e===this[Qn]&&!e.piped&&this[$o](e);return}if(e.stat||(this.statCache.has(e.absolute)?this[Lo](e,this.statCache.get(e.absolute)):this[xl](e)),!!e.stat&&!e.ignore&&!(!this.noDirRecurse&&e.stat.isDirectory()&&!e.readdir&&(this.readdirCache.has(e.absolute)?this[No](e,this.readdirCache.get(e.absolute)):this[Sl](e),!e.readdir))){if(e.entry=this[dm](e),!e.entry){e.ignore=!0;return}e===this[Qn]&&!e.piped&&this[$o](e)}}}[Pl](e){return{onwarn:(r,n,i)=>this.warn(r,n,i),noPax:this.noPax,cwd:this.cwd,absolute:e.absolute,preservePaths:this.preservePaths,maxReadSize:this.maxReadSize,strict:this.strict,portable:this.portable,linkCache:this.linkCache,statCache:this.statCache,noMtime:this.noMtime,mtime:this.mtime,prefix:this.prefix}}[dm](e){this[Xt]+=1;try{return new this[Al](e.path,this[Pl](e)).on("end",()=>this[Cl](e)).on("error",r=>this.emit("error",r))}catch(r){this.emit("error",r)}}[Ol](){this[Qn]&&this[Qn].entry&&this[Qn].entry.resume()}[$o](e){e.piped=!0,e.readdir&&e.readdir.forEach(i=>{let s=e.path,o=s==="./"?"":s.replace(/\/*$/,"/");this[To](o+i)});let r=e.entry,n=this.zip;n?r.on("data",i=>{n.write(i)||r.pause()}):r.on("data",i=>{super.write(i)||r.pause()})}pause(){return this.zip&&this.zip.pause(),super.pause()}}),gm=class extends _l{constructor(e){super(e);this[Al]=Xx}pause(){}resume(){}[xl](e){let r=this.follow?"statSync":"lstatSync";this[Lo](e,jo[r](e.absolute))}[Sl](e,r){this[No](e,jo.readdirSync(e.absolute))}[$o](e){let r=e.entry,n=this.zip;e.readdir&&e.readdir.forEach(i=>{let s=e.path,o=s==="./"?"":s.replace(/\/*$/,"/");this[To](o+i)}),n?r.on("data",i=>{n.write(i)}):r.on("data",i=>{super[pm](i)})}};_l.Sync=gm;vm.exports=_l});var ai=j(Qi=>{"use strict";var tS=Vn(),rS=require("events").EventEmitter,at=require("fs"),Il=at.writev;if(!Il){let t=process.binding("fs"),e=t.FSReqWrap||t.FSReqCallback;Il=(r,n,i,s)=>{let o=(c,u)=>s(c,u,n),a=new e;a.oncomplete=o,t.writeBuffers(r,n,i,a)}}var ei=Symbol("_autoClose"),Ut=Symbol("_close"),Zi=Symbol("_ended"),ve=Symbol("_fd"),wm=Symbol("_finished"),Dr=Symbol("_flags"),Dl=Symbol("_flush"),Ll=Symbol("_handleChunk"),kl=Symbol("_makeBuf"),Mo=Symbol("_mode"),Bo=Symbol("_needDrain"),ti=Symbol("_onerror"),ri=Symbol("_onopen"),Fl=Symbol("_onread"),ni=Symbol("_onwrite"),Lr=Symbol("_open"),cr=Symbol("_path"),dn=Symbol("_pos"),Zt=Symbol("_queue"),ii=Symbol("_read"),ym=Symbol("_readSize"),kr=Symbol("_reading"),qo=Symbol("_remain"),bm=Symbol("_size"),Ho=Symbol("_write"),si=Symbol("_writing"),Wo=Symbol("_defaultFlag"),oi=Symbol("_errored"),Tl=class extends tS{constructor(e,r){r=r||{};super(r);if(this.readable=!0,this.writable=!1,typeof e!="string")throw new TypeError("path must be a string");this[oi]=!1,this[ve]=typeof r.fd=="number"?r.fd:null,this[cr]=e,this[ym]=r.readSize||16*1024*1024,this[kr]=!1,this[bm]=typeof r.size=="number"?r.size:1/0,this[qo]=this[bm],this[ei]=typeof r.autoClose=="boolean"?r.autoClose:!0,typeof this[ve]=="number"?this[ii]():this[Lr]()}get fd(){return this[ve]}get path(){return this[cr]}write(){throw new TypeError("this is a readable stream")}end(){throw new TypeError("this is a readable stream")}[Lr](){at.open(this[cr],"r",(e,r)=>this[ri](e,r))}[ri](e,r){e?this[ti](e):(this[ve]=r,this.emit("open",r),this[ii]())}[kl](){return Buffer.allocUnsafe(Math.min(this[ym],this[qo]))}[ii](){if(!this[kr]){this[kr]=!0;let e=this[kl]();if(e.length===0)return process.nextTick(()=>this[Fl](null,0,e));at.read(this[ve],e,0,e.length,null,(r,n,i)=>this[Fl](r,n,i))}}[Fl](e,r,n){this[kr]=!1,e?this[ti](e):this[Ll](r,n)&&this[ii]()}[Ut](){if(this[ei]&&typeof this[ve]=="number"){let e=this[ve];this[ve]=null,at.close(e,r=>r?this.emit("error",r):this.emit("close"))}}[ti](e){this[kr]=!0,this[Ut](),this.emit("error",e)}[Ll](e,r){let n=!1;return this[qo]-=e,e>0&&(n=super.write(e<r.length?r.slice(0,e):r)),(e===0||this[qo]<=0)&&(n=!1,this[Ut](),super.end()),n}emit(e,r){switch(e){case"prefinish":case"finish":break;case"drain":typeof this[ve]=="number"&&this[ii]();break;case"error":return this[oi]?void 0:(this[oi]=!0,super.emit(e,r));default:return super.emit(e,r)}}},Em=class extends Tl{[Lr](){let e=!0;try{this[ri](null,at.openSync(this[cr],"r")),e=!1}finally{e&&this[Ut]()}}[ii](){let e=!0;try{if(!this[kr]){this[kr]=!0;do{let r=this[kl](),n=r.length===0?0:at.readSync(this[ve],r,0,r.length,null);if(!this[Ll](n,r))break}while(!0);this[kr]=!1}e=!1}finally{e&&this[Ut]()}}[Ut](){if(this[ei]&&typeof this[ve]=="number"){let e=this[ve];this[ve]=null,at.closeSync(e),this.emit("close")}}},Nl=class extends rS{constructor(e,r){r=r||{};super(r);this.readable=!1,this.writable=!0,this[oi]=!1,this[si]=!1,this[Zi]=!1,this[Bo]=!1,this[Zt]=[],this[cr]=e,this[ve]=typeof r.fd=="number"?r.fd:null,this[Mo]=r.mode===void 0?438:r.mode,this[dn]=typeof r.start=="number"?r.start:null,this[ei]=typeof r.autoClose=="boolean"?r.autoClose:!0;let n=this[dn]!==null?"r+":"w";this[Wo]=r.flags===void 0,this[Dr]=this[Wo]?n:r.flags,this[ve]===null&&this[Lr]()}emit(e,r){if(e==="error"){if(this[oi])return;this[oi]=!0}return super.emit(e,r)}get fd(){return this[ve]}get path(){return this[cr]}[ti](e){this[Ut](),this[si]=!0,this.emit("error",e)}[Lr](){at.open(this[cr],this[Dr],this[Mo],(e,r)=>this[ri](e,r))}[ri](e,r){this[Wo]&&this[Dr]==="r+"&&e&&e.code==="ENOENT"?(this[Dr]="w",this[Lr]()):e?this[ti](e):(this[ve]=r,this.emit("open",r),this[Dl]())}end(e,r){return e&&this.write(e,r),this[Zi]=!0,!this[si]&&!this[Zt].length&&typeof this[ve]=="number"&&this[ni](null,0),this}write(e,r){return typeof e=="string"&&(e=Buffer.from(e,r)),this[Zi]?(this.emit("error",new Error("write() after end()")),!1):this[ve]===null||this[si]||this[Zt].length?(this[Zt].push(e),this[Bo]=!0,!1):(this[si]=!0,this[Ho](e),!0)}[Ho](e){at.write(this[ve],e,0,e.length,this[dn],(r,n)=>this[ni](r,n))}[ni](e,r){e?this[ti](e):(this[dn]!==null&&(this[dn]+=r),this[Zt].length?this[Dl]():(this[si]=!1,this[Zi]&&!this[wm]?(this[wm]=!0,this[Ut](),this.emit("finish")):this[Bo]&&(this[Bo]=!1,this.emit("drain"))))}[Dl](){if(this[Zt].length===0)this[Zi]&&this[ni](null,0);else if(this[Zt].length===1)this[Ho](this[Zt].pop());else{let e=this[Zt];this[Zt]=[],Il(this[ve],e,this[dn],(r,n)=>this[ni](r,n))}}[Ut](){if(this[ei]&&typeof this[ve]=="number"){let e=this[ve];this[ve]=null,at.close(e,r=>r?this.emit("error",r):this.emit("close"))}}},Cm=class extends Nl{[Lr](){let e;if(this[Wo]&&this[Dr]==="r+")try{e=at.openSync(this[cr],this[Dr],this[Mo])}catch(r){if(r.code==="ENOENT")return this[Dr]="w",this[Lr]();throw r}else e=at.openSync(this[cr],this[Dr],this[Mo]);this[ri](null,e)}[Ut](){if(this[ei]&&typeof this[ve]=="number"){let e=this[ve];this[ve]=null,at.closeSync(e),this.emit("close")}}[Ho](e){let r=!0;try{this[ni](null,at.writeSync(this[ve],e,0,e.length,this[dn])),r=!1}finally{if(r)try{this[Ut]()}catch{}}}};Qi.ReadStream=Tl;Qi.ReadStreamSync=Em;Qi.WriteStream=Nl;Qi.WriteStreamSync=Cm});var Xo=j((RL,_m)=>{"use strict";var nS=Ao(),iS=Xn(),sS=require("events"),oS=Wi(),aS=1024*1024,cS=Co(),xm=Po(),lS=el(),$l=Buffer.from([31,139]),At=Symbol("state"),pn=Symbol("writeEntry"),lr=Symbol("readEntry"),jl=Symbol("nextEntry"),Sm=Symbol("processEntry"),Ot=Symbol("extendedHeader"),es=Symbol("globalExtendedHeader"),Fr=Symbol("meta"),Pm=Symbol("emitMeta"),Ee=Symbol("buffer"),ur=Symbol("queue"),mn=Symbol("ended"),Am=Symbol("emittedEnd"),gn=Symbol("emit"),ct=Symbol("unzip"),zo=Symbol("consumeChunk"),Go=Symbol("consumeChunkSub"),Ul=Symbol("consumeBody"),Om=Symbol("consumeMeta"),Rm=Symbol("consumeHeader"),Vo=Symbol("consuming"),Ml=Symbol("bufferConcat"),Bl=Symbol("maybeEnd"),ts=Symbol("writing"),Tr=Symbol("aborted"),Yo=Symbol("onDone"),vn=Symbol("sawValidEntry"),Ko=Symbol("sawNullBlock"),Jo=Symbol("sawEOF"),uS=t=>!0;_m.exports=nS(class extends sS{constructor(e){e=e||{};super(e);this.file=e.file||"",this[vn]=null,this.on(Yo,r=>{(this[At]==="begin"||this[vn]===!1)&&this.warn("TAR_BAD_ARCHIVE","Unrecognized archive format")}),e.ondone?this.on(Yo,e.ondone):this.on(Yo,r=>{this.emit("prefinish"),this.emit("finish"),this.emit("end"),this.emit("close")}),this.strict=!!e.strict,this.maxMetaEntrySize=e.maxMetaEntrySize||aS,this.filter=typeof e.filter=="function"?e.filter:uS,this.writable=!0,this.readable=!1,this[ur]=new oS,this[Ee]=null,this[lr]=null,this[pn]=null,this[At]="begin",this[Fr]="",this[Ot]=null,this[es]=null,this[mn]=!1,this[ct]=null,this[Tr]=!1,this[Ko]=!1,this[Jo]=!1,typeof e.onwarn=="function"&&this.on("warn",e.onwarn),typeof e.onentry=="function"&&this.on("entry",e.onentry)}[Rm](e,r){this[vn]===null&&(this[vn]=!1);let n;try{n=new iS(e,r,this[Ot],this[es])}catch(i){return this.warn("TAR_ENTRY_INVALID",i)}if(n.nullBlock)this[Ko]?(this[Jo]=!0,this[At]==="begin"&&(this[At]="header"),this[gn]("eof")):(this[Ko]=!0,this[gn]("nullBlock"));else if(this[Ko]=!1,!n.cksumValid)this.warn("TAR_ENTRY_INVALID","checksum failure",{header:n});else if(!n.path)this.warn("TAR_ENTRY_INVALID","path is required",{header:n});else{let i=n.type;if(/^(Symbolic)?Link$/.test(i)&&!n.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath required",{header:n});else if(!/^(Symbolic)?Link$/.test(i)&&n.linkpath)this.warn("TAR_ENTRY_INVALID","linkpath forbidden",{header:n});else{let s=this[pn]=new cS(n,this[Ot],this[es]);if(!this[vn])if(s.remain){let o=()=>{s.invalid||(this[vn]=!0)};s.on("end",o)}else this[vn]=!0;s.meta?s.size>this.maxMetaEntrySize?(s.ignore=!0,this[gn]("ignoredEntry",s),this[At]="ignore",s.resume()):s.size>0&&(this[Fr]="",s.on("data",o=>this[Fr]+=o),this[At]="meta"):(this[Ot]=null,s.ignore=s.ignore||!this.filter(s.path,s),s.ignore?(this[gn]("ignoredEntry",s),this[At]=s.remain?"ignore":"header",s.resume()):(s.remain?this[At]="body":(this[At]="header",s.end()),this[lr]?this[ur].push(s):(this[ur].push(s),this[jl]())))}}}[Sm](e){let r=!0;return e?Array.isArray(e)?this.emit.apply(this,e):(this[lr]=e,this.emit("entry",e),e.emittedEnd||(e.on("end",n=>this[jl]()),r=!1)):(this[lr]=null,r=!1),r}[jl](){do;while(this[Sm](this[ur].shift()));if(!this[ur].length){let e=this[lr];!e||e.flowing||e.size===e.remain?this[ts]||this.emit("drain"):e.once("drain",n=>this.emit("drain"))}}[Ul](e,r){let n=this[pn],i=n.blockRemain,s=i>=e.length&&r===0?e:e.slice(r,r+i);return n.write(s),n.blockRemain||(this[At]="header",this[pn]=null,n.end()),s.length}[Om](e,r){let n=this[pn],i=this[Ul](e,r);return this[pn]||this[Pm](n),i}[gn](e,r,n){!this[ur].length&&!this[lr]?this.emit(e,r,n):this[ur].push([e,r,n])}[Pm](e){switch(this[gn]("meta",this[Fr]),e.type){case"ExtendedHeader":case"OldExtendedHeader":this[Ot]=xm.parse(this[Fr],this[Ot],!1);break;case"GlobalExtendedHeader":this[es]=xm.parse(this[Fr],this[es],!0);break;case"NextFileHasLongPath":case"OldGnuLongPath":this[Ot]=this[Ot]||Object.create(null),this[Ot].path=this[Fr].replace(/\0.*/,"");break;case"NextFileHasLongLinkpath":this[Ot]=this[Ot]||Object.create(null),this[Ot].linkpath=this[Fr].replace(/\0.*/,"");break;default:throw new Error("unknown meta: "+e.type)}}abort(e){this[Tr]=!0,this.emit("abort",e),this.warn("TAR_ABORT",e,{recoverable:!1})}write(e){if(this[Tr])return;if(this[ct]===null&&e){if(this[Ee]&&(e=Buffer.concat([this[Ee],e]),this[Ee]=null),e.length<$l.length)return this[Ee]=e,!0;for(let n=0;this[ct]===null&&n<$l.length;n++)e[n]!==$l[n]&&(this[ct]=!1);if(this[ct]===null){let n=this[mn];this[mn]=!1,this[ct]=new lS.Unzip,this[ct].on("data",s=>this[zo](s)),this[ct].on("error",s=>this.abort(s)),this[ct].on("end",s=>{this[mn]=!0,this[zo]()}),this[ts]=!0;let i=this[ct][n?"end":"write"](e);return this[ts]=!1,i}}this[ts]=!0,this[ct]?this[ct].write(e):this[zo](e),this[ts]=!1;let r=this[ur].length?!1:this[lr]?this[lr].flowing:!0;return!r&&!this[ur].length&&this[lr].once("drain",n=>this.emit("drain")),r}[Ml](e){e&&!this[Tr]&&(this[Ee]=this[Ee]?Buffer.concat([this[Ee],e]):e)}[Bl](){if(this[mn]&&!this[Am]&&!this[Tr]&&!this[Vo]){this[Am]=!0;let e=this[pn];if(e&&e.blockRemain){let r=this[Ee]?this[Ee].length:0;this.warn("TAR_BAD_ARCHIVE",`Truncated input (needed ${e.blockRemain} more bytes, only ${r} available)`,{entry:e}),this[Ee]&&e.write(this[Ee]),e.end()}this[gn](Yo)}}[zo](e){if(this[Vo])this[Ml](e);else if(!e&&!this[Ee])this[Bl]();else{if(this[Vo]=!0,this[Ee]){this[Ml](e);let r=this[Ee];this[Ee]=null,this[Go](r)}else this[Go](e);for(;this[Ee]&&this[Ee].length>=512&&!this[Tr]&&!this[Jo];){let r=this[Ee];this[Ee]=null,this[Go](r)}this[Vo]=!1}(!this[Ee]||this[mn])&&this[Bl]()}[Go](e){let r=0,n=e.length;for(;r+512<=n&&!this[Tr]&&!this[Jo];)switch(this[At]){case"begin":case"header":this[Rm](e,r),r+=512;break;case"ignore":case"body":r+=this[Ul](e,r);break;case"meta":r+=this[Om](e,r);break;default:throw new Error("invalid state: "+this[At])}r<n&&(this[Ee]?this[Ee]=Buffer.concat([e.slice(r),this[Ee]]):this[Ee]=e.slice(r))}end(e){this[Tr]||(this[ct]?this[ct].end(e):(this[mn]=!0,this.write(e)))}})});var Zo=j((_L,km)=>{"use strict";var fS=Gn(),Im=Xo(),ci=require("fs"),hS=ai(),Dm=require("path"),ql=Zn();km.exports=(t,e,r)=>{typeof t=="function"?(r=t,e=null,t={}):Array.isArray(t)&&(e=t,t={}),typeof e=="function"&&(r=e,e=null),e?e=Array.from(e):e=[];let n=fS(t);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return e.length&&pS(n,e),n.noResume||dS(n),n.file&&n.sync?mS(n):n.file?gS(n,r):Lm(n)};var dS=t=>{let e=t.onentry;t.onentry=e?r=>{e(r),r.resume()}:r=>r.resume()},pS=(t,e)=>{let r=new Map(e.map(s=>[ql(s),!0])),n=t.filter,i=(s,o)=>{let a=o||Dm.parse(s).root||".",c=s===a?!1:r.has(s)?r.get(s):i(Dm.dirname(s),a);return r.set(s,c),c};t.filter=n?(s,o)=>n(s,o)&&i(ql(s)):s=>i(ql(s))},mS=t=>{let e=Lm(t),r=t.file,n=!0,i;try{let s=ci.statSync(r),o=t.maxReadSize||16*1024*1024;if(s.size<o)e.end(ci.readFileSync(r));else{let a=0,c=Buffer.allocUnsafe(o);for(i=ci.openSync(r,"r");a<s.size;){let u=ci.readSync(i,c,0,o,a);a+=u,e.write(c.slice(0,u))}e.end()}n=!1}finally{if(n&&i)try{ci.closeSync(i)}catch{}}},gS=(t,e)=>{let r=new Im(t),n=t.maxReadSize||16*1024*1024,i=t.file,s=new Promise((o,a)=>{r.on("error",a),r.on("end",o),ci.stat(i,(c,u)=>{if(c)a(c);else{let l=new hS.ReadStream(i,{readSize:n,size:u.size});l.on("error",a),l.pipe(r)}})});return e?s.then(e,e):s},Lm=t=>new Im(t)});var Um=j((IL,jm)=>{"use strict";var vS=Gn(),Qo=Uo(),Fm=ai(),Tm=Zo(),Nm=require("path");jm.exports=(t,e,r)=>{if(typeof e=="function"&&(r=e),Array.isArray(t)&&(e=t,t={}),!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");e=Array.from(e);let n=vS(t);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return n.file&&n.sync?wS(n,e):n.file?yS(n,e,r):n.sync?bS(n,e):ES(n,e)};var wS=(t,e)=>{let r=new Qo.Sync(t),n=new Fm.WriteStreamSync(t.file,{mode:t.mode||438});r.pipe(n),$m(r,e)},yS=(t,e,r)=>{let n=new Qo(t),i=new Fm.WriteStream(t.file,{mode:t.mode||438});n.pipe(i);let s=new Promise((o,a)=>{i.on("error",a),i.on("close",o),n.on("error",a)});return Hl(n,e),r?s.then(r,r):s},$m=(t,e)=>{e.forEach(r=>{r.charAt(0)==="@"?Tm({file:Nm.resolve(t.cwd,r.substr(1)),sync:!0,noResume:!0,onentry:n=>t.add(n)}):t.add(r)}),t.end()},Hl=(t,e)=>{for(;e.length;){let r=e.shift();if(r.charAt(0)==="@")return Tm({file:Nm.resolve(t.cwd,r.substr(1)),noResume:!0,onentry:n=>t.add(n)}).then(n=>Hl(t,e));t.add(r)}t.end()},bS=(t,e)=>{let r=new Qo.Sync(t);return $m(r,e),r},ES=(t,e)=>{let r=new Qo(t);return Hl(r,e),r}});var Wl=j((DL,Gm)=>{"use strict";var CS=Gn(),Mm=Uo(),vt=require("fs"),Bm=ai(),qm=Zo(),Hm=require("path"),Wm=Xn();Gm.exports=(t,e,r)=>{let n=CS(t);if(!n.file)throw new TypeError("file is required");if(n.gzip)throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),n.sync?xS(n,e):PS(n,e,r)};var xS=(t,e)=>{let r=new Mm.Sync(t),n=!0,i,s;try{try{i=vt.openSync(t.file,"r+")}catch(c){if(c.code==="ENOENT")i=vt.openSync(t.file,"w+");else throw c}let o=vt.fstatSync(i),a=Buffer.alloc(512);e:for(s=0;s<o.size;s+=512){for(let l=0,f=0;l<512;l+=f){if(f=vt.readSync(i,a,l,a.length-l,s+l),s===0&&a[0]===31&&a[1]===139)throw new Error("cannot append to compressed archives");if(!f)break e}let c=new Wm(a);if(!c.cksumValid)break;let u=512*Math.ceil(c.size/512);if(s+u+512>o.size)break;s+=u,t.mtimeCache&&t.mtimeCache.set(c.path,c.mtime)}n=!1,SS(t,r,s,i,e)}finally{if(n)try{vt.closeSync(i)}catch{}}},SS=(t,e,r,n,i)=>{let s=new Bm.WriteStreamSync(t.file,{fd:n,start:r});e.pipe(s),AS(e,i)},PS=(t,e,r)=>{e=Array.from(e);let n=new Mm(t),i=(o,a,c)=>{let u=(m,p)=>{m?vt.close(o,v=>c(m)):c(null,p)},l=0;if(a===0)return u(null,0);let f=0,h=Buffer.alloc(512),d=(m,p)=>{if(m)return u(m);if(f+=p,f<512&&p)return vt.read(o,h,f,h.length-f,l+f,d);if(l===0&&h[0]===31&&h[1]===139)return u(new Error("cannot append to compressed archives"));if(f<512)return u(null,l);let v=new Wm(h);if(!v.cksumValid)return u(null,l);let w=512*Math.ceil(v.size/512);if(l+w+512>a||(l+=w+512,l>=a))return u(null,l);t.mtimeCache&&t.mtimeCache.set(v.path,v.mtime),f=0,vt.read(o,h,0,512,l,d)};vt.read(o,h,0,512,l,d)},s=new Promise((o,a)=>{n.on("error",a);let c="r+",u=(l,f)=>{if(l&&l.code==="ENOENT"&&c==="r+")return c="w+",vt.open(t.file,c,u);if(l)return a(l);vt.fstat(f,(h,d)=>{if(h)return vt.close(f,()=>a(h));i(f,d.size,(m,p)=>{if(m)return a(m);let v=new Bm.WriteStream(t.file,{fd:f,start:p});n.pipe(v),v.on("error",a),v.on("close",o),zm(n,e)})})};vt.open(t.file,c,u)});return r?s.then(r,r):s},AS=(t,e)=>{e.forEach(r=>{r.charAt(0)==="@"?qm({file:Hm.resolve(t.cwd,r.substr(1)),sync:!0,noResume:!0,onentry:n=>t.add(n)}):t.add(r)}),t.end()},zm=(t,e)=>{for(;e.length;){let r=e.shift();if(r.charAt(0)==="@")return qm({file:Hm.resolve(t.cwd,r.substr(1)),noResume:!0,onentry:n=>t.add(n)}).then(n=>zm(t,e));t.add(r)}t.end()}});var Ym=j((LL,Vm)=>{"use strict";var OS=Gn(),RS=Wl();Vm.exports=(t,e,r)=>{let n=OS(t);if(!n.file)throw new TypeError("file is required");if(n.gzip)throw new TypeError("cannot append to compressed archives");if(!e||!Array.isArray(e)||!e.length)throw new TypeError("no files or directories specified");return e=Array.from(e),_S(n),RS(n,e,r)};var _S=t=>{let e=t.filter;t.mtimeCache||(t.mtimeCache=new Map),t.filter=e?(r,n)=>e(r,n)&&!(t.mtimeCache.get(r)>n.mtime):(r,n)=>!(t.mtimeCache.get(r)>n.mtime)}});var Xm=j((kL,Jm)=>{var{promisify:Km}=require("util"),Nr=require("fs"),IS=t=>{if(!t)t={mode:511,fs:Nr};else if(typeof t=="object")t=H({mode:511,fs:Nr},t);else if(typeof t=="number")t={mode:t,fs:Nr};else if(typeof t=="string")t={mode:parseInt(t,8),fs:Nr};else throw new TypeError("invalid options argument");return t.mkdir=t.mkdir||t.fs.mkdir||Nr.mkdir,t.mkdirAsync=Km(t.mkdir),t.stat=t.stat||t.fs.stat||Nr.stat,t.statAsync=Km(t.stat),t.statSync=t.statSync||t.fs.statSync||Nr.statSync,t.mkdirSync=t.mkdirSync||t.fs.mkdirSync||Nr.mkdirSync,t};Jm.exports=IS});var Qm=j((FL,Zm)=>{var DS=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,{resolve:LS,parse:kS}=require("path"),FS=t=>{if(/\0/.test(t))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:t,code:"ERR_INVALID_ARG_VALUE"});if(t=LS(t),DS==="win32"){let e=/[*|"<>?:]/,{root:r}=kS(t);if(e.test(t.substr(r.length)))throw Object.assign(new Error("Illegal characters in path."),{path:t,code:"EINVAL"})}return t};Zm.exports=FS});var ig=j((TL,ng)=>{var{dirname:eg}=require("path"),tg=(t,e,r=void 0)=>r===e?Promise.resolve():t.statAsync(e).then(n=>n.isDirectory()?r:void 0,n=>n.code==="ENOENT"?tg(t,eg(e),e):void 0),rg=(t,e,r=void 0)=>{if(r!==e)try{return t.statSync(e).isDirectory()?r:void 0}catch(n){return n.code==="ENOENT"?rg(t,eg(e),e):void 0}};ng.exports={findMade:tg,findMadeSync:rg}});var Vl=j((NL,og)=>{var{dirname:sg}=require("path"),zl=(t,e,r)=>{e.recursive=!1;let n=sg(t);return n===t?e.mkdirAsync(t,e).catch(i=>{if(i.code!=="EISDIR")throw i}):e.mkdirAsync(t,e).then(()=>r||t,i=>{if(i.code==="ENOENT")return zl(n,e).then(s=>zl(t,e,s));if(i.code!=="EEXIST"&&i.code!=="EROFS")throw i;return e.statAsync(t).then(s=>{if(s.isDirectory())return r;throw i},()=>{throw i})})},Gl=(t,e,r)=>{let n=sg(t);if(e.recursive=!1,n===t)try{return e.mkdirSync(t,e)}catch(i){if(i.code!=="EISDIR")throw i;return}try{return e.mkdirSync(t,e),r||t}catch(i){if(i.code==="ENOENT")return Gl(t,e,Gl(n,e,r));if(i.code!=="EEXIST"&&i.code!=="EROFS")throw i;try{if(!e.statSync(t).isDirectory())throw i}catch{throw i}}};og.exports={mkdirpManual:zl,mkdirpManualSync:Gl}});var lg=j(($L,cg)=>{var{dirname:ag}=require("path"),{findMade:TS,findMadeSync:NS}=ig(),{mkdirpManual:$S,mkdirpManualSync:jS}=Vl(),US=(t,e)=>(e.recursive=!0,ag(t)===t?e.mkdirAsync(t,e):TS(e,t).then(n=>e.mkdirAsync(t,e).then(()=>n).catch(i=>{if(i.code==="ENOENT")return $S(t,e);throw i}))),MS=(t,e)=>{if(e.recursive=!0,ag(t)===t)return e.mkdirSync(t,e);let n=NS(e,t);try{return e.mkdirSync(t,e),n}catch(i){if(i.code==="ENOENT")return jS(t,e);throw i}};cg.exports={mkdirpNative:US,mkdirpNativeSync:MS}});var dg=j((jL,hg)=>{var ug=require("fs"),BS=process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version,Yl=BS.replace(/^v/,"").split("."),fg=+Yl[0]>10||+Yl[0]==10&&+Yl[1]>=12,qS=fg?t=>t.mkdir===ug.mkdir:()=>!1,HS=fg?t=>t.mkdirSync===ug.mkdirSync:()=>!1;hg.exports={useNative:qS,useNativeSync:HS}});var yg=j((UL,wg)=>{var li=Xm(),ui=Qm(),{mkdirpNative:pg,mkdirpNativeSync:mg}=lg(),{mkdirpManual:gg,mkdirpManualSync:vg}=Vl(),{useNative:WS,useNativeSync:zS}=dg(),fi=(t,e)=>(t=ui(t),e=li(e),WS(e)?pg(t,e):gg(t,e)),GS=(t,e)=>(t=ui(t),e=li(e),zS(e)?mg(t,e):vg(t,e));fi.sync=GS;fi.native=(t,e)=>pg(ui(t),li(e));fi.manual=(t,e)=>gg(ui(t),li(e));fi.nativeSync=(t,e)=>mg(ui(t),li(e));fi.manualSync=(t,e)=>vg(ui(t),li(e));wg.exports=fi});var Ag=j((ML,Pg)=>{"use strict";var Rt=require("fs"),wn=require("path"),VS=Rt.lchown?"lchown":"chown",YS=Rt.lchownSync?"lchownSync":"chownSync",bg=Rt.lchown&&!process.version.match(/v1[1-9]+\./)&&!process.version.match(/v10\.[6-9]/),Eg=(t,e,r)=>{try{return Rt[YS](t,e,r)}catch(n){if(n.code!=="ENOENT")throw n}},KS=(t,e,r)=>{try{return Rt.chownSync(t,e,r)}catch(n){if(n.code!=="ENOENT")throw n}},JS=bg?(t,e,r,n)=>i=>{!i||i.code!=="EISDIR"?n(i):Rt.chown(t,e,r,n)}:(t,e,r,n)=>n,Kl=bg?(t,e,r)=>{try{return Eg(t,e,r)}catch(n){if(n.code!=="EISDIR")throw n;KS(t,e,r)}}:(t,e,r)=>Eg(t,e,r),XS=process.version,Cg=(t,e,r)=>Rt.readdir(t,e,r),ZS=(t,e)=>Rt.readdirSync(t,e);/^v4\./.test(XS)&&(Cg=(t,e,r)=>Rt.readdir(t,r));var ea=(t,e,r,n)=>{Rt[VS](t,e,r,JS(t,e,r,i=>{n(i&&i.code!=="ENOENT"?i:null)}))},xg=(t,e,r,n,i)=>{if(typeof e=="string")return Rt.lstat(wn.resolve(t,e),(s,o)=>{if(s)return i(s.code!=="ENOENT"?s:null);o.name=e,xg(t,o,r,n,i)});if(e.isDirectory())Jl(wn.resolve(t,e.name),r,n,s=>{if(s)return i(s);let o=wn.resolve(t,e.name);ea(o,r,n,i)});else{let s=wn.resolve(t,e.name);ea(s,r,n,i)}},Jl=(t,e,r,n)=>{Cg(t,{withFileTypes:!0},(i,s)=>{if(i){if(i.code==="ENOENT")return n();if(i.code!=="ENOTDIR"&&i.code!=="ENOTSUP")return n(i)}if(i||!s.length)return ea(t,e,r,n);let o=s.length,a=null,c=u=>{if(!a){if(u)return n(a=u);if(--o==0)return ea(t,e,r,n)}};s.forEach(u=>xg(t,u,e,r,c))})},QS=(t,e,r,n)=>{if(typeof e=="string")try{let i=Rt.lstatSync(wn.resolve(t,e));i.name=e,e=i}catch(i){if(i.code==="ENOENT")return;throw i}e.isDirectory()&&Sg(wn.resolve(t,e.name),r,n),Kl(wn.resolve(t,e.name),r,n)},Sg=(t,e,r)=>{let n;try{n=ZS(t,{withFileTypes:!0})}catch(i){if(i.code==="ENOENT")return;if(i.code==="ENOTDIR"||i.code==="ENOTSUP")return Kl(t,e,r);throw i}return n&&n.length&&n.forEach(i=>QS(t,i,e,r)),Kl(t,e,r)};Pg.exports=Jl;Jl.sync=Sg});var Ig=j((BL,Ql)=>{"use strict";var Og=yg(),_t=require("fs"),ta=require("path"),Rg=Ag(),Mt=Kn(),Xl=class extends Error{constructor(e,r){super("Cannot extract through symbolic link");this.path=r,this.symlink=e}get name(){return"SylinkError"}},Zl=class extends Error{constructor(e,r){super(r+": Cannot cd into '"+e+"'");this.path=e,this.code=r}get name(){return"CwdError"}},ra=(t,e)=>t.get(Mt(e)),rs=(t,e,r)=>t.set(Mt(e),r),eP=(t,e)=>{_t.stat(t,(r,n)=>{(r||!n.isDirectory())&&(r=new Zl(t,r&&r.code||"ENOTDIR")),e(r)})};Ql.exports=(t,e,r)=>{t=Mt(t);let n=e.umask,i=e.mode|448,s=(i&n)!=0,o=e.uid,a=e.gid,c=typeof o=="number"&&typeof a=="number"&&(o!==e.processUid||a!==e.processGid),u=e.preserve,l=e.unlink,f=e.cache,h=Mt(e.cwd),d=(v,w)=>{v?r(v):(rs(f,t,!0),w&&c?Rg(w,o,a,b=>d(b)):s?_t.chmod(t,i,r):r())};if(f&&ra(f,t)===!0)return d();if(t===h)return eP(t,d);if(u)return Og(t,{mode:i}).then(v=>d(null,v),d);let p=Mt(ta.relative(h,t)).split("/");na(h,p,i,f,l,h,null,d)};var na=(t,e,r,n,i,s,o,a)=>{if(!e.length)return a(null,o);let c=e.shift(),u=Mt(ta.resolve(t+"/"+c));if(ra(n,u))return na(u,e,r,n,i,s,o,a);_t.mkdir(u,r,_g(u,e,r,n,i,s,o,a))},_g=(t,e,r,n,i,s,o,a)=>c=>{c?_t.lstat(t,(u,l)=>{if(u)u.path=u.path&&Mt(u.path),a(u);else if(l.isDirectory())na(t,e,r,n,i,s,o,a);else if(i)_t.unlink(t,f=>{if(f)return a(f);_t.mkdir(t,r,_g(t,e,r,n,i,s,o,a))});else{if(l.isSymbolicLink())return a(new Xl(t,t+"/"+e.join("/")));a(c)}}):(o=o||t,na(t,e,r,n,i,s,o,a))},tP=t=>{let e=!1,r="ENOTDIR";try{e=_t.statSync(t).isDirectory()}catch(n){r=n.code}finally{if(!e)throw new Zl(t,r)}};Ql.exports.sync=(t,e)=>{t=Mt(t);let r=e.umask,n=e.mode|448,i=(n&r)!=0,s=e.uid,o=e.gid,a=typeof s=="number"&&typeof o=="number"&&(s!==e.processUid||o!==e.processGid),c=e.preserve,u=e.unlink,l=e.cache,f=Mt(e.cwd),h=v=>{rs(l,t,!0),v&&a&&Rg.sync(v,s,o),i&&_t.chmodSync(t,n)};if(l&&ra(l,t)===!0)return h();if(t===f)return tP(f),h();if(c)return h(Og.sync(t,n));let m=Mt(ta.relative(f,t)).split("/"),p=null;for(let v=m.shift(),w=f;v&&(w+="/"+v);v=m.shift())if(w=Mt(ta.resolve(w)),!ra(l,w))try{_t.mkdirSync(w,n),p=p||w,rs(l,w,!0)}catch{let E=_t.lstatSync(w);if(E.isDirectory()){rs(l,w,!0);continue}else if(u){_t.unlinkSync(w),_t.mkdirSync(w,n),p=p||w,rs(l,w,!0);continue}else if(E.isSymbolicLink())return new Xl(w,w+"/"+m.join("/"))}return h(p)}});var tu=j((qL,Dg)=>{var eu=Object.create(null),{hasOwnProperty:rP}=Object.prototype;Dg.exports=t=>(rP.call(eu,t)||(eu[t]=t.normalize("NFKD")),eu[t])});var Tg=j((HL,Fg)=>{var Lg=require("assert"),nP=tu(),iP=Zn(),{join:kg}=require("path"),sP=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,oP=sP==="win32";Fg.exports=()=>{let t=new Map,e=new Map,r=u=>u.split("/").slice(0,-1).reduce((f,h)=>(f.length&&(h=kg(f[f.length-1],h)),f.push(h||"/"),f),[]),n=new Set,i=u=>{let l=e.get(u);if(!l)throw new Error("function does not have any path reservations");return{paths:l.paths.map(f=>t.get(f)),dirs:[...l.dirs].map(f=>t.get(f))}},s=u=>{let{paths:l,dirs:f}=i(u);return l.every(h=>h[0]===u)&&f.every(h=>h[0]instanceof Set&&h[0].has(u))},o=u=>n.has(u)||!s(u)?!1:(n.add(u),u(()=>a(u)),!0),a=u=>{if(!n.has(u))return!1;let{paths:l,dirs:f}=e.get(u),h=new Set;return l.forEach(d=>{let m=t.get(d);Lg.equal(m[0],u),m.length===1?t.delete(d):(m.shift(),typeof m[0]=="function"?h.add(m[0]):m[0].forEach(p=>h.add(p)))}),f.forEach(d=>{let m=t.get(d);Lg(m[0]instanceof Set),m[0].size===1&&m.length===1?t.delete(d):m[0].size===1?(m.shift(),h.add(m[0])):m[0].delete(u)}),n.delete(u),h.forEach(d=>o(d)),!0};return{check:s,reserve:(u,l)=>{u=oP?["win32 parallelization disabled"]:u.map(h=>nP(iP(kg(h))).toLowerCase());let f=new Set(u.map(h=>r(h)).reduce((h,d)=>h.concat(d)));return e.set(l,{dirs:f,paths:u}),u.forEach(h=>{let d=t.get(h);d?d.push(l):t.set(h,[l])}),f.forEach(h=>{let d=t.get(h);d?d[d.length-1]instanceof Set?d[d.length-1].add(l):d.push(new Set([l])):t.set(h,[new Set([l])])}),o(l)}}}});var jg=j((WL,$g)=>{var aP=process.env.__FAKE_PLATFORM__||process.platform,cP=aP==="win32",lP=global.__FAKE_TESTING_FS__||require("fs"),{O_CREAT:uP,O_TRUNC:fP,O_WRONLY:hP,UV_FS_O_FILEMAP:Ng=0}=lP.constants,dP=cP&&!!Ng,pP=512*1024,mP=Ng|fP|uP|hP;$g.exports=dP?t=>t<pP?mP:"w":()=>"w"});var lu=j((zL,Qg)=>{"use strict";var gP=require("assert"),vP=Xo(),pe=require("fs"),wP=ai(),fr=require("path"),Ug=Ig(),Mg=ll(),yP=Tg(),bP=ul(),wt=Kn(),EP=Zn(),CP=tu(),Bg=Symbol("onEntry"),ru=Symbol("checkFs"),qg=Symbol("checkFs2"),ia=Symbol("pruneCache"),nu=Symbol("isReusable"),It=Symbol("makeFs"),iu=Symbol("file"),su=Symbol("directory"),sa=Symbol("link"),Hg=Symbol("symlink"),Wg=Symbol("hardlink"),zg=Symbol("unsupported"),Gg=Symbol("checkPath"),$r=Symbol("mkdir"),Ke=Symbol("onError"),oa=Symbol("pending"),Vg=Symbol("pend"),hi=Symbol("unpend"),ou=Symbol("ended"),au=Symbol("maybeClose"),cu=Symbol("skip"),ns=Symbol("doChown"),is=Symbol("uid"),ss=Symbol("gid"),os=Symbol("checkedCwd"),Yg=require("crypto"),Kg=jg(),xP=process.env.TESTING_TAR_FAKE_PLATFORM||process.platform,as=xP==="win32",SP=(t,e)=>{if(!as)return pe.unlink(t,e);let r=t+".DELETE."+Yg.randomBytes(16).toString("hex");pe.rename(t,r,n=>{if(n)return e(n);pe.unlink(r,e)})},PP=t=>{if(!as)return pe.unlinkSync(t);let e=t+".DELETE."+Yg.randomBytes(16).toString("hex");pe.renameSync(t,e),pe.unlinkSync(e)},Jg=(t,e,r)=>t===t>>>0?t:e===e>>>0?e:r,Xg=t=>CP(EP(wt(t))).toLowerCase(),AP=(t,e)=>{e=Xg(e);for(let r of t.keys()){let n=Xg(r);(n===e||n.indexOf(e+"/")===0)&&t.delete(r)}},OP=t=>{for(let e of t.keys())t.delete(e)},aa=class extends vP{constructor(e){e||(e={}),e.ondone=r=>{this[ou]=!0,this[au]()};super(e);if(this[os]=!1,this.reservations=yP(),this.transform=typeof e.transform=="function"?e.transform:null,this.writable=!0,this.readable=!1,this[oa]=0,this[ou]=!1,this.dirCache=e.dirCache||new Map,typeof e.uid=="number"||typeof e.gid=="number"){if(typeof e.uid!="number"||typeof e.gid!="number")throw new TypeError("cannot set owner without number uid and gid");if(e.preserveOwner)throw new TypeError("cannot preserve owner in archive and also set owner explicitly");this.uid=e.uid,this.gid=e.gid,this.setOwner=!0}else this.uid=null,this.gid=null,this.setOwner=!1;e.preserveOwner===void 0&&typeof e.uid!="number"?this.preserveOwner=process.getuid&&process.getuid()===0:this.preserveOwner=!!e.preserveOwner,this.processUid=(this.preserveOwner||this.setOwner)&&process.getuid?process.getuid():null,this.processGid=(this.preserveOwner||this.setOwner)&&process.getgid?process.getgid():null,this.forceChown=e.forceChown===!0,this.win32=!!e.win32||as,this.newer=!!e.newer,this.keep=!!e.keep,this.noMtime=!!e.noMtime,this.preservePaths=!!e.preservePaths,this.unlink=!!e.unlink,this.cwd=wt(fr.resolve(e.cwd||process.cwd())),this.strip=+e.strip||0,this.processUmask=e.noChmod?0:process.umask(),this.umask=typeof e.umask=="number"?e.umask:this.processUmask,this.dmode=e.dmode||511&~this.umask,this.fmode=e.fmode||438&~this.umask,this.on("entry",r=>this[Bg](r))}warn(e,r,n={}){return(e==="TAR_BAD_ARCHIVE"||e==="TAR_ABORT")&&(n.recoverable=!1),super.warn(e,r,n)}[au](){this[ou]&&this[oa]===0&&(this.emit("prefinish"),this.emit("finish"),this.emit("end"),this.emit("close"))}[Gg](e){if(this.strip){let r=wt(e.path).split("/");if(r.length<this.strip)return!1;if(e.path=r.slice(this.strip).join("/"),e.type==="Link"){let n=wt(e.linkpath).split("/");if(n.length>=this.strip)e.linkpath=n.slice(this.strip).join("/");else return!1}}if(!this.preservePaths){let r=wt(e.path),n=r.split("/");if(n.includes("..")||as&&/^[a-z]:\.\.$/i.test(n[0]))return this.warn("TAR_ENTRY_ERROR","path contains '..'",{entry:e,path:r}),!1;let[i,s]=bP(r);i&&(e.path=s,this.warn("TAR_ENTRY_INFO",`stripping ${i} from absolute path`,{entry:e,path:r}))}if(fr.isAbsolute(e.path)?e.absolute=wt(fr.resolve(e.path)):e.absolute=wt(fr.resolve(this.cwd,e.path)),!this.preservePaths&&e.absolute.indexOf(this.cwd+"/")!==0&&e.absolute!==this.cwd)return this.warn("TAR_ENTRY_ERROR","path escaped extraction target",{entry:e,path:wt(e.path),resolvedPath:e.absolute,cwd:this.cwd}),!1;if(e.absolute===this.cwd&&e.type!=="Directory"&&e.type!=="GNUDumpDir")return!1;if(this.win32){let{root:r}=fr.win32.parse(e.absolute);e.absolute=r+Mg.encode(e.absolute.substr(r.length));let{root:n}=fr.win32.parse(e.path);e.path=n+Mg.encode(e.path.substr(n.length))}return!0}[Bg](e){if(!this[Gg](e))return e.resume();switch(gP.equal(typeof e.absolute,"string"),e.type){case"Directory":case"GNUDumpDir":e.mode&&(e.mode=e.mode|448);case"File":case"OldFile":case"ContiguousFile":case"Link":case"SymbolicLink":return this[ru](e);case"CharacterDevice":case"BlockDevice":case"FIFO":default:return this[zg](e)}}[Ke](e,r){e.name==="CwdError"?this.emit("error",e):(this.warn("TAR_ENTRY_ERROR",e,{entry:r}),this[hi](),r.resume())}[$r](e,r,n){Ug(wt(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:r,noChmod:this.noChmod},n)}[ns](e){return this.forceChown||this.preserveOwner&&(typeof e.uid=="number"&&e.uid!==this.processUid||typeof e.gid=="number"&&e.gid!==this.processGid)||typeof this.uid=="number"&&this.uid!==this.processUid||typeof this.gid=="number"&&this.gid!==this.processGid}[is](e){return Jg(this.uid,e.uid,this.processUid)}[ss](e){return Jg(this.gid,e.gid,this.processGid)}[iu](e,r){let n=e.mode&4095||this.fmode,i=new wP.WriteStream(e.absolute,{flags:Kg(e.size),mode:n,autoClose:!1});i.on("error",c=>{i.fd&&pe.close(i.fd,()=>{}),i.write=()=>!0,this[Ke](c,e),r()});let s=1,o=c=>{if(c){i.fd&&pe.close(i.fd,()=>{}),this[Ke](c,e),r();return}--s==0&&pe.close(i.fd,u=>{u?this[Ke](u,e):this[hi](),r()})};i.on("finish",c=>{let u=e.absolute,l=i.fd;if(e.mtime&&!this.noMtime){s++;let f=e.atime||new Date,h=e.mtime;pe.futimes(l,f,h,d=>d?pe.utimes(u,f,h,m=>o(m&&d)):o())}if(this[ns](e)){s++;let f=this[is](e),h=this[ss](e);pe.fchown(l,f,h,d=>d?pe.chown(u,f,h,m=>o(m&&d)):o())}o()});let a=this.transform&&this.transform(e)||e;a!==e&&(a.on("error",c=>{this[Ke](c,e),r()}),e.pipe(a)),a.pipe(i)}[su](e,r){let n=e.mode&4095||this.dmode;this[$r](e.absolute,n,i=>{if(i){this[Ke](i,e),r();return}let s=1,o=a=>{--s==0&&(r(),this[hi](),e.resume())};e.mtime&&!this.noMtime&&(s++,pe.utimes(e.absolute,e.atime||new Date,e.mtime,o)),this[ns](e)&&(s++,pe.chown(e.absolute,this[is](e),this[ss](e),o)),o()})}[zg](e){e.unsupported=!0,this.warn("TAR_ENTRY_UNSUPPORTED",`unsupported entry type: ${e.type}`,{entry:e}),e.resume()}[Hg](e,r){this[sa](e,e.linkpath,"symlink",r)}[Wg](e,r){let n=wt(fr.resolve(this.cwd,e.linkpath));this[sa](e,n,"link",r)}[Vg](){this[oa]++}[hi](){this[oa]--,this[au]()}[cu](e){this[hi](),e.resume()}[nu](e,r){return e.type==="File"&&!this.unlink&&r.isFile()&&r.nlink<=1&&!as}[ru](e){this[Vg]();let r=[e.path];e.linkpath&&r.push(e.linkpath),this.reservations.reserve(r,n=>this[qg](e,n))}[ia](e){e.type==="SymbolicLink"?OP(this.dirCache):e.type!=="Directory"&&AP(this.dirCache,e.absolute)}[qg](e,r){this[ia](e);let n=a=>{this[ia](e),r(a)},i=()=>{this[$r](this.cwd,this.dmode,a=>{if(a){this[Ke](a,e),n();return}this[os]=!0,s()})},s=()=>{if(e.absolute!==this.cwd){let a=wt(fr.dirname(e.absolute));if(a!==this.cwd)return this[$r](a,this.dmode,c=>{if(c){this[Ke](c,e),n();return}o()})}o()},o=()=>{pe.lstat(e.absolute,(a,c)=>{if(c&&(this.keep||this.newer&&c.mtime>e.mtime)){this[cu](e),n();return}if(a||this[nu](e,c))return this[It](null,e,n);if(c.isDirectory()){if(e.type==="Directory"){let u=!this.noChmod&&e.mode&&(c.mode&4095)!==e.mode,l=f=>this[It](f,e,n);return u?pe.chmod(e.absolute,e.mode,l):l()}if(e.absolute!==this.cwd)return pe.rmdir(e.absolute,u=>this[It](u,e,n))}if(e.absolute===this.cwd)return this[It](null,e,n);SP(e.absolute,u=>this[It](u,e,n))})};this[os]?s():i()}[It](e,r,n){if(e){this[Ke](e,r),n();return}switch(r.type){case"File":case"OldFile":case"ContiguousFile":return this[iu](r,n);case"Link":return this[Wg](r,n);case"SymbolicLink":return this[Hg](r,n);case"Directory":case"GNUDumpDir":return this[su](r,n)}}[sa](e,r,n,i){pe[n](r,e.absolute,s=>{s?this[Ke](s,e):(this[hi](),e.resume()),i()})}},ca=t=>{try{return[null,t()]}catch(e){return[e,null]}},Zg=class extends aa{[It](e,r){return super[It](e,r,()=>{})}[ru](e){if(this[ia](e),!this[os]){let s=this[$r](this.cwd,this.dmode);if(s)return this[Ke](s,e);this[os]=!0}if(e.absolute!==this.cwd){let s=wt(fr.dirname(e.absolute));if(s!==this.cwd){let o=this[$r](s,this.dmode);if(o)return this[Ke](o,e)}}let[r,n]=ca(()=>pe.lstatSync(e.absolute));if(n&&(this.keep||this.newer&&n.mtime>e.mtime))return this[cu](e);if(r||this[nu](e,n))return this[It](null,e);if(n.isDirectory()){if(e.type==="Directory"){let o=!this.noChmod&&e.mode&&(n.mode&4095)!==e.mode,[a]=o?ca(()=>{pe.chmodSync(e.absolute,e.mode)}):[];return this[It](a,e)}let[s]=ca(()=>pe.rmdirSync(e.absolute));this[It](s,e)}let[i]=e.absolute===this.cwd?[]:ca(()=>PP(e.absolute));this[It](i,e)}[iu](e,r){let n=e.mode&4095||this.fmode,i=a=>{let c;try{pe.closeSync(s)}catch(u){c=u}(a||c)&&this[Ke](a||c,e),r()},s;try{s=pe.openSync(e.absolute,Kg(e.size),n)}catch(a){return i(a)}let o=this.transform&&this.transform(e)||e;o!==e&&(o.on("error",a=>this[Ke](a,e)),e.pipe(o)),o.on("data",a=>{try{pe.writeSync(s,a,0,a.length)}catch(c){i(c)}}),o.on("end",a=>{let c=null;if(e.mtime&&!this.noMtime){let u=e.atime||new Date,l=e.mtime;try{pe.futimesSync(s,u,l)}catch(f){try{pe.utimesSync(e.absolute,u,l)}catch{c=f}}}if(this[ns](e)){let u=this[is](e),l=this[ss](e);try{pe.fchownSync(s,u,l)}catch(f){try{pe.chownSync(e.absolute,u,l)}catch{c=c||f}}}i(c)})}[su](e,r){let n=e.mode&4095||this.dmode,i=this[$r](e.absolute,n);if(i){this[Ke](i,e),r();return}if(e.mtime&&!this.noMtime)try{pe.utimesSync(e.absolute,e.atime||new Date,e.mtime)}catch{}if(this[ns](e))try{pe.chownSync(e.absolute,this[is](e),this[ss](e))}catch{}r(),e.resume()}[$r](e,r){try{return Ug.sync(wt(e),{uid:this.uid,gid:this.gid,processUid:this.processUid,processGid:this.processGid,umask:this.processUmask,preserve:this.preservePaths,unlink:this.unlink,cache:this.dirCache,cwd:this.cwd,mode:r})}catch(n){return n}}[sa](e,r,n,i){try{pe[n+"Sync"](r,e.absolute),i(),e.resume()}catch(s){return this[Ke](s,e)}}};aa.Sync=Zg;Qg.exports=aa});var iv=j((GL,nv)=>{"use strict";var RP=Gn(),la=lu(),ev=require("fs"),tv=ai(),rv=require("path"),uu=Zn();nv.exports=(t,e,r)=>{typeof t=="function"?(r=t,e=null,t={}):Array.isArray(t)&&(e=t,t={}),typeof e=="function"&&(r=e,e=null),e?e=Array.from(e):e=[];let n=RP(t);if(n.sync&&typeof r=="function")throw new TypeError("callback not supported for sync tar functions");if(!n.file&&typeof r=="function")throw new TypeError("callback only supported with file option");return e.length&&_P(n,e),n.file&&n.sync?IP(n):n.file?DP(n,r):n.sync?LP(n):kP(n)};var _P=(t,e)=>{let r=new Map(e.map(s=>[uu(s),!0])),n=t.filter,i=(s,o)=>{let a=o||rv.parse(s).root||".",c=s===a?!1:r.has(s)?r.get(s):i(rv.dirname(s),a);return r.set(s,c),c};t.filter=n?(s,o)=>n(s,o)&&i(uu(s)):s=>i(uu(s))},IP=t=>{let e=new la.Sync(t),r=t.file,n=ev.statSync(r),i=t.maxReadSize||16*1024*1024;new tv.ReadStreamSync(r,{readSize:i,size:n.size}).pipe(e)},DP=(t,e)=>{let r=new la(t),n=t.maxReadSize||16*1024*1024,i=t.file,s=new Promise((o,a)=>{r.on("error",a),r.on("close",o),ev.stat(i,(c,u)=>{if(c)a(c);else{let l=new tv.ReadStream(i,{readSize:n,size:u.size});l.on("error",a),l.pipe(r)}})});return e?s.then(e,e):s},LP=t=>new la.Sync(t),kP=t=>new la(t)});var fu=j(Fe=>{"use strict";Fe.c=Fe.create=Um();Fe.r=Fe.replace=Wl();Fe.t=Fe.list=Zo();Fe.u=Fe.update=Ym();Fe.x=Fe.extract=iv();Fe.Pack=Uo();Fe.Unpack=lu();Fe.Parse=Xo();Fe.ReadEntry=Co();Fe.WriteEntry=yl();Fe.Header=Xn();Fe.Pax=Po();Fe.types=nl()});var cs=j((YL,sv)=>{var FP="2.0.0",TP=256,NP=Number.MAX_SAFE_INTEGER||9007199254740991,$P=16;sv.exports={SEMVER_SPEC_VERSION:FP,MAX_LENGTH:TP,MAX_SAFE_INTEGER:NP,MAX_SAFE_COMPONENT_LENGTH:$P}});var ls=j((KL,ov)=>{var jP=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};ov.exports=jP});var yn=j((jr,av)=>{var{MAX_SAFE_COMPONENT_LENGTH:hu}=cs(),UP=ls();jr=av.exports={};var MP=jr.re=[],K=jr.src=[],J=jr.t={},BP=0,le=(t,e,r)=>{let n=BP++;UP(n,e),J[t]=n,K[n]=e,MP[n]=new RegExp(e,r?"g":void 0)};le("NUMERICIDENTIFIER","0|[1-9]\\d*");le("NUMERICIDENTIFIERLOOSE","[0-9]+");le("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");le("MAINVERSION",`(${K[J.NUMERICIDENTIFIER]})\\.(${K[J.NUMERICIDENTIFIER]})\\.(${K[J.NUMERICIDENTIFIER]})`);le("MAINVERSIONLOOSE",`(${K[J.NUMERICIDENTIFIERLOOSE]})\\.(${K[J.NUMERICIDENTIFIERLOOSE]})\\.(${K[J.NUMERICIDENTIFIERLOOSE]})`);le("PRERELEASEIDENTIFIER",`(?:${K[J.NUMERICIDENTIFIER]}|${K[J.NONNUMERICIDENTIFIER]})`);le("PRERELEASEIDENTIFIERLOOSE",`(?:${K[J.NUMERICIDENTIFIERLOOSE]}|${K[J.NONNUMERICIDENTIFIER]})`);le("PRERELEASE",`(?:-(${K[J.PRERELEASEIDENTIFIER]}(?:\\.${K[J.PRERELEASEIDENTIFIER]})*))`);le("PRERELEASELOOSE",`(?:-?(${K[J.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${K[J.PRERELEASEIDENTIFIERLOOSE]})*))`);le("BUILDIDENTIFIER","[0-9A-Za-z-]+");le("BUILD",`(?:\\+(${K[J.BUILDIDENTIFIER]}(?:\\.${K[J.BUILDIDENTIFIER]})*))`);le("FULLPLAIN",`v?${K[J.MAINVERSION]}${K[J.PRERELEASE]}?${K[J.BUILD]}?`);le("FULL",`^${K[J.FULLPLAIN]}$`);le("LOOSEPLAIN",`[v=\\s]*${K[J.MAINVERSIONLOOSE]}${K[J.PRERELEASELOOSE]}?${K[J.BUILD]}?`);le("LOOSE",`^${K[J.LOOSEPLAIN]}$`);le("GTLT","((?:<|>)?=?)");le("XRANGEIDENTIFIERLOOSE",`${K[J.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);le("XRANGEIDENTIFIER",`${K[J.NUMERICIDENTIFIER]}|x|X|\\*`);le("XRANGEPLAIN",`[v=\\s]*(${K[J.XRANGEIDENTIFIER]})(?:\\.(${K[J.XRANGEIDENTIFIER]})(?:\\.(${K[J.XRANGEIDENTIFIER]})(?:${K[J.PRERELEASE]})?${K[J.BUILD]}?)?)?`);le("XRANGEPLAINLOOSE",`[v=\\s]*(${K[J.XRANGEIDENTIFIERLOOSE]})(?:\\.(${K[J.XRANGEIDENTIFIERLOOSE]})(?:\\.(${K[J.XRANGEIDENTIFIERLOOSE]})(?:${K[J.PRERELEASELOOSE]})?${K[J.BUILD]}?)?)?`);le("XRANGE",`^${K[J.GTLT]}\\s*${K[J.XRANGEPLAIN]}$`);le("XRANGELOOSE",`^${K[J.GTLT]}\\s*${K[J.XRANGEPLAINLOOSE]}$`);le("COERCE",`(^|[^\\d])(\\d{1,${hu}})(?:\\.(\\d{1,${hu}}))?(?:\\.(\\d{1,${hu}}))?(?:$|[^\\d])`);le("COERCERTL",K[J.COERCE],!0);le("LONETILDE","(?:~>?)");le("TILDETRIM",`(\\s*)${K[J.LONETILDE]}\\s+`,!0);jr.tildeTrimReplace="$1~";le("TILDE",`^${K[J.LONETILDE]}${K[J.XRANGEPLAIN]}$`);le("TILDELOOSE",`^${K[J.LONETILDE]}${K[J.XRANGEPLAINLOOSE]}$`);le("LONECARET","(?:\\^)");le("CARETTRIM",`(\\s*)${K[J.LONECARET]}\\s+`,!0);jr.caretTrimReplace="$1^";le("CARET",`^${K[J.LONECARET]}${K[J.XRANGEPLAIN]}$`);le("CARETLOOSE",`^${K[J.LONECARET]}${K[J.XRANGEPLAINLOOSE]}$`);le("COMPARATORLOOSE",`^${K[J.GTLT]}\\s*(${K[J.LOOSEPLAIN]})$|^$`);le("COMPARATOR",`^${K[J.GTLT]}\\s*(${K[J.FULLPLAIN]})$|^$`);le("COMPARATORTRIM",`(\\s*)${K[J.GTLT]}\\s*(${K[J.LOOSEPLAIN]}|${K[J.XRANGEPLAIN]})`,!0);jr.comparatorTrimReplace="$1$2$3";le("HYPHENRANGE",`^\\s*(${K[J.XRANGEPLAIN]})\\s+-\\s+(${K[J.XRANGEPLAIN]})\\s*$`);le("HYPHENRANGELOOSE",`^\\s*(${K[J.XRANGEPLAINLOOSE]})\\s+-\\s+(${K[J.XRANGEPLAINLOOSE]})\\s*$`);le("STAR","(<|>)?=?\\s*\\*");le("GTE0","^\\s*>=\\s*0.0.0\\s*$");le("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")});var us=j((JL,cv)=>{var qP=["includePrerelease","loose","rtl"],HP=t=>t?typeof t!="object"?{loose:!0}:qP.filter(e=>t[e]).reduce((e,r)=>(e[r]=!0,e),{}):{};cv.exports=HP});var ua=j((XL,fv)=>{var lv=/^[0-9]+$/,uv=(t,e)=>{let r=lv.test(t),n=lv.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},WP=(t,e)=>uv(e,t);fv.exports={compareIdentifiers:uv,rcompareIdentifiers:WP}});var Je=j((ZL,mv)=>{var fa=ls(),{MAX_LENGTH:hv,MAX_SAFE_INTEGER:ha}=cs(),{re:dv,t:pv}=yn(),zP=us(),{compareIdentifiers:fs}=ua(),Dt=class{constructor(e,r){if(r=zP(r),e instanceof Dt){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid Version: ${e}`);if(e.length>hv)throw new TypeError(`version is longer than ${hv} characters`);fa("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?dv[pv.LOOSE]:dv[pv.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>ha||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ha||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ha||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let s=+i;if(s>=0&&s<ha)return s}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(fa("SemVer.compare",this.version,this.options,e),!(e instanceof Dt)){if(typeof e=="string"&&e===this.version)return 0;e=new Dt(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof Dt||(e=new Dt(e,this.options)),fs(this.major,e.major)||fs(this.minor,e.minor)||fs(this.patch,e.patch)}comparePre(e){if(e instanceof Dt||(e=new Dt(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=e.prerelease[r];if(fa("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return fs(n,i)}while(++r)}compareBuild(e){e instanceof Dt||(e=new Dt(e,this.options));let r=0;do{let n=this.build[r],i=e.build[r];if(fa("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return fs(n,i)}while(++r)}inc(e,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r),this.inc("pre",r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r),this.inc("pre",r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let n=this.prerelease.length;for(;--n>=0;)typeof this.prerelease[n]=="number"&&(this.prerelease[n]++,n=-2);n===-1&&this.prerelease.push(0)}r&&(this.prerelease[0]===r?isNaN(this.prerelease[1])&&(this.prerelease=[r,0]):this.prerelease=[r,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}};mv.exports=Dt});var bn=j((QL,yv)=>{var{MAX_LENGTH:GP}=cs(),{re:gv,t:vv}=yn(),wv=Je(),VP=us(),YP=(t,e)=>{if(e=VP(e),t instanceof wv)return t;if(typeof t!="string"||t.length>GP||!(e.loose?gv[vv.LOOSE]:gv[vv.FULL]).test(t))return null;try{return new wv(t,e)}catch{return null}};yv.exports=YP});var Ev=j((ek,bv)=>{var KP=bn(),JP=(t,e)=>{let r=KP(t,e);return r?r.version:null};bv.exports=JP});var xv=j((tk,Cv)=>{var XP=bn(),ZP=(t,e)=>{let r=XP(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};Cv.exports=ZP});var Pv=j((rk,Sv)=>{var QP=Je(),eA=(t,e,r,n)=>{typeof r=="string"&&(n=r,r=void 0);try{return new QP(t,r).inc(e,n).version}catch{return null}};Sv.exports=eA});var Lt=j((nk,Ov)=>{var Av=Je(),tA=(t,e,r)=>new Av(t,r).compare(new Av(e,r));Ov.exports=tA});var da=j((ik,Rv)=>{var rA=Lt(),nA=(t,e,r)=>rA(t,e,r)===0;Rv.exports=nA});var Dv=j((sk,Iv)=>{var _v=bn(),iA=da(),sA=(t,e)=>{if(iA(t,e))return null;{let r=_v(t),n=_v(e),i=r.prerelease.length||n.prerelease.length,s=i?"pre":"",o=i?"prerelease":"";for(let a in r)if((a==="major"||a==="minor"||a==="patch")&&r[a]!==n[a])return s+a;return o}};Iv.exports=sA});var kv=j((ok,Lv)=>{var oA=Je(),aA=(t,e)=>new oA(t,e).major;Lv.exports=aA});var Tv=j((ak,Fv)=>{var cA=Je(),lA=(t,e)=>new cA(t,e).minor;Fv.exports=lA});var $v=j((ck,Nv)=>{var uA=Je(),fA=(t,e)=>new uA(t,e).patch;Nv.exports=fA});var Uv=j((lk,jv)=>{var hA=bn(),dA=(t,e)=>{let r=hA(t,e);return r&&r.prerelease.length?r.prerelease:null};jv.exports=dA});var Bv=j((uk,Mv)=>{var pA=Lt(),mA=(t,e,r)=>pA(e,t,r);Mv.exports=mA});var Hv=j((fk,qv)=>{var gA=Lt(),vA=(t,e)=>gA(t,e,!0);qv.exports=vA});var pa=j((hk,zv)=>{var Wv=Je(),wA=(t,e,r)=>{let n=new Wv(t,r),i=new Wv(e,r);return n.compare(i)||n.compareBuild(i)};zv.exports=wA});var Vv=j((dk,Gv)=>{var yA=pa(),bA=(t,e)=>t.sort((r,n)=>yA(r,n,e));Gv.exports=bA});var Kv=j((pk,Yv)=>{var EA=pa(),CA=(t,e)=>t.sort((r,n)=>EA(n,r,e));Yv.exports=CA});var hs=j((mk,Jv)=>{var xA=Lt(),SA=(t,e,r)=>xA(t,e,r)>0;Jv.exports=SA});var ma=j((gk,Xv)=>{var PA=Lt(),AA=(t,e,r)=>PA(t,e,r)<0;Xv.exports=AA});var du=j((vk,Zv)=>{var OA=Lt(),RA=(t,e,r)=>OA(t,e,r)!==0;Zv.exports=RA});var ga=j((wk,Qv)=>{var _A=Lt(),IA=(t,e,r)=>_A(t,e,r)>=0;Qv.exports=IA});var va=j((yk,ew)=>{var DA=Lt(),LA=(t,e,r)=>DA(t,e,r)<=0;ew.exports=LA});var pu=j((bk,tw)=>{var kA=da(),FA=du(),TA=hs(),NA=ga(),$A=ma(),jA=va(),UA=(t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return kA(t,r,n);case"!=":return FA(t,r,n);case">":return TA(t,r,n);case">=":return NA(t,r,n);case"<":return $A(t,r,n);case"<=":return jA(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};tw.exports=UA});var nw=j((Ek,rw)=>{var MA=Je(),BA=bn(),{re:wa,t:ya}=yn(),qA=(t,e)=>{if(t instanceof MA)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(wa[ya.COERCE]);else{let n;for(;(n=wa[ya.COERCERTL].exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||n.index+n[0].length!==r.index+r[0].length)&&(r=n),wa[ya.COERCERTL].lastIndex=n.index+n[1].length+n[2].length;wa[ya.COERCERTL].lastIndex=-1}return r===null?null:BA(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,e)};rw.exports=qA});var uw=j((Ck,lw)=>{"use strict";var HA=Wi(),En=Symbol("max"),hr=Symbol("length"),di=Symbol("lengthCalculator"),ds=Symbol("allowStale"),Cn=Symbol("maxAge"),dr=Symbol("dispose"),iw=Symbol("noDisposeOnSet"),je=Symbol("lruList"),Bt=Symbol("cache"),sw=Symbol("updateAgeOnGet"),mu=()=>1,ow=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let r=this[En]=e.max||1/0,n=e.length||mu;if(this[di]=typeof n!="function"?mu:n,this[ds]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[Cn]=e.maxAge||0,this[dr]=e.dispose,this[iw]=e.noDisposeOnSet||!1,this[sw]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[En]=e||1/0,ps(this)}get max(){return this[En]}set allowStale(e){this[ds]=!!e}get allowStale(){return this[ds]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[Cn]=e,ps(this)}get maxAge(){return this[Cn]}set lengthCalculator(e){typeof e!="function"&&(e=mu),e!==this[di]&&(this[di]=e,this[hr]=0,this[je].forEach(r=>{r.length=this[di](r.value,r.key),this[hr]+=r.length})),ps(this)}get lengthCalculator(){return this[di]}get length(){return this[hr]}get itemCount(){return this[je].length}rforEach(e,r){r=r||this;for(let n=this[je].tail;n!==null;){let i=n.prev;cw(this,e,n,r),n=i}}forEach(e,r){r=r||this;for(let n=this[je].head;n!==null;){let i=n.next;cw(this,e,n,r),n=i}}keys(){return this[je].toArray().map(e=>e.key)}values(){return this[je].toArray().map(e=>e.value)}reset(){this[dr]&&this[je]&&this[je].length&&this[je].forEach(e=>this[dr](e.key,e.value)),this[Bt]=new Map,this[je]=new HA,this[hr]=0}dump(){return this[je].map(e=>ba(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[je]}set(e,r,n){if(n=n||this[Cn],n&&typeof n!="number")throw new TypeError("maxAge must be a number");let i=n?Date.now():0,s=this[di](r,e);if(this[Bt].has(e)){if(s>this[En])return pi(this,this[Bt].get(e)),!1;let c=this[Bt].get(e).value;return this[dr]&&(this[iw]||this[dr](e,c.value)),c.now=i,c.maxAge=n,c.value=r,this[hr]+=s-c.length,c.length=s,this.get(e),ps(this),!0}let o=new aw(e,r,s,i,n);return o.length>this[En]?(this[dr]&&this[dr](e,r),!1):(this[hr]+=o.length,this[je].unshift(o),this[Bt].set(e,this[je].head),ps(this),!0)}has(e){if(!this[Bt].has(e))return!1;let r=this[Bt].get(e).value;return!ba(this,r)}get(e){return gu(this,e,!0)}peek(e){return gu(this,e,!1)}pop(){let e=this[je].tail;return e?(pi(this,e),e.value):null}del(e){pi(this,this[Bt].get(e))}load(e){this.reset();let r=Date.now();for(let n=e.length-1;n>=0;n--){let i=e[n],s=i.e||0;if(s===0)this.set(i.k,i.v);else{let o=s-r;o>0&&this.set(i.k,i.v,o)}}}prune(){this[Bt].forEach((e,r)=>gu(this,r,!1))}},gu=(t,e,r)=>{let n=t[Bt].get(e);if(n){let i=n.value;if(ba(t,i)){if(pi(t,n),!t[ds])return}else r&&(t[sw]&&(n.value.now=Date.now()),t[je].unshiftNode(n));return i.value}},ba=(t,e)=>{if(!e||!e.maxAge&&!t[Cn])return!1;let r=Date.now()-e.now;return e.maxAge?r>e.maxAge:t[Cn]&&r>t[Cn]},ps=t=>{if(t[hr]>t[En])for(let e=t[je].tail;t[hr]>t[En]&&e!==null;){let r=e.prev;pi(t,e),e=r}},pi=(t,e)=>{if(e){let r=e.value;t[dr]&&t[dr](r.key,r.value),t[hr]-=r.length,t[Bt].delete(r.key),t[je].removeNode(e)}},aw=class{constructor(e,r,n,i,s){this.key=e,this.value=r,this.length=n,this.now=i,this.maxAge=s||0}},cw=(t,e,r,n)=>{let i=r.value;ba(t,i)&&(pi(t,r),t[ds]||(i=void 0)),i&&e.call(n,i.value,i.key,t)};lw.exports=ow});var kt=j((xk,pw)=>{var mi=class{constructor(e,r){if(r=zA(r),e instanceof mi)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new mi(e.raw,r);if(e instanceof vu)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!hw(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&JA(i[0])){this.set=[i];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();let n=`parseRange:${Object.keys(this.options).join(",")}:${e}`,i=fw.get(n);if(i)return i;let s=this.options.loose,o=s?Xe[qe.HYPHENRANGELOOSE]:Xe[qe.HYPHENRANGE];e=e.replace(o,oO(this.options.includePrerelease)),Oe("hyphen replace",e),e=e.replace(Xe[qe.COMPARATORTRIM],VA),Oe("comparator trim",e,Xe[qe.COMPARATORTRIM]),e=e.replace(Xe[qe.TILDETRIM],YA),e=e.replace(Xe[qe.CARETTRIM],KA),e=e.split(/\s+/).join(" ");let a=s?Xe[qe.COMPARATORLOOSE]:Xe[qe.COMPARATOR],c=e.split(" ").map(h=>XA(h,this.options)).join(" ").split(/\s+/).map(h=>sO(h,this.options)).filter(this.options.loose?h=>!!h.match(a):()=>!0).map(h=>new vu(h,this.options)),u=c.length,l=new Map;for(let h of c){if(hw(h))return[h];l.set(h.value,h)}l.size>1&&l.has("")&&l.delete("");let f=[...l.values()];return fw.set(n,f),f}intersects(e,r){if(!(e instanceof mi))throw new TypeError("a Range is required");return this.set.some(n=>dw(n,r)&&e.set.some(i=>dw(i,r)&&n.every(s=>i.every(o=>s.intersects(o,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new GA(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(aO(this.set[r],e,this.options))return!0;return!1}};pw.exports=mi;var WA=uw(),fw=new WA({max:1e3}),zA=us(),vu=ms(),Oe=ls(),GA=Je(),{re:Xe,t:qe,comparatorTrimReplace:VA,tildeTrimReplace:YA,caretTrimReplace:KA}=yn(),hw=t=>t.value==="<0.0.0-0",JA=t=>t.value==="",dw=(t,e)=>{let r=!0,n=t.slice(),i=n.pop();for(;r&&n.length;)r=n.every(s=>i.intersects(s,e)),i=n.pop();return r},XA=(t,e)=>(Oe("comp",t,e),t=eO(t,e),Oe("caret",t),t=ZA(t,e),Oe("tildes",t),t=rO(t,e),Oe("xrange",t),t=iO(t,e),Oe("stars",t),t),et=t=>!t||t.toLowerCase()==="x"||t==="*",ZA=(t,e)=>t.trim().split(/\s+/).map(r=>QA(r,e)).join(" "),QA=(t,e)=>{let r=e.loose?Xe[qe.TILDELOOSE]:Xe[qe.TILDE];return t.replace(r,(n,i,s,o,a)=>{Oe("tilde",t,n,i,s,o,a);let c;return et(i)?c="":et(s)?c=`>=${i}.0.0 <${+i+1}.0.0-0`:et(o)?c=`>=${i}.${s}.0 <${i}.${+s+1}.0-0`:a?(Oe("replaceTilde pr",a),c=`>=${i}.${s}.${o}-${a} <${i}.${+s+1}.0-0`):c=`>=${i}.${s}.${o} <${i}.${+s+1}.0-0`,Oe("tilde return",c),c})},eO=(t,e)=>t.trim().split(/\s+/).map(r=>tO(r,e)).join(" "),tO=(t,e)=>{Oe("caret",t,e);let r=e.loose?Xe[qe.CARETLOOSE]:Xe[qe.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(i,s,o,a,c)=>{Oe("caret",t,i,s,o,a,c);let u;return et(s)?u="":et(o)?u=`>=${s}.0.0${n} <${+s+1}.0.0-0`:et(a)?s==="0"?u=`>=${s}.${o}.0${n} <${s}.${+o+1}.0-0`:u=`>=${s}.${o}.0${n} <${+s+1}.0.0-0`:c?(Oe("replaceCaret pr",c),s==="0"?o==="0"?u=`>=${s}.${o}.${a}-${c} <${s}.${o}.${+a+1}-0`:u=`>=${s}.${o}.${a}-${c} <${s}.${+o+1}.0-0`:u=`>=${s}.${o}.${a}-${c} <${+s+1}.0.0-0`):(Oe("no pr"),s==="0"?o==="0"?u=`>=${s}.${o}.${a}${n} <${s}.${o}.${+a+1}-0`:u=`>=${s}.${o}.${a}${n} <${s}.${+o+1}.0-0`:u=`>=${s}.${o}.${a} <${+s+1}.0.0-0`),Oe("caret return",u),u})},rO=(t,e)=>(Oe("replaceXRanges",t,e),t.split(/\s+/).map(r=>nO(r,e)).join(" ")),nO=(t,e)=>{t=t.trim();let r=e.loose?Xe[qe.XRANGELOOSE]:Xe[qe.XRANGE];return t.replace(r,(n,i,s,o,a,c)=>{Oe("xRange",t,n,i,s,o,a,c);let u=et(s),l=u||et(o),f=l||et(a),h=f;return i==="="&&h&&(i=""),c=e.includePrerelease?"-0":"",u?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&h?(l&&(o=0),a=0,i===">"?(i=">=",l?(s=+s+1,o=0,a=0):(o=+o+1,a=0)):i==="<="&&(i="<",l?s=+s+1:o=+o+1),i==="<"&&(c="-0"),n=`${i+s}.${o}.${a}${c}`):l?n=`>=${s}.0.0${c} <${+s+1}.0.0-0`:f&&(n=`>=${s}.${o}.0${c} <${s}.${+o+1}.0-0`),Oe("xRange return",n),n})},iO=(t,e)=>(Oe("replaceStars",t,e),t.trim().replace(Xe[qe.STAR],"")),sO=(t,e)=>(Oe("replaceGTE0",t,e),t.trim().replace(Xe[e.includePrerelease?qe.GTE0PRE:qe.GTE0],"")),oO=t=>(e,r,n,i,s,o,a,c,u,l,f,h,d)=>(et(n)?r="":et(i)?r=`>=${n}.0.0${t?"-0":""}`:et(s)?r=`>=${n}.${i}.0${t?"-0":""}`:o?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,et(u)?c="":et(l)?c=`<${+u+1}.0.0-0`:et(f)?c=`<${u}.${+l+1}.0-0`:h?c=`<=${u}.${l}.${f}-${h}`:t?c=`<${u}.${l}.${+f+1}-0`:c=`<=${c}`,`${r} ${c}`.trim()),aO=(t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(Oe(t[n].semver),t[n].semver!==vu.ANY&&t[n].semver.prerelease.length>0){let i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var ms=j((Sk,yw)=>{var gs=Symbol("SemVer ANY"),vs=class{static get ANY(){return gs}constructor(e,r){if(r=cO(r),e instanceof vs){if(e.loose===!!r.loose)return e;e=e.value}yu("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===gs?this.value="":this.value=this.operator+this.semver.version,yu("comp",this)}parse(e){let r=this.options.loose?mw[gw.COMPARATORLOOSE]:mw[gw.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new vw(n[2],this.options.loose):this.semver=gs}toString(){return this.value}test(e){if(yu("Comparator.test",e,this.options.loose),this.semver===gs||e===gs)return!0;if(typeof e=="string")try{e=new vw(e,this.options)}catch{return!1}return wu(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof vs))throw new TypeError("a Comparator is required");if((!r||typeof r!="object")&&(r={loose:!!r,includePrerelease:!1}),this.operator==="")return this.value===""?!0:new ww(e.value,r).test(this.value);if(e.operator==="")return e.value===""?!0:new ww(this.value,r).test(e.semver);let n=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),s=this.semver.version===e.semver.version,o=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),a=wu(this.semver,"<",e.semver,r)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),c=wu(this.semver,">",e.semver,r)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return n||i||s&&o||a||c}};yw.exports=vs;var cO=us(),{re:mw,t:gw}=yn(),wu=pu(),yu=ls(),vw=Je(),ww=kt()});var ws=j((Pk,bw)=>{var lO=kt(),uO=(t,e,r)=>{try{e=new lO(e,r)}catch{return!1}return e.test(t)};bw.exports=uO});var Cw=j((Ak,Ew)=>{var fO=kt(),hO=(t,e)=>new fO(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));Ew.exports=hO});var Sw=j((Ok,xw)=>{var dO=Je(),pO=kt(),mO=(t,e,r)=>{let n=null,i=null,s=null;try{s=new pO(e,r)}catch{return null}return t.forEach(o=>{s.test(o)&&(!n||i.compare(o)===-1)&&(n=o,i=new dO(n,r))}),n};xw.exports=mO});var Aw=j((Rk,Pw)=>{var gO=Je(),vO=kt(),wO=(t,e,r)=>{let n=null,i=null,s=null;try{s=new vO(e,r)}catch{return null}return t.forEach(o=>{s.test(o)&&(!n||i.compare(o)===1)&&(n=o,i=new gO(n,r))}),n};Pw.exports=wO});var _w=j((_k,Rw)=>{var bu=Je(),yO=kt(),Ow=hs(),bO=(t,e)=>{t=new yO(t,e);let r=new bu("0.0.0");if(t.test(r)||(r=new bu("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let i=t.set[n],s=null;i.forEach(o=>{let a=new bu(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!s||Ow(a,s))&&(s=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),s&&(!r||Ow(r,s))&&(r=s)}return r&&t.test(r)?r:null};Rw.exports=bO});var Dw=j((Ik,Iw)=>{var EO=kt(),CO=(t,e)=>{try{return new EO(t,e).range||"*"}catch{return null}};Iw.exports=CO});var Ea=j((Dk,Tw)=>{var xO=Je(),Lw=ms(),{ANY:SO}=Lw,PO=kt(),AO=ws(),kw=hs(),Fw=ma(),OO=va(),RO=ga(),_O=(t,e,r,n)=>{t=new xO(t,n),e=new PO(e,n);let i,s,o,a,c;switch(r){case">":i=kw,s=OO,o=Fw,a=">",c=">=";break;case"<":i=Fw,s=RO,o=kw,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(AO(t,e,n))return!1;for(let u=0;u<e.set.length;++u){let l=e.set[u],f=null,h=null;if(l.forEach(d=>{d.semver===SO&&(d=new Lw(">=0.0.0")),f=f||d,h=h||d,i(d.semver,f.semver,n)?f=d:o(d.semver,h.semver,n)&&(h=d)}),f.operator===a||f.operator===c||(!h.operator||h.operator===a)&&s(t,h.semver))return!1;if(h.operator===c&&o(t,h.semver))return!1}return!0};Tw.exports=_O});var $w=j((Lk,Nw)=>{var IO=Ea(),DO=(t,e,r)=>IO(t,e,">",r);Nw.exports=DO});var Uw=j((kk,jw)=>{var LO=Ea(),kO=(t,e,r)=>LO(t,e,"<",r);jw.exports=kO});var qw=j((Fk,Bw)=>{var Mw=kt(),FO=(t,e,r)=>(t=new Mw(t,r),e=new Mw(e,r),t.intersects(e));Bw.exports=FO});var Ww=j((Tk,Hw)=>{var TO=ws(),NO=Lt();Hw.exports=(t,e,r)=>{let n=[],i=null,s=null,o=t.sort((l,f)=>NO(l,f,r));for(let l of o)TO(l,e,r)?(s=l,i||(i=l)):(s&&n.push([i,s]),s=null,i=null);i&&n.push([i,null]);let a=[];for(let[l,f]of n)l===f?a.push(l):!f&&l===o[0]?a.push("*"):f?l===o[0]?a.push(`<=${f}`):a.push(`${l} - ${f}`):a.push(`>=${l}`);let c=a.join(" || "),u=typeof e.raw=="string"?e.raw:String(e);return c.length<u.length?c:e}});var Kw=j((Nk,Yw)=>{var zw=kt(),Ca=ms(),{ANY:Eu}=Ca,ys=ws(),Cu=Lt(),$O=(t,e,r={})=>{if(t===e)return!0;t=new zw(t,r),e=new zw(e,r);let n=!1;e:for(let i of t.set){for(let s of e.set){let o=jO(i,s,r);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},jO=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===Eu){if(e.length===1&&e[0].semver===Eu)return!0;r.includePrerelease?t=[new Ca(">=0.0.0-0")]:t=[new Ca(">=0.0.0")]}if(e.length===1&&e[0].semver===Eu){if(r.includePrerelease)return!0;e=[new Ca(">=0.0.0")]}let n=new Set,i,s;for(let d of t)d.operator===">"||d.operator===">="?i=Gw(i,d,r):d.operator==="<"||d.operator==="<="?s=Vw(s,d,r):n.add(d.semver);if(n.size>1)return null;let o;if(i&&s){if(o=Cu(i.semver,s.semver,r),o>0)return null;if(o===0&&(i.operator!==">="||s.operator!=="<="))return null}for(let d of n){if(i&&!ys(d,String(i),r)||s&&!ys(d,String(s),r))return null;for(let m of e)if(!ys(d,String(m),r))return!1;return!0}let a,c,u,l,f=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1,h=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;f&&f.prerelease.length===1&&s.operator==="<"&&f.prerelease[0]===0&&(f=!1);for(let d of e){if(l=l||d.operator===">"||d.operator===">=",u=u||d.operator==="<"||d.operator==="<=",i){if(h&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===h.major&&d.semver.minor===h.minor&&d.semver.patch===h.patch&&(h=!1),d.operator===">"||d.operator===">="){if(a=Gw(i,d,r),a===d&&a!==i)return!1}else if(i.operator===">="&&!ys(i.semver,String(d),r))return!1}if(s){if(f&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===f.major&&d.semver.minor===f.minor&&d.semver.patch===f.patch&&(f=!1),d.operator==="<"||d.operator==="<="){if(c=Vw(s,d,r),c===d&&c!==s)return!1}else if(s.operator==="<="&&!ys(s.semver,String(d),r))return!1}if(!d.operator&&(s||i)&&o!==0)return!1}return!(i&&u&&!s&&o!==0||s&&l&&!i&&o!==0||h||f)},Gw=(t,e,r)=>{if(!t)return e;let n=Cu(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},Vw=(t,e,r)=>{if(!t)return e;let n=Cu(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};Yw.exports=$O});var Xw=j(($k,Jw)=>{var xu=yn();Jw.exports={re:xu.re,src:xu.src,tokens:xu.t,SEMVER_SPEC_VERSION:cs().SEMVER_SPEC_VERSION,SemVer:Je(),compareIdentifiers:ua().compareIdentifiers,rcompareIdentifiers:ua().rcompareIdentifiers,parse:bn(),valid:Ev(),clean:xv(),inc:Pv(),diff:Dv(),major:kv(),minor:Tv(),patch:$v(),prerelease:Uv(),compare:Lt(),rcompare:Bv(),compareLoose:Hv(),compareBuild:pa(),sort:Vv(),rsort:Kv(),gt:hs(),lt:ma(),eq:da(),neq:du(),gte:ga(),lte:va(),cmp:pu(),coerce:nw(),Comparator:ms(),Range:kt(),satisfies:ws(),toComparators:Cw(),maxSatisfying:Sw(),minSatisfying:Aw(),minVersion:_w(),validRange:Dw(),outside:Ea(),gtr:$w(),ltr:Uw(),intersects:qw(),simplifyRange:Ww(),subset:Kw()}});var Qw=j((jk,Zw)=>{var gi=1e3,vi=gi*60,wi=vi*60,xn=wi*24,UO=xn*7,MO=xn*365.25;Zw.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return BO(t);if(r==="number"&&isFinite(t))return e.long?HO(t):qO(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function BO(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!!e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*MO;case"weeks":case"week":case"w":return r*UO;case"days":case"day":case"d":return r*xn;case"hours":case"hour":case"hrs":case"hr":case"h":return r*wi;case"minutes":case"minute":case"mins":case"min":case"m":return r*vi;case"seconds":case"second":case"secs":case"sec":case"s":return r*gi;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function qO(t){var e=Math.abs(t);return e>=xn?Math.round(t/xn)+"d":e>=wi?Math.round(t/wi)+"h":e>=vi?Math.round(t/vi)+"m":e>=gi?Math.round(t/gi)+"s":t+"ms"}function HO(t){var e=Math.abs(t);return e>=xn?xa(t,e,xn,"day"):e>=wi?xa(t,e,wi,"hour"):e>=vi?xa(t,e,vi,"minute"):e>=gi?xa(t,e,gi,"second"):t+" ms"}function xa(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var Su=j((Uk,ey)=>{function WO(t){r.debug=r,r.default=r,r.coerce=c,r.disable=s,r.enable=i,r.enabled=o,r.humanize=Qw(),r.destroy=u,Object.keys(t).forEach(l=>{r[l]=t[l]}),r.names=[],r.skips=[],r.formatters={};function e(l){let f=0;for(let h=0;h<l.length;h++)f=(f<<5)-f+l.charCodeAt(h),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=e;function r(l){let f,h=null;function d(...m){if(!d.enabled)return;let p=d,v=Number(new Date),w=v-(f||v);p.diff=w,p.prev=f,p.curr=v,f=v,m[0]=r.coerce(m[0]),typeof m[0]!="string"&&m.unshift("%O");let b=0;m[0]=m[0].replace(/%([a-zA-Z%])/g,(A,M)=>{if(A==="%%")return"%";b++;let R=r.formatters[M];if(typeof R=="function"){let N=m[b];A=R.call(p,N),m.splice(b,1),b--}return A}),r.formatArgs.call(p,m),(p.log||r.log).apply(p,m)}return d.namespace=l,d.useColors=r.useColors(),d.color=r.selectColor(l),d.extend=n,d.destroy=r.destroy,Object.defineProperty(d,"enabled",{enumerable:!0,configurable:!1,get:()=>h===null?r.enabled(l):h,set:m=>{h=m}}),typeof r.init=="function"&&r.init(d),d}function n(l,f){let h=r(this.namespace+(typeof f=="undefined"?":":f)+l);return h.log=this.log,h}function i(l){r.save(l),r.names=[],r.skips=[];let f,h=(typeof l=="string"?l:"").split(/[\s,]+/),d=h.length;for(f=0;f<d;f++)!h[f]||(l=h[f].replace(/\*/g,".*?"),l[0]==="-"?r.skips.push(new RegExp("^"+l.substr(1)+"$")):r.names.push(new RegExp("^"+l+"$")))}function s(){let l=[...r.names.map(a),...r.skips.map(a).map(f=>"-"+f)].join(",");return r.enable(""),l}function o(l){if(l[l.length-1]==="*")return!0;let f,h;for(f=0,h=r.skips.length;f<h;f++)if(r.skips[f].test(l))return!1;for(f=0,h=r.names.length;f<h;f++)if(r.names[f].test(l))return!0;return!1}function a(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function c(l){return l instanceof Error?l.stack||l.message:l}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}ey.exports=WO});var ty=j((yt,Sa)=>{yt.formatArgs=GO;yt.save=VO;yt.load=YO;yt.useColors=zO;yt.storage=KO();yt.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();yt.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function zO(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function GO(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+Sa.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}yt.log=console.debug||console.log||(()=>{});function VO(t){try{t?yt.storage.setItem("debug",t):yt.storage.removeItem("debug")}catch{}}function YO(){let t;try{t=yt.storage.getItem("debug")}catch{}return!t&&typeof process!="undefined"&&"env"in process&&(t=process.env.DEBUG),t}function KO(){try{return localStorage}catch{}}Sa.exports=Su()(yt);var{formatters:JO}=Sa.exports;JO.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var ny=j((Mk,ry)=>{"use strict";ry.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),i=e.indexOf("--");return n!==-1&&(i===-1||n<i)}});var oy=j((Bk,sy)=>{"use strict";var XO=require("os"),iy=require("tty"),Ft=ny(),{env:Ue}=process,Pa;Ft("no-color")||Ft("no-colors")||Ft("color=false")||Ft("color=never")?Pa=0:(Ft("color")||Ft("colors")||Ft("color=true")||Ft("color=always"))&&(Pa=1);function ZO(){if("FORCE_COLOR"in Ue)return Ue.FORCE_COLOR==="true"?1:Ue.FORCE_COLOR==="false"?0:Ue.FORCE_COLOR.length===0?1:Math.min(Number.parseInt(Ue.FORCE_COLOR,10),3)}function QO(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function eR(t,{streamIsTTY:e,sniffFlags:r=!0}={}){let n=ZO();n!==void 0&&(Pa=n);let i=r?Pa:n;if(i===0)return 0;if(r){if(Ft("color=16m")||Ft("color=full")||Ft("color=truecolor"))return 3;if(Ft("color=256"))return 2}if(t&&!e&&i===void 0)return 0;let s=i||0;if(Ue.TERM==="dumb")return s;if(process.platform==="win32"){let o=XO.release().split(".");return Number(o[0])>=10&&Number(o[2])>=10586?Number(o[2])>=14931?3:2:1}if("CI"in Ue)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(o=>o in Ue)||Ue.CI_NAME==="codeship"?1:s;if("TEAMCITY_VERSION"in Ue)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Ue.TEAMCITY_VERSION)?1:0;if(Ue.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in Ue){let o=Number.parseInt((Ue.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Ue.TERM_PROGRAM){case"iTerm.app":return o>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Ue.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Ue.TERM)||"COLORTERM"in Ue?1:s}function Pu(t,e={}){let r=eR(t,H({streamIsTTY:t&&t.isTTY},e));return QO(r)}sy.exports={supportsColor:Pu,stdout:Pu({isTTY:iy.isatty(1)}),stderr:Pu({isTTY:iy.isatty(2)})}});var cy=j((He,Oa)=>{var tR=require("tty"),Aa=require("util");He.init=cR;He.log=sR;He.formatArgs=nR;He.save=oR;He.load=aR;He.useColors=rR;He.destroy=Aa.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");He.colors=[6,2,3,4,5,1];try{let t=oy();t&&(t.stderr||t).level>=2&&(He.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}He.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function rR(){return"colors"in He.inspectOpts?Boolean(He.inspectOpts.colors):tR.isatty(process.stderr.fd)}function nR(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${e} [0m`;t[0]=s+t[0].split(`
`).join(`
`+s),t.push(i+"m+"+Oa.exports.humanize(this.diff)+"[0m")}else t[0]=iR()+e+" "+t[0]}function iR(){return He.inspectOpts.hideDate?"":new Date().toISOString()+" "}function sR(...t){return process.stderr.write(Aa.format(...t)+`
`)}function oR(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function aR(){return process.env.DEBUG}function cR(t){t.inspectOpts={};let e=Object.keys(He.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=He.inspectOpts[e[r]]}Oa.exports=Su()(He);var{formatters:ay}=Oa.exports;ay.o=function(t){return this.inspectOpts.colors=this.useColors,Aa.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};ay.O=function(t){return this.inspectOpts.colors=this.useColors,Aa.inspect(t,this.inspectOpts)}});var ly=j((qk,Au)=>{typeof process=="undefined"||process.type==="renderer"||process.browser===!0||process.__nwjs?Au.exports=ty():Au.exports=cy()});var fy=j((Hk,uy)=>{var bs;uy.exports=function(){if(!bs){try{bs=ly()("follow-redirects")}catch{}typeof bs!="function"&&(bs=function(){})}bs.apply(null,arguments)}});var wy=j((Wk,Iu)=>{var Sn=require("url"),Ou=Sn.URL,lR=require("http"),uR=require("https"),hy=require("stream").Writable,fR=require("assert"),dy=fy(),Pn=["abort","aborted","connect","error","socket","timeout"],Ru=Object.create(null);Pn.forEach(function(t){Ru[t]=function(e,r,n){this._redirectable.emit(t,e,r,n)}});var py=Ra("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),hR=Ra("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),dR=Ra("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),pR=Ra("ERR_STREAM_WRITE_AFTER_END","write after end");function bt(t,e){hy.call(this),this._sanitizeOptions(t),this._options=t,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],e&&this.on("response",e);var r=this;this._onNativeResponse=function(n){r._processResponse(n)},this._performRequest()}bt.prototype=Object.create(hy.prototype);bt.prototype.abort=function(){vy(this._currentRequest),this.emit("abort")};bt.prototype.write=function(t,e,r){if(this._ending)throw new pR;if(!(typeof t=="string"||typeof t=="object"&&"length"in t))throw new TypeError("data should be a string, Buffer or Uint8Array");if(typeof e=="function"&&(r=e,e=null),t.length===0){r&&r();return}this._requestBodyLength+t.length<=this._options.maxBodyLength?(this._requestBodyLength+=t.length,this._requestBodyBuffers.push({data:t,encoding:e}),this._currentRequest.write(t,e,r)):(this.emit("error",new dR),this.abort())};bt.prototype.end=function(t,e,r){if(typeof t=="function"?(r=t,t=e=null):typeof e=="function"&&(r=e,e=null),!t)this._ended=this._ending=!0,this._currentRequest.end(null,null,r);else{var n=this,i=this._currentRequest;this.write(t,e,function(){n._ended=!0,i.end(null,null,r)}),this._ending=!0}};bt.prototype.setHeader=function(t,e){this._options.headers[t]=e,this._currentRequest.setHeader(t,e)};bt.prototype.removeHeader=function(t){delete this._options.headers[t],this._currentRequest.removeHeader(t)};bt.prototype.setTimeout=function(t,e){var r=this;function n(o){o.setTimeout(t),o.removeListener("timeout",o.destroy),o.addListener("timeout",o.destroy)}function i(o){r._timeout&&clearTimeout(r._timeout),r._timeout=setTimeout(function(){r.emit("timeout"),s()},t),n(o)}function s(){r._timeout&&(clearTimeout(r._timeout),r._timeout=null),r.removeListener("abort",s),r.removeListener("error",s),r.removeListener("response",s),e&&r.removeListener("timeout",e),r.socket||r._currentRequest.removeListener("socket",i)}return e&&this.on("timeout",e),this.socket?i(this.socket):this._currentRequest.once("socket",i),this.on("socket",n),this.on("abort",s),this.on("error",s),this.on("response",s),this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(t){bt.prototype[t]=function(e,r){return this._currentRequest[t](e,r)}});["aborted","connection","socket"].forEach(function(t){Object.defineProperty(bt.prototype,t,{get:function(){return this._currentRequest[t]}})});bt.prototype._sanitizeOptions=function(t){if(t.headers||(t.headers={}),t.host&&(t.hostname||(t.hostname=t.host),delete t.host),!t.pathname&&t.path){var e=t.path.indexOf("?");e<0?t.pathname=t.path:(t.pathname=t.path.substring(0,e),t.search=t.path.substring(e))}};bt.prototype._performRequest=function(){var t=this._options.protocol,e=this._options.nativeProtocols[t];if(!e){this.emit("error",new TypeError("Unsupported protocol "+t));return}if(this._options.agents){var r=t.substr(0,t.length-1);this._options.agent=this._options.agents[r]}var n=this._currentRequest=e.request(this._options,this._onNativeResponse);this._currentUrl=Sn.format(this._options),n._redirectable=this;for(var i=0;i<Pn.length;i++)n.on(Pn[i],Ru[Pn[i]]);if(this._isRedirect){var s=0,o=this,a=this._requestBodyBuffers;(function c(u){if(n===o._currentRequest)if(u)o.emit("error",u);else if(s<a.length){var l=a[s++];n.finished||n.write(l.data,l.encoding,c)}else o._ended&&n.end()})()}};bt.prototype._processResponse=function(t){var e=t.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:t.headers,statusCode:e});var r=t.headers.location;if(r&&this._options.followRedirects!==!1&&e>=300&&e<400){if(vy(this._currentRequest),t.destroy(),++this._redirectCount>this._options.maxRedirects){this.emit("error",new hR);return}((e===301||e===302)&&this._options.method==="POST"||e===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],_u(/^content-/i,this._options.headers));var n=_u(/^host$/i,this._options.headers),i=Sn.parse(this._currentUrl),s=n||i.host,o=/^\w+:/.test(r)?this._currentUrl:Sn.format(Object.assign(i,{host:s})),a;try{a=Sn.resolve(o,r)}catch(l){this.emit("error",new py(l));return}dy("redirecting to",a),this._isRedirect=!0;var c=Sn.parse(a);if(Object.assign(this._options,c),(c.protocol!==i.protocol||!gR(c.host,s))&&_u(/^(?:authorization|cookie)$/i,this._options.headers),typeof this._options.beforeRedirect=="function"){var u={headers:t.headers};try{this._options.beforeRedirect.call(null,this._options,u)}catch(l){this.emit("error",l);return}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(l){this.emit("error",new py(l))}}else t.responseUrl=this._currentUrl,t.redirects=this._redirects,this.emit("response",t),this._requestBodyBuffers=[]};function my(t){var e={maxRedirects:21,maxBodyLength:10*1024*1024},r={};return Object.keys(t).forEach(function(n){var i=n+":",s=r[i]=t[n],o=e[n]=Object.create(s);function a(u,l,f){if(typeof u=="string"){var h=u;try{u=gy(new Ou(h))}catch{u=Sn.parse(h)}}else Ou&&u instanceof Ou?u=gy(u):(f=l,l=u,u={protocol:i});return typeof l=="function"&&(f=l,l=null),l=Object.assign({maxRedirects:e.maxRedirects,maxBodyLength:e.maxBodyLength},u,l),l.nativeProtocols=r,fR.equal(l.protocol,i,"protocol mismatch"),dy("options",l),new bt(l,f)}function c(u,l,f){var h=o.request(u,l,f);return h.end(),h}Object.defineProperties(o,{request:{value:a,configurable:!0,enumerable:!0,writable:!0},get:{value:c,configurable:!0,enumerable:!0,writable:!0}})}),e}function mR(){}function gy(t){var e={protocol:t.protocol,hostname:t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,hash:t.hash,search:t.search,pathname:t.pathname,path:t.pathname+t.search,href:t.href};return t.port!==""&&(e.port=Number(t.port)),e}function _u(t,e){var r;for(var n in e)t.test(n)&&(r=e[n],delete e[n]);return r===null||typeof r=="undefined"?void 0:String(r).trim()}function Ra(t,e){function r(n){Error.captureStackTrace(this,this.constructor),n?(this.message=e+": "+n.message,this.cause=n):this.message=e}return r.prototype=new Error,r.prototype.constructor=r,r.prototype.name="Error ["+t+"]",r.prototype.code=t,r}function vy(t){for(var e=0;e<Pn.length;e++)t.removeListener(Pn[e],Ru[Pn[e]]);t.on("error",mR),t.abort()}function gR(t,e){if(t===e)return!0;let r=t.length-e.length-1;return r>0&&t[r]==="."&&t.endsWith(e)}Iu.exports=my({http:lR,https:uR});Iu.exports.wrap=my});Xu(exports);var We=Q(require("path"));var Fs=Q(require("assert"));"use strict";var wb={right:xb,center:Sb},yb=0,Rs=1,bb=2,_s=3,Zu=class{constructor(e){var r;this.width=e.width,this.wrap=(r=e.wrap)!==null&&r!==void 0?r:!0,this.rows=[]}span(...e){let r=this.div(...e);r.span=!0}resetOutput(){this.rows=[]}div(...e){if(e.length===0&&this.div(""),this.wrap&&this.shouldApplyLayoutDSL(...e)&&typeof e[0]=="string")return this.applyLayoutDSL(e[0]);let r=e.map(n=>typeof n=="string"?this.colFromString(n):n);return this.rows.push(r),r}shouldApplyLayoutDSL(...e){return e.length===1&&typeof e[0]=="string"&&/[\t\n]/.test(e[0])}applyLayoutDSL(e){let r=e.split(`
`).map(i=>i.split("	")),n=0;return r.forEach(i=>{i.length>1&&lt.stringWidth(i[0])>n&&(n=Math.min(Math.floor(this.width*.5),lt.stringWidth(i[0])))}),r.forEach(i=>{this.div(...i.map((s,o)=>({text:s.trim(),padding:this.measurePadding(s),width:o===0&&i.length>1?n:void 0})))}),this.rows[this.rows.length-1]}colFromString(e){return{text:e,padding:this.measurePadding(e)}}measurePadding(e){let r=lt.stripAnsi(e);return[0,r.match(/\s*$/)[0].length,0,r.match(/^\s*/)[0].length]}toString(){let e=[];return this.rows.forEach(r=>{this.rowToString(r,e)}),e.filter(r=>!r.hidden).map(r=>r.text).join(`
`)}rowToString(e,r){return this.rasterize(e).forEach((n,i)=>{let s="";n.forEach((o,a)=>{let{width:c}=e[a],u=this.negatePadding(e[a]),l=o;u>lt.stringWidth(o)&&(l+=" ".repeat(u-lt.stringWidth(o))),e[a].align&&e[a].align!=="left"&&this.wrap&&(l=wb[e[a].align](l,u),lt.stringWidth(l)<u&&(l+=" ".repeat((c||0)-lt.stringWidth(l)-1)));let f=e[a].padding||[0,0,0,0];f[_s]&&(s+=" ".repeat(f[_s])),s+=Qu(e[a],l,"| "),s+=l,s+=Qu(e[a],l," |"),f[Rs]&&(s+=" ".repeat(f[Rs])),i===0&&r.length>0&&(s=this.renderInline(s,r[r.length-1]))}),r.push({text:s.replace(/ +$/,""),span:e.span})}),r}renderInline(e,r){let n=e.match(/^ */),i=n?n[0].length:0,s=r.text,o=lt.stringWidth(s.trimRight());return r.span?this.wrap?i<o?e:(r.hidden=!0,s.trimRight()+" ".repeat(i-o)+e.trimLeft()):(r.hidden=!0,s+e):e}rasterize(e){let r=[],n=this.columnWidths(e),i;return e.forEach((s,o)=>{s.width=n[o],this.wrap?i=lt.wrap(s.text,this.negatePadding(s),{hard:!0}).split(`
`):i=s.text.split(`
`),s.border&&(i.unshift("."+"-".repeat(this.negatePadding(s)+2)+"."),i.push("'"+"-".repeat(this.negatePadding(s)+2)+"'")),s.padding&&(i.unshift(...new Array(s.padding[yb]||0).fill("")),i.push(...new Array(s.padding[bb]||0).fill(""))),i.forEach((a,c)=>{r[c]||r.push([]);let u=r[c];for(let l=0;l<o;l++)u[l]===void 0&&u.push("");u.push(a)})}),r}negatePadding(e){let r=e.width||0;return e.padding&&(r-=(e.padding[_s]||0)+(e.padding[Rs]||0)),e.border&&(r-=4),r}columnWidths(e){if(!this.wrap)return e.map(o=>o.width||lt.stringWidth(o.text));let r=e.length,n=this.width,i=e.map(o=>{if(o.width)return r--,n-=o.width,o.width}),s=r?Math.floor(n/r):0;return i.map((o,a)=>o===void 0?Math.max(s,Eb(e[a])):o)}};function Qu(t,e,r){return t.border?/[.']-+[.']/.test(e)?"":e.trim().length!==0?r:"  ":""}function Eb(t){let e=t.padding||[],r=1+(e[_s]||0)+(e[Rs]||0);return t.border?r+4:r}function Cb(){return typeof process=="object"&&process.stdout&&process.stdout.columns?process.stdout.columns:80}function xb(t,e){t=t.trim();let r=lt.stringWidth(t);return r<e?" ".repeat(e-r)+t:t}function Sb(t,e){t=t.trim();let r=lt.stringWidth(t);return r>=e?t:" ".repeat(e-r>>1)+t}var lt;function ef(t,e){return lt=e,new Zu({width:(t==null?void 0:t.width)||Cb(),wrap:t==null?void 0:t.wrap})}var tf=new RegExp("(?:\\[(?:\\d+[ABCDEFGJKSTm]|\\d+;\\d+[Hfm]|\\d+;\\d+;\\d+m|6n|s|u|\\?25[lh])|\\w)","g");function qa(t){return t.replace(tf,"")}function rf(t,e){let[r,n]=t.match(tf)||["",""];t=qa(t);let i="";for(let s=0;s<t.length;s++)s!==0&&s%e==0&&(i+=`
`),i+=t.charAt(s);return r&&n&&(i=`${r}${i}${n}`),i}function Ha(t){return ef(t,{stringWidth:e=>[...e].length,stripAnsi:qa,wrap:rf})}var _n=Q(require("path")),Is=Q(require("fs"));function nf(t,e){let r=(0,_n.resolve)(".",t),n;for((0,Is.statSync)(r).isDirectory()||(r=(0,_n.dirname)(r));;){if(n=e(r,(0,Is.readdirSync)(r)),n)return(0,_n.resolve)(r,n);if(r=(0,_n.dirname)(n=r),n===r)break}}var yf=Q(require("util")),bf=Q(require("fs")),Ga=Q(require("url"));var af=Q(require("util")),cf=Q(require("fs")),ks=Q(require("path"));function Ur(t){if(t!==t.toLowerCase()&&t!==t.toUpperCase()||(t=t.toLocaleLowerCase()),t.indexOf("-")===-1&&t.indexOf("_")===-1)return t;{let r="",n=!1,i=t.match(/^-+/);for(let s=i?i[0].length:0;s<t.length;s++){let o=t.charAt(s);n&&(n=!1,o=o.toLocaleUpperCase()),s!==0&&(o==="-"||o==="_")?n=!0:o!=="-"&&o!=="_"&&(r+=o)}return r}}function Ds(t,e){let r=t.toLocaleLowerCase();e=e||"-";let n="";for(let i=0;i<t.length;i++){let s=r.charAt(i),o=t.charAt(i);s!==o&&i>0?n+=`${e}${r.charAt(i)}`:n+=o}return n}function Ls(t){return t==null?!1:typeof t=="number"||/^0x[0-9a-f]+$/i.test(t)?!0:t.length>1&&t[0]==="0"?!1:/^[-]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(t)}function sf(t){if(Array.isArray(t))return t.map(o=>typeof o!="string"?o+"":o);t=t.trim();let e=0,r=null,n=null,i=null,s=[];for(let o=0;o<t.length;o++){if(r=n,n=t.charAt(o),n===" "&&!i){r!==" "&&e++;continue}n===i?i=null:(n==="'"||n==='"')&&!i&&(i=n),s[e]||(s[e]=""),s[e]+=n}return s}var Qt,Wa=class{constructor(e){Qt=e}parse(e,r){let n=Object.assign({alias:void 0,array:void 0,boolean:void 0,config:void 0,configObjects:void 0,configuration:void 0,coerce:void 0,count:void 0,default:void 0,envPrefix:void 0,narg:void 0,normalize:void 0,string:void 0,number:void 0,__:void 0,key:void 0},r),i=sf(e),s=Pb(Object.assign(Object.create(null),n.alias)),o=Object.assign({"boolean-negation":!0,"camel-case-expansion":!0,"combine-arrays":!1,"dot-notation":!0,"duplicate-arguments-array":!0,"flatten-duplicate-arrays":!0,"greedy-arrays":!0,"halt-at-non-option":!1,"nargs-eats-options":!1,"negation-prefix":"no-","parse-numbers":!0,"parse-positional-numbers":!0,"populate--":!1,"set-placeholder-key":!1,"short-option-groups":!0,"strip-aliased":!1,"strip-dashed":!1,"unknown-options-as-args":!1},n.configuration),a=Object.assign(Object.create(null),n.default),c=n.configObjects||[],u=n.envPrefix,l=o["populate--"],f=l?"--":"_",h=Object.create(null),d=Object.create(null),m=n.__||Qt.format,p={aliases:Object.create(null),arrays:Object.create(null),bools:Object.create(null),strings:Object.create(null),numbers:Object.create(null),counts:Object.create(null),normalize:Object.create(null),configs:Object.create(null),nargs:Object.create(null),coercions:Object.create(null),keys:[]},v=/^-([0-9]+(\.[0-9]+)?|\.[0-9]+)$/,w=new RegExp("^--"+o["negation-prefix"]+"(.+)");[].concat(n.array||[]).filter(Boolean).forEach(function(y){let C=typeof y=="object"?y.key:y,U=Object.keys(y).map(function(P){return{boolean:"bools",string:"strings",number:"numbers"}[P]}).filter(Boolean).pop();U&&(p[U][C]=!0),p.arrays[C]=!0,p.keys.push(C)}),[].concat(n.boolean||[]).filter(Boolean).forEach(function(y){p.bools[y]=!0,p.keys.push(y)}),[].concat(n.string||[]).filter(Boolean).forEach(function(y){p.strings[y]=!0,p.keys.push(y)}),[].concat(n.number||[]).filter(Boolean).forEach(function(y){p.numbers[y]=!0,p.keys.push(y)}),[].concat(n.count||[]).filter(Boolean).forEach(function(y){p.counts[y]=!0,p.keys.push(y)}),[].concat(n.normalize||[]).filter(Boolean).forEach(function(y){p.normalize[y]=!0,p.keys.push(y)}),typeof n.narg=="object"&&Object.entries(n.narg).forEach(([y,C])=>{typeof C=="number"&&(p.nargs[y]=C,p.keys.push(y))}),typeof n.coerce=="object"&&Object.entries(n.coerce).forEach(([y,C])=>{typeof C=="function"&&(p.coercions[y]=C,p.keys.push(y))}),typeof n.config!="undefined"&&(Array.isArray(n.config)||typeof n.config=="string"?[].concat(n.config).filter(Boolean).forEach(function(y){p.configs[y]=!0}):typeof n.config=="object"&&Object.entries(n.config).forEach(([y,C])=>{(typeof C=="boolean"||typeof C=="function")&&(p.configs[y]=C)})),se(n.key,s,n.default,p.arrays),Object.keys(a).forEach(function(y){(p.aliases[y]||[]).forEach(function(C){a[C]=a[y]})});let b=null;Ba();let E=[],A=Object.assign(Object.create(null),{_:[]}),M={};for(let y=0;y<i.length;y++){let C=i[y],U,P,_,q,re,ge;if(C!=="--"&&fe(C))R(C);else if(C.match(/---+(=|$)/)){R(C);continue}else if(C.match(/^--.+=/)||!o["short-option-groups"]&&C.match(/^-.+=/))q=C.match(/^--?([^=]+)=([\s\S]*)$/),q!==null&&Array.isArray(q)&&q.length>=3&&(B(q[1],p.arrays)?y=I(y,q[1],i,q[2]):B(q[1],p.nargs)!==!1?y=N(y,q[1],i,q[2]):F(q[1],q[2]));else if(C.match(w)&&o["boolean-negation"])q=C.match(w),q!==null&&Array.isArray(q)&&q.length>=2&&(P=q[1],F(P,B(P,p.arrays)?[!1]:!1));else if(C.match(/^--.+/)||!o["short-option-groups"]&&C.match(/^-[^-]+/))q=C.match(/^--?(.+)/),q!==null&&Array.isArray(q)&&q.length>=2&&(P=q[1],B(P,p.arrays)?y=I(y,P,i):B(P,p.nargs)!==!1?y=N(y,P,i):(re=i[y+1],re!==void 0&&(!re.match(/^-/)||re.match(v))&&!B(P,p.bools)&&!B(P,p.counts)||/^(true|false)$/.test(re)?(F(P,re),y++):F(P,he(P))));else if(C.match(/^-.\..+=/))q=C.match(/^-([^=]+)=([\s\S]*)$/),q!==null&&Array.isArray(q)&&q.length>=3&&F(q[1],q[2]);else if(C.match(/^-.\..+/)&&!C.match(v))re=i[y+1],q=C.match(/^-(.\..+)/),q!==null&&Array.isArray(q)&&q.length>=2&&(P=q[1],re!==void 0&&!re.match(/^-/)&&!B(P,p.bools)&&!B(P,p.counts)?(F(P,re),y++):F(P,he(P)));else if(C.match(/^-[^-]+/)&&!C.match(v)){_=C.slice(1,-1).split(""),U=!1;for(let me=0;me<_.length;me++){if(re=C.slice(me+2),_[me+1]&&_[me+1]==="="){ge=C.slice(me+3),P=_[me],B(P,p.arrays)?y=I(y,P,i,ge):B(P,p.nargs)!==!1?y=N(y,P,i,ge):F(P,ge),U=!0;break}if(re==="-"){F(_[me],re);continue}if(/[A-Za-z]/.test(_[me])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(re)&&B(re,p.bools)===!1){F(_[me],re),U=!0;break}if(_[me+1]&&_[me+1].match(/\W/)){F(_[me],re),U=!0;break}else F(_[me],he(_[me]))}P=C.slice(-1)[0],!U&&P!=="-"&&(B(P,p.arrays)?y=I(y,P,i):B(P,p.nargs)!==!1?y=N(y,P,i):(re=i[y+1],re!==void 0&&(!/^(-|--)[^-]/.test(re)||re.match(v))&&!B(P,p.bools)&&!B(P,p.counts)||/^(true|false)$/.test(re)?(F(P,re),y++):F(P,he(P))))}else if(C.match(/^-[0-9]$/)&&C.match(v)&&B(C.slice(1),p.bools))P=C.slice(1),F(P,he(P));else if(C==="--"){E=i.slice(y+1);break}else if(o["halt-at-non-option"]){E=i.slice(y);break}else R(C)}W(A,!0),W(A,!1),$(A),T(),L(A,p.aliases,a,!0),S(A),o["set-placeholder-key"]&&x(A),Object.keys(p.counts).forEach(function(y){D(A,y.split("."))||F(y,0)}),l&&E.length&&(A[f]=[]),E.forEach(function(y){A[f].push(y)}),o["camel-case-expansion"]&&o["strip-dashed"]&&Object.keys(A).filter(y=>y!=="--"&&y.includes("-")).forEach(y=>{delete A[y]}),o["strip-aliased"]&&[].concat(...Object.keys(s).map(y=>s[y])).forEach(y=>{o["camel-case-expansion"]&&y.includes("-")&&delete A[y.split(".").map(C=>Ur(C)).join(".")],delete A[y]});function R(y){let C=O("_",y);(typeof C=="string"||typeof C=="number")&&A._.push(C)}function N(y,C,U,P){let _,q=B(C,p.nargs);if(q=typeof q!="number"||isNaN(q)?1:q,q===0)return Le(P)||(b=Error(m("Argument unexpected for: %s",C))),F(C,he(C)),y;let re=Le(P)?0:1;if(o["nargs-eats-options"])U.length-(y+1)+re<q&&(b=Error(m("Not enough arguments following: %s",C))),re=q;else{for(_=y+1;_<U.length&&(!U[_].match(/^-[^0-9]/)||U[_].match(v)||fe(U[_]));_++)re++;re<q&&(b=Error(m("Not enough arguments following: %s",C)))}let ge=Math.min(re,q);for(!Le(P)&&ge>0&&(F(C,P),ge--),_=y+1;_<ge+y+1;_++)F(C,U[_]);return y+ge}function I(y,C,U,P){let _=[],q=P||U[y+1],re=B(C,p.nargs);if(B(C,p.bools)&&!/^(true|false)$/.test(q))_.push(!0);else if(Le(q)||Le(P)&&/^-/.test(q)&&!v.test(q)&&!fe(q)){if(a[C]!==void 0){let ge=a[C];_=Array.isArray(ge)?ge:[ge]}}else{Le(P)||_.push(k(C,P));for(let ge=y+1;ge<U.length&&!(!o["greedy-arrays"]&&_.length>0||re&&typeof re=="number"&&_.length>=re||(q=U[ge],/^-/.test(q)&&!v.test(q)&&!fe(q)));ge++)y=ge,_.push(k(C,q))}return typeof re=="number"&&(re&&_.length<re||isNaN(re)&&_.length===0)&&(b=Error(m("Not enough arguments following: %s",C))),F(C,_),y}function F(y,C){if(/-/.test(y)&&o["camel-case-expansion"]){let _=y.split(".").map(function(q){return Ur(q)}).join(".");V(y,_)}let U=k(y,C),P=y.split(".");te(A,P,U),p.aliases[y]&&p.aliases[y].forEach(function(_){let q=_.split(".");te(A,q,U)}),P.length>1&&o["dot-notation"]&&(p.aliases[P[0]]||[]).forEach(function(_){let q=_.split("."),re=[].concat(P);re.shift(),q=q.concat(re),(p.aliases[y]||[]).includes(q.join("."))||te(A,q,U)}),B(y,p.normalize)&&!B(y,p.arrays)&&[y].concat(p.aliases[y]||[]).forEach(function(q){Object.defineProperty(M,q,{enumerable:!0,get(){return C},set(re){C=typeof re=="string"?Qt.normalize(re):re}})})}function V(y,C){p.aliases[y]&&p.aliases[y].length||(p.aliases[y]=[C],h[C]=!0),p.aliases[C]&&p.aliases[C].length||V(C,y)}function k(y,C){typeof C=="string"&&(C[0]==="'"||C[0]==='"')&&C[C.length-1]===C[0]&&(C=C.substring(1,C.length-1)),(B(y,p.bools)||B(y,p.counts))&&typeof C=="string"&&(C=C==="true");let U=Array.isArray(C)?C.map(function(P){return O(y,P)}):O(y,C);return B(y,p.counts)&&(Le(U)||typeof U=="boolean")&&(U=za()),B(y,p.normalize)&&B(y,p.arrays)&&(Array.isArray(C)?U=C.map(P=>Qt.normalize(P)):U=Qt.normalize(C)),U}function O(y,C){return!o["parse-positional-numbers"]&&y==="_"||!B(y,p.strings)&&!B(y,p.bools)&&!Array.isArray(C)&&(Ls(C)&&o["parse-numbers"]&&Number.isSafeInteger(Math.floor(parseFloat(`${C}`)))||!Le(C)&&B(y,p.numbers))&&(C=Number(C)),C}function $(y){let C=Object.create(null);L(C,p.aliases,a),Object.keys(p.configs).forEach(function(U){let P=y[U]||C[U];if(P)try{let _=null,q=Qt.resolve(Qt.cwd(),P),re=p.configs[U];if(typeof re=="function"){try{_=re(q)}catch(ge){_=ge}if(_ instanceof Error){b=_;return}}else _=Qt.require(q);z(_)}catch(_){_.name==="PermissionDenied"?b=_:y[U]&&(b=Error(m("Invalid JSON config file: %s",P)))}})}function z(y,C){Object.keys(y).forEach(function(U){let P=y[U],_=C?C+"."+U:U;typeof P=="object"&&P!==null&&!Array.isArray(P)&&o["dot-notation"]?z(P,_):(!D(A,_.split("."))||B(_,p.arrays)&&o["combine-arrays"])&&F(_,P)})}function T(){typeof c!="undefined"&&c.forEach(function(y){z(y)})}function W(y,C){if(typeof u=="undefined")return;let U=typeof u=="string"?u:"",P=Qt.env();Object.keys(P).forEach(function(_){if(U===""||_.lastIndexOf(U,0)===0){let q=_.split("__").map(function(re,ge){return ge===0&&(re=re.substring(U.length)),Ur(re)});(C&&p.configs[q.join(".")]||!C)&&!D(y,q)&&F(q.join("."),P[_])}})}function S(y){let C,U=new Set;Object.keys(y).forEach(function(P){if(!U.has(P)&&(C=B(P,p.coercions),typeof C=="function"))try{let _=O(P,C(y[P]));[].concat(p.aliases[P]||[],P).forEach(q=>{U.add(q),y[q]=_})}catch(_){b=_}})}function x(y){return p.keys.forEach(C=>{~C.indexOf(".")||typeof y[C]=="undefined"&&(y[C]=void 0)}),y}function L(y,C,U,P=!1){Object.keys(U).forEach(function(_){D(y,_.split("."))||(te(y,_.split("."),U[_]),P&&(d[_]=!0),(C[_]||[]).forEach(function(q){D(y,q.split("."))||te(y,q.split("."),U[_])}))})}function D(y,C){let U=y;o["dot-notation"]||(C=[C.join(".")]),C.slice(0,-1).forEach(function(_){U=U[_]||{}});let P=C[C.length-1];return typeof U!="object"?!1:P in U}function te(y,C,U){let P=y;o["dot-notation"]||(C=[C.join(".")]),C.slice(0,-1).forEach(function(me){me=of(me),typeof P=="object"&&P[me]===void 0&&(P[me]={}),typeof P[me]!="object"||Array.isArray(P[me])?(Array.isArray(P[me])?P[me].push({}):P[me]=[P[me],{}],P=P[me][P[me].length-1]):P=P[me]});let _=of(C[C.length-1]),q=B(C.join("."),p.arrays),re=Array.isArray(U),ge=o["duplicate-arguments-array"];!ge&&B(_,p.nargs)&&(ge=!0,(!Le(P[_])&&p.nargs[_]===1||Array.isArray(P[_])&&P[_].length===p.nargs[_])&&(P[_]=void 0)),U===za()?P[_]=za(P[_]):Array.isArray(P[_])?ge&&q&&re?P[_]=o["flatten-duplicate-arrays"]?P[_].concat(U):(Array.isArray(P[_][0])?P[_]:[P[_]]).concat([U]):!ge&&Boolean(q)===Boolean(re)?P[_]=U:P[_]=P[_].concat([U]):P[_]===void 0&&q?P[_]=re?U:[U]:ge&&!(P[_]===void 0||B(_,p.counts)||B(_,p.bools))?P[_]=[P[_],U]:P[_]=U}function se(...y){y.forEach(function(C){Object.keys(C||{}).forEach(function(U){p.aliases[U]||(p.aliases[U]=[].concat(s[U]||[]),p.aliases[U].concat(U).forEach(function(P){if(/-/.test(P)&&o["camel-case-expansion"]){let _=Ur(P);_!==U&&p.aliases[U].indexOf(_)===-1&&(p.aliases[U].push(_),h[_]=!0)}}),p.aliases[U].concat(U).forEach(function(P){if(P.length>1&&/[A-Z]/.test(P)&&o["camel-case-expansion"]){let _=Ds(P,"-");_!==U&&p.aliases[U].indexOf(_)===-1&&(p.aliases[U].push(_),h[_]=!0)}}),p.aliases[U].forEach(function(P){p.aliases[P]=[U].concat(p.aliases[U].filter(function(_){return P!==_}))}))})})}function B(y,C){let U=[].concat(p.aliases[y]||[],y),P=Object.keys(C),_=U.find(q=>P.includes(q));return _?C[_]:!1}function De(y){let C=Object.keys(p);return[].concat(C.map(P=>p[P])).some(function(P){return Array.isArray(P)?P.includes(y):P[y]})}function Be(y,...C){return[].concat(...C).some(function(P){let _=y.match(P);return _&&De(_[1])})}function Z(y){if(y.match(v)||!y.match(/^-[^-]+/))return!1;let C=!0,U,P=y.slice(1).split("");for(let _=0;_<P.length;_++){if(U=y.slice(_+2),!De(P[_])){C=!1;break}if(P[_+1]&&P[_+1]==="="||U==="-"||/[A-Za-z]/.test(P[_])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(U)||P[_+1]&&P[_+1].match(/\W/))break}return C}function fe(y){return o["unknown-options-as-args"]&&ue(y)}function ue(y){return y.match(v)||Z(y)?!1:!Be(y,/^-+([^=]+?)=[\s\S]*$/,w,/^-+([^=]+?)$/,/^-+([^=]+?)-$/,/^-+([^=]+?\d+)$/,/^-+([^=]+?)\W+.*$/)}function he(y){return!B(y,p.bools)&&!B(y,p.counts)&&`${y}`in a?a[y]:_e(tt(y))}function _e(y){return{boolean:!0,string:"",number:void 0,array:[]}[y]}function tt(y){let C="boolean";return B(y,p.strings)?C="string":B(y,p.numbers)?C="number":B(y,p.bools)?C="boolean":B(y,p.arrays)&&(C="array"),C}function Le(y){return y===void 0}function Ba(){Object.keys(p.counts).find(y=>B(y,p.arrays)?(b=Error(m("Invalid configuration: %s, opts.count excludes opts.array.",y)),!0):B(y,p.nargs)?(b=Error(m("Invalid configuration: %s, opts.count excludes opts.narg.",y)),!0):!1)}return{aliases:Object.assign({},p.aliases),argv:Object.assign(M,A),configuration:o,defaulted:Object.assign({},d),error:b,newAliases:Object.assign({},h)}}};function Pb(t){let e=[],r=Object.create(null),n=!0;for(Object.keys(t).forEach(function(i){e.push([].concat(t[i],i))});n;){n=!1;for(let i=0;i<e.length;i++)for(let s=i+1;s<e.length;s++)if(e[i].filter(function(a){return e[s].indexOf(a)!==-1}).length){e[i]=e[i].concat(e[s]),e.splice(s,1),n=!0;break}}return e.forEach(function(i){i=i.filter(function(o,a,c){return c.indexOf(o)===a});let s=i.pop();s!==void 0&&typeof s=="string"&&(r[s]=i)}),r}function za(t){return t!==void 0?t+1:1}function of(t){return t==="__proto__"?"___proto___":t}var lf=process&&process.env&&process.env.YARGS_MIN_NODE_VERSION?Number(process.env.YARGS_MIN_NODE_VERSION):10;if(process&&process.version&&Number(process.version.match(/v([^.]+)/)[1])<lf)throw Error(`yargs parser supports a minimum Node.js version of ${lf}. Read our version support policy: https://github.com/yargs/yargs-parser#supported-nodejs-versions`);var Ab=process?process.env:{},uf=new Wa({cwd:process.cwd,env:()=>Ab,format:af.format,normalize:ks.normalize,resolve:ks.resolve,require:t=>{if(typeof require!="undefined")return require(t);if(t.match(/\.json$/))return(0,cf.readFileSync)(t,"utf8");throw Error("only .json config files are supported in ESM")}}),Ci=function(e,r){return uf.parse(e.slice(),r).argv};Ci.detailed=function(t,e){return uf.parse(t.slice(),e)};Ci.camelCase=Ur;Ci.decamelize=Ds;Ci.looksLikeNumber=Ls;var ff=Ci;var Nt=Q(require("path"));function Ob(){return Rb()?0:1}function Rb(){return _b()&&!process.defaultApp}function _b(){return!!process.versions.electron}function hf(){return process.argv[Ob()]}var ye=class extends Error{constructor(e){super(e||"yargs error");this.name="YError",Error.captureStackTrace(this,ye)}};var In=Q(require("fs")),df=Q(require("util")),pf=Q(require("path")),mf={fs:{readFileSync:In.readFileSync,writeFile:In.writeFile},format:df.format,resolve:pf.resolve,exists:t=>{try{return(0,In.statSync)(t).isFile()}catch{return!1}}};var Tt,gf=class{constructor(e){e=e||{},this.directory=e.directory||"./locales",this.updateFiles=typeof e.updateFiles=="boolean"?e.updateFiles:!0,this.locale=e.locale||"en",this.fallbackToLanguage=typeof e.fallbackToLanguage=="boolean"?e.fallbackToLanguage:!0,this.cache=Object.create(null),this.writeQueue=[]}__(...e){if(typeof arguments[0]!="string")return this._taggedLiteral(arguments[0],...arguments);let r=e.shift(),n=function(){};return typeof e[e.length-1]=="function"&&(n=e.pop()),n=n||function(){},this.cache[this.locale]||this._readLocaleFile(),!this.cache[this.locale][r]&&this.updateFiles?(this.cache[this.locale][r]=r,this._enqueueWrite({directory:this.directory,locale:this.locale,cb:n})):n(),Tt.format.apply(Tt.format,[this.cache[this.locale][r]||r].concat(e))}__n(){let e=Array.prototype.slice.call(arguments),r=e.shift(),n=e.shift(),i=e.shift(),s=function(){};typeof e[e.length-1]=="function"&&(s=e.pop()),this.cache[this.locale]||this._readLocaleFile();let o=i===1?r:n;this.cache[this.locale][r]&&(o=this.cache[this.locale][r][i===1?"one":"other"]),!this.cache[this.locale][r]&&this.updateFiles?(this.cache[this.locale][r]={one:r,other:n},this._enqueueWrite({directory:this.directory,locale:this.locale,cb:s})):s();let a=[o];return~o.indexOf("%d")&&a.push(i),Tt.format.apply(Tt.format,a.concat(e))}setLocale(e){this.locale=e}getLocale(){return this.locale}updateLocale(e){this.cache[this.locale]||this._readLocaleFile();for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&(this.cache[this.locale][r]=e[r])}_taggedLiteral(e,...r){let n="";return e.forEach(function(i,s){let o=r[s+1];n+=i,typeof o!="undefined"&&(n+="%s")}),this.__.apply(this,[n].concat([].slice.call(r,1)))}_enqueueWrite(e){this.writeQueue.push(e),this.writeQueue.length===1&&this._processWriteQueue()}_processWriteQueue(){let e=this,r=this.writeQueue[0],n=r.directory,i=r.locale,s=r.cb,o=this._resolveLocaleFile(n,i),a=JSON.stringify(this.cache[i],null,2);Tt.fs.writeFile(o,a,"utf-8",function(c){e.writeQueue.shift(),e.writeQueue.length>0&&e._processWriteQueue(),s(c)})}_readLocaleFile(){let e={},r=this._resolveLocaleFile(this.directory,this.locale);try{Tt.fs.readFileSync&&(e=JSON.parse(Tt.fs.readFileSync(r,"utf-8")))}catch(n){if(n instanceof SyntaxError&&(n.message="syntax error in "+r),n.code==="ENOENT")e={};else throw n}this.cache[this.locale]=e}_resolveLocaleFile(e,r){let n=Tt.resolve(e,"./",r+".json");if(this.fallbackToLanguage&&!this._fileExistsSync(n)&&~r.lastIndexOf("_")){let i=Tt.resolve(e,"./",r.split("_")[0]+".json");this._fileExistsSync(i)&&(n=i)}return n}_fileExistsSync(e){return Tt.exists(e)}};function vf(t,e){Tt=e;let r=new gf(t);return{__:r.__.bind(r),__n:r.__n.bind(r),setLocale:r.setLocale.bind(r),getLocale:r.getLocale.bind(r),updateLocale:r.updateLocale.bind(r),locale:r.locale}}var Ib=t=>vf(t,mf),wf=Ib;"use strict";var Db="require is not supported by ESM",Ef="loading a directory of commands is not supported yet for ESM",Lb=(0,Ga.fileURLToPath)("file:///c%3A/home/runner/work/vscode-remote-containers/vscode-remote-containers/node_modules/yargs/lib/platform-shims/esm.mjs").split("node_modules")[0],kb=(0,Ga.fileURLToPath)("file:///c%3A/home/runner/work/vscode-remote-containers/vscode-remote-containers/node_modules/yargs/lib/platform-shims/esm.mjs"),Cf={assert:{notStrictEqual:Fs.notStrictEqual,strictEqual:Fs.strictEqual},cliui:Ha,findUp:nf,getEnv:t=>process.env[t],inspect:yf.inspect,getCallerFile:()=>{throw new ye(Ef)},getProcessArgvBin:hf,mainFilename:Lb||process.cwd(),Parser:ff,path:{basename:Nt.basename,dirname:Nt.dirname,extname:Nt.extname,relative:Nt.relative,resolve:Nt.resolve},process:{argv:()=>process.argv,cwd:process.cwd,execPath:()=>process.execPath,exit:process.exit,nextTick:process.nextTick,stdColumns:typeof process.stdout.columns!="undefined"?process.stdout.columns:null},readFileSync:bf.readFileSync,require:()=>{throw new ye(Db)},requireDirectory:()=>{throw new ye(Ef)},stringWidth:t=>[...t].length,y18n:wf({directory:(0,Nt.resolve)(kb,"../../../locales"),updateFiles:!1})};function Ze(t,e,r,n){r.assert.notStrictEqual(t,e,n)}function Va(t,e){e.assert.strictEqual(typeof t,"string")}function Dn(t){return Object.keys(t)}function Ce(t){return!!t&&!!t.then&&typeof t.then=="function"}function mr(t){let r=t.replace(/\s{2,}/g," ").split(/\s+(?![^[]*]|[^<]*>)/),n=/\.*[\][<>]/g,i=r.shift();if(!i)throw new Error(`No command found in: ${t}`);let s={cmd:i.replace(n,""),demanded:[],optional:[]};return r.forEach((o,a)=>{let c=!1;o=o.replace(/\s/g,""),/\.+[\]>]/.test(o)&&a===r.length-1&&(c=!0),/^\[/.test(o)?s.optional.push({cmd:o.replace(n,"").split("|"),variadic:c}):s.demanded.push({cmd:o.replace(n,"").split("|"),variadic:c})}),s}var Fb=["first","second","third","fourth","fifth","sixth"];function Y(t,e,r){function n(){return typeof t=="object"?[{demanded:[],optional:[]},t,e]:[mr(`cmd ${t}`),e,r]}try{let i=0,[s,o,a]=n(),c=[].slice.call(o);for(;c.length&&c[c.length-1]===void 0;)c.pop();let u=a||c.length;if(u<s.demanded.length)throw new ye(`Not enough arguments provided. Expected ${s.demanded.length} but received ${c.length}.`);let l=s.demanded.length+s.optional.length;if(u>l)throw new ye(`Too many arguments provided. Expected max ${l} but received ${u}.`);s.demanded.forEach(f=>{let h=c.shift(),d=xf(h);f.cmd.filter(p=>p===d||p==="*").length===0&&Sf(d,f.cmd,i),i+=1}),s.optional.forEach(f=>{if(c.length===0)return;let h=c.shift(),d=xf(h);f.cmd.filter(p=>p===d||p==="*").length===0&&Sf(d,f.cmd,i),i+=1})}catch(i){console.warn(i.stack)}}function xf(t){return Array.isArray(t)?"array":t===null?"null":typeof t}function Sf(t,e,r){throw new ye(`Invalid ${Fb[r]||"manyith"} argument. Expected ${e.join(" or ")} but received ${t}.`)}var Ya=class{constructor(e){this.globalMiddleware=[],this.frozens=[],this.yargs=e}addMiddleware(e,r,n=!0){if(Y("<array|function> [boolean] [boolean]",[e,r,n],arguments.length),Array.isArray(e)){for(let i=0;i<e.length;i++){if(typeof e[i]!="function")throw Error("middleware must be a function");let s=e[i];s.applyBeforeValidation=r,s.global=n}Array.prototype.push.apply(this.globalMiddleware,e)}else if(typeof e=="function"){let i=e;i.applyBeforeValidation=r,i.global=n,this.globalMiddleware.push(e)}return this.yargs}addCoerceMiddleware(e,r){let n=this.yargs.getAliases();return this.globalMiddleware=this.globalMiddleware.filter(i=>{let s=[...n[r]||[],r];return i.option?!s.includes(i.option):!0}),e.option=r,this.addMiddleware(e,!0,!0)}getMiddleware(){return this.globalMiddleware}freeze(){this.frozens.push([...this.globalMiddleware])}unfreeze(){let e=this.frozens.pop();e!==void 0&&(this.globalMiddleware=e)}reset(){this.globalMiddleware=this.globalMiddleware.filter(e=>e.global)}};function Pf(t){return t?t.map(e=>(e.applyBeforeValidation=!1,e)):[]}function Mr(t,e,r,n){return r.reduce((i,s)=>{if(s.applyBeforeValidation!==n)return i;if(Ce(i))return i.then(o=>Promise.all([o,s(o,e)])).then(([o,a])=>Object.assign(o,a));{let o=s(i,e);return Ce(o)?o.then(a=>Object.assign(i,a)):Object.assign(i,o)}},t)}function Br(t,e,r=n=>{throw n}){try{let n=Tb(t)?t():t;return Ce(n)?n.then(i=>e(i)):e(n)}catch(n){return r(n)}}function Tb(t){return typeof t=="function"}function Ka(t){if(typeof require=="undefined")return null;for(let e=0,r=Object.keys(require.cache),n;e<r.length;e++)if(n=require.cache[r[e]],n.exports===t)return n;return null}var Ln=/(^\*)|(^\$0)/,Af=class{constructor(e,r,n,i){this.requireCache=new Set,this.handlers={},this.aliasMap={},this.frozens=[],this.shim=i,this.usage=e,this.globalMiddleware=n,this.validation=r}addDirectory(e,r,n,i){i=i||{},typeof i.recurse!="boolean"&&(i.recurse=!1),Array.isArray(i.extensions)||(i.extensions=["js"]);let s=typeof i.visit=="function"?i.visit:o=>o;i.visit=(o,a,c)=>{let u=s(o,a,c);if(u){if(this.requireCache.has(a))return u;this.requireCache.add(a),this.addHandler(u)}return u},this.shim.requireDirectory({require:r,filename:n},e,i)}addHandler(e,r,n,i,s,o){let a=[],c=Pf(s);if(i=i||(()=>{}),Array.isArray(e))if(Nb(e))[e,...a]=e;else for(let u of e)this.addHandler(u);else if(jb(e)){let u=Array.isArray(e.command)||typeof e.command=="string"?e.command:this.moduleName(e);e.aliases&&(u=[].concat(u).concat(e.aliases)),this.addHandler(u,this.extractDesc(e),e.builder,e.handler,e.middlewares,e.deprecated);return}else if(Rf(n)){this.addHandler([e].concat(a),r,n.builder,n.handler,n.middlewares,n.deprecated);return}if(typeof e=="string"){let u=mr(e);a=a.map(h=>mr(h).cmd);let l=!1,f=[u.cmd].concat(a).filter(h=>Ln.test(h)?(l=!0,!1):!0);f.length===0&&l&&f.push("$0"),l&&(u.cmd=f[0],a=f.slice(1),e=e.replace(Ln,u.cmd)),a.forEach(h=>{this.aliasMap[h]=u.cmd}),r!==!1&&this.usage.command(e,r,l,a,o),this.handlers[u.cmd]={original:e,description:r,handler:i,builder:n||{},middlewares:c,deprecated:o,demanded:u.demanded,optional:u.optional},l&&(this.defaultCommand=this.handlers[u.cmd])}}getCommandHandlers(){return this.handlers}getCommands(){return Object.keys(this.handlers).concat(Object.keys(this.aliasMap))}hasDefaultCommand(){return!!this.defaultCommand}runCommand(e,r,n,i,s,o){let a=this.handlers[e]||this.handlers[this.aliasMap[e]]||this.defaultCommand,c=r.getInternalMethods().getContext(),u=c.commands.slice(),l=!e;e&&(c.commands.push(e),c.fullCommands.push(a.original));let f=this.applyBuilderUpdateUsageAndParse(l,a,r,n.aliases,u,i,s,o);return Ce(f)?f.then(h=>this.applyMiddlewareAndGetResult(l,a,h.innerArgv,c,s,h.aliases,r)):this.applyMiddlewareAndGetResult(l,a,f.innerArgv,c,s,f.aliases,r)}applyBuilderUpdateUsageAndParse(e,r,n,i,s,o,a,c){let u=r.builder,l=n;if(Ts(u)){let f=u(n.getInternalMethods().reset(i),c);if(Ce(f))return f.then(h=>(l=_f(h)?h:n,this.parseAndUpdateUsage(e,r,l,s,o,a)))}else $b(u)&&(l=n.getInternalMethods().reset(i),Object.keys(r.builder).forEach(f=>{l.option(f,u[f])}));return this.parseAndUpdateUsage(e,r,l,s,o,a)}parseAndUpdateUsage(e,r,n,i,s,o){e&&n.getInternalMethods().getUsageInstance().unfreeze(),this.shouldUpdateUsage(n)&&n.getInternalMethods().getUsageInstance().usage(this.usageFromParentCommandsCommandHandler(i,r),r.description);let a=n.getInternalMethods().runYargsParserAndExecuteCommands(null,void 0,!0,s,o);return Ce(a)?a.then(c=>({aliases:n.parsed.aliases,innerArgv:c})):{aliases:n.parsed.aliases,innerArgv:a}}shouldUpdateUsage(e){return!e.getInternalMethods().getUsageInstance().getUsageDisabled()&&e.getInternalMethods().getUsageInstance().getUsage().length===0}usageFromParentCommandsCommandHandler(e,r){let n=Ln.test(r.original)?r.original.replace(Ln,"").trim():r.original,i=e.filter(s=>!Ln.test(s));return i.push(n),`$0 ${i.join(" ")}`}applyMiddlewareAndGetResult(e,r,n,i,s,o,a){let c={};if(s)return n;a.getInternalMethods().getHasOutput()||(c=this.populatePositionals(r,n,i,a));let u=this.globalMiddleware.getMiddleware().slice(0).concat(r.middlewares);if(n=Mr(n,a,u,!0),!a.getInternalMethods().getHasOutput()){let l=a.getInternalMethods().runValidation(o,c,a.parsed.error,e);n=Br(n,f=>(l(f),f))}if(r.handler&&!a.getInternalMethods().getHasOutput()){a.getInternalMethods().setHasOutput();let l=!!a.getOptions().configuration["populate--"];a.getInternalMethods().postProcess(n,l,!1,!1),n=Mr(n,a,u,!1),n=Br(n,f=>{let h=r.handler(f);return Ce(h)?h.then(()=>f):f}),e||a.getInternalMethods().getUsageInstance().cacheHelpMessage(),Ce(n)&&!a.getInternalMethods().hasParseCallback()&&n.catch(f=>{try{a.getInternalMethods().getUsageInstance().fail(null,f)}catch{}})}return e||(i.commands.pop(),i.fullCommands.pop()),n}populatePositionals(e,r,n,i){r._=r._.slice(n.commands.length);let s=e.demanded.slice(0),o=e.optional.slice(0),a={};for(this.validation.positionalCount(s.length,r._.length);s.length;){let c=s.shift();this.populatePositional(c,r,a)}for(;o.length;){let c=o.shift();this.populatePositional(c,r,a)}return r._=n.commands.concat(r._.map(c=>""+c)),this.postProcessPositionals(r,a,this.cmdToParseOptions(e.original),i),a}populatePositional(e,r,n){let i=e.cmd[0];e.variadic?n[i]=r._.splice(0).map(String):r._.length&&(n[i]=[String(r._.shift())])}cmdToParseOptions(e){let r={array:[],default:{},alias:{},demand:{}},n=mr(e);return n.demanded.forEach(i=>{let[s,...o]=i.cmd;i.variadic&&(r.array.push(s),r.default[s]=[]),r.alias[s]=o,r.demand[s]=!0}),n.optional.forEach(i=>{let[s,...o]=i.cmd;i.variadic&&(r.array.push(s),r.default[s]=[]),r.alias[s]=o}),r}postProcessPositionals(e,r,n,i){let s=Object.assign({},i.getOptions());s.default=Object.assign(n.default,s.default);for(let u of Object.keys(n.alias))s.alias[u]=(s.alias[u]||[]).concat(n.alias[u]);s.array=s.array.concat(n.array),s.config={};let o=[];if(Object.keys(r).forEach(u=>{r[u].map(l=>{s.configuration["unknown-options-as-args"]&&(s.key[u]=!0),o.push(`--${u}`),o.push(l)})}),!o.length)return;let a=Object.assign({},s.configuration,{"populate--":!1}),c=this.shim.Parser.detailed(o,Object.assign({},s,{configuration:a}));if(c.error)i.getInternalMethods().getUsageInstance().fail(c.error.message,c.error);else{let u=Object.keys(r);Object.keys(r).forEach(l=>{u.push(...c.aliases[l])}),Object.keys(c.argv).forEach(l=>{u.indexOf(l)!==-1&&(r[l]||(r[l]=c.argv[l]),e[l]=c.argv[l])})}}runDefaultBuilderOn(e){if(!this.defaultCommand)return;if(this.shouldUpdateUsage(e)){let n=Ln.test(this.defaultCommand.original)?this.defaultCommand.original:this.defaultCommand.original.replace(/^[^[\]<>]*/,"$0 ");e.getInternalMethods().getUsageInstance().usage(n,this.defaultCommand.description)}let r=this.defaultCommand.builder;if(Ts(r))return r(e,!0);Rf(r)||Object.keys(r).forEach(n=>{e.option(n,r[n])})}moduleName(e){let r=Ka(e);if(!r)throw new Error(`No command name given for module: ${this.shim.inspect(e)}`);return this.commandFromFilename(r.filename)}commandFromFilename(e){return this.shim.path.basename(e,this.shim.path.extname(e))}extractDesc({describe:e,description:r,desc:n}){for(let i of[e,r,n]){if(typeof i=="string"||i===!1)return i;Ze(i,!0,this.shim)}return!1}freeze(){this.frozens.push({handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand})}unfreeze(){let e=this.frozens.pop();Ze(e,void 0,this.shim),{handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand}=e}reset(){return this.handlers={},this.aliasMap={},this.defaultCommand=void 0,this.requireCache=new Set,this}};function Of(t,e,r,n){return new Af(t,e,r,n)}function Rf(t){return typeof t=="object"&&!!t.builder&&typeof t.handler=="function"}function Nb(t){return t.every(e=>typeof e=="string")}function Ts(t){return typeof t=="function"}function $b(t){return typeof t=="object"}function jb(t){return typeof t=="object"&&!Array.isArray(t)}function gr(t={},e=()=>!0){let r={};return Dn(t).forEach(n=>{e(n,t[n])&&(r[n]=t[n])}),r}function vr(t){typeof process!="undefined"&&[process.stdout,process.stderr].forEach(e=>{let r=e;r._handle&&r.isTTY&&typeof r._handle.setBlocking=="function"&&r._handle.setBlocking(t)})}function Ub(t){return typeof t=="boolean"}function If(t,e){let r=e.y18n.__,n={},i=[];n.failFn=function(O){i.push(O)};let s=null,o=!0;n.showHelpOnFail=function(O=!0,$){function z(){return typeof O=="string"?[!0,O]:[O,$]}let[T,W]=z();return s=W,o=T,n};let a=!1;n.fail=function(O,$){let z=t.getInternalMethods().getLoggerInstance();if(i.length)for(let T=i.length-1;T>=0;--T){let W=i[T];if(Ub(W)){if($)throw $;if(O)throw Error(O)}else W(O,$,n)}else{if(t.getExitProcess()&&vr(!0),a||(a=!0,o&&(t.showHelp("error"),z.error()),(O||$)&&z.error(O||$),s&&((O||$)&&z.error(""),z.error(s))),$=$||new ye(O),t.getExitProcess())return t.exit(1);if(t.getInternalMethods().hasParseCallback())return t.exit(1,$);throw $}};let c=[],u=!1;n.usage=(k,O)=>k===null?(u=!0,c=[],n):(u=!1,c.push([k,O||""]),n),n.getUsage=()=>c,n.getUsageDisabled=()=>u,n.getPositionalGroupName=()=>r("Positionals:");let l=[];n.example=(k,O)=>{l.push([k,O||""])};let f=[];n.command=function(O,$,z,T,W=!1){z&&(f=f.map(S=>(S[2]=!1,S))),f.push([O,$||"",z,T,W])},n.getCommands=()=>f;let h={};n.describe=function(O,$){Array.isArray(O)?O.forEach(z=>{n.describe(z,$)}):typeof O=="object"?Object.keys(O).forEach(z=>{n.describe(z,O[z])}):h[O]=$},n.getDescriptions=()=>h;let d=[];n.epilog=k=>{d.push(k)};let m=!1,p;n.wrap=k=>{m=!0,p=k};function v(){return m||(p=I(),m=!0),p}let w="__yargsString__:";n.deferY18nLookup=k=>w+k,n.help=function(){if(A)return A;E();let O=t.customScriptName?t.$0:e.path.basename(t.$0),$=t.getDemandedOptions(),z=t.getDemandedCommands(),T=t.getDeprecatedOptions(),W=t.getGroups(),S=t.getOptions(),x=[];x=x.concat(Object.keys(h)),x=x.concat(Object.keys($)),x=x.concat(Object.keys(z)),x=x.concat(Object.keys(S.default)),x=x.filter(R),x=Object.keys(x.reduce((Z,fe)=>(fe!=="_"&&(Z[fe]=!0),Z),{}));let L=v(),D=e.cliui({width:L,wrap:!!L});if(!u){if(c.length)c.forEach(Z=>{D.div(`${Z[0].replace(/\$0/g,O)}`),Z[1]&&D.div({text:`${Z[1]}`,padding:[1,0,0,0]})}),D.div();else if(f.length){let Z=null;z._?Z=`${O} <${r("command")}>
`:Z=`${O} [${r("command")}]
`,D.div(`${Z}`)}}if(f.length>1||f.length===1&&!f[0][2]){D.div(r("Commands:"));let Z=t.getInternalMethods().getContext(),fe=Z.commands.length?`${Z.commands.join(" ")} `:"";t.getInternalMethods().getParserConfiguration()["sort-commands"]===!0&&(f=f.sort((ue,he)=>ue[0].localeCompare(he[0]))),f.forEach(ue=>{let he=`${O} ${fe}${ue[0].replace(/^\$0 ?/,"")}`;D.span({text:he,padding:[0,2,0,2],width:b(f,L,`${O}${fe}`)+4},{text:ue[1]});let _e=[];ue[2]&&_e.push(`[${r("default")}]`),ue[3]&&ue[3].length&&_e.push(`[${r("aliases:")} ${ue[3].join(", ")}]`),ue[4]&&(typeof ue[4]=="string"?_e.push(`[${r("deprecated: %s",ue[4])}]`):_e.push(`[${r("deprecated")}]`)),_e.length?D.div({text:_e.join(" "),padding:[0,0,0,2],align:"right"}):D.div()}),D.div()}let te=(Object.keys(S.alias)||[]).concat(Object.keys(t.parsed.newAliases)||[]);x=x.filter(Z=>!t.parsed.newAliases[Z]&&te.every(fe=>(S.alias[fe]||[]).indexOf(Z)===-1));let se=r("Options:");W[se]||(W[se]=[]),M(x,S.alias,W,se);let B=Z=>/^--/.test(Ns(Z)),De=Object.keys(W).filter(Z=>W[Z].length>0).map(Z=>{let fe=W[Z].filter(R).map(ue=>{if(~te.indexOf(ue))return ue;for(let he=0,_e;(_e=te[he])!==void 0;he++)if(~(S.alias[_e]||[]).indexOf(ue))return _e;return ue});return{groupName:Z,normalizedKeys:fe}}).filter(({normalizedKeys:Z})=>Z.length>0).map(({groupName:Z,normalizedKeys:fe})=>{let ue=fe.reduce((he,_e)=>(he[_e]=[_e].concat(S.alias[_e]||[]).map(tt=>Z===n.getPositionalGroupName()?tt:(/^[0-9]$/.test(tt)?~S.boolean.indexOf(_e)?"-":"--":tt.length>1?"--":"-")+tt).sort((tt,Le)=>B(tt)===B(Le)?0:B(tt)?1:-1).join(", "),he),{});return{groupName:Z,normalizedKeys:fe,switches:ue}});if(De.filter(({groupName:Z})=>Z!==n.getPositionalGroupName()).some(({normalizedKeys:Z,switches:fe})=>!Z.every(ue=>B(fe[ue])))&&De.filter(({groupName:Z})=>Z!==n.getPositionalGroupName()).forEach(({normalizedKeys:Z,switches:fe})=>{Z.forEach(ue=>{B(fe[ue])&&(fe[ue]=Mb(fe[ue],"-x, ".length))})}),De.forEach(({groupName:Z,normalizedKeys:fe,switches:ue})=>{D.div(Z),fe.forEach(he=>{let _e=ue[he],tt=h[he]||"",Le=null;~tt.lastIndexOf(w)&&(tt=r(tt.substring(w.length))),~S.boolean.indexOf(he)&&(Le=`[${r("boolean")}]`),~S.count.indexOf(he)&&(Le=`[${r("count")}]`),~S.string.indexOf(he)&&(Le=`[${r("string")}]`),~S.normalize.indexOf(he)&&(Le=`[${r("string")}]`),~S.array.indexOf(he)&&(Le=`[${r("array")}]`),~S.number.indexOf(he)&&(Le=`[${r("number")}]`);let Ba=C=>typeof C=="string"?`[${r("deprecated: %s",C)}]`:`[${r("deprecated")}]`,y=[he in T?Ba(T[he]):null,Le,he in $?`[${r("required")}]`:null,S.choices&&S.choices[he]?`[${r("choices:")} ${n.stringifiedValues(S.choices[he])}]`:null,N(S.default[he],S.defaultDescription[he])].filter(Boolean).join(" ");D.span({text:Ns(_e),padding:[0,2,0,2+Df(_e)],width:b(ue,L)+4},tt),y?D.div({text:y,padding:[0,0,0,2],align:"right"}):D.div()}),D.div()}),l.length&&(D.div(r("Examples:")),l.forEach(Z=>{Z[0]=Z[0].replace(/\$0/g,O)}),l.forEach(Z=>{Z[1]===""?D.div({text:Z[0],padding:[0,2,0,2]}):D.div({text:Z[0],padding:[0,2,0,2],width:b(l,L)+4},{text:Z[1]})}),D.div()),d.length>0){let Z=d.map(fe=>fe.replace(/\$0/g,O)).join(`
`);D.div(`${Z}
`)}return D.toString().replace(/\s*$/,"")};function b(k,O,$){let z=0;return Array.isArray(k)||(k=Object.values(k).map(T=>[T])),k.forEach(T=>{z=Math.max(e.stringWidth($?`${$} ${Ns(T[0])}`:Ns(T[0]))+Df(T[0]),z)}),O&&(z=Math.min(z,parseInt((O*.5).toString(),10))),z}function E(){let k=t.getDemandedOptions(),O=t.getOptions();(Object.keys(O.alias)||[]).forEach($=>{O.alias[$].forEach(z=>{h[z]&&n.describe($,h[z]),z in k&&t.demandOption($,k[z]),~O.boolean.indexOf(z)&&t.boolean($),~O.count.indexOf(z)&&t.count($),~O.string.indexOf(z)&&t.string($),~O.normalize.indexOf(z)&&t.normalize($),~O.array.indexOf(z)&&t.array($),~O.number.indexOf(z)&&t.number($)})})}let A;n.cacheHelpMessage=function(){A=this.help()},n.clearCachedHelpMessage=function(){A=void 0},n.hasCachedHelpMessage=function(){return!!A};function M(k,O,$,z){let T=[],W=null;return Object.keys($).forEach(S=>{T=T.concat($[S])}),k.forEach(S=>{W=[S].concat(O[S]),W.some(x=>T.indexOf(x)!==-1)||$[z].push(S)}),T}function R(k){return t.getOptions().hiddenOptions.indexOf(k)<0||t.parsed.argv[t.getOptions().showHiddenOpt]}n.showHelp=k=>{let O=t.getInternalMethods().getLoggerInstance();k||(k="error"),(typeof k=="function"?k:O[k])(n.help())},n.functionDescription=k=>{let O=k.name?e.Parser.decamelize(k.name,"-"):r("generated-value");return["(",O,")"].join("")},n.stringifiedValues=function(O,$){let z="",T=$||", ",W=[].concat(O);return!O||!W.length||W.forEach(S=>{z.length&&(z+=T),z+=JSON.stringify(S)}),z};function N(k,O){let $=`[${r("default:")} `;if(k===void 0&&!O)return null;if(O)$+=O;else switch(typeof k){case"string":$+=`"${k}"`;break;case"object":$+=JSON.stringify(k);break;default:$+=k}return`${$}]`}function I(){let k=80;return e.process.stdColumns?Math.min(k,e.process.stdColumns):k}let F=null;n.version=k=>{F=k},n.showVersion=k=>{let O=t.getInternalMethods().getLoggerInstance();k||(k="error"),(typeof k=="function"?k:O[k])(F)},n.reset=function(O){return s=null,a=!1,c=[],u=!1,d=[],l=[],f=[],h=gr(h,$=>!O[$]),n};let V=[];return n.freeze=function(){V.push({failMessage:s,failureOutput:a,usages:c,usageDisabled:u,epilogs:d,examples:l,commands:f,descriptions:h})},n.unfreeze=function(){let O=V.pop();!O||({failMessage:s,failureOutput:a,usages:c,usageDisabled:u,epilogs:d,examples:l,commands:f,descriptions:h}=O)},n}function Ja(t){return typeof t=="object"}function Mb(t,e){return Ja(t)?{text:t.text,indentation:t.indentation+e}:{text:t,indentation:e}}function Df(t){return Ja(t)?t.indentation:0}function Ns(t){return Ja(t)?t.text:t}var Lf=`###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.bashrc
#    or {{app_path}} {{completion_command}} >> ~/.bash_profile on OSX.
#
_{{app_name}}_yargs_completions()
{
    local cur_word args type_list

    cur_word="\${COMP_WORDS[COMP_CWORD]}"
    args=("\${COMP_WORDS[@]}")

    # ask yargs to generate completions.
    type_list=$({{app_path}} --get-yargs-completions "\${args[@]}")

    COMPREPLY=( $(compgen -W "\${type_list}" -- \${cur_word}) )

    # if no match was found, fall back to filename completion
    if [ \${#COMPREPLY[@]} -eq 0 ]; then
      COMPREPLY=()
    fi

    return 0
}
complete -o default -F _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`,kf=`#compdef {{app_name}}
###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.zshrc
#    or {{app_path}} {{completion_command}} >> ~/.zsh_profile on OSX.
#
_{{app_name}}_yargs_completions()
{
  local reply
  local si=$IFS
  IFS=$'
' reply=($(COMP_CWORD="$((CURRENT-1))" COMP_LINE="$BUFFER" COMP_POINT="$CURSOR" {{app_path}} --get-yargs-completions "\${words[@]}"))
  IFS=$si
  _describe 'values' reply
}
compdef _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`;var Ff=class{constructor(e,r,n,i){var s,o,a;this.yargs=e,this.usage=r,this.command=n,this.shim=i,this.completionKey="get-yargs-completions",this.aliases=null,this.customCompletionFunction=null,this.zshShell=(a=((s=this.shim.getEnv("SHELL"))===null||s===void 0?void 0:s.includes("zsh"))||((o=this.shim.getEnv("ZSH_NAME"))===null||o===void 0?void 0:o.includes("zsh")))!==null&&a!==void 0?a:!1}defaultCompletion(e,r,n,i){let s=this.command.getCommandHandlers();for(let a=0,c=e.length;a<c;++a)if(s[e[a]]&&s[e[a]].builder){let u=s[e[a]].builder;if(Ts(u)){let l=this.yargs.getInternalMethods().reset();return u(l,!0),l.argv}}let o=[];this.commandCompletions(o,e,n),this.optionCompletions(o,e,r,n),i(null,o)}commandCompletions(e,r,n){let i=this.yargs.getInternalMethods().getContext().commands;!n.match(/^-/)&&i[i.length-1]!==n&&this.usage.getCommands().forEach(s=>{let o=mr(s[0]).cmd;if(r.indexOf(o)===-1)if(!this.zshShell)e.push(o);else{let a=s[1]||"";e.push(o.replace(/:/g,"\\:")+":"+a)}})}optionCompletions(e,r,n,i){if(i.match(/^-/)||i===""&&e.length===0){let s=this.yargs.getOptions(),o=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[];Object.keys(s.key).forEach(a=>{let c=!!s.configuration["boolean-negation"]&&s.boolean.includes(a);!o.includes(a)&&!this.argsContainKey(r,n,a,c)&&(this.completeOptionKey(a,e,i),c&&!!s.default[a]&&this.completeOptionKey(`no-${a}`,e,i))})}}argsContainKey(e,r,n,i){if(e.indexOf(`--${n}`)!==-1||i&&e.indexOf(`--no-${n}`)!==-1)return!0;if(this.aliases){for(let s of this.aliases[n])if(r[s]!==void 0)return!0}return!1}completeOptionKey(e,r,n){let i=this.usage.getDescriptions(),s=c=>/^--/.test(c),o=c=>/^[^0-9]$/.test(c),a=!s(n)&&o(e)?"-":"--";if(!this.zshShell)r.push(a+e);else{let c=i[e]||"";r.push(a+`${e.replace(/:/g,"\\:")}:${c.replace("__yargsString__:","")}`)}}customCompletion(e,r,n,i){if(Ze(this.customCompletionFunction,null,this.shim),Bb(this.customCompletionFunction)){let s=this.customCompletionFunction(n,r);return Ce(s)?s.then(o=>{this.shim.process.nextTick(()=>{i(null,o)})}).catch(o=>{this.shim.process.nextTick(()=>{i(o,void 0)})}):i(null,s)}else return qb(this.customCompletionFunction)?this.customCompletionFunction(n,r,(s=i)=>this.defaultCompletion(e,r,n,s),s=>{i(null,s)}):this.customCompletionFunction(n,r,s=>{i(null,s)})}getCompletion(e,r){let n=e.length?e[e.length-1]:"",i=this.yargs.parse(e,!0),s=this.customCompletionFunction?o=>this.customCompletion(e,o,n,r):o=>this.defaultCompletion(e,o,n,r);return Ce(i)?i.then(s):s(i)}generateCompletionScript(e,r){let n=this.zshShell?kf:Lf,i=this.shim.path.basename(e);return e.match(/\.js$/)&&(e=`./${e}`),n=n.replace(/{{app_name}}/g,i),n=n.replace(/{{completion_command}}/g,r),n.replace(/{{app_path}}/g,e)}registerFunction(e){this.customCompletionFunction=e}setParsed(e){this.aliases=e.aliases}};function Tf(t,e,r,n){return new Ff(t,e,r,n)}function Bb(t){return t.length<3}function qb(t){return t.length>3}function Nf(t,e){if(t.length===0)return e.length;if(e.length===0)return t.length;let r=[],n;for(n=0;n<=e.length;n++)r[n]=[n];let i;for(i=0;i<=t.length;i++)r[0][i]=i;for(n=1;n<=e.length;n++)for(i=1;i<=t.length;i++)e.charAt(n-1)===t.charAt(i-1)?r[n][i]=r[n-1][i-1]:r[n][i]=Math.min(r[n-1][i-1]+1,Math.min(r[n][i-1]+1,r[n-1][i]+1));return r[e.length][t.length]}var $f=["$0","--","_"];function jf(t,e,r){let n=r.y18n.__,i=r.y18n.__n,s={};s.nonOptionCount=function(f){let h=t.getDemandedCommands(),m=f._.length+(f["--"]?f["--"].length:0)-t.getInternalMethods().getContext().commands.length;h._&&(m<h._.min||m>h._.max)&&(m<h._.min?h._.minMsg!==void 0?e.fail(h._.minMsg?h._.minMsg.replace(/\$0/g,m.toString()).replace(/\$1/,h._.min.toString()):null):e.fail(i("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",m,m.toString(),h._.min.toString())):m>h._.max&&(h._.maxMsg!==void 0?e.fail(h._.maxMsg?h._.maxMsg.replace(/\$0/g,m.toString()).replace(/\$1/,h._.max.toString()):null):e.fail(i("Too many non-option arguments: got %s, maximum of %s","Too many non-option arguments: got %s, maximum of %s",m,m.toString(),h._.max.toString()))))},s.positionalCount=function(f,h){h<f&&e.fail(i("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",h,h+"",f+""))},s.requiredArguments=function(f,h){let d=null;for(let m of Object.keys(h))(!Object.prototype.hasOwnProperty.call(f,m)||typeof f[m]=="undefined")&&(d=d||{},d[m]=h[m]);if(d){let m=[];for(let v of Object.keys(d)){let w=d[v];w&&m.indexOf(w)<0&&m.push(w)}let p=m.length?`
${m.join(`
`)}`:"";e.fail(i("Missing required argument: %s","Missing required arguments: %s",Object.keys(d).length,Object.keys(d).join(", ")+p))}},s.unknownArguments=function(f,h,d,m,p=!0){let v=t.getInternalMethods().getCommandInstance().getCommands(),w=[],b=t.getInternalMethods().getContext();Object.keys(f).forEach(E=>{$f.indexOf(E)===-1&&!Object.prototype.hasOwnProperty.call(d,E)&&!Object.prototype.hasOwnProperty.call(t.getInternalMethods().getParseContext(),E)&&!s.isValidAndSomeAliasIsNotNew(E,h)&&w.push(E)}),p&&(b.commands.length>0||v.length>0||m)&&f._.slice(b.commands.length).forEach(E=>{v.indexOf(""+E)===-1&&w.push(""+E)}),w.length>0&&e.fail(i("Unknown argument: %s","Unknown arguments: %s",w.length,w.join(", ")))},s.unknownCommands=function(f){let h=t.getInternalMethods().getCommandInstance().getCommands(),d=[],m=t.getInternalMethods().getContext();return(m.commands.length>0||h.length>0)&&f._.slice(m.commands.length).forEach(p=>{h.indexOf(""+p)===-1&&d.push(""+p)}),d.length>0?(e.fail(i("Unknown command: %s","Unknown commands: %s",d.length,d.join(", "))),!0):!1},s.isValidAndSomeAliasIsNotNew=function(f,h){if(!Object.prototype.hasOwnProperty.call(h,f))return!1;let d=t.parsed.newAliases;return[f,...h[f]].some(m=>!Object.prototype.hasOwnProperty.call(d,m)||!d[f])},s.limitedChoices=function(f){let h=t.getOptions(),d={};if(!Object.keys(h.choices).length)return;Object.keys(f).forEach(v=>{$f.indexOf(v)===-1&&Object.prototype.hasOwnProperty.call(h.choices,v)&&[].concat(f[v]).forEach(w=>{h.choices[v].indexOf(w)===-1&&w!==void 0&&(d[v]=(d[v]||[]).concat(w))})});let m=Object.keys(d);if(!m.length)return;let p=n("Invalid values:");m.forEach(v=>{p+=`
  ${n("Argument: %s, Given: %s, Choices: %s",v,e.stringifiedValues(d[v]),e.stringifiedValues(h.choices[v]))}`}),e.fail(p)};let o={};s.implies=function(f,h){Y("<string|object> [array|number|string]",[f,h],arguments.length),typeof f=="object"?Object.keys(f).forEach(d=>{s.implies(d,f[d])}):(t.global(f),o[f]||(o[f]=[]),Array.isArray(h)?h.forEach(d=>s.implies(f,d)):(Ze(h,void 0,r),o[f].push(h)))},s.getImplied=function(){return o};function a(l,f){let h=Number(f);return f=isNaN(h)?f:h,typeof f=="number"?f=l._.length>=f:f.match(/^--no-.+/)?(f=f.match(/^--no-(.+)/)[1],f=!l[f]):f=l[f],f}s.implications=function(f){let h=[];if(Object.keys(o).forEach(d=>{let m=d;(o[d]||[]).forEach(p=>{let v=m,w=p;v=a(f,v),p=a(f,p),v&&!p&&h.push(` ${m} -> ${w}`)})}),h.length){let d=`${n("Implications failed:")}
`;h.forEach(m=>{d+=m}),e.fail(d)}};let c={};s.conflicts=function(f,h){Y("<string|object> [array|string]",[f,h],arguments.length),typeof f=="object"?Object.keys(f).forEach(d=>{s.conflicts(d,f[d])}):(t.global(f),c[f]||(c[f]=[]),Array.isArray(h)?h.forEach(d=>s.conflicts(f,d)):c[f].push(h))},s.getConflicting=()=>c,s.conflicting=function(f){Object.keys(f).forEach(h=>{c[h]&&c[h].forEach(d=>{d&&f[h]!==void 0&&f[d]!==void 0&&e.fail(n("Arguments %s and %s are mutually exclusive",h,d))})})},s.recommendCommands=function(f,h){let d=3;h=h.sort((v,w)=>w.length-v.length);let m=null,p=1/0;for(let v=0,w;(w=h[v])!==void 0;v++){let b=Nf(f,w);b<=d&&b<p&&(p=b,m=w)}m&&e.fail(n("Did you mean %s?",m))},s.reset=function(f){return o=gr(o,h=>!f[h]),c=gr(c,h=>!f[h]),s};let u=[];return s.freeze=function(){u.push({implied:o,conflicting:c})},s.unfreeze=function(){let f=u.pop();Ze(f,void 0,r),{implied:o,conflicting:c}=f},s}var Xa=[],xi;function $s(t,e,r,n){xi=n;let i={};if(Object.prototype.hasOwnProperty.call(t,"extends")){if(typeof t.extends!="string")return i;let s=/\.json|\..*rc$/.test(t.extends),o=null;if(s)o=Wb(e,t.extends);else try{o=require.resolve(t.extends)}catch{return t}Hb(o),Xa.push(o),i=s?JSON.parse(xi.readFileSync(o,"utf8")):require(t.extends),delete t.extends,i=$s(i,xi.path.dirname(o),r,xi)}return Xa=[],r?Uf(i,t):Object.assign({},i,t)}function Hb(t){if(Xa.indexOf(t)>-1)throw new ye(`Circular extended configurations: '${t}'.`)}function Wb(t,e){return xi.path.resolve(t,e)}function Uf(t,e){let r={};function n(i){return i&&typeof i=="object"&&!Array.isArray(i)}Object.assign(r,t);for(let i of Object.keys(e))n(e[i])&&n(r[i])?r[i]=Uf(t[i],e[i]):r[i]=e[i];return r}var X=function(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r},g=function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)},Ae,qr,Si,Et,ut,js,wr,Hr,Ct,Us,xt,Ht,ft,St,kn,Te,ee,Ms,Bs,ht,Wr,Fn,zr,yr,qs,oe,Gr,Vr,Yr,ce,er,Se;function Mf(t){return(e=[],r=t.process.cwd(),n)=>{let i=new nh(e,r,n,t);return Object.defineProperty(i,"argv",{get:()=>i.parse(),enumerable:!0}),i.help(),i.version(),i}}var Bf=Symbol("copyDoubleDash"),qf=Symbol("copyDoubleDash"),Za=Symbol("deleteFromParserHintObject"),Hf=Symbol("freeze"),Wf=Symbol("getDollarZero"),Kr=Symbol("getParserConfiguration"),Qa=Symbol("guessLocale"),zf=Symbol("guessVersion"),Gf=Symbol("parsePositionalNumbers"),ec=Symbol("pkgUp"),br=Symbol("populateParserHintArray"),Tn=Symbol("populateParserHintSingleValueDictionary"),tc=Symbol("populateParserHintArrayDictionary"),rc=Symbol("populateParserHintDictionary"),nc=Symbol("sanitizeKey"),ic=Symbol("setKey"),sc=Symbol("unfreeze"),Vf=Symbol("validateAsync"),Yf=Symbol("getCommandInstance"),Kf=Symbol("getContext"),Jf=Symbol("getHasOutput"),Xf=Symbol("getLoggerInstance"),Zf=Symbol("getParseContext"),Qf=Symbol("getUsageInstance"),eh=Symbol("getValidationInstance"),Hs=Symbol("hasParseCallback"),Jr=Symbol("postProcess"),th=Symbol("rebase"),oc=Symbol("reset"),Pi=Symbol("runYargsParserAndExecuteCommands"),ac=Symbol("runValidation"),rh=Symbol("setHasOutput"),nh=class{constructor(e=[],r,n,i){this.customScriptName=!1,this.parsed=!1,Ae.set(this,void 0),qr.set(this,void 0),Si.set(this,{commands:[],fullCommands:[]}),Et.set(this,null),ut.set(this,null),js.set(this,"show-hidden"),wr.set(this,null),Hr.set(this,!0),Ct.set(this,!0),Us.set(this,[]),xt.set(this,void 0),Ht.set(this,{}),ft.set(this,!1),St.set(this,null),kn.set(this,void 0),Te.set(this,""),ee.set(this,void 0),Ms.set(this,void 0),Bs.set(this,{}),ht.set(this,null),Wr.set(this,null),Fn.set(this,{}),zr.set(this,{}),yr.set(this,void 0),qs.set(this,!1),oe.set(this,void 0),Gr.set(this,!1),Vr.set(this,!1),Yr.set(this,!1),ce.set(this,void 0),er.set(this,null),Se.set(this,void 0),X(this,oe,i),X(this,yr,e),X(this,qr,r),X(this,Ms,n),X(this,xt,new Ya(this)),this.$0=this[Wf](),this[oc](),X(this,Ae,g(this,Ae)),X(this,ce,g(this,ce)),X(this,Se,g(this,Se)),X(this,ee,g(this,ee)),g(this,ee).showHiddenOpt=g(this,js),X(this,kn,this[qf]())}addHelpOpt(e,r){let n="help";return Y("[string|boolean] [string]",[e,r],arguments.length),g(this,St)&&(this[Za](g(this,St)),X(this,St,null)),e===!1&&r===void 0?this:(X(this,St,typeof e=="string"?e:n),this.boolean(g(this,St)),this.describe(g(this,St),r||g(this,ce).deferY18nLookup("Show help")),this)}help(e,r){return this.addHelpOpt(e,r)}addShowHiddenOpt(e,r){if(Y("[string|boolean] [string]",[e,r],arguments.length),e===!1&&r===void 0)return this;let n=typeof e=="string"?e:g(this,js);return this.boolean(n),this.describe(n,r||g(this,ce).deferY18nLookup("Show hidden options")),g(this,ee).showHiddenOpt=n,this}showHidden(e,r){return this.addShowHiddenOpt(e,r)}alias(e,r){return Y("<object|string|array> [string|array]",[e,r],arguments.length),this[tc](this.alias.bind(this),"alias",e,r),this}array(e){return Y("<array|string>",[e],arguments.length),this[br]("array",e),this}boolean(e){return Y("<array|string>",[e],arguments.length),this[br]("boolean",e),this}check(e,r){return Y("<function> [boolean]",[e,r],arguments.length),this.middleware((n,i)=>Br(()=>e(n),s=>(s?(typeof s=="string"||s instanceof Error)&&g(this,ce).fail(s.toString(),s):g(this,ce).fail(g(this,oe).y18n.__("Argument check failed: %s",e.toString())),n),s=>(g(this,ce).fail(s.message?s.message:s.toString(),s),n)),!1,r),this}choices(e,r){return Y("<object|string|array> [string|array]",[e,r],arguments.length),this[tc](this.choices.bind(this),"choices",e,r),this}coerce(e,r){if(Y("<object|string|array> [function]",[e,r],arguments.length),Array.isArray(e)){if(!r)throw new ye("coerce callback must be provided");for(let n of e)this.coerce(n,r);return this}else if(typeof e=="object"){for(let n of Object.keys(e))this.coerce(n,e[n]);return this}if(!r)throw new ye("coerce callback must be provided");return g(this,ee).key[e]=!0,g(this,xt).addCoerceMiddleware((n,i)=>{let s;return Br(()=>(s=i.getAliases(),r(n[e])),o=>{if(n[e]=o,s[e])for(let a of s[e])n[a]=o;return n},o=>{throw new ye(o.message)})},e),this}conflicts(e,r){return Y("<string|object> [string|array]",[e,r],arguments.length),g(this,Se).conflicts(e,r),this}config(e="config",r,n){return Y("[object|string] [string|function] [function]",[e,r,n],arguments.length),typeof e=="object"&&!Array.isArray(e)?(e=$s(e,g(this,qr),this[Kr]()["deep-merge-config"]||!1,g(this,oe)),g(this,ee).configObjects=(g(this,ee).configObjects||[]).concat(e),this):(typeof r=="function"&&(n=r,r=void 0),this.describe(e,r||g(this,ce).deferY18nLookup("Path to JSON config file")),(Array.isArray(e)?e:[e]).forEach(i=>{g(this,ee).config[i]=n||!0}),this)}completion(e,r,n){return Y("[string] [string|boolean|function] [function]",[e,r,n],arguments.length),typeof r=="function"&&(n=r,r=void 0),X(this,ut,e||g(this,ut)||"completion"),!r&&r!==!1&&(r="generate completion script"),this.command(g(this,ut),r),n&&g(this,Et).registerFunction(n),this}command(e,r,n,i,s,o){return Y("<string|array|object> [string|boolean] [function|object] [function] [array] [boolean|string]",[e,r,n,i,s,o],arguments.length),g(this,Ae).addHandler(e,r,n,i,s,o),this}commands(e,r,n,i,s,o){return this.command(e,r,n,i,s,o)}commandDir(e,r){Y("<string> [object]",[e,r],arguments.length);let n=g(this,Ms)||g(this,oe).require;return g(this,Ae).addDirectory(e,n,g(this,oe).getCallerFile(),r),this}count(e){return Y("<array|string>",[e],arguments.length),this[br]("count",e),this}default(e,r,n){return Y("<object|string|array> [*] [string]",[e,r,n],arguments.length),n&&(Va(e,g(this,oe)),g(this,ee).defaultDescription[e]=n),typeof r=="function"&&(Va(e,g(this,oe)),g(this,ee).defaultDescription[e]||(g(this,ee).defaultDescription[e]=g(this,ce).functionDescription(r)),r=r.call()),this[Tn](this.default.bind(this),"default",e,r),this}defaults(e,r,n){return this.default(e,r,n)}demandCommand(e=1,r,n,i){return Y("[number] [number|string] [string|null|undefined] [string|null|undefined]",[e,r,n,i],arguments.length),typeof r!="number"&&(n=r,r=1/0),this.global("_",!1),g(this,ee).demandedCommands._={min:e,max:r,minMsg:n,maxMsg:i},this}demand(e,r,n){return Array.isArray(r)?(r.forEach(i=>{Ze(n,!0,g(this,oe)),this.demandOption(i,n)}),r=1/0):typeof r!="number"&&(n=r,r=1/0),typeof e=="number"?(Ze(n,!0,g(this,oe)),this.demandCommand(e,r,n,n)):Array.isArray(e)?e.forEach(i=>{Ze(n,!0,g(this,oe)),this.demandOption(i,n)}):typeof n=="string"?this.demandOption(e,n):(n===!0||typeof n=="undefined")&&this.demandOption(e),this}demandOption(e,r){return Y("<object|string|array> [string]",[e,r],arguments.length),this[Tn](this.demandOption.bind(this),"demandedOptions",e,r),this}deprecateOption(e,r){return Y("<string> [string|boolean]",[e,r],arguments.length),g(this,ee).deprecatedOptions[e]=r,this}describe(e,r){return Y("<object|string|array> [string]",[e,r],arguments.length),this[ic](e,!0),g(this,ce).describe(e,r),this}detectLocale(e){return Y("<boolean>",[e],arguments.length),X(this,Hr,e),this}env(e){return Y("[string|boolean]",[e],arguments.length),e===!1?delete g(this,ee).envPrefix:g(this,ee).envPrefix=e||"",this}epilogue(e){return Y("<string>",[e],arguments.length),g(this,ce).epilog(e),this}epilog(e){return this.epilogue(e)}example(e,r){return Y("<string|array> [string]",[e,r],arguments.length),Array.isArray(e)?e.forEach(n=>this.example(...n)):g(this,ce).example(e,r),this}exit(e,r){X(this,ft,!0),X(this,wr,r),g(this,Ct)&&g(this,oe).process.exit(e)}exitProcess(e=!0){return Y("[boolean]",[e],arguments.length),X(this,Ct,e),this}fail(e){if(Y("<function|boolean>",[e],arguments.length),typeof e=="boolean"&&e!==!1)throw new ye("Invalid first argument. Expected function or boolean 'false'");return g(this,ce).failFn(e),this}getAliases(){return this.parsed?this.parsed.aliases:{}}async getCompletion(e,r){return Y("<array> [function]",[e,r],arguments.length),r?g(this,Et).getCompletion(e,r):new Promise((n,i)=>{g(this,Et).getCompletion(e,(s,o)=>{s?i(s):n(o)})})}getDemandedOptions(){return Y([],0),g(this,ee).demandedOptions}getDemandedCommands(){return Y([],0),g(this,ee).demandedCommands}getDeprecatedOptions(){return Y([],0),g(this,ee).deprecatedOptions}getDetectLocale(){return g(this,Hr)}getExitProcess(){return g(this,Ct)}getGroups(){return Object.assign({},g(this,Ht),g(this,zr))}getHelp(){if(X(this,ft,!0),!g(this,ce).hasCachedHelpMessage()){if(!this.parsed){let r=this[Pi](g(this,yr),void 0,void 0,0,!0);if(Ce(r))return r.then(()=>g(this,ce).help())}let e=g(this,Ae).runDefaultBuilderOn(this);if(Ce(e))return e.then(()=>g(this,ce).help())}return Promise.resolve(g(this,ce).help())}getOptions(){return g(this,ee)}getStrict(){return g(this,Gr)}getStrictCommands(){return g(this,Vr)}getStrictOptions(){return g(this,Yr)}global(e,r){return Y("<string|array> [boolean]",[e,r],arguments.length),e=[].concat(e),r!==!1?g(this,ee).local=g(this,ee).local.filter(n=>e.indexOf(n)===-1):e.forEach(n=>{g(this,ee).local.indexOf(n)===-1&&g(this,ee).local.push(n)}),this}group(e,r){Y("<string|array> <string>",[e,r],arguments.length);let n=g(this,zr)[r]||g(this,Ht)[r];g(this,zr)[r]&&delete g(this,zr)[r];let i={};return g(this,Ht)[r]=(n||[]).concat(e).filter(s=>i[s]?!1:i[s]=!0),this}hide(e){return Y("<string>",[e],arguments.length),g(this,ee).hiddenOptions.push(e),this}implies(e,r){return Y("<string|object> [number|string|array]",[e,r],arguments.length),g(this,Se).implies(e,r),this}locale(e){return Y("[string]",[e],arguments.length),e?(X(this,Hr,!1),g(this,oe).y18n.setLocale(e),this):(this[Qa](),g(this,oe).y18n.getLocale())}middleware(e,r,n){return g(this,xt).addMiddleware(e,!!r,n)}nargs(e,r){return Y("<string|object|array> [number]",[e,r],arguments.length),this[Tn](this.nargs.bind(this),"narg",e,r),this}normalize(e){return Y("<array|string>",[e],arguments.length),this[br]("normalize",e),this}number(e){return Y("<array|string>",[e],arguments.length),this[br]("number",e),this}option(e,r){if(Y("<string|object> [object]",[e,r],arguments.length),typeof e=="object")Object.keys(e).forEach(n=>{this.options(n,e[n])});else{typeof r!="object"&&(r={}),g(this,ee).key[e]=!0,r.alias&&this.alias(e,r.alias);let n=r.deprecate||r.deprecated;n&&this.deprecateOption(e,n);let i=r.demand||r.required||r.require;i&&this.demand(e,i),r.demandOption&&this.demandOption(e,typeof r.demandOption=="string"?r.demandOption:void 0),r.conflicts&&this.conflicts(e,r.conflicts),"default"in r&&this.default(e,r.default),r.implies!==void 0&&this.implies(e,r.implies),r.nargs!==void 0&&this.nargs(e,r.nargs),r.config&&this.config(e,r.configParser),r.normalize&&this.normalize(e),r.choices&&this.choices(e,r.choices),r.coerce&&this.coerce(e,r.coerce),r.group&&this.group(e,r.group),(r.boolean||r.type==="boolean")&&(this.boolean(e),r.alias&&this.boolean(r.alias)),(r.array||r.type==="array")&&(this.array(e),r.alias&&this.array(r.alias)),(r.number||r.type==="number")&&(this.number(e),r.alias&&this.number(r.alias)),(r.string||r.type==="string")&&(this.string(e),r.alias&&this.string(r.alias)),(r.count||r.type==="count")&&this.count(e),typeof r.global=="boolean"&&this.global(e,r.global),r.defaultDescription&&(g(this,ee).defaultDescription[e]=r.defaultDescription),r.skipValidation&&this.skipValidation(e);let s=r.describe||r.description||r.desc;this.describe(e,s),r.hidden&&this.hide(e),r.requiresArg&&this.requiresArg(e)}return this}options(e,r){return this.option(e,r)}parse(e,r,n){Y("[string|array] [function|boolean|object] [function]",[e,r,n],arguments.length),this[Hf](),typeof e=="undefined"&&(e=g(this,yr)),typeof r=="object"&&(X(this,Wr,r),r=n),typeof r=="function"&&(X(this,ht,r),r=!1),r||X(this,yr,e),g(this,ht)&&X(this,Ct,!1);let i=this[Pi](e,!!r),s=this.parsed;return g(this,Et).setParsed(this.parsed),Ce(i)?i.then(o=>(g(this,ht)&&g(this,ht).call(this,g(this,wr),o,g(this,Te)),o)).catch(o=>{throw g(this,ht)&&g(this,ht)(o,this.parsed.argv,g(this,Te)),o}).finally(()=>{this[sc](),this.parsed=s}):(g(this,ht)&&g(this,ht).call(this,g(this,wr),i,g(this,Te)),this[sc](),this.parsed=s,i)}parseAsync(e,r,n){let i=this.parse(e,r,n);return Ce(i)?i:Promise.resolve(i)}parseSync(e,r,n){let i=this.parse(e,r,n);if(Ce(i))throw new ye(".parseSync() must not be used with asynchronous builders, handlers, or middleware");return i}parserConfiguration(e){return Y("<object>",[e],arguments.length),X(this,Bs,e),this}pkgConf(e,r){Y("<string> [string]",[e,r],arguments.length);let n=null,i=this[ec](r||g(this,qr));return i[e]&&typeof i[e]=="object"&&(n=$s(i[e],r||g(this,qr),this[Kr]()["deep-merge-config"]||!1,g(this,oe)),g(this,ee).configObjects=(g(this,ee).configObjects||[]).concat(n)),this}positional(e,r){Y("<string> <object>",[e,r],arguments.length);let n=["default","defaultDescription","implies","normalize","choices","conflicts","coerce","type","describe","desc","description","alias"];r=gr(r,(o,a)=>{let c=n.indexOf(o)!==-1;return o==="type"&&["string","number","boolean"].indexOf(a)===-1&&(c=!1),c});let i=g(this,Si).fullCommands[g(this,Si).fullCommands.length-1],s=i?g(this,Ae).cmdToParseOptions(i):{array:[],alias:{},default:{},demand:{}};return Dn(s).forEach(o=>{let a=s[o];Array.isArray(a)?a.indexOf(e)!==-1&&(r[o]=!0):a[e]&&!(o in r)&&(r[o]=a[e])}),this.group(e,g(this,ce).getPositionalGroupName()),this.option(e,r)}recommendCommands(e=!0){return Y("[boolean]",[e],arguments.length),X(this,qs,e),this}required(e,r,n){return this.demand(e,r,n)}require(e,r,n){return this.demand(e,r,n)}requiresArg(e){return Y("<array|string|object> [number]",[e],arguments.length),typeof e=="string"&&g(this,ee).narg[e]?this:(this[Tn](this.requiresArg.bind(this),"narg",e,NaN),this)}showCompletionScript(e,r){return Y("[string] [string]",[e,r],arguments.length),e=e||this.$0,g(this,kn).log(g(this,Et).generateCompletionScript(e,r||g(this,ut)||"completion")),this}showHelp(e){if(Y("[string|function]",[e],arguments.length),X(this,ft,!0),!g(this,ce).hasCachedHelpMessage()){if(!this.parsed){let n=this[Pi](g(this,yr),void 0,void 0,0,!0);if(Ce(n))return n.then(()=>{g(this,ce).showHelp(e)}),this}let r=g(this,Ae).runDefaultBuilderOn(this);if(Ce(r))return r.then(()=>{g(this,ce).showHelp(e)}),this}return g(this,ce).showHelp(e),this}scriptName(e){return this.customScriptName=!0,this.$0=e,this}showHelpOnFail(e,r){return Y("[boolean|string] [string]",[e,r],arguments.length),g(this,ce).showHelpOnFail(e,r),this}showVersion(e){return Y("[string|function]",[e],arguments.length),g(this,ce).showVersion(e),this}skipValidation(e){return Y("<array|string>",[e],arguments.length),this[br]("skipValidation",e),this}strict(e){return Y("[boolean]",[e],arguments.length),X(this,Gr,e!==!1),this}strictCommands(e){return Y("[boolean]",[e],arguments.length),X(this,Vr,e!==!1),this}strictOptions(e){return Y("[boolean]",[e],arguments.length),X(this,Yr,e!==!1),this}string(e){return Y("<array|string>",[e],arguments.length),this[br]("string",e),this}terminalWidth(){return Y([],0),g(this,oe).process.stdColumns}updateLocale(e){return this.updateStrings(e)}updateStrings(e){return Y("<object>",[e],arguments.length),X(this,Hr,!1),g(this,oe).y18n.updateLocale(e),this}usage(e,r,n,i){if(Y("<string|null|undefined> [string|boolean] [function|object] [function]",[e,r,n,i],arguments.length),r!==void 0){if(Ze(e,null,g(this,oe)),(e||"").match(/^\$0( |$)/))return this.command(e,r,n,i);throw new ye(".usage() description must start with $0 if being used as alias for .command()")}else return g(this,ce).usage(e),this}version(e,r,n){let i="version";if(Y("[boolean|string] [string] [string]",[e,r,n],arguments.length),g(this,er)&&(this[Za](g(this,er)),g(this,ce).version(void 0),X(this,er,null)),arguments.length===0)n=this[zf](),e=i;else if(arguments.length===1){if(e===!1)return this;n=e,e=i}else arguments.length===2&&(n=r,r=void 0);return X(this,er,typeof e=="string"?e:i),r=r||g(this,ce).deferY18nLookup("Show version number"),g(this,ce).version(n||void 0),this.boolean(g(this,er)),this.describe(g(this,er),r),this}wrap(e){return Y("<number|null|undefined>",[e],arguments.length),g(this,ce).wrap(e),this}[(Ae=new WeakMap,qr=new WeakMap,Si=new WeakMap,Et=new WeakMap,ut=new WeakMap,js=new WeakMap,wr=new WeakMap,Hr=new WeakMap,Ct=new WeakMap,Us=new WeakMap,xt=new WeakMap,Ht=new WeakMap,ft=new WeakMap,St=new WeakMap,kn=new WeakMap,Te=new WeakMap,ee=new WeakMap,Ms=new WeakMap,Bs=new WeakMap,ht=new WeakMap,Wr=new WeakMap,Fn=new WeakMap,zr=new WeakMap,yr=new WeakMap,qs=new WeakMap,oe=new WeakMap,Gr=new WeakMap,Vr=new WeakMap,Yr=new WeakMap,ce=new WeakMap,er=new WeakMap,Se=new WeakMap,Bf)](e){if(!e._||!e["--"])return e;e._.push.apply(e._,e["--"]);try{delete e["--"]}catch{}return e}[qf](){return{log:(...e)=>{this[Hs]()||console.log(...e),X(this,ft,!0),g(this,Te).length&&X(this,Te,g(this,Te)+`
`),X(this,Te,g(this,Te)+e.join(" "))},error:(...e)=>{this[Hs]()||console.error(...e),X(this,ft,!0),g(this,Te).length&&X(this,Te,g(this,Te)+`
`),X(this,Te,g(this,Te)+e.join(" "))}}}[Za](e){Dn(g(this,ee)).forEach(r=>{if((i=>i==="configObjects")(r))return;let n=g(this,ee)[r];Array.isArray(n)?~n.indexOf(e)&&n.splice(n.indexOf(e),1):typeof n=="object"&&delete n[e]}),delete g(this,ce).getDescriptions()[e]}[Hf](){g(this,Us).push({options:g(this,ee),configObjects:g(this,ee).configObjects.slice(0),exitProcess:g(this,Ct),groups:g(this,Ht),strict:g(this,Gr),strictCommands:g(this,Vr),strictOptions:g(this,Yr),completionCommand:g(this,ut),output:g(this,Te),exitError:g(this,wr),hasOutput:g(this,ft),parsed:this.parsed,parseFn:g(this,ht),parseContext:g(this,Wr)}),g(this,ce).freeze(),g(this,Se).freeze(),g(this,Ae).freeze(),g(this,xt).freeze()}[Wf](){let e="",r;return/\b(node|iojs|electron)(\.exe)?$/.test(g(this,oe).process.argv()[0])?r=g(this,oe).process.argv().slice(1,2):r=g(this,oe).process.argv().slice(0,1),e=r.map(n=>{let i=this[th](g(this,qr),n);return n.match(/^(\/|([a-zA-Z]:)?\\)/)&&i.length<n.length?i:n}).join(" ").trim(),g(this,oe).getEnv("_")&&g(this,oe).getProcessArgvBin()===g(this,oe).getEnv("_")&&(e=g(this,oe).getEnv("_").replace(`${g(this,oe).path.dirname(g(this,oe).process.execPath())}/`,"")),e}[Kr](){return g(this,Bs)}[Qa](){if(!g(this,Hr))return;let e=g(this,oe).getEnv("LC_ALL")||g(this,oe).getEnv("LC_MESSAGES")||g(this,oe).getEnv("LANG")||g(this,oe).getEnv("LANGUAGE")||"en_US";this.locale(e.replace(/[.:].*/,""))}[zf](){return this[ec]().version||"unknown"}[Gf](e){let r=e["--"]?e["--"]:e._;for(let n=0,i;(i=r[n])!==void 0;n++)g(this,oe).Parser.looksLikeNumber(i)&&Number.isSafeInteger(Math.floor(parseFloat(`${i}`)))&&(r[n]=Number(i));return e}[ec](e){let r=e||"*";if(g(this,Fn)[r])return g(this,Fn)[r];let n={};try{let i=e||g(this,oe).mainFilename;!e&&g(this,oe).path.extname(i)&&(i=g(this,oe).path.dirname(i));let s=g(this,oe).findUp(i,(o,a)=>{if(a.includes("package.json"))return"package.json"});Ze(s,void 0,g(this,oe)),n=JSON.parse(g(this,oe).readFileSync(s,"utf8"))}catch{}return g(this,Fn)[r]=n||{},g(this,Fn)[r]}[br](e,r){r=[].concat(r),r.forEach(n=>{n=this[nc](n),g(this,ee)[e].push(n)})}[Tn](e,r,n,i){this[rc](e,r,n,i,(s,o,a)=>{g(this,ee)[s][o]=a})}[tc](e,r,n,i){this[rc](e,r,n,i,(s,o,a)=>{g(this,ee)[s][o]=(g(this,ee)[s][o]||[]).concat(a)})}[rc](e,r,n,i,s){if(Array.isArray(n))n.forEach(o=>{e(o,i)});else if((o=>typeof o=="object")(n))for(let o of Dn(n))e(o,n[o]);else s(r,this[nc](n),i)}[nc](e){return e==="__proto__"?"___proto___":e}[ic](e,r){return this[Tn](this[ic].bind(this),"key",e,r),this}[sc](){var e,r,n,i,s,o,a,c,u,l,f,h;let d=g(this,Us).pop();Ze(d,void 0,g(this,oe));let m;e=this,r=this,n=this,i=this,s=this,o=this,a=this,c=this,u=this,l=this,f=this,h=this,{options:{set value(p){X(e,ee,p)}}.value,configObjects:m,exitProcess:{set value(p){X(r,Ct,p)}}.value,groups:{set value(p){X(n,Ht,p)}}.value,output:{set value(p){X(i,Te,p)}}.value,exitError:{set value(p){X(s,wr,p)}}.value,hasOutput:{set value(p){X(o,ft,p)}}.value,parsed:this.parsed,strict:{set value(p){X(a,Gr,p)}}.value,strictCommands:{set value(p){X(c,Vr,p)}}.value,strictOptions:{set value(p){X(u,Yr,p)}}.value,completionCommand:{set value(p){X(l,ut,p)}}.value,parseFn:{set value(p){X(f,ht,p)}}.value,parseContext:{set value(p){X(h,Wr,p)}}.value}=d,g(this,ee).configObjects=m,g(this,ce).unfreeze(),g(this,Se).unfreeze(),g(this,Ae).unfreeze(),g(this,xt).unfreeze()}[Vf](e,r){return Br(r,n=>(e(n),n))}getInternalMethods(){return{getCommandInstance:this[Yf].bind(this),getContext:this[Kf].bind(this),getHasOutput:this[Jf].bind(this),getLoggerInstance:this[Xf].bind(this),getParseContext:this[Zf].bind(this),getParserConfiguration:this[Kr].bind(this),getUsageInstance:this[Qf].bind(this),getValidationInstance:this[eh].bind(this),hasParseCallback:this[Hs].bind(this),postProcess:this[Jr].bind(this),reset:this[oc].bind(this),runValidation:this[ac].bind(this),runYargsParserAndExecuteCommands:this[Pi].bind(this),setHasOutput:this[rh].bind(this)}}[Yf](){return g(this,Ae)}[Kf](){return g(this,Si)}[Jf](){return g(this,ft)}[Xf](){return g(this,kn)}[Zf](){return g(this,Wr)||{}}[Qf](){return g(this,ce)}[eh](){return g(this,Se)}[Hs](){return!!g(this,ht)}[Jr](e,r,n,i){return n||Ce(e)||(r||(e=this[Bf](e)),(this[Kr]()["parse-positional-numbers"]||this[Kr]()["parse-positional-numbers"]===void 0)&&(e=this[Gf](e)),i&&(e=Mr(e,this,g(this,xt).getMiddleware(),!1))),e}[oc](e={}){X(this,ee,g(this,ee)||{});let r={};r.local=g(this,ee).local?g(this,ee).local:[],r.configObjects=g(this,ee).configObjects?g(this,ee).configObjects:[];let n={};r.local.forEach(o=>{n[o]=!0,(e[o]||[]).forEach(a=>{n[a]=!0})}),Object.assign(g(this,zr),Object.keys(g(this,Ht)).reduce((o,a)=>{let c=g(this,Ht)[a].filter(u=>!(u in n));return c.length>0&&(o[a]=c),o},{})),X(this,Ht,{});let i=["array","boolean","string","skipValidation","count","normalize","number","hiddenOptions"],s=["narg","key","alias","default","defaultDescription","config","choices","demandedOptions","demandedCommands","deprecatedOptions"];return i.forEach(o=>{r[o]=(g(this,ee)[o]||[]).filter(a=>!n[a])}),s.forEach(o=>{r[o]=gr(g(this,ee)[o],a=>!n[a])}),r.envPrefix=g(this,ee).envPrefix,X(this,ee,r),X(this,ce,g(this,ce)?g(this,ce).reset(n):If(this,g(this,oe))),X(this,Se,g(this,Se)?g(this,Se).reset(n):jf(this,g(this,ce),g(this,oe))),X(this,Ae,g(this,Ae)?g(this,Ae).reset():Of(g(this,ce),g(this,Se),g(this,xt),g(this,oe))),g(this,Et)||X(this,Et,Tf(this,g(this,ce),g(this,Ae),g(this,oe))),g(this,xt).reset(),X(this,ut,null),X(this,Te,""),X(this,wr,null),X(this,ft,!1),this.parsed=!1,this}[th](e,r){return g(this,oe).path.relative(e,r)}[Pi](e,r,n,i=0,s=!1){let o=!!n||s;e=e||g(this,yr),g(this,ee).__=g(this,oe).y18n.__,g(this,ee).configuration=this[Kr]();let a=!!g(this,ee).configuration["populate--"],c=Object.assign({},g(this,ee).configuration,{"populate--":!0}),u=g(this,oe).Parser.detailed(e,Object.assign({},g(this,ee),{configuration:H({"parse-positional-numbers":!1},c)})),l=Object.assign(u.argv,g(this,Wr)),f,h=u.aliases,d=!1,m=!1;Object.keys(l).forEach(p=>{p===g(this,St)&&l[p]?d=!0:p===g(this,er)&&l[p]&&(m=!0)}),l.$0=this.$0,this.parsed=u,i===0&&g(this,ce).clearCachedHelpMessage();try{if(this[Qa](),r)return this[Jr](l,a,!!n,!1);g(this,St)&&~[g(this,St)].concat(h[g(this,St)]||[]).filter(E=>E.length>1).indexOf(""+l._[l._.length-1])&&(l._.pop(),d=!0);let p=g(this,Ae).getCommands(),v=g(this,Et).completionKey in l,w=d||v||s;if(l._.length){if(p.length){let b;for(let E=i||0,A;l._[E]!==void 0;E++)if(A=String(l._[E]),~p.indexOf(A)&&A!==g(this,ut)){let M=g(this,Ae).runCommand(A,this,u,E+1,s,d||m||s);return this[Jr](M,a,!!n,!1)}else if(!b&&A!==g(this,ut)){b=A;break}!g(this,Ae).hasDefaultCommand()&&g(this,qs)&&b&&!w&&g(this,Se).recommendCommands(b,p)}g(this,ut)&&~l._.indexOf(g(this,ut))&&!v&&(g(this,Ct)&&vr(!0),this.showCompletionScript(),this.exit(0))}if(g(this,Ae).hasDefaultCommand()&&!w){let b=g(this,Ae).runCommand(null,this,u,0,s,d||m||s);return this[Jr](b,a,!!n,!1)}if(v){g(this,Ct)&&vr(!0),e=[].concat(e);let b=e.slice(e.indexOf(`--${g(this,Et).completionKey}`)+1);return g(this,Et).getCompletion(b,(E,A)=>{if(E)throw new ye(E.message);(A||[]).forEach(M=>{g(this,kn).log(M)}),this.exit(0)}),this[Jr](l,!a,!!n,!1)}if(g(this,ft)||(d?(g(this,Ct)&&vr(!0),o=!0,this.showHelp("log"),this.exit(0)):m&&(g(this,Ct)&&vr(!0),o=!0,g(this,ce).showVersion("log"),this.exit(0))),!o&&g(this,ee).skipValidation.length>0&&(o=Object.keys(l).some(b=>g(this,ee).skipValidation.indexOf(b)>=0&&l[b]===!0)),!o){if(u.error)throw new ye(u.error.message);if(!v){let b=this[ac](h,{},u.error);n||(f=Mr(l,this,g(this,xt).getMiddleware(),!0)),f=this[Vf](b,f!=null?f:l),Ce(f)&&!n&&(f=f.then(()=>Mr(l,this,g(this,xt).getMiddleware(),!1)))}}}catch(p){if(p instanceof ye)g(this,ce).fail(p.message,p);else throw p}return this[Jr](f!=null?f:l,a,!!n,!0)}[ac](e,r,n,i){e=H({},e),r=H({},r);let s=H({},this.getDemandedOptions());return o=>{if(n)throw new ye(n.message);g(this,Se).nonOptionCount(o),g(this,Se).requiredArguments(o,s);let a=!1;g(this,Vr)&&(a=g(this,Se).unknownCommands(o)),g(this,Gr)&&!a?g(this,Se).unknownArguments(o,e,r,!!i):g(this,Yr)&&g(this,Se).unknownArguments(o,e,{},!1,!1),g(this,Se).limitedChoices(o),g(this,Se).implications(o),g(this,Se).conflicting(o)}}[rh](){X(this,ft,!0)}};function _f(t){return!!t&&typeof t.getInternalMethods=="function"}"use strict";var zb=Mf(Cf),ih=zb;var sb=Q(require("path")),ob=Q(require("crypto"));var Bu=Q(require("path")),zy=Q(require("crypto")),Gy=Q(require("os"));var Gb=Q(require("os")),G;(function(a){a[a.Trace=1]="Trace",a[a.Debug=2]="Debug",a[a.Info=3]="Info",a[a.Warning=4]="Warning",a[a.Error=5]="Error",a[a.Critical=6]="Critical",a[a.Off=7]="Off"})(G||(G={}));var cc={info:3,debug:2,trace:1},t1=Object.keys(cc).reduce((t,e)=>(t[cc[e]]=e,t),[]);function Nn(t){return cc[t]||3}var Ai={write:()=>{},raw:()=>{},start:()=>Date.now(),stop:()=>{},event:()=>{}},Oi=/(\x9B|\x1B\[)[0-?]*[ -\/]*[@-~]/g;function sh(t,e){let r=!!e;return{event:n=>{r&&(r=!1,t.forEach(i=>i.event({type:"text",level:3,timestamp:Date.now(),text:e}))),t.forEach(i=>i.event(n))}}}function oh(t,e,r){return{event(n){let i=Vb(n,e(),r.getTime());i&&t(i)}}}function ah(t,e,r){return{event(n){t(JSON.stringify(n)+`
`)}}}function we(t,e=2){return{event:t.event,write(r,n=e){t.event({type:"text",level:n,timestamp:Date.now(),text:r})},raw(r,n=e){t.event({type:"raw",level:n,timestamp:Date.now(),text:r})},start(r,n=e){let i=Date.now();return t.event({type:"start",level:n,timestamp:i,text:r}),i},stop(r,n,i=e){t.event({type:"stop",level:i,timestamp:Date.now(),text:r,startTimestamp:n})},get dimensions(){return t.dimensions},onDidChangeDimensions:t.onDidChangeDimensions}}function Vb(t,e,r){if(!(!("level"in t)||t.level<e))switch(t.type){case"text":return`[${Ri(lh,`${t.timestamp-r} ms`)}] ${Ws(t.text)}`;case"raw":return t.text;case"start":return 1>=e?`${Ri(Zb,`[${t.timestamp-r} ms] Start`)}: ${Ws(t.text)}`:`[${Ri(lh,`${t.timestamp-r} ms`)}] Start: ${Ws(t.text)}`;case"stop":return 1>=e?`${Ri(Xb,`[${t.timestamp-r} ms] Stop`)} (${t.timestamp-t.startTimestamp} ms): ${Ws(t.text)}`:void 0;default:throw Yb(t)}}function Ws(t){return eE(t).replace(/\r?\n/g,`\r
`).replace(/(\r?\n)?$/,`\r
`)}function Yb(t){return new Error(`Unknown log event type: ${t.type}`)}var Kb="38;2;143;99;79",ch="38;2;99;143;79",Jb="38;2;86;156;214",Xb=Kb,Zb=ch,lh=ch,Qb=Jb;function Ri(t,e){return e.split(`
`).map(r=>`[1m[${t}m${r}[39m[22m`).join(`
`)}function eE(t){let e,r=0,n=[];for(Oi.lastIndex=0;e=Oi.exec(t);)n.push(uh(t.substring(r,e.index))),n.push(e[0]),r=Oi.lastIndex;return n.push(uh(t.substr(r))),n.join("")}function uh(t){let e=/(?<=^|[^A-Za-z0-9_\-\.])[0-9]+(\.[0-9]+)*(?=$|[^A-Za-z0-9_\-\.])/g,r,n=0,i=[];for(;r=e.exec(t);)i.push(t.substring(n,r.index)),i.push(Ri(Qb,r[0])),n=e.lastIndex;return i.push(t.substr(n)),i.join("")}function Pe(t){return t.split(/\r?\n/).map(e=>`[1m[31m${e}[39m[22m`).join(`\r
`)+`\r
`}function lc(t){return t.split(/\r?\n/).map(e=>`[1m[33m${e}[39m[22m`).join(`\r
`)+`\r
`}var ae=class extends Error{constructor(e){super(e.originalError&&e.originalError.message||e.description);this.manageContainer=!1;this.actions=[];this.data={};var r;Object.assign(this,e),((r=this.originalError)==null?void 0:r.stack)&&(this.stack=this.originalError.stack)}};var Ne=Q(require("path")),Rh=Q(require("fs")),fc=Q(require("child_process")),hc=Q(require("string_decoder"));var xe=Q(require("fs")),Wt=Q(require("util"));function _i(t){return new Promise(e=>xe.stat(t,(r,n)=>e(!r&&n.isFile())))}function fh(t){return new Promise(e=>xe.stat(t,(r,n)=>e(!r&&n.isDirectory())))}var $t=(0,Wt.promisify)(xe.readFile),$n=(0,Wt.promisify)(xe.writeFile),s1=(0,Wt.promisify)(xe.appendFile),hh=(0,Wt.promisify)(xe.rename),dh=(0,Wt.promisify)(xe.readdir),o1=(0,Wt.promisify)(xe.unlink),zs=t=>new Promise((e,r)=>xe.mkdir(t,{recursive:!0},n=>n?r(n):e())),a1=(0,Wt.promisify)(xe.rmdir),ph=(0,Wt.promisify)(xe.rm),c1=(0,Wt.promisify)(xe.copyFile),uc;(function(i){i[i.Unknown=0]="Unknown",i[i.File=1]="File",i[i.Directory=2]="Directory",i[i.SymbolicLink=64]="SymbolicLink"})(uc||(uc={}));var iE=Q(require("path")),Ks=Q(require("net")),jn=Q(require("os"));var mh;mh=(()=>{"use strict";var t={470:n=>{function i(a){if(typeof a!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(a))}function s(a,c){for(var u,l="",f=0,h=-1,d=0,m=0;m<=a.length;++m){if(m<a.length)u=a.charCodeAt(m);else{if(u===47)break;u=47}if(u===47){if(!(h===m-1||d===1))if(h!==m-1&&d===2){if(l.length<2||f!==2||l.charCodeAt(l.length-1)!==46||l.charCodeAt(l.length-2)!==46){if(l.length>2){var p=l.lastIndexOf("/");if(p!==l.length-1){p===-1?(l="",f=0):f=(l=l.slice(0,p)).length-1-l.lastIndexOf("/"),h=m,d=0;continue}}else if(l.length===2||l.length===1){l="",f=0,h=m,d=0;continue}}c&&(l.length>0?l+="/..":l="..",f=2)}else l.length>0?l+="/"+a.slice(h+1,m):l=a.slice(h+1,m),f=m-h-1;h=m,d=0}else u===46&&d!==-1?++d:d=-1}return l}var o={resolve:function(){for(var a,c="",u=!1,l=arguments.length-1;l>=-1&&!u;l--){var f;l>=0?f=arguments[l]:(a===void 0&&(a=process.cwd()),f=a),i(f),f.length!==0&&(c=f+"/"+c,u=f.charCodeAt(0)===47)}return c=s(c,!u),u?c.length>0?"/"+c:"/":c.length>0?c:"."},normalize:function(a){if(i(a),a.length===0)return".";var c=a.charCodeAt(0)===47,u=a.charCodeAt(a.length-1)===47;return(a=s(a,!c)).length!==0||c||(a="."),a.length>0&&u&&(a+="/"),c?"/"+a:a},isAbsolute:function(a){return i(a),a.length>0&&a.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var a,c=0;c<arguments.length;++c){var u=arguments[c];i(u),u.length>0&&(a===void 0?a=u:a+="/"+u)}return a===void 0?".":o.normalize(a)},relative:function(a,c){if(i(a),i(c),a===c||(a=o.resolve(a))===(c=o.resolve(c)))return"";for(var u=1;u<a.length&&a.charCodeAt(u)===47;++u);for(var l=a.length,f=l-u,h=1;h<c.length&&c.charCodeAt(h)===47;++h);for(var d=c.length-h,m=f<d?f:d,p=-1,v=0;v<=m;++v){if(v===m){if(d>m){if(c.charCodeAt(h+v)===47)return c.slice(h+v+1);if(v===0)return c.slice(h+v)}else f>m&&(a.charCodeAt(u+v)===47?p=v:v===0&&(p=0));break}var w=a.charCodeAt(u+v);if(w!==c.charCodeAt(h+v))break;w===47&&(p=v)}var b="";for(v=u+p+1;v<=l;++v)v!==l&&a.charCodeAt(v)!==47||(b.length===0?b+="..":b+="/..");return b.length>0?b+c.slice(h+p):(h+=p,c.charCodeAt(h)===47&&++h,c.slice(h))},_makeLong:function(a){return a},dirname:function(a){if(i(a),a.length===0)return".";for(var c=a.charCodeAt(0),u=c===47,l=-1,f=!0,h=a.length-1;h>=1;--h)if((c=a.charCodeAt(h))===47){if(!f){l=h;break}}else f=!1;return l===-1?u?"/":".":u&&l===1?"//":a.slice(0,l)},basename:function(a,c){if(c!==void 0&&typeof c!="string")throw new TypeError('"ext" argument must be a string');i(a);var u,l=0,f=-1,h=!0;if(c!==void 0&&c.length>0&&c.length<=a.length){if(c.length===a.length&&c===a)return"";var d=c.length-1,m=-1;for(u=a.length-1;u>=0;--u){var p=a.charCodeAt(u);if(p===47){if(!h){l=u+1;break}}else m===-1&&(h=!1,m=u+1),d>=0&&(p===c.charCodeAt(d)?--d==-1&&(f=u):(d=-1,f=m))}return l===f?f=m:f===-1&&(f=a.length),a.slice(l,f)}for(u=a.length-1;u>=0;--u)if(a.charCodeAt(u)===47){if(!h){l=u+1;break}}else f===-1&&(h=!1,f=u+1);return f===-1?"":a.slice(l,f)},extname:function(a){i(a);for(var c=-1,u=0,l=-1,f=!0,h=0,d=a.length-1;d>=0;--d){var m=a.charCodeAt(d);if(m!==47)l===-1&&(f=!1,l=d+1),m===46?c===-1?c=d:h!==1&&(h=1):c!==-1&&(h=-1);else if(!f){u=d+1;break}}return c===-1||l===-1||h===0||h===1&&c===l-1&&c===u+1?"":a.slice(c,l)},format:function(a){if(a===null||typeof a!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof a);return function(c,u){var l=u.dir||u.root,f=u.base||(u.name||"")+(u.ext||"");return l?l===u.root?l+f:l+"/"+f:f}(0,a)},parse:function(a){i(a);var c={root:"",dir:"",base:"",ext:"",name:""};if(a.length===0)return c;var u,l=a.charCodeAt(0),f=l===47;f?(c.root="/",u=1):u=0;for(var h=-1,d=0,m=-1,p=!0,v=a.length-1,w=0;v>=u;--v)if((l=a.charCodeAt(v))!==47)m===-1&&(p=!1,m=v+1),l===46?h===-1?h=v:w!==1&&(w=1):h!==-1&&(w=-1);else if(!p){d=v+1;break}return h===-1||m===-1||w===0||w===1&&h===m-1&&h===d+1?m!==-1&&(c.base=c.name=d===0&&f?a.slice(1,m):a.slice(d,m)):(d===0&&f?(c.name=a.slice(1,h),c.base=a.slice(1,m)):(c.name=a.slice(d,h),c.base=a.slice(d,m)),c.ext=a.slice(h,m)),d>0?c.dir=a.slice(0,d-1):f&&(c.dir="/"),c},sep:"/",delimiter:":",win32:null,posix:null};o.posix=o,n.exports=o},447:(n,i,s)=>{var o;if(s.r(i),s.d(i,{URI:()=>b,Utils:()=>$}),typeof process=="object")o=process.platform==="win32";else if(typeof navigator=="object"){var a=navigator.userAgent;o=a.indexOf("Windows")>=0}var c,u,l=(c=function(S,x){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,D){L.__proto__=D}||function(L,D){for(var te in D)Object.prototype.hasOwnProperty.call(D,te)&&(L[te]=D[te])})(S,x)},function(S,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");function L(){this.constructor=S}c(S,x),S.prototype=x===null?Object.create(x):(L.prototype=x.prototype,new L)}),f=/^\w[\w\d+.-]*$/,h=/^\//,d=/^\/\//;function m(S,x){if(!S.scheme&&x)throw new Error('[UriError]: Scheme is missing: {scheme: "", authority: "'.concat(S.authority,'", path: "').concat(S.path,'", query: "').concat(S.query,'", fragment: "').concat(S.fragment,'"}'));if(S.scheme&&!f.test(S.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(S.path){if(S.authority){if(!h.test(S.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(d.test(S.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}var p="",v="/",w=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,b=function(){function S(x,L,D,te,se,B){B===void 0&&(B=!1),typeof x=="object"?(this.scheme=x.scheme||p,this.authority=x.authority||p,this.path=x.path||p,this.query=x.query||p,this.fragment=x.fragment||p):(this.scheme=function(De,Be){return De||Be?De:"file"}(x,B),this.authority=L||p,this.path=function(De,Be){switch(De){case"https":case"http":case"file":Be?Be[0]!==v&&(Be=v+Be):Be=v}return Be}(this.scheme,D||p),this.query=te||p,this.fragment=se||p,m(this,B))}return S.isUri=function(x){return x instanceof S||!!x&&typeof x.authority=="string"&&typeof x.fragment=="string"&&typeof x.path=="string"&&typeof x.query=="string"&&typeof x.scheme=="string"&&typeof x.fsPath=="string"&&typeof x.with=="function"&&typeof x.toString=="function"},Object.defineProperty(S.prototype,"fsPath",{get:function(){return I(this,!1)},enumerable:!1,configurable:!0}),S.prototype.with=function(x){if(!x)return this;var L=x.scheme,D=x.authority,te=x.path,se=x.query,B=x.fragment;return L===void 0?L=this.scheme:L===null&&(L=p),D===void 0?D=this.authority:D===null&&(D=p),te===void 0?te=this.path:te===null&&(te=p),se===void 0?se=this.query:se===null&&(se=p),B===void 0?B=this.fragment:B===null&&(B=p),L===this.scheme&&D===this.authority&&te===this.path&&se===this.query&&B===this.fragment?this:new A(L,D,te,se,B)},S.parse=function(x,L){L===void 0&&(L=!1);var D=w.exec(x);return D?new A(D[2]||p,O(D[4]||p),O(D[5]||p),O(D[7]||p),O(D[9]||p),L):new A(p,p,p,p,p)},S.file=function(x){var L=p;if(o&&(x=x.replace(/\\/g,v)),x[0]===v&&x[1]===v){var D=x.indexOf(v,2);D===-1?(L=x.substring(2),x=v):(L=x.substring(2,D),x=x.substring(D)||v)}return new A("file",L,x,p,p)},S.from=function(x){var L=new A(x.scheme,x.authority,x.path,x.query,x.fragment);return m(L,!0),L},S.prototype.toString=function(x){return x===void 0&&(x=!1),F(this,x)},S.prototype.toJSON=function(){return this},S.revive=function(x){if(x){if(x instanceof S)return x;var L=new A(x);return L._formatted=x.external,L._fsPath=x._sep===E?x.fsPath:null,L}return x},S}(),E=o?1:void 0,A=function(S){function x(){var L=S!==null&&S.apply(this,arguments)||this;return L._formatted=null,L._fsPath=null,L}return l(x,S),Object.defineProperty(x.prototype,"fsPath",{get:function(){return this._fsPath||(this._fsPath=I(this,!1)),this._fsPath},enumerable:!1,configurable:!0}),x.prototype.toString=function(L){return L===void 0&&(L=!1),L?F(this,!0):(this._formatted||(this._formatted=F(this,!1)),this._formatted)},x.prototype.toJSON=function(){var L={$mid:1};return this._fsPath&&(L.fsPath=this._fsPath,L._sep=E),this._formatted&&(L.external=this._formatted),this.path&&(L.path=this.path),this.scheme&&(L.scheme=this.scheme),this.authority&&(L.authority=this.authority),this.query&&(L.query=this.query),this.fragment&&(L.fragment=this.fragment),L},x}(b),M=((u={})[58]="%3A",u[47]="%2F",u[63]="%3F",u[35]="%23",u[91]="%5B",u[93]="%5D",u[64]="%40",u[33]="%21",u[36]="%24",u[38]="%26",u[39]="%27",u[40]="%28",u[41]="%29",u[42]="%2A",u[43]="%2B",u[44]="%2C",u[59]="%3B",u[61]="%3D",u[32]="%20",u);function R(S,x){for(var L=void 0,D=-1,te=0;te<S.length;te++){var se=S.charCodeAt(te);if(se>=97&&se<=122||se>=65&&se<=90||se>=48&&se<=57||se===45||se===46||se===95||se===126||x&&se===47)D!==-1&&(L+=encodeURIComponent(S.substring(D,te)),D=-1),L!==void 0&&(L+=S.charAt(te));else{L===void 0&&(L=S.substr(0,te));var B=M[se];B!==void 0?(D!==-1&&(L+=encodeURIComponent(S.substring(D,te)),D=-1),L+=B):D===-1&&(D=te)}}return D!==-1&&(L+=encodeURIComponent(S.substring(D))),L!==void 0?L:S}function N(S){for(var x=void 0,L=0;L<S.length;L++){var D=S.charCodeAt(L);D===35||D===63?(x===void 0&&(x=S.substr(0,L)),x+=M[D]):x!==void 0&&(x+=S[L])}return x!==void 0?x:S}function I(S,x){var L;return L=S.authority&&S.path.length>1&&S.scheme==="file"?"//".concat(S.authority).concat(S.path):S.path.charCodeAt(0)===47&&(S.path.charCodeAt(1)>=65&&S.path.charCodeAt(1)<=90||S.path.charCodeAt(1)>=97&&S.path.charCodeAt(1)<=122)&&S.path.charCodeAt(2)===58?x?S.path.substr(1):S.path[1].toLowerCase()+S.path.substr(2):S.path,o&&(L=L.replace(/\//g,"\\")),L}function F(S,x){var L=x?N:R,D="",te=S.scheme,se=S.authority,B=S.path,De=S.query,Be=S.fragment;if(te&&(D+=te,D+=":"),(se||te==="file")&&(D+=v,D+=v),se){var Z=se.indexOf("@");if(Z!==-1){var fe=se.substr(0,Z);se=se.substr(Z+1),(Z=fe.indexOf(":"))===-1?D+=L(fe,!1):(D+=L(fe.substr(0,Z),!1),D+=":",D+=L(fe.substr(Z+1),!1)),D+="@"}(Z=(se=se.toLowerCase()).indexOf(":"))===-1?D+=L(se,!1):(D+=L(se.substr(0,Z),!1),D+=se.substr(Z))}if(B){if(B.length>=3&&B.charCodeAt(0)===47&&B.charCodeAt(2)===58)(ue=B.charCodeAt(1))>=65&&ue<=90&&(B="/".concat(String.fromCharCode(ue+32),":").concat(B.substr(3)));else if(B.length>=2&&B.charCodeAt(1)===58){var ue;(ue=B.charCodeAt(0))>=65&&ue<=90&&(B="".concat(String.fromCharCode(ue+32),":").concat(B.substr(2)))}D+=L(B,!0)}return De&&(D+="?",D+=L(De,!1)),Be&&(D+="#",D+=x?Be:R(Be,!1)),D}function V(S){try{return decodeURIComponent(S)}catch{return S.length>3?S.substr(0,3)+V(S.substr(3)):S}}var k=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function O(S){return S.match(k)?S.replace(k,function(x){return V(x)}):S}var $,z=s(470),T=function(S,x,L){if(L||arguments.length===2)for(var D,te=0,se=x.length;te<se;te++)!D&&te in x||(D||(D=Array.prototype.slice.call(x,0,te)),D[te]=x[te]);return S.concat(D||Array.prototype.slice.call(x))},W=z.posix||z;(function(S){S.joinPath=function(x){for(var L=[],D=1;D<arguments.length;D++)L[D-1]=arguments[D];return x.with({path:W.join.apply(W,T([x.path],L,!1))})},S.resolvePath=function(x){for(var L=[],D=1;D<arguments.length;D++)L[D-1]=arguments[D];var te=x.path||"/";return x.with({path:W.resolve.apply(W,T([te],L,!1))})},S.dirname=function(x){var L=W.dirname(x.path);return L.length===1&&L.charCodeAt(0)===46?x:x.with({path:L})},S.basename=function(x){return W.basename(x.path)},S.extname=function(x){return W.extname(x.path)}})($||($={}))}},e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}return r.d=(n,i)=>{for(var s in i)r.o(i,s)&&!r.o(n,s)&&Object.defineProperty(n,s,{enumerable:!0,get:i[s]})},r.o=(n,i)=>Object.prototype.hasOwnProperty.call(n,i),r.r=n=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},r(447)})();var{URI:rt,Utils:u1}=mh;var Sh=xh(),Ph;(function(i){i[i.Unknown=0]="Unknown",i[i.File=1]="File",i[i.Directory=2]="Directory",i[i.SymbolicLink=64]="SymbolicLink"})(Ph||(Ph={}));async function Ii(t,e){let r=Ah(t),n=await Oh(t,e);return sE(t,r,n,oE)}function sE(t,e,r,n){return{type:"local",platform:process.platform,exec:e,ptyExec:r,cwd:t,env:process.env,path:iE,homedir:async()=>jn.homedir(),tmpdir:async()=>jn.tmpdir(),isFile:_i,isFolder:fh,readFile:$t,writeFile:$n,rename:hh,mkdirp:async i=>{await zs(i)},readDir:dh,getUsername:async()=>jn.userInfo().username,getuid:async()=>process.getuid(),getgid:async()=>process.getgid(),toCommonURI:async i=>rt.file(i),connect:n}}function oE(t){if(process.platform!=="win32"||t.startsWith("\\\\.\\pipe\\"))return Sh.duplex(Ks.connect(t));let e=new Ks.Socket;return(async()=>{let r=await $t(t),n=r.indexOf(10),i=parseInt(r.slice(0,n).toString(),10),s=r.slice(n+1);e.connect(i,"127.0.0.1",()=>{e.write(s,o=>{o&&(console.error(o),e.destroy())})})})().catch(r=>{console.error(r),e.destroy()}),Sh.duplex(e)}function _h(t,e,r){return t==="linux"?e===r:e.toLowerCase()===r.toLowerCase()}var S1=Ne.join(__dirname,"..","..","node_modules",".bin","ts-node"),P1=Ne.basename(process.argv[0])==="ts-node"||process.argv.indexOf("ts-node/register")!==-1;async function Er(t){let{exec:e,cmd:r,args:n,cwd:i,env:s,stdin:o,output:a,print:c}=t,u=await e({cmd:r,args:n,cwd:i,env:s,output:a});return new Promise((l,f)=>{let h=[],d=[],m=c==="continuous"?new hc.StringDecoder:void 0;u.stdout.on("data",w=>{h.push(w),c==="continuous"&&a.write(m.write(w))}),u.stdout.on("error",w=>{if((w==null?void 0:w.code)!=="ENOTCONN")throw w});let p=c==="continuous"?new hc.StringDecoder:void 0;u.stderr.on("data",w=>{d.push(w),c==="continuous"&&a.write(Pe(p.write(w)))}),u.stderr.on("error",w=>{if((w==null?void 0:w.code)!=="ENOTCONN")throw w});let v=[];u.exit.then(({code:w})=>{try{v.forEach(A=>A.dispose());let b=Buffer.concat(h),E=Buffer.concat(d);(c===!0||w&&c==="onerror")&&(a.write(b.toString().replace(/\r?\n/g,`\r
`)),a.write(Pe(E.toString()))),c&&w&&a.write(`Exit code ${w}`),w?f({message:`Command failed: ${r} ${(n||[]).join(" ")}`,stdout:b,stderr:E,code:w}):l({stdout:b,stderr:E})}catch(b){f(b)}},f),o instanceof Buffer?(u.stdin.write(o,w=>{w&&f(w)}),u.stdin.end()):o instanceof Rh.ReadStream?o.pipe(u.stdin):typeof o=="function"&&v.push(o(w=>u.stdin.write(w)))})}async function Di(t){let{ptyExec:e,cmd:r,args:n,cwd:i,env:s,output:o,resolveOn:a,onDidInput:c}=t,u=await e({cmd:r,args:n,cwd:i,env:s,output:o});return new Promise((l,f)=>{let h="",d=[c&&c(m=>u.write(m))];u.onData(m=>{h+=m,o.raw(m),a&&a.exec(h)&&l({cmdOutput:h})}),u.exit.then(({code:m,signal:p})=>{try{d.forEach(v=>v==null?void 0:v.dispose()),m||p?f({message:`Command failed: ${r} ${(n||[]).join(" ")}`,cmdOutput:h,code:m,signal:p}):l({cmdOutput:h})}catch(v){f(v)}},m=>{d.forEach(p=>p==null?void 0:p.dispose()),f(m)})})}function Ah(t){return async function(e){let{cmd:r,args:n,output:i}=e,s=`Run: ${r} ${(n||[]).join(" ").replace(/\n.*/g,"")}`,o=i.start(s),a=e.cwd||t,c=e.env?H(H({},process.env),e.env):process.env,u=await Ih(r,a,c,i),l=fc.spawn(u,n,{cwd:a,env:c,windowsHide:!0});return{stdin:l.stdin,stdout:l.stdout,stderr:l.stderr,exit:new Promise((f,h)=>{l.once("error",d=>{i.stop(s,o),h(d)}),l.once("close",(d,m)=>{i.stop(s,o),f({code:d,signal:m})})}),async terminate(){l.kill("SIGKILL")}}}}async function Oh(t,e){let r=await e("node-pty");if(!r)throw new Error("Missing node-pty");return async function(n){var p,v;let{cmd:i,args:s,output:o}=n,a=`Run: ${i} ${(s||[]).join(" ").replace(/\n.*/g,"")}`,c=o.start(a),u=!1,l=n.cwd||t,f=n.env?H(H({},process.env),n.env):process.env,h=await Ih(i,l,f,o),d=r.spawn(h,s||[],{cwd:l,env:f,cols:(p=o.dimensions)==null?void 0:p.columns,rows:(v=o.dimensions)==null?void 0:v.rows,useConpty:u}),m=[o.onDidChangeDimensions&&o.onDidChangeDimensions(w=>d.resize(w.columns,w.rows))];return{onData:d.onData.bind(d),write:d.write.bind(d),resize:d.resize.bind(d),exit:new Promise(w=>{d.onExit(({exitCode:b,signal:E})=>{if(m.forEach(A=>A==null?void 0:A.dispose()),o.stop(a,c),w({code:b,signal:E}),process.platform==="win32")try{d.kill()}catch{}})}),async terminate(){d.kill("SIGKILL")}}}}async function Ih(t,e=process.cwd(),r,n){if(process.platform!=="win32")return t;if(Ne.isAbsolute(t))return await Li(t)||t;if(/[/\\]/.test(t)){let a=Ne.join(e,t);return await Li(a)||a}let i,s;if(r){for(let a of Object.keys(r))if(a.toLowerCase()==="path"){let c=r[a];typeof c=="string"&&(i=c,s=c.split(Ne.delimiter).filter(Boolean),s.push(Ne.join(r.ProgramW6432||"C:\\Program Files","Docker\\Docker\\resources\\bin")));break}}if(s===void 0||s.length===0){n.write(`findLocalWindowsExecutable: No PATH to look up exectuable '${t}'.`);let a=Ne.join(e,t);return await Li(a)||a}for(let a of s){let c;Ne.isAbsolute(a)?c=Ne.join(a,t):c=Ne.join(e,a,t);let u=await Li(c);if(u)return u}n.write(`findLocalWindowsExecutable: Exectuable '${t}' not found on PATH '${i}'.`);let o=Ne.join(e,t);return await Li(o)||o}var Dh=process.env.PATHEXT,Lh=Dh?Dh.toLowerCase().split(";"):[".com",".exe",".bat",".cmd"];async function Li(t){if(Lh.indexOf(Ne.extname(t))!==-1)return await _i(t)?t:void 0;for(let e of Lh){let r=t+e;if(await _i(r))return r}}function ki(t){let e=/^'?v?(\d+(\.\d+)*)/.exec(t);if(!!e)return e[1].split(".").map(r=>parseInt(r,10))}function Js(t,e){for(let r=0,n=Math.max(t.length,e.length);r<n;r++){let i=t[r]||0,s=e[r]||0;if(i!==s)return i<s}return!1}async function Fi(t){if(process.env.NODE_PATH){for(let e of process.env.NODE_PATH.split(Ne.delimiter))if(e)try{return require(`${e}/${t}`)}catch{}}try{return require(t)}catch{}}function Xs(t,e){return typeof e!="string"&&"win32"in e?t==="win32"?e.win32:e.posix:e}async function dc(t,e){return Xs(t.platform,{posix:async()=>{try{return await t.exec(`test -f '${e}'`),!0}catch{return!1}},win32:async()=>(await t.exec(`Test-Path '${e}' -PathType Leaf`)).stdout.trim()==="True"})()}var rr=Q(require("path")),qh=Q(require("fs")),wc=Q(require("string_decoder")),Hh=Q(require("crypto")),Wh=Q(require("util"));var aE=Q(require("path")),pc=Q(require("string_decoder"));var zt="\u2404";async function Zs(t,e,r,n="linux",i="Container"){let s=typeof t=="function",o=n==="win32",a=s?await t({env:r?{VSCODE_REMOTE_CONTAINERS_SESSION:r}:{},cmd:o?"powershell":"/bin/sh",args:o?["-NoProfile","-Command","-"]:[],output:e}):t;if(!s){let h=o?`powershell -NoProfile -Command "powershell -NoProfile -Command -"
`:`/bin/sh -c 'echo ${zt}; /bin/sh'
`;a.stdin.write(h),await new Promise(m=>{let p="",v=new pc.StringDecoder;a.stdout.on("data",function w(b){p+=v.write(b),p.includes(h)&&(a.stdout.off("data",w),m())})})}let c=cE(a),u;async function l(h,d){let m=u=(async()=>{try{await u}catch{}return f(Xs(n,h),d)})();try{return await Promise.race([m,c.unexpectedExit])}finally{c.disposeStdioListeners(),u===m&&(u=void 0)}}async function f(h,d){let m=`Run in ${i.toLowerCase()}: ${h.replace(/\n.*/g,"")}`,p;if((d==null?void 0:d.logOutput)!=="silent"&&(p=e.start(m,d==null?void 0:d.logLevel)),a.stdin.destroyed){e.write("Stdin closed!");let{code:N,signal:I}=await a.exit;return Promise.reject({message:`Shell server terminated (code: ${N}, signal: ${I})`,code:N,signal:I})}n==="win32"?a.stdin.write(`[Console]::Write('${zt}'); ( ${h} ); [Console]::Write("${zt}$LastExitCode ${zt}"); [Console]::Error.Write('${zt}')
`):a.stdin.write(`echo -n ${zt}; ( ${h} ); echo -n ${zt}$?${zt}; echo -n ${zt} >&2
`);let[v,w]=kh(a.stdout,[1,2],(d==null?void 0:d.logOutput)==="continuous"?(N,I,F)=>{I===1&&F===0&&e.write(N,d==null?void 0:d.logLevel)}:()=>{}),b=kh(a.stderr,[1],(d==null?void 0:d.logOutput)==="continuous"?(N,I,F)=>{I===0&&F===0&&e.write(N,d==null?void 0:d.logLevel)}:()=>{})[0];(d==null?void 0:d.stdin)&&(await v,a.stdin.write(d==null?void 0:d.stdin));let[E,A]=await w,[M]=await b,R=parseInt(A,10)||0;return((d==null?void 0:d.logOutput)===void 0||(d==null?void 0:d.logOutput)===!0)&&(e.write(E,d==null?void 0:d.logLevel),e.write(M,d==null?void 0:d.logLevel),R&&e.write(`Exit code ${R}`,d==null?void 0:d.logLevel)),(d==null?void 0:d.logOutput)==="continuous"&&R&&e.write(`Exit code ${R}`,d==null?void 0:d.logLevel),(d==null?void 0:d.logOutput)!=="silent"&&e.stop(m,p,d==null?void 0:d.logLevel),R?Promise.reject({message:`Command in ${i.toLowerCase()} failed: ${h}`,code:R,stdout:E,stderr:M}):{stdout:E,stderr:M}}return{exec:l,process:a,platform:n,path:Xs(n,aE)}}function kh(t,e,r){let n=e.map(()=>{let l,f=new Promise((h,d)=>l={resolve:h,reject:d});return H({promise:f},l)}),i=new pc.StringDecoder("utf8"),s=[],o=0,a=[];function c(l){let f=i.write(l);u(f)}function u(l){let f=l.indexOf(zt);if(f!==-1){let h=l.substr(0,f);s.push(h),r(h,o,a.length),a.push(s.join("")),s.length=0,a.length===e[o]&&(n[o].resolve(a),o++,a=[],o===e.length&&t.off("data",c)),f+1<l.length&&u(l.substr(f+1))}else s.push(l),r(l,o,a.length)}return t.on("data",c),n.map(l=>l.promise)}function cE(t){let e,r=new Promise((c,u)=>e=u),n=[],i=[],s=c=>n.push(c),o=c=>i.push(c);return t.stdout.on("data",s),t.stderr.on("data",o),t.exit.then(({code:c,signal:u})=>{e(`Shell server terminated (code: ${c}, signal: ${u})
${Buffer.concat(n).toString()}
${Buffer.concat(i).toString()}`)},c=>{e(`Shell server failed: ${c&&(c.stack||c.message)}`)}),{unexpectedExit:r,disposeStdioListeners:()=>{t.stdout.off("data",s),t.stderr.off("data",o),n.length=0,i.length=0}}}var Fh=Q(require("events")),mc=class{constructor(e){this.register=e;this.nodeEmitter=new Fh.EventEmitter;this.event=e=>(this.nodeEmitter.on("event",e),this.register&&this.nodeEmitter.listenerCount("event")===1&&this.register.on(),{dispose:()=>{this.register&&this.nodeEmitter.listenerCount("event")===1&&this.register.off(),this.nodeEmitter.off("event",e)}})}fire(e){this.nodeEmitter.emit("event",e)}dispose(){this.nodeEmitter.removeAllListeners()}};var Un=Q(require("path"));function Th(t,e){let r,n=t.platform==="win32",i=ie(H({},t),{get env(){return r||(r=$h(n,t.env))}}),s=fE.bind(void 0,n,i);return t.containerWorkspaceFolder&&(i.containerWorkspaceFolder=jh(s,t.containerWorkspaceFolder)),Qs(s,e)}function Nh(t,e,r,n){let i=t==="win32";return Qs(hE.bind(void 0,i,e,$h(i,r)),n)}function Qs(t,e){if(typeof e=="string")return jh(t,e);if(Array.isArray(e))return e.map(r=>Qs(t,r));if(e&&typeof e=="object"){let r=Object.create(null);return Object.keys(e).forEach(n=>{r[n]=Qs(t,e[n])}),r}return e}var lE=/\$\{(.*?)\}/g;function $h(t,e){if(t){let r=Object.create(null);return Object.keys(e).forEach(n=>{r[n.toLowerCase()]=e[n]}),r}return e}function jh(t,e){return e.replace(lE,uE.bind(void 0,t))}function uE(t,e,r){let n,i=r.split(":");return i.length>1&&(r=i[0],n=i[1]),t(e,r,n)}function fE(t,e,r,n,i){switch(n){case"env":case"localEnv":return Uh(t,e.env,i,r,e.configFile);case"localWorkspaceFolder":return e.localWorkspaceFolder!==void 0?e.localWorkspaceFolder:r;case"localWorkspaceFolderBasename":return e.localWorkspaceFolder!==void 0?(t?Un.win32:Un.posix).basename(e.localWorkspaceFolder):r;case"containerWorkspaceFolder":return e.containerWorkspaceFolder!==void 0?e.containerWorkspaceFolder:r;case"containerWorkspaceFolderBasename":return e.containerWorkspaceFolder!==void 0?Un.posix.basename(e.containerWorkspaceFolder):r;default:return r}}function hE(t,e,r,n,i,s){switch(i){case"containerEnv":return Uh(t,r,s,n,e);default:return n}}function Uh(t,e,r,n,i){if(r){t&&(r=r.toLowerCase());let s=e[r];return typeof s=="string"?s:""}throw new ae({description:`'${n}'${i?` in ${Un.posix.basename(i.path)}`:""} can not be resolved because no environment variable name is given.`})}async function gc(t){return new Promise(e=>setTimeout(e,t))}async function Mh(t){let e='for pid in `cd /proc && ls -d [0-9]*`; do { echo $pid ; readlink /proc/$pid/cwd ; readlink /proc/$pid/ns/mnt ; cat /proc/$pid/stat | tr "\n" " " ; echo ; xargs -0 < /proc/$pid/environ ; xargs -0 < /proc/$pid/cmdline ; } ; echo --- ; done ; readlink /proc/self/ns/mnt 2>/dev/null',{stdout:r}=await t.exec(e,{logOutput:!1}),n=6,i=r.split(`
---
`),s=i.pop().trim();return{processes:i.map(a=>a.split(`
`)).filter(a=>a.length>=n).map(([a,c,u,l,f,h])=>{let d=/.*\) [^ ]* ([^ ]*) ([^ ]*)/.exec(l)||[];return{pid:a,ppid:d[1],pgrp:d[2],cwd:c,mntNS:u,cmd:h,env:f.split(" ").reduce((m,p)=>{let v=p.indexOf("=");return v!==-1&&(m[p.substr(0,v)]=p.substr(v+1)),m},{})}}),mntNS:s}}function Bh(t){let e={};return t.forEach(r=>e[r.pid]={process:r,childProcesses:[]}),t.filter(r=>r.ppid).forEach(r=>{var n;return(n=e[r.ppid])==null?void 0:n.childProcesses.push(e[r.pid])}),e}function vc(t,e="  ",r="  "){return`${r}${t.process.pid}: ${t.process.cmd}
${t.childProcesses.map(n=>vc(n,e,r+e))}`}var Xr;(function(a){a[a.Begin=0]="Begin",a[a.CloningRepository=1]="CloningRepository",a[a.BuildingImage=2]="BuildingImage",a[a.StartingContainer=3]="StartingContainer",a[a.InstallingServer=4]="InstallingServer",a[a.StartingServer=5]="StartingServer",a[a.End=6]="End"})(Xr||(Xr={}));function zh(t,e,r){function n(s){i.fire(s.toString())}let i=new mc({on:()=>process.stdin.on("data",n),off:()=>process.stdin.off("data",n)});return process.stdin.setEncoding("utf8"),{enabled:t,skipNonBlocking:e,output:we(ie(H({},r),{get dimensions(){return r.dimensions},event:s=>r.event(ie(H({},s),{channel:"postCreate"}))})),onDidInput:i.event,done:()=>{}}}var dE="updateContentCommand";async function Gh(t){let{params:e,createdAt:r,startedAt:n,remoteWorkspaceFolder:i,containerUser:s,containerGroup:o,containerEnv:a,remoteExec:c,remotePtyExec:u,remoteExecAsRoot:l,rootShellServer:f}=t,h;if(f&&s==="root"?h=f:h=await Zs(c,e.output,e.sessionId),!a){let A=(await h.exec("echo $PATH")).stdout.trim();a=A?{PATH:A}:{}}s||(s=await pE(h)),!l&&s==="root"&&(l=c);let d=await bE(h),m=await vE(h,s);m||e.output.write(lc(`User ${s} not found in /etc/passwd.`));let p=await gE(a,m),v=await mE(a,m),w=yE(v,e),b;f?b=Promise.resolve(f):s==="root"&&(b=Promise.resolve(h));let E={createdAt:r,startedAt:n,osRelease:d,user:s,gid:o||(m==null?void 0:m.gid),env:a,shell:p,homeFolder:v,userDataFolder:w,remoteWorkspaceFolder:i,remoteExec:c,remotePtyExec:u,remoteExecAsRoot:l,shellServer:h};return(b||l)&&(E.launchRootShellServer=()=>b||(b=Zs(l,e.output))),E}async function pE(t){return(await t.exec("id -un")).stdout.trim()}async function mE(t,e){return t.HOME||e&&e.home||"/root"}async function gE(t,e){return t.SHELL||e&&e.shell||"/bin/sh"}async function vE(t,e){let{stdout:r}=await t.exec("cat /etc/passwd",{logOutput:!1});return wE(r,e)}function wE(t,e){return t.split(/\r?\n/).map(n=>n.split(":")).map(n=>({name:n[0],uid:n[2],gid:n[3],home:n[5],shell:n[6]})).find(n=>n.name===e||n.uid===e)}function yE(t,e){return rr.posix.resolve(t,e.containerDataFolder||".devcontainer")}function Vh(t){return t.containerSystemDataFolder||"/var/devcontainer"}async function eo(t,e,r){await PE(t,e),await AE(t,e);let i=t.computeExtensionHostEnv||t.postCreate.enabled?to(t,e,r):Promise.resolve({});return t.postCreate.enabled&&await yc(t,e,r,i,!1),{remoteEnv:t.computeExtensionHostEnv?await i:{}}}function to(t,e,r){return OE(t,e,r).then(n=>H(H(H({},n),t.remoteEnv),r.remoteEnv?Nh(t.cliHost.platform,r.configFilePath,e.env,r.remoteEnv):{}))}async function yc(t,e,r,n,i){let s=t.postCreate.skipNonBlocking,o=r.waitFor||dE;return s&&o==="initializeCommand"||(await bc(t,e,r,"onCreateCommand",n,!1),s&&o==="onCreateCommand")||(await bc(t,e,r,"updateContentCommand",n,!!t.prebuild),s&&o==="updateContentCommand")?"skipNonBlocking":t.prebuild?"prebuild":(await bc(t,e,r,"postCreateCommand",n,!1),s&&o==="postCreateCommand"?"skipNonBlocking":i?"stopForPersonalization":(await EE(t,e,r,n),s&&o==="postStartCommand"?"skipNonBlocking":(await CE(t,e,r,n),"done")))}async function bE(t){let e="unknown",r="unknown",n="unknown";try{e=(await t.exec("uname -m")).stdout.trim();let{stdout:i}=await t.exec("(cat /etc/os-release || cat /usr/lib/os-release) 2>/dev/null");r=(i.match(/^ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound",n=(i.match(/^VERSION_ID=([^\u001b\r\n]*)/m)||[])[1]||"notfound"}catch(i){console.error(i)}return{hardware:e,id:r,version:n}}async function bc(t,e,r,n,i,s){let o=rr.posix.join(e.userDataFolder,`.${n}Marker`),a=!!e.createdAt&&await Yh(e.shellServer,o,e.createdAt)||s;await Ec(t,e,r,n,i,a)}async function EE(t,e,r,n){let i=rr.posix.join(e.userDataFolder,".postStartCommandMarker"),s=!!e.startedAt&&await Yh(e.shellServer,i,e.startedAt);await Ec(t,e,r,"postStartCommand",n,s)}async function Yh(t,e,r){try{return await t.exec(`mkdir -p '${rr.posix.dirname(e)}' && CONTENT="$(cat '${e}' 2>/dev/null || echo ENOENT)" && [ "\${CONTENT:-${r}}" != '${r}' ] && echo '${r}' > '${e}'`),!0}catch{return!1}}async function CE(t,e,r,n){await Ec(t,e,r,"postAttachCommand",n,!0)}async function Ec({postCreate:t},e,r,n,i,s){let o=r[n];if(s&&o&&(typeof o=="string"?o.trim():o.length)){let a=`Running ${n}...`,c=typeof o=="string"?o:o.join(" "),u=we({event(l){t.output.event(l),l.type==="raw"&&l.text.includes("::endstep::")&&t.output.event({type:"progress",name:a,status:"running",stepDetail:""}),l.type==="raw"&&l.text.includes("::step::")&&t.output.event({type:"progress",name:a,status:"running",stepDetail:`${l.text.split("::step::")[1].split(`\r
`)[0]}`})},get dimensions(){return t.output.dimensions},onDidChangeDimensions:t.output.onDidChangeDimensions},G.Info);try{u.event({type:"progress",name:a,status:"running",stepDetail:c});let l=e.remoteWorkspaceFolder||e.homeFolder;u.raw(`[1mRunning the ${n} from devcontainer.json...[0m\r
\r
`),await Cc(ie(H({},t),{output:u}),e,typeof o=="string"?["/bin/sh","-c",o]:o,l,{remoteEnv:await i,print:"continuous"}),u.raw(`\r
`),u.event({type:"progress",name:a,status:"succeeded"})}catch(l){if(u.event({type:"progress",name:a,status:"failed"}),l&&(l.code===130||l.signal===2))u.raw(`\r
[1m${n} interrupted.[0m\r
\r
`);else throw(l==null?void 0:l.code)&&u.write(Pe(`${n} failed with exit code ${l.code}. Skipping any further user-provided commands.`)),new ae({description:`The ${n} in the devcontainer.json failed.`,originalError:l})}}}async function Kh(t,e){try{return await t.exec(xE(e)),!0}catch{return!1}}function xE(t){return`test ! -f '${t}' && set -o noclobber && mkdir -p '${rr.posix.dirname(t)}' && { > '${t}' ; } 2> /dev/null`}async function Cc(t,{remotePtyExec:e},r,n,i={}){let s=i.print||(i.silent?"off":"end"),o=await e({env:i.remoteEnv,cwd:n,cmd:r[0],args:r.slice(1),output:i.silent?Ai:t.output}),a="",c,u=new Promise(h=>{c=h});o.onData(h=>{a+=h,s==="continuous"&&t.output.raw(h),i.resolveOn&&i.resolveOn.exec(a)&&c()});let l=t.onDidInput&&t.onDidInput(h=>o.write(h)),f=await Promise.race([o.exit,u]);return l&&l.dispose(),s==="end"&&t.output.raw(a),f&&(f.code||f.signal)?Promise.reject({message:`Command failed: ${r.join(" ")}`,cmdOutput:a,code:f.code,signal:f.signal}):{cmdOutput:a}}async function SE(t,{remoteExec:e},r,n,i={}){let s=i.print||(i.silent?"off":"end"),o=await e({env:i.remoteEnv,cwd:n,cmd:r[0],args:r.slice(1),output:i.silent?Ai:t.output}),a=[],c=[],u=new wc.StringDecoder,l=new wc.StringDecoder,f="",h="",d,m,p=new Promise((A,M)=>{d=A,m=M});o.stdout.on("data",A=>{a.push(A);let M=u.write(A);s==="continuous"&&t.output.write(M.replace(/\r?\n/g,`\r
`)),f+=M,i.resolveOn&&i.resolveOn.exec(f)&&d()}),o.stderr.on("data",A=>{c.push(A),h+=l.write(A)}),i.stdin instanceof Buffer?(o.stdin.write(i.stdin,A=>{A&&m(A)}),o.stdin.end()):i.stdin instanceof qh.ReadStream&&i.stdin.pipe(o.stdin);let v=await Promise.race([o.exit,p]),w=Buffer.concat(a),b=Buffer.concat(c);s==="end"&&(t.output.write(f.replace(/\r?\n/g,`\r
`)),t.output.write(Pe(h)));let E=`${f}
${h}`;return v&&(v.code||v.signal)?Promise.reject({message:`Command failed: ${r.join(" ")}`,cmdOutput:E,stdout:w,stderr:b,code:v.code,signal:v.signal}):{cmdOutput:E,stdout:w,stderr:b}}async function PE(t,e){let r=rr.posix.join(Vh(t),".patchEtcEnvironmentMarker");if(t.allowSystemConfigChange&&e.launchRootShellServer&&!await dc(e.shellServer,r)){let n=await e.launchRootShellServer();await Kh(n,r)&&await n.exec(`cat >> /etc/environment <<'etcEnvrionmentEOF'
${Object.keys(e.env).map(i=>`
${i}="${e.env[i]}"`).join("")}
etcEnvrionmentEOF
`)}}async function AE(t,e){let r=rr.posix.join(Vh(t),".patchEtcProfileMarker");if(t.allowSystemConfigChange&&e.launchRootShellServer&&!await dc(e.shellServer,r)){let n=await e.launchRootShellServer();await Kh(n,r)&&await n.exec("sed -i -E 's/((^|\\s)PATH=)([^\\$]*)$/\\1${PATH:-\\3}/g' /etc/profile || true")}}async function OE(t,e,r){let n=await Jh(t,e,r,"cat /proc/self/environ","\0");return n||(t.output.write("userEnvProbe: falling back to printenv"),await Jh(t,e,r,"printenv",`
`)||{})}async function Jh(t,e,r,n,i){var o;let{userEnvProbe:s}=r||{};if(t.output.write(`userEnvProbe: ${s||t.defaultUserEnvProbe}${s?"":" (default)"}`),s||(s=t.defaultUserEnvProbe),s==="none")return{};try{let c=(await(0,Wh.promisify)(Hh.randomBytes)(16)).toString("hex"),u=new RegExp(c+"([^]*)"+c),l=e.shell;t.output.write(`userEnvProbe shell: ${l}`);let f=rr.posix.basename(l),h=`echo -n ${c}; ${n}; echo -n ${c}`,d;/^pwsh(-preview)?$/.test(f)?d=s==="loginInteractiveShell"||s==="loginShell"?["-Login","-Command"]:["-Command"]:d=[s==="loginInteractiveShell"?"-lic":s==="loginShell"?"-lc":s==="interactiveShell"?"-ic":"-c"];let m=we(t.output,G.Trace),p=SE({output:m},{remoteExec:e.remoteExec},[l,...d,h],e.installFolder);Promise.race([p,gc(2e3)]).then(async I=>{if(!I){let F,V=e.shellServer||await Zs(e.remoteExec,t.output);try{({processes:F}=await Mh(V))}finally{e.shellServer||await V.process.terminate()}let k=F.find(O=>O.cmd.startsWith(l)&&O.cmd.indexOf(c)!==-1);if(k){let $=Bh(F)[k.pid];t.output.write(`userEnvProbe is taking longer than 2 seconds. Process tree:
${vc($)}`)}else t.output.write("userEnvProbe is taking longer than 2 seconds. Process not found.")}},()=>{}).catch(I=>t.output.write(Pe(I&&(I.stack||I.message)||"Error reading process tree.")));let v=await Promise.race([p,gc(1e4)]);if(!v)return t.output.write(Pe("userEnvProbe is taking longer than 10 seconds. Avoid waiting for user input in your shell's startup scripts. Continuing.")),{};let w=v.stdout.toString(),b=u.exec(w),E=b?b[1]:"";if(!E)return;let A=E.split(i).reduce((I,F)=>{let V=F.indexOf("=");return V!==-1&&(I[F.substring(0,V)]=F.substring(V+1)),I},{});t.output.write(`userEnvProbe parsed: ${JSON.stringify(A,void 0,"  ")}`,G.Trace),delete A.PWD;let M=A.PATH,R=(o=e.env)==null?void 0:o.PATH,N=!(t.allowSystemConfigChange&&e.launchRootShellServer)&&M&&R;if(N){let I=e.user;A.PATH=RE(M,R,I==="root"||I==="0")}return t.output.write(`userEnvProbe PATHs:
Probe:     ${typeof M=="string"?`'${M}'`:"None"}
Container: ${typeof R=="string"?`'${R}'`:"None"}${N?`
Merged:    ${typeof A.PATH=="string"?`'${A.PATH}'`:"None"}`:""}`),A}catch(a){return t.output.write(Pe(a&&(a.stack||a.message)||"Error reading shell environment.")),{}}}function RE(t,e,r){let n=t.split(":"),i=0;for(let s of e.split(":")){let o=n.indexOf(s);o===-1?(r||!/\/sbin(\/|$)/.test(s))&&n.splice(i++,0,s):i=o+1}return n.join(":")}async function Xh(t){for(let e of t)await(typeof e=="function"?e():e)}async function nr(t,e){return(await xc(t,[e]))[0]}async function xc(t,e){let r=await Zh(t,"container",e);for(let n of r){n.Ports=[];let i=n.NetworkSettings.Ports;for(let s in i){let[o,a]=s.split("/");for(let c of i[s]||[]){let{HostIp:u,HostPort:l}=c;n.Ports.push({IP:u,PrivatePort:parseInt(o),PublicPort:parseInt(l),Type:a})}}}return r}async function Sc(t,e){return(await Zh(t,"image",[e]))[0]}async function Zh(t,e,r){if(!r.length)return[];let n=pt(t),i=await Er(ie(H({},n),{args:(n.args||[]).concat(["inspect","--type",e,...r])}));try{return JSON.parse(i.stdout.toString())}catch(s){throw console.error({stdout:i.stdout.toString(),stderr:i.stderr.toString()}),s}}async function ro(t,e=!1,r=[]){let n=[];e&&n.push("-a");for(let s of r)n.push("--filter",`label=${s}`);return(await dt(t,"ps","-q",...n)).stdout.toString().split(/\r?\n/).filter(s=>!!s)}async function Qh(t,e){let{exec:r,cmd:n,args:i,env:s,output:o}=pt(t),a=[];for(let h in e)for(let d of e[h])a.push("--filter",`${h}=${d}`);let c=await _E(t)?"json":"{{json .}}",u=(i||[]).concat(["events","--format",c,...a]),l=await r({cmd:n,args:u,env:s,output:o}),f=[];return l.stderr.on("data",h=>f.push(h)),l.exit.then(({code:h,signal:d})=>{f.length&&o.write(Pe(Buffer.concat(f).toString())),(h||d&&d!=="SIGKILL")&&o.write(Pe(`Docker events terminated (code: ${h}, signal: ${d}).`))},h=>{o.write(Pe(h&&(h.stack||h.message)))}),l}async function ed(t){try{let r=(await dt(t,"buildx","version")).stdout.toString().match(/(?<major>[0-9]+)\.(?<minor>[0-9]+)\.(?<patch>[0-9]+)/);return r?r[0]:null}catch{return null}}async function dt(t,...e){let r=pt(t);return Er(ie(H({},r),{args:(r.args||[]).concat(e)}))}async function _E(t){if(("cliHost"in t?t.cliHost:t.common.cliHost).platform!=="linux")return!1;try{let{stdout:r}=await dt(t,"-v");return r.toString().toLowerCase().indexOf("podman")!==-1}catch{return!1}}async function nt(t,...e){let r=jt(t);return Di(ie(H({},r),{args:(r.args||[]).concat(e)}))}async function Zr(t,...e){let r=pt(t,"dockerComposeCLI"in t?await t.dockerComposeCLI():void 0);return Er(ie(H({},r),{args:(r.args||[]).concat(e)}))}async function no(t,...e){let r=jt(t,"dockerComposeCLI"in t?await t.dockerComposeCLI():void 0);return Di(ie(H({},r),{args:(r.args||[]).concat(e)}))}function Pc(t,e,r){return async function(n){let{exec:i,cmd:s,args:o,env:a}=pt(t),{argsPrefix:c,args:u}=nd(e,r,n,!1);return i({cmd:s,args:(o||[]).concat(u),env:a,output:rd(n.output,s,c)})}}async function td(t,e,r,n){if(!await n("node-pty"))throw new Error("Missing node-pty");return async function(s){let{ptyExec:o,cmd:a,args:c,env:u}=jt(t),{argsPrefix:l,args:f}=nd(e,r,s,!0);return o({cmd:a,args:(c||[]).concat(f),env:u,output:rd(s.output,a,l)})}}function rd(t,e,r){return IE(t,`Run: ${e} ${(r||[]).join(" ").replace(/\n.*/g,"")}`,"Run in container:")}function IE(t,e,r){let n=new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g");return we(ie(H({},t),{get dimensions(){return t.dimensions},event:s=>t.event("text"in s?ie(H({},s),{text:s.text.replace(n,r)}):s)}))}function nd(t,e,r,n){let{env:i,cwd:s,cmd:o,args:a}=r,c=["exec","-i"];n&&c.push("-t"),e&&c.push("-u",e),i&&Object.keys(i).forEach(l=>c.push("-e",`${l}=${i[l]}`)),s&&c.push("-w",s),c.push(t);let u=c.slice();return c.push(o),a&&c.push(...a),{argsPrefix:u,args:c}}function pt(t,e){return"dockerEnv"in t?{exec:t.common.cliHost.exec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:t.dockerEnv,output:t.common.output}:"cliHost"in t?{exec:t.cliHost.exec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:t.env,output:t.output}:ie(H({},t),{env:t.env})}function jt(t,e){return"dockerEnv"in t?{ptyExec:t.common.cliHost.ptyExec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:t.dockerEnv,output:t.common.output}:"cliHost"in t?{ptyExec:t.cliHost.ptyExec,cmd:e?e.cmd:t.dockerCLI,args:e?e.args:[],env:t.env,output:t.output}:ie(H({},t),{env:t.env})}function id(t){return t.toLowerCase().replace(/[^a-z0-9\._-]+/g,"").replace(/(\.[\._-]|_[\.-]|__[\._-]|-+[\._])[\._-]*/g,(e,r)=>r.substr(0,r.length-1))}function sd(t){return typeof t=="undefined"||t===null}function DE(t){return typeof t=="object"&&t!==null}function LE(t){return Array.isArray(t)?t:sd(t)?[]:[t]}function kE(t,e){var r,n,i,s;if(e)for(s=Object.keys(e),r=0,n=s.length;r<n;r+=1)i=s[r],t[i]=e[i];return t}function FE(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}function TE(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var NE=sd,$E=DE,jE=LE,UE=FE,ME=TE,BE=kE,ke={isNothing:NE,isObject:$E,toArray:jE,repeat:UE,isNegativeZero:ME,extend:BE};function od(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}function Ti(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=od(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Ti.prototype=Object.create(Error.prototype);Ti.prototype.constructor=Ti;Ti.prototype.toString=function(e){return this.name+": "+od(this,e)};var it=Ti;function Ac(t,e,r,n,i){var s="",o="",a=Math.floor(i/2)-1;return n-e>a&&(s=" ... ",e=n-a+s.length),r-n>a&&(o=" ...",r=n+a-o.length),{str:s+t.slice(e,r).replace(/\t/g,"\u2192")+o,pos:n-e+s.length}}function Oc(t,e){return ke.repeat(" ",e-t.length)+t}function qE(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],s,o=-1;s=r.exec(t.buffer);)i.push(s.index),n.push(s.index+s[0].length),t.position<=s.index&&o<0&&(o=n.length-2);o<0&&(o=n.length-1);var a="",c,u,l=Math.min(t.line+e.linesAfter,i.length).toString().length,f=e.maxLength-(e.indent+l+3);for(c=1;c<=e.linesBefore&&!(o-c<0);c++)u=Ac(t.buffer,n[o-c],i[o-c],t.position-(n[o]-n[o-c]),f),a=ke.repeat(" ",e.indent)+Oc((t.line-c+1).toString(),l)+" | "+u.str+`
`+a;for(u=Ac(t.buffer,n[o],i[o],t.position,f),a+=ke.repeat(" ",e.indent)+Oc((t.line+1).toString(),l)+" | "+u.str+`
`,a+=ke.repeat("-",e.indent+l+3+u.pos)+`^
`,c=1;c<=e.linesAfter&&!(o+c>=i.length);c++)u=Ac(t.buffer,n[o+c],i[o+c],t.position-(n[o]-n[o+c]),f),a+=ke.repeat(" ",e.indent)+Oc((t.line+c+1).toString(),l)+" | "+u.str+`
`;return a.replace(/\n$/,"")}var HE=qE,WE=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],zE=["scalar","sequence","mapping"];function GE(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}function VE(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(WE.indexOf(r)===-1)throw new it('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=GE(e.styleAliases||null),zE.indexOf(this.kind)===-1)throw new it('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var ze=VE;function ad(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(s,o){s.tag===n.tag&&s.kind===n.kind&&s.multi===n.multi&&(i=o)}),r[i]=n}),r}function YE(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}function Rc(t){return this.extend(t)}Rc.prototype.extend=function(e){var r=[],n=[];if(e instanceof ze)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new it("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(s){if(!(s instanceof ze))throw new it("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new it("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new it("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(s){if(!(s instanceof ze))throw new it("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(Rc.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=ad(i,"implicit"),i.compiledExplicit=ad(i,"explicit"),i.compiledTypeMap=YE(i.compiledImplicit,i.compiledExplicit),i};var KE=Rc,JE=new ze("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),XE=new ze("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),ZE=new ze("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),QE=new KE({explicit:[JE,XE,ZE]});function eC(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function tC(){return null}function rC(t){return t===null}var nC=new ze("tag:yaml.org,2002:null",{kind:"scalar",resolve:eC,construct:tC,predicate:rC,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function iC(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function sC(t){return t==="true"||t==="True"||t==="TRUE"}function oC(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var aC=new ze("tag:yaml.org,2002:bool",{kind:"scalar",resolve:iC,construct:sC,predicate:oC,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function cC(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function lC(t){return 48<=t&&t<=55}function uC(t){return 48<=t&&t<=57}function fC(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!cC(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!lC(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!uC(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function hC(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}function dC(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1==0&&!ke.isNegativeZero(t)}var pC=new ze("tag:yaml.org,2002:int",{kind:"scalar",resolve:fC,construct:hC,predicate:dC,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),mC=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function gC(t){return!(t===null||!mC.test(t)||t[t.length-1]==="_")}function vC(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}var wC=/^[-+]?[0-9]+e/;function yC(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(ke.isNegativeZero(t))return"-0.0";return r=t.toString(10),wC.test(r)?r.replace("e",".e"):r}function bC(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!=0||ke.isNegativeZero(t))}var EC=new ze("tag:yaml.org,2002:float",{kind:"scalar",resolve:gC,construct:vC,predicate:bC,represent:yC,defaultStyle:"lowercase"}),CC=QE.extend({implicit:[nC,aC,pC,EC]}),xC=CC,cd=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),ld=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function SC(t){return t===null?!1:cd.exec(t)!==null||ld.exec(t)!==null}function PC(t){var e,r,n,i,s,o,a,c=0,u=null,l,f,h;if(e=cd.exec(t),e===null&&(e=ld.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(s=+e[4],o=+e[5],a=+e[6],e[7]){for(c=e[7].slice(0,3);c.length<3;)c+="0";c=+c}return e[9]&&(l=+e[10],f=+(e[11]||0),u=(l*60+f)*6e4,e[9]==="-"&&(u=-u)),h=new Date(Date.UTC(r,n,i,s,o,a,c)),u&&h.setTime(h.getTime()-u),h}function AC(t){return t.toISOString()}var OC=new ze("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:SC,construct:PC,instanceOf:Date,represent:AC});function RC(t){return t==="<<"||t===null}var _C=new ze("tag:yaml.org,2002:merge",{kind:"scalar",resolve:RC}),_c=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function IC(t){if(t===null)return!1;var e,r,n=0,i=t.length,s=_c;for(r=0;r<i;r++)if(e=s.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8==0}function DC(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,s=_c,o=0,a=[];for(e=0;e<i;e++)e%4==0&&e&&(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)),o=o<<6|s.indexOf(n.charAt(e));return r=i%4*6,r===0?(a.push(o>>16&255),a.push(o>>8&255),a.push(o&255)):r===18?(a.push(o>>10&255),a.push(o>>2&255)):r===12&&a.push(o>>4&255),new Uint8Array(a)}function LC(t){var e="",r=0,n,i,s=t.length,o=_c;for(n=0;n<s;n++)n%3==0&&n&&(e+=o[r>>18&63],e+=o[r>>12&63],e+=o[r>>6&63],e+=o[r&63]),r=(r<<8)+t[n];return i=s%3,i===0?(e+=o[r>>18&63],e+=o[r>>12&63],e+=o[r>>6&63],e+=o[r&63]):i===2?(e+=o[r>>10&63],e+=o[r>>4&63],e+=o[r<<2&63],e+=o[64]):i===1&&(e+=o[r>>2&63],e+=o[r<<4&63],e+=o[64],e+=o[64]),e}function kC(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var FC=new ze("tag:yaml.org,2002:binary",{kind:"scalar",resolve:IC,construct:DC,predicate:kC,represent:LC}),TC=Object.prototype.hasOwnProperty,NC=Object.prototype.toString;function $C(t){if(t===null)return!0;var e=[],r,n,i,s,o,a=t;for(r=0,n=a.length;r<n;r+=1){if(i=a[r],o=!1,NC.call(i)!=="[object Object]")return!1;for(s in i)if(TC.call(i,s))if(!o)o=!0;else return!1;if(!o)return!1;if(e.indexOf(s)===-1)e.push(s);else return!1}return!0}function jC(t){return t!==null?t:[]}var UC=new ze("tag:yaml.org,2002:omap",{kind:"sequence",resolve:$C,construct:jC}),MC=Object.prototype.toString;function BC(t){if(t===null)return!0;var e,r,n,i,s,o=t;for(s=new Array(o.length),e=0,r=o.length;e<r;e+=1){if(n=o[e],MC.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;s[e]=[i[0],n[i[0]]]}return!0}function qC(t){if(t===null)return[];var e,r,n,i,s,o=t;for(s=new Array(o.length),e=0,r=o.length;e<r;e+=1)n=o[e],i=Object.keys(n),s[e]=[i[0],n[i[0]]];return s}var HC=new ze("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:BC,construct:qC}),WC=Object.prototype.hasOwnProperty;function zC(t){if(t===null)return!0;var e,r=t;for(e in r)if(WC.call(r,e)&&r[e]!==null)return!1;return!0}function GC(t){return t!==null?t:{}}var VC=new ze("tag:yaml.org,2002:set",{kind:"mapping",resolve:zC,construct:GC}),ud=xC.extend({implicit:[OC,_C],explicit:[FC,UC,HC,VC]}),Cr=Object.prototype.hasOwnProperty,io=1,fd=2,hd=3,so=4,Ic=1,YC=2,dd=3,KC=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,JC=/[\x85\u2028\u2029]/,XC=/[,\[\]\{\}]/,pd=/^(?:!|!!|![a-z\-]+!)$/i,md=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function gd(t){return Object.prototype.toString.call(t)}function Gt(t){return t===10||t===13}function Qr(t){return t===9||t===32}function st(t){return t===9||t===32||t===10||t===13}function Mn(t){return t===44||t===91||t===93||t===123||t===125}function ZC(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function QC(t){return t===120?2:t===117?4:t===85?8:0}function e0(t){return 48<=t&&t<=57?t-48:-1}function vd(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function t0(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var wd=new Array(256),yd=new Array(256);for(en=0;en<256;en++)wd[en]=vd(en)?1:0,yd[en]=vd(en);var en;function r0(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||ud,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function bd(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=HE(r),new it(e,r)}function ne(t,e){throw bd(t,e)}function oo(t,e){t.onWarning&&t.onWarning.call(null,bd(t,e))}var Ed={YAML:function(e,r,n){var i,s,o;e.version!==null&&ne(e,"duplication of %YAML directive"),n.length!==1&&ne(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&ne(e,"ill-formed argument of the YAML directive"),s=parseInt(i[1],10),o=parseInt(i[2],10),s!==1&&ne(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=o<2,o!==1&&o!==2&&oo(e,"unsupported YAML version of the document")},TAG:function(e,r,n){var i,s;n.length!==2&&ne(e,"TAG directive accepts exactly two arguments"),i=n[0],s=n[1],pd.test(i)||ne(e,"ill-formed tag handle (first argument) of the TAG directive"),Cr.call(e.tagMap,i)&&ne(e,'there is a previously declared suffix for "'+i+'" tag handle'),md.test(s)||ne(e,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{ne(e,"tag prefix is malformed: "+s)}e.tagMap[i]=s}};function xr(t,e,r,n){var i,s,o,a;if(e<r){if(a=t.input.slice(e,r),n)for(i=0,s=a.length;i<s;i+=1)o=a.charCodeAt(i),o===9||32<=o&&o<=1114111||ne(t,"expected valid JSON character");else KC.test(a)&&ne(t,"the stream contains non-printable characters");t.result+=a}}function Cd(t,e,r,n){var i,s,o,a;for(ke.isObject(r)||ne(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),o=0,a=i.length;o<a;o+=1)s=i[o],Cr.call(e,s)||(e[s]=r[s],n[s]=!0)}function Bn(t,e,r,n,i,s,o,a,c){var u,l;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),u=0,l=i.length;u<l;u+=1)Array.isArray(i[u])&&ne(t,"nested arrays are not supported inside keys"),typeof i=="object"&&gd(i[u])==="[object Object]"&&(i[u]="[object Object]");if(typeof i=="object"&&gd(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(u=0,l=s.length;u<l;u+=1)Cd(t,e,s[u],r);else Cd(t,e,s,r);else!t.json&&!Cr.call(r,i)&&Cr.call(e,i)&&(t.line=o||t.line,t.lineStart=a||t.lineStart,t.position=c||t.position,ne(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:s}):e[i]=s,delete r[i];return e}function Dc(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):ne(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function Ie(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;Qr(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(Gt(i))for(Dc(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&oo(t,"deficient indentation"),n}function ao(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||st(r)))}function Lc(t,e){e===1?t.result+=" ":e>1&&(t.result+=ke.repeat(`
`,e-1))}function n0(t,e,r){var n,i,s,o,a,c,u,l,f=t.kind,h=t.result,d;if(d=t.input.charCodeAt(t.position),st(d)||Mn(d)||d===35||d===38||d===42||d===33||d===124||d===62||d===39||d===34||d===37||d===64||d===96||(d===63||d===45)&&(i=t.input.charCodeAt(t.position+1),st(i)||r&&Mn(i)))return!1;for(t.kind="scalar",t.result="",s=o=t.position,a=!1;d!==0;){if(d===58){if(i=t.input.charCodeAt(t.position+1),st(i)||r&&Mn(i))break}else if(d===35){if(n=t.input.charCodeAt(t.position-1),st(n))break}else{if(t.position===t.lineStart&&ao(t)||r&&Mn(d))break;if(Gt(d))if(c=t.line,u=t.lineStart,l=t.lineIndent,Ie(t,!1,-1),t.lineIndent>=e){a=!0,d=t.input.charCodeAt(t.position);continue}else{t.position=o,t.line=c,t.lineStart=u,t.lineIndent=l;break}}a&&(xr(t,s,o,!1),Lc(t,t.line-c),s=o=t.position,a=!1),Qr(d)||(o=t.position+1),d=t.input.charCodeAt(++t.position)}return xr(t,s,o,!1),t.result?!0:(t.kind=f,t.result=h,!1)}function i0(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(xr(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else Gt(r)?(xr(t,n,i,!0),Lc(t,Ie(t,!1,e)),n=i=t.position):t.position===t.lineStart&&ao(t)?ne(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);ne(t,"unexpected end of the stream within a single quoted scalar")}function s0(t,e){var r,n,i,s,o,a;if(a=t.input.charCodeAt(t.position),a!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(a=t.input.charCodeAt(t.position))!==0;){if(a===34)return xr(t,r,t.position,!0),t.position++,!0;if(a===92){if(xr(t,r,t.position,!0),a=t.input.charCodeAt(++t.position),Gt(a))Ie(t,!1,e);else if(a<256&&wd[a])t.result+=yd[a],t.position++;else if((o=QC(a))>0){for(i=o,s=0;i>0;i--)a=t.input.charCodeAt(++t.position),(o=ZC(a))>=0?s=(s<<4)+o:ne(t,"expected hexadecimal character");t.result+=t0(s),t.position++}else ne(t,"unknown escape sequence");r=n=t.position}else Gt(a)?(xr(t,r,n,!0),Lc(t,Ie(t,!1,e)),r=n=t.position):t.position===t.lineStart&&ao(t)?ne(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}ne(t,"unexpected end of the stream within a double quoted scalar")}function o0(t,e){var r=!0,n,i,s,o=t.tag,a,c=t.anchor,u,l,f,h,d,m=Object.create(null),p,v,w,b;if(b=t.input.charCodeAt(t.position),b===91)l=93,d=!1,a=[];else if(b===123)l=125,d=!0,a={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=a),b=t.input.charCodeAt(++t.position);b!==0;){if(Ie(t,!0,e),b=t.input.charCodeAt(t.position),b===l)return t.position++,t.tag=o,t.anchor=c,t.kind=d?"mapping":"sequence",t.result=a,!0;r?b===44&&ne(t,"expected the node content, but found ','"):ne(t,"missed comma between flow collection entries"),v=p=w=null,f=h=!1,b===63&&(u=t.input.charCodeAt(t.position+1),st(u)&&(f=h=!0,t.position++,Ie(t,!0,e))),n=t.line,i=t.lineStart,s=t.position,qn(t,e,io,!1,!0),v=t.tag,p=t.result,Ie(t,!0,e),b=t.input.charCodeAt(t.position),(h||t.line===n)&&b===58&&(f=!0,b=t.input.charCodeAt(++t.position),Ie(t,!0,e),qn(t,e,io,!1,!0),w=t.result),d?Bn(t,a,m,v,p,w,n,i,s):f?a.push(Bn(t,null,m,v,p,w,n,i,s)):a.push(p),Ie(t,!0,e),b=t.input.charCodeAt(t.position),b===44?(r=!0,b=t.input.charCodeAt(++t.position)):r=!1}ne(t,"unexpected end of the stream within a flow collection")}function a0(t,e){var r,n,i=Ic,s=!1,o=!1,a=e,c=0,u=!1,l,f;if(f=t.input.charCodeAt(t.position),f===124)n=!1;else if(f===62)n=!0;else return!1;for(t.kind="scalar",t.result="";f!==0;)if(f=t.input.charCodeAt(++t.position),f===43||f===45)Ic===i?i=f===43?dd:YC:ne(t,"repeat of a chomping mode identifier");else if((l=e0(f))>=0)l===0?ne(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?ne(t,"repeat of an indentation width identifier"):(a=e+l-1,o=!0);else break;if(Qr(f)){do f=t.input.charCodeAt(++t.position);while(Qr(f));if(f===35)do f=t.input.charCodeAt(++t.position);while(!Gt(f)&&f!==0)}for(;f!==0;){for(Dc(t),t.lineIndent=0,f=t.input.charCodeAt(t.position);(!o||t.lineIndent<a)&&f===32;)t.lineIndent++,f=t.input.charCodeAt(++t.position);if(!o&&t.lineIndent>a&&(a=t.lineIndent),Gt(f)){c++;continue}if(t.lineIndent<a){i===dd?t.result+=ke.repeat(`
`,s?1+c:c):i===Ic&&s&&(t.result+=`
`);break}for(n?Qr(f)?(u=!0,t.result+=ke.repeat(`
`,s?1+c:c)):u?(u=!1,t.result+=ke.repeat(`
`,c+1)):c===0?s&&(t.result+=" "):t.result+=ke.repeat(`
`,c):t.result+=ke.repeat(`
`,s?1+c:c),s=!0,o=!0,c=0,r=t.position;!Gt(f)&&f!==0;)f=t.input.charCodeAt(++t.position);xr(t,r,t.position,!1)}return!0}function xd(t,e){var r,n=t.tag,i=t.anchor,s=[],o,a=!1,c;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=s),c=t.input.charCodeAt(t.position);c!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,ne(t,"tab characters must not be used in indentation")),!(c!==45||(o=t.input.charCodeAt(t.position+1),!st(o))));){if(a=!0,t.position++,Ie(t,!0,-1)&&t.lineIndent<=e){s.push(null),c=t.input.charCodeAt(t.position);continue}if(r=t.line,qn(t,e,hd,!1,!0),s.push(t.result),Ie(t,!0,-1),c=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&c!==0)ne(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return a?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=s,!0):!1}function c0(t,e,r){var n,i,s,o,a,c,u=t.tag,l=t.anchor,f={},h=Object.create(null),d=null,m=null,p=null,v=!1,w=!1,b;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=f),b=t.input.charCodeAt(t.position);b!==0;){if(!v&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,ne(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),s=t.line,(b===63||b===58)&&st(n))b===63?(v&&(Bn(t,f,h,d,m,null,o,a,c),d=m=p=null),w=!0,v=!0,i=!0):v?(v=!1,i=!0):ne(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,b=n;else{if(o=t.line,a=t.lineStart,c=t.position,!qn(t,r,fd,!1,!0))break;if(t.line===s){for(b=t.input.charCodeAt(t.position);Qr(b);)b=t.input.charCodeAt(++t.position);if(b===58)b=t.input.charCodeAt(++t.position),st(b)||ne(t,"a whitespace character is expected after the key-value separator within a block mapping"),v&&(Bn(t,f,h,d,m,null,o,a,c),d=m=p=null),w=!0,v=!1,i=!1,d=t.tag,m=t.result;else if(w)ne(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=u,t.anchor=l,!0}else if(w)ne(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=u,t.anchor=l,!0}if((t.line===s||t.lineIndent>e)&&(v&&(o=t.line,a=t.lineStart,c=t.position),qn(t,e,so,!0,i)&&(v?m=t.result:p=t.result),v||(Bn(t,f,h,d,m,p,o,a,c),d=m=p=null),Ie(t,!0,-1),b=t.input.charCodeAt(t.position)),(t.line===s||t.lineIndent>e)&&b!==0)ne(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return v&&Bn(t,f,h,d,m,null,o,a,c),w&&(t.tag=u,t.anchor=l,t.kind="mapping",t.result=f),w}function l0(t){var e,r=!1,n=!1,i,s,o;if(o=t.input.charCodeAt(t.position),o!==33)return!1;if(t.tag!==null&&ne(t,"duplication of a tag property"),o=t.input.charCodeAt(++t.position),o===60?(r=!0,o=t.input.charCodeAt(++t.position)):o===33?(n=!0,i="!!",o=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do o=t.input.charCodeAt(++t.position);while(o!==0&&o!==62);t.position<t.length?(s=t.input.slice(e,t.position),o=t.input.charCodeAt(++t.position)):ne(t,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!st(o);)o===33&&(n?ne(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),pd.test(i)||ne(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),o=t.input.charCodeAt(++t.position);s=t.input.slice(e,t.position),XC.test(s)&&ne(t,"tag suffix cannot contain flow indicator characters")}s&&!md.test(s)&&ne(t,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{ne(t,"tag name is malformed: "+s)}return r?t.tag=s:Cr.call(t.tagMap,i)?t.tag=t.tagMap[i]+s:i==="!"?t.tag="!"+s:i==="!!"?t.tag="tag:yaml.org,2002:"+s:ne(t,'undeclared tag handle "'+i+'"'),!0}function u0(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&ne(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!st(r)&&!Mn(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&ne(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function f0(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!st(n)&&!Mn(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&ne(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),Cr.call(t.anchorMap,r)||ne(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],Ie(t,!0,-1),!0}function qn(t,e,r,n,i){var s,o,a,c=1,u=!1,l=!1,f,h,d,m,p,v;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,s=o=a=so===r||hd===r,n&&Ie(t,!0,-1)&&(u=!0,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)),c===1)for(;l0(t)||u0(t);)Ie(t,!0,-1)?(u=!0,a=s,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)):a=!1;if(a&&(a=u||i),(c===1||so===r)&&(io===r||fd===r?p=e:p=e+1,v=t.position-t.lineStart,c===1?a&&(xd(t,v)||c0(t,v,p))||o0(t,p)?l=!0:(o&&a0(t,p)||i0(t,p)||s0(t,p)?l=!0:f0(t)?(l=!0,(t.tag!==null||t.anchor!==null)&&ne(t,"alias node should not have any properties")):n0(t,p,io===r)&&(l=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):c===0&&(l=a&&xd(t,v))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&ne(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),f=0,h=t.implicitTypes.length;f<h;f+=1)if(m=t.implicitTypes[f],m.resolve(t.result)){t.result=m.construct(t.result),t.tag=m.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(Cr.call(t.typeMap[t.kind||"fallback"],t.tag))m=t.typeMap[t.kind||"fallback"][t.tag];else for(m=null,d=t.typeMap.multi[t.kind||"fallback"],f=0,h=d.length;f<h;f+=1)if(t.tag.slice(0,d[f].tag.length)===d[f].tag){m=d[f];break}m||ne(t,"unknown tag !<"+t.tag+">"),t.result!==null&&m.kind!==t.kind&&ne(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+m.kind+'", not "'+t.kind+'"'),m.resolve(t.result,t.tag)?(t.result=m.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):ne(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||l}function h0(t){var e=t.position,r,n,i,s=!1,o;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(o=t.input.charCodeAt(t.position))!==0&&(Ie(t,!0,-1),o=t.input.charCodeAt(t.position),!(t.lineIndent>0||o!==37));){for(s=!0,o=t.input.charCodeAt(++t.position),r=t.position;o!==0&&!st(o);)o=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&ne(t,"directive name must not be less than one character in length");o!==0;){for(;Qr(o);)o=t.input.charCodeAt(++t.position);if(o===35){do o=t.input.charCodeAt(++t.position);while(o!==0&&!Gt(o));break}if(Gt(o))break;for(r=t.position;o!==0&&!st(o);)o=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}o!==0&&Dc(t),Cr.call(Ed,n)?Ed[n](t,n,i):oo(t,'unknown document directive "'+n+'"')}if(Ie(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,Ie(t,!0,-1)):s&&ne(t,"directives end mark is expected"),qn(t,t.lineIndent-1,so,!1,!0),Ie(t,!0,-1),t.checkLineBreaks&&JC.test(t.input.slice(e,t.position))&&oo(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&ao(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,Ie(t,!0,-1));return}if(t.position<t.length-1)ne(t,"end of the stream or a document separator is expected");else return}function Sd(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new r0(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,ne(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)h0(r);return r.documents}function d0(t,e,r){e!==null&&typeof e=="object"&&typeof r=="undefined"&&(r=e,e=null);var n=Sd(t,r);if(typeof e!="function")return n;for(var i=0,s=n.length;i<s;i+=1)e(n[i])}function p0(t,e){var r=Sd(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new it("expected a single document in the stream, but found more")}}var m0=d0,g0=p0,Pd={loadAll:m0,load:g0},Ad=Object.prototype.toString,Od=Object.prototype.hasOwnProperty,kc=65279,v0=9,Ni=10,w0=13,y0=32,b0=33,E0=34,Fc=35,C0=37,x0=38,S0=39,P0=42,Rd=44,A0=45,co=58,O0=61,R0=62,_0=63,I0=64,_d=91,Id=93,D0=96,Dd=123,L0=124,Ld=125,Ge={};Ge[0]="\\0";Ge[7]="\\a";Ge[8]="\\b";Ge[9]="\\t";Ge[10]="\\n";Ge[11]="\\v";Ge[12]="\\f";Ge[13]="\\r";Ge[27]="\\e";Ge[34]='\\"';Ge[92]="\\\\";Ge[133]="\\N";Ge[160]="\\_";Ge[8232]="\\L";Ge[8233]="\\P";var k0=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],F0=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function T0(t,e){var r,n,i,s,o,a,c;if(e===null)return{};for(r={},n=Object.keys(e),i=0,s=n.length;i<s;i+=1)o=n[i],a=String(e[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),c=t.compiledTypeMap.fallback[o],c&&Od.call(c.styleAliases,a)&&(a=c.styleAliases[a]),r[o]=a;return r}function N0(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new it("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+ke.repeat("0",n-e.length)+e}var $0=1,$i=2;function j0(t){this.schema=t.schema||ud,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=ke.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=T0(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?$i:$0,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function kd(t,e){for(var r=ke.repeat(" ",e),n=0,i=-1,s="",o,a=t.length;n<a;)i=t.indexOf(`
`,n),i===-1?(o=t.slice(n),n=a):(o=t.slice(n,i+1),n=i+1),o.length&&o!==`
`&&(s+=r),s+=o;return s}function Tc(t,e){return`
`+ke.repeat(" ",t.indent*e)}function U0(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}function lo(t){return t===y0||t===v0}function ji(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==kc||65536<=t&&t<=1114111}function Fd(t){return ji(t)&&t!==kc&&t!==w0&&t!==Ni}function Td(t,e,r){var n=Fd(t),i=n&&!lo(t);return(r?n:n&&t!==Rd&&t!==_d&&t!==Id&&t!==Dd&&t!==Ld)&&t!==Fc&&!(e===co&&!i)||Fd(e)&&!lo(e)&&t===Fc||e===co&&i}function M0(t){return ji(t)&&t!==kc&&!lo(t)&&t!==A0&&t!==_0&&t!==co&&t!==Rd&&t!==_d&&t!==Id&&t!==Dd&&t!==Ld&&t!==Fc&&t!==x0&&t!==P0&&t!==b0&&t!==L0&&t!==O0&&t!==R0&&t!==S0&&t!==E0&&t!==C0&&t!==I0&&t!==D0}function B0(t){return!lo(t)&&t!==co}function Ui(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function Nd(t){var e=/^\n* /;return e.test(t)}var $d=1,Nc=2,jd=3,Ud=4,Hn=5;function q0(t,e,r,n,i,s,o,a){var c,u=0,l=null,f=!1,h=!1,d=n!==-1,m=-1,p=M0(Ui(t,0))&&B0(Ui(t,t.length-1));if(e||o)for(c=0;c<t.length;u>=65536?c+=2:c++){if(u=Ui(t,c),!ji(u))return Hn;p=p&&Td(u,l,a),l=u}else{for(c=0;c<t.length;u>=65536?c+=2:c++){if(u=Ui(t,c),u===Ni)f=!0,d&&(h=h||c-m-1>n&&t[m+1]!==" ",m=c);else if(!ji(u))return Hn;p=p&&Td(u,l,a),l=u}h=h||d&&c-m-1>n&&t[m+1]!==" "}return!f&&!h?p&&!o&&!i(t)?$d:s===$i?Hn:Nc:r>9&&Nd(t)?Hn:o?s===$i?Hn:Nc:h?Ud:jd}function H0(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===$i?'""':"''";if(!t.noCompatMode&&(k0.indexOf(e)!==-1||F0.test(e)))return t.quotingType===$i?'"'+e+'"':"'"+e+"'";var s=t.indent*Math.max(1,r),o=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-s),a=n||t.flowLevel>-1&&r>=t.flowLevel;function c(u){return U0(t,u)}switch(q0(e,a,t.indent,o,c,t.quotingType,t.forceQuotes&&!n,i)){case $d:return e;case Nc:return"'"+e.replace(/'/g,"''")+"'";case jd:return"|"+Md(e,t.indent)+Bd(kd(e,s));case Ud:return">"+Md(e,t.indent)+Bd(kd(W0(e,o),s));case Hn:return'"'+z0(e)+'"';default:throw new it("impossible error: invalid scalar style")}}()}function Md(t,e){var r=Nd(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),s=i?"+":n?"":"-";return r+s+`
`}function Bd(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function W0(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var u=t.indexOf(`
`);return u=u!==-1?u:t.length,r.lastIndex=u,qd(t.slice(0,u),e)}(),i=t[0]===`
`||t[0]===" ",s,o;o=r.exec(t);){var a=o[1],c=o[2];s=c[0]===" ",n+=a+(!i&&!s&&c!==""?`
`:"")+qd(c,e),i=s}return n}function qd(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,s,o=0,a=0,c="";n=r.exec(t);)a=n.index,a-i>e&&(s=o>i?o:a,c+=`
`+t.slice(i,s),i=s+1),o=a;return c+=`
`,t.length-i>e&&o>i?c+=t.slice(i,o)+`
`+t.slice(o+1):c+=t.slice(i),c.slice(1)}function z0(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=Ui(t,i),n=Ge[r],!n&&ji(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||N0(r);return e}function G0(t,e,r){var n="",i=t.tag,s,o,a;for(s=0,o=r.length;s<o;s+=1)a=r[s],t.replacer&&(a=t.replacer.call(r,String(s),a)),(ir(t,e,a,!1,!1)||typeof a=="undefined"&&ir(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}function Hd(t,e,r,n){var i="",s=t.tag,o,a,c;for(o=0,a=r.length;o<a;o+=1)c=r[o],t.replacer&&(c=t.replacer.call(r,String(o),c)),(ir(t,e+1,c,!0,!0,!1,!0)||typeof c=="undefined"&&ir(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=Tc(t,e)),t.dump&&Ni===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=s,t.dump=i||"[]"}function V0(t,e,r){var n="",i=t.tag,s=Object.keys(r),o,a,c,u,l;for(o=0,a=s.length;o<a;o+=1)l="",n!==""&&(l+=", "),t.condenseFlow&&(l+='"'),c=s[o],u=r[c],t.replacer&&(u=t.replacer.call(r,c,u)),!!ir(t,e,c,!1,!1)&&(t.dump.length>1024&&(l+="? "),l+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),!!ir(t,e,u,!1,!1)&&(l+=t.dump,n+=l));t.tag=i,t.dump="{"+n+"}"}function Y0(t,e,r,n){var i="",s=t.tag,o=Object.keys(r),a,c,u,l,f,h;if(t.sortKeys===!0)o.sort();else if(typeof t.sortKeys=="function")o.sort(t.sortKeys);else if(t.sortKeys)throw new it("sortKeys must be a boolean or a function");for(a=0,c=o.length;a<c;a+=1)h="",(!n||i!=="")&&(h+=Tc(t,e)),u=o[a],l=r[u],t.replacer&&(l=t.replacer.call(r,u,l)),!!ir(t,e+1,u,!0,!0,!0)&&(f=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,f&&(t.dump&&Ni===t.dump.charCodeAt(0)?h+="?":h+="? "),h+=t.dump,f&&(h+=Tc(t,e)),!!ir(t,e+1,l,!0,f)&&(t.dump&&Ni===t.dump.charCodeAt(0)?h+=":":h+=": ",h+=t.dump,i+=h));t.tag=s,t.dump=i||"{}"}function Wd(t,e,r){var n,i,s,o,a,c;for(i=r?t.explicitTypes:t.implicitTypes,s=0,o=i.length;s<o;s+=1)if(a=i[s],(a.instanceOf||a.predicate)&&(!a.instanceOf||typeof e=="object"&&e instanceof a.instanceOf)&&(!a.predicate||a.predicate(e))){if(r?a.multi&&a.representName?t.tag=a.representName(e):t.tag=a.tag:t.tag="?",a.represent){if(c=t.styleMap[a.tag]||a.defaultStyle,Ad.call(a.represent)==="[object Function]")n=a.represent(e,c);else if(Od.call(a.represent,c))n=a.represent[c](e,c);else throw new it("!<"+a.tag+'> tag resolver accepts not "'+c+'" style');t.dump=n}return!0}return!1}function ir(t,e,r,n,i,s,o){t.tag=null,t.dump=r,Wd(t,r,!1)||Wd(t,r,!0);var a=Ad.call(t.dump),c=n,u;n&&(n=t.flowLevel<0||t.flowLevel>e);var l=a==="[object Object]"||a==="[object Array]",f,h;if(l&&(f=t.duplicates.indexOf(r),h=f!==-1),(t.tag!==null&&t.tag!=="?"||h||t.indent!==2&&e>0)&&(i=!1),h&&t.usedDuplicates[f])t.dump="*ref_"+f;else{if(l&&h&&!t.usedDuplicates[f]&&(t.usedDuplicates[f]=!0),a==="[object Object]")n&&Object.keys(t.dump).length!==0?(Y0(t,e,t.dump,i),h&&(t.dump="&ref_"+f+t.dump)):(V0(t,e,t.dump),h&&(t.dump="&ref_"+f+" "+t.dump));else if(a==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!o&&e>0?Hd(t,e-1,t.dump,i):Hd(t,e,t.dump,i),h&&(t.dump="&ref_"+f+t.dump)):(G0(t,e,t.dump),h&&(t.dump="&ref_"+f+" "+t.dump));else if(a==="[object String]")t.tag!=="?"&&H0(t,t.dump,e,s,c);else{if(a==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new it("unacceptable kind of an object to dump "+a)}t.tag!==null&&t.tag!=="?"&&(u=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",t.dump=u+" "+t.dump)}return!0}function K0(t,e){var r=[],n=[],i,s;for($c(t,r,n),i=0,s=n.length;i<s;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(s)}function $c(t,e,r){var n,i,s;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,s=t.length;i<s;i+=1)$c(t[i],e,r);else for(n=Object.keys(t),i=0,s=n.length;i<s;i+=1)$c(t[n[i]],e,r)}function J0(t,e){e=e||{};var r=new j0(e);r.noRefs||K0(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),ir(r,0,n,!0,!0)?r.dump+`
`:""}var X0=J0,Z0={dump:X0};function jc(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var uo=Pd.load,pD=Pd.loadAll,mD=Z0.dump;var gD=jc("safeLoad","load"),vD=jc("safeLoadAll","loadAll"),wD=jc("safeDump","dump");var $u=Q(Gd());var go=Q(require("path"));var ep=Q(require("path"));var Jd=Q(require("crypto"));"use strict";function fo(t,e){e===void 0&&(e=!1);var r=t.length,n=0,i="",s=0,o=16,a=0,c=0,u=0,l=0,f=0;function h(E,A){for(var M=0,R=0;M<E||!A;){var N=t.charCodeAt(n);if(N>=48&&N<=57)R=R*16+N-48;else if(N>=65&&N<=70)R=R*16+N-65+10;else if(N>=97&&N<=102)R=R*16+N-97+10;else break;n++,M++}return M<E&&(R=-1),R}function d(E){n=E,i="",s=0,o=16,f=0}function m(){var E=n;if(t.charCodeAt(n)===48)n++;else for(n++;n<t.length&&Wn(t.charCodeAt(n));)n++;if(n<t.length&&t.charCodeAt(n)===46)if(n++,n<t.length&&Wn(t.charCodeAt(n)))for(n++;n<t.length&&Wn(t.charCodeAt(n));)n++;else return f=3,t.substring(E,n);var A=n;if(n<t.length&&(t.charCodeAt(n)===69||t.charCodeAt(n)===101))if(n++,(n<t.length&&t.charCodeAt(n)===43||t.charCodeAt(n)===45)&&n++,n<t.length&&Wn(t.charCodeAt(n))){for(n++;n<t.length&&Wn(t.charCodeAt(n));)n++;A=n}else f=3;return t.substring(E,A)}function p(){for(var E="",A=n;;){if(n>=r){E+=t.substring(A,n),f=2;break}var M=t.charCodeAt(n);if(M===34){E+=t.substring(A,n),n++;break}if(M===92){if(E+=t.substring(A,n),n++,n>=r){f=2;break}var R=t.charCodeAt(n++);switch(R){case 34:E+='"';break;case 92:E+="\\";break;case 47:E+="/";break;case 98:E+="\b";break;case 102:E+="\f";break;case 110:E+=`
`;break;case 114:E+="\r";break;case 116:E+="	";break;case 117:var N=h(4,!0);N>=0?E+=String.fromCharCode(N):f=4;break;default:f=5}A=n;continue}if(M>=0&&M<=31)if(Mi(M)){E+=t.substring(A,n),f=2;break}else f=6;n++}return E}function v(){if(i="",f=0,s=n,c=a,l=u,n>=r)return s=r,o=17;var E=t.charCodeAt(n);if(qc(E)){do n++,i+=String.fromCharCode(E),E=t.charCodeAt(n);while(qc(E));return o=15}if(Mi(E))return n++,i+=String.fromCharCode(E),E===13&&t.charCodeAt(n)===10&&(n++,i+=`
`),a++,u=n,o=14;switch(E){case 123:return n++,o=1;case 125:return n++,o=2;case 91:return n++,o=3;case 93:return n++,o=4;case 58:return n++,o=6;case 44:return n++,o=5;case 34:return n++,i=p(),o=10;case 47:var A=n-1;if(t.charCodeAt(n+1)===47){for(n+=2;n<r&&!Mi(t.charCodeAt(n));)n++;return i=t.substring(A,n),o=12}if(t.charCodeAt(n+1)===42){n+=2;for(var M=r-1,R=!1;n<M;){var N=t.charCodeAt(n);if(N===42&&t.charCodeAt(n+1)===47){n+=2,R=!0;break}n++,Mi(N)&&(N===13&&t.charCodeAt(n)===10&&n++,a++,u=n)}return R||(n++,f=1),i=t.substring(A,n),o=13}return i+=String.fromCharCode(E),n++,o=16;case 45:if(i+=String.fromCharCode(E),n++,n===r||!Wn(t.charCodeAt(n)))return o=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return i+=m(),o=11;default:for(;n<r&&w(E);)n++,E=t.charCodeAt(n);if(s!==n){switch(i=t.substring(s,n),i){case"true":return o=8;case"false":return o=9;case"null":return o=7}return o=16}return i+=String.fromCharCode(E),n++,o=16}}function w(E){if(qc(E)||Mi(E))return!1;switch(E){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function b(){var E;do E=v();while(E>=12&&E<=15);return E}return{setPosition:d,getPosition:function(){return n},scan:e?b:v,getToken:function(){return o},getTokenValue:function(){return i},getTokenOffset:function(){return s},getTokenLength:function(){return n-s},getTokenStartLine:function(){return c},getTokenStartCharacter:function(){return s-l},getTokenError:function(){return f}}}function qc(t){return t===32||t===9||t===11||t===12||t===160||t===5760||t>=8192&&t<=8203||t===8239||t===8287||t===12288||t===65279}function Mi(t){return t===10||t===13||t===8232||t===8233}function Wn(t){return t>=48&&t<=57}"use strict";"use strict";var ho;(function(t){t.DEFAULT={allowTrailingComma:!1}})(ho||(ho={}));function Vd(t,e,r){e===void 0&&(e=[]),r===void 0&&(r=ho.DEFAULT);var n=null,i=[],s=[];function o(c){Array.isArray(i)?i.push(c):n!==null&&(i[n]=c)}var a={onObjectBegin:function(){var c={};o(c),s.push(i),i=c,n=null},onObjectProperty:function(c){n=c},onObjectEnd:function(){i=s.pop()},onArrayBegin:function(){var c=[];o(c),s.push(i),i=c,n=null},onArrayEnd:function(){i=s.pop()},onLiteralValue:o,onError:function(c,u,l){e.push({error:c,offset:u,length:l})}};return Yd(t,a,r),i[0]}function Yd(t,e,r){r===void 0&&(r=ho.DEFAULT);var n=fo(t,!1);function i(F){return F?function(){return F(n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter())}:function(){return!0}}function s(F){return F?function(V){return F(V,n.getTokenOffset(),n.getTokenLength(),n.getTokenStartLine(),n.getTokenStartCharacter())}:function(){return!0}}var o=i(e.onObjectBegin),a=s(e.onObjectProperty),c=i(e.onObjectEnd),u=i(e.onArrayBegin),l=i(e.onArrayEnd),f=s(e.onLiteralValue),h=s(e.onSeparator),d=i(e.onComment),m=s(e.onError),p=r&&r.disallowComments,v=r&&r.allowTrailingComma;function w(){for(;;){var F=n.scan();switch(n.getTokenError()){case 4:b(14);break;case 5:b(15);break;case 3:b(13);break;case 1:p||b(11);break;case 2:b(12);break;case 6:b(16);break}switch(F){case 12:case 13:p?b(10):d();break;case 16:b(1);break;case 15:case 14:break;default:return F}}}function b(F,V,k){if(V===void 0&&(V=[]),k===void 0&&(k=[]),m(F),V.length+k.length>0)for(var O=n.getToken();O!==17;){if(V.indexOf(O)!==-1){w();break}else if(k.indexOf(O)!==-1)break;O=w()}}function E(F){var V=n.getTokenValue();return F?f(V):a(V),w(),!0}function A(){switch(n.getToken()){case 11:var F=n.getTokenValue(),V=Number(F);isNaN(V)&&(b(2),V=0),f(V);break;case 7:f(null);break;case 8:f(!0);break;case 9:f(!1);break;default:return!1}return w(),!0}function M(){return n.getToken()!==10?(b(3,[],[2,5]),!1):(E(!1),n.getToken()===6?(h(":"),w(),I()||b(4,[],[2,5])):b(5,[],[2,5]),!0)}function R(){o(),w();for(var F=!1;n.getToken()!==2&&n.getToken()!==17;){if(n.getToken()===5){if(F||b(4,[],[]),h(","),w(),n.getToken()===2&&v)break}else F&&b(6,[],[]);M()||b(4,[],[2,5]),F=!0}return c(),n.getToken()!==2?b(7,[2],[]):w(),!0}function N(){u(),w();for(var F=!1;n.getToken()!==4&&n.getToken()!==17;){if(n.getToken()===5){if(F||b(4,[],[]),h(","),w(),n.getToken()===4&&v)break}else F&&b(6,[],[]);I()||b(4,[],[4,5]),F=!0}return l(),n.getToken()!==4?b(8,[4],[]):w(),!0}function I(){switch(n.getToken()){case 3:return N();case 1:return R();case 10:return E(!0);default:return A()}}return w(),n.getToken()===17?r.allowEmptyContent?!0:(b(4,[],[]),!1):I()?(n.getToken()!==17&&b(9,[],[]),!0):(b(4,[],[]),!1)}"use strict";function Kd(t,e){return t.substring(0,e.offset)+e.content+t.substring(e.offset+e.length)}"use strict";var Bi=Vd;function po(t,e){for(var r=e.length-1;r>=0;r--)t=Kd(t,e[r]);return t}var Xd=Q(require("util"));var Zd={async readDocument(t){switch(t.scheme){case"file":try{return(await $t(t.fsPath)).toString()}catch(e){if(e&&e.code==="ENOENT")return;throw e}default:throw new Error(`Unsupported scheme: ${t.toString()}`)}},async applyEdits(t,e,r){switch(t.scheme){case"file":let n=po(r,e);await $n(t.fsPath,n);break;default:throw new Error(`Unsupported scheme: ${t.toString()}`)}}},mo=class{constructor(e){this.fileHost=e}async readDocument(e){switch(e.scheme){case mo.scheme:try{return(await this.fileHost.readFile($e(e,this.fileHost.platform))).toString()}catch{return}default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}async applyEdits(e,r,n){switch(e.scheme){case mo.scheme:let i=po(n,r);await this.fileHost.writeFile($e(e,this.fileHost.platform),Buffer.from(i));break;default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}},sr=mo;sr.scheme="vscode-fileHost";var nn=class{constructor(e){this.shellServer=e}async readDocument(e){switch(e.scheme){case nn.scheme:try{let{stdout:r}=await this.shellServer.exec(`cat ${e.path}`);return r}catch{return}default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}async applyEdits(e,r,n){switch(e.scheme){case nn.scheme:try{if(!nn.nonce){let o=await(0,Xd.promisify)(Jd.randomBytes)(20);nn.nonce=o.toString("hex")}let i=po(n,r),s=`EOF-${nn.nonce}`;await this.shellServer.exec(`cat <<'${s}' >${e.path}
${i}
${s}
`)}catch(i){console.log(i)}break;default:throw new Error(`Unsupported scheme: ${e.toString()}`)}}},rn=nn;rn.scheme="vscode-remote";var Qd=class{constructor(e){this.documents=e}async readDocument(e){let r=this.documents[e.scheme];if(!r)throw new Error(`Unsupported scheme: ${e.toString()}`);return r.readDocument(e)}async applyEdits(e,r,n){let i=this.documents[e.scheme];if(!i)throw new Error(`Unsupported scheme: ${e.toString()}`);return i.applyEdits(e,r,n)}};function Hc(t,e){let r={file:Zd,[sr.scheme]:new sr(t)};return e&&(r[rn.scheme]=new rn(e)),new Qd(r)}var zD=new Map;var Sr;(function(o){o[o.Slash=47]="Slash",o[o.Colon=58]="Colon",o[o.A=65]="A",o[o.Z=90]="Z",o[o.a=97]="a",o[o.z=122]="z"})(Sr||(Sr={}));function $e(t,e){let r;return t.authority&&t.path.length>1&&(t.scheme==="file"||t.scheme===sr.scheme)?r=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?r=t.path[1].toLowerCase()+t.path.substr(2):r=t.path,e==="win32"&&(r=r.replace(/\//g,"\\")),r}function tp(t,e){return[t.join(e,".devcontainer","devcontainer.json"),t.join(e,".devcontainer.json")]}function Pt(t,e){return rt.file(t.path.join(e,".devcontainer","devcontainer.json")).with({scheme:sr.scheme})}async function sn(t,e){let r=tp(t.path,e);for(let n of r)if(await t.isFile(n))return rt.file(n).with({scheme:sr.scheme})}function qi(t){let e=ep.posix.dirname(t.path);return t.with({path:e})}function rp(t){if(!(t.extensions||t.settings||t.devPort!==void 0))return t;let e=H({},t),r=e.customizations||(e.customizations={}),n=r.vscode||(r.vscode={});return e.extensions&&(n.extensions=(n.extensions||[]).concat(e.extensions),delete e.extensions),e.settings&&(n.settings=H(H({},e.settings),n.settings||{}),delete e.settings),e.devPort!==void 0&&n.devPort===void 0&&(n.devPort=e.devPort,delete e.devPort),e}function zn(t,e,r){return np(t,e.configFilePath,r)}function np(t,e,r){let n=qi(e);return e.with({path:go.posix.resolve(n.path,t.platform==="win32"&&e.scheme!==rn.scheme?(go.win32.isAbsolute(r)?"/":"")+r.replace(/\\/g,"/"):r)})}function on(t){return"dockerFile"in t||"build"in t&&"dockerfile"in t.build}function Hi(t,e){return zn(t,e,ox(e))}function ox(t){return"dockerFile"in t?t.dockerFile:t.build.dockerfile}async function vo(t,e,r,n){if(Array.isArray(e.dockerComposeFile)){if(e.dockerComposeFile.length)return e.dockerComposeFile.map(a=>$e(zn(t,e,a),t.platform))}else if(typeof e.dockerComposeFile=="string")return[$e(zn(t,e,e.dockerComposeFile),t.platform)];let i=r==null?void 0:r.COMPOSE_FILE;if(i)return i.split(t.path.delimiter).map(a=>t.path.resolve(n,a));try{let a=t.path.join(n,".env"),c=await t.readFile(a),u=/^COMPOSE_FILE=(.+)$/m.exec(c.toString()),l=u&&u[1].trim();if(l)return l.split(t.path.delimiter).map(f=>t.path.resolve(n,f))}catch(a){if(!(a&&(a.code==="ENOENT"||a.code==="EISDIR")))throw a}let s=[t.path.resolve(n,"docker-compose.yml")],o=t.path.resolve(n,"docker-compose.override.yml");return await t.isFile(o)&&s.push(o),s}var qt=Q(require("path")),Fu=Q(require("string_decoder")),Ty=Q(fu());var pr=Q(require("path")),Ey=Q(Xw()),Cy=Q(require("url")),xy=Q(fu());var yy=Q(wy()),by=Q(require("url"));function Du(t,e){return new Promise((r,n)=>{let i=new by.URL(t.url),s={hostname:i.hostname,port:i.port,path:i.pathname+i.search,method:t.type,headers:t.headers},o=yy.https.request(s,a=>{if(a.statusCode<200||a.statusCode>299)n(new Error(`HTTP ${a.statusCode}: ${a.statusMessage}`)),e&&e.write(`HTTP request failed with status code ${a.statusCode}: : ${a.statusMessage}`,G.Error);else{a.on("error",n);let c=[];a.on("data",u=>c.push(u)),a.on("end",()=>r(Buffer.concat(c)))}});o.on("error",n),t.data&&o.write(t.data),o.end()})}var Es="devcontainer-features.tgz";function Sy(t){return{allFeatures:t.featureSets.map(r=>r.features).flat()}}var Py=!1,vR=pr.basename(process.argv[0])==="ts-node"||process.argv.indexOf("ts-node/register")!==-1;function Cs(t){if(vR)return pr.join(require.resolve("vscode-dev-containers/package.json"),"..","container-features");let e=typeof t=="string"?pr.join(t,"dist"):t.distFolder;return pr.join(e,"node_modules","vscode-dev-containers","container-features")}function Me(t){let{type:e}=t;switch(e){case"local-cache":return"local-cache";case"direct-tarball":return Buffer.from(t.tarballUri).toString("base64");case"github-repo":return`github-${t.owner}-${t.repo}-${t.isLatest?"latest":t.tag}`;case"file-path":return Buffer.from(t.filePath).toString("base64")}}function Ay(){return`
#{featureBuildStages}

#{nonBuildKitFeatureContentFallback}

FROM $_DEV_CONTAINERS_BASE_IMAGE

USER root

COPY --from=dev_containers_feature_content_source {contentSourceRootPath} /tmp/build-features/

#{featureLayer}

#{copyFeatureBuildStages}

#{containerEnv}

ARG _DEV_CONTAINERS_IMAGE_USER=root
USER $_DEV_CONTAINERS_IMAGE_USER
`}function Oy(t){let e="";return(t.featureSets||[]).map(n=>Me(n.sourceInformation)).forEach(n=>{e+=`RUN cd /tmp/build-features/${n} \\
&& chmod +x ./install.sh \\
&& ./install.sh

`}),e}function Ry(t,e){let r=new RegExp("^[a-zA-Z0-9_-]*$");if(!t.includes("/"))return e.write(`[${t}] - No slash, must be locally cached feature.`,G.Trace),{id:t,sourceInformation:{type:"local-cache"}};if(t.startsWith("http://")||t.startsWith("https://")){e.write(`[${t}] - Direct URI`,G.Trace),t=t.replace(/\/+$/,"");let f=t.lastIndexOf("#"),h=t.substring(f+1);if(h===""||!r.test(h)){e.write(`Parse error. Specify a feature id with alphanumeric, dash, or underscore characters. Provided: ${h}.`,G.Error);return}let d=new Cy.URL(t.substring(0,f)).toString();return e.write(`[${t}] - uri: ${d} , id: ${h}`,G.Trace),{id:h,sourceInformation:{type:"direct-tarball",tarballUri:d}}}if(t.startsWith("/")||t.startsWith("./")||t.startsWith("../"))return;let n="latest",i=t.split("@");if(i.length>2){e.write("Parse error. Use the '@' symbol only to designate a version tag.",G.Error);return}i.length===2&&(e.write(`[${t}] has version ${i[1]}`,G.Trace),n=i[1]);let o=i[0].split("/");if(o.length!==3||o.some(f=>f==="")||!r.test(o[2])){e.write("Invalid parse for GitHub/registry feature identifier. Follow format: '<publisher>/<feature-set>/<feature>'",G.Error);return}let a=o[0],c=o[1],u=o[2],l=wR({owner:a,repo:c,tag:n});return{id:u,sourceInformation:l}}function wR(t){let{owner:e,repo:r,tag:n}=t;return n==="latest"?{type:"github-repo",apiUri:`https://api.github.com/repos/${e}/${r}/releases/latest`,unauthenticatedUri:`https://github.com/${e}/${r}/releases/latest/download/${Es}`,owner:e,repo:r,isLatest:!0}:{type:"github-repo",apiUri:`https://api.github.com/repos/${e}/${r}/releases/tags/${n}`,unauthenticatedUri:`https://github.com/${e}/${r}/releases/download/${n}/${Es}`,owner:e,repo:r,tag:n,isLatest:!1}}var _a=async(t,e)=>{try{await ph(t,{force:!0})}catch(r){e.write(`Didn't remove temporary tarball from disk with caught exception: ${r==null?void 0:r.Message} `,G.Trace)}};function yR(t,e,r){let n={"user-agent":"devcontainer"},i=s=>{let o=s.tarballUri;return o.startsWith("https://github.com")||o.startsWith("https://api.github.com")};if(t.type==="github-repo"||t.type==="direct-tarball"&&i(t)){let s=e.GITHUB_TOKEN;s?(r.write("Using environment GITHUB_TOKEN."),n.Authorization=`Bearer ${s}`):r.write("No environment GITHUB_TOKEN available.")}return n}async function bR(t,e,r){let{output:n,env:i}=t,{dstFolder:s}=e,o=[],a=r.features;if(!a||!Object.keys(a).length||!s)return;let c=pr.join(s,Es);n.write("Preparing to parse declared features and fetch remote features.");for await(let u of Object.keys(a)){let l=Ry(u,n);if(l===void 0){n.write(`Failed to parse key: ${u}`,G.Error);continue}let f=l.id,h=l.sourceInformation,d=h.type;if(d==="local-cache"){n.write("Detected local feature set. Continuing...");continue}let m=Me(l.sourceInformation),p=pr.join(s,m);if(o.some(b=>b===m)){n.write(`Already pulled remote resource for '${m}'. No need to re-fetch.`);continue}if(n.write(`Fetching: featureSet = ${m}, feature = ${f}, Type = ${d}`),d==="file-path"){n.write("Local file-path to features on disk is unimplemented. Continuing...");continue}else{let b,E=yR(h,i,n);if(d==="github-repo")n.write("Determining tarball URI for provided github repo.",G.Trace),E.Authorization&&E.Authorization!==""?(n.write("Authenticated. Fetching from GH API.",G.Trace),b=await ER(h,E,n),E.Accept="Accept: application/octet-stream"):(n.write("Not authenticated. Fetching from unauthenticated uri",G.Trace),b=h.unauthenticatedUri);else if(d==="direct-tarball")b=h.tarballUri;else{n.write(`Unhandled source type: ${d}`,G.Error);continue}if(b!==void 0&&b!==""){let A={type:"GET",url:b,headers:E};n.write(`Fetching tarball at ${A.url}`),n.write(`Headers: ${JSON.stringify(A)}`,G.Trace);let M=await Du(A,n);if(!M||M.length===0){n.write("Did not receive a response from tarball download URI",G.Error),await _a(c,n);continue}let R=(N,I)=>!(N.startsWith("./.")||N===`./${Es}`||N==="./.");n.write("Preparing to unarchive received tgz.",G.Trace),await zs(p),await $n(c,M),await xy.x({file:c,cwd:p,filter:R})}else{n.write("Could not fetch features from constructed tarball URL",G.Error),await _a(c,n);continue}}n.write("Attempting to load devcontainer-features.json",G.Trace);let w=await _y(p,n);if(!w||!w.features||w.features.length===0){n.write("Unable to parse received devcontainer-features.json.",G.Error),await _a(c,n);continue}n.write(`Done loading FeatureSet ${m} into from disk into memory`,G.Trace),w.sourceInformation&&(w=ie(H({},w),{sourceInformation:H(H({},w.sourceInformation),h)})),n.write("Merged sourceInfomation",G.Trace),e.featureSets.push(w),o.push(m),await _a(c,n),n.write(`Succeeded in fetching feature set ${m}`,G.Trace)}return e}async function ER(t,e,r){let n={type:"GET",url:t.apiUri,headers:e},i=JSON.parse((await Du(n,r)).toString());if(i){let s=i.assets.find(o=>o.name===Es);if(s&&s.url)return r.write(`Found url to fetch release artifact ${s.name}. Asset of size ${s.size} has been downloaded ${s.download_count} times and was last updated at ${s.updated_at}`),s.url;r.write("Unable to fetch release artifact URI from GitHub API",G.Error);return}}async function CR(t,e){if(t.length===0){e.write("Parsed featureSet is empty.",G.Error);return}let r=Bi(t.toString());if(!(r==null?void 0:r.features)||r.features.length===0){e.write("Parsed featureSet contains no features.",G.Error);return}return e.write(`Loaded devcontainer-features.json declares ${r.features.length} features and ${r.sourceInformation?"contains":"does not contain"} explicit source info.`,G.Trace),xR(r)}async function _y(t,e){let r=await $t(pr.join(t,"devcontainer-features.json"));return CR(r,e)}function xR(t){return t.features.find(e=>e.extensions||e.settings)?ie(H({},t),{features:t.features.map(e=>{if(!(e.extensions||e.settings))return e;let r=H({},e),n=r.customizations||(r.customizations={}),i=n.vscode||(n.vscode={});return r.extensions&&(i.extensions=(i.extensions||[]).concat(r.extensions),delete r.extensions),r.settings&&(i.settings=H(H({},r.settings),i.settings||{}),delete r.settings),r})}):t}async function Ia(t,e,r,n,i){var u;let{output:s}=t,o=r.features;if(!o||!Object.keys(o).length)return;let a={featureSets:[],dstFolder:e},c=await _y(i(t.extensionPath),s);if(!c){s.write("Failed to load locally cached features",G.Error);return}if(c=ie(H({},c),{sourceInformation:{type:"local-cache"}}),a.featureSets.push(c),a=(u=await bR(t,a,r))!=null?u:a,a=await SR(t,r,a,n),!a.featureSets.every(l=>l.features.every(f=>f.value===!1)))return a}var Lu=(t,e)=>`${t}-${Me(e)}`;async function SR(t,e,r,n){var l;let{output:i}=t,{definition:s,version:o}=await n(),a=e.features||{},c={};for(let f of Object.keys(a)){let{id:h,sourceInformation:d}=(l=Ry(f,i))!=null?l:{};if(h&&d){let m=Lu(h,d);c[m]=a[f]}else{i.write(`Failed to read user declared feature ${f}. Skipping.`,G.Error);continue}}let u={};for(let f of r.featureSets)for(let h of f.features){PR(h);let d=Lu(h.id,f.sourceInformation);s&&(h.exclude||[]).some(m=>Iy(m,s,o))?h.included=!1:"include"in h?h.included=!!s&&(h.include||[]).some(m=>Iy(m,s,o)):h.included=!0,u[d]=u[d]||h.included,h.value=c[d]||!1}t.output.write(`Feature configuration:
`+JSON.stringify(ie(H({},r),{imageDetails:void 0}),void 0,"  "),G.Trace);for(let f of r.featureSets)f.features=f.features.filter(h=>{let d=Lu(h.id,f.sourceInformation);return d in u&&h.included===u[d]?(delete u[h.id],!0):!1});return r}function PR(t){if(t.values){let e=t.options||(t.options={});e.version={type:"string",[t.customValues?"proposals":"enum"]:t.values,default:t.values[0],description:t.hint}}delete t.type,delete t.values,delete t.customValues,delete t.hint}function Iy(t,e,r){let n=t.indexOf("@"),[i,s]=n!==-1?[t.slice(0,n),t.slice(n+1)]:[t,void 0];return e===i&&(!s||!r||Ey.satisfies(r,s))}function Dy(t){var e;return((e=t.options)==null?void 0:e.version)?"version":void 0}function Ly(t){var r,n;let e=Dy(t);if(!e)return!!t.value;if(typeof t.value=="object"){let i=t.value[e];return i===void 0&&t.options?(r=t.options[e])==null?void 0:r.default:i}return t.value===void 0&&t.options?(n=t.options[e])==null?void 0:n.default:t.value}function ky(t){if(typeof t.value=="object")return H(H({},ku(t)),t.value);let e=Dy(t);return e?ie(H({},ku(t)),{[e]:t.value}):ku(t)}function ku(t){let e=t.options||{};return Object.keys(e).reduce((r,n)=>("default"in e[n]&&(r[n]=e[n].default),r),{})}var Fy=Q(require("path"));async function yi(t){let e=await $t(Fy.join(t,"package.json"),"utf8");return JSON.parse(e)}var Re=!0;var Tu=t=>t.replace(/[^\w_]/g,"_").replace(/^[\d_]+/g,"_").toUpperCase();async function Da(t,e,r,n){let i,{common:s}=t,{cliHost:o,output:a}=s,c=()=>i||(i=An(t,r,n)),f=await xs(t,e,r,async()=>(await c()).Config.User||"root",async()=>{let E=(await c()).Config.Labels||{};return{definition:E["com.visualstudio.code.devcontainers.id"],version:E.version}});if(!f||!f.featureBuildInfo)return{updatedImageName:r,collapsedFeaturesConfig:void 0,imageDetails:c};let{featureBuildInfo:h,collapsedFeaturesConfig:d}=f,m=o.path.join(h.dstFolder,"Dockerfile.extended");await o.writeFile(m,Buffer.from(h.dockerfilePrefixContent+h.dockerfileContent));let p=Ss(s),v=`${r.startsWith(p)?r:p}-features`,w=[];if(t.buildKitVersion){w.push("buildx","build","--load");for(let E in h.buildKitContexts)w.push("--build-context",`${E}=${h.buildKitContexts[E]}`)}else w.push("build");for(let E in h.buildArgs)w.push("--build-arg",`${E}=${h.buildArgs[E]}`);let b=o.path.join(await o.tmpdir(),"__dev-containers-build-empty");if(o.mkdirp(b),w.push("-t",v,"-f",m,b),t.isTTY){let E=ie(H({},jt(t)),{output:we(a,G.Info)});await nt(E,...w)}else{let E=ie(H({},pt(t)),{output:we(a,G.Info),print:"continuous"});await dt(E,...w)}return{updatedImageName:v,collapsedFeaturesConfig:d,imageDetails:c}}async function xs(t,e,r,n,i){let s=await Ia(t.common,await ka(t.common),e,i,Cs);if(!s)return null;let o=Sy(s),a=await OR(t,s,r,n);return a?{featureBuildInfo:a,collapsedFeaturesConfig:o}:null}function AR(t){let e="";for(let r of t.featureSets)e+=r.features.filter(n=>(Re||n.included)&&n.value).reduce((n,i)=>n.concat(Object.keys(i.containerEnv||{}).map(s=>`ENV ${s}=${i.containerEnv[s]}`)),[]).join(`
`);return e}async function OR(t,e,r,n){let{common:i}=t,{cliHost:s,output:o}=i,{dstFolder:a}=e;if(!a||a==="")return o.write("dstFolder is undefined or empty in addContainerFeatures",G.Error),null;let c=Me({type:"local-cache"}),u=Cs(i.extensionPath);o.write(`local container features stored at: ${u}`),await s.mkdirp(`${a}/${c}`);let l=Ty.c({cwd:u,filter:N=>N!=="./Dockerfile"&&N!=="./devcontainer-features.json"},["."]),f=new Promise((N,I)=>{l.on("error",I),l.on("finish",N)}),h=await s.exec({cmd:"tar",args:["--no-same-owner","-x","-f","-"],cwd:`${a}/${c}`,output:o}),d=new Fu.StringDecoder;h.stdout.on("data",N=>{o.write(d.write(N))});let m=new Fu.StringDecoder;h.stderr.on("data",N=>{o.write(Pe(m.write(N)))}),l.pipe(h.stdin),await h.exit,await f;let p=await Promise.all(e.featureSets.map(N=>Py?N.features.filter(I=>(Re||I.included)&&I.value).reduce(async(I,F)=>{let V=s.path.join(a,Me(N.sourceInformation),"features",F.id,"bin"),k=s.isFile(s.path.join(V,"acquire")),O=s.isFile(s.path.join(V,"configure")),$=await I;return $[F.id]={hasAcquire:await k,hasConfigure:await O},$},Promise.resolve({})):Promise.resolve({}))),v=t.buildKitVersion?ki(t.buildKitVersion):null,b=v?!Js(v,[0,8,0]):!1,E="dev_container_feature_content_temp",A=b?".":"/tmp/build-features/",M=Ay().replace("#{nonBuildKitFeatureContentFallback}",b?"":`FROM ${E} as dev_containers_feature_content_source`).replace("{contentSourceRootPath}",A).replace("#{featureBuildStages}",RR(e,p,A)).replace("#{featureLayer}",Oy(e)).replace("#{containerEnv}",AR(e)).replace("#{copyFeatureBuildStages}",_R(e,p)),R=`${b?"# syntax=docker/dockerfile:1.4":""}
ARG _DEV_CONTAINERS_BASE_IMAGE=placeholder
`;if(await Promise.all([...e.featureSets].map(async(N,I)=>{let F=[].concat(...N.features.filter(k=>{var O;return(Re||k.included)&&k.value&&!((O=p[I][k.id])==null?void 0:O.hasAcquire)}).map(Ny)).join(`
`),V=s.path.join(a,Me(N.sourceInformation),"devcontainer-features.env");await Promise.all([s.writeFile(V,Buffer.from(F)),...N.features.filter(k=>{var O;return(Re||k.included)&&k.value&&((O=p[I][k.id])==null?void 0:O.hasAcquire)}).map(k=>{let O=[...Ny(k),`_BUILD_ARG_${Tu(k.id)}_TARGETPATH=${qt.posix.join("/usr/local/devcontainer-features",Me(N.sourceInformation),k.id)}`].join(`
`),$=s.path.join(a,Me(N.sourceInformation),"features",k.id,"devcontainer-features.env");return s.writeFile($,Buffer.from(O))})])})),!b){let N=`
	FROM scratch
	COPY . /tmp/build-features/
	`,I=s.path.join(a,"Dockerfile.buildContent");await s.writeFile(I,Buffer.from(N));let F=["build","-t",E,"-f",I];if(F.push(a),t.isTTY){let V=ie(H({},jt(t)),{output:we(o,G.Info)});await nt(V,...F)}else{let V=ie(H({},pt(t)),{output:we(o,G.Info),print:"continuous"});await dt(V,...F)}}return{dstFolder:a,dockerfileContent:M,dockerfilePrefixContent:R,buildArgs:{_DEV_CONTAINERS_BASE_IMAGE:r,_DEV_CONTAINERS_IMAGE_USER:await n(),_DEV_CONTAINERS_FEATURE_CONTENT_SOURCE:E},buildKitContexts:b?{dev_containers_feature_content_source:a}:{}}}function RR(t,e,r){return[].concat(...t.featureSets.map((n,i)=>n.features.filter(s=>{var o;return(Re||s.included)&&s.value&&((o=e[i][s.id])==null?void 0:o.hasAcquire)}).map(s=>`FROM mcr.microsoft.com/vscode/devcontainers/base:0-focal as ${Me(n.sourceInformation)}_${s.id}
COPY --from=dev_containers_feature_content_source ${qt.posix.join(r,Me(n.sourceInformation),"features",s.id)} ${qt.posix.join("/tmp/build-features",Me(n.sourceInformation),"features",s.id)}
COPY --from=dev_containers_feature_content_source ${qt.posix.join(r,Me(n.sourceInformation),"common")} ${qt.posix.join("/tmp/build-features",Me(n.sourceInformation),"common")}
RUN cd ${qt.posix.join("/tmp/build-features",Me(n.sourceInformation),"features",s.id)} && set -a && . ./devcontainer-features.env && set +a && ./bin/acquire`))).join(`

`)}function _R(t,e){return[].concat(...t.featureSets.map((r,n)=>r.features.filter(i=>{var s;return(Re||i.included)&&i.value&&((s=e[n][i.id])==null?void 0:s.hasAcquire)}).map(i=>{var o;let s=qt.posix.join("/usr/local/devcontainer-features",Me(r.sourceInformation),i.id);return`COPY --from=${Me(r.sourceInformation)}_${i.id} ${s} ${s}${((o=e[n][i.id])==null?void 0:o.hasConfigure)?`
RUN cd ${qt.posix.join("/tmp/build-features",Me(r.sourceInformation),"features",i.id)} && set -a && . ./devcontainer-features.env && set +a && ./bin/configure`:""}`}))).join(`

`)}function Ny(t){let e=ky(t),r=Tu(t.id),n=[];return e&&(n.push(...Object.keys(e).map(i=>`_BUILD_ARG_${r}_${Tu(i)}="${e[i]}"`)),n.push(`_BUILD_ARG_${r}=true`)),t.buildArg&&n.push(`${t.buildArg}=${Ly(t)}`),n}async function IR(t,e,r,n,i){let{common:s}=t,{cliHost:o}=s;if(t.updateRemoteUserUIDDefault==="never"||!(typeof e.updateRemoteUserUID=="boolean"?e.updateRemoteUserUID:t.updateRemoteUserUIDDefault==="on")||!(o.platform==="linux"||t.updateRemoteUserUIDOnMacOS&&o.platform==="darwin"))return null;let a=(await n()).Config.User||"root",c=e.remoteUser||i||a;if(c==="root"||/^\d+$/.test(c))return null;let u=Ss(s);return{imageName:`${r.startsWith(u)?r:u}-uid`,remoteUser:c,imageUser:a}}async function La(t,e,r,n,i){let{common:s}=t,{cliHost:o}=s,a=await IR(t,e,r,n,i);if(!a)return r;let{imageName:c,remoteUser:u,imageUser:l}=a,f="updateUID.Dockerfile",h=qt.join(s.extensionPath,"scripts",f),d=s.package.version,m=o.path.join(await Nu(o),`${f}-${d}`),p=`${m}-${Date.now()}`;await o.mkdirp(o.path.dirname(p)),await o.writeFile(p,await $t(h)),await o.rename(p,m);let v=["build","-f",m,"-t",c,"--build-arg",`BASE_IMAGE=${r}`,"--build-arg",`REMOTE_USER=${u}`,"--build-arg",`NEW_UID=${await o.getuid()}`,"--build-arg",`NEW_GID=${await o.getgid()}`,"--build-arg",`IMAGE_USER=${l}`,o.path.dirname(m)];return t.isTTY?await nt(t,...v):await dt(t,...v),c}var $y=Q(require("path")),jy="com.docker.compose.project",Uy="com.docker.compose.service";async function My(t,e,r,n){let{common:i,dockerCLI:s,dockerComposeCLI:o}=t,{cliHost:a,env:c,output:u}=i;return DR(t,{cliHost:a,dockerCLI:s,dockerComposeCLI:o,env:c,output:u},e,r,ju(r),n)}async function DR(t,e,r,n,i,s){let{common:o}=t,{cliHost:a}=e,c,u;try{let l=await vo(a,n,a.env,a.cwd),f=a.path.join(a.cwd,".env"),h=Array.isArray(n.dockerComposeFile)&&n.dockerComposeFile.length===0&&await a.isFile(f)?f:void 0,d=await Mu(e,r,l),m=await qy(t,d,n.service);if(t.expectExistingContainer&&!m)throw new ae({description:"The expected container does not exist."});if(c=m?await nr(t,m):void 0,c&&(t.removeOnStartup===!0||t.removeOnStartup===c.Id)){let v="Removing existing container.",w=o.output.start(v);await dt(t,"rm","-f",c.Id),o.output.stop(v,w),c=void 0}if(!c||c.State.Status!=="running"){let v=await kR(t,e,n,d,l,h,c,s);c=await nr(t,v.containerId)}u=await On(t,c.Id,i,n.remoteUser);let{remoteEnv:p}=await eo(o,u,n);return{params:o,properties:u,config:n,resolvedAuthority:{extensionHostEnv:p},tunnelInformation:o.isLocalContainer?$a(c):{},dockerParams:t,dockerContainerId:c.Id,composeProjectName:d}}catch(l){let f=l instanceof ae?l:new ae({description:"An error occurred setting up the container.",originalError:l});throw c&&(f.manageContainer=!0,f.params=t.common,f.containerId=c.Id,f.dockerParams=t),u&&(f.containerProperties=u),f.config=n,f}}function ju(t){return t.workspaceFolder||"/"}function LR(t,e,r){var s,o;let n=t.image,i=t.build;return i?typeof i=="string"?{image:n,build:{context:i,dockerfilePath:"Dockerfile"}}:{image:n,build:{dockerfilePath:(s=i.dockerfile)!=null?s:"Dockerfile",context:(o=i.context)!=null?o:e.dirname(r[0]),target:i.target}}:{image:n}}async function Uu(t,e,r,n,i,s,o,a,c,u,l,f){var T;let{common:h,dockerCLI:d,dockerComposeCLI:m}=r,{cliHost:p,env:v,output:w}=h,A=(await Fa({cliHost:p,dockerCLI:d,dockerComposeCLI:m,env:v,output:w},n,i)).services[t.service],M="dev_container_auto_added_stage_label",R,N,I=LR(A,p.path,n);if(I.build){let{context:W,dockerfilePath:S,target:x}=I.build,L=p.path.isAbsolute(S)?S:$y.default.resolve(W,S);if(R=N=(await p.readFile(L)).toString(),x)M=x;else{let{lastStageName:D,modifiedDockerfile:te}=Ua(R,M);M=D,te&&(R=te)}}else R=N=`FROM ${A.image} AS ${M}
`;let F=async()=>({definition:void 0,version:void 0}),V=ie(H({},r),{buildKitVersion:null}),k=await xs(V,t,M,()=>ja(r,N),F),O=null;if(k){O=`    build:
`;let{featureBuildInfo:W}=k,S=R.match(/^\s*#\s*syntax\s*=.*[\r\n]/g);S&&(R=R.slice(S[0].length));let x=`${W.dockerfilePrefixContent}${R}
${W.dockerfileContent}`,L=p.path.join(W==null?void 0:W.dstFolder,"Dockerfile-with-features");if(await p.writeFile(L,Buffer.from(x)),O+=`      dockerfile: ${L}
`,O+=`      target: ''
`,!((T=I.build)==null?void 0:T.context)){let D=p.path.join(await p.tmpdir(),"__devcontainers_cli_empty__");await p.mkdirp(D),O+=`      context: ${D}
`}if(Object.keys(W.buildArgs).length>0||r.buildKitVersion){O+=`      args:
`,r.buildKitVersion&&(O+=`        - BUILDKIT_INLINE_CACHE=1
`);for(let D in W.buildArgs)O+=`        - ${D}=${W.buildArgs[D]}
`}}let $=["--project-name",e,...s],z=[];if(l&&l.length>0||O){let W=p.path.join(c,"docker-compose");await p.mkdirp(W);let S=p.path.join(W,`${u}-${Date.now()}.yml`),x=l&&l.length>0?`      cache_from:
${l.map(D=>`        - ${D}
`).join(`
`)}`:"",L=`services:
  ${t.service}:
${O==null?void 0:O.trimEnd()}
${x}
`;await p.writeFile(S,Buffer.from(L)),z.push(S),$.push("-f",S)}if(!f){$.push("build"),a&&($.push("--no-cache"),k||$.push("--pull")),o.length&&($.push(...o),o.indexOf(t.service)===-1&&$.push(t.service));try{if(r.isTTY){let W=ie(H({},jt(r,await m())),{output:we(w,G.Info)});await no(W,...$)}else{let W=ie(H({},pt(r,await m())),{output:we(w,G.Info),print:"continuous"});await Zr(W,...$)}}catch(W){throw W instanceof ae?W:new ae({description:"An error occurred building the Docker Compose images.",originalError:W,data:{fileWithError:n[0]}})}}return{collapsedFeaturesConfig:k==null?void 0:k.collapsedFeaturesConfig,additionalComposeOverrideFiles:z}}async function By(t,e,r,n){let i=r.find(s=>s.indexOf(n)>-1);return i?await t.isFile(i)?(e.write(`Restoring ${i} from persisted storage`),{foundLabel:!0,fileExists:!0,file:i}):(e.write(`Expected ${i} to exist, but it did not`,G.Error),{foundLabel:!0,fileExists:!1,file:i}):(e.write(`Expected to find a docker-compose file prefixed with ${n}, but did not.`,G.Error),{foundLabel:!1})}async function kR(t,e,r,n,i,s,o,a){var k,O,$,z;let{common:c}=t,{persistedFolder:u,output:l}=c,{cliHost:f}=e,h="docker-compose.devcontainer.build",d="docker-compose.devcontainer.containerFeatures";c.progress(Xr.StartingContainer);let m=i,p=[].concat(...m.map(T=>["-f",T]));s&&p.push("--env-file",s);let v=we(e.output,G.Info),w=await Fa(e,m,s);if(Object.keys(w.services||{}).indexOf(r.service)===-1)throw new ae({description:`Service '${r.service}' configured in devcontainer.json not found in Docker Compose configuration.`,data:{fileWithError:i[0]}});let E,A=new Promise((T,W)=>E=W),{started:M}=await Na(t,{[jy]:n,[Uy]:r.service},A,c.output,c.getLogLevel()===G.Trace),R=w.services[r.service],N=R.image||`${n}_${r.service}`,I=(k=o==null?void 0:o.Config)==null?void 0:k.Labels;l.write(`PersistedPath=${u}, ContainerHasLabels=${!!I}`);let F=!1;if(o&&I){let T=I["com.docker.compose.project.config_files"];l.write(`Container was created with these config files: ${T}`);let W=(O=T==null?void 0:T.split(","))!=null?O:[],S=await By(f,l,W,h),x=await By(f,l,W,d);(S.fileExists||!S.foundLabel)&&x.fileExists&&(F=!0,S.fileExists&&p.push("-f",S.file),x.fileExists&&p.push("-f",x.file))}if(!o||!F){let T=!!o,W=ie(H({},t),{common:ie(H({},t.common),{output:v})}),{collapsedFeaturesConfig:S,additionalComposeOverrideFiles:x}=await Uu(r,n,W,m,s,p,($=r.runServices)!=null?$:[],(z=t.buildNoCache)!=null?z:!1,u,h,t.additionalCacheFroms,T);x.forEach(B=>p.push("-f",B));let L,D=()=>L||(L=An(t,N,!0)),te=T?N:await La(t,r,N,D,R.user),se=await FR(te,N,S,r,e,i,D,R,a,t.additionalMounts,u,d,f,l);se&&p.push("-f",se)}let V=["--project-name",n,...p];V.push("up","-d"),(o||t.expectExistingContainer)&&V.push("--no-recreate"),r.runServices&&r.runServices.length&&(V.push(...r.runServices),r.runServices.indexOf(r.service)===-1&&V.push(r.service));try{t.isTTY?await no(ie(H({},e),{output:v}),...V):await Zr(ie(H({},e),{output:v}),...V)}catch(T){throw E(),new ae({description:"An error occurred starting Docker Compose up.",originalError:T,data:{fileWithError:m[0]}})}return await M,{containerId:await qy(t,n,r.service)}}async function FR(t,e,r,n,i,s,o,a,c,u,l,f,h,d){let m=await TR(t,e,r,n,i,s,o,a,c,u);if(!!m&&m.length>0&&m.trim()!==""){d.write(`Docker Compose override file:
${m}`,G.Trace);let v=`${f}-${Date.now()}.yml`,w=h.path.join(l,"docker-compose"),b=h.path.join(w,v);return d.write(`Writing ${v} to ${w}`),await h.mkdirp(w),await h.writeFile(b,Buffer.from(m)),b}else{d.write("Override file was generated, but was empty and thus not persisted or included in the docker-compose arguments.");return}}async function TR(t,e,r,n,i,s,o,a,c,u){let{cliHost:l}=i,f="",h=t!==e,d=[...new Set([].concat(...((r==null?void 0:r.allFeatures)||[]).filter(I=>(Re||I.included)&&I.value).map(I=>I.capAdd||[])))],m=[...new Set([].concat(...((r==null?void 0:r.allFeatures)||[]).filter(I=>(Re||I.included)&&I.value).map(I=>I.securityOpt||[])))],p=[].concat(...((r==null?void 0:r.allFeatures)||[]).map(I=>(Re||I.included)&&I.value&&I.mounts).filter(Boolean),u),v=p.filter(I=>I.type==="volume"),w=((r==null?void 0:r.allFeatures)||[]).map(I=>(Re||I.included)&&I.value&&I.entrypoint).filter(Boolean),b=typeof a.entrypoint=="string"?$u.parse(a.entrypoint):a.entrypoint,E=typeof a.command=="string"?$u.parse(a.command):a.command,A=n.overrideCommand?[]:b||((await o()).Config.Entrypoint||[]).map(I=>I.replace(/\$/g,"$$$$")),M=n.overrideCommand?[]:E||(b?[]:((await o()).Config.Cmd||[]).map(I=>I.replace(/\$/g,"$$$$")));f=`services:
  '${n.service}':${h?`
    image: ${t}`:""}
    entrypoint: ["/bin/sh", "-c", "echo Container started\\n
trap \\"exit 0\\" 15\\n
${w.join(`\\n
`)}\\n
exec \\"$$@\\"\\n
while sleep 1 & wait $$!; do :; done", "-"${A.map(I=>`, ${JSON.stringify(I)}`).join("")}]${M!==E?`
    command: ${JSON.stringify(M)}`:""}${((r==null?void 0:r.allFeatures)||[]).some(I=>(Re||I.included)&&I.value&&I.init)?`
    init: true`:""}${((r==null?void 0:r.allFeatures)||[]).some(I=>(Re||I.included)&&I.value&&I.privileged)?`
    privileged: true`:""}${d.length?`
    cap_add:${d.map(I=>`
      - ${I}`).join("")}`:""}${m.length?`
    security_opt:${m.map(I=>`
      - ${I}`).join("")}`:""}${c.length?`
    labels:${c.map(I=>`
      - ${I.replace(/\$/g,"$$$$")}`).join("")}`:""}${p.length?`
    volumes:${p.map(I=>`
      - ${I.source}:${I.target}`).join("")}`:""}${v.length?`
volumes:${v.map(I=>`
  ${I.source}:${I.external?`
    external: true`:""}`).join("")}`:""}
`;let R=(await l.readFile(s[0])).toString(),N=(/^\s*(version:.*)$/m.exec(R)||[])[1];return N&&(f=`${N}

${f}`),f}async function Fa(t,e,r){try{let n=[].concat(...e.map(s=>["-f",s]));r&&n.push("--env-file",r);let i=await t.dockerComposeCLI();(ki(i.version)||[])[0]>=2&&n.push("--profile","*");try{let s=pt(t,"dockerComposeCLI"in t?await t.dockerComposeCLI():void 0),{stdout:o}=await Zr(ie(H({},s),{print:"onerror"}),...n,"config"),a=o.toString();return t.output.write(a),uo(a)||{}}catch(s){if(!Buffer.isBuffer(s==null?void 0:s.stderr)||(s==null?void 0:s.stderr.toString().indexOf("UnicodeEncodeError"))===-1)throw s;if(t.cliHost.platform==="win32"){let{cmdOutput:c}=await no(ie(H({},t),{output:we({event:t.output.event,dimensions:{columns:999999,rows:1}},G.Info)}),...n,"config");return uo(c.replace(Oi,""))||{}}let{stdout:o}=await Zr(ie(H({},t),{env:ie(H({},t.env),{LANG:"en_US.UTF-8",LC_CTYPE:"en_US.UTF-8"})}),...n,"config"),a=o.toString();return t.output.write(a),uo(a)||{}}}catch(n){throw n instanceof ae?n:new ae({description:"An error occurred retrieving the Docker Compose configuration.",originalError:n,data:{fileWithError:e[0]}})}}async function qy(t,e,r){let n=await ro(t,!0,[`${jy}=${e}`,`${Uy}=${r}`]);return n&&n[0]}async function Mu(t,e,r){let{cliHost:n}="cliHost"in t?t:t.common,i=await NR(t),s=Ta(n.env.COMPOSE_PROJECT_NAME||"",i);if(s)return s;try{let c=n.path.join(n.cwd,".env"),u=await n.readFile(c),l=/^COMPOSE_PROJECT_NAME=(.+)$/m.exec(u.toString()),f=l&&l[1].trim(),h=Ta(f||"",i);if(h)return h}catch(c){if(!(c&&(c.code==="ENOENT"||c.code==="EISDIR")))throw c}let o=e.configFolderPath,a=r[0]?n.path.dirname(r[0]):n.cwd;return _h(n.platform,a,n.path.join(o,".devcontainer"))?Ta(`${n.path.basename(o)}_devcontainer`,i):Ta(n.path.basename(a),i)}function Ta(t,e){return e?t.toLowerCase().replace(/[^-_a-z0-9]/g,""):t.toLowerCase().replace(/[^a-z0-9]/g,"")}async function NR(t){try{let e=ki((await t.dockerComposeCLI()).version);return e?!Js(e,[1,21,0]):!0}catch{return!0}}function Hy(t,e,r){let n;return()=>n||(n=(async()=>{let i=!1,s;try{s=(await Zr(ie(H({},t),{cmd:r}),"version","--short")).stdout}catch(o){if((o==null?void 0:o.code)!=="ENOENT")throw o;s=(await Zr(ie(H({},t),{cmd:e}),"compose","version","--short")).stdout,i=!0}return{version:s.toString().trim(),cmd:i?e:r,args:i?["compose"]:[]}})())}async function Wy(t,e,r){if(!("exec"in t)){for(let n=e,i="";n!==i;i=n,n=t.path.dirname(n))if(await t.isFile(t.path.join(n,".git","config")))return n;return}try{let{stdout:n}=await Er({exec:t.exec,cmd:"git",args:["rev-parse","--show-cdup"],cwd:e,output:r}),i=n.toString().trim();return t.path.resolve(e,i)}catch{return}}var Vy=Q(require("string_decoder"));async function qu(t,e){if(t.scheme==="file"&&e.type==="wsl"){let{stdout:r}=await Er({exec:e.exec,cmd:"wslpath",args:["-u",t.fsPath],output:Ai});return r.toString().trim()}return $e(t,e.platform)}async function Na(t,e,r,n,i){let s=await Qh(t,{event:["start"]});return{started:new Promise((o,a)=>{r.catch(l=>{s.terminate(),a(l)});let c=new Vy.StringDecoder("utf8"),u="";s.stdout.on("data",async l=>{if(l){let f=c.write(l);i&&n.write(`Log: startEventSeen#data ${f.trim().replace(/\r?\n/g,`\r
`)}\r
`);let h=(u+f).split(`
`);u=h.pop();for(let d of h)if(d.trim())try{let m=JSON.parse(d);(m.status||m.Status)==="start"&&await $R(t,m,e)&&(s.terminate(),o())}catch(m){console.error(m),console.error(d)}}})})}}async function $R(t,e,r){var i;let n=((i=e.Actor)==null?void 0:i.Attributes)||(await nr(t,e.id||e.ID)).Config.Labels||{};return Object.keys(r).every(s=>n[s]===r[s])}async function An(t,e,r){try{return await Sc(t,e)}catch(n){if(!r)throw n;try{await nt(t,"pull",e)}catch{throw n.stdout&&t.common.output.write(n.stdout.toString()),n.stderr&&t.common.output.write(Pe(n.stderr.toString())),n}return Sc(t,e)}}function Yy(t){return t.hostPath!==void 0}async function jR(t,e,r,n){return r&&await Wy(t,e,n)||e}async function Ky(t,e,r,n,i,s){if("dockerComposeFile"in r)return{workspaceFolder:ju(r),workspaceMount:void 0};let{workspaceFolder:o,workspaceMount:a}=r;if(e&&(!o||!("workspaceMount"in r))){let c=await jR(t,e.rootFolderPath,n,i);if(!o){let u=t.path.relative(t.path.dirname(c),e.rootFolderPath);o=`/workspaces/${t.platform==="win32"?u.replace(/\\/g,"/"):u}`}if(!("workspaceMount"in r)){let u=`/workspaces/${t.path.basename(c)}`,l=t.platform!=="linux"?`,consistency=${s||"consistent"}`:"",f=c.indexOf(",")!==-1?'"':"",h=u.indexOf(",")!==-1?'"':"";a=`type=bind,${f}source=${c}${f},${h}target=${u}${h}${l}`}}return{workspaceFolder:o,workspaceMount:a}}function $a(t){return{environmentTunnels:t.Ports.filter(e=>!!e.PublicPort).map(e=>({remoteAddress:{port:e.PrivatePort,host:e.IP},localAddress:e.IP+":"+e.PublicPort}))}}function Jy(t,e){let r="dockerFile"in e?e.context:e.build.context;return r?zn(t,e,r):qi(Hi(t,e))}async function On(t,e,r,n,i){let{common:s}=t,o="Inspecting container",a=s.output.start(o),c=await nr(t,e);s.output.stop(o,a);let u=n||c.Config.User||"root",[,l,,f]=/([^:]*)(:(.*))?/.exec(u),h=UR(c.Config.Env),d=Pc(t,e,u),m=await td(t,e,u,s.loadNativeModule),p=Pc(t,e,"root");return Gh({params:s,createdAt:c.Created,startedAt:c.State.StartedAt,remoteWorkspaceFolder:r,containerUser:l==="0"?"root":l,containerGroup:f,containerEnv:h,remoteExec:d,remotePtyExec:m,remoteExecAsRoot:p,rootShellServer:i})}function UR(t){return(t||[]).reduce((e,r)=>{let n=r.indexOf("=");return n!==-1&&(e[r.substr(0,n)]=r.substr(n+1)),e},{})}async function Xy(t,e,r){if(!e)return;let{common:n,dockerEnv:i}=t,{cliHost:s,output:o}=n,a=s.platform==="win32",c=a?[s.env.ComSpec||"cmd.exe","/c"]:["/bin/sh","-c"],u=a&&Array.isArray(e)&&e.length?[(e[0]||"").replace(/\//g,"\\"),...e.slice(1)]:e,l=typeof u=="string"?[...c,u]:u;if(!l.length)return;let f="initializeCommand",h=we(o,G.Info);try{h.raw(`[1mRunning the ${f} from devcontainer.json...[0m\r
\r
`),await Di({ptyExec:s.ptyExec,cmd:l[0],args:l.slice(1),env:i,output:h,onDidInput:r}),h.raw(`\r
`)}catch(d){if(d&&(d.code===130||d.signal===2))h.raw(`\r
[1m${f} interrupted.[0m\r
\r
`);else throw new ae({description:`The ${f} in the devcontainer.json failed.`,originalError:d})}}function Ss(t){let{cwd:e}="cwd"in t?t:t.cliHost,r=MR(e),n=Bu.basename(e);return id(`vsc-${n}-${r}`)}function MR(t){return zy.createHash("md5").update(t).digest("hex")}async function ka(t){let{cliHost:e}=t,{version:r}=t.package,n=e.path.join(await Nu(e),"container-features",`${r}-${Date.now()}`);return await e.mkdirp(n),n}async function Nu(t){return t.path.join(await t.tmpdir(),t.platform==="linux"?`vsch-${await t.getUsername()}`:"vsch")}var Zy=new RegExp(/^(?<line>\s*FROM.*)/,"gm"),Qy=/FROM\s+(?<platform>--platform=\S+\s+)?(?<image>\S+)(\s+[Aa][Ss]\s+(?<label>[^\s]+))?/,BR=new RegExp(/^\s*USER\s+(?<user>\S+)/,"gm");async function ja(t,e){return qR(r=>An(t,r,!0),e)}async function qR(t,e){var a,c,u,l;let r=[...e.matchAll(BR)];if(r.length){let f=(a=r[r.length-1].groups)==null?void 0:a.user;if(f&&f.indexOf("$")===-1)return f}let n=[...e.matchAll(Zy)][0],i=(u=(c=n==null?void 0:n.groups)==null?void 0:c.line)==null?void 0:u.match(Qy),s=(l=i==null?void 0:i.groups)==null?void 0:l.image;return s&&s.indexOf("$")===-1&&(await t(s)).Config.User||"root"}function Ua(t,e){var f,h;let r=[...t.matchAll(Zy)],n=r[r.length-1],i=(f=n.groups)==null?void 0:f.line,s=i.match(Qy);if(!s)throw new Error("Error parsing Dockerfile: failed to parse final FROM line");if((h=s.groups)==null?void 0:h.label)return{lastStageName:s.groups.label,modifiedDockerfile:void 0};let o=n.index+s.index,a=o+i.length,c=s[0],u=t.slice(0,o+c.length);u+=` AS ${e}`;let l=i.length-c.length;return u+=t.slice(a-l),{lastStageName:e,modifiedDockerfile:u}}var nb=Q(require("path"));var eb="devcontainer.local_folder";async function tb(t,e,r,n){let{common:i}=t,s,o;try{if(s=await YR(t,n),s)await KR(t,n,s);else{let a=await Hu(t,e),c=await La(t,e,a.updatedImageName,a.imageDetails,VR(e.runArgs)||e.containerUser);try{await JR(t,e,a.collapsedFeaturesConfig,c,n,r.workspaceMount,a.imageDetails)}finally{s=await bi(t,n)}if(!s)return Ps(i.output,"Dev container not found.")}return o=await On(t,s.Id,r.workspaceFolder,e.remoteUser),await WR(s,t,o,e)}catch(a){throw HR(a,s,t,o,e)}}function HR(t,e,r,n,i){let s=t instanceof ae?t:new ae({description:"An error occurred setting up the container.",originalError:t});return e&&(s.manageContainer=!0,s.params=r.common,s.containerId=e.Id,s.dockerParams=r),n&&(s.containerProperties=n),i&&(s.config=i),s}async function WR(t,e,r,n){let{common:i}=e,{remoteEnv:s}=await eo(i,r,n);return{params:i,properties:r,config:n,resolvedAuthority:{extensionHostEnv:s},tunnelInformation:i.isLocalContainer?$a(t):{},dockerParams:e,dockerContainerId:t.Id}}function zR(t,e){return"image"in t?t.image:Ss(e.common)}async function Hu(t,e,r){var i;let n=r!=null?r:zR(e,t);return t.common.progress(Xr.BuildingImage),on(e)?await GR(t,e,n,(i=t.buildNoCache)!=null?i:!1):await Da(t,e,n,"image"in e)}async function GR(t,e,r,n){var E,A,M;let{cliHost:i,output:s}=t.common,o=Hi(i,e),a=await qu(o,i);if(!i.isFile(a))throw new ae({description:`Dockerfile (${a}) not found.`});let c=(await i.readFile(a)).toString(),u=c,l="dev_container_auto_added_stage_label";if((E=e.build)==null?void 0:E.target)l=e.build.target;else{let{lastStageName:R,modifiedDockerfile:N}=Ua(c,l);l=R,N&&(c=N)}let h=await xs(t,e,l,()=>ja(t,u),async()=>({definition:void 0,version:void 0})),d=a,m=[];if(h){let{featureBuildInfo:R}=h,N=c.match(/^\s*#\s*syntax\s*=.*[\r\n]/g);N&&(c=c.slice(N[0].length));let I=`${R.dockerfilePrefixContent}${c}
${R.dockerfileContent}`;d=i.path.join(R==null?void 0:R.dstFolder,"Dockerfile-with-features"),await i.writeFile(d,Buffer.from(I));for(let F in R.buildKitContexts)m.push("--build-context",`${F}=${R.buildKitContexts[F]}`);for(let F in R.buildArgs)m.push("--build-arg",`${F}=${R.buildArgs[F]}`)}let p=[];if(!t.buildKitVersion&&(t.buildxPlatform||t.buildxPush))throw new ae({description:"--platform or --push require BuildKit enabled.",data:{fileWithError:a}});t.buildKitVersion?(p.push("buildx","build"),t.buildxPlatform&&p.push("--platform",t.buildxPlatform),t.buildxPush?p.push("--push"):p.push("--load"),p.push("--build-arg","BUILDKIT_INLINE_CACHE=1")):p.push("build"),p.push("-f",d,"-t",r);let v=(A=e.build)==null?void 0:A.target;if(v&&p.push("--target",v),n)p.push("--no-cache"),(t.buildKitVersion||!h)&&p.push("--pull");else if(t.additionalCacheFroms&&t.additionalCacheFroms.forEach(R=>p.push("--cache-from",R)),e.build&&e.build.cacheFrom)if(typeof e.build.cacheFrom=="string")p.push("--cache-from",e.build.cacheFrom);else for(let R=0;R<e.build.cacheFrom.length;R++){let N=e.build.cacheFrom[R];p.push("--cache-from",N)}let w=(M=e.build)==null?void 0:M.args;if(w)for(let R in w)p.push("--build-arg",`${R}=${w[R]}`);p.push(...m),p.push(await qu(Jy(i,e),i));try{if(t.isTTY){let R=ie(H({},jt(t)),{output:we(s,G.Info)});await nt(R,...p)}else{let R=ie(H({},pt(t)),{output:we(s,G.Info),print:"continuous"});await dt(R,...p)}}catch(R){throw new ae({description:"An error occurred building the image.",originalError:R,data:{fileWithError:a}})}let b=()=>An(t,r,!1);return{updatedImageName:r,collapsedFeaturesConfig:h==null?void 0:h.collapsedFeaturesConfig,imageDetails:b}}function VR(t=[]){for(let e=t.length-1;e>=0;e--){let r=t[e];if((r==="-u"||r==="--user")&&e+1<t.length)return t[e+1];if(r.startsWith("-u=")||r.startsWith("--user="))return r.substr(r.indexOf("=")+1)}}async function YR(t,e){let{common:r}=t,n=await bi(t,e);if(t.expectExistingContainer&&!n)throw new ae({description:"The expected container does not exist."});if(n&&(t.removeOnStartup===!0||t.removeOnStartup===n.Id)){let i="Removing Existing Container",s=r.output.start(i);await dt(t,"rm","-f",n.Id),r.output.stop(i,s),n=void 0}return n}async function KR(t,e,r){let{common:n}=t,i=r.State.Status!=="running";if(i){let s="Starting container",o=n.output.start(s);await dt(t,"start",r.Id),n.output.stop(s,o),await bi(t,e)||Ps(n.output,"Dev container not found.")}return i}async function bi(t,e){let r=await ro(t,!0,e);return(await xc(t,r)).filter(i=>i.State.Status!=="removing")[0]}async function JR(t,e,r,n,i,s,o){let{common:a}=t;a.progress(Xr.StartingContainer);let c=e.appPort,u=typeof c=="number"||typeof c=="string"?[c]:c||[],l=[].concat(...u.map(T=>["-p",typeof T=="number"?`127.0.0.1:${T}:${T}`:T])),f=s?["--mount",s]:[],h=e.mounts?[].concat(...e.mounts.map(T=>["--mount",T])):[],d=e.containerEnv,m=d?Object.keys(d).reduce((T,W)=>(T.push("-e",`${W}=${d[W]}`),T),[]):[],p=e.containerUser?["-u",e.containerUser]:[],v=[];((r==null?void 0:r.allFeatures)||[]).some(T=>(Re||T.included)&&T.value&&T.init)&&v.push("--init"),((r==null?void 0:r.allFeatures)||[]).some(T=>(Re||T.included)&&T.value&&T.privileged)&&v.push("--privileged");let w=new Set([].concat(...((r==null?void 0:r.allFeatures)||[]).filter(T=>(Re||T.included)&&T.value).map(T=>T.capAdd||[])));for(let T of w)v.push("--cap-add",T);let b=new Set([].concat(...((r==null?void 0:r.allFeatures)||[]).filter(T=>(Re||T.included)&&T.value).map(T=>T.securityOpt||[])));for(let T of b)v.push("--security-opt",T);let E=[].concat(...[].concat(...((r==null?void 0:r.allFeatures)||[]).map(T=>(Re||T.included)&&T.value&&T.mounts).filter(Boolean),t.additionalMounts).map(T=>["--mount",`type=${T.type},src=${T.source},dst=${T.target}`])),A=((r==null?void 0:r.allFeatures)||[]).map(T=>(Re||T.included)&&T.value&&T.entrypoint).filter(Boolean),M=["--entrypoint","/bin/sh"],R=["-c",`echo Container started
trap "exit 0" 15
${A.join(`
`)}
exec "$@"
while sleep 1 & wait $!; do :; done`,"-"];if(e.overrideCommand===!1&&o){let T=await o();R.push(...T.Config.Entrypoint||[]),R.push(...T.Config.Cmd||[])}let N=["run","--sig-proxy=false","-a","STDOUT","-a","STDERR",...l,...f,...h,...E,...XR(i),...m,...p,...e.runArgs||[],...v,...M,n,...R],I,F=new Promise((T,W)=>I=W),{started:V}=await Na(t,ZR(i),F,a.output,a.getLogLevel()===G.Trace),k="Starting container",O=a.output.start(k),$=ie(H({},jt(t)),{output:we(t.common.output,G.Info)});nt($,...N).then(I,I),await V,a.output.stop(k,O)}function XR(t){let e=[];return t.forEach(r=>e.push("-l",r)),e}function ZR(t){let e={};return t.forEach(r=>{let n=r.split("=");e[n[0]]=n[1]}),e}function Ps(t,e){throw t.write(Pe(e)),new Error(e)}var rb=Q(require("path"));function Rn(t,e){if(Wu(e)){let r=t.dirname(e);return{isWorkspaceFile:!0,workspaceOrFolderPath:e,rootFolderPath:r,configFolderPath:r}}return{isWorkspaceFile:!1,workspaceOrFolderPath:e,rootFolderPath:e,configFolderPath:e}}function Wu(t){return rb.extname(t)===".code-workspace"}async function ib(t,e,r,n){if(e&&!/\/\.?devcontainer\.json$/.test(e.path))throw new Error(`Filename must be devcontainer.json or .devcontainer.json (${$e(e,t.common.cliHost.platform)}).`);let i=t.parsedAuthority;if(!i||Yy(i))return QR(t,i,e,r,n);throw new Error(`Unexpected authority: ${JSON.stringify(i)}`)}async function QR(t,e,r,n,i){let{common:s,workspaceMountConsistencyDefault:o}=t,{cliHost:a,output:c}=s,u=a.cwd,l=e&&Rn(a.path,Wu(e.hostPath)?a.path.join(u,nb.basename(e.hostPath)):u),f=r||(l?await sn(a,l.configFolderPath)||(n?Pt(a,l.configFolderPath):void 0):n),h=f&&await Ei(a,l,f,t.mountWorkspaceGitRoot,c,o,n)||void 0;if(!h)throw f||l?new ae({description:`Dev container config (${$e(f||Pt(a,l.configFolderPath),a.platform)}) not found.`}):new ae({description:"No dev container config and no workspace found."});let d=h.config;await Xy(ie(H({},t),{common:ie(H({},s),{output:s.postCreate.output})}),d.initializeCommand,s.postCreate.onDidInput);let m;if(on(d)||"image"in d)m=await tb(t,d,h.workspaceConfig,i);else if("dockerComposeFile"in d){if(!l)throw new ae({description:"A Dev Container using Docker Compose requires a workspace folder."});m=await My(t,l,d,i)}else throw new ae({description:`Dev container config (${d.configFilePath}) is missing one of "image", "dockerFile" or "dockerComposeFile" properties.`});return m}async function Ei(t,e,r,n,i,s,o){let c=await Hc(t).readDocument(o!=null?o:r);if(!c)return;let u=Bi(c),l=u&&rp(u);if(!l||typeof l!="object"||Array.isArray(l))throw new ae({description:`Dev container config (${$e(r,t.platform)}) must contain a JSON object literal.`});let f=await Ky(t,e,l,n,i,s),h=Th({platform:t.platform,localWorkspaceFolder:e==null?void 0:e.rootFolderPath,containerWorkspaceFolder:f.workspaceFolder,configFile:r,env:t.env},l);return typeof h.workspaceFolder=="string"&&(f.workspaceFolder=h.workspaceFolder),"workspaceMount"in h&&(f.workspaceMount=h.workspaceMount),h.configFilePath=r,{config:h,workspaceConfig:f}}var ab=Q(require("util"));async function cb(t,e){let r=await As(t,e),n=r.common.output,i="Resolving Remote",s=n.start(i),o=await ib(r,t.configFile,t.overrideConfigFile,t.idLabels);n.stop(i,s);let{dockerContainerId:a,composeProjectName:c}=o;return{containerId:a,composeProjectName:c,remoteUser:o.properties.user,remoteWorkspaceFolder:o.properties.remoteWorkspaceFolder,finishBackgroundTasks:async()=>{try{await Xh(o.params.backgroundTasks)}catch(u){n.write(Pe(String(u&&(u.stack||u.message)||u)))}}}}async function As(t,e){let{persistedFolder:r,additionalMounts:n,updateRemoteUserUIDDefault:i,containerDataFolder:s,containerSystemDataFolder:o,workspaceMountConsistency:a,mountWorkspaceGitRoot:c,remoteEnv:u}=t,l;t.workspaceFolder&&(l={hostPath:t.workspaceFolder});let f=sb.join(__dirname,"..",".."),h=new Date,d=await yi(f),m=zu(t,d,h,e),p=void 0,v=t.workspaceFolder||process.cwd(),w=await Ii(v,Fi),b=(await(0,ab.promisify)(ob.randomBytes)(20)).toString("hex"),E={prebuild:t.prebuild,computeExtensionHostEnv:!1,package:d,containerDataFolder:s,containerSystemDataFolder:o,appRoot:p,extensionPath:f,sessionId:b,sessionStart:h,cliHost:w,env:w.env,cwd:v,isLocalContainer:!1,progress:()=>{},output:m,allowSystemConfigChange:!0,defaultUserEnvProbe:t.defaultUserEnvProbe,postCreate:zh(t.postCreateEnabled,t.skipNonBlocking,m),getLogLevel:()=>t.logLevel,onDidChangeLogLevel:()=>({dispose(){}}),loadNativeModule:Fi,shutdowns:[],backgroundTasks:[],persistedFolder:r||await w.tmpdir(),remoteEnv:u,buildxPlatform:t.buildxPlatform,buildxPush:t.buildxPush},A=t.dockerPath||"docker",M=t.dockerComposePath||"docker-compose",R=Hy({exec:w.exec,env:w.env,output:E.output},A,M),N=t.useBuildKit==="never"?null:await ed({cliHost:w,dockerCLI:A,dockerComposeCLI:R,env:w.env,output:m});return{common:E,parsedAuthority:l,dockerCLI:A,dockerComposeCLI:R,dockerEnv:w.env,workspaceMountConsistencyDefault:a,mountWorkspaceGitRoot:c,updateRemoteUserUIDOnMacOS:!1,cacheMount:"bind",removeOnStartup:t.removeExistingContainer,buildNoCache:t.buildNoCache,expectExistingContainer:t.expectExistingContainer,additionalMounts:n,userRepositoryConfigurationPaths:[],updateRemoteUserUIDDefault:i,additionalCacheFroms:t.additionalCacheFroms,buildKitVersion:N,isTTY:process.stdin.isTTY||t.logFormat==="json",buildxPlatform:E.buildxPlatform,buildxPush:E.buildxPush}}function zu(t,e,r,n){let i=`${e.name} ${e.version}.`,s=e_(t,r,i);return s.dimensions=t.terminalDimensions,n.push(()=>s.join()),s}function e_({log:t,logLevel:e,logFormat:r},n,i=void 0){let s=r==="json"?ah(t,()=>e,n):oh(t,()=>e,n);return ie(H({},we(sh([s],i))),{join:async()=>{}})}var Gu="loginInteractiveShell";(async()=>{let t=process.argv.slice(2),e=t[0]==="exec"&&t[1]!=="--help",r=ih([]).parserConfiguration({"boolean-negation":!1,"halt-at-non-option":e}).scriptName("devcontainer").version((await yi(We.join(__dirname,"..",".."))).version).demandCommand().strict();r.wrap(Math.min(120,r.terminalWidth())),r.command("up","Create and run dev container",t_,r_),r.command("build [path]","Build a dev container image",s_,o_),r.command("run-user-commands","Run user commands",l_,u_),r.command("read-configuration","Read configuration",d_,p_),r.command(e?["exec","*"]:["exec <cmd> [args..]"],"Execute a command on a running dev container",g_,v_),r.parse(e?t.slice(1):t)})().catch(console.error);var lb=/^type=(bind|volume),source=([^,]+),target=([^,]+)(?:,external=(true|false))?$/;function t_(t){return t.options({"docker-path":{type:"string",description:"Docker CLI path."},"docker-compose-path":{type:"string",description:"Docker Compose CLI path."},"container-data-folder":{type:"string",description:"Container data folder where user data inside the container will be stored."},"container-system-data-folder":{type:"string",description:"Container system data folder where system data inside the container will be stored."},"workspace-folder":{type:"string",description:"Workspace folder path. The devcontainer.json will be looked up relative to this path."},"workspace-mount-consistency":{choices:["consistent","cached","delegated"],default:"cached",description:"Workspace mount consistency."},"mount-workspace-git-root":{type:"boolean",default:!0,description:"Mount the workspace using its Git root."},"id-label":{type:"string",description:"Id label(s) of the format name=value. These will be set on the container and used to query for an existing container. If no --id-label is given, one will be inferred from the --workspace-folder path."},config:{type:"string",description:"devcontainer.json path. The default is to use .devcontainer/devcontainer.json or, if that does not exist, .devcontainer.json in the workspace folder."},"override-config":{type:"string",description:"devcontainer.json path to override any devcontainer.json in the workspace folder (or built-in configuration). This is required when there is no devcontainer.json otherwise."},"log-level":{choices:["info","debug","trace"],default:"info",description:"Log level for the --terminal-log-file. When set to trace, the log level for --log-file will also be set to trace."},"log-format":{choices:["text","json"],default:"text",description:"Log format."},"terminal-columns":{type:"number",implies:["terminal-rows"],description:"Number of rows to render the output for. This is required for some of the subprocesses to correctly render their output."},"terminal-rows":{type:"number",implies:["terminal-columns"],description:"Number of columns to render the output for. This is required for some of the subprocesses to correctly render their output."},"default-user-env-probe":{choices:["none","loginInteractiveShell","interactiveShell","loginShell"],default:Gu,description:`Default value for the devcontainer.json's "userEnvProbe".`},"update-remote-user-uid-default":{choices:["never","on","off"],default:"on",description:"Default for updating the remote user's UID and GID to the local user's one."},"remove-existing-container":{type:"boolean",default:!1,description:"Removes the dev container if it already exists."},"build-no-cache":{type:"boolean",default:!1,description:"Builds the image with `--no-cache` if the container does not exist."},"expect-existing-container":{type:"boolean",default:!1,description:"Fail if the container does not exist."},"skip-post-create":{type:"boolean",default:!1,description:"Do not run onCreateCommand, updateContentCommand, postCreateCommand, postStartCommand or postAttachCommand and do not install dotfiles."},"skip-non-blocking-commands":{type:"boolean",default:!1,description:"Stop running user commands after running the command configured with waitFor or the updateContentCommand by default."},prebuild:{type:"boolean",default:!1,description:"Stop after onCreateCommand and updateContentCommand, rerunning updateContentCommand if it has run before."},"user-data-folder":{type:"string",description:"Host path to a directory that is intended to be persisted and share state between sessions."},mount:{type:"string",description:"Additional mount point(s). Format: type=<bind|volume>,source=<source>,target=<target>[,external=<true|false>]"},"remote-env":{type:"string",description:"Remote environment variables of the format name=value. These will be added when executing the user commands."},"cache-from":{type:"string",description:"Additional image to use as potential layer cache during image building"},buildkit:{choices:["auto","never"],default:"auto",description:"Control whether BuildKit should be used"}}).check(e=>{let r=e["id-label"]&&(Array.isArray(e["id-label"])?e["id-label"]:[e["id-label"]]);if(r==null?void 0:r.some(s=>!/.+=.+/.test(s)))throw new Error("Unmatched argument format: id-label must match <name>=<value>");if(!(e["workspace-folder"]||e["id-label"]))throw new Error("Missing required argument: workspace-folder or id-label");if(!(e["workspace-folder"]||e["override-config"]))throw new Error("Missing required argument: workspace-folder or override-config");let n=e.mount&&(Array.isArray(e.mount)?e.mount:[e.mount]);if(n==null?void 0:n.some(s=>!lb.test(s)))throw new Error("Unmatched argument format: mount must match type=<bind|volume>,source=<source>,target=<target>[,external=<true|false>]");let i=e["remote-env"]&&(Array.isArray(e["remote-env"])?e["remote-env"]:[e["remote-env"]]);if(i==null?void 0:i.some(s=>!/.+=.+/.test(s)))throw new Error("Unmatched argument format: remote-env must match <name>=<value>");return!0})}function r_(t){(async()=>n_(t))().catch(console.error)}async function n_({"user-data-folder":t,"docker-path":e,"docker-compose-path":r,"container-data-folder":n,"container-system-data-folder":i,"workspace-folder":s,"workspace-mount-consistency":o,"mount-workspace-git-root":a,"id-label":c,config:u,"override-config":l,"log-level":f,"log-format":h,"terminal-rows":d,"terminal-columns":m,"default-user-env-probe":p,"update-remote-user-uid-default":v,"remove-existing-container":w,"build-no-cache":b,"expect-existing-container":E,"skip-post-create":A,"skip-non-blocking-commands":M,prebuild:R,mount:N,"remote-env":I,"cache-from":F,buildkit:V}){let k=s?We.resolve(process.cwd(),s):void 0,O=I?Array.isArray(I)?I:[I]:[],$=F?Array.isArray(F)?F:[F]:[],z={dockerPath:e,dockerComposePath:r,containerDataFolder:n,containerSystemDataFolder:i,workspaceFolder:k,workspaceMountConsistency:o,mountWorkspaceGitRoot:a,idLabels:c?Array.isArray(c)?c:[c]:Ma(k),configFile:u?rt.file(We.resolve(process.cwd(),u)):void 0,overrideConfigFile:l?rt.file(We.resolve(process.cwd(),l)):void 0,logLevel:Nn(f),logFormat:h,log:S=>process.stderr.write(S),terminalDimensions:m&&d?{columns:m,rows:d}:void 0,defaultUserEnvProbe:p,removeExistingContainer:w,buildNoCache:b,expectExistingContainer:E,postCreateEnabled:!A,skipNonBlocking:M,prebuild:R,persistedFolder:t,additionalMounts:N?(Array.isArray(N)?N:[N]).map(S=>{let[,x,L,D,te]=lb.exec(S);return{type:x,source:L,target:D,external:te==="true"}}):[],updateRemoteUserUIDDefault:v,remoteEnv:Vu(O),additionalCacheFroms:$,useBuildKit:V,buildxPlatform:void 0,buildxPush:!1},T=await i_(z),W=T.outcome==="error"?1:0;console.log(JSON.stringify(T)),T.outcome==="success"&&await T.finishBackgroundTasks(),await T.dispose(),process.exit(W)}async function i_(t){let e=[],r=async()=>{await Promise.all(e.map(n=>n()))};try{let n=await cb(t,e);return H({outcome:"success",dispose:r},n)}catch(n){let i=n==null?void 0:n.stack,s=n instanceof ae?n:new ae({description:"An error occurred setting up the container.",originalError:n});return i&&console.error(i),{outcome:"error",message:s.message,description:s.description,containerId:s.containerId,dispose:r}}}function s_(t){return t.options({"user-data-folder":{type:"string",description:"Host path to a directory that is intended to be persisted and share state between sessions."},"docker-path":{type:"string",description:"Docker CLI path."},"docker-compose-path":{type:"string",description:"Docker Compose CLI path."},"workspace-folder":{type:"string",required:!0,description:"Workspace folder path. The devcontainer.json will be looked up relative to this path."},"log-level":{choices:["info","debug","trace"],default:"info",description:"Log level."},"log-format":{choices:["text","json"],default:"text",description:"Log format."},"no-cache":{type:"boolean",default:!1,description:"Builds the image with `--no-cache`."},"image-name":{type:"string",description:"Image name."},"cache-from":{type:"string",description:"Additional image to use as potential layer cache"},buildkit:{choices:["auto","never"],default:"auto",description:"Control whether BuildKit should be used"},platform:{type:"string",description:"Set target platforms."},push:{type:"boolean",default:!1,description:"Push to a container registry."}})}function o_(t){(async()=>a_(t))().catch(console.error)}async function a_(t){let e=await c_(t),r=e.outcome==="error"?1:0;console.log(JSON.stringify(e)),await e.dispose(),process.exit(r)}async function c_({"user-data-folder":t,"docker-path":e,"docker-compose-path":r,"workspace-folder":n,"log-level":i,"log-format":s,"no-cache":o,"image-name":a,"cache-from":c,buildkit:u,platform:l,push:f}){let h=[],d=async()=>{await Promise.all(h.map(m=>m()))};try{let m=We.resolve(process.cwd(),n),p=void 0,v=void 0,w=c?Array.isArray(c)?c:[c]:[],b=await As({dockerPath:e,dockerComposePath:r,containerDataFolder:void 0,containerSystemDataFolder:void 0,workspaceFolder:m,mountWorkspaceGitRoot:!1,idLabels:Ma(m),configFile:p,overrideConfigFile:v,logLevel:Nn(i),logFormat:s,log:z=>process.stderr.write(z),terminalDimensions:void 0,defaultUserEnvProbe:"loginInteractiveShell",removeExistingContainer:!1,buildNoCache:o,expectExistingContainer:!1,postCreateEnabled:!1,skipNonBlocking:!1,prebuild:!1,persistedFolder:t,additionalMounts:[],updateRemoteUserUIDDefault:"never",remoteEnv:{},additionalCacheFroms:w,useBuildKit:u,buildxPlatform:l,buildxPush:f},h),{common:E,dockerCLI:A,dockerComposeCLI:M}=b,{cliHost:R,env:N,output:I}=E,F=Rn(R.path,m),V=p||(F?await sn(R,F.configFolderPath)||(v?Pt(R,F.configFolderPath):void 0):v),k=V&&await Ei(R,F,V,b.mountWorkspaceGitRoot,I,void 0,v)||void 0;if(!k)throw new ae({description:`Dev container config (${$e(p||Pt(R,F.configFolderPath),R.platform)}) not found.`});let{config:O}=k,$="";if(on(O)){let{updatedImageName:z}=await Hu(b,O,a);a?(f||await nt(b,"tag",z,a),$=a):$=z}else if("dockerComposeFile"in O){if(l||f)throw new ae({description:"--platform or --push not supported."});let z=R.path.join(R.cwd,".env"),T=Array.isArray(O.dockerComposeFile)&&O.dockerComposeFile.length===0&&await R.isFile(z)?z:void 0,W=await vo(R,O,R.env,m),S=[].concat(...W.map(Be=>["-f",Be]));T&&S.push("--env-file",T);let x=await Mu(b,F,W),L={cliHost:R,dockerCLI:A,dockerComposeCLI:M,env:N,output:I},D=await Fa(L,W,T);if(Object.keys(D.services||{}).indexOf(O.service)===-1)throw new Error(`Service '${O.service}' configured in devcontainer.json not found in Docker Compose configuration.`);let se=ie(H({},b),{common:ie(H({},b.common),{output:we(L.output,G.Info)})});await Uu(O,x,se,W,T,S,[O.service],b.buildNoCache||!1,b.common.persistedFolder,"docker-compose.devcontainer.build",w);let De=D.services[O.service].image||`${x}_${O.service}`;a?(await nt(b,"tag",De,a),$=a):$=De}else{await nt(b,"pull",O.image);let{updatedImageName:z}=await Da(b,O,O.image,"image"in O);if(l||f)throw new ae({description:"--platform or --push require dockerfilePath."});a?(await nt(b,"tag",z,a),$=a):$=z}return{outcome:"success",imageName:$,dispose:d}}catch(m){let p=m==null?void 0:m.stack,v=m instanceof ae?m:new ae({description:"An error occurred building the container.",originalError:m});return p&&console.error(p),{outcome:"error",message:v.message,description:v.description,dispose:d}}}function l_(t){return t.options({"user-data-folder":{type:"string",description:"Host path to a directory that is intended to be persisted and share state between sessions."},"docker-path":{type:"string",description:"Docker CLI path."},"docker-compose-path":{type:"string",description:"Docker Compose CLI path."},"container-data-folder":{type:"string",description:"Container data folder where user data inside the container will be stored."},"container-system-data-folder":{type:"string",description:"Container system data folder where system data inside the container will be stored."},"workspace-folder":{type:"string",required:!0,description:"Workspace folder path. The devcontainer.json will be looked up relative to this path."},"mount-workspace-git-root":{type:"boolean",default:!0,description:"Mount the workspace using its Git root."},"container-id":{type:"string",description:"Id of the container to run the user commands for."},"id-label":{type:"string",description:"Id label(s) of the format name=value. If no --container-id is given the id labels will be used to look up the container. If no --id-label is given, one will be inferred from the --workspace-folder path."},config:{type:"string",description:"devcontainer.json path. The default is to use .devcontainer/devcontainer.json or, if that does not exist, .devcontainer.json in the workspace folder."},"override-config":{type:"string",description:"devcontainer.json path to override any devcontainer.json in the workspace folder (or built-in configuration). This is required when there is no devcontainer.json otherwise."},"log-level":{choices:["info","debug","trace"],default:"info",description:"Log level for the --terminal-log-file. When set to trace, the log level for --log-file will also be set to trace."},"log-format":{choices:["text","json"],default:"text",description:"Log format."},"terminal-columns":{type:"number",implies:["terminal-rows"],description:"Number of rows to render the output for. This is required for some of the subprocesses to correctly render their output."},"terminal-rows":{type:"number",implies:["terminal-columns"],description:"Number of columns to render the output for. This is required for some of the subprocesses to correctly render their output."},"default-user-env-probe":{choices:["none","loginInteractiveShell","interactiveShell","loginShell"],default:Gu,description:`Default value for the devcontainer.json's "userEnvProbe".`},"skip-non-blocking-commands":{type:"boolean",default:!1,description:"Stop running user commands after running the command configured with waitFor or the updateContentCommand by default."},prebuild:{type:"boolean",default:!1,description:"Stop after onCreateCommand and updateContentCommand, rerunning updateContentCommand if it has run before."},"stop-for-personalization":{type:"boolean",default:!1,description:"Stop for personalization."},"remote-env":{type:"string",description:"Remote environment variables of the format name=value. These will be added when executing the user commands."}}).check(e=>{let r=e["id-label"]&&(Array.isArray(e["id-label"])?e["id-label"]:[e["id-label"]]);if(r==null?void 0:r.some(i=>!/.+=.+/.test(i)))throw new Error("Unmatched argument format: id-label must match <name>=<value>");let n=e["remote-env"]&&(Array.isArray(e["remote-env"])?e["remote-env"]:[e["remote-env"]]);if(n==null?void 0:n.some(i=>!/.+=.+/.test(i)))throw new Error("Unmatched argument format: remote-env must match <name>=<value>");return!0})}function u_(t){(async()=>f_(t))().catch(console.error)}async function f_(t){let e=await h_(t),r=e.outcome==="error"?1:0;console.log(JSON.stringify(e)),await e.dispose(),process.exit(r)}async function h_({"user-data-folder":t,"docker-path":e,"docker-compose-path":r,"container-data-folder":n,"container-system-data-folder":i,"workspace-folder":s,"mount-workspace-git-root":o,"container-id":a,"id-label":c,config:u,"override-config":l,"log-level":f,"log-format":h,"terminal-rows":d,"terminal-columns":m,"default-user-env-probe":p,"skip-non-blocking-commands":v,prebuild:w,"stop-for-personalization":b,"remote-env":E}){let A=[],M=async()=>{await Promise.all(A.map(R=>R()))};try{let R=We.resolve(process.cwd(),s),N=c?Array.isArray(c)?c:[c]:Ma(R),I=E?Array.isArray(E)?E:[E]:[],F=u?rt.file(We.resolve(process.cwd(),u)):void 0,V=l?rt.file(We.resolve(process.cwd(),l)):void 0,k=await As({dockerPath:e,dockerComposePath:r,containerDataFolder:n,containerSystemDataFolder:i,workspaceFolder:R,mountWorkspaceGitRoot:o,idLabels:N,configFile:F,overrideConfigFile:V,logLevel:Nn(f),logFormat:h,log:De=>process.stderr.write(De),terminalDimensions:m&&d?{columns:m,rows:d}:void 0,defaultUserEnvProbe:p,removeExistingContainer:!1,buildNoCache:!1,expectExistingContainer:!1,postCreateEnabled:!0,skipNonBlocking:v,prebuild:w,persistedFolder:t,additionalMounts:[],updateRemoteUserUIDDefault:"never",remoteEnv:Vu(I),additionalCacheFroms:[],useBuildKit:"auto",buildxPlatform:void 0,buildxPush:!1},A),{common:O}=k,{cliHost:$,output:z}=O,T=Rn($.path,R),W=F||(T?await sn($,T.configFolderPath)||(V?Pt($,T.configFolderPath):void 0):V),S=W&&await Ei($,T,W,k.mountWorkspaceGitRoot,z,void 0,V)||void 0;if(!S)throw new ae({description:`Dev container config (${$e(F||Pt($,T.configFolderPath),$.platform)}) not found.`});let{config:x,workspaceConfig:L}=S,D=a?await nr(k,a):await bi(k,N);D||Ps(O.output,"Dev container not found.");let te=await On(k,D.Id,L.workspaceFolder,x.remoteUser),se=to(O,te,x),B=await yc(O,te,x,se,b);return{outcome:"success",result:B,dispose:M}}catch(R){let N=R==null?void 0:R.stack,I=R instanceof ae?R:new ae({description:"An error occurred running user commands in the container.",originalError:R});return N&&console.error(N),{outcome:"error",message:I.message,description:I.description,dispose:M}}}function d_(t){return t.options({"user-data-folder":{type:"string",description:"Host path to a directory that is intended to be persisted and share state between sessions."},"workspace-folder":{type:"string",required:!0,description:"Workspace folder path. The devcontainer.json will be looked up relative to this path."},"mount-workspace-git-root":{type:"boolean",default:!0,description:"Mount the workspace using its Git root."},config:{type:"string",description:"devcontainer.json path. The default is to use .devcontainer/devcontainer.json or, if that does not exist, .devcontainer.json in the workspace folder."},"override-config":{type:"string",description:"devcontainer.json path to override any devcontainer.json in the workspace folder (or built-in configuration). This is required when there is no devcontainer.json otherwise."},"log-level":{choices:["info","debug","trace"],default:"info",description:"Log level for the --terminal-log-file. When set to trace, the log level for --log-file will also be set to trace."},"log-format":{choices:["text","json"],default:"text",description:"Log format."},"terminal-columns":{type:"number",implies:["terminal-rows"],description:"Number of rows to render the output for. This is required for some of the subprocesses to correctly render their output."},"terminal-rows":{type:"number",implies:["terminal-columns"],description:"Number of columns to render the output for. This is required for some of the subprocesses to correctly render their output."},"include-features-configuration":{type:"boolean",default:!1,description:"Include features configuration."}})}function p_(t){(async()=>m_(t))().catch(console.error)}async function m_({"workspace-folder":t,"mount-workspace-git-root":e,config:r,"override-config":n,"log-level":i,"log-format":s,"terminal-rows":o,"terminal-columns":a,"include-features-configuration":c}){let u=[],l=async()=>{await Promise.all(u.map(h=>h()))},f;try{let h=We.resolve(process.cwd(),t),d=r?rt.file(We.resolve(process.cwd(),r)):void 0,m=n?rt.file(We.resolve(process.cwd(),n)):void 0,p=h||process.cwd(),v=await Ii(p,Fi),w=We.join(__dirname,"..",".."),b=new Date,E=await yi(w);f=zu({logLevel:Nn(i),logFormat:s,log:I=>process.stderr.write(I),terminalDimensions:a&&o?{columns:a,rows:o}:void 0},E,b,u);let A=Rn(v.path,h),M=d||(A?await sn(v,A.configFolderPath)||(m?Pt(v,A.configFolderPath):void 0):m),R=M&&await Ei(v,A,M,e,f,void 0,m)||void 0;if(!R)throw new ae({description:`Dev container config (${$e(d||Pt(v,A.configFolderPath),v.platform)}) not found.`});let N=c?await Ia({extensionPath:w,output:f,env:v.env},await ka({cliHost:v,package:E}),R.config,async()=>({}),Cs):void 0;await new Promise((I,F)=>{process.stdout.write(JSON.stringify({configuration:R.config,workspace:R.workspaceConfig,featuresConfiguration:N})+`
`,V=>V?F(V):I())})}catch(h){f?f.write(h&&(h.stack||h.message)||String(h)):console.error(h),await l(),process.exit(1)}await l(),process.exit(0)}function g_(t){return t.options({"user-data-folder":{type:"string",description:"Host path to a directory that is intended to be persisted and share state between sessions."},"docker-path":{type:"string",description:"Docker CLI path."},"docker-compose-path":{type:"string",description:"Docker Compose CLI path."},"container-data-folder":{type:"string",description:"Container data folder where user data inside the container will be stored."},"container-system-data-folder":{type:"string",description:"Container system data folder where system data inside the container will be stored."},"workspace-folder":{type:"string",required:!0,description:"Workspace folder path. The devcontainer.json will be looked up relative to this path."},"mount-workspace-git-root":{type:"boolean",default:!0,description:"Mount the workspace using its Git root."},"container-id":{type:"string",description:"Id of the container to run the user commands for."},"id-label":{type:"string",description:"Id label(s) of the format name=value. If no --container-id is given the id labels will be used to look up the container. If no --id-label is given, one will be inferred from the --workspace-folder path."},config:{type:"string",description:"devcontainer.json path. The default is to use .devcontainer/devcontainer.json or, if that does not exist, .devcontainer.json in the workspace folder."},"override-config":{type:"string",description:"devcontainer.json path to override any devcontainer.json in the workspace folder (or built-in configuration). This is required when there is no devcontainer.json otherwise."},"log-level":{choices:["info","debug","trace"],default:"info",description:"Log level for the --terminal-log-file. When set to trace, the log level for --log-file will also be set to trace."},"log-format":{choices:["text","json"],default:"text",description:"Log format."},"terminal-columns":{type:"number",implies:["terminal-rows"],description:"Number of rows to render the output for. This is required for some of the subprocesses to correctly render their output."},"terminal-rows":{type:"number",implies:["terminal-columns"],description:"Number of columns to render the output for. This is required for some of the subprocesses to correctly render their output."},"default-user-env-probe":{choices:["none","loginInteractiveShell","interactiveShell","loginShell"],default:Gu,description:`Default value for the devcontainer.json's "userEnvProbe".`},"remote-env":{type:"string",description:"Remote environment variables of the format name=value. These will be added when executing the user commands."}}).positional("cmd",{type:"string",description:"Command to execute.",demandOption:!0}).positional("args",{type:"string",array:!0,description:"Arguments to the command.",demandOption:!0}).check(e=>{let r=e["id-label"]&&(Array.isArray(e["id-label"])?e["id-label"]:[e["id-label"]]);if(r==null?void 0:r.some(i=>!/.+=.+/.test(i)))throw new Error("Unmatched argument format: id-label must match <name>=<value>");let n=e["remote-env"]&&(Array.isArray(e["remote-env"])?e["remote-env"]:[e["remote-env"]]);if(n==null?void 0:n.some(i=>!/.+=.+/.test(i)))throw new Error("Unmatched argument format: remote-env must match <name>=<value>");return!0})}function v_(t){(async()=>w_(t))().catch(console.error)}async function w_(t){let e=await y_(t),r=e.outcome==="error"?1:0;console.log(JSON.stringify(e)),await e.dispose(),process.exit(r)}async function y_({"user-data-folder":t,"docker-path":e,"docker-compose-path":r,"container-data-folder":n,"container-system-data-folder":i,"workspace-folder":s,"mount-workspace-git-root":o,"container-id":a,"id-label":c,config:u,"override-config":l,"log-level":f,"log-format":h,"terminal-rows":d,"terminal-columns":m,"default-user-env-probe":p,"remote-env":v,_:w}){let b=[],E=async()=>{await Promise.all(b.map(A=>A()))};try{let A=We.resolve(process.cwd(),s),M=c?Array.isArray(c)?c:[c]:Ma(A),R=v?Array.isArray(v)?v:[v]:[],N=u?rt.file(We.resolve(process.cwd(),u)):void 0,I=l?rt.file(We.resolve(process.cwd(),l)):void 0,F=await As({dockerPath:e,dockerComposePath:r,containerDataFolder:n,containerSystemDataFolder:i,workspaceFolder:A,mountWorkspaceGitRoot:o,idLabels:M,configFile:N,overrideConfigFile:I,logLevel:Nn(f),logFormat:h,log:B=>process.stderr.write(B),terminalDimensions:m&&d?{columns:m,rows:d}:void 0,defaultUserEnvProbe:p,removeExistingContainer:!1,buildNoCache:!1,expectExistingContainer:!1,postCreateEnabled:!0,skipNonBlocking:!1,prebuild:!1,persistedFolder:t,additionalMounts:[],updateRemoteUserUIDDefault:"never",remoteEnv:Vu(R),additionalCacheFroms:[],useBuildKit:"auto",buildxPlatform:void 0,buildxPush:!1},b),{common:V}=F,{cliHost:k,output:O}=V,$=Rn(k.path,A),z=N||($?await sn(k,$.configFolderPath)||(I?Pt(k,$.configFolderPath):void 0):I),T=z&&await Ei(k,$,z,F.mountWorkspaceGitRoot,O,void 0,I)||void 0;if(!T)throw new ae({description:`Dev container config (${$e(N||Pt(k,$.configFolderPath),k.platform)}) not found.`});let{config:W,workspaceConfig:S}=T,x=a?await nr(F,a):await bi(F,M);x||Ps(V.output,"Dev container not found.");let L=await On(F,x.Id,S.workspaceFolder,W.remoteUser),D=to(V,L,W),te=L.remoteWorkspaceFolder||L.homeFolder,se=we(O,G.Info);return await Cc(ie(H({},V),{output:se}),L,w||[],te,{remoteEnv:await D,print:"continuous"}),{outcome:"success",dispose:E}}catch(A){let M=A==null?void 0:A.stack,R=A instanceof ae?A:new ae({description:"An error occurred running a command in the container.",originalError:A});return M&&console.error(M),{outcome:"error",message:R.message,description:R.description,containerId:R.containerId,dispose:E}}}function Vu(t){return t.reduce((e,r)=>{let n=r.indexOf("=");return n!==-1&&(e[r.substring(0,n)]=r.substring(n+1)),e},{})}function Ma(t){return[`${eb}=${t}`]}
/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */
//# sourceMappingURL=devContainersSpecCLI.js.map
