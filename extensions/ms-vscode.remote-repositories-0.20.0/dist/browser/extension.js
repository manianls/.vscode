var fy=Object.defineProperty;var s=(Ac,gs)=>fy(Ac,"name",{value:gs,configurable:!0});(()=>{var Ac={850:(Ft,de,f)=>{"use strict";f.r(de),f.d(de,{AppInsightsCore:()=>ct,BaseCore:()=>Rt,BaseTelemetryPlugin:()=>z.i,CoreUtils:()=>Me.Tr,DiagnosticLogger:()=>R.AQ,ESPromise:()=>Et,ESPromiseScheduler:()=>Yr,EventHelper:()=>Rr.zB,EventLatency:()=>W,EventPersistence:()=>Ve,EventPropertyType:()=>Se,EventsDiscardedReason:()=>Wr.h,FullVersionString:()=>Me.vs,InternalAppInsightsCore:()=>_e,InternalBaseCore:()=>Lt,LoggingSeverity:()=>U,MinChannelPriorty:()=>qn,NotificationManager:()=>ee,PerfEvent:()=>V.zn,PerfManager:()=>V.Jk,ProcessTelemetryContext:()=>De.Vi,TraceLevel:()=>we,Undefined:()=>lr.jA,Utils:()=>Me.cQ,ValueKind:()=>oe,ValueSanitizer:()=>vi,Version:()=>Me.Gf,_ExtendedInternalMessageId:()=>Ae,_InternalLogMessage:()=>R.lQ,_InternalMessageId:()=>pe,__getRegisteredEvents:()=>Gn.um,_throwInternal:()=>R.kP,addEventHandler:()=>Gn.Ib,addEventListeners:()=>Gn.yw,addPageHideEventListener:()=>Gn.TJ,addPageShowEventListener:()=>Gn.nD,addPageUnloadEventListener:()=>Gn.c9,areCookiesSupported:()=>j.p7,arrForEach:()=>D.tO,arrIndexOf:()=>D.UA,arrMap:()=>D.Mr,arrReduce:()=>D.Xz,attachEvent:()=>Gn.pZ,cookieAvailable:()=>j.p7,createCookieMgr:()=>j.Nz,createEnumStyle:()=>M.By,createGuid:()=>Me.cm,createProcessTelemetryContext:()=>De.CD,createTraceParent:()=>Tn.SU,createUniqueNamespace:()=>I.J,createUnloadHandlerContainer:()=>$.Y,dateNow:()=>D.m6,deleteCookie:()=>Me.kT,detachEvent:()=>Gn.pD,disableCookies:()=>Me.oF,disallowsSameSiteNone:()=>j.UY,doPerf:()=>V.Lm,dumpObj:()=>Q.eU,eventOff:()=>Gn.QY,eventOn:()=>Gn.XO,extend:()=>Me.l7,findW3cTraceParent:()=>Tn.lq,formatTraceParent:()=>Tn.aR,generateW3CId:()=>Rr.DO,getCommonSchemaMetaData:()=>Me.Vv,getConsole:()=>Q.dr,getCookie:()=>Me.ej,getCookieValue:()=>Me.Do,getCrypto:()=>Q.MX,getDocument:()=>Q.Me,getExceptionName:()=>D.jj,getFieldValueType:()=>Me.Sy,getGlobal:()=>re.Rd,getGlobalInst:()=>Q.a8,getHistory:()=>Q.s1,getIEVersion:()=>Q.sA,getISOString:()=>D.Y6,getJSON:()=>Q.xA,getLocation:()=>Q.k$,getMsCrypto:()=>Q.gz,getNavigator:()=>Q.jW,getPerformance:()=>Q.r,getSetValue:()=>D.qK,getTenantId:()=>Me.jM,getTime:()=>Me.hK,getWindow:()=>Q.Jj,hasDocument:()=>Q.Nv,hasHistory:()=>Q.fE,hasJSON:()=>Q.nS,hasNavigator:()=>Q.d6,hasOwnProperty:()=>D.nr,hasWindow:()=>Q.Ym,isArray:()=>D.kJ,isArrayValid:()=>Me.JT,isBeaconsSupported:()=>Q.MF,isBoolean:()=>D.jn,isChromium:()=>Me.mJ,isDate:()=>D.J_,isDocumentObjectAvailable:()=>Me.x9,isError:()=>D.VZ,isFetchSupported:()=>Q.JO,isFunction:()=>D.mf,isIE:()=>Q.w1,isLatency:()=>Me.r7,isNotTruthy:()=>D.F,isNullOrUndefined:()=>D.le,isNumber:()=>D.hj,isObject:()=>D.Kn,isReactNative:()=>Q.b$,isSampledFlag:()=>Tn.Pn,isString:()=>D.HD,isTruthy:()=>D.fQ,isTypeof:()=>D.Ym,isUint8ArrayAvailable:()=>Me.IZ,isUndefined:()=>D.o8,isValidSpanId:()=>Tn.Lc,isValidTraceId:()=>Tn.jN,isValidTraceParent:()=>Tn.J6,isValueAssigned:()=>Me.Sn,isValueKind:()=>Me.oS,isWindowObjectAvailable:()=>Me.dH,isXhrSupported:()=>Q.Z3,mergeEvtNamespace:()=>Gn.jU,newGuid:()=>Rr.GW,newId:()=>$r.pZ,normalizeJsName:()=>D.Gf,objCreate:()=>re.pu,objDefineAccessors:()=>D.l_,objForEachKey:()=>D.rW,objFreeze:()=>D.FL,objKeys:()=>D.FY,objSeal:()=>D.Xi,openXhr:()=>Me.ot,optimizeObject:()=>D.Ax,parseTraceParent:()=>Tn.j_,perfNow:()=>Rr.Jj,proxyAssign:()=>D.cf,proxyFunctionAs:()=>D.Oi,proxyFunctions:()=>D.Vb,random32:()=>$r._l,randomValue:()=>$r.az,removeEventHandler:()=>Gn.C1,removeEventListeners:()=>Gn.nJ,removePageHideEventListener:()=>Gn.C9,removePageShowEventListener:()=>Gn.Yl,removePageUnloadEventListener:()=>Gn.JA,safeGetCookieMgr:()=>j.JP,safeGetLogger:()=>R.vH,sanitizeProperty:()=>Me.yj,setCookie:()=>Me.d8,setEnableEnvMocks:()=>Q.dI,setProcessTelemetryTimings:()=>Me.if,setValue:()=>D.sO,strContains:()=>D._Q,strEndsWith:()=>D.Id,strFunction:()=>lr.cb,strObject:()=>lr.fK,strPrototype:()=>lr.hB,strStartsWith:()=>D.xe,strTrim:()=>D.nd,strUndefined:()=>lr.jA,throwError:()=>D._y,toISOString:()=>D.Y6,useXDomainRequest:()=>Q.cp});var K=f(88),M=f(873),D=f(708),U=(0,M.By)({CRITICAL:1,WARNING:2}),pe=(0,M.By)({BrowserDoesNotSupportLocalStorage:0,BrowserCannotReadLocalStorage:1,BrowserCannotReadSessionStorage:2,BrowserCannotWriteLocalStorage:3,BrowserCannotWriteSessionStorage:4,BrowserFailedRemovalFromLocalStorage:5,BrowserFailedRemovalFromSessionStorage:6,CannotSendEmptyTelemetry:7,ClientPerformanceMathError:8,ErrorParsingAISessionCookie:9,ErrorPVCalc:10,ExceptionWhileLoggingError:11,FailedAddingTelemetryToBuffer:12,FailedMonitorAjaxAbort:13,FailedMonitorAjaxDur:14,FailedMonitorAjaxOpen:15,FailedMonitorAjaxRSC:16,FailedMonitorAjaxSend:17,FailedMonitorAjaxGetCorrelationHeader:18,FailedToAddHandlerForOnBeforeUnload:19,FailedToSendQueuedTelemetry:20,FailedToReportDataLoss:21,FlushFailed:22,MessageLimitPerPVExceeded:23,MissingRequiredFieldSpecification:24,NavigationTimingNotSupported:25,OnError:26,SessionRenewalDateIsZero:27,SenderNotInitialized:28,StartTrackEventFailed:29,StopTrackEventFailed:30,StartTrackFailed:31,StopTrackFailed:32,TelemetrySampledAndNotSent:33,TrackEventFailed:34,TrackExceptionFailed:35,TrackMetricFailed:36,TrackPVFailed:37,TrackPVFailedCalc:38,TrackTraceFailed:39,TransmissionFailed:40,FailedToSetStorageBuffer:41,FailedToRestoreStorageBuffer:42,InvalidBackendResponse:43,FailedToFixDepricatedValues:44,InvalidDurationValue:45,TelemetryEnvelopeInvalid:46,CreateEnvelopeError:47,CannotSerializeObject:48,CannotSerializeObjectNonSerializable:49,CircularReferenceDetected:50,ClearAuthContextFailed:51,ExceptionTruncated:52,IllegalCharsInName:53,ItemNotInArray:54,MaxAjaxPerPVExceeded:55,MessageTruncated:56,NameTooLong:57,SampleRateOutOfRange:58,SetAuthContextFailed:59,SetAuthContextFailedAccountName:60,StringValueTooLong:61,StartCalledMoreThanOnce:62,StopCalledWithoutStart:63,TelemetryInitializerFailed:64,TrackArgumentsNotSpecified:65,UrlTooLong:66,SessionStorageBufferFull:67,CannotAccessCookie:68,IdTooLong:69,InvalidEvent:70,FailedMonitorAjaxSetRequestHeader:71,SendBrowserInfoOnUserInit:72,PluginException:73,NotificationException:74,SnippetScriptLoadFailure:99,InvalidInstrumentationKey:100,CannotParseAiBlobValue:101,InvalidContentBlob:102,TrackPageActionEventFailed:103,FailedAddingCustomDefinedRequestContext:104,InMemoryStorageBufferFull:105,InstrumentationKeyDeprecation:106}),oe=(0,M.By)({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,CustomerContent_GenericContent:32}),W=(0,M.By)({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),Se=(0,M.By)({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),Ve=(0,M.By)({Normal:1,Critical:2}),we=(0,M.By)({NONE:0,ERROR:1,WARNING:2,INFORMATION:3}),Ae=(0,D.FL)((0,K.uc)((0,K.uc)({},pe),(0,M.By)({AuthHandShakeError:501,AuthRedirectFail:502,BrowserCannotReadLocalStorage:503,BrowserCannotWriteLocalStorage:504,BrowserDoesNotSupportLocalStorage:505,CannotParseBiBlobValue:506,CannotParseDataAttribute:507,CVPluginNotAvailable:508,DroppedEvent:509,ErrorParsingAISessionCookie:510,ErrorProvidedChannels:511,FailedToGetCookies:512,FailedToInitializeCorrelationVector:513,FailedToInitializeSDK:514,InvalidContentBlob:515,InvalidCorrelationValue:516,SessionRenewalDateIsZero:517,SendPostOnCompleteFailure:518,PostResponseHandler:519,SDKNotInitialized:520}))),R=f(18),V=f(288),Q=f(630),re=f(91),Ee=f(679),De=f(589),Pe=f(833),j=f(242),X=f(171),G=f(158),k=f(41),xe=500,H="Channel has invalid priority - ";function We(lt,ot,ze,ve){ot&&(0,D.kJ)(ot)&&ot.length>0&&(ot=ot.sort(function(Ye,je){return Ye.priority-je.priority}),(0,D.tO)(ot,function(Ye){Ye.priority<xe&&(0,D._y)(H+Ye.identifier)}),lt.push({queue:(0,D.FL)(ot),chain:(0,De.jV)(ot,ze,ve)}))}s(We,"_addChannelQueue");function Ct(lt,ot){var ze;function ve(){return(0,De.CD)(null,ot.config,ot,null)}s(ve,"_getTelCtx");function Ye(Te,et,Oe,dt){var O=Te?Te.length+1:1;function ln(){O--,O===0&&(dt&&dt(),dt=null)}s(ln,"_runChainOnComplete"),O>0&&(0,D.tO)(Te,function(_){if(_&&_.queue.length>0){var le=_.chain,ke=et.createNew(le);ke.onComplete(ln),Oe(ke)}else O--}),ln()}s(Ye,"_processChannelQueue");function je(Te,et){var Oe=et||{reason:0};return Ye(lt,Te,function(dt){dt[k.Z_](Oe)},function(){Te[k.Z_](Oe)}),!0}s(je,"_doUpdate");function Ge(Te,et){var Oe=et||{reason:0,isAsync:!1};return Ye(lt,Te,function(dt){dt[k.Z_](Oe)},function(){Te[k.Z_](Oe),Nt=!1}),!0}s(Ge,"_doTeardown");function _t(Te){var et=null;return lt&&lt.length>0&&(0,D.tO)(lt,function(Oe){if(Oe&&Oe.queue.length>0&&((0,D.tO)(Oe.queue,function(dt){if(dt.identifier===Te)return et=dt,-1}),et))return-1}),et}s(_t,"_getChannel");var Nt=!1,Ut=(ze={identifier:"ChannelControllerPlugin",priority:xe,initialize:function(Te,et,Oe,dt){Nt=!0,(0,D.tO)(lt,function(O){O&&O.queue.length>0&&(0,Pe.bP)((0,De.CD)(O.chain,Te,et),Oe)})},isInitialized:function(){return Nt},processTelemetry:function(Te,et){Ye(lt,et||ve(),function(Oe){Oe[k.Z_](Te)},function(){et[k.Z_](Te)})},update:je},ze[k.nE]=function(){Ye(lt,ve(),function(Te){Te.iterate(function(et){et[k.nE]&&et[k.nE]()})},null)},ze[k.Mf]=function(){Ye(lt,ve(),function(Te){Te.iterate(function(et){et[k.Mf]&&et[k.Mf]()})},null)},ze[k.vE]=Ge,ze.getChannel=_t,ze.flush=function(Te,et,Oe,dt){var O=1,ln=!1,_=null;dt=dt||5e3;function le(){O--,ln&&O===0&&(_&&(clearTimeout(_),_=null),et&&et(ln),et=null)}return s(le,"doCallback"),Ye(lt,ve(),function(ke){ke.iterate(function(Qe){if(Qe.flush){O++;var yt=!1;Qe.flush(Te,function(){yt=!0,le()},Oe)||yt||(Te&&_==null?_=setTimeout(function(){_=null,le()},dt):le())}})},function(){ln=!0,le()}),!0},ze._setQueue=function(Te){lt=Te},ze);return Ut}s(Ct,"createChannelControllerPlugin");function Re(lt,ot,ze,ve){var Ye=[];if(lt&&(0,D.tO)(lt,function(Ge){return We(Ye,Ge,ze,ve)}),ot){var je=[];(0,D.tO)(ot,function(Ge){Ge.priority>xe&&je.push(Ge)}),We(Ye,je,ze,ve)}return Ye}s(Re,"createChannelQueues");var z=f(63),qe=function(lt){(0,K.ne)(ot,lt);function ot(){var ze=lt.call(this)||this;ze.identifier="TelemetryInitializerPlugin",ze.priority=199;var ve,Ye;je(),(0,Ee.Z)(ot,ze,function(Ge,_t){Ge.addTelemetryInitializer=function(Nt){var Ut={id:ve++,fn:Nt};Ye.push(Ut);var Te={remove:function(){(0,D.tO)(Ye,function(et,Oe){if(et.id===Ut.id)return Ye.splice(Oe,1),-1})}};return Te},Ge.processTelemetry=function(Nt,Ut){for(var Te=!1,et=Ye.length,Oe=0;Oe<et;++Oe){var dt=Ye[Oe];if(dt)try{if(dt.fn.apply(null,[Nt])===!1){Te=!0;break}}catch(O){(0,R.kP)(Ut.diagLog(),1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+(0,D.jj)(O),{exception:(0,Q.eU)(O)},!0)}}Te||Ge.processNext(Nt,Ut)},Ge[k.Ho]=function(){je()}});function je(){ve=0,Ye=[]}return s(je,"_initDefaults"),ze}return s(ot,"TelemetryInitializerPlugin"),ot}(z.i),I=f(883),$=f(310),L="Plugins must provide initialize method",ae="_notificationManager",ut="SDK is still unloading...",Je="SDK is not initialized",Qt={loggingLevelConsole:1};function Yt(lt,ot){return new V.Jk(ot)}s(Yt,"_createPerfManager");function ne(lt,ot,ze){var ve=[],Ye={};return(0,D.tO)(ze,function(je){((0,D.le)(je)||(0,D.le)(je.initialize))&&(0,D._y)(L);var Ge=je.priority,_t=je.identifier;je&&Ge&&((0,D.le)(Ye[Ge])?Ye[Ge]=_t:(0,R.jV)(lt,"Two extensions have same priority #"+Ge+" - "+Ye[Ge]+", "+_t)),(!Ge||Ge<ot)&&ve.push(je)}),{all:ze,core:ve}}s(ne,"_validateExtensions");function be(lt,ot){var ze=!1;return(0,D.tO)(ot,function(ve){if(ve===lt)return ze=!0,-1}),ze}s(be,"_isPluginPresent");function Ne(){var lt;return(0,re.pu)((lt={},lt[k.dV]=function(ot){},lt[k.XP]=function(ot){},lt[k.eO]=function(ot){},lt[k.H4]=function(ot,ze){},lt[k.rX]=function(ot,ze){},lt))}s(Ne,"_createDummyNotificationManager");var Lt=function(){function lt(){var ot,ze,ve,Ye,je,Ge,_t,Nt,Ut,Te,et,Oe,dt,O,ln,_,le,ke,Qe,yt=0;(0,Ee.Z)(lt,this,function(J){He(),J.isInitialized=function(){return ot},J.initialize=function(te,At,bt,it){dt&&(0,D._y)(ut),J.isInitialized()&&(0,D._y)("Core should not be initialized more than once"),(!te||(0,D.le)(te.instrumentationKey))&&(0,D._y)("Please provide instrumentation key"),ve=it,J[ae]=it,J.config=te||{},qt(te),nn(te),te.extensions=(0,D.le)(te.extensions)?[]:te.extensions,En(te),bt&&(J.logger=bt),Nt=[],Nt.push.apply(Nt,(0,K.$h)((0,K.$h)([],At,!1),te.extensions,!1)),et=(te||{}).channels,Ue(te,null),(!Oe||Oe.length===0)&&(0,D._y)("No channels available"),ot=!0,J.releaseQueue()},J.getTransmissionControls=function(){var te=[];return Oe&&(0,D.tO)(Oe,function(At){te.push(At.queue)}),(0,D.FL)(te)},J.track=function(te){(0,D.sO)(te,X.z,J.config.instrumentationKey,null,D.F),(0,D.sO)(te,"time",(0,D.Y6)(new Date),null,D.F),(0,D.sO)(te,"ver","4.0",null,D.le),!dt&&J.isInitialized()?St().processNext(te):ze.push(te)},J.getProcessTelContext=St,J.getNotifyMgr=function(){return ve||(ve=Ne(),J[ae]=ve),ve},J[k.dV]=function(te){ve&&ve[k.dV](te)},J[k.XP]=function(te){ve&&ve[k.XP](te)},J.getCookieMgr=function(){return Ge||(Ge=(0,j.Nz)(J.config,J.logger)),Ge},J.setCookieMgr=function(te){Ge=te},J.getPerfMgr=function(){return!Ye&&!je&&J.config&&J.config.enablePerfMgr&&(0,D.mf)(J.config.createPerfMgr)&&(je=J.config.createPerfMgr(J,J.getNotifyMgr())),Ye||je||(0,V.j5)()},J.setPerfMgr=function(te){Ye=te},J.eventCnt=function(){return ze.length},J.releaseQueue=function(){if(ot&&ze.length>0){var te=ze;ze=[],(0,D.tO)(te,function(At){St().processNext(At)})}},J.pollInternalLogs=function(te){ln=te||null;var At=J.config.diagnosticLogInterval;return(!At||!(At>0))&&(At=1e4),yt&&clearInterval(yt),yt=setInterval(function(){tt()},At),yt},J.stopPollingInternalLogs=function(){yt&&(clearInterval(yt),yt=0,tt())},(0,D.Vb)(J,function(){return O},["addTelemetryInitializer"]),J.unload=function(te,At,bt){te===void 0&&(te=!0),ot||(0,D._y)(Je),dt&&(0,D._y)(ut);var it={reason:50,isAsync:te,flushComplete:!1},zt=(0,De.Bt)(Dt(),J);zt.onComplete(function(){He(),At&&At(it)},J);function Kt(jt){it.flushComplete=jt,dt=!0,le.run(zt,it),J.stopPollingInternalLogs(),zt.processNext(it)}s(Kt,"_doUnload"),$t(te,Kt,6,bt)||Kt(!1)},J.getPlugin=Ie,J.addPlugin=function(te,At,bt,it){if(!te){it&&it(!1),pn(L);return}var zt=Ie(te.identifier);if(zt&&!At){it&&it(!1),pn("Plugin ["+te.identifier+"] is already loaded!");return}var Kt={reason:16};function jt(rn){Nt.push(te),Kt.added=[te],Ue(J.config,Kt),it&&it(!0)}if(s(jt,"_addPlugin"),zt){var dn=[zt.plugin],Bt={reason:2,isAsync:!!bt};xt(dn,Bt,function(rn){rn?(Kt.removed=dn,Kt.reason|=32,jt(!0)):it&&it(!1)})}else jt(!1)},J.evtNamespace=function(){return _},J.flush=$t,J.getTraceCtx=function(te){return Qe||(Qe=(0,Pe.Yn)()),Qe},J.setTraceCtx=function(te){Qe=te||null},(0,D.Oi)(J,"addUnloadCb",function(){return le},"add");function He(){ot=!1,J.config=(0,D.mm)(!0,{},Qt),J.logger=new R.AQ(J.config),J._extensions=[],O=new qe,ze=[],ve=null,Ye=null,je=null,Ge=null,_t=null,Ut=null,Nt=[],Te=null,et=null,Oe=null,dt=!1,ln=null,_=(0,I.J)("AIBaseCore",!0),le=(0,$.Y)(),Qe=null}s(He,"_initDefaults");function St(){return(0,De.CD)(Dt(),J.config,J)}s(St,"_createTelCtx");function Ue(te,At){var bt=ne(J.logger,xe,Nt);Ut=bt.core,_t=null;var it=bt.all;if(Oe=(0,D.FL)(Re(et,it,te,J)),Te){var zt=(0,D.UA)(it,Te);zt!==-1&&it.splice(zt,1),zt=(0,D.UA)(Ut,Te),zt!==-1&&Ut.splice(zt,1),Te._setQueue(Oe)}else Te=Ct(Oe,J);it.push(Te),Ut.push(Te),J._extensions=(0,Pe.AA)(it),Te.initialize(te,J,it),(0,Pe.bP)(St(),it),J._extensions=(0,D.FL)((0,Pe.AA)(Ut||[])).slice(),At&&$n(At)}s(Ue,"_initPluginChain");function Ie(te){var At=null,bt=null;return(0,D.tO)(J._extensions,function(it){if(it.identifier===te&&it!==Te&&it!==O)return bt=it,-1}),!bt&&Te&&(bt=Te.getChannel(te)),bt&&(At={plugin:bt,setEnabled:function(it){(0,Pe.OY)(bt)[k.C0]=!it},isEnabled:function(){var it=(0,Pe.OY)(bt);return!it[k.vE]&&!it[k.C0]},remove:function(it,zt){it===void 0&&(it=!0);var Kt=[bt],jt={reason:1,isAsync:it};xt(Kt,jt,function(dn){dn&&Ue(J.config,{reason:32,removed:Kt}),zt&&zt(dn)})}}),At}s(Ie,"_getPlugin");function Dt(){if(!_t){var te=(Ut||[]).slice();(0,D.UA)(te,O)===-1&&te.push(O),_t=(0,De.jV)((0,Pe.AA)(te),J.config,J)}return _t}s(Dt,"_getPluginChain");function xt(te,At,bt){if(te&&te.length>0){var it=(0,De.jV)(te,J.config,J),zt=(0,De.Bt)(it,J);zt.onComplete(function(){var Kt=!1,jt=[];(0,D.tO)(Nt,function(Bt,rn){be(Bt,te)?Kt=!0:jt.push(Bt)}),Nt=jt;var dn=[];et&&((0,D.tO)(et,function(Bt,rn){var yn=[];(0,D.tO)(Bt,function(Nn){be(Nn,te)?Kt=!0:yn.push(Nn)}),dn.push(yn)}),et=dn),bt&&bt(Kt)}),zt.processNext(At)}else bt(!1)}s(xt,"_removePlugins");function tt(){var te=J.logger?J.logger.queue:[];te&&((0,D.tO)(te,function(At){var bt={name:ln||"InternalMessageId: "+At.messageId,iKey:J.config.instrumentationKey,time:(0,D.Y6)(new Date),baseType:R.lQ.dataType,baseData:{message:At.message}};J.track(bt)}),te.length=0)}s(tt,"_flushInternalLogs");function $t(te,At,bt,it){return Te?Te.flush(te,At,bt||6,it):(At&&At(!1),!0)}s($t,"_flushChannels");function qt(te){te.disableDbgExt===!0&&ke&&(ve[k.XP](ke),ke=null),ve&&!ke&&te.disableDbgExt!==!0&&(ke=(0,G.p)(te),ve[k.dV](ke))}s(qt,"_initDebugListener");function nn(te){!te.enablePerfMgr&&je&&(je=null),te.enablePerfMgr&&(0,D.sO)(J.config,"createPerfMgr",Yt)}s(nn,"_initPerfManager");function En(te){var At=(0,D.qK)(te,X.F);At.NotificationManager=ve}s(En,"_initExtConfig");function $n(te){var At=(0,De.xy)(Dt(),J);(!J._updateHook||J._updateHook(At,te)!==!0)&&At.processNext(te)}s($n,"_doUpdate");function pn(te){var At=J.logger;At?(0,R.kP)(At,2,73,te):(0,D._y)(te)}s(pn,"_logOrThrowError")})}return s(lt,"BaseCore"),lt}();function rt(lt,ot,ze,ve){(0,D.tO)(lt,function(Ye){if(Ye&&Ye[ot])if(ze)setTimeout(function(){return ve(Ye)},0);else try{ve(Ye)}catch(je){}})}s(rt,"_runListeners");var ee=function(){function lt(ot){this.listeners=[];var ze=!!(ot||{}).perfEvtsSendAll;(0,Ee.Z)(lt,this,function(ve){ve[k.dV]=function(Ye){ve.listeners.push(Ye)},ve[k.XP]=function(Ye){for(var je=(0,D.UA)(ve.listeners,Ye);je>-1;)ve.listeners.splice(je,1),je=(0,D.UA)(ve.listeners,Ye)},ve[k.eO]=function(Ye){rt(ve.listeners,k.eO,!0,function(je){je[k.eO](Ye)})},ve[k.H4]=function(Ye,je){rt(ve.listeners,k.H4,!0,function(Ge){Ge[k.H4](Ye,je)})},ve[k.rX]=function(Ye,je){rt(ve.listeners,k.rX,je,function(Ge){Ge[k.rX](Ye,je)})},ve[k.SN]=function(Ye){Ye&&(ze||!Ye.isChildEvt())&&rt(ve.listeners,k.SN,!1,function(je){Ye.isAsync?setTimeout(function(){return je[k.SN](Ye)},0):je[k.SN](Ye)})}})}return s(lt,"NotificationManager"),lt}(),_e=function(lt){(0,K.ne)(ot,lt);function ot(){var ze=lt.call(this)||this;return(0,Ee.Z)(ot,ze,function(ve,Ye){ve.initialize=function(_t,Nt,Ut,Te){Ye.initialize(_t,Nt,Ut||new R.AQ(_t),Te||new ee(_t))},ve.track=function(_t){(0,V.Lm)(ve.getPerfMgr(),function(){return"AppInsightsCore:track"},function(){_t===null&&(Ge(_t),(0,D._y)("Invalid telemetry item")),je(_t),Ye.track(_t)},function(){return{item:_t}},!_t.sync)};function je(_t){(0,D.le)(_t.name)&&(Ge(_t),(0,D._y)("telemetry name required"))}s(je,"_validateTelemetryItem");function Ge(_t){var Nt=ve.getNotifyMgr();Nt&&Nt.eventsDiscarded([_t],2)}s(Ge,"_notifyInvalidEvent")}),ze}return s(ot,"AppInsightsCore"),ot}(Lt),Me=f(599),B="version",me="properties",ye=function(lt){(0,K.ne)(ot,lt);function ot(){var ze=lt.call(this)||this;return ze.pluginVersionStringArr=[],ze.pluginVersionString="",(0,Ee.Z)(ot,ze,function(ve,Ye){(!ve.logger||!ve.logger.queue)&&(ve.logger=new R.AQ({loggingLevelConsole:1})),ve.initialize=function(je,Ge,_t,Nt){(0,V.Lm)(ve,function(){return"AppInsightsCore.initialize"},function(){if(je){je.endpointUrl||(je.endpointUrl="https://browser.events.data.microsoft.com/OneCollector/1.0/");var Ut=je.propertyStorageOverride;if(Ut&&(!Ut.getProperty||!Ut.setProperty))throw new Error("Invalid property storage override passed.");je.channels&&(0,D.tO)(je.channels,function(Oe){Oe&&(0,D.tO)(Oe,function(dt){if(dt.identifier&&dt.version){var O=dt.identifier+"="+dt.version;ve.pluginVersionStringArr.push(O)}})})}ve.getWParam=function(){return typeof document!="undefined"?0:-1},Ge&&(0,D.tO)(Ge,function(Oe){if(Oe&&Oe.identifier&&Oe.version){var dt=Oe.identifier+"="+Oe.version;ve.pluginVersionStringArr.push(dt)}}),ve.pluginVersionString=ve.pluginVersionStringArr.join(";");try{Ye.initialize(je,Ge,_t,Nt),ve.pollInternalLogs("InternalLog")}catch(Oe){var Te=ve.logger,et=(0,Q.eU)(Oe);et.indexOf("channels")!==-1&&(et+=`
 - Channels must be provided through config.channels only!`),Te.throwInternal(1,514,"SDK Initialization Failed - no telemetry will be sent: "+et)}},function(){return{config:je,extensions:Ge,logger:_t,notificationManager:Nt}})},ve.track=function(je){(0,V.Lm)(ve,function(){return"AppInsightsCore.track"},function(){var Ge=je;if(Ge){Ge.timings=Ge.timings||{},Ge.timings.trackStart=(0,Me.hK)(),(0,Me.r7)(Ge.latency)||(Ge.latency=1);var _t=Ge.ext=Ge.ext||{};_t.sdk=_t.sdk||{},_t.sdk.ver=Me.vs;var Nt=Ge.baseData=Ge.baseData||{};Nt[me]||(Nt[me]={});var Ut=Nt[me];Ut[B]||(Ut[B]=""),ve.pluginVersionString!==""&&(Ut[B]=ve.pluginVersionString)}Ye.track(Ge)},function(){return{item:je}},!je.sync)}}),ze}return s(ot,"AppInsightsCore"),ot}(_e);const ct=ye;var at=function(lt){(0,K.ne)(ot,lt);function ot(){var ze=lt.call(this)||this;return(0,Ee.Z)(ot,ze,function(ve,Ye){ve.initialize=function(je,Ge,_t,Nt){je&&!je.endpointUrl&&(je.endpointUrl="https://browser.events.data.microsoft.com/OneCollector/1.0/"),ve.getWParam=function(){return Me.x9?0:-1};try{Ye.initialize(je,Ge,_t,Nt)}catch(Ut){(0,R.kP)(ve.logger,1,514,"Initialization Failed: "+(0,Q.eU)(Ut)+`
 - Note: Channels must be provided through config.channels only`)}},ve.track=function(je){var Ge=je;if(Ge){var _t=Ge.ext=Ge.ext||{};_t.sdk=_t.sdk||{},_t.sdk.ver=Me.vs}Ye.track(Ge)}}),ze}return s(ot,"BaseCore"),ot}(Lt);const Rt=at;var mt=D.mf;function cn(lt,ot,ze){return function(ve){lt[ot]=ve,ze()}}s(cn,"_createPromiseAllOnResolvedFunction");var mn=function(){function lt(ot){var ze=0,ve=null,Ye=[];(0,Ee.Z)(lt,this,function(Ut){Ut.then=function(Te,et){return new lt(function(Oe,dt){je(Te,et,Oe,dt)})},Ut.catch=function(Te){return Ut.then(null,Te)}});function je(Ut,Te,et,Oe){Ye.push(function(){var dt;try{ze===1?dt=mt(Ut)?Ut(ve):ve:dt=mt(Te)?Te(ve):ve,dt instanceof lt?dt.then(et,Oe):ze===2&&!mt(Te)?Oe(dt):et(dt)}catch(O){Oe(O);return}}),ze!==0&&Ge()}s(je,"_enqueue");function Ge(){if(Ye.length>0){var Ut=Ye.slice();Ye=[],setTimeout(function(){for(var Te=0,et=Ut.length;Te<et;++Te)try{Ut[Te]()}catch(Oe){}},0)}}s(Ge,"_processQueue");function _t(Ut){ze===0&&(ve=Ut,ze=1,Ge())}s(_t,"_resolve");function Nt(Ut){ze===0&&(ve=Ut,ze=2,Ge())}s(Nt,"_reject"),s(function(){if(!mt(ot))throw new TypeError("ESPromise: resolvedFunc argument is not a Function");try{ot(_t,Nt)}catch(Te){Nt(Te)}},"_initialize")()}return s(lt,"ESPromise"),lt.resolve=function(ot){return ot instanceof lt?ot:ot&&mt(ot.then)?new lt(function(ze,ve){try{ot.then(ze,ve)}catch(Ye){ve(Ye)}}):new lt(function(ze){ze(ot)})},lt.reject=function(ot){return new lt(function(ze,ve){ve(ot)})},lt.all=function(ot){if(!(!ot||!ot.length))return new lt(function(ze,ve){try{for(var Ye=[],je=0,Ge=0;Ge<ot.length;Ge++){var _t=ot[Ge];_t&&mt(_t.then)?(je++,_t.then(cn(Ye,Ge,function(){--je==0&&ze(Ye)}),ve)):Ye[Ge]=_t}je===0&&setTimeout(function(){ze(Ye)},0)}catch(Nt){ve(Nt)}})},lt.race=function(ot){return new lt(function(ze,ve){if(!(!ot||!ot.length))try{for(var Ye=s(function(Ge){var _t=ot[Ge];_t&&mt(_t.then)?_t.then(ze,ve):setTimeout(function(){ze(_t)},0)},"_loop_1"),je=0;je<ot.length;je++)Ye(je)}catch(Ge){ve(Ge)}})},lt}();const Et=mn;var Ht=6e5,Xt=0,ce=[],tr=[],Xr=[];function cr(){return new Date().getTime()}s(cr,"_getTime");var Jr=function(){function lt(ot,ze){var ve=0,Ye=(ot||"<unnamed>")+"."+Xt;Xt++,(0,Ee.Z)(lt,this,function(_t){var Nt=null,Ut=0;_t.scheduleEvent=function(et,Oe,dt){var O=Ye+"."+Ut;Ut++,Oe&&(O+="-("+Oe+")");var ln=O+"{"+ve+"}";ve++;var _={evt:null,tm:cr(),id:ln,isRunning:!1,isAborted:!1};return Nt?_.evt=St(_,Nt):_.evt=He(_),Nt=_,Nt.evt._schId=ln,_.evt;function le(Ue){for(var Ie=cr(),Dt=Ie-Ht,xt=Ue.length,tt=0;tt<xt;){var $t=Ue[tt];if($t&&$t.tm<Dt){var qt=null;$t.abort?(qt="Aborting ["+$t.id+"] due to Excessive runtime ("+(Ie-$t.tm)+" ms)",$t.abort(qt)):qt="Removing ["+$t.id+"] due to Excessive runtime ("+(Ie-$t.tm)+" ms)",Ge(qt),Ue.splice(tt,1),xt--}else tt++}}s(le,"_abortAndRemoveOldEvents");function ke(Ue,Ie){var Dt=!1,xt=Te(ce,Ue);if(xt||(xt=Te(Xr,Ue),Dt=!0),xt){xt.to&&(clearTimeout(xt.to),xt.to=null);var tt=cr()-xt.tm;Ie?Dt?Ge("Timed out event ["+Ue+"] finally complete -- "+tt+" ms"):je("Promise ["+Ue+"] Complete -- "+tt+" ms"):(Xr.push(xt),Ge("Event ["+Ue+"] Timed out and removed -- "+tt+" ms"))}else je("Failed to remove ["+Ue+"] from running queue");Nt&&Nt.id===Ue&&(Nt=null),le(ce),le(tr),le(Xr)}s(ke,"_cleanup");function Qe(Ue,Ie){return function(Dt){return ke(Ue,!0),Ie&&Ie(Dt),Dt}}s(Qe,"_removeScheduledEvent");function yt(Ue,Ie,Dt,xt){Ie.then(function(tt){return tt instanceof Et?(je("Event ["+Ue+"] returned a promise -- waiting"),yt(Ue,tt,Dt,xt),tt):Qe(Ue,Dt)(tt)},Qe(Ue,xt))}s(yt,"_waitForFinalResult");function J(Ue,Ie){var Dt=Ue.id;return new Et(function(xt,tt){je("Event ["+Dt+"] Starting -- waited for "+(Ue.wTm||"--")+" ms"),Ue.isRunning=!0,Ue.abort=function(qt){Ue.abort=null,Ue.isAborted=!0,ke(Dt,!1),tt(new Error(qt))};var $t=Ie(Dt);$t instanceof Et?(dt&&(Ue.to=setTimeout(function(){ke(Dt,!1),tt(new Error("Timed out after ["+dt+"] ms"))},dt)),yt(Dt,$t,function(qt){je("Event ["+Dt+"] Resolving after "+(cr()-Ue.tm)+" ms"),xt(qt)},tt)):(je("Promise ["+Dt+"] Auto completed as the start action did not return a promise"),xt())})}s(J,"_createScheduledEvent");function He(Ue){var Ie=cr();return Ue.wTm=Ie-Ue.tm,Ue.tm=Ie,Ue.isAborted?Et.reject(new Error("["+O+"] was aborted")):(ce.push(Ue),J(Ue,et))}s(He,"_startWaitingEvent");function St(Ue,Ie){var Dt=new Et(function(xt,tt){var $t=cr()-Ie.tm,qt=Ie.id;je("["+O+"] is waiting for ["+qt+":"+$t+" ms] to complete before starting -- ["+tr.length+"] waiting and ["+ce.length+"] running"),Ue.abort=function(nn){Ue.abort=null,Te(tr,O),Ue.isAborted=!0,tt(new Error(nn))},Ie.evt.then(function(nn){Te(tr,O),He(Ue).then(xt,tt)},function(nn){Te(tr,O),He(Ue).then(xt,tt)})});return tr.push(Ue),Dt}s(St,"_waitForPreviousEvent")};function Te(et,Oe){for(var dt=0;dt<et.length;dt++)if(et[dt].id===Oe)return et.splice(dt,1)[0];return null}s(Te,"_removeQueuedEvent")});function je(_t){var Nt=(0,re.Rd)();Nt&&Nt.QUnit&&console&&console.log("ESPromiseScheduler["+Ye+"] "+_t)}s(je,"_debugLog");function Ge(_t){ze&&ze.warnToConsole("ESPromiseScheduler["+Ye+"] "+_t)}s(Ge,"_warnLog")}return s(lt,"ESPromiseScheduler"),lt.incomplete=function(){return ce},lt.waitingToStart=function(){return tr},lt}();const Yr=Jr;var vi=function(){function lt(ot){var ze=this,ve={},Ye=[],je=[];ot&&je.push(ot);function Ge(Te,et){var Oe,dt=ve[Te];if(dt&&(Oe=dt[et]),!Oe&&Oe!==null){if((0,D.HD)(Te)&&(0,D.HD)(et))if(je.length>0){for(var O=0;O<je.length;O++)if(je[O].handleField(Te,et)){Oe={canHandle:!0,fieldHandler:je[O]};break}}else Ye.length===0&&(Oe={canHandle:!0});if(!Oe&&Oe!==null){Oe=null;for(var O=0;O<Ye.length;O++)if(Ye[O].handleField(Te,et)){Oe={canHandle:!0,handler:Ye[O],fieldHandler:null};break}}dt||(dt=ve[Te]={}),dt[et]=Oe}return Oe}s(Ge,"_getFieldSanitizer"),ze.addSanitizer=function(Te){Te&&(Ye.push(Te),ve={})},ze.addFieldSanitizer=function(Te){Te&&(je.push(Te),ve={})},ze.handleField=function(Te,et){var Oe=Ge(Te,et);return Oe?Oe.canHandle:!1},ze.value=function(Te,et,Oe,dt){var O=Ge(Te,et);if(O&&O.canHandle){if(!O||!O.canHandle)return null;if(O.handler)return O.handler.value(Te,et,Oe,dt);if(!(0,D.HD)(et)||(0,D.le)(Oe)||Oe==="")return null;var ln=null,_=(0,Me.Sy)(Oe);if((_&8192)==8192){var le=_&~8192;if(ln=Oe,!(0,Me.Sn)(ln.value)||le!==1&&le!==2&&le!==3&&(le&4096)!=4096)return null}else _===1||_===2||_===3||(_&4096)==4096?ln=Nt(Te,et,Oe):_===4&&(ln=Nt(Te,et,dt?JSON.stringify(Oe):Oe));if(ln)return _t(O,Te,et,_,ln,dt)}return null},ze.property=function(Te,et,Oe,dt){var O=Ge(Te,et);if(!O||!O.canHandle||!(0,D.HD)(et)||(0,D.le)(Oe)||!(0,Me.Sn)(Oe.value))return null;var ln=(0,Me.Sy)(Oe.value);return ln===0?null:_t(O,Te,et,ln,Oe,dt)};function _t(Te,et,Oe,dt,O,ln){if(Te.handler)return Te.handler.property(et,Oe,O,ln);if(!(0,D.le)(O.kind)){if((dt&4096)==4096||!(0,Me.oS)(O.kind))return null;O.value=O.value.toString()}return Ut(Te.fieldHandler,et,Oe,dt,O)}s(_t,"_handleProperty");function Nt(Te,et,Oe){return(0,Me.Sn)(Oe)?{value:Oe}:null}s(Nt,"_convertToProperty");function Ut(Te,et,Oe,dt,O){if(O&&Te){var ln=Te.getSanitizer(et,Oe,dt,O.kind,O.propertyType);if(ln)if(dt===4){var _={},le=O.value;(0,D.rW)(le,function(Qe,yt){var J=et+"."+Oe;if((0,Me.Sn)(yt)){var He=Nt(J,Qe,yt);He=Ut(Te,J,Qe,(0,Me.Sy)(yt),He),He&&(_[Qe]=He.value)}}),O.value=_}else{var ke={path:et,name:Oe,type:dt,prop:O,sanitizer:ze};O=ln.call(ze,ke)}}return O}s(Ut,"_callFieldSanitizer")}return s(lt,"ValueSanitizer"),lt.getFieldType=Me.Sy,lt}(),qn=100,Wr=f(928),Rr=f(843),Gn=f(869),$r=f(878),lr=f(392),Tn=f(206)},599:(Ft,de,f)=>{"use strict";f.d(de,{Gf:()=>we,vs:()=>Ae,x9:()=>De,dH:()=>Pe,Sn:()=>j,jM:()=>X,IZ:()=>G,r7:()=>k,yj:()=>xe,Vv:()=>H,oF:()=>We,d8:()=>Ct,kT:()=>Re,ej:()=>z,Do:()=>qe,cm:()=>I,l7:()=>$,hK:()=>L,oS:()=>ae,JT:()=>Qt,if:()=>Yt,Sy:()=>ne,cQ:()=>be,Tr:()=>Ne,mJ:()=>Lt,ot:()=>rt});var K=f(392),M=f(91),D=f(630),U=f(708),pe=f(242),oe=f(843),W=f(869),Se=f(878),Ve,we="3.2.3",Ae="1DS-Web-JS-"+we,R="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",V="withCredentials",Q="timeout",re=(Ve={},Ve[0]=0,Ve[2]=6,Ve[1]=1,Ve[3]=7,Ve[4096|2]=6,Ve[4096|1]=1,Ve[4096|3]=7,Ve),Ee=null,De=Boolean((0,D.Me)()),Pe=Boolean((0,D.Jj)());function j(ee){return!(ee===""||(0,U.le)(ee))}s(j,"isValueAssigned");function X(ee){if(ee){var _e=ee.indexOf("-");if(_e>-1)return ee.substring(0,_e)}return""}s(X,"getTenantId");function G(){return Ee===null&&(Ee=!(0,U.o8)(Uint8Array)&&!Je()&&!(0,D.b$)()),Ee}s(G,"isUint8ArrayAvailable");function k(ee){return!!(ee&&(0,U.hj)(ee)&&ee>=1&&ee<=4)}s(k,"isLatency");function xe(ee,_e,Me){if(!_e&&!j(_e)||typeof ee!="string")return null;var B=typeof _e;if(B==="string"||B==="number"||B==="boolean"||(0,U.kJ)(_e))_e={value:_e};else if(B==="object"&&!_e.hasOwnProperty("value"))_e={value:Me?JSON.stringify(_e):_e};else if((0,U.le)(_e.value)||_e.value===""||!(0,U.HD)(_e.value)&&!(0,U.hj)(_e.value)&&!(0,U.jn)(_e.value)&&!(0,U.kJ)(_e.value))return null;if((0,U.kJ)(_e.value)&&!Qt(_e.value))return null;if(!(0,U.le)(_e.kind)){if((0,U.kJ)(_e.value)||!ae(_e.kind))return null;_e.value=_e.value.toString()}return _e}s(xe,"sanitizeProperty");function H(ee,_e,Me){var B=-1;if(!(0,U.o8)(ee))if(_e>0&&(_e===32?B=1<<13:_e<=13&&(B=_e<<5)),ut(Me))B===-1&&(B=0),B|=Me;else{var me=re[ne(ee)]||-1;B!==-1&&me!==-1?B|=me:me===6&&(B=me)}return B}s(H,"getCommonSchemaMetaData");function We(){(0,pe.JP)(null).setEnabled(!1)}s(We,"disableCookies");function Ct(ee,_e,Me){(0,pe.p7)(null)&&(0,pe.JP)(null).set(ee,_e,Me*86400,null,"/")}s(Ct,"setCookie");function Re(ee){(0,pe.p7)(null)&&(0,pe.JP)(null).del(ee)}s(Re,"deleteCookie");function z(ee){return(0,pe.p7)(null)?qe((0,pe.JP)(null),ee):""}s(z,"getCookie");function qe(ee,_e,Me){Me===void 0&&(Me=!0);var B;return ee&&(B=ee.get(_e),Me&&B&&decodeURIComponent&&(B=decodeURIComponent(B))),B||""}s(qe,"getCookieValue");function I(ee){ee===void 0&&(ee="D");var _e=(0,oe.GW)();return ee==="B"?_e="{"+_e+"}":ee==="P"?_e="("+_e+")":ee==="N"&&(_e=_e.replace(/-/g,"")),_e}s(I,"createGuid");function $(ee,_e,Me,B,me){var ye={},ct=!1,at=0,Rt=arguments.length,mt=Object[K.hB],cn=arguments;for(mt.toString.call(cn[0])==="[object Boolean]"&&(ct=cn[0],at++);at<Rt;at++){var ee=cn[at];(0,U.rW)(ee,function(Et,Ht){ct&&Ht&&(0,U.Kn)(Ht)?(0,U.kJ)(Ht)?(ye[Et]=ye[Et]||[],(0,U.tO)(Ht,function(Xt,ce){Xt&&(0,U.Kn)(Xt)?ye[Et][ce]=$(!0,ye[Et][ce],Xt):ye[Et][ce]=Xt})):ye[Et]=$(!0,ye[Et],Ht):ye[Et]=Ht})}return ye}s($,"extend");var L=oe.Jj;function ae(ee){return ee===0||ee>0&&ee<=13||ee===32}s(ae,"isValueKind");function ut(ee){return ee>=0&&ee<=9}s(ut,"isDataType");function Je(){var ee=(0,D.jW)();if(!(0,U.o8)(ee)&&ee.userAgent){var _e=ee.userAgent.toLowerCase();if((_e.indexOf("safari")>=0||_e.indexOf("firefox")>=0)&&_e.indexOf("chrome")<0)return!0}return!1}s(Je,"isSafariOrFirefox");function Qt(ee){return ee.length>0}s(Qt,"isArrayValid");function Yt(ee,_e){var Me=ee;Me.timings=Me.timings||{},Me.timings.processTelemetryStart=Me.timings.processTelemetryStart||{},Me.timings.processTelemetryStart[_e]=L()}s(Yt,"setProcessTelemetryTimings");function ne(ee){var _e=0;if(ee!=null){var Me=typeof ee;Me==="string"?_e=1:Me==="number"?_e=2:Me==="boolean"?_e=3:Me===K.fK&&(_e=4,(0,U.kJ)(ee)?(_e=4096,ee.length>0&&(_e|=ne(ee[0]))):(0,U.nr)(ee,"value")&&(_e=8192|ne(ee.value)))}return _e}s(ne,"getFieldValueType");var be={Version:we,FullVersionString:Ae,strUndefined:K.jA,strObject:K.fK,Undefined:K.jA,arrForEach:U.tO,arrIndexOf:U.UA,arrMap:U.Mr,arrReduce:U.Xz,objKeys:U.FY,toISOString:U.Y6,isReactNative:D.b$,isString:U.HD,isNumber:U.hj,isBoolean:U.jn,isFunction:U.mf,isArray:U.kJ,isObject:U.Kn,strTrim:U.nd,isDocumentObjectAvailable:De,isWindowObjectAvailable:Pe,isValueAssigned:j,getTenantId:X,isBeaconsSupported:D.MF,isUint8ArrayAvailable:G,isLatency:k,sanitizeProperty:xe,getISOString:U.Y6,useXDomainRequest:D.cp,getCommonSchemaMetaData:H,cookieAvailable:pe.p7,disallowsSameSiteNone:pe.UY,setCookie:Ct,deleteCookie:Re,getCookie:z,createGuid:I,extend:$,getTime:L,isValueKind:ae,isArrayValid:Qt,objDefineAccessors:U.l_,addPageUnloadEventListener:W.c9,setProcessTelemetryTimings:Yt,addEventHandler:W.Ib,getFieldValueType:ne,strEndsWith:U.Id,objForEachKey:U.rW},Ne={_canUseCookies:void 0,isTypeof:U.Ym,isUndefined:U.o8,isNullOrUndefined:U.le,hasOwnProperty:U.nr,isFunction:U.mf,isObject:U.Kn,isDate:U.J_,isArray:U.kJ,isError:U.VZ,isString:U.HD,isNumber:U.hj,isBoolean:U.jn,toISOString:U.Y6,arrForEach:U.tO,arrIndexOf:U.UA,arrMap:U.Mr,arrReduce:U.Xz,strTrim:U.nd,objCreate:M.pu,objKeys:U.FY,objDefineAccessors:U.l_,addEventHandler:W.Ib,dateNow:U.m6,isIE:D.w1,disableCookies:We,newGuid:oe.GW,perfNow:oe.Jj,newId:Se.pZ,randomValue:Se.az,random32:Se._l,mwcRandomSeed:Se.CN,mwcRandom32:Se.F6,generateW3CId:oe.DO};function Lt(){return!!(0,D.a8)("chrome")}s(Lt,"isChromium");function rt(ee,_e,Me,B,me,ye){B===void 0&&(B=!1),me===void 0&&(me=!1);function ct(Rt,mt,cn){try{Rt[mt]=cn}catch(mn){}}s(ct,"_wrapSetXhrProp");var at=new XMLHttpRequest;return B&&ct(at,R,B),Me&&ct(at,V,Me),at.open(ee,_e,!me),Me&&ct(at,V,Me),!me&&ye&&ct(at,Q,ye),at}s(rt,"openXhr")},156:(Ft,de,f)=>{"use strict";f.r(de),f.d(de,{BE_PROFILE:()=>Q,NRT_PROFILE:()=>V,PostChannel:()=>J,RT_PROFILE:()=>R});var K=f(88),M=f(679),D=f(288),U=f(869),pe=f(883),oe=f(599),W=f(708),Se=f(630),Ve=f(928),we=f(18),Ae=f(63),R="REAL_TIME",V="NEAR_REAL_TIME",Q="BEST_EFFORT",re="POST",Ee="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",De="drop",Pe="send",j="requeue",X="rspFail",G="oth",k="no-cache, no-store",xe="application/x-json-stream",H="cache-control",We="content-type",Ct="kill-tokens",Re="kill-duration",z="kill-duration-seconds",qe="time-delta-millis",I="client-version",$="client-id",L="time-delta-to-apply-millis",ae="upload-time",ut="apikey",Je="AuthMsaDeviceTicket",Qt="AuthXToken",Yt="sdk-version",ne="NoResponseBody",be="msfpc";function Ne(He){var St=(He.ext||{}).intweb;return St&&(0,oe.Sn)(St[be])?St[be]:null}s(Ne,"_getEventMsfpc");function Lt(He){for(var St=null,Ue=0;St===null&&Ue<He.length;Ue++)St=Ne(He[Ue]);return St}s(Lt,"_getMsfpc");var rt=function(){function He(St,Ue){var Ie=Ue?[].concat(Ue):[],Dt=this,xt=Lt(Ie);Dt.iKey=function(){return St},Dt.Msfpc=function(){return xt||""},Dt.count=function(){return Ie.length},Dt.events=function(){return Ie},Dt.addEvent=function(tt){return tt?(Ie.push(tt),xt||(xt=Ne(tt)),!0):!1},Dt.split=function(tt,$t){var qt;if(tt<Ie.length){var nn=Ie.length-tt;(0,W.le)($t)||(nn=$t<nn?$t:nn),qt=Ie.splice(tt,nn),xt=Lt(Ie)}return new He(St,qt)}}return s(He,"EventBatch"),He.create=function(St,Ue){return new He(St,Ue)},He}(),ee=f(392),_e=20,Me=3984588,B=65e3,me=2e6,ye=Math.min(me,B),ct="metadata",at="f",Rt=/\./,mt=function(){function He(St,Ue,Ie,Dt){var xt="data",tt="baseData",$t="ext",qt=!!Dt,nn=!0,En=Ue,$n={};(0,M.Z)(He,this,function(pn){pn.createPayload=function(bt,it,zt,Kt,jt,dn){return{apiKeys:[],payloadBlob:"",overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:bt,isTeardown:it,isSync:zt,isBeacon:Kt,sendType:dn,sendReason:jt}},pn.appendPayload=function(bt,it,zt){var Kt=bt&&it&&!bt.overflow;return Kt&&(0,D.Lm)(St,function(){return"Serializer:appendPayload"},function(){for(var jt=it.events(),dn=bt.payloadBlob,Bt=bt.numEvents,rn=!1,yn=[],Nn=[],Pn=bt.isBeacon,Zt=Pn?B:Me,Bn=Pn?ye:me,In=0,Xn=0;In<jt.length;){var On=jt[In];if(On){if(Bt>=zt){bt.overflow=it.split(In);break}var Gt=pn.getEventBlob(On);if(Gt&&Gt.length<=Bn){var Jn=Gt.length,mi=dn.length;if(mi+Jn>Zt){bt.overflow=it.split(In);break}dn&&(dn+=`
`),dn+=Gt,Xn++,Xn>_e&&(dn.substr(0,1),Xn=0),rn=!0,Bt++}else Gt?yn.push(On):Nn.push(On),jt.splice(In,1),In--}In++}if(yn&&yn.length>0&&bt.sizeExceed.push(rt.create(it.iKey(),yn)),Nn&&Nn.length>0&&bt.failedEvts.push(rt.create(it.iKey(),Nn)),rn){bt.batches.push(it),bt.payloadBlob=dn,bt.numEvents=Bt;var nr=it.iKey();(0,W.UA)(bt.apiKeys,nr)===-1&&bt.apiKeys.push(nr)}},function(){return{payload:bt,theBatch:{iKey:it.iKey(),evts:it.events()},max:zt}}),Kt},pn.getEventBlob=function(bt){try{return(0,D.Lm)(St,function(){return"Serializer.getEventBlob"},function(){var it={};it.name=bt.name,it.time=bt.time,it.ver=bt.ver,it.iKey="o:"+(0,oe.jM)(bt.iKey);var zt={},Kt=bt[$t];Kt&&(it[$t]=zt,(0,W.rW)(Kt,function(Bt,rn){var yn=zt[Bt]={};At(rn,yn,"ext."+Bt,!0,null,null,!0)}));var jt=it[xt]={};jt.baseType=bt.baseType;var dn=jt[tt]={};return At(bt.baseData,dn,tt,!1,[tt],function(Bt,rn,yn){cn(zt,Bt,rn,yn)},nn),At(bt.data,jt,xt,!1,[],function(Bt,rn,yn){cn(zt,Bt,rn,yn)},nn),JSON.stringify(it)},function(){return{item:bt}})}catch(it){return null}};function te(bt,it){var zt=$n[bt];return zt===void 0&&(bt.length>=7&&(zt=(0,W.xe)(bt,"ext.metadata")||(0,W.xe)(bt,"ext.web")),$n[bt]=zt),zt}s(te,"_isReservedField");function At(bt,it,zt,Kt,jt,dn,Bt){(0,W.rW)(bt,function(rn,yn){var Nn=null;if(yn||(0,oe.Sn)(yn)){var Pn=zt,Zt=rn,Bn=jt,In=it;if(qt&&!Kt&&Rt.test(rn)){var Xn=rn.split("."),On=Xn.length;if(On>1){Bn&&(Bn=Bn.slice());for(var Gt=0;Gt<On-1;Gt++){var Jn=Xn[Gt];In=In[Jn]=In[Jn]||{},Pn+="."+Jn,Bn&&Bn.push(Jn)}Zt=Xn[On-1]}}var mi=Kt&&te(Pn,Zt);if(!mi&&En&&En.handleField(Pn,Zt)?Nn=En.value(Pn,Zt,yn,Ie):Nn=(0,oe.yj)(Zt,yn,Ie),Nn){var nr=Nn.value;if(In[Zt]=nr,dn&&dn(Bn,Zt,Nn),Bt&&typeof nr=="object"&&!(0,W.kJ)(nr)){var Ar=Bn;Ar&&(Ar=Ar.slice(),Ar.push(Zt)),At(yn,nr,Pn+"."+Zt,Kt,Ar,dn,Bt)}}}})}s(At,"_processPathKeys")})}return s(He,"Serializer"),He}();function cn(He,St,Ue,Ie){if(Ie&&He){var Dt=(0,oe.Vv)(Ie.value,Ie.kind,Ie.propertyType);if(Dt>-1){var xt=He[ct];xt||(xt=He[ct]={f:{}});var tt=xt[at];if(tt||(tt=xt[at]={}),St)for(var $t=0;$t<St.length;$t++){var qt=St[$t];tt[qt]||(tt[qt]={f:{}});var nn=tt[qt][at];nn||(nn=tt[qt][at]={}),tt=nn}tt=tt[Ue]={},(0,W.kJ)(Ie.value)?tt.a={t:Dt}:tt.t=Dt}}}s(cn,"_addJSONPropertyMetaData");var mn=.8,Et=1.2,Ht=3e3,Xt=6e5;function ce(He){return!(He>=300&&He<500&&He!=408&&He!=429||He==501||He==505)}s(ce,"retryPolicyShouldRetryForStatus");function tr(He){var St=0,Ue=Ht*mn,Ie=Ht*Et,Dt=Math.floor(Math.random()*(Ie-Ue))+Ue;return St=Math.pow(2,He)*Dt,Math.min(St,Xt)}s(tr,"retryPolicyGetMillisToBackoffForRetry");var Xr=1e3,cr=function(){function He(){var St={};function Ue(Ie){var Dt=[];return Ie&&(0,W.tO)(Ie,function(xt){Dt.push((0,W.nd)(xt))}),Dt}s(Ue,"_normalizeTenants"),(0,M.Z)(He,this,function(Ie){Ie.setKillSwitchTenants=function(Dt,xt){if(Dt&&xt)try{var tt=Ue(Dt.split(","));if(xt==="this-request-only")return tt;for(var $t=parseInt(xt,10)*Xr,qt=0;qt<tt.length;++qt)St[tt[qt]]=(0,W.m6)()+$t}catch(nn){return[]}return[]},Ie.isTenantKilled=function(Dt){var xt=St,tt=(0,W.nd)(Dt);return xt[tt]!==void 0&&xt[tt]>(0,W.m6)()?!0:(delete xt[tt],!1)}})}return s(He,"KillSwitch"),He}();const Jr=cr;var Yr=function(){function He(){var St=!0,Ue=!0,Ie=!0,Dt="use-collector-delta",xt=!1;(0,M.Z)(He,this,function(tt){tt.allowRequestSending=function(){return St},tt.firstRequestSent=function(){Ie&&(Ie=!1,xt||(St=!1))},tt.shouldAddClockSkewHeaders=function(){return Ue},tt.getClockSkewHeaderValue=function(){return Dt},tt.setClockSkew=function($t){xt||($t?(Dt=$t,Ue=!0,xt=!0):Ue=!1,St=!0)}})}return s(He,"ClockSkewManager"),He}();const vi=Yr;var qn,Wr="sendAttempt",Rr="&"+ne+"=true",Gn=(qn={},qn[1]=j,qn[100]=j,qn[200]="sent",qn[8004]=De,qn[8003]=De,qn),$r={},lr={};function Tn(He,St,Ue){$r[He]=St,Ue!==!1&&(lr[St]=He)}s(Tn,"_addCollectorHeaderQsMapping"),Tn(Je,Je,!1),Tn(I,I),Tn($,"Client-Id"),Tn(ut,ut),Tn(L,L),Tn(ae,ae),Tn(Qt,Qt);function lt(He){try{return He.responseText}catch(St){}return""}s(lt,"_getResponseText");function ot(He,St){var Ue=!1;if(He&&St){var Ie=(0,W.FY)(He);if(Ie&&Ie.length>0)for(var Dt=St.toLowerCase(),xt=0;xt<Ie.length;xt++){var tt=Ie[xt];if(tt&&(0,W.nr)(St,tt)&&tt.toLowerCase()===Dt){Ue=!0;break}}}return Ue}s(ot,"_hasHeader");function ze(He,St,Ue,Ie){St&&Ue&&Ue.length>0&&(Ie&&$r[St]?(He.hdrs[$r[St]]=Ue,He.useHdrs=!0):He.url+="&"+St+"="+Ue)}s(ze,"_addRequestDetails");var ve=function(){function He(St,Ue,Ie,Dt,xt){this._responseHandlers=[];var tt="?cors=true&"+We.toLowerCase()+"="+xe,$t=new Jr,qt=!1,nn=new vi,En=!1,$n=0,pn,te,At,bt=!0,it=[],zt={},Kt=[],jt=null,dn=!1,Bt,rn=!1,yn=!1,Nn,Pn;(0,M.Z)(He,this,function(Zt){var Bn=!0;Zt.initialize=function(N,Fe,Le,Ke,ht){var he;ht||(ht={}),tt=N+tt,yn=(0,W.o8)(ht.avoidOptions)?!0:!ht.avoidOptions,At=Fe,Bt=Fe.getCookieMgr(),dn=!At.config.disableEventTimings;var Y=!!At.config.enableCompoundKey;pn=Le;var sn=ht.valueSanitizer,y=ht.stringifyObjects;(0,W.o8)(ht.enableCompoundKey)||(Y=!!ht.enableCompoundKey),Nn=ht.xhrTimeout,Pn=ht.disableXhrSync,En=!(0,Se.b$)(),jt=new mt(At,sn,y,Y);var T=Ke,S=ht.alwaysUseXhrOverride?Ke:null,E=ht.alwaysUseXhrOverride?Ke:null;if(!Ke){bt=!1;var ge=(0,Se.k$)();ge&&ge.protocol&&ge.protocol.toLowerCase()==="file:"&&(Bn=!1);var ue=[];(0,Se.b$)()?ue=[2,1]:ue=[1,2,3];var gt=ht.transports;gt&&((0,W.hj)(gt)?ue=[gt].concat(ue):(0,W.kJ)(gt)&&(ue=gt.concat(ue))),Ke=In(ue,!1),T=In(ue,!0),Ke||pn.diagLog().warnToConsole("No available transport to send events")}te=(he={},he[0]=Ke,he[1]=T||In([1,2,3],!0),he[2]=S||In([3,2],!0)||T||In([1],!0),he[3]=E||In([2,3],!0)||T||In([1],!0),he)};function In(N,Fe){for(var Le=0,Ke=null,ht=0;Ke==null&&ht<N.length;)Le=N[ht],Le===1?(0,Se.cp)()?Ke=Xn:(0,Se.Z3)()&&(Ke=Gt):Le===2&&(0,Se.JO)(Fe)?Ke=On:En&&Le===3&&(0,Se.MF)()&&(Ke=mi),ht++;return Ke?{_transport:Le,_isSync:Fe,sendPOST:Ke}:null}s(In,"_getSenderInterface"),Zt._getDbgPlgTargets=function(){return[te[0],$t,jt,te]};function Xn(N,Fe,Le){var Ke=new XDomainRequest;Ke.open(re,N.urlString),N.timeout&&(Ke.timeout=N.timeout),Ke.onload=function(){var ht=lt(Ke);Jn(Fe,200,{},ht),ti(ht)},Ke.onerror=function(){Jn(Fe,400,{})},Ke.ontimeout=function(){Jn(Fe,500,{})},Ke.onprogress=function(){},Le?Ke.send(N.data):xt.set(function(){Ke.send(N.data)},0)}s(Xn,"_xdrSendPost");function On(N,Fe,Le){var Ke,ht=N.urlString,he=!1,Y=!1,sn=(Ke={body:N.data,method:re},Ke[Ee]=!0,Ke);Le&&(sn.keepalive=!0,N._sendReason===2&&(he=!0,ht+=Rr)),Bn&&(sn.credentials="include"),N.headers&&(0,W.FY)(N.headers).length>0&&(sn.headers=N.headers),fetch(ht,sn).then(function(y){var T={},S="";y.headers&&y.headers.forEach(function(E,ge){T[ge]=E}),y.body&&y.text().then(function(E){S=E}),Y||(Y=!0,Jn(Fe,y.status,T,S),ti(S))}).catch(function(y){Y||(Y=!0,Jn(Fe,0,{}))}),he&&!Y&&(Y=!0,Jn(Fe,200,{})),!Y&&N.timeout>0&&xt.set(function(){Y||(Y=!0,Jn(Fe,500,{}))},N.timeout)}s(On,"_fetchSendPost");function Gt(N,Fe,Le){var Ke=N.urlString;function ht(y,T,S){if(!y[S]&&T&&T.getResponseHeader){var E=T.getResponseHeader(S);E&&(y[S]=(0,W.nd)(E))}return y}s(ht,"_appendHeader");function he(y){var T={};return y.getAllResponseHeaders?T=ei(y.getAllResponseHeaders()):(T=ht(T,y,qe),T=ht(T,y,Re),T=ht(T,y,z)),T}s(he,"_getAllResponseHeaders");function Y(y,T){Jn(Fe,y.status,he(y),T)}s(Y,"xhrComplete"),Le&&N.disableXhrSync&&(Le=!1);var sn=(0,oe.ot)(re,Ke,Bn,!0,Le,N.timeout);(0,W.rW)(N.headers,function(y,T){sn.setRequestHeader(y,T)}),sn.onload=function(){var y=lt(sn);Y(sn,y),ti(y)},sn.onerror=function(){Y(sn)},sn.ontimeout=function(){Y(sn)},sn.send(N.data)}s(Gt,"_xhrSendPost");function Jn(N,Fe,Le,Ke){try{N(Fe,Le,Ke)}catch(ht){(0,we.kP)(pn.diagLog(),2,518,(0,Se.eU)(ht))}}s(Jn,"_doOnComplete");function mi(N,Fe,Le){var Ke=N,ht=200,he=Ke._thePayload,Y=N.urlString+Rr;try{var sn=(0,Se.jW)();if(!sn.sendBeacon(Y,N.data))if(he){var y=[];(0,W.tO)(he.batches,function(T){if(y&&T&&T.count()>0){for(var S=T.events(),E=0;E<S.length;E++)if(!sn.sendBeacon(Y,jt.getEventBlob(S[E]))){y.push(T.split(E));break}}else y.push(T.split(0))}),pr(y,8003,he.sendType,!0)}else ht=0}catch(T){pn.diagLog().warnToConsole("Failed to send telemetry using sendBeacon API. Ex:"+(0,Se.eU)(T)),ht=0}finally{Jn(Fe,ht,{},"")}}s(mi,"_beaconSendPost");function nr(N){return N===2||N===3}s(nr,"_isBeaconPayload");function Ar(N){return rn&&nr(N)&&(N=2),N}s(Ar,"_adjustSendType"),Zt.addQueryStringParameter=function(N,Fe){for(var Le=0;Le<it.length;Le++)if(it[Le].name===N){it[Le].value=Fe;return}it.push({name:N,value:Fe})},Zt.addHeader=function(N,Fe){zt[N]=Fe},Zt.canSendRequest=function(){return yi()&&nn.allowRequestSending()},Zt.sendQueuedRequests=function(N,Fe){(0,W.o8)(N)&&(N=0),rn&&(N=Ar(N),Fe=2),Sr(Kt,N,0)&&kr(xn(),0,!1,N,Fe||0)},Zt.isCompletelyIdle=function(){return!qt&&$n===0&&Kt.length===0},Zt.setUnloading=function(N){rn=N},Zt.addBatch=function(N){if(N&&N.count()>0){if($t.isTenantKilled(N.iKey()))return!1;Kt.push(N)}return!0},Zt.teardown=function(){Kt.length>0&&kr(xn(),0,!0,2,2)},Zt.pause=function(){qt=!0},Zt.resume=function(){qt=!1,Zt.sendQueuedRequests(0,4)},Zt.sendSynchronousBatch=function(N,Fe,Le){N&&N.count()>0&&((0,W.le)(Fe)&&(Fe=1),rn&&(Fe=Ar(Fe),Le=2),kr([N],0,!1,Fe,Le||0))};function yi(){return!qt&&$n<Ue}s(yi,"_hasIdleConnection");function xn(){var N=Kt;return Kt=[],N}s(xn,"_clearQueue");function Sr(N,Fe,Le){var Ke=!1;return N&&N.length>0&&!qt&&te[Fe]&&jt&&(Ke=Fe!==0||yi()&&(Le>0||nn.allowRequestSending())),Ke}s(Sr,"_canSendPayload");function bn(N){var Fe={};return N&&(0,W.tO)(N,function(Le,Ke){Fe[Ke]={iKey:Le.iKey(),evts:Le.events()}}),Fe}s(bn,"_createDebugBatches");function kr(N,Fe,Le,Ke,ht){if(!(!N||N.length===0)){if(qt){pr(N,1,Ke);return}Ke=Ar(Ke);try{var he=N,Y=Ke!==0;(0,D.Lm)(At,function(){return"HttpManager:_sendBatches"},function(sn){sn&&(N=N.slice(0));for(var y=[],T=null,S=(0,oe.hK)(),E=te[Ke]||(Y?te[1]:te[0]),ge=(rn||nr(Ke)||E&&E._transport===3)&&Qn();Sr(N,Ke,Fe);){var ue=N.shift();ue&&ue.count()>0&&($t.isTenantKilled(ue.iKey())?y.push(ue):(T=T||jt.createPayload(Fe,Le,Y,ge,ht,Ke),jt.appendPayload(T,ue,St)?T.overflow!==null&&(N=[T.overflow].concat(N),T.overflow=null,Ri(T,S,(0,oe.hK)(),ht),S=(0,oe.hK)(),T=null):(Ri(T,S,(0,oe.hK)(),ht),S=(0,oe.hK)(),N=[ue].concat(N),T=null)))}T&&Ri(T,S,(0,oe.hK)(),ht),N.length>0&&(Kt=N.concat(Kt)),pr(y,8004,Ke)},function(){return{batches:bn(he),retryCount:Fe,isTeardown:Le,isSynchronous:Y,sendReason:ht,useSendBeacon:nr(Ke),sendType:Ke}},!Y)}catch(sn){(0,we.kP)(pn.diagLog(),2,48,"Unexpected Exception sending batch: "+(0,Se.eU)(sn))}}}s(kr,"_sendBatches");function Mr(N,Fe){var Le={url:tt,hdrs:{},useHdrs:!1};Fe?(Le.hdrs=(0,oe.l7)(Le.hdrs,zt),Le.useHdrs=(0,W.FY)(Le.hdrs).length>0):(0,W.rW)(zt,function(sn,y){lr[sn]?ze(Le,lr[sn],y,!1):(Le.hdrs[sn]=y,Le.useHdrs=!0)}),ze(Le,$,"NO_AUTH",Fe),ze(Le,I,oe.vs,Fe);var Ke="";(0,W.tO)(N.apiKeys,function(sn){Ke.length>0&&(Ke+=","),Ke+=sn}),ze(Le,ut,Ke,Fe),ze(Le,ae,(0,W.m6)().toString(),Fe);var ht=zr(N);if((0,oe.Sn)(ht)&&(Le.url+="&ext.intweb.msfpc="+ht),nn.shouldAddClockSkewHeaders()&&ze(Le,L,nn.getClockSkewHeaderValue(),Fe),At.getWParam){var he=At.getWParam();he>=0&&(Le.url+="&w="+he)}for(var Y=0;Y<it.length;Y++)Le.url+="&"+it[Y].name+"="+it[Y].value;return Le}s(Mr,"_buildRequestDetails");function Qn(){return!bt&&En&&(0,Se.MF)()}s(Qn,"_canUseSendBeaconApi");function ur(N,Fe,Le){N[Fe]=N[Fe]||{},N[Fe][pn.identifier]=Le}s(ur,"_setTimingValue");function Ri(N,Fe,Le,Ke){if(N&&N.payloadBlob&&N.payloadBlob.length>0){var ht=!!Zt.sendHook,he=te[N.sendType];!nr(N.sendType)&&N.isBeacon&&N.sendReason===2&&(he=te[2]||te[3]||he);var Y=yn;(N.isBeacon||he._transport===3)&&(Y=!1);var sn=Mr(N,Y);Y=Y||sn.useHdrs;var y=(0,oe.hK)();(0,D.Lm)(At,function(){return"HttpManager:_doPayloadSend"},function(){for(var T=0;T<N.batches.length;T++)for(var S=N.batches[T],E=S.events(),ge=0;ge<E.length;ge++){var ue=E[ge];if(dn){var gt=ue.timings=ue.timings||{};ur(gt,"sendEventStart",y),ur(gt,"serializationStart",Fe),ur(gt,"serializationCompleted",Le)}ue[Wr]>0?ue[Wr]++:ue[Wr]=1}pr(N.batches,1e3+(Ke||0),N.sendType,!0);var Be={data:N.payloadBlob,urlString:sn.url,headers:sn.hdrs,_thePayload:N,_sendReason:Ke,timeout:Nn};(0,W.o8)(Pn)||(Be.disableXhrSync=!!Pn),Y&&(ot(Be.headers,H)||(Be.headers[H]=k),ot(Be.headers,We)||(Be.headers[We]=xe));var on=null;he&&(on=s(function(un){nn.firstRequestSent();var Fn=s(function(Zn,Rn){Zr(Zn,Rn,N,Ke)},"onComplete"),fn=N.isTeardown||N.isSync;try{he.sendPOST(un,Fn,fn),Zt.sendListener&&Zt.sendListener(Be,un,fn,N.isBeacon)}catch(Zn){pn.diagLog().warnToConsole("Unexpected exception sending payload. Ex:"+(0,Se.eU)(Zn)),Jn(Fn,0,{})}},"sender")),(0,D.Lm)(At,function(){return"HttpManager:_doPayloadSend.sender"},function(){if(on)if(N.sendType===0&&$n++,ht&&!N.isBeacon&&he._transport!==3){var un={data:Be.data,urlString:Be.urlString,headers:(0,oe.l7)({},Be.headers),timeout:Be.timeout,disableXhrSync:Be.disableXhrSync},Fn=!1;(0,D.Lm)(At,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{Zt.sendHook(un,function(fn){Fn=!0,!bt&&!fn._thePayload&&(fn._thePayload=fn._thePayload||Be._thePayload,fn._sendReason=fn._sendReason||Be._sendReason),on(fn)},N.isSync||N.isTeardown)}catch(fn){Fn||on(Be)}})}else on(Be)})},function(){return{thePayload:N,serializationStart:Fe,serializationCompleted:Le,sendReason:Ke}},N.isSync)}N.sizeExceed&&N.sizeExceed.length>0&&pr(N.sizeExceed,8003,N.sendType),N.failedEvts&&N.failedEvts.length>0&&pr(N.failedEvts,8002,N.sendType)}s(Ri,"_doPayloadSend");function wi(N,Fe){dn&&(0,W.tO)(N,function(Le){var Ke=Le.timings=Le.timings||{};ur(Ke,"sendEventCompleted",Fe)})}s(wi,"_addEventCompletedTimings");function Zr(N,Fe,Le,Ke){var ht=9e3,he=null,Y=!1,sn=!1;try{var y=!0;if(typeof N!==ee.jA){if(Fe){nn.setClockSkew(Fe[qe]);var T=Fe[Re]||Fe["kill-duration-seconds"];(0,W.tO)($t.setKillSwitchTenants(Fe[Ct],T),function(E){(0,W.tO)(Le.batches,function(ge){if(ge.iKey()===E){he=he||[];var ue=ge.split(0);Le.numEvents-=ue.count(),he.push(ue)}})})}if(N==200||N==204){ht=200;return}(!ce(N)||Le.numEvents<=0)&&(y=!1),ht=9e3+N%1e3}if(y){ht=100;var S=Le.retryCnt;Le.sendType===0&&(S<Ie?(Y=!0,si(function(){Le.sendType===0&&$n--,kr(Le.batches,S+1,Le.isTeardown,rn?2:Le.sendType,5)},rn,tr(S))):(sn=!0,rn&&(ht=8001)))}}finally{Y||(nn.setClockSkew(),Ai(Le,ht,Ke,sn)),pr(he,8004,Le.sendType)}}s(Zr,"_retryRequestIfNeeded");function Ai(N,Fe,Le,Ke){try{Ke&&pn._backOffTransmission(),Fe===200&&(!Ke&&!N.isSync&&pn._clearBackOff(),Fr(N.batches)),pr(N.batches,Fe,N.sendType,!0)}finally{N.sendType===0&&($n--,Le!==5&&Zt.sendQueuedRequests(N.sendType,Le))}}s(Ai,"_handleRequestFinished");function Fr(N){if(dn){var Fe=(0,oe.hK)();(0,W.tO)(N,function(Le){Le&&Le.count()>0&&wi(Le.events(),Fe)})}}s(Fr,"_addCompleteTimings");function si(N,Fe,Le){Fe?N():xt.set(N,Le)}s(si,"_doAction");function ei(N){var Fe={};if((0,W.HD)(N)){var Le=(0,W.nd)(N).split(/[\r\n]+/);(0,W.tO)(Le,function(Ke){if(Ke){var ht=Ke.indexOf(": ");if(ht!==-1){var he=(0,W.nd)(Ke.substring(0,ht)).toLowerCase(),Y=(0,W.nd)(Ke.substring(ht+1));Fe[he]=Y}else Fe[(0,W.nd)(Ke)]=1}})}return Fe}s(ei,"_convertAllHeadersToMap");function zr(N){for(var Fe=0;Fe<N.batches.length;Fe++){var Le=N.batches[Fe].Msfpc();if(Le)return encodeURIComponent(Le)}return""}s(zr,"_getMsfpc");function ti(N){var Fe=Zt._responseHandlers;try{for(var Le=0;Le<Fe.length;Le++)try{Fe[Le](N)}catch(ht){(0,we.kP)(pn.diagLog(),1,519,"Response handler failed: "+ht)}if(N){var Ke=JSON.parse(N);(0,oe.Sn)(Ke.webResult)&&(0,oe.Sn)(Ke.webResult[be])&&Bt.set("MSFPC",Ke.webResult[be],365*86400)}}catch(ht){}}s(ti,"_handleCollectorResponse");function pr(N,Fe,Le,Ke){if(N&&N.length>0&&Dt){var ht=Dt[ci(Fe)];if(ht){var he=Le!==0;(0,D.Lm)(At,function(){return"HttpManager:_sendBatchesNotification"},function(){si(function(){try{ht.call(Dt,N,Fe,he,Le)}catch(Y){(0,we.kP)(pn.diagLog(),1,74,"send request notification failed: "+Y)}},Ke||he,0)},function(){return{batches:bn(N),reason:Fe,isSync:he,sendSync:Ke,sendType:Le}},!he)}}}s(pr,"_sendBatchesNotification");function ci(N){var Fe=Gn[N];return(0,oe.Sn)(Fe)||(Fe=G,N>=9e3&&N<=9999?Fe=X:N>=8e3&&N<=8999?Fe=De:N>=1e3&&N<=1999&&(Fe=Pe)),Fe}s(ci,"_getNotificationAction")})}return s(He,"HttpManager"),He}();function Ye(He,St){for(var Ue=[],Ie=2;Ie<arguments.length;Ie++)Ue[Ie-2]=arguments[Ie];return setTimeout(He,St,Ue)}s(Ye,"defaultSetTimeout");function je(He){clearTimeout(He)}s(je,"defaultClearTimeout");function Ge(He,St){return{set:He||Ye,clear:St||je}}s(Ge,"createTimeoutWrapper");var _t=.25,Nt=500,Ut=20,Te=6,et=2,Oe=4,dt=2,O=1,ln="eventsDiscarded",_="overrideInstrumentationKey",le="maxEventRetryAttempts",ke="maxUnloadEventRetryAttempts",Qe="addUnloadCb",yt=function(He){(0,K.ne)(St,He);function St(){var Ue=He.call(this)||this;Ue.identifier="PostChannel",Ue.priority=1011,Ue.version="3.2.3";var Ie,Dt=!1,xt=[],tt=null,$t=!1,qt=0,nn=500,En=0,$n=1e4,pn={},te=R,At=null,bt=null,it=0,zt=0,Kt,jt,dn={},Bt,rn,yn=-1,Nn,Pn=!0,Zt=!1,Bn=Te,In=et,Xn,On;return(0,M.Z)(St,Ue,function(Gt,Jn){kr(),Gt._getDbgPlgTargets=function(){return[jt]},Gt.initialize=function(S,E,ge){(0,D.Lm)(E,function(){return"PostChannel:initialize"},function(){var ue=E;Jn.initialize(S,E,ge);try{var gt=!!E[Qe];Xn=(0,U.jU)((0,pe.J)(Gt.identifier),E.evtNamespace&&E.evtNamespace());var Be=Gt._getTelCtx();S.extensionConfig[Gt.identifier]=S.extensionConfig[Gt.identifier]||{},Ie=Be.getExtCfg(Gt.identifier),On=Ge(Ie.setTimeoutOverride,Ie.clearTimeoutOverride),Pn=!Ie.disableOptimizeObj&&(0,oe.mJ)(),mi(ue),Ie.eventsLimitInMem>0&&($n=Ie.eventsLimitInMem),Ie.immediateEventLimit>0&&(nn=Ie.immediateEventLimit),Ie.autoFlushEventsLimit>0&&(Bt=Ie.autoFlushEventsLimit),(0,W.hj)(Ie[le])&&(Bn=Ie[le]),(0,W.hj)(Ie[ke])&&(In=Ie[ke]),T(),Ie.httpXHROverride&&Ie.httpXHROverride.sendPOST&&(Kt=Ie.httpXHROverride),(0,oe.Sn)(S.anonCookieName)&&jt.addQueryStringParameter("anoncknm",S.anonCookieName),jt.sendHook=Ie.payloadPreprocessor,jt.sendListener=Ie.payloadListener;var on=Ie.overrideEndpointUrl?Ie.overrideEndpointUrl:S.endpointUrl;Gt._notificationManager=S.extensionConfig.NotificationManager,jt.initialize(on,Gt.core,Gt,Kt,Ie);var un=S.disablePageUnloadEvents||[];(0,U.c9)(nr,un,Xn),(0,U.TJ)(nr,un,Xn),(0,U.nD)(Ar,S.disablePageShowEvents,Xn)}catch(Fn){throw Gt.setInitialized(!1),Fn}},function(){return{coreConfig:S,core:E,extensions:ge}})},Gt.processTelemetry=function(S,E){(0,oe.if)(S,Gt.identifier),E=Gt._getTelCtx(E);var ge=E.getExtCfg(Gt.identifier),ue=!!Ie.disableTelemetry;ge&&(ue=ue||!!ge.disableTelemetry);var gt=S;!ue&&!Dt&&(Ie[_]&&(gt.iKey=Ie[_]),ge&&ge[_]&&(gt.iKey=ge[_]),yi(gt,!0),Zt?ur(2,2):bn()),Gt.processNext(gt,E)},Gt._doTeardown=function(S,E){ur(2,2),Dt=!0,jt.teardown(),(0,U.JA)(null,Xn),(0,U.C9)(null,Xn),(0,U.Yl)(null,Xn),kr()};function mi(S){var E=S.getWParam;S.getWParam=function(){var ge=0;return Ie.ignoreMc1Ms0CookieProcessing&&(ge=ge|2),ge|E()}}s(mi,"_hookWParam");function nr(S){var E=S||(0,Se.Jj)().event;E.type!=="beforeunload"&&(Zt=!0,jt.setUnloading(Zt)),ur(2,2)}s(nr,"_handleUnloadEvents");function Ar(S){Zt=!1,jt.setUnloading(Zt)}s(Ar,"_handleShowEvents");function yi(S,E){if(S.sendAttempt||(S.sendAttempt=0),S.latency||(S.latency=1),S.ext&&S.ext.trace&&delete S.ext.trace,S.ext&&S.ext.user&&S.ext.user.id&&delete S.ext.user.id,Pn&&(S.ext=(0,W.Ax)(S.ext),S.baseData&&(S.baseData=(0,W.Ax)(S.baseData)),S.data&&(S.data=(0,W.Ax)(S.data))),S.sync){if(it||$t)S.latency=3,S.sync=!1;else if(jt){Pn&&(S=(0,W.Ax)(S)),jt.sendSynchronousBatch(rt.create(S.iKey,[S]),S.sync===!0?1:S.sync,3);return}}var ge=S.latency,ue=En,gt=$n;ge===4&&(ue=qt,gt=nn);var Be=!1;if(ue<gt)Be=!Ai(S,E);else{var on=1,un=Ut;ge===4&&(on=4,un=1),Be=!0,Fr(S.iKey,S.latency,on,un)&&(Be=!Ai(S,E))}Be&&Le(ln,[S],Ve.h.QueueFull)}s(yi,"_addEventToQueues"),Gt.setEventQueueLimits=function(S,E){$n=S>0?S:1e4,Bt=E>0?E:0,T();var ge=En>S;if(!ge&&rn>0)for(var ue=1;!ge&&ue<=3;ue++){var gt=dn[ue];gt&&gt.batches&&(0,W.tO)(gt.batches,function(Be){Be&&Be.count()>=rn&&(ge=!0)})}Zr(!0,ge)},Gt.pause=function(){Qn(),$t=!0,jt.pause()},Gt.resume=function(){$t=!1,jt.resume(),bn()},Gt.addResponseHandler=function(S){jt._responseHandlers.push(S)},Gt._loadTransmitProfiles=function(S){pr(),(0,W.rW)(S,function(E,ge){var ue=ge.length;if(ue>=2){var gt=ue>2?ge[2]:0;if(ge.splice(0,ue-2),ge[1]<0&&(ge[0]=-1),ge[1]>0&&ge[0]>0){var Be=ge[0]/ge[1];ge[0]=Math.ceil(Be)*ge[1]}gt>=0&&ge[1]>=0&&gt>ge[1]&&(gt=ge[1]),ge.push(gt),pn[E]=ge}})},Gt.flush=function(S,E,ge){if(S===void 0&&(S=!0),!$t)if(ge=ge||1,S)tt==null?(Qn(),ei(1,0,ge),tt=Mr(function(){tt=null,zr(E,ge)},0)):xt.push(E);else{var ue=Qn();xn(1,1,ge),E!=null&&E(),ue&&bn()}},Gt.setMsaAuthTicket=function(S){jt.addHeader(Je,S)},Gt.hasEvents=Sr,Gt._setTransmitProfile=function(S){te!==S&&pn[S]!==void 0&&(Qn(),te=S,bn())};function xn(S,E,ge){var ue=ei(S,E,ge);return jt.sendQueuedRequests(E,ge),ue}s(xn,"_sendEventsForLatencyAndAbove");function Sr(){return En>0}s(Sr,"_hasEvents");function bn(){if(yn>=0&&ei(yn,0,Nn)&&jt.sendQueuedRequests(0,Nn),qt>0&&!bt&&!$t){var S=pn[te][2];S>=0&&(bt=Mr(function(){bt=null,xn(4,0,1),bn()},S))}var E=pn[te][1];!At&&!tt&&E>=0&&!$t&&(Sr()?At=Mr(function(){At=null,xn(zt===0?3:1,0,1),zt++,zt%=2,bn()},E):zt=0)}s(bn,"_scheduleTimer"),Gt._backOffTransmission=function(){it<Oe&&(it++,Qn(),bn())},Gt._clearBackOff=function(){it&&(it=0,Qn(),bn())};function kr(){Ie=null,Dt=!1,xt=[],tt=null,$t=!1,qt=0,nn=500,En=0,$n=1e4,pn={},te=R,At=null,bt=null,it=0,zt=0,Kt=null,dn={},Bt=void 0,rn=0,yn=-1,Nn=null,Pn=!0,Zt=!1,Bn=Te,In=et,Xn=null,On=Ge(),jt=new ve(Nt,dt,O,{requeue:N,send:ht,sent:he,drop:Y,rspFail:sn,oth:y},On),ci(),Ri(),T()}s(kr,"_initDefaults");function Mr(S,E){E===0&&it&&(E=1);var ge=1e3;return it&&(ge=tr(it-1)),On.set(S,E*ge)}s(Mr,"_createTimer");function Qn(){return At!==null?(On.clear(At),At=null,zt=0,!0):!1}s(Qn,"_clearScheduledTimer");function ur(S,E){Qn(),tt&&(On.clear(tt),tt=null),$t||xn(1,S,E)}s(ur,"_releaseAllQueues");function Ri(){dn[4]={batches:[],iKeyMap:{}},dn[3]={batches:[],iKeyMap:{}},dn[2]={batches:[],iKeyMap:{}},dn[1]={batches:[],iKeyMap:{}}}s(Ri,"_clearQueues");function wi(S,E,ge){var ue=dn[E];ue||(E=1,ue=dn[E]);var gt=ue.iKeyMap[S];return!gt&&ge&&(gt=rt.create(S),ue.batches.push(gt),ue.iKeyMap[S]=gt),gt}s(wi,"_getEventBatch");function Zr(S,E){jt.canSendRequest()&&!it&&(Bt>0&&En>Bt&&(E=!0),E&&tt==null&&Gt.flush(S,null,20))}s(Zr,"_performAutoFlush");function Ai(S,E){Pn&&(S=(0,W.Ax)(S));var ge=S.latency,ue=wi(S.iKey,ge,!0);return ue.addEvent(S)?(ge!==4?(En++,E&&S.sendAttempt===0&&Zr(!S.sync,rn>0&&ue.count()>=rn)):qt++,!0):!1}s(Ai,"_addEventToProperQueue");function Fr(S,E,ge,ue){for(;ge<=E;){var gt=wi(S,E,!0);if(gt&&gt.count()>0){var Be=gt.split(0,ue),on=Be.count();if(on>0)return ge===4?qt-=on:En-=on,Ke(ln,[Be],Ve.h.QueueFull),!0}ge++}return si(),!1}s(Fr,"_dropEventWithLatencyOrLess");function si(){for(var S=0,E=0,ge=s(function(gt){var Be=dn[gt];Be&&Be.batches&&(0,W.tO)(Be.batches,function(on){gt===4?S+=on.count():E+=on.count()})},"_loop_1"),ue=1;ue<=4;ue++)ge(ue);En=E,qt=S}s(si,"_resetQueueCounts");function ei(S,E,ge){var ue=!1,gt=E===0;return!gt||jt.canSendRequest()?(0,D.Lm)(Gt.core,function(){return"PostChannel._queueBatches"},function(){for(var Be=[],on=4;on>=S;){var un=dn[on];un&&un.batches&&un.batches.length>0&&((0,W.tO)(un.batches,function(Fn){jt.addBatch(Fn)?ue=ue||Fn&&Fn.count()>0:Be=Be.concat(Fn.events()),on===4?qt-=Fn.count():En-=Fn.count()}),un.batches=[],un.iKeyMap={}),on--}Be.length>0&&Le(ln,Be,Ve.h.KillSwitch),ue&&yn>=S&&(yn=-1,Nn=0)},function(){return{latency:S,sendType:E,sendReason:ge}},!gt):(yn=yn>=0?Math.min(yn,S):S,Nn=Math.max(Nn,ge)),ue}s(ei,"_queueBatches");function zr(S,E){xn(1,0,E),si(),ti(function(){S&&S(),xt.length>0?tt=Mr(function(){tt=null,zr(xt.shift(),E)},0):(tt=null,bn())})}s(zr,"_flushImpl");function ti(S){jt.isCompletelyIdle()?S():tt=Mr(function(){tt=null,ti(S)},_t)}s(ti,"_waitForIdleManager");function pr(){Qn(),ci(),te=R,bn()}s(pr,"_resetTransmitProfiles");function ci(){pn={},pn[R]=[2,1,0],pn[V]=[6,3,0],pn[Q]=[18,9,0]}s(ci,"_initializeProfiles");function N(S,E){var ge=[],ue=Bn;Zt&&(ue=In),(0,W.tO)(S,function(gt){gt&&gt.count()>0&&(0,W.tO)(gt.events(),function(Be){Be&&(Be.sync&&(Be.latency=4,Be.sync=!1),Be.sendAttempt<ue?((0,oe.if)(Be,Gt.identifier),yi(Be,!1)):ge.push(Be))})}),ge.length>0&&Le(ln,ge,Ve.h.NonRetryableStatus),Zt&&ur(2,2)}s(N,"_requeueEvents");function Fe(S,E){var ge=Gt._notificationManager||{},ue=ge[S];if(ue)try{ue.apply(ge,E)}catch(gt){(0,we.kP)(Gt.diagLog(),1,74,S+" notification failed: "+gt)}}s(Fe,"_callNotification");function Le(S,E){for(var ge=[],ue=2;ue<arguments.length;ue++)ge[ue-2]=arguments[ue];E&&E.length>0&&Fe(S,[E].concat(ge))}s(Le,"_notifyEvents");function Ke(S,E){for(var ge=[],ue=2;ue<arguments.length;ue++)ge[ue-2]=arguments[ue];E&&E.length>0&&(0,W.tO)(E,function(gt){gt&&gt.count()>0&&Fe(S,[gt.events()].concat(ge))})}s(Ke,"_notifyBatchEvents");function ht(S,E,ge){S&&S.length>0&&Fe("eventsSendRequest",[E>=1e3&&E<=1999?E-1e3:0,ge!==!0])}s(ht,"_sendingEvent");function he(S,E){Ke("eventsSent",S,E),bn()}s(he,"_eventsSentEvent");function Y(S,E){Ke(ln,S,E>=8e3&&E<=8999?E-8e3:Ve.h.Unknown)}s(Y,"_eventsDropped");function sn(S){Ke(ln,S,Ve.h.NonRetryableStatus),bn()}s(sn,"_eventsResponseFail");function y(S,E){Ke(ln,S,Ve.h.Unknown),bn()}s(y,"_otherEvent");function T(){!Ie||!Ie.disableAutoBatchFlushLimit?rn=Math.max(Nt*(dt+1),$n/6):rn=0}s(T,"_setAutoLimits"),(0,W.l_)(Gt,"_setTimeoutOverride",function(){return On.set},function(S){On=Ge(S,On.clear)}),(0,W.l_)(Gt,"_clearTimeoutOverride",function(){return On.clear},function(S){On=Ge(On.set,S)})}),Ue}return s(St,"PostChannel"),St}(Ae.i);const J=yt},873:(Ft,de,f)=>{"use strict";f.d(de,{By:()=>M});var K=f(708);function M(pe){var oe={};return(0,K.rW)(pe,function(W,Se){oe[W]=Se,oe[Se]=W}),(0,K._A)(oe)}s(M,"createEnumStyle");function D(pe){var oe={};return objForEachKey(pe,function(W,Se){oe[W]=W,oe[Se]=W}),deepFreeze(oe)}s(D,"createEnumMap");function U(pe){var oe={};return objForEachKey(pe,function(W,Se){oe[W]=Se[1],oe[Se[0]]=Se[1]}),deepFreeze(oe)}s(U,"createValueMap")},928:(Ft,de,f)=>{"use strict";f.d(de,{h:()=>M});var K=f(873),M=(0,K.By)({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5})},63:(Ft,de,f)=>{"use strict";f.d(de,{i:()=>Se});var K=f(679),M=f(589),D=f(708),U=f(171),pe=f(310),oe=f(41),W="getPlugin",Se=function(){function Ve(){var we=this,Ae,R,V,Q,re;Pe(),(0,K.Z)(Ve,we,function(j){j.initialize=function(X,G,k,xe){De(X,G,xe),Ae=!0},j.teardown=function(X,G){var k=j.core;if(!k||X&&k!==X.core())return;var xe,H=!1,We=X||(0,M.Bt)(null,k,V&&V[W]?V[W]():V),Ct=G||{reason:0,isAsync:!1};function Re(){H||(H=!0,Q.run(We,G),(0,D.tO)(re,function(z){z.rm()}),re=[],xe===!0&&We.processNext(Ct),Pe())}return s(Re,"_unloadCallback"),!j[oe.Ho]||j[oe.Ho](We,Ct,Re)!==!0?Re():xe=!0,xe},j.update=function(X,G){var k=j.core;if(!k||X&&k!==X.core())return;var xe,H=!1,We=X||(0,M.xy)(null,k,V&&V[W]?V[W]():V),Ct=G||{reason:0};function Re(){H||(H=!0,De(We.getCfg(),We.core(),We.getNext()))}return s(Re,"_updateCallback"),!j._doUpdate||j._doUpdate(We,Ct,Re)!==!0?Re():xe=!0,xe},j._addHook=function(X){X&&((0,D.kJ)(X)?re=re.concat(X):re.push(X))},(0,D.Oi)(j,"_addUnloadCb",function(){return Q},"add")}),we.diagLog=function(j){return Ee(j).diagLog()},we[oe.Vr]=function(){return Ae},we.setInitialized=function(j){Ae=j},we[oe.El]=function(j){V=j},we.processNext=function(j,X){X?X.processNext(j):V&&(0,D.mf)(V.processTelemetry)&&V.processTelemetry(j,null)},we._getTelCtx=Ee;function Ee(j){j===void 0&&(j=null);var X=j;if(!X){var G=R||(0,M.CD)(null,{},we.core);V&&V[W]?X=G.createNew(null,V[W]):X=G.createNew(null,V)}return X}s(Ee,"_getTelCtx");function De(j,X,G){j&&(0,D.sO)(j,U.F,[],null,D.le),!G&&X&&(G=X.getProcessTelContext().getNext());var k=V;V&&V[W]&&(k=V[W]()),we.core=X,R=(0,M.CD)(G,j,X,k)}s(De,"_setDefaults");function Pe(){Ae=!1,we.core=null,R=null,V=null,re=[],Q=(0,pe.Y)()}s(Pe,"_initDefaults")}return s(Ve,"BaseTelemetryPlugin"),Ve}()},171:(Ft,de,f)=>{"use strict";f.d(de,{z:()=>K,F:()=>M});var K="iKey",M="extensionConfig"},242:(Ft,de,f)=>{"use strict";f.d(de,{kj:()=>j,JP:()=>k,Nz:()=>xe,p7:()=>H,UY:()=>I});var K=f(630),M=f(708),D=f(41),U=f(18),pe="toGMTString",oe="toUTCString",W="cookie",Se="expires",Ve="enabled",we="isCookieUseDisabled",Ae="disableCookiesUsage",R="_ckMgr",V=null,Q=null,re=null,Ee=(0,K.Me)(),De={},Pe={};function j($,L){var ae=xe[R]||Pe[R];return ae||(ae=xe[R]=xe($,L),Pe[R]=ae),ae}s(j,"_gblCookieMgr");function X($){return $?$.isEnabled():!0}s(X,"_isMgrEnabled");function G($){var L=$.cookieCfg=$.cookieCfg||{};if((0,M.sO)(L,"domain",$.cookieDomain,M.BX,M.le),(0,M.sO)(L,"path",$.cookiePath||"/",null,M.le),(0,M.le)(L[Ve])){var ae=void 0;(0,M.o8)($[we])||(ae=!$[we]),(0,M.o8)($[Ae])||(ae=!$[Ae]),L[Ve]=ae}return L}s(G,"_createCookieMgrConfig");function k($,L){var ae;if($)ae=$.getCookieMgr();else if(L){var ut=L.cookieCfg;ut[R]?ae=ut[R]:ae=xe(L)}return ae||(ae=j(L,($||{}).logger)),ae}s(k,"safeGetCookieMgr");function xe($,L){var ae=G($||Pe),ut=ae.path||"/",Je=ae.domain,Qt=ae[Ve]!==!1,Yt={isEnabled:function(){var ne=Qt&&H(L),be=Pe[R];return ne&&be&&Yt!==be&&(ne=X(be)),ne},setEnabled:function(ne){Qt=ne!==!1},set:function(ne,be,Ne,Lt,rt){var ee=!1;if(X(Yt)){var _e={},Me=(0,M.nd)(be||D.SM),B=Me.indexOf(";");if(B!==-1&&(Me=(0,M.nd)(be.substring(0,B)),_e=We(be.substring(B+1))),(0,M.sO)(_e,"domain",Lt||Je,M.fQ,M.o8),!(0,M.le)(Ne)){var me=(0,K.w1)();if((0,M.o8)(_e[Se])){var ye=(0,M.m6)(),ct=ye+Ne*1e3;if(ct>0){var at=new Date;at.setTime(ct),(0,M.sO)(_e,Se,Ct(at,me?pe:oe)||Ct(at,me?pe:oe)||D.SM,M.fQ)}}me||(0,M.sO)(_e,"max-age",D.SM+Ne,null,M.o8)}var Rt=(0,K.k$)();Rt&&Rt.protocol==="https:"&&((0,M.sO)(_e,"secure",null,null,M.o8),Q===null&&(Q=!I(((0,K.jW)()||{}).userAgent)),Q&&(0,M.sO)(_e,"SameSite","None",null,M.o8)),(0,M.sO)(_e,"path",rt||ut,null,M.o8);var mt=ae.setCookie||qe;mt(ne,Re(Me,_e)),ee=!0}return ee},get:function(ne){var be=D.SM;return X(Yt)&&(be=(ae.getCookie||z)(ne)),be},del:function(ne,be){var Ne=!1;return X(Yt)&&(Ne=Yt.purge(ne,be)),Ne},purge:function(ne,be){var Ne,Lt=!1;if(H(L)){var rt=(Ne={},Ne.path=be||"/",Ne[Se]="Thu, 01 Jan 1970 00:00:01 GMT",Ne);(0,K.w1)()||(rt["max-age"]="0");var ee=ae.delCookie||qe;ee(ne,Re(D.SM,rt)),Lt=!0}return Lt}};return Yt[R]=Yt,Yt}s(xe,"createCookieMgr");function H($){if(V===null){V=!1;try{var L=Ee||{};V=L[W]!==void 0}catch(ae){(0,U.kP)($,2,68,"Cannot access document.cookie - "+(0,M.jj)(ae),{exception:(0,K.eU)(ae)})}}return V}s(H,"areCookiesSupported");function We($){var L={};if($&&$.length){var ae=(0,M.nd)($).split(";");(0,M.tO)(ae,function(ut){if(ut=(0,M.nd)(ut||D.SM),ut){var Je=ut.indexOf("=");Je===-1?L[ut]=null:L[(0,M.nd)(ut.substring(0,Je))]=(0,M.nd)(ut.substring(Je+1))}})}return L}s(We,"_extractParts");function Ct($,L){return(0,M.mf)($[L])?$[L]():null}s(Ct,"_formatDate");function Re($,L){var ae=$||D.SM;return(0,M.rW)(L,function(ut,Je){ae+="; "+ut+((0,M.le)(Je)?D.SM:"="+Je)}),ae}s(Re,"_formatCookieValue");function z($){var L=D.SM;if(Ee){var ae=Ee[W]||D.SM;re!==ae&&(De=We(ae),re=ae),L=(0,M.nd)(De[$]||D.SM)}return L}s(z,"_getCookieValue");function qe($,L){Ee&&(Ee[W]=$+"="+L)}s(qe,"_setCookieValue");function I($){return(0,M.HD)($)?!!((0,M._Q)($,"CPU iPhone OS 12")||(0,M._Q)($,"iPad; CPU OS 12")||(0,M._Q)($,"Macintosh; Intel Mac OS X 10_14")&&(0,M._Q)($,"Version/")&&(0,M._Q)($,"Safari")||(0,M._Q)($,"Macintosh; Intel Mac OS X 10_14")&&(0,M.Id)($,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||(0,M._Q)($,"Chrome/5")||(0,M._Q)($,"Chrome/6")||(0,M._Q)($,"UnrealEngine")&&!(0,M._Q)($,"Chrome")||(0,M._Q)($,"UCBrowser/12")||(0,M._Q)($,"UCBrowser/11")):!1}s(I,"uaDisallowsSameSiteNone")},843:(Ft,de,f)=>{"use strict";f.d(de,{GW:()=>Ae,Jj:()=>R,DO:()=>Q,zB:()=>De});var K=f(91),M=f(242),D=f(630),U=f(708),pe=f(869),oe=f(878),W=f(41),Se=null,Ve,we=null;function Ae(){function H(){return(0,oe.az)(15)}return s(H,"randomHexDigit"),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(Ee,function(We){var Ct=H()|0,Re=We==="x"?Ct:Ct&3|8;return Re.toString(16)})}s(Ae,"newGuid");function R(){var H=(0,D.r)();return H&&H.now?H.now():(0,U.m6)()}s(R,"perfNow");function V(H,We){if(H&&We){var Ct=H.length,Re=Ct-We.length;return H.substring(Re>=0?Re:0,Ct)===We}return!1}s(V,"strEndsWith");function Q(){for(var H=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],We=W.SM,Ct,Re=0;Re<4;Re++)Ct=(0,oe._l)(),We+=H[Ct&15]+H[Ct>>4&15]+H[Ct>>8&15]+H[Ct>>12&15]+H[Ct>>16&15]+H[Ct>>20&15]+H[Ct>>24&15]+H[Ct>>28&15];var z=H[8+((0,oe._l)()&3)|0];return We.substr(0,8)+We.substr(9,4)+"4"+We.substr(13,3)+z+We.substr(16,3)+We.substr(19,12)}s(Q,"generateW3CId");var re={_canUseCookies:void 0,isTypeof:U.Ym,isUndefined:U.o8,isNullOrUndefined:U.le,hasOwnProperty:U.nr,isFunction:U.mf,isObject:U.Kn,isDate:U.J_,isArray:U.kJ,isError:U.VZ,isString:U.HD,isNumber:U.hj,isBoolean:U.jn,toISOString:U.Y6,arrForEach:U.tO,arrIndexOf:U.UA,arrMap:U.Mr,arrReduce:U.Xz,strTrim:U.nd,objCreate:K.pu,objKeys:U.FY,objDefineAccessors:U.l_,addEventHandler:pe.Ib,dateNow:U.m6,isIE:D.w1,disableCookies:j,newGuid:Ae,perfNow:R,newId:oe.pZ,randomValue:oe.az,random32:oe._l,mwcRandomSeed:oe.CN,mwcRandom32:oe.F6,generateW3CId:Q},Ee=/[xy]/g,De={Attach:pe.pZ,AttachEvent:pe.pZ,Detach:pe.pD,DetachEvent:pe.pD};function Pe(H,We){var Ct=(0,M.kj)(H,We),Re=re._canUseCookies;return Se===null&&(Se=[],Ve=Re,(0,U.l_)(re,"_canUseCookies",function(){return Ve},function(z){Ve=z,(0,U.tO)(Se,function(qe){qe.setEnabled(z)})})),(0,U.UA)(Se,Ct)===-1&&Se.push(Ct),(0,U.jn)(Re)&&Ct.setEnabled(Re),(0,U.jn)(Ve)&&Ct.setEnabled(Ve),Ct}s(Pe,"_legacyCookieMgr");function j(){Pe().setEnabled(!1)}s(j,"disableCookies");function X(H){return Pe(null,H).isEnabled()}s(X,"canUseCookies");function G(H,We){return Pe(null,H).get(We)}s(G,"getCookie");function k(H,We,Ct,Re){Pe(null,H).set(We,Ct,null,Re)}s(k,"setCookie");function xe(H,We){return Pe(null,H).del(We)}s(xe,"deleteCookie")},883:(Ft,de,f)=>{"use strict";f.d(de,{J:()=>Ae,K:()=>R});var K=f(392),M=f(708),D=f(878),U=K.RJ,pe="2.8.4",oe="."+(0,D.pZ)(6),W=0;function Se(V,Q,re){if(U)try{return U(V,Q,{value:re,enumerable:!1,configurable:!0}),!0}catch(Ee){}return!1}s(Se,"_createAccessor");function Ve(V){return V.nodeType===1||V.nodeType===9||!+V.nodeType}s(Ve,"_canAcceptData");function we(V,Q){var re=Q[V.id];if(!re){re={};try{Ve(Q)&&(Se(Q,V.id,re)||(Q[V.id]=re))}catch(Ee){}}return re}s(we,"_getCache");function Ae(V,Q){return Q===void 0&&(Q=!1),(0,M.Gf)(V+W+++(Q?"."+pe:"")+oe)}s(Ae,"createUniqueNamespace");function R(V){var Q={id:Ae("_aiData-"+(V||"")+"."+pe),accept:function(re){return Ve(re)},get:function(re,Ee,De,Pe){var j=re[Q.id];return j?j[(0,M.Gf)(Ee)]:(Pe&&(j=we(Q,re),j[(0,M.Gf)(Ee)]=De),De)},kill:function(re,Ee){if(re&&re[Ee])try{delete re[Ee]}catch(De){}}};return Q}s(R,"createElmNodeData")},158:(Ft,de,f)=>{"use strict";f.d(de,{j:()=>W,p:()=>Se});var K=f(630),M=["eventsSent","eventsDiscarded","eventsSendRequest","perfEvent"],D=null,U;function pe(Ve,we){return function(){var Ae=arguments,R=W(we);if(R){var V=R.listener;V&&V[Ve]&&V[Ve].apply(V,Ae)}}}s(pe,"_listenerProxyFunc");function oe(){var Ve=(0,K.a8)("Microsoft");return Ve&&(D=Ve.ApplicationInsights),D}s(oe,"_getExtensionNamespace");function W(Ve){var we=D;return!we&&Ve.disableDbgExt!==!0&&(we=D||oe()),we?we.ChromeDbgExt:null}s(W,"getDebugExt");function Se(Ve){if(!U){U={};for(var we=0;we<M.length;we++)U[M[we]]=pe(M[we],Ve)}return U}s(Se,"getDebugListener")},18:(Ft,de,f)=>{"use strict";f.d(de,{lQ:()=>V,vH:()=>Q,AQ:()=>re,kP:()=>De,jV:()=>Pe});var K=f(630),M=f(679),D=f(708),U=f(158),pe=f(41),oe="AI (Internal): ",W="AI: ",Se="AITR_",Ve="errorToConsole",we="warnToConsole";function Ae(X){return X?'"'+X.replace(/\"/g,pe.SM)+'"':pe.SM}s(Ae,"_sanitizeDiagnosticText");function R(X,G){var k=(0,K.dr)();if(k){var xe="log";k[X]&&(xe=X),(0,D.mf)(k[xe])&&k[xe](G)}}s(R,"_logToConsole");var V=function(){function X(G,k,xe,H){xe===void 0&&(xe=!1);var We=this;We.messageId=G,We.message=(xe?W:oe)+G;var Ct=pe.SM;(0,K.nS)()&&(Ct=(0,K.xA)().stringify(H));var Re=(k?" message:"+Ae(k):pe.SM)+(H?" props:"+Ae(Ct):pe.SM);We.message+=Re}return s(X,"_InternalLogMessage"),X.dataType="MessageData",X}();function Q(X,G){return(X||{}).logger||new re(G)}s(Q,"safeGetLogger");var re=function(){function X(G){this.identifier="DiagnosticLogger",this.queue=[];var k=0,xe={};(0,M.Z)(X,this,function(H){(0,D.le)(G)&&(G={}),H.consoleLoggingLevel=function(){return We("loggingLevelConsole",0)},H.telemetryLoggingLevel=function(){return We("loggingLevelTelemetry",1)},H.maxInternalMessageLimit=function(){return We("maxMessageLimit",25)},H.enableDebugExceptions=function(){return We("enableDebugExceptions",!1)},H.throwInternal=function(z,qe,I,$,L){L===void 0&&(L=!1);var ae=new V(qe,I,L,$);if(H.enableDebugExceptions())throw(0,K.eU)(ae);var ut=z===1?Ve:we;if((0,D.o8)(ae.message))Re("throw"+(z===1?"Critical":"Warning"),ae);else{var Je=H.consoleLoggingLevel();if(L){var Qt=+ae.messageId;!xe[Qt]&&Je>=z&&(H[ut](ae.message),xe[Qt]=!0)}else Je>=z&&H[ut](ae.message);H.logInternalMessage(z,ae)}},H.warnToConsole=function(z){R("warn",z),Re("warning",z)},H.errorToConsole=function(z){R("error",z),Re("error",z)},H.resetInternalMessageCount=function(){k=0,xe={}},H.logInternalMessage=function(z,qe){if(!Ct()){var I=!0,$=Se+qe.messageId;if(xe[$]?I=!1:xe[$]=!0,I&&(z<=H.telemetryLoggingLevel()&&(H.queue.push(qe),k++,Re(z===1?"error":"warn",qe)),k===H.maxInternalMessageLimit())){var L="Internal events throttle limit per PageView reached for this app.",ae=new V(23,L,!1);H.queue.push(ae),z===1?H.errorToConsole(L):H.warnToConsole(L)}}};function We(z,qe){var I=G[z];return(0,D.le)(I)?qe:I}s(We,"_getConfigValue");function Ct(){return k>=H.maxInternalMessageLimit()}s(Ct,"_areInternalMessagesThrottled");function Re(z,qe){var I=(0,U.j)(G);I&&I.diagLog&&I.diagLog(z,qe)}s(Re,"_debugExtMsg")})}return s(X,"DiagnosticLogger"),X}();function Ee(X){return X||new re}s(Ee,"_getLogger");function De(X,G,k,xe,H,We){We===void 0&&(We=!1),(X||new re).throwInternal(G,k,xe,H,We)}s(De,"_throwInternal");function Pe(X,G){Ee(X).warnToConsole(G)}s(Pe,"_warnToConsole");function j(X,G,k){Ee(X).logInternalMessage(G,k)}s(j,"_logInternalMessage")},630:(Ft,de,f)=>{"use strict";f.d(de,{dI:()=>Ct,a8:()=>Re,Ym:()=>z,Jj:()=>qe,Nv:()=>I,Me:()=>$,d6:()=>L,jW:()=>ae,fE:()=>ut,s1:()=>Je,k$:()=>Qt,dr:()=>Yt,r:()=>ne,nS:()=>be,xA:()=>Ne,MX:()=>Lt,gz:()=>rt,b$:()=>ee,w1:()=>_e,sA:()=>Me,eU:()=>B,MF:()=>ye,JO:()=>ct,cp:()=>at,Z3:()=>Rt,ed:()=>cn,pI:()=>mn});var K=f(392),M=f(91),D=f(41),U=f(708),pe="window",oe="document",W="documentMode",Se="navigator",Ve="history",we="location",Ae="console",R="performance",V="JSON",Q="crypto",re="msCrypto",Ee="ReactNative",De="msie",Pe="trident/",j="XMLHttpRequest",X=null,G=null,k=!1,xe=null,H=null;function We(Et,Ht){var Xt=!1;if(Et){try{if(Xt=Ht in Et,!Xt){var ce=Et[K.hB];ce&&(Xt=Ht in ce)}}catch(Xr){}if(!Xt)try{var tr=new Et;Xt=!(0,U.o8)(tr[Ht])}catch(Xr){}}return Xt}s(We,"_hasProperty");function Ct(Et){k=Et}s(Ct,"setEnableEnvMocks");function Re(Et){var Ht=(0,M.Rd)();return Ht&&Ht[Et]?Ht[Et]:Et===pe&&z()?window:null}s(Re,"getGlobalInst");function z(){return Boolean(typeof window===K.fK&&window)}s(z,"hasWindow");function qe(){return z()?window:Re(pe)}s(qe,"getWindow");function I(){return Boolean(typeof document===K.fK&&document)}s(I,"hasDocument");function $(){return I()?document:Re(oe)}s($,"getDocument");function L(){return Boolean(typeof navigator===K.fK&&navigator)}s(L,"hasNavigator");function ae(){return L()?navigator:Re(Se)}s(ae,"getNavigator");function ut(){return Boolean(typeof history===K.fK&&history)}s(ut,"hasHistory");function Je(){return ut()?history:Re(Ve)}s(Je,"getHistory");function Qt(Et){if(Et&&k){var Ht=Re("__mockLocation");if(Ht)return Ht}return typeof location===K.fK&&location?location:Re(we)}s(Qt,"getLocation");function Yt(){return typeof console!==K.jA?console:Re(Ae)}s(Yt,"getConsole");function ne(){return Re(R)}s(ne,"getPerformance");function be(){return Boolean(typeof JSON===K.fK&&JSON||Re(V)!==null)}s(be,"hasJSON");function Ne(){return be()?JSON||Re(V):null}s(Ne,"getJSON");function Lt(){return Re(Q)}s(Lt,"getCrypto");function rt(){return Re(re)}s(rt,"getMsCrypto");function ee(){var Et=ae();return Et&&Et.product?Et.product===Ee:!1}s(ee,"isReactNative");function _e(){var Et=ae();if(Et&&(Et.userAgent!==G||X===null)){G=Et.userAgent;var Ht=(G||D.SM).toLowerCase();X=(0,U._Q)(Ht,De)||(0,U._Q)(Ht,Pe)}return X}s(_e,"isIE");function Me(Et){if(Et===void 0&&(Et=null),!Et){var Ht=ae()||{};Et=Ht?(Ht.userAgent||D.SM).toLowerCase():D.SM}var Xt=(Et||D.SM).toLowerCase();if((0,U._Q)(Xt,De)){var ce=$()||{};return Math.max(parseInt(Xt.split(De)[1]),ce[W]||0)}else if((0,U._Q)(Xt,Pe)){var tr=parseInt(Xt.split(Pe)[1]);if(tr)return tr+4}return null}s(Me,"getIEVersion");function B(Et){var Ht=Object[K.hB].toString.call(Et),Xt=D.SM;return Ht==="[object Error]"?Xt="{ stack: '"+Et.stack+"', message: '"+Et.message+"', name: '"+Et.name+"'":be()&&(Xt=Ne().stringify(Et)),Ht+Xt}s(B,"dumpObj");function me(Et){if(!Et||!isString(Et)){var Ht=ae()||{};Et=Ht?(Ht.userAgent||strEmpty).toLowerCase():strEmpty}var Xt=(Et||strEmpty).toLowerCase();return Xt.indexOf("safari")>=0}s(me,"isSafari");function ye(){return H===null&&(H=L()&&Boolean(ae().sendBeacon)),H}s(ye,"isBeaconsSupported");function ct(Et){var Ht=!1;try{Ht=!!Re("fetch");var Xt=Re("Request");Ht&&Et&&Xt&&(Ht=We(Xt,"keepalive"))}catch(ce){}return Ht}s(ct,"isFetchSupported");function at(){return xe===null&&(xe=typeof XDomainRequest!==K.jA,xe&&Rt()&&(xe=xe&&!We(Re(j),"withCredentials"))),xe}s(at,"useXDomainRequest");function Rt(){var Et=!1;try{var Ht=Re(j);Et=!!Ht}catch(Xt){}return Et}s(Rt,"isXhrSupported");function mt(Et,Ht){if(Et)for(var Xt=0;Xt<Et.length;Xt++){var ce=Et[Xt];if(ce.name&&ce.name===Ht)return ce}return{}}s(mt,"_getNamedValue");function cn(Et){var Ht=$();return Ht&&Et?mt(Ht.querySelectorAll("meta"),Et).content:null}s(cn,"findMetaTag");function mn(Et){var Ht,Xt=ne();if(Xt){var ce=Xt.getEntriesByType("navigation")||[];Ht=mt((ce.length>0?ce[0]:{}).serverTiming,Et).description}return Ht}s(mn,"findNamedServerTiming")},869:(Ft,de,f)=>{"use strict";f.d(de,{um:()=>H,jU:()=>I,XO:()=>$,QY:()=>L,pZ:()=>ae,pD:()=>ut,Ib:()=>Je,C1:()=>Qt,yw:()=>ne,nJ:()=>be,c9:()=>Ne,JA:()=>Lt,TJ:()=>rt,C9:()=>ee,nD:()=>_e,Yl:()=>Me});var K=f(883),M=f(630),D=f(708),U="on",pe="attachEvent",oe="addEventListener",W="detachEvent",Se="removeEventListener",Ve="events",we="visibilitychange",Ae="pagehide",R="pageshow",V="unload",Q="beforeunload",re=(0,K.J)("aiEvtPageHide"),Ee=(0,K.J)("aiEvtPageShow"),De=/\.[\.]+/g,Pe=/[\.]+$/,j=1,X=(0,K.K)("events"),G=/^([^.]*)(?:\.(.+)|)/;function k(B){return B&&B.replace?B.replace(/^\s*\.*|\.*\s*$/g,""):B}s(k,"_normalizeNamespace");function xe(B,me){if(me){var ye="";(0,D.kJ)(me)?(ye="",(0,D.tO)(me,function(at){at=k(at),at&&(at[0]!=="."&&(at="."+at),ye+=at)})):ye=k(me),ye&&(ye[0]!=="."&&(ye="."+ye),B=(B||"")+ye)}var ct=G.exec(B||"")||[];return{type:ct[1],ns:(ct[2]||"").replace(De,".").replace(Pe,"").split(".").sort().join(".")}}s(xe,"_getEvtNamespace");function H(B,me,ye){var ct=[],at=X.get(B,Ve,{},!1),Rt=xe(me,ye);return(0,D.rW)(at,function(mt,cn){(0,D.tO)(cn,function(mn){(!Rt.type||Rt.type===mn.evtName.type)&&(!Rt.ns||Rt.ns===Rt.ns)&&ct.push({name:mn.evtName.type+(mn.evtName.ns?"."+mn.evtName.ns:""),handler:mn.handler})})}),ct}s(H,"__getRegisteredEvents");function We(B,me,ye){ye===void 0&&(ye=!0);var ct=X.get(B,Ve,{},ye),at=ct[me];return at||(at=ct[me]=[]),at}s(We,"_getRegisteredEvents");function Ct(B,me,ye,ct){B&&me&&me.type&&(B[Se]?B[Se](me.type,ye,ct):B[W]&&B[W](U+me.type,ye))}s(Ct,"_doDetach");function Re(B,me,ye,ct){var at=!1;return B&&me&&me.type&&ye&&(B[oe]?(B[oe](me.type,ye,ct),at=!0):B[pe]&&(B[pe](U+me.type,ye),at=!0)),at}s(Re,"_doAttach");function z(B,me,ye,ct){for(var at=me.length;at--;){var Rt=me[at];Rt&&(!ye.ns||ye.ns===Rt.evtName.ns)&&(!ct||ct(Rt))&&(Ct(B,Rt.evtName,Rt.handler,Rt.capture),me.splice(at,1))}}s(z,"_doUnregister");function qe(B,me,ye){if(me.type)z(B,We(B,me.type),me,ye);else{var ct=X.get(B,Ve,{});(0,D.rW)(ct,function(at,Rt){z(B,Rt,me,ye)}),(0,D.FY)(ct).length===0&&X.kill(B,Ve)}}s(qe,"_unregisterEvents");function I(B,me){var ye;return me?((0,D.kJ)(me)?ye=[B].concat(me):ye=[B,me],ye=xe("xx",ye).ns.split(".")):ye=B,ye}s(I,"mergeEvtNamespace");function $(B,me,ye,ct,at){at===void 0&&(at=!1);var Rt=!1;if(B)try{var mt=xe(me,ct);if(Rt=Re(B,mt,ye,at),Rt&&X.accept(B)){var cn={guid:j++,evtName:mt,handler:ye,capture:at};We(B,mt.type).push(cn)}}catch(mn){}return Rt}s($,"eventOn");function L(B,me,ye,ct,at){if(at===void 0&&(at=!1),B)try{var Rt=xe(me,ct),mt=!1;qe(B,Rt,function(cn){return Rt.ns&&!ye||cn.handler===ye?(mt=!0,!0):!1}),mt||Ct(B,Rt,ye,at)}catch(cn){}}s(L,"eventOff");function ae(B,me,ye,ct){return ct===void 0&&(ct=!1),$(B,me,ye,null,ct)}s(ae,"attachEvent");function ut(B,me,ye,ct){ct===void 0&&(ct=!1),L(B,me,ye,null,ct)}s(ut,"detachEvent");function Je(B,me,ye){var ct=!1,at=(0,M.Jj)();at&&(ct=$(at,B,me,ye),ct=$(at.body,B,me,ye)||ct);var Rt=(0,M.Me)();return Rt&&(ct=$(Rt,B,me,ye)||ct),ct}s(Je,"addEventHandler");function Qt(B,me,ye){var ct=(0,M.Jj)();ct&&(L(ct,B,me,ye),L(ct.body,B,me,ye));var at=(0,M.Me)();at&&L(at,B,me,ye)}s(Qt,"removeEventHandler");function Yt(B,me,ye,ct){var at=!1;return me&&B&&B.length>0&&(0,D.tO)(B,function(Rt){Rt&&(!ye||(0,D.UA)(ye,Rt)===-1)&&(at=Je(Rt,me,ct)||at)}),at}s(Yt,"_addEventListeners");function ne(B,me,ye,ct){var at=!1;return me&&B&&(0,D.kJ)(B)&&(at=Yt(B,me,ye,ct),!at&&ye&&ye.length>0&&(at=Yt(B,me,null,ct))),at}s(ne,"addEventListeners");function be(B,me,ye){B&&(0,D.kJ)(B)&&(0,D.tO)(B,function(ct){ct&&Qt(ct,me,ye)})}s(be,"removeEventListeners");function Ne(B,me,ye){return ne([Q,V,Ae],B,me,ye)}s(Ne,"addPageUnloadEventListener");function Lt(B,me){be([Q,V,Ae],B,me)}s(Lt,"removePageUnloadEventListener");function rt(B,me,ye){function ct(mt){var cn=(0,M.Me)();B&&cn&&cn.visibilityState==="hidden"&&B(mt)}s(ct,"_handlePageVisibility");var at=I(re,ye),Rt=Yt([Ae],B,me,at);return(!me||(0,D.UA)(me,we)===-1)&&(Rt=Yt([we],ct,me,at)||Rt),!Rt&&me&&(Rt=rt(B,null,ye)),Rt}s(rt,"addPageHideEventListener");function ee(B,me){var ye=I(re,me);be([Ae],B,ye),be([we],null,ye)}s(ee,"removePageHideEventListener");function _e(B,me,ye){function ct(mt){var cn=(0,M.Me)();B&&cn&&cn.visibilityState==="visible"&&B(mt)}s(ct,"_handlePageVisibility");var at=I(Ee,ye),Rt=Yt([R],B,me,at);return Rt=Yt([we],ct,me,at)||Rt,!Rt&&me&&(Rt=_e(B,null,ye)),Rt}s(_e,"addPageShowEventListener");function Me(B,me){var ye=I(Ee,me);be([R],B,ye),be([we],null,ye)}s(Me,"removePageShowEventListener")},708:(Ft,de,f)=>{"use strict";f.d(de,{Ym:()=>ut,o8:()=>Je,le:()=>Yt,BX:()=>ne,nr:()=>be,Kn:()=>Ne,mf:()=>Lt,Gf:()=>ee,rW:()=>_e,Id:()=>Me,xe:()=>me,_Q:()=>ct,J_:()=>at,kJ:()=>Rt,VZ:()=>cn,HD:()=>mn,hj:()=>Et,jn:()=>Ht,Y6:()=>tr,tO:()=>cr,UA:()=>Jr,Mr:()=>Yr,Xz:()=>vi,nd:()=>qn,FY:()=>Gn,l_:()=>$r,_A:()=>Tn,FL:()=>lt,Xi:()=>ot,m6:()=>ze,jj:()=>ve,sO:()=>Ye,qK:()=>je,F:()=>Ge,fQ:()=>_t,_y:()=>Nt,cf:()=>Te,Oi:()=>et,Vb:()=>Oe,Ax:()=>O,mm:()=>ln});var K=f(392),M=f(91),D=f(41),U="toISOString",pe="endsWith",oe="startsWith",W="indexOf",Se="map",Ve="reduce",we="trim",Ae="toString",R="__proto__",V="constructor",Q=K.RJ,re=K.Pw.freeze,Ee=K.Pw.seal,De=K.Pw.keys,Pe=String[K.hB],j=Pe[we],X=Pe[pe],G=Pe[oe],k=Date[K.hB],xe=k[U],H=Array.isArray,We=K.V4[Ae],Ct=K.CY[Ae],Re=Ct.call(K.Pw),z=/-([a-z])/g,qe=/([^\w\d_$])/g,I=/^(\d+[\w\d_$])/,$=Object.getPrototypeOf;function L(_){if(_){if($)return $(_);var le=_[R]||_[K.hB]||_[V];if(le)return le}return null}s(L,"_getObjProto");function ae(_){return We.call(_)}s(ae,"objToString");function ut(_,le){return typeof _===le}s(ut,"isTypeof");function Je(_){return _===void 0||typeof _===K.jA}s(Je,"isUndefined");function Qt(_){return!Je(_)}s(Qt,"isNotUndefined");function Yt(_){return _===null||Je(_)}s(Yt,"isNullOrUndefined");function ne(_){return!Yt(_)}s(ne,"isNotNullOrUndefined");function be(_,le){return!!(_&&K.CY.call(_,le))}s(be,"hasOwnProperty");function Ne(_){return!!(_&&typeof _===K.fK)}s(Ne,"isObject");function Lt(_){return!!(_&&typeof _===K.cb)}s(Lt,"isFunction");function rt(_){return _&&Lt(_.then)}s(rt,"isPromiseLike");function ee(_){var le=_;return le&&mn(le)&&(le=le.replace(z,function(ke,Qe){return Qe.toUpperCase()}),le=le.replace(qe,"_"),le=le.replace(I,function(ke,Qe){return"_"+Qe})),le}s(ee,"normalizeJsName");function _e(_,le){if(_)for(var ke in _)K.CY.call(_,ke)&&le.call(_,ke,_[ke])}s(_e,"objForEachKey");function Me(_,le){var ke=!1;return _&&le&&!(ke=_===le)&&(ke=X?_[pe](le):B(_,le)),ke}s(Me,"strEndsWith");function B(_,le){var ke=!1,Qe=le?le.length:0,yt=_?_.length:0;if(Qe&&yt&&yt>=Qe&&!(ke=_===le)){for(var J=yt-1,He=Qe-1;He>=0;He--){if(_[J]!=le[He])return!1;J--}ke=!0}return ke}s(B,"_strEndsWithPoly");function me(_,le){var ke=!1;return _&&le&&!(ke=_===le)&&(ke=G?_[oe](le):ye(_,le)),ke}s(me,"strStartsWith");function ye(_,le){var ke=!1,Qe=le?le.length:0;if(_&&Qe&&_.length>=Qe&&!(ke=_===le)){for(var yt=0;yt<Qe;yt++)if(_[yt]!==le[yt])return!1;ke=!0}return ke}s(ye,"_strStartsWithPoly");function ct(_,le){return _&&le?_.indexOf(le)!==-1:!1}s(ct,"strContains");function at(_){return!!(_&&We.call(_)==="[object Date]")}s(at,"isDate");var Rt=H||mt;function mt(_){return!!(_&&We.call(_)==="[object Array]")}s(mt,"_isArrayPoly");function cn(_){return!!(_&&We.call(_)==="[object Error]")}s(cn,"isError");function mn(_){return typeof _=="string"}s(mn,"isString");function Et(_){return typeof _=="number"}s(Et,"isNumber");function Ht(_){return typeof _=="boolean"}s(Ht,"isBoolean");function Xt(_){return typeof _=="symbol"}s(Xt,"isSymbol");function ce(_){var le=!1;if(_&&typeof _=="object"){var ke=$?$(_):L(_);ke?(ke[V]&&K.CY.call(ke,V)&&(ke=ke[V]),le=typeof ke===K.cb&&Ct.call(ke)===Re):le=!0}return le}s(ce,"isPlainObject");function tr(_){if(_)return xe?_[U]():Xr(_)}s(tr,"toISOString");function Xr(_){if(_&&_.getUTCFullYear){var le=s(function(ke){var Qe=String(ke);return Qe.length===1&&(Qe="0"+Qe),Qe},"pad");return _.getUTCFullYear()+"-"+le(_.getUTCMonth()+1)+"-"+le(_.getUTCDate())+"T"+le(_.getUTCHours())+":"+le(_.getUTCMinutes())+":"+le(_.getUTCSeconds())+"."+String((_.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}s(Xr,"_toISOStringPoly");function cr(_,le,ke){var Qe=_.length;try{for(var yt=0;yt<Qe&&!(yt in _&&le.call(ke||_,_[yt],yt,_)===-1);yt++);}catch(J){}}s(cr,"arrForEach");function Jr(_,le,ke){if(_){if(_[W])return _[W](le,ke);var Qe=_.length,yt=ke||0;try{for(var J=Math.max(yt>=0?yt:Qe-Math.abs(yt),0);J<Qe;J++)if(J in _&&_[J]===le)return J}catch(He){}}return-1}s(Jr,"arrIndexOf");function Yr(_,le,ke){var Qe;if(_){if(_[Se])return _[Se](le,ke);var yt=_.length,J=ke||_;Qe=new Array(yt);try{for(var He=0;He<yt;He++)He in _&&(Qe[He]=le.call(J,_[He],_))}catch(St){}}return Qe}s(Yr,"arrMap");function vi(_,le,ke){var Qe;if(_){if(_[Ve])return _[Ve](le,ke);var yt=_.length,J=0;if(arguments.length>=3)Qe=arguments[2];else{for(;J<yt&&!(J in _);)J++;Qe=_[J++]}for(;J<yt;)J in _&&(Qe=le(Qe,_[J],J,_)),J++}return Qe}s(vi,"arrReduce");function qn(_){return _&&(_=j&&_[we]?_[we]():_.replace?_.replace(/^\s+|\s+$/g,""):_),_}s(qn,"strTrim");var Wr=!{toString:null}.propertyIsEnumerable("toString"),Rr=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];function Gn(_){var le=typeof _;if(le!==K.cb&&(le!==K.fK||_===null)&&(0,M.ZU)("objKeys called on non-object"),!Wr&&De)return De(_);var ke=[];for(var Qe in _)_&&K.CY.call(_,Qe)&&ke.push(Qe);if(Wr)for(var yt=Rr.length,J=0;J<yt;J++)_&&K.CY.call(_,Rr[J])&&ke.push(Rr[J]);return ke}s(Gn,"objKeys");function $r(_,le,ke,Qe){if(Q)try{var yt={enumerable:!0,configurable:!0};return ke&&(yt.get=ke),Qe&&(yt.set=Qe),Q(_,le,yt),!0}catch(J){}return!1}s($r,"objDefineAccessors");function lr(_){return _}s(lr,"_doNothing");function Tn(_){return re&&_e(_,function(le,ke){(Rt(ke)||Ne(ke))&&re(ke)}),lt(_)}s(Tn,"deepFreeze");var lt=re||lr,ot=Ee||lr;function ze(){var _=Date;return _.now?_.now():new _().getTime()}s(ze,"dateNow");function ve(_){return cn(_)?_.name:D.SM}s(ve,"getExceptionName");function Ye(_,le,ke,Qe,yt){var J=ke;return _&&(J=_[le],J!==ke&&(!yt||yt(J))&&(!Qe||Qe(ke))&&(J=ke,_[le]=J)),J}s(Ye,"setValue");function je(_,le,ke){var Qe;return _?(Qe=_[le],!Qe&&Yt(Qe)&&(Qe=Je(ke)?{}:ke,_[le]=Qe)):Qe=Je(ke)?{}:ke,Qe}s(je,"getSetValue");function Ge(_){return!_}s(Ge,"isNotTruthy");function _t(_){return!!_}s(_t,"isTruthy");function Nt(_){throw new Error(_)}s(Nt,"throwError");function Ut(_,le){var ke=null,Qe=null;return Lt(_)?ke=_:Qe=_,function(){var yt=arguments;if(ke&&(Qe=ke()),Qe)return Qe[le].apply(Qe,yt)}}s(Ut,"_createProxyFunction");function Te(_,le,ke){if(_&&le&&Ne(_)&&Ne(le)){var Qe=s(function(J){if(mn(J)){var He=le[J];Lt(He)?(!ke||ke(J,!0,le,_))&&(_[J]=Ut(le,J)):(!ke||ke(J,!1,le,_))&&(be(_,J)&&delete _[J],$r(_,J,function(){return le[J]},function(St){le[J]=St})||(_[J]=He))}},"_loop_1");for(var yt in le)Qe(yt)}return _}s(Te,"proxyAssign");function et(_,le,ke,Qe,yt){_&&le&&ke&&(yt!==!1||Je(_[le]))&&(_[le]=Ut(ke,Qe))}s(et,"proxyFunctionAs");function Oe(_,le,ke,Qe){return _&&le&&Ne(_)&&Rt(ke)&&cr(ke,function(yt){mn(yt)&&et(_,yt,le,yt,Qe)}),_}s(Oe,"proxyFunctions");function dt(_){return function(){function le(){var ke=this;_&&_e(_,function(Qe,yt){ke[Qe]=yt})}return s(le,"class_1"),le}()}s(dt,"createClassFromInterface");function O(_){return _&&K.rl&&(_=(0,K.Pw)((0,K.rl)({},_))),_}s(O,"optimizeObject");function ln(_,le,ke,Qe,yt,J){var He=arguments,St=He[0]||{},Ue=He.length,Ie=!1,Dt=1;for(Ue>0&&Ht(St)&&(Ie=St,St=He[Dt]||{},Dt++),Ne(St)||(St={});Dt<Ue;Dt++){var xt=He[Dt],tt=Rt(xt),$t=Ne(xt);for(var qt in xt){var nn=tt&&qt in xt||$t&&K.CY.call(xt,qt);if(!!nn){var En=xt[qt],$n=void 0;if(Ie&&En&&(($n=Rt(En))||ce(En))){var pn=St[qt];$n?Rt(pn)||(pn=[]):ce(pn)||(pn={}),En=ln(Ie,pn,En)}En!==void 0&&(St[qt]=En)}}}return St}s(ln,"objExtend")},41:(Ft,de,f)=>{"use strict";f.d(de,{SM:()=>K,i9:()=>M,Nz:()=>D,El:()=>U,Vr:()=>pe,vE:()=>oe,Gc:()=>W,Rw:()=>Se,C0:()=>Ve,Ho:()=>we,Z_:()=>Ae,Mf:()=>R,nE:()=>V,dV:()=>re,XP:()=>Ee,eO:()=>De,H4:()=>Pe,rX:()=>j,SN:()=>X});var K="",M="processTelemetry",D="priority",U="setNextPlugin",pe="isInitialized",oe="teardown",W="core",Se="update",Ve="disabled",we="_doTeardown",Ae="processNext",R="resume",V="pause",Q="NotificationListener",re="add"+Q,Ee="remove"+Q,De="eventsSent",Pe="eventsDiscarded",j="eventsSendRequest",X="perfEvent"},288:(Ft,de,f)=>{"use strict";f.d(de,{zn:()=>pe,Jk:()=>oe,Lm:()=>Se,j5:()=>we});var K=f(679),M=f(708),D="ctx",U=null,pe=function(){function Ae(R,V,Q){var re=this,Ee=!1;if(re.start=(0,M.m6)(),re.name=R,re.isAsync=Q,re.isChildEvt=function(){return!1},(0,M.mf)(V)){var De;Ee=(0,M.l_)(re,"payload",function(){return!De&&(0,M.mf)(V)&&(De=V(),V=null),De})}re.getCtx=function(Pe){return Pe?Pe===Ae.ParentContextKey||Pe===Ae.ChildrenContextKey?re[Pe]:(re[D]||{})[Pe]:null},re.setCtx=function(Pe,j){if(Pe)if(Pe===Ae.ParentContextKey)re[Pe]||(re.isChildEvt=function(){return!0}),re[Pe]=j;else if(Pe===Ae.ChildrenContextKey)re[Pe]=j;else{var X=re[D]=re[D]||{};X[Pe]=j}},re.complete=function(){var Pe=0,j=re.getCtx(Ae.ChildrenContextKey);if((0,M.kJ)(j))for(var X=0;X<j.length;X++){var G=j[X];G&&(Pe+=G.time)}re.time=(0,M.m6)()-re.start,re.exTime=re.time-Pe,re.complete=function(){},!Ee&&(0,M.mf)(V)&&(re.payload=V())}}return s(Ae,"PerfEvent"),Ae.ParentContextKey="parent",Ae.ChildrenContextKey="childEvts",Ae}(),oe=function(){function Ae(R){this.ctx={},(0,K.Z)(Ae,this,function(V){V.create=function(Q,re,Ee){return new pe(Q,re,Ee)},V.fire=function(Q){Q&&(Q.complete(),R&&(0,M.mf)(R.perfEvent)&&R.perfEvent(Q))},V.setCtx=function(Q,re){if(Q){var Ee=V[D]=V[D]||{};Ee[Q]=re}},V.getCtx=function(Q){return(V[D]||{})[Q]}})}return s(Ae,"PerfManager"),Ae}(),W="CoreUtils.doPerf";function Se(Ae,R,V,Q,re){if(Ae){var Ee=Ae;if((0,M.mf)(Ee.getPerfMgr)&&(Ee=Ee.getPerfMgr()),Ee){var De=void 0,Pe=Ee.getCtx(W);try{if(De=Ee.create(R(),Q,re),De){if(Pe&&De.setCtx&&(De.setCtx(pe.ParentContextKey,Pe),Pe.getCtx&&Pe.setCtx)){var j=Pe.getCtx(pe.ChildrenContextKey);j||(j=[],Pe.setCtx(pe.ChildrenContextKey,j)),j.push(De)}return Ee.setCtx(W,De),V(De)}}catch(X){De&&De.setCtx&&De.setCtx("exception",X)}finally{De&&Ee.fire(De),Ee.setCtx(W,Pe)}}}return V()}s(Se,"doPerf");function Ve(Ae){U=Ae}s(Ve,"setGblPerfMgr");function we(){return U}s(we,"getGblPerfMgr")},589:(Ft,de,f)=>{"use strict";f.d(de,{CD:()=>V,Bt:()=>Q,xy:()=>re,jV:()=>Ee,Vi:()=>Pe});var K=f(18),M=f(708),D=f(288),U=f(630),pe=f(41),oe=f(833),W="TelemetryPluginChain",Se="_hasRun",Ve="_getTelCtx",we=0;function Ae(j,X,G){for(;j;){if(j.getPlugin()===G)return j;j=j.getNext()}return Ee([G],X.config||{},X)}s(Ae,"_getNextProxyStart");function R(j,X,G,k){var xe=null,H=[];k!==null&&(xe=k?Ae(j,G,k):j);var We={_next:Re,ctx:{core:function(){return G},diagLog:function(){return(0,K.vH)(G,X)},getCfg:function(){return X},getExtCfg:z,getConfig:qe,hasNext:function(){return!!xe},getNext:function(){return xe},setNext:function($){xe=$},iterate:I,onComplete:Ct}};function Ct($,L){for(var ae=[],ut=2;ut<arguments.length;ut++)ae[ut-2]=arguments[ut];$&&H.push({func:$,self:(0,M.o8)(L)?We.ctx:L,args:ae})}s(Ct,"_addOnComplete");function Re(){var $=xe;if(xe=$?$.getNext():null,!$){var L=H;L&&L.length>0&&((0,M.tO)(L,function(ae){try{ae.func.call(ae.self,ae.args)}catch(ut){(0,K.kP)(G.logger,2,73,"Unexpected Exception during onComplete - "+(0,U.eU)(ut))}}),H=[])}return $}s(Re,"_moveNext");function z($,L,ae){L===void 0&&(L={}),ae===void 0&&(ae=0);var ut;if(X){var Je=X.extensionConfig;Je&&$&&(ut=Je[$])}if(!ut)ut=L;else if((0,M.Kn)(L)&&ae!==0){var Qt=(0,M.mm)(!0,L,ut);X&&ae===2&&(0,M.rW)(L,function(Yt){if((0,M.le)(Qt[Yt])){var ne=X[Yt];(0,M.le)(ne)||(Qt[Yt]=ne)}}),ut=Qt}return ut}s(z,"_getExtCfg");function qe($,L,ae){ae===void 0&&(ae=!1);var ut,Je=z($,null);return Je&&!(0,M.le)(Je[L])?ut=Je[L]:X&&!(0,M.le)(X[L])&&(ut=X[L]),(0,M.le)(ut)?ae:ut}s(qe,"_getConfig");function I($){for(var L;L=We._next();){var ae=L.getPlugin();ae&&$(ae)}}return s(I,"_iterateChain"),We}s(R,"_createInternalContext");function V(j,X,G,k){var xe=R(j,X,G,k),H=xe.ctx;function We(Re){var z=xe._next();return z&&z.processTelemetry(Re,H),!z}s(We,"_processNext");function Ct(Re,z){return Re===void 0&&(Re=null),(0,M.kJ)(Re)&&(Re=Ee(Re,X,G,z)),V(Re||H.getNext(),X,G,z)}return s(Ct,"_createNew"),H.processNext=We,H.createNew=Ct,H}s(V,"createProcessTelemetryContext");function Q(j,X,G){var k=X.config||{},xe=R(j,k,X,G),H=xe.ctx;function We(Re){var z=xe._next();return z&&z.unload(H,Re),!z}s(We,"_processNext");function Ct(Re,z){return Re===void 0&&(Re=null),(0,M.kJ)(Re)&&(Re=Ee(Re,k,X,z)),Q(Re||H.getNext(),X,z)}return s(Ct,"_createNew"),H.processNext=We,H.createNew=Ct,H}s(Q,"createProcessTelemetryUnloadContext");function re(j,X,G){var k=X.config||{},xe=R(j,k,X,G),H=xe.ctx;function We(Re){return H.iterate(function(z){(0,M.mf)(z.update)&&z.update(H,Re)})}s(We,"_processNext");function Ct(Re,z){return Re===void 0&&(Re=null),(0,M.kJ)(Re)&&(Re=Ee(Re,k,X,z)),re(Re||H.getNext(),X,z)}return s(Ct,"_createNew"),H.processNext=We,H.createNew=Ct,H}s(re,"createProcessTelemetryUpdateContext");function Ee(j,X,G,k){var xe=null,H=!k;if((0,M.kJ)(j)&&j.length>0){var We=null;(0,M.tO)(j,function(Ct){if(!H&&k===Ct&&(H=!0),H&&Ct&&(0,M.mf)(Ct.processTelemetry)){var Re=De(Ct,X,G);xe||(xe=Re),We&&We._setNext(Re),We=Re}})}return k&&!xe?Ee([k],X,G):xe}s(Ee,"createTelemetryProxyChain");function De(j,X,G){var k=null,xe=(0,M.mf)(j.processTelemetry),H=(0,M.mf)(j.setNextPlugin),We;j?We=j.identifier+"-"+j.priority+"-"+we++:We="Unknown-0-"+we++;var Ct={getPlugin:function(){return j},getNext:function(){return k},processTelemetry:qe,unload:I,update:$,_id:We,_setNext:function(L){k=L}};function Re(){var L;return j&&(0,M.mf)(j[Ve])&&(L=j[Ve]()),L||(L=V(Ct,X,G)),L}s(Re,"_getTelCtx");function z(L,ae,ut,Je,Qt){var Yt=!1,ne=j?j.identifier:W,be=L[Se];return be||(be=L[Se]={}),L.setNext(k),j&&(0,D.Lm)(L[pe.Gc](),function(){return ne+":"+ut},function(){be[We]=!0;try{var Ne=k?k._id:pe.SM;Ne&&(be[Ne]=!1),Yt=ae(L)}catch(rt){var Lt=k?be[k._id]:!0;Lt&&(Yt=!0),(!k||!Lt)&&(0,K.kP)(L.diagLog(),1,73,"Plugin ["+ne+"] failed during "+ut+" - "+(0,U.eU)(rt)+", run flags: "+(0,U.eU)(be))}},Je,Qt),Yt}s(z,"_processChain");function qe(L,ae){ae=ae||Re();function ut(Je){if(!j||!xe)return!1;var Qt=(0,oe.OY)(j);return Qt.teardown||Qt[pe.C0]?!1:(H&&j.setNextPlugin(k),j.processTelemetry(L,Je),!0)}s(ut,"_callProcessTelemetry"),z(ae,ut,"processTelemetry",function(){return{item:L}},!L.sync)||ae.processNext(L)}s(qe,"_processTelemetry");function I(L,ae){function ut(){var Je=!1;if(j){var Qt=(0,oe.OY)(j),Yt=j[pe.Gc]||Qt.core;j&&(!Yt||Yt===L[pe.Gc]())&&!Qt[pe.vE]&&(Qt[pe.Gc]=null,Qt[pe.vE]=!0,Qt[pe.Vr]=!1,j[pe.vE]&&j[pe.vE](L,ae)===!0&&(Je=!0))}return Je}s(ut,"_callTeardown"),z(L,ut,"unload",function(){},ae.isAsync)||L.processNext(ae)}s(I,"_unloadPlugin");function $(L,ae){function ut(){var Je=!1;if(j){var Qt=(0,oe.OY)(j),Yt=j[pe.Gc]||Qt.core;j&&(!Yt||Yt===L[pe.Gc]())&&!Qt[pe.vE]&&j[pe.Rw]&&j[pe.Rw](L,ae)===!0&&(Je=!0)}return Je}s(ut,"_callUpdate"),z(L,ut,"update",function(){},!1)||L.processNext(ae)}return s($,"_updatePlugin"),(0,M.FL)(Ct)}s(De,"createTelemetryPluginProxy");var Pe=function(){function j(X,G,k,xe){var H=this,We=V(X,G,k,xe);(0,M.Vb)(H,We,(0,M.FY)(We))}return s(j,"ProcessTelemetryContext"),j}()},878:(Ft,de,f)=>{"use strict";f.d(de,{az:()=>Ae,_l:()=>R,CN:()=>V,F6:()=>Q,pZ:()=>re});var K=f(630),M=f(708),D=f(41),U=4294967296,pe=4294967295,oe=!1,W=123456789,Se=987654321;function Ve(Ee){Ee<0&&(Ee>>>=0),W=123456789+Ee&pe,Se=987654321-Ee&pe,oe=!0}s(Ve,"_mwcSeed");function we(){try{var Ee=(0,M.m6)()&2147483647;Ve((Math.random()*U^Ee)+Ee)}catch(De){}}s(we,"_autoSeedMwc");function Ae(Ee){return Ee>0?Math.floor(R()/pe*(Ee+1))>>>0:0}s(Ae,"randomValue");function R(Ee){var De=0,Pe=(0,K.MX)()||(0,K.gz)();return Pe&&Pe.getRandomValues&&(De=Pe.getRandomValues(new Uint32Array(1))[0]&pe),De===0&&(0,K.w1)()&&(oe||we(),De=Q()&pe),De===0&&(De=Math.floor(U*Math.random()|0)),Ee||(De>>>=0),De}s(R,"random32");function V(Ee){Ee?Ve(Ee):we()}s(V,"mwcRandomSeed");function Q(Ee){Se=36969*(Se&65535)+(Se>>16)&pe,W=18e3*(W&65535)+(W>>16)&pe;var De=(Se<<16)+(W&65535)>>>0&pe|0;return Ee||(De>>>=0),De}s(Q,"mwcRandom32");function re(Ee){Ee===void 0&&(Ee=22);for(var De="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Pe=R()>>>0,j=0,X=D.SM;X.length<Ee;)j++,X+=De.charAt(Pe&63),Pe>>>=6,j===5&&(Pe=(R()<<2&4294967295|Pe&3)>>>0,j=0);return X}s(re,"newId")},833:(Ft,de,f)=>{"use strict";f.d(de,{OY:()=>W,bP:()=>Se,AA:()=>Ve,Yn:()=>Ae});var K=f(708),M=f(41),D=f(883),U=f(206),pe="_doUnload",oe=(0,D.K)("plugin");function W(R){return oe.get(R,"state",{},!0)}s(W,"_getPluginState");function Se(R,V){for(var Q=[],re=null,Ee=R.getNext(),De;Ee;){var Pe=Ee.getPlugin();if(Pe){re&&(0,K.mf)(re[M.El])&&(0,K.mf)(Pe[M.i9])&&re[M.El](Pe);var j=!1;(0,K.mf)(Pe[M.Vr])?j=Pe[M.Vr]():(De=W(Pe),j=De[M.Vr]),j||Q.push(Pe),re=Pe,Ee=Ee.getNext()}}(0,K.tO)(Q,function(X){var G=R.core();X.initialize(R.getCfg(),G,V,R.getNext()),De=W(X),!X[M.Gc]&&!De[M.Gc]&&(De[M.Gc]=G),De[M.Vr]=!0,delete De[M.vE]})}s(Se,"initializePlugins");function Ve(R){return R.sort(function(V,Q){var re=0;if(Q){var Ee=(0,K.mf)(Q[M.i9]);(0,K.mf)(V[M.i9])?re=Ee?V[M.Nz]-Q[M.Nz]:1:Ee&&(re=-1)}else re=V?1:-1;return re})}s(Ve,"sortPlugins");function we(R,V,Q,re){var Ee=0;function De(){for(;Ee<R.length;){var Pe=R[Ee++];if(Pe){var j=Pe[pe]||Pe[strDoTeardown];if(isFunction(j)&&j.call(Pe,V,Q,De)===!0)return!0}}}return s(De,"_doUnload"),De()}s(we,"unloadComponents");function Ae(R){var V={};return{getName:function(){return V.name},setName:function(Q){R&&R.setName(Q),V.name=Q},getTraceId:function(){return V.traceId},setTraceId:function(Q){R&&R.setTraceId(Q),(0,U.jN)(Q)&&(V.traceId=Q)},getSpanId:function(){return V.spanId},setSpanId:function(Q){R&&R.setSpanId(Q),(0,U.Lc)(Q)&&(V.spanId=Q)},getTraceFlags:function(){return V.traceFlags},setTraceFlags:function(Q){R&&R.setTraceFlags(Q),V.traceFlags=Q}}}s(Ae,"createDistributedTraceContext")},310:(Ft,de,f)=>{"use strict";f.d(de,{Y:()=>U});var K=f(18),M=f(630),D=f(708);function U(){var pe=[];function oe(Se){Se&&pe.push(Se)}s(oe,"_addHandler");function W(Se,Ve){(0,D.tO)(pe,function(we){try{we(Se,Ve)}catch(Ae){(0,K.kP)(Se.diagLog(),2,73,"Unexpected error calling unload handler - "+(0,M.eU)(Ae))}}),pe=[]}return s(W,"_runHandlers"),{add:oe,run:W}}s(U,"createUnloadHandlerContainer")},206:(Ft,de,f)=>{"use strict";f.d(de,{SU:()=>V,j_:()=>Q,jN:()=>re,Lc:()=>Ee,J6:()=>De,Pn:()=>Pe,aR:()=>j,lq:()=>X});var K=f(843),M=f(630),D=f(708),U=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]*)?$/,pe="00",oe="ff",W="00000000000000000000000000000000",Se="0000000000000000",Ve=1;function we(G,k,xe){return G&&G.length===k&&G!==xe?!!G.match(/^[\da-f]*$/):!1}s(we,"_isValid");function Ae(G,k,xe){return we(G,k)?G:xe}s(Ae,"_formatValue");function R(G){(isNaN(G)||G<0||G>255)&&(G=1);for(var k=G.toString(16);k.length<2;)k="0"+k;return k}s(R,"_formatFlags");function V(G,k,xe,H){return{version:we(H,2,oe)?H:pe,traceId:re(G)?G:(0,K.DO)(),spanId:Ee(k)?k:(0,K.DO)().substr(0,16),traceFlags:xe>=0&&xe<=255?xe:1}}s(V,"createTraceParent");function Q(G){if(!G||((0,D.kJ)(G)&&(G=G[0]||""),!G||!(0,D.HD)(G)||G.length>8192))return null;var k=U.exec((0,D.nd)(G));return!k||k[1]===oe||k[2]===W||k[3]===Se?null:{version:k[1],traceId:k[2],spanId:k[3],traceFlags:parseInt(k[4],16)}}s(Q,"parseTraceParent");function re(G){return we(G,32,W)}s(re,"isValidTraceId");function Ee(G){return we(G,16,Se)}s(Ee,"isValidSpanId");function De(G){return!(!G||!we(G.version,2,oe)||!we(G.traceId,32,W)||!we(G.spanId,16,Se)||!we(R(G.traceFlags),2))}s(De,"isValidTraceParent");function Pe(G){return De(G)?(G.traceFlags&Ve)===Ve:!1}s(Pe,"isSampledFlag");function j(G){if(G){var k=R(G.traceFlags);we(k,2)||(k="01");var xe=G.version||pe;return xe!=="00"&&xe!=="ff"&&(xe=pe),"".concat(xe,"-").concat(Ae(G.traceId,32,W),"-").concat(Ae(G.spanId,16,Se),"-").concat(k)}return""}s(j,"formatTraceParent");function X(){var G="traceparent",k=Q((0,M.ed)(G));return k||(k=Q((0,M.pI)(G))),k}s(X,"findW3cTraceParent")},392:(Ft,de,f)=>{"use strict";f.d(de,{cb:()=>K,fK:()=>M,jA:()=>D,hB:()=>U,bO:()=>pe,Pw:()=>W,V4:()=>Se,rl:()=>Ve,yu:()=>we,RJ:()=>Ae,CY:()=>R});var K="function",M="object",D="undefined",U="prototype",pe="hasOwnProperty",oe="default",W=Object,Se=W[U],Ve=W.assign,we=W.create,Ae=W.defineProperty,R=Se[pe]},91:(Ft,de,f)=>{"use strict";f.d(de,{Rd:()=>D,ZU:()=>U,pu:()=>pe});var K=f(392),M=null;function D(oe){return oe===void 0&&(oe=!0),(!M||!oe)&&(typeof globalThis!==K.jA&&globalThis&&(M=globalThis),typeof self!==K.jA&&self&&(M=self),typeof window!==K.jA&&window&&(M=window),typeof f.g!==K.jA&&f.g&&(M=f.g)),M}s(D,"getGlobal");function U(oe){throw new TypeError(oe)}s(U,"throwTypeError");function pe(oe){var W=K.yu;if(W)return W(oe);if(oe==null)return{};var Se=typeof oe;Se!==K.fK&&Se!==K.cb&&U("Object prototype may only be an Object:"+oe);function Ve(){}return s(Ve,"tmpFunc"),Ve[K.hB]=oe,new Ve}s(pe,"objCreateFn")},88:(Ft,de,f)=>{"use strict";f.d(de,{uc:()=>R,ne:()=>Q,$h:()=>H});var K=f(392),M=f(91),D=((0,M.Rd)()||{}).Symbol,U=((0,M.Rd)()||{}).Reflect,pe=!!D,oe=!!U,W="decorate",Se="metadata",Ve="getOwnPropertySymbols",we="iterator",Ae=s(function(z){for(var qe,I=1,$=arguments.length;I<$;I++){qe=arguments[I];for(var L in qe)K.V4[K.bO].call(qe,L)&&(z[L]=qe[L])}return z},"__objAssignFnImpl"),R=K.rl||Ae,V=s(function(z,qe){return V=K.Pw.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,$){I.__proto__=$}||function(I,$){for(var L in $)$[K.bO](L)&&(I[L]=$[L])},V(z,qe)},"extendStaticsFn");function Q(z,qe){typeof qe!==K.cb&&qe!==null&&(0,M.ZU)("Class extends value "+String(qe)+" is not a constructor or null"),V(z,qe);function I(){this.constructor=z}s(I,"__"),z[K.hB]=qe===null?(0,M.pu)(qe):(I[K.hB]=qe[K.hB],new I)}s(Q,"__extendsFn");function re(z,qe){var I={};for(var $ in z)ObjHasOwnProperty.call(z,$)&&qe.indexOf($)<0&&(I[$]=z[$]);if(z!=null&&typeof ObjClass[Ve]===strShimFunction)for(var L=0,ae=ObjClass[Ve](z);L<ae.length;L++)qe.indexOf(ae[L])<0&&ObjProto.propertyIsEnumerable.call(z,ae[L])&&(I[ae[L]]=z[ae[L]]);return I}s(re,"__restFn");function Ee(z,qe,I,$){var L=arguments.length,ae=L<3?qe:$===null?$=ObjClass.getOwnPropertyDescriptor(qe,I):$,ut;if(oe&&typeof U[W]===strShimFunction)ae=U[W](z,qe,I,$);else for(var Je=z.length-1;Je>=0;Je--)(ut=z[Je])&&(ae=(L<3?ut(ae):L>3?ut(qe,I,ae):ut(qe,I))||ae);return L>3&&ae&&ObjDefineProperty(qe,I,ae),ae}s(Ee,"__decorateFn");function De(z,qe){return function(I,$){qe(I,$,z)}}s(De,"__paramFn");function Pe(z,qe){if(oe&&U[Se]===strShimFunction)return U[Se](z,qe)}s(Pe,"__metadataFn");function j(z,qe){for(var I in z)I!==strDefault&&!ObjHasOwnProperty.call(qe,I)&&X(qe,z,I)}s(j,"__exportStarFn");function X(z,qe,I,$){$===void 0&&($=I),ObjCreate?ObjDefineProperty(z,$,{enumerable:!0,get:function(){return qe[I]}}):z[$]=qe[I]}s(X,"__createBindingFn");function G(z){var qe=typeof D===strShimFunction&&D[we],I=qe&&z[qe],$=0;if(I)return I.call(z);if(z&&typeof z.length=="number")return{next:function(){return z&&$>=z.length&&(z=void 0),{value:z&&z[$++],done:!z}}};throwTypeError(qe?"Object is not iterable.":"Symbol.iterator is not defined.")}s(G,"__valuesFn");function k(z,qe){var I=typeof D===strShimFunction&&z[D[we]];if(!I)return z;var $=I.call(z),L,ae=[],ut;try{for(;(qe===void 0||qe-- >0)&&!(L=$.next()).done;)ae.push(L.value)}catch(Je){ut={error:Je}}finally{try{L&&!L.done&&(I=$.return)&&I.call($)}finally{if(ut)throw ut.error}}return ae}s(k,"__readFn");function xe(){for(var z=arguments,qe=0,I=0,$=z.length;I<$;I++)qe+=z[I].length;for(var L=Array(qe),ae=0,I=0;I<$;I++)for(var ut=z[I],Je=0,Qt=ut.length;Je<Qt;Je++,ae++)L[ae]=ut[Je];return L}s(xe,"__spreadArraysFn");function H(z,qe){for(var I=0,$=qe.length,L=z.length;I<$;I++,L++)z[L]=qe[I];return z}s(H,"__spreadArrayFn");function We(z,qe){return ObjDefineProperty?ObjDefineProperty(z,"raw",{value:qe}):z.raw=qe,z}s(We,"__makeTemplateObjectFn");function Ct(z){if(z&&z.__esModule)return z;var qe={};if(z!=null)for(var I in z)I!==strDefault&&Object.prototype.hasOwnProperty.call(z,I)&&X(qe,z,I);return ObjCreate?ObjDefineProperty(qe,strDefault,{enumerable:!0,value:z}):qe[strDefault]=z,qe}s(Ct,"__importStarFn");function Re(z){return z&&z.__esModule?z:{strDefault:z}}s(Re,"__importDefaultFn")},679:(Ft,de,f)=>{"use strict";f.d(de,{Z:()=>Qt});/*!
 * Microsoft Dynamic Proto Utility, 1.1.6
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */var K="constructor",M="prototype",D="function",U="_dynInstFuncs",pe="_isDynProxy",oe="_dynClass",W="_dynCls$",Se="_dynInstChk",Ve=Se,we="_dfOpts",Ae="_unknown_",R="__proto__",V="_dyn"+R,Q="_dynInstProto",re="useBaseInst",Ee="setInstFuncs",De=Object,Pe=De.getPrototypeOf,j=De.getOwnPropertyNames,X=0;function G(ne,be){return ne&&De[M].hasOwnProperty.call(ne,be)}s(G,"_hasOwnProperty");function k(ne){return ne&&(ne===De[M]||ne===Array[M])}s(k,"_isObjectOrArrayPrototype");function xe(ne){return k(ne)||ne===Function[M]}s(xe,"_isObjectArrayOrFunctionPrototype");function H(ne){var be;if(ne){if(Pe)return Pe(ne);var Ne=ne[R]||ne[M]||(ne[K]?ne[K][M]:null);be=ne[V]||Ne,G(ne,V)||(delete ne[Q],be=ne[V]=ne[Q]||ne[V],ne[Q]=Ne)}return be}s(H,"_getObjProto");function We(ne,be){var Ne=[];if(j)Ne=j(ne);else for(var Lt in ne)typeof Lt=="string"&&G(ne,Lt)&&Ne.push(Lt);if(Ne&&Ne.length>0)for(var rt=0;rt<Ne.length;rt++)be(Ne[rt])}s(We,"_forEachProp");function Ct(ne,be,Ne){return be!==K&&typeof ne[be]===D&&(Ne||G(ne,be))}s(Ct,"_isDynamicCandidate");function Re(ne){throw new TypeError("DynamicProto: "+ne)}s(Re,"_throwTypeError");function z(ne){var be={};return We(ne,function(Ne){!be[Ne]&&Ct(ne,Ne,!1)&&(be[Ne]=ne[Ne])}),be}s(z,"_getInstanceFuncs");function qe(ne,be){for(var Ne=ne.length-1;Ne>=0;Ne--)if(ne[Ne]===be)return!0;return!1}s(qe,"_hasVisited");function I(ne,be,Ne,Lt){function rt(B,me,ye){var ct=me[ye];if(ct[pe]&&Lt){var at=B[U]||{};at[Ve]!==!1&&(ct=(at[me[oe]]||{})[ye]||ct)}return function(){return ct.apply(B,arguments)}}s(rt,"_instFuncProxy");var ee={};We(Ne,function(B){ee[B]=rt(be,Ne,B)});for(var _e=H(ne),Me=[];_e&&!xe(_e)&&!qe(Me,_e);)We(_e,function(B){!ee[B]&&Ct(_e,B,!Pe)&&(ee[B]=rt(be,_e,B))}),Me.push(_e),_e=H(_e);return ee}s(I,"_getBaseFuncs");function $(ne,be,Ne,Lt){var rt=null;if(ne&&G(Ne,oe)){var ee=ne[U]||{};if(rt=(ee[Ne[oe]]||{})[be],rt||Re("Missing ["+be+"] "+D),!rt[Se]&&ee[Ve]!==!1){for(var _e=!G(ne,be),Me=H(ne),B=[];_e&&Me&&!xe(Me)&&!qe(B,Me);){var me=Me[be];if(me){_e=me===Lt;break}B.push(Me),Me=H(Me)}try{_e&&(ne[be]=rt),rt[Se]=1}catch(ye){ee[Ve]=!1}}}return rt}s($,"_getInstFunc");function L(ne,be,Ne){var Lt=be[ne];return Lt===Ne&&(Lt=H(be)[ne]),typeof Lt!==D&&Re("["+ne+"] is not a "+D),Lt}s(L,"_getProtoFunc");function ae(ne,be,Ne,Lt,rt){function ee(B,me){var ye=s(function(){var ct=$(this,me,B,ye)||L(me,B,ye);return ct.apply(this,arguments)},"dynProtoProxy");return ye[pe]=1,ye}if(s(ee,"_createDynamicPrototype"),!k(ne)){var _e=Ne[U]=Ne[U]||{},Me=_e[be]=_e[be]||{};_e[Ve]!==!1&&(_e[Ve]=!!rt),We(Ne,function(B){Ct(Ne,B,!1)&&Ne[B]!==Lt[B]&&(Me[B]=Ne[B],delete Ne[B],(!G(ne,B)||ne[B]&&!ne[B][pe])&&(ne[B]=ee(ne,B)))})}}s(ae,"_populatePrototype");function ut(ne,be){if(Pe){for(var Ne=[],Lt=H(be);Lt&&!xe(Lt)&&!qe(Ne,Lt);){if(Lt===ne)return!0;Ne.push(Lt),Lt=H(Lt)}return!1}return!0}s(ut,"_checkPrototype");function Je(ne,be){return G(ne,M)?ne.name||be||Ae:((ne||{})[K]||{}).name||be||Ae}s(Je,"_getObjName");function Qt(ne,be,Ne,Lt){G(ne,M)||Re("theClass is an invalid class definition.");var rt=ne[M];ut(rt,be)||Re("["+Je(ne)+"] is not in class hierarchy of ["+Je(be)+"]");var ee=null;G(rt,oe)?ee=rt[oe]:(ee=W+Je(ne,"_")+"$"+X,X++,rt[oe]=ee);var _e=Qt[we],Me=!!_e[re];Me&&Lt&&Lt[re]!==void 0&&(Me=!!Lt[re]);var B=z(be),me=I(rt,be,B,Me);Ne(be,me);var ye=!!Pe&&!!_e[Ee];ye&&Lt&&(ye=!!Lt[Ee]),ae(rt,ee,be,B,ye!==!1)}s(Qt,"dynamicProto");var Yt={setInstFuncs:!0,useBaseInst:!0};Qt[we]=Yt},179:(Ft,de,f)=>{Ft=f.nmd(Ft);var K=200,M="__lodash_hash_undefined__",D=1,U=2,pe=9007199254740991,oe="[object Arguments]",W="[object Array]",Se="[object AsyncFunction]",Ve="[object Boolean]",we="[object Date]",Ae="[object Error]",R="[object Function]",V="[object GeneratorFunction]",Q="[object Map]",re="[object Number]",Ee="[object Null]",De="[object Object]",Pe="[object Promise]",j="[object Proxy]",X="[object RegExp]",G="[object Set]",k="[object String]",xe="[object Symbol]",H="[object Undefined]",We="[object WeakMap]",Ct="[object ArrayBuffer]",Re="[object DataView]",z="[object Float32Array]",qe="[object Float64Array]",I="[object Int8Array]",$="[object Int16Array]",L="[object Int32Array]",ae="[object Uint8Array]",ut="[object Uint8ClampedArray]",Je="[object Uint16Array]",Qt="[object Uint32Array]",Yt=/[\\^$.*+?()[\]{}|]/g,ne=/^\[object .+?Constructor\]$/,be=/^(?:0|[1-9]\d*)$/,Ne={};Ne[z]=Ne[qe]=Ne[I]=Ne[$]=Ne[L]=Ne[ae]=Ne[ut]=Ne[Je]=Ne[Qt]=!0,Ne[oe]=Ne[W]=Ne[Ct]=Ne[Ve]=Ne[Re]=Ne[we]=Ne[Ae]=Ne[R]=Ne[Q]=Ne[re]=Ne[De]=Ne[X]=Ne[G]=Ne[k]=Ne[We]=!1;var Lt=typeof f.g=="object"&&f.g&&f.g.Object===Object&&f.g,rt=typeof self=="object"&&self&&self.Object===Object&&self,ee=Lt||rt||Function("return this")(),_e=de&&!de.nodeType&&de,Me=_e&&!0&&Ft&&!Ft.nodeType&&Ft,B=Me&&Me.exports===_e,me=B&&Lt.process,ye=function(){try{return me&&me.binding&&me.binding("util")}catch(y){}}(),ct=ye&&ye.isTypedArray;function at(y,T){for(var S=-1,E=y==null?0:y.length,ge=0,ue=[];++S<E;){var gt=y[S];T(gt,S,y)&&(ue[ge++]=gt)}return ue}s(at,"arrayFilter");function Rt(y,T){for(var S=-1,E=T.length,ge=y.length;++S<E;)y[ge+S]=T[S];return y}s(Rt,"arrayPush");function mt(y,T){for(var S=-1,E=y==null?0:y.length;++S<E;)if(T(y[S],S,y))return!0;return!1}s(mt,"arraySome");function cn(y,T){for(var S=-1,E=Array(y);++S<y;)E[S]=T(S);return E}s(cn,"baseTimes");function mn(y){return function(T){return y(T)}}s(mn,"baseUnary");function Et(y,T){return y.has(T)}s(Et,"cacheHas");function Ht(y,T){return y==null?void 0:y[T]}s(Ht,"getValue");function Xt(y){var T=-1,S=Array(y.size);return y.forEach(function(E,ge){S[++T]=[ge,E]}),S}s(Xt,"mapToArray");function ce(y,T){return function(S){return y(T(S))}}s(ce,"overArg");function tr(y){var T=-1,S=Array(y.size);return y.forEach(function(E){S[++T]=E}),S}s(tr,"setToArray");var Xr=Array.prototype,cr=Function.prototype,Jr=Object.prototype,Yr=ee["__core-js_shared__"],vi=cr.toString,qn=Jr.hasOwnProperty,Wr=function(){var y=/[^.]+$/.exec(Yr&&Yr.keys&&Yr.keys.IE_PROTO||"");return y?"Symbol(src)_1."+y:""}(),Rr=Jr.toString,Gn=RegExp("^"+vi.call(qn).replace(Yt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$r=B?ee.Buffer:void 0,lr=ee.Symbol,Tn=ee.Uint8Array,lt=Jr.propertyIsEnumerable,ot=Xr.splice,ze=lr?lr.toStringTag:void 0,ve=Object.getOwnPropertySymbols,Ye=$r?$r.isBuffer:void 0,je=ce(Object.keys,Object),Ge=bn(ee,"DataView"),_t=bn(ee,"Map"),Nt=bn(ee,"Promise"),Ut=bn(ee,"Set"),Te=bn(ee,"WeakMap"),et=bn(Object,"create"),Oe=Fr(Ge),dt=Fr(_t),O=Fr(Nt),ln=Fr(Ut),_=Fr(Te),le=lr?lr.prototype:void 0,ke=le?le.valueOf:void 0;function Qe(y){var T=-1,S=y==null?0:y.length;for(this.clear();++T<S;){var E=y[T];this.set(E[0],E[1])}}s(Qe,"Hash");function yt(){this.__data__=et?et(null):{},this.size=0}s(yt,"hashClear");function J(y){var T=this.has(y)&&delete this.__data__[y];return this.size-=T?1:0,T}s(J,"hashDelete");function He(y){var T=this.__data__;if(et){var S=T[y];return S===M?void 0:S}return qn.call(T,y)?T[y]:void 0}s(He,"hashGet");function St(y){var T=this.__data__;return et?T[y]!==void 0:qn.call(T,y)}s(St,"hashHas");function Ue(y,T){var S=this.__data__;return this.size+=this.has(y)?0:1,S[y]=et&&T===void 0?M:T,this}s(Ue,"hashSet"),Qe.prototype.clear=yt,Qe.prototype.delete=J,Qe.prototype.get=He,Qe.prototype.has=St,Qe.prototype.set=Ue;function Ie(y){var T=-1,S=y==null?0:y.length;for(this.clear();++T<S;){var E=y[T];this.set(E[0],E[1])}}s(Ie,"ListCache");function Dt(){this.__data__=[],this.size=0}s(Dt,"listCacheClear");function xt(y){var T=this.__data__,S=Pn(T,y);if(S<0)return!1;var E=T.length-1;return S==E?T.pop():ot.call(T,S,1),--this.size,!0}s(xt,"listCacheDelete");function tt(y){var T=this.__data__,S=Pn(T,y);return S<0?void 0:T[S][1]}s(tt,"listCacheGet");function $t(y){return Pn(this.__data__,y)>-1}s($t,"listCacheHas");function qt(y,T){var S=this.__data__,E=Pn(S,y);return E<0?(++this.size,S.push([y,T])):S[E][1]=T,this}s(qt,"listCacheSet"),Ie.prototype.clear=Dt,Ie.prototype.delete=xt,Ie.prototype.get=tt,Ie.prototype.has=$t,Ie.prototype.set=qt;function nn(y){var T=-1,S=y==null?0:y.length;for(this.clear();++T<S;){var E=y[T];this.set(E[0],E[1])}}s(nn,"MapCache");function En(){this.size=0,this.__data__={hash:new Qe,map:new(_t||Ie),string:new Qe}}s(En,"mapCacheClear");function $n(y){var T=Sr(this,y).delete(y);return this.size-=T?1:0,T}s($n,"mapCacheDelete");function pn(y){return Sr(this,y).get(y)}s(pn,"mapCacheGet");function te(y){return Sr(this,y).has(y)}s(te,"mapCacheHas");function At(y,T){var S=Sr(this,y),E=S.size;return S.set(y,T),this.size+=S.size==E?0:1,this}s(At,"mapCacheSet"),nn.prototype.clear=En,nn.prototype.delete=$n,nn.prototype.get=pn,nn.prototype.has=te,nn.prototype.set=At;function bt(y){var T=-1,S=y==null?0:y.length;for(this.__data__=new nn;++T<S;)this.add(y[T])}s(bt,"SetCache");function it(y){return this.__data__.set(y,M),this}s(it,"setCacheAdd");function zt(y){return this.__data__.has(y)}s(zt,"setCacheHas"),bt.prototype.add=bt.prototype.push=it,bt.prototype.has=zt;function Kt(y){var T=this.__data__=new Ie(y);this.size=T.size}s(Kt,"Stack");function jt(){this.__data__=new Ie,this.size=0}s(jt,"stackClear");function dn(y){var T=this.__data__,S=T.delete(y);return this.size=T.size,S}s(dn,"stackDelete");function Bt(y){return this.__data__.get(y)}s(Bt,"stackGet");function rn(y){return this.__data__.has(y)}s(rn,"stackHas");function yn(y,T){var S=this.__data__;if(S instanceof Ie){var E=S.__data__;if(!_t||E.length<K-1)return E.push([y,T]),this.size=++S.size,this;S=this.__data__=new nn(E)}return S.set(y,T),this.size=S.size,this}s(yn,"stackSet"),Kt.prototype.clear=jt,Kt.prototype.delete=dn,Kt.prototype.get=Bt,Kt.prototype.has=rn,Kt.prototype.set=yn;function Nn(y,T){var S=zr(y),E=!S&&ei(y),ge=!S&&!E&&pr(y),ue=!S&&!E&&!ge&&ht(y),gt=S||E||ge||ue,Be=gt?cn(y.length,String):[],on=Be.length;for(var un in y)(T||qn.call(y,un))&&!(gt&&(un=="length"||ge&&(un=="offset"||un=="parent")||ue&&(un=="buffer"||un=="byteLength"||un=="byteOffset")||ur(un,on)))&&Be.push(un);return Be}s(Nn,"arrayLikeKeys");function Pn(y,T){for(var S=y.length;S--;)if(si(y[S][0],T))return S;return-1}s(Pn,"assocIndexOf");function Zt(y,T,S){var E=T(y);return zr(y)?E:Rt(E,S(y))}s(Zt,"baseGetAllKeys");function Bn(y){return y==null?y===void 0?H:Ee:ze&&ze in Object(y)?kr(y):Ai(y)}s(Bn,"baseGetTag");function In(y){return Ke(y)&&Bn(y)==oe}s(In,"baseIsArguments");function Xn(y,T,S,E,ge){return y===T?!0:y==null||T==null||!Ke(y)&&!Ke(T)?y!==y&&T!==T:On(y,T,S,E,Xn,ge)}s(Xn,"baseIsEqual");function On(y,T,S,E,ge,ue){var gt=zr(y),Be=zr(T),on=gt?W:Qn(y),un=Be?W:Qn(T);on=on==oe?De:on,un=un==oe?De:un;var Fn=on==De,fn=un==De,Zn=on==un;if(Zn&&pr(y)){if(!pr(T))return!1;gt=!0,Fn=!1}if(Zn&&!Fn)return ue||(ue=new Kt),gt||ht(y)?nr(y,T,S,E,ge,ue):Ar(y,T,on,S,E,ge,ue);if(!(S&D)){var Rn=Fn&&qn.call(y,"__wrapped__"),br=fn&&qn.call(T,"__wrapped__");if(Rn||br){var vr=Rn?y.value():y,Vr=br?T.value():T;return ue||(ue=new Kt),ge(vr,Vr,S,E,ue)}}return Zn?(ue||(ue=new Kt),yi(y,T,S,E,ge,ue)):!1}s(On,"baseIsEqualDeep");function Gt(y){if(!Le(y)||wi(y))return!1;var T=N(y)?Gn:ne;return T.test(Fr(y))}s(Gt,"baseIsNative");function Jn(y){return Ke(y)&&Fe(y.length)&&!!Ne[Bn(y)]}s(Jn,"baseIsTypedArray");function mi(y){if(!Zr(y))return je(y);var T=[];for(var S in Object(y))qn.call(y,S)&&S!="constructor"&&T.push(S);return T}s(mi,"baseKeys");function nr(y,T,S,E,ge,ue){var gt=S&D,Be=y.length,on=T.length;if(Be!=on&&!(gt&&on>Be))return!1;var un=ue.get(y);if(un&&ue.get(T))return un==T;var Fn=-1,fn=!0,Zn=S&U?new bt:void 0;for(ue.set(y,T),ue.set(T,y);++Fn<Be;){var Rn=y[Fn],br=T[Fn];if(E)var vr=gt?E(br,Rn,Fn,T,y,ue):E(Rn,br,Fn,y,T,ue);if(vr!==void 0){if(vr)continue;fn=!1;break}if(Zn){if(!mt(T,function(Vr,en){if(!Et(Zn,en)&&(Rn===Vr||ge(Rn,Vr,S,E,ue)))return Zn.push(en)})){fn=!1;break}}else if(!(Rn===br||ge(Rn,br,S,E,ue))){fn=!1;break}}return ue.delete(y),ue.delete(T),fn}s(nr,"equalArrays");function Ar(y,T,S,E,ge,ue,gt){switch(S){case Re:if(y.byteLength!=T.byteLength||y.byteOffset!=T.byteOffset)return!1;y=y.buffer,T=T.buffer;case Ct:return!(y.byteLength!=T.byteLength||!ue(new Tn(y),new Tn(T)));case Ve:case we:case re:return si(+y,+T);case Ae:return y.name==T.name&&y.message==T.message;case X:case k:return y==T+"";case Q:var Be=Xt;case G:var on=E&D;if(Be||(Be=tr),y.size!=T.size&&!on)return!1;var un=gt.get(y);if(un)return un==T;E|=U,gt.set(y,T);var Fn=nr(Be(y),Be(T),E,ge,ue,gt);return gt.delete(y),Fn;case xe:if(ke)return ke.call(y)==ke.call(T)}return!1}s(Ar,"equalByTag");function yi(y,T,S,E,ge,ue){var gt=S&D,Be=xn(y),on=Be.length,un=xn(T),Fn=un.length;if(on!=Fn&&!gt)return!1;for(var fn=on;fn--;){var Zn=Be[fn];if(!(gt?Zn in T:qn.call(T,Zn)))return!1}var Rn=ue.get(y);if(Rn&&ue.get(T))return Rn==T;var br=!0;ue.set(y,T),ue.set(T,y);for(var vr=gt;++fn<on;){Zn=Be[fn];var Vr=y[Zn],en=T[Zn];if(E)var Ko=gt?E(en,Vr,Zn,T,y,ue):E(Vr,en,Zn,y,T,ue);if(!(Ko===void 0?Vr===en||ge(Vr,en,S,E,ue):Ko)){br=!1;break}vr||(vr=Zn=="constructor")}if(br&&!vr){var uo=y.constructor,ni=T.constructor;uo!=ni&&"constructor"in y&&"constructor"in T&&!(typeof uo=="function"&&uo instanceof uo&&typeof ni=="function"&&ni instanceof ni)&&(br=!1)}return ue.delete(y),ue.delete(T),br}s(yi,"equalObjects");function xn(y){return Zt(y,he,Mr)}s(xn,"getAllKeys");function Sr(y,T){var S=y.__data__;return Ri(T)?S[typeof T=="string"?"string":"hash"]:S.map}s(Sr,"getMapData");function bn(y,T){var S=Ht(y,T);return Gt(S)?S:void 0}s(bn,"getNative");function kr(y){var T=qn.call(y,ze),S=y[ze];try{y[ze]=void 0;var E=!0}catch(ue){}var ge=Rr.call(y);return E&&(T?y[ze]=S:delete y[ze]),ge}s(kr,"getRawTag");var Mr=ve?function(y){return y==null?[]:(y=Object(y),at(ve(y),function(T){return lt.call(y,T)}))}:Y,Qn=Bn;(Ge&&Qn(new Ge(new ArrayBuffer(1)))!=Re||_t&&Qn(new _t)!=Q||Nt&&Qn(Nt.resolve())!=Pe||Ut&&Qn(new Ut)!=G||Te&&Qn(new Te)!=We)&&(Qn=s(function(y){var T=Bn(y),S=T==De?y.constructor:void 0,E=S?Fr(S):"";if(E)switch(E){case Oe:return Re;case dt:return Q;case O:return Pe;case ln:return G;case _:return We}return T},"getTag"));function ur(y,T){return T=T==null?pe:T,!!T&&(typeof y=="number"||be.test(y))&&y>-1&&y%1==0&&y<T}s(ur,"isIndex");function Ri(y){var T=typeof y;return T=="string"||T=="number"||T=="symbol"||T=="boolean"?y!=="__proto__":y===null}s(Ri,"isKeyable");function wi(y){return!!Wr&&Wr in y}s(wi,"isMasked");function Zr(y){var T=y&&y.constructor,S=typeof T=="function"&&T.prototype||Jr;return y===S}s(Zr,"isPrototype");function Ai(y){return Rr.call(y)}s(Ai,"objectToString");function Fr(y){if(y!=null){try{return vi.call(y)}catch(T){}try{return y+""}catch(T){}}return""}s(Fr,"toSource");function si(y,T){return y===T||y!==y&&T!==T}s(si,"eq");var ei=In(function(){return arguments}())?In:function(y){return Ke(y)&&qn.call(y,"callee")&&!lt.call(y,"callee")},zr=Array.isArray;function ti(y){return y!=null&&Fe(y.length)&&!N(y)}s(ti,"isArrayLike");var pr=Ye||sn;function ci(y,T){return Xn(y,T)}s(ci,"isEqual");function N(y){if(!Le(y))return!1;var T=Bn(y);return T==R||T==V||T==Se||T==j}s(N,"isFunction");function Fe(y){return typeof y=="number"&&y>-1&&y%1==0&&y<=pe}s(Fe,"isLength");function Le(y){var T=typeof y;return y!=null&&(T=="object"||T=="function")}s(Le,"isObject");function Ke(y){return y!=null&&typeof y=="object"}s(Ke,"isObjectLike");var ht=ct?mn(ct):Jn;function he(y){return ti(y)?Nn(y):mi(y)}s(he,"keys");function Y(){return[]}s(Y,"stubArray");function sn(){return!1}s(sn,"stubFalse"),Ft.exports=ci},724:()=>{},189:function(Ft,de,f){"use strict";var K=this&&this.__spreadArray||function(W,Se,Ve){if(Ve||arguments.length===2)for(var we=0,Ae=Se.length,R;we<Ae;we++)(R||!(we in Se))&&(R||(R=Array.prototype.slice.call(Se,0,we)),R[we]=Se[we]);return W.concat(R||Array.prototype.slice.call(Se))};Object.defineProperty(de,"__esModule",{value:!0}),de.config=de.loadMessageBundle=de.BundleFormat=de.MessageFormat=void 0;var M=f(926),D=f(800),U=f(800);Object.defineProperty(de,"MessageFormat",{enumerable:!0,get:function(){return U.MessageFormat}}),Object.defineProperty(de,"BundleFormat",{enumerable:!0,get:function(){return U.BundleFormat}});function pe(W){return function(Se,Ve){for(var we=[],Ae=2;Ae<arguments.length;Ae++)we[Ae-2]=arguments[Ae];if(typeof Se=="number")throw new Error("Browser implementation does currently not support externalized strings.");return D.localize.apply(void 0,K([Se,Ve],we,!1))}}s(pe,"loadMessageBundle"),de.loadMessageBundle=pe;function oe(W){var Se;return(0,D.setPseudo)(((Se=W==null?void 0:W.locale)===null||Se===void 0?void 0:Se.toLowerCase())==="pseudo"),pe}s(oe,"config"),de.config=oe,M.default.install(Object.freeze({loadMessageBundle:pe,config:oe}))},800:(Ft,de,f)=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0}),de.config=de.loadMessageBundle=de.localize=de.format=de.setPseudo=de.isPseudo=de.isDefined=de.BundleFormat=de.MessageFormat=void 0;var K=f(926),M;(function(Ae){Ae.file="file",Ae.bundle="bundle",Ae.both="both"})(M=de.MessageFormat||(de.MessageFormat={}));var D;(function(Ae){Ae.standalone="standalone",Ae.languagePack="languagePack"})(D=de.BundleFormat||(de.BundleFormat={}));var U;(function(Ae){function R(V){var Q=V;return Q&&pe(Q.key)&&pe(Q.comment)}s(R,"is"),Ae.is=R})(U||(U={}));function pe(Ae){return typeof Ae!="undefined"}s(pe,"isDefined"),de.isDefined=pe,de.isPseudo=!1;function oe(Ae){de.isPseudo=Ae}s(oe,"setPseudo"),de.setPseudo=oe;function W(Ae,R){var V;return de.isPseudo&&(Ae="\uFF3B"+Ae.replace(/[aouei]/g,"$&$&")+"\uFF3D"),R.length===0?V=Ae:V=Ae.replace(/\{(\d+)\}/g,function(Q,re){var Ee=re[0],De=R[Ee],Pe=Q;return typeof De=="string"?Pe=De:(typeof De=="number"||typeof De=="boolean"||De===void 0||De===null)&&(Pe=String(De)),Pe}),V}s(W,"format"),de.format=W;function Se(Ae,R){for(var V=[],Q=2;Q<arguments.length;Q++)V[Q-2]=arguments[Q];return W(R,V)}s(Se,"localize"),de.localize=Se;function Ve(Ae){return(0,K.default)().loadMessageBundle(Ae)}s(Ve,"loadMessageBundle"),de.loadMessageBundle=Ve;function we(Ae){return(0,K.default)().config(Ae)}s(we,"config"),de.config=we},926:(Ft,de)=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});var f;function K(){if(f===void 0)throw new Error("No runtime abstraction layer installed");return f}s(K,"RAL"),function(M){function D(U){if(U===void 0)throw new Error("No runtime abstraction layer provided");f=U}s(D,"install"),M.install=D}(K||(K={})),de.default=K}},gs={};function jn(Ft){var de=gs[Ft];if(de!==void 0)return de.exports;var f=gs[Ft]={id:Ft,loaded:!1,exports:{}};return Ac[Ft].call(f.exports,f,f.exports,jn),f.loaded=!0,f.exports}s(jn,"__webpack_require__"),(()=>{jn.n=Ft=>{var de=Ft&&Ft.__esModule?()=>Ft.default:()=>Ft;return jn.d(de,{a:de}),de}})(),(()=>{jn.d=(Ft,de)=>{for(var f in de)jn.o(de,f)&&!jn.o(Ft,f)&&Object.defineProperty(Ft,f,{enumerable:!0,get:de[f]})}})(),(()=>{jn.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(Ft){if(typeof window=="object")return window}}()})(),(()=>{jn.o=(Ft,de)=>Object.prototype.hasOwnProperty.call(Ft,de)})(),(()=>{jn.r=Ft=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(Ft,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Ft,"__esModule",{value:!0})}})(),(()=>{jn.nmd=Ft=>(Ft.paths=[],Ft.children||(Ft.children=[]),Ft)})();var kc={};(()=>{"use strict";jn.r(kc),jn.d(kc,{StateKeys:()=>qo,activate:()=>sy,ensureProvidersRegistered:()=>Tr,getOpenActionsService:()=>Tc,getState:()=>_p,isPreRelease:()=>ay,updateState:()=>Qu});var Ft={};jn.r(Ft),jn.d(Ft,{max:()=>N0,min:()=>L0});var de=jn(189);de.config({messageFormat:de.MessageFormat.bundle,bundleFormat:de.BundleFormat.standalone});const f=require("vscode"),K=new TextDecoder,M=new TextEncoder,D=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];function U(t){const e=M.encode(t),n=new Array(e.length);for(let r=0;r<e.length;++r)n[r]=D[e[r]];return n.join("")}s(U,"encodeUtf8Hex");function pe(t){const e=t.match(/(\w{2})/g);if(e===null)return"";const n=new Uint8Array(e.map(r=>parseInt(r,16)));return K.decode(n)}s(pe,"decodeUtf8Hex");const oe=/^[0-9a-f]{40}$/i;function W(t){return t!==void 0&&oe.test(t)}s(W,"isSha");const Se=/^[^/](?!.*\/\.)(?!.*\.\.)(?!.*\/\/)(?!.*@\{)[^\000-\037\177 ~^:?*[\\]+[^./]$/;function Ve(t){return Se.test(t)}s(Ve,"isValidBranchName");function we(t){return t===""||t==="~"||t==="HEAD"?t:t.endsWith("^")?`${t.substr(0,7)}^`:t.substr(0,7)}s(we,"shortenRef");const Ae=47;function R(t){if(t===void 0)return;const e=t.path.endsWith("/");return!e&&!t.fragment?t.toString():t.with({path:e?t.path.slice(0,-1):t.path,fragment:""}).toString()}s(R,"asKey");function V(t){if(t===void 0)return;const e=t.path.endsWith("/");return!e&&!t.query&&!t.fragment?t.toString():t.with({path:e?t.path.slice(0,-1):t.path,query:"",fragment:""}).toString()}s(V,"asFileKey");function Q(t,e){return`${(e==null?void 0:e.excludeScheme)?"":`${t.scheme}-`}${t.authority}${t.path.endsWith("/")?t.path.slice(0,-1):t.path}`}s(Q,"asFileStorageKey");function re(t){const e=t.path;let n=0,r=-1,i=!0;for(let o=e.length-1;o>=0;--o)if(e.charCodeAt(o)===Ae){if(!i){n=o+1;break}}else r===-1&&(i=!1,r=o+1);return r===-1?"":e.slice(n,r)}s(re,"basename");function Ee(t){const e=t.path;if(e.length===1)return"/";let n,r=-1,i=!0;for(let o=e.length-1;o>=1;--o)if(n=e.charCodeAt(o),n===Ae){if(!i){r=o;break}}else i=!1;return r===-1?"/":e.slice(0,r)}s(Ee,"dirname");function De(t){const e=t.path.lastIndexOf("/");return e===-1?t.with({path:"/"}):t.with({path:t.path.substring(0,e)})}s(De,"getParent");function Pe(t,e){const n=typeof e=="string"?e:e.path;return n.startsWith(t.path)?f.Uri.joinPath(t,n.substr(t.path.length)):f.Uri.joinPath(t,n)}s(Pe,"joinRelativePath");function j(t,e){return typeof e=="string"?(e.startsWith("/")||(e=`/${e}`),X(t,e)&&t.path.substr(e.length+(e.endsWith("/")?0:1)).split("/").length===1):X(t,e)&&t.path.substr(e.path.length+(e.path.endsWith("/")?0:1)).split("/").length===1}s(j,"isChild");function X(t,e){return typeof e=="string"?(e.startsWith("/")||(e=`/${e}`),e.length===1||t.path.startsWith(e.endsWith("/")?e:`${e}/`)):e.scheme===t.scheme&&e.authority===t.authority&&(e.path.length===1||t.path.startsWith(e.path.endsWith("/")?e.path:`${e.path}/`))}s(X,"isDescendent");function G(t){return t&&typeof t=="object"&&"scheme"in t}s(G,"isSerializedUri");var k;(function(t){t.authoritySeparator="+",t.scheme="vscode-vfs",t.baseVirtualWorkspaceUri=f.Uri.parse(`${t.scheme}://`);function e(u){const{authority:d}=u,h=d.indexOf(t.authoritySeparator);return h!==-1?d.substr(0,h):d}s(e,"getProviderId"),t.getProviderId=e;function n(u){return u.scheme!==t.scheme?u:u.with({scheme:e(u)})}s(n,"getProviderUri"),t.getProviderUri=n;function r(u,d){const h=new Map,g=f.workspace.textDocuments;if(g.length===0)return h;for(const p of g)p.uri.scheme===u&&d.some(C=>X(p.uri,C))&&h.set(R(p.uri),p.uri);return h}s(r,"getOpenUris"),t.getOpenUris=r;function i(u){return u.scheme===t.scheme?u:u.with({scheme:t.scheme})}s(i,"getVirtualUri"),t.getVirtualUri=i;function o(u,d){const[h,g]=u.authority.split(t.authoritySeparator);let p;if(g)try{const C=JSON.parse(pe(g));p=d?d(C):C}catch{}return{scheme:h,metadata:p}}s(o,"decodeAuthority"),t.decodeAuthority=o;function a(u,d){const h=d?`${t.authoritySeparator}${U(JSON.stringify(d))}`:"";return`${u}${h}`}s(a,"encodeAuthority"),t.encodeAuthority=a;function c(u){return u.authority.indexOf(t.authoritySeparator)===-1}s(c,"isCanonicalUri"),t.isCanonicalUri=c;function l(){var u,d;return(d=(u=f.workspace.workspaceFolders)==null?void 0:u.every(h=>h.uri.scheme===t.scheme))!=null?d:!1}s(l,"isVirtualWorkspace"),t.isVirtualWorkspace=l})(k||(k={}));var xe;(function(t){t[t.Admin=100]="Admin",t[t.Maintain=40]="Maintain",t[t.WriteToPullRequest=31]="WriteToPullRequest",t[t.Write=30]="Write",t[t.Triage=20]="Triage",t[t.Read=10]="Read",t[t.None=0]="None"})(xe||(xe={}));var H;(function(t){t[t.Branch=0]="Branch",t[t.RemoteBranch=1]="RemoteBranch",t[t.Tag=2]="Tag",t[t.Commit=3]="Commit"})(H||(H={}));var We;(function(t){function e(n){return n!==void 0&&n.type===z.Active}s(e,"isActive"),t.isActive=e})(We||(We={}));var Ct;(function(t){function e(n){const r=k.decodeAuthority(n).metadata;if(!(r===void 0||r.idx===void 0)){if(r.idx==="latest")return{type:Re.Latest};if(W(r.idx))return{type:Re.SHA,sha:r.idx}}}s(e,"decode"),t.decode=e})(Ct||(Ct={}));var Re;(function(t){t[t.Latest=1]="Latest",t[t.SHA=2]="SHA"})(Re||(Re={}));var z;(function(t){t[t.NotIndexed=0]="NotIndexed",t[t.Indexed=1]="Indexed",t[t.Match=2]="Match",t[t.Active=3]="Active"})(z||(z={})),function(t){function e(n){return n!==void 0&&(n===t.Indexed||n===t.Match||n===t.Active)}s(e,"hasIndex"),t.hasIndex=e}(z||(z={}));var qe;(function(t){t[t.Open=0]="Open",t[t.Closed=1]="Closed",t[t.Merged=2]="Merged"})(qe||(qe={}));var I;(function(t){t[t.Changed=1]="Changed",t[t.Created=2]="Created",t[t.Deleted=3]="Deleted"})(I||(I={}));var $;(function(t){t.CurrentWindow="currentWindow",t.NewWindow="newWindow",t.AddToWorkspace="addToWorkspace"})($||($={}));var L;(function(t){t[t.Branch=0]="Branch",t[t.Tag=1]="Tag",t[t.Commit=2]="Commit",t[t.PullRequest=3]="PullRequest",t[t.Tree=4]="Tree"})(L||(L={}));var ae;(function(t){t[t.Abort=0]="Abort",t[t.KeepCurrent=1]="KeepCurrent",t[t.DiscardCurrent=2]="DiscardCurrent",t[t.Merge=3]="Merge"})(ae||(ae={}));var ut;(function(t){t[t.Repository=0]="Repository",t[t.PullRequest=1]="PullRequest",t[t.Branch=2]="Branch",t[t.Commit=3]="Commit",t[t.File=4]="File",t[t.Tag=5]="Tag"})(ut||(ut={}));var Je;(function(t){t.Branch="branch",t.RemoteBranch="remoteBranch",t.PullRequestBranch="pullRequestBranch",t.PullRequestRemoteBranch="pullRequestRemoteBranch",t.Tag="tag",t.Commit="commit"})(Je||(Je={}));var Qt;(function(t){t.None="none",t.Latest="latest",t.Match="match",t.TipPlusLatest="tip+latest"})(Qt||(Qt={}));var Yt;(function(t){t.Browse="browse",t.Edit="edit"})(Yt||(Yt={}));var ne;(function(t){t.CommitFailedError="CommitFailedError",t.DetachedHEADError="DetachedHEADError",t.InvalidBranchNameError="InvalidBranchNameError",t.InvalidCredentialsError="InvalidCredentialsError",t.MergeConflictError="MergeConflictError",t.NothingToCommitError="NothingToCommitError",t.SyncConflictsError="SyncConflictsError",t.SyncOrFetchError="SyncOrFetchError",t.UnresolvedConflictsError="UnresolvedConflictsError",t.InvalidRepositoryError="InvalidRepositoryError",t.Unknown="Unknown"})(ne||(ne={}));class be extends Error{constructor(e,n,r){super(typeof e=="string"?e:e.message);this.messageOrError=e,this.errorCode=n,this.action=r}static CommitFailedError(){return new be("Failed to create and push commit",ne.CommitFailedError)}static DetachedHEADError(e){return new be(e,ne.DetachedHEADError)}static InvalidBranchNameError(e,n=!1){const r=n?`Branch '${e}' already exists`:`Invalid branch name '${e}'`;return new be(r,ne.InvalidBranchNameError)}static InvalidCredentialsError(e,n){return new be(e,ne.InvalidCredentialsError,n)}static MergeConflictError(e){return new be(e,ne.MergeConflictError)}static NothingToCommitError(e){return new be(e,ne.NothingToCommitError)}static SyncOrFetchError(e=!1){const n=e?"Unable to sync the repository":"Unable to fetch the repository";return new be(n,ne.SyncOrFetchError)}static SyncConflictsError(){const e="Sync operation will result in conflicts";return new be(e,ne.SyncConflictsError)}static UnresolvedConflictsError(){return new be("You have unresolved merge conflicts.",ne.UnresolvedConflictsError)}static InvalidRepositoryError(){return new be("The current repository is invalid",ne.InvalidRepositoryError)}static asVirtualProviderErrorCode(e){return e instanceof Error&&"messageOrError"in e&&"errorCode"in e?e.errorCode:ne.Unknown}}s(be,"VirtualProviderError");const Ne=6;var Lt;(function(t){t.Off="off",t.Auto="auto",t.Always="always"})(Lt||(Lt={}));var rt;(function(t){t.None="none",t.Latest="latest",t.Match="match",t.TipPlusLatest="tip+latest"})(rt||(rt={})),function(t){function e(n){return n===t.None||n===t.Latest||n===t.Match||n===t.TipPlusLatest?n:t.None}s(e,"sanitize"),t.sanitize=e}(rt||(rt={}));var ee;(function(t){t.Browse="browse",t.Edit="edit"})(ee||(ee={})),function(t){function e(r){return r===t.Browse||r===t.Edit?r:t.Edit}s(e,"sanitize"),t.sanitize=e;function n(r){return r===t.Browse?t.Edit:t.Browse}s(n,"toggle"),t.toggle=n}(ee||(ee={}));var _e;(function(t){function e(n,r){return n.display===r.display&&n.index===r.index}s(e,"equals"),t.equals=e})(_e||(_e={}));var Me;(function(t){const e=new Map([[Je.Branch,rt.None],[Je.RemoteBranch,rt.None],[Je.PullRequestBranch,rt.Match],[Je.PullRequestRemoteBranch,rt.Match],[Je.Commit,rt.Match],[Je.Tag,rt.Match]]),n=new Map([[Je.Branch,ee.Edit],[Je.RemoteBranch,ee.Edit],[Je.PullRequestBranch,ee.Browse],[Je.PullRequestRemoteBranch,ee.Browse],[Je.Commit,ee.Browse],[Je.Tag,ee.Browse]]);function r(o){var a,c;return{display:(a=n.get(o))!=null?a:ee.Edit,index:(c=e.get(o))!=null?c:rt.None}}s(r,"getDefault"),t.getDefault=r;function i(o){switch(o){case Je.Branch:case Je.RemoteBranch:return{display:ee.Browse,index:rt.Latest};case Je.PullRequestBranch:case Je.PullRequestRemoteBranch:return{display:ee.Browse,index:rt.Match};case Je.Commit:case Je.Tag:return{display:ee.Browse,index:rt.Match};default:return{display:ee.Edit,index:rt.None}}}s(i,"getIndexDefault"),t.getIndexDefault=i})(Me||(Me={}));const B=null;var me=jn(179),ye=jn.n(me);const ct="modes",at="indexMemento";class Rt{constructor(){this._onDidChange=new f.EventEmitter,this._onDidChangeAny=new f.EventEmitter,this.memoryState=new Map}static configure(e,n){mt.configPrefix=e,mt.state=n.workspaceState,n.subscriptions.push(f.workspace.onDidChangeConfiguration(mt.onConfigurationChanged,mt))}get onDidChange(){return this._onDidChange.event}get onDidChangeAny(){return this._onDidChangeAny.event}onConfigurationChanged(e){if(!e.affectsConfiguration(this.configPrefix)){this._onDidChangeAny.fire(e);return}this._onDidChangeAny.fire(e),this._onDidChange.fire(e)}set state(e){if(this._state=e,this.modes=this._state.get(ct),this.modes===void 0&&(this.modes=Object.create(null)),this.memoryState.size!==0){for(const n of this.memoryState.entries())this.modes[n[0]]=n[1];this._state.update(ct,this.modes).then(()=>{this.memoryState.clear()},void 0)}this.indexMemento=this._state.get(at),this.indexMemento===void 0&&(this.indexMemento=Object.create(null))}get(e,n,r){return r===void 0?f.workspace.getConfiguration(e===void 0?void 0:this.configPrefix,n).get(e===void 0?this.configPrefix:e):f.workspace.getConfiguration(e===void 0?void 0:this.configPrefix,n).get(e===void 0?this.configPrefix:e,r)}getMode(e,n,r){var i;const o=e.toString();let a=this.modes!==void 0?this.modes[o]:void 0;if(a!==void 0)return{display:ee.sanitize(a.display),index:rt.sanitize(a.index)};if(a=this.memoryState.get(o),a!==void 0)return a;if(n===Je.Branch||n===Je.RemoteBranch)switch((i=f.workspace.getConfiguration("remoteHub.richNavigation.indexMode",e))==null?void 0:i.get("branch")){case"none":return{display:ee.Edit,index:rt.None};case"latest":return{display:ee.Browse,index:rt.Latest};case"tipPlusLatest":return{display:ee.Edit,index:rt.TipPlusLatest}}if(!r)return Me.getDefault(n)}setMode(e,n){const r=e.toString();return this._state===void 0||this.modes===void 0?(this.memoryState.set(r,n),Promise.resolve()):(this.modes[r]=n,this._state.update(ct,this.modes))}getIndexMemento(e){if(this.indexMemento!==void 0)return this.indexMemento[e.toString()]}setIndexMemento(e,n){return this.indexMemento===void 0||this._state===void 0?Promise.resolve():(this.indexMemento[e.toString()]=n,this._state.update(at,this.indexMemento))}getAny(e,n,r){return r===void 0?f.workspace.getConfiguration(void 0,n).get(e):f.workspace.getConfiguration(void 0,n).get(e,r)}changed(e,n,r){var i;return(i=e==null?void 0:e.affectsConfiguration(`${this.configPrefix}.${n}`,r))!=null?i:!0}inspect(e,n){return f.workspace.getConfiguration(e===void 0?void 0:this.configPrefix,n).inspect(e===void 0?this.configPrefix:e)}inspectAny(e,n){return f.workspace.getConfiguration(void 0,n).inspect(e)}async migrate(e,n,r){const i=mt.inspect(e);if(i===void 0)return!1;let o=!1;return i.globalValue!==void 0&&(await this.update(n,r.migrationFn!=null?r.migrationFn(i.globalValue):i.globalValue,f.ConfigurationTarget.Global),o=!0),i.workspaceValue!==void 0&&(await this.update(n,r.migrationFn!=null?r.migrationFn(i.workspaceValue):i.workspaceValue,f.ConfigurationTarget.Workspace),o=!0),i.workspaceFolderValue!==void 0&&(await this.update(n,r.migrationFn!=null?r.migrationFn(i.workspaceFolderValue):i.workspaceFolderValue,f.ConfigurationTarget.WorkspaceFolder),o=!0),!o&&r.fallbackValue!==void 0&&(await this.update(n,r.fallbackValue,f.ConfigurationTarget.Global),o=!0),o}async migrateIfMissing(e,n,r){const i=mt.inspect(e);if(i===void 0)return;const o=mt.inspect(n);i.globalValue!==void 0&&(o===void 0||o.globalValue===void 0)&&await this.update(n,r.migrationFn!=null?r.migrationFn(i.globalValue):i.globalValue,f.ConfigurationTarget.Global),i.workspaceValue!==void 0&&(o===void 0||o.workspaceValue===void 0)&&await this.update(n,r.migrationFn!=null?r.migrationFn(i.workspaceValue):i.workspaceValue,f.ConfigurationTarget.Workspace),i.workspaceFolderValue!==void 0&&(o===void 0||o.workspaceFolderValue===void 0)&&await this.update(n,r.migrationFn!=null?r.migrationFn(i.workspaceFolderValue):i.workspaceFolderValue,f.ConfigurationTarget.WorkspaceFolder)}name(e){return e}update(e,n,r){return f.workspace.getConfiguration(this.configPrefix).update(e,n,r)}updateAny(e,n,r,i){return f.workspace.getConfiguration(void 0,r===f.ConfigurationTarget.Global?void 0:i).update(e,n,r)}updateEffective(e,n){const r=mt.inspect(e);return r.workspaceFolderValue!==void 0?n===r.workspaceFolderValue?Promise.resolve(void 0):mt.update(e,n,f.ConfigurationTarget.WorkspaceFolder):r.workspaceValue!==void 0?n===r.workspaceValue?Promise.resolve(void 0):mt.update(e,n,f.ConfigurationTarget.Workspace):r.globalValue===n||r.globalValue===void 0&&n===r.defaultValue?Promise.resolve(void 0):mt.update(e,ye()(n,r.defaultValue)?void 0:n,f.ConfigurationTarget.Global)}}s(Rt,"Configuration");const mt=new Rt,cn="";var mn;(function(t){t.Off="off",t.Error="error",t.Warn="warn",t.Info="info",t.Debug="debug"})(mn||(mn={}));var Et;(function(t){t[t.Off=0]="Off",t[t.Error=1]="Error",t[t.Warn=2]="Warn",t[t.Info=3]="Info",t[t.Debug=4]="Debug"})(Et||(Et={}));const Ht="[RemoteHub]",Xt=s(class{static configure(t,e,n){this._isDebugging=t.extensionMode===f.ExtensionMode.Development,this.outputChannelName=e,this.logLevel=n}static enabled(t){return this.level>=this.toOrderedLevel(t)}static get logLevel(){return this._logLevel}static set logLevel(t){var e,n;this._logLevel=t,this.level=this.toOrderedLevel(t),t===mn.Off?((e=this.output)==null||e.dispose(),this.output=void 0):this.output=(n=this.output)!=null?n:f.window.createOutputChannel(this.outputChannelName)}static toOrderedLevel(t){switch(t){case mn.Off:return 0;case mn.Error:return 1;case mn.Warn:return 2;case mn.Info:return 3;case mn.Debug:return 4}}static get isDebugging(){return this._isDebugging}static debug(t,...e){Xt.isDebugging&&console.log(this.timestamp,Ht,t!=null?t:cn,...e),!(this.output===void 0||this.level<4)&&this.output.appendLine(`${this.timestamp} ${t!=null?t:cn}${this.toLoggableParams(!0,e)}`)}static error(t,e,...n){if(!(this.level<1&&!Xt.isDebugging)){if(e===void 0){const r=t instanceof Error?t.stack:void 0;if(r){const i=/.*\s*?at\s(.+?)\s/.exec(r);i!==null&&(e=i[1])}}Xt.isDebugging&&console.error(this.timestamp,Ht,e!=null?e:cn,...n,t),!(this.output===void 0||this.level<1)&&this.output.appendLine(`${this.timestamp} ${e!=null?e:cn}${this.toLoggableParams(!1,n)}
${String(t)}`)}}static log(t,...e){Xt.isDebugging&&console.log(this.timestamp,Ht,t!=null?t:cn,...e),!(this.output===void 0||this.level<3)&&this.output.appendLine(`${this.timestamp} ${t!=null?t:cn}${this.toLoggableParams(!1,e)}`)}static warn(t,...e){Xt.isDebugging&&console.warn(this.timestamp,Ht,t!=null?t:cn,...e),!(this.output===void 0||this.level<2)&&this.output.appendLine(`${this.timestamp} ${t!=null?t:cn}${this.toLoggableParams(!1,e)}`)}static showOutputChannel(){var t;(t=this.output)==null||t.show()}static toLoggable(t,e){if(typeof t!="object")return String(t);if(t instanceof f.Uri)return`Uri(${t.toString(!0)})`;try{return JSON.stringify(t,e)}catch{return"<error>"}}static toLoggableName(t){var e,n,r;let i;if(typeof t=="function"){if(t.prototype===void 0||t.prototype.constructor===void 0)return t.name;i=(e=t.prototype.constructor.name)!=null?e:cn}else i=(r=(n=t.constructor)==null?void 0:n.name)!=null?r:cn;const o=i.indexOf("_");return o===-1?i:i.substr(o+1)}static get timestamp(){const t=new Date;return`[${t.toISOString().replace(/T/," ").replace(/\..+/,cn)}:${`00${t.getUTCMilliseconds()}`.slice(-3)}]`}static toLoggableParams(t,e){if(e.length===0||t&&this.level<4&&!Xt.isDebugging)return cn;const n=e.map(r=>this.toLoggable(r)).join(", ");return n.length!==0?` \u2014 ${n}`:cn}},"_Logger");let ce=Xt;ce.level=0,ce._logLevel=mn.Off;const tr=new TextDecoder,Xr=new TextEncoder;async function cr(t){const e=typeof t=="string"?Xr.encode(t):t;let n;if(globalThis.crypto.subtle)n=await globalThis.crypto.subtle.digest({name:"sha-1"},e);else{const r=new Wr;r.update(e),n=r.digest()}return globalThis.btoa(encodeURIComponent(tr.decode(n)))}s(cr,"sha1");var Jr;(function(t){t[t.BLOCK_SIZE=64]="BLOCK_SIZE"})(Jr||(Jr={}));function Yr(t,e,n=32){const r=n-e,i=~((1<<r)-1);return(t<<e|(i&t)>>>r)>>>0}s(Yr,"leftRotate");function vi(t,e=0,n=t.byteLength,r=0){for(let i=0;i<n;i++)t[e+i]=r}s(vi,"fill");const qn=s(class{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(64+3),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._finished=!1}update(t){const e=this._buff;let n=this._buffLen,r=0;const i=t.byteLength;for(;r<i;){const o=Math.min(64-n,i-r);for(let a=0;a<o;a++)e[n++]=t[r++];n>=64&&(this._step(),n-=64,this._totalLen+=64)}this._buffLen=n}digest(){this._finished||(this._finished=!0,this._totalLen+=this._buffLen,this._wrapUp());const t=new ArrayBuffer(20),e=new DataView(t);return e.setUint32(0,this._h0,!1),e.setUint32(4,this._h1,!1),e.setUint32(8,this._h2,!1),e.setUint32(12,this._h3,!1),e.setUint32(16,this._h4,!1),t}_wrapUp(){this._buff[this._buffLen++]=128,vi(this._buff,this._buffLen),this._buffLen>56&&(this._step(),vi(this._buff));const t=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(t/4294967296),!1),this._buffDV.setUint32(60,t%4294967296,!1),this._step()}_step(){const t=qn._bigBlock32,e=this._buffDV;for(let d=0;d<64;d+=4)t.setUint32(d,e.getUint32(d,!1),!1);for(let d=64;d<320;d+=4)t.setUint32(d,Yr(t.getUint32(d-12,!1)^t.getUint32(d-32,!1)^t.getUint32(d-56,!1)^t.getUint32(d-64,!1),1),!1);let n=this._h0,r=this._h1,i=this._h2,o=this._h3,a=this._h4,c,l,u;for(let d=0;d<80;d++)d<20?(c=r&i|~r&o,l=1518500249):d<40?(c=r^i^o,l=1859775393):d<60?(c=r&i|r&o|i&o,l=2400959708):(c=r^i^o,l=3395469782),u=Yr(n,5)+c+a+l+t.getUint32(d*4,!1)&4294967295,a=o,o=i,i=Yr(r,30),r=n,n=u;this._h0=this._h0+n&4294967295,this._h1=this._h1+r&4294967295,this._h2=this._h2+i&4294967295,this._h3=this._h3+o&4294967295,this._h4=this._h4+a&4294967295}},"_SHA1Computer");let Wr=qn;Wr._bigBlock32=new DataView(new ArrayBuffer(320));function Rr(t){const e=globalThis.atob(t),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.charCodeAt(i);return r}s(Rr,"fromBase64");const{fromCharCode:Gn}=String;function $r(t){let e;if(typeof t=="string")e=t;else{e="";for(let n=0,{length:r}=t;n<r;n++)e+=Gn(t[n])}return globalThis.btoa(e)}s($r,"toBase64");function lr(t,e){if(t===e)return-1;let n=0;for(;t[n]===e[n];)n++;return n}s(lr,"indexOfDifference");let Tn;var lt;(function(t){function e(n){const r=ze(n);return Tn=f.env.uiKind===f.UIKind.Web,ce.warn(`Running on the ${Tn?"web":"desktop"}${n.extensionRuntime!==f.ExtensionRuntime.Node?" in a webworker":""}; workspaceId=${r}; storageUri=${n.globalStorageUri.toString(!0)}`),r}s(e,"configure"),t.configure=e})(lt||(lt={}));const ot=/\/workspaceStorage\/(?<id>[^/]+)/i;function ze(t){var e;if(t.storageUri===void 0)return"";const n=ot.exec(t.storageUri.path);let r;if((e=n==null?void 0:n.groups)==null?void 0:e.id)r=n.groups.id;else{r=t.storageUri.path;const i=lr(t.globalStorageUri.path,r),o=`/${t.extension.id}`;r.endsWith(o)?r=r.slice(i,-o.length):r=r.substr(i)}return/-[0-9]$/.test(r)?r.slice(0,-2):r}s(ze,"getWorkspaceId");var ve;(function(t){t.HasVirtualFolders="remoteHub:hasVirtualFolders",t.VirtualFolderProviders="remoteHub:virtualFolderProviders",t.HasRecentRepositories="remoteHub:hasRecentRepositories",t.HasSearchIndexes="gitHub:hasSearchIndexes",t.EnabledSomeSearchIndexes="gitHub:enabledSomeSearchIndexes",t.EnabledAllSearchIndexes="gitHub:enabledAllSearchIndexes",t.HasPullRequestExtension="gitHub:hasPullRequestExtension"})(ve||(ve={}));const Ye=new Map;function je(t){return t==="isWeb"?Tn:t==="remoteName"?f.env.remoteName:t==="virtualWorkspace"?k.isVirtualWorkspace():t.startsWith("config.")?mt.getAny(t.substring(7)):Ye.get(t)}s(je,"getContext");function Ge(t){return t==="isWeb"||t==="remoteName"||t==="virtualWorkspace"||t.startsWith("config.")||t.startsWith("remoteHub:")||t.startsWith("continueOn:")}s(Ge,"isSupportedContextKey");async function _t(t,e){Ye.set(t,e),!t.startsWith("continueOn:")&&await f.commands.executeCommand("setContext",t,e)}s(_t,"setContext");var Nt=Object.defineProperty,Ut=Object.getOwnPropertySymbols,Te=Object.prototype.hasOwnProperty,et=Object.prototype.propertyIsEnumerable,Oe=s((t,e,n)=>e in t?Nt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,"ho"),dt=s((t,e)=>{for(var n in e||(e={}))Te.call(e,n)&&Oe(t,n,e[n]);if(Ut)for(var n of Ut(e))et.call(e,n)&&Oe(t,n,e[n]);return t},"at"),O=s((t,e)=>()=>(t&&(e=t(t=0)),e),"I"),ln=s((t,e)=>{for(var n in e)Nt(t,n,{get:e[n],enumerable:!0})},"Ec"),_=s((t,e,n)=>new Promise((r,i)=>{var o=s(l=>{try{c(n.next(l))}catch(u){i(u)}},"a"),a=s(l=>{try{c(n.throw(l))}catch(u){i(u)}},"o"),c=s(l=>l.done?r(l.value):Promise.resolve(l.value).then(o,a),"u");c((n=n.apply(t,e)).next())}),"At"),le,ke=O(()=>{le={Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5}}),Qe,yt,J,He,St,Ue,Ie,Dt,xt,tt,$t,qt=O(()=>{Qe="function",yt="object",J="undefined",He="prototype",St="hasOwnProperty",Ue=Object,Ie=Ue[He],Dt=Ue.assign,xt=Ue.create,tt=Ue.defineProperty,$t=Ie[St]});function nn(){return typeof globalThis!==J&&globalThis?globalThis:typeof self!==J&&self?self:typeof window!==J&&window?window:typeof jn.g!==J&&jn.g?jn.g:null}s(nn,"ot");function En(t){throw new TypeError(t)}s(En,"Tr");function $n(t){var e=xt;if(e)return e(t);if(t==null)return{};var n=typeof t;n!==yt&&n!==Qe&&En("Object prototype may only be an Object:"+t);function r(){}return s(r,"n"),r[He]=t,new r}s($n,"Dt");var pn=O(()=>{qt()});function te(t,e){typeof e!==Qe&&e!==null&&En("Class extends value "+String(e)+" is not a constructor or null"),Kt(t,e);function n(){this.constructor=t}s(n,"r"),t[He]=e===null?$n(e):(n[He]=e[He],new n)}s(te,"B");var At,bt,it,zt,Kt,jt=O(()=>{qt(),pn(),At=(nn()||{}).Symbol,bt=(nn()||{}).Reflect,it=s(function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Ie[St].call(e,i)&&(t[i]=e[i])}return t},"bc"),zt=Dt||it,Kt=s(function(t,e){return Kt=Ue.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r[St](i)&&(n[i]=r[i])},Kt(t,e)},"ki")}),dn=O(()=>{}),Bt=O(()=>{qt(),pn(),jt(),dn()});function rn(t,e){return t&&ci[bn].hasOwnProperty.call(t,e)}s(rn,"kt");function yn(t){return t&&(t===ci[bn]||t===Array[bn])}s(yn,"No");function Nn(t){return yn(t)||t===Function[bn]}s(Nn,"Ui");function Pn(t){var e;if(t){if(N)return N(t);var n=t[si]||t[bn]||(t[Sr]?t[Sr][bn]:null);e=t[ei]||n,rn(t,ei)||(delete t[zr],e=t[ei]=t[zr]||t[ei],t[zr]=n)}return e}s(Pn,"ir");function Zt(t,e){var n=[];if(Fe)n=Fe(t);else for(var r in t)typeof r=="string"&&rn(t,r)&&n.push(r);if(n&&n.length>0)for(var i=0;i<n.length;i++)e(n[i])}s(Zt,"jn");function Bn(t,e,n){return e!==Sr&&typeof t[e]===kr&&(n||rn(t,e))}s(Bn,"Oi");function In(t){throw new TypeError("DynamicProto: "+t)}s(In,"Gn");function Xn(t){var e={};return Zt(t,function(n){!e[n]&&Bn(t,n,!1)&&(e[n]=t[n])}),e}s(Xn,"Dc");function On(t,e){for(var n=t.length-1;n>=0;n--)if(t[n]===e)return!0;return!1}s(On,"Bi");function Gt(t,e,n,r){function i(l,u,d){var h=u[d];if(h[Qn]&&r){var g=l[Mr]||{};g[Zr]!==!1&&(h=(g[u[ur]]||{})[d]||h)}return function(){return h.apply(l,arguments)}}s(i,"i");var o={};Zt(n,function(l){o[l]=i(e,n,l)});for(var a=Pn(t),c=[];a&&!Nn(a)&&!On(c,a);)Zt(a,function(l){!o[l]&&Bn(a,l,!N)&&(o[l]=i(e,a,l))}),c.push(a),a=Pn(a);return o}s(Gt,"Nc");function Jn(t,e,n,r){var i=null;if(t&&rn(n,ur)){var o=t[Mr]||{};if(i=(o[n[ur]]||{})[e],i||In("Missing ["+e+"] "+kr),!i[wi]&&o[Zr]!==!1){for(var a=!rn(t,e),c=Pn(t),l=[];a&&c&&!Nn(c)&&!On(l,c);){var u=c[e];if(u){a=u===r;break}l.push(c),c=Pn(c)}try{a&&(t[e]=i),i[wi]=1}catch(d){o[Zr]=!1}}}return i}s(Jn,"kc");function mi(t,e,n){var r=e[t];return r===n&&(r=Pn(e)[t]),typeof r!==kr&&In("["+t+"] is not a "+kr),r}s(mi,"Fc");function nr(t,e,n,r,i){function o(l,u){var d=s(function(){var h=Jn(this,u,l,d)||mi(u,l,d);return h.apply(this,arguments)},"l");return d[Qn]=1,d}if(s(o,"a"),!yn(t)){var a=n[Mr]=n[Mr]||{},c=a[e]=a[e]||{};a[Zr]!==!1&&(a[Zr]=!!i),Zt(n,function(l){Bn(n,l,!1)&&n[l]!==r[l]&&(c[l]=n[l],delete n[l],(!rn(t,l)||t[l]&&!t[l][Qn])&&(t[l]=o(t,l)))})}}s(nr,"Rc");function Ar(t,e){if(N){for(var n=[],r=Pn(e);r&&!Nn(r)&&!On(n,r);){if(r===t)return!0;n.push(r),r=Pn(r)}return!1}return!0}s(Ar,"Mc");function yi(t,e){return rn(t,bn)?t.name||e||Fr:((t||{})[Sr]||{}).name||e||Fr}s(yi,"Mi");function xn(t,e,n,r){rn(t,bn)||In("theClass is an invalid class definition.");var i=t[bn];Ar(i,e)||In("["+yi(t)+"] is not in class hierarchy of ["+yi(e)+"]");var o=null;rn(i,ur)?o=i[ur]:(o=Ri+yi(t,"_")+"$"+Le,Le++,i[ur]=o);var a=xn[Ai],c=!!a[ti];c&&r&&r[ti]!==void 0&&(c=!!r[ti]);var l=Xn(e),u=Gt(i,e,l,c);n(e,u);var d=!!N&&!!a[pr];d&&r&&(d=!!r[pr]),nr(i,o,e,l,d!==!1)}s(xn,"W");var Sr,bn,kr,Mr,Qn,ur,Ri,wi,Zr,Ai,Fr,si,ei,zr,ti,pr,ci,N,Fe,Le,Ke,ht=O(()=>{Sr="constructor",bn="prototype",kr="function",Mr="_dynInstFuncs",Qn="_isDynProxy",ur="_dynClass",Ri="_dynCls$",wi="_dynInstChk",Zr=wi,Ai="_dfOpts",Fr="_unknown_",si="__proto__",ei="_dyn"+si,zr="_dynInstProto",ti="useBaseInst",pr="setInstFuncs",ci=Object,N=ci.getPrototypeOf,Fe=ci.getOwnPropertyNames,Le=0,Ke={setInstFuncs:!0,useBaseInst:!0},xn[Ai]=Ke}),he,Y,sn=O(()=>{(function(t){t[t.CRITICAL=1]="CRITICAL",t[t.WARNING=2]="WARNING"})(he||(he={})),Y={BrowserDoesNotSupportLocalStorage:0,BrowserCannotReadLocalStorage:1,BrowserCannotReadSessionStorage:2,BrowserCannotWriteLocalStorage:3,BrowserCannotWriteSessionStorage:4,BrowserFailedRemovalFromLocalStorage:5,BrowserFailedRemovalFromSessionStorage:6,CannotSendEmptyTelemetry:7,ClientPerformanceMathError:8,ErrorParsingAISessionCookie:9,ErrorPVCalc:10,ExceptionWhileLoggingError:11,FailedAddingTelemetryToBuffer:12,FailedMonitorAjaxAbort:13,FailedMonitorAjaxDur:14,FailedMonitorAjaxOpen:15,FailedMonitorAjaxRSC:16,FailedMonitorAjaxSend:17,FailedMonitorAjaxGetCorrelationHeader:18,FailedToAddHandlerForOnBeforeUnload:19,FailedToSendQueuedTelemetry:20,FailedToReportDataLoss:21,FlushFailed:22,MessageLimitPerPVExceeded:23,MissingRequiredFieldSpecification:24,NavigationTimingNotSupported:25,OnError:26,SessionRenewalDateIsZero:27,SenderNotInitialized:28,StartTrackEventFailed:29,StopTrackEventFailed:30,StartTrackFailed:31,StopTrackFailed:32,TelemetrySampledAndNotSent:33,TrackEventFailed:34,TrackExceptionFailed:35,TrackMetricFailed:36,TrackPVFailed:37,TrackPVFailedCalc:38,TrackTraceFailed:39,TransmissionFailed:40,FailedToSetStorageBuffer:41,FailedToRestoreStorageBuffer:42,InvalidBackendResponse:43,FailedToFixDepricatedValues:44,InvalidDurationValue:45,TelemetryEnvelopeInvalid:46,CreateEnvelopeError:47,CannotSerializeObject:48,CannotSerializeObjectNonSerializable:49,CircularReferenceDetected:50,ClearAuthContextFailed:51,ExceptionTruncated:52,IllegalCharsInName:53,ItemNotInArray:54,MaxAjaxPerPVExceeded:55,MessageTruncated:56,NameTooLong:57,SampleRateOutOfRange:58,SetAuthContextFailed:59,SetAuthContextFailedAccountName:60,StringValueTooLong:61,StartCalledMoreThanOnce:62,StopCalledWithoutStart:63,TelemetryInitializerFailed:64,TrackArgumentsNotSpecified:65,UrlTooLong:66,SessionStorageBufferFull:67,CannotAccessCookie:68,IdTooLong:69,InvalidEvent:70,FailedMonitorAjaxSetRequestHeader:71,SendBrowserInfoOnUserInit:72,PluginException:73,NotificationException:74,SnippetScriptLoadFailure:99,InvalidInstrumentationKey:100,CannotParseAiBlobValue:101,InvalidContentBlob:102,TrackPageActionEventFailed:103}});function y(t){return Ie.toString.call(t)}s(y,"Hi");function T(t,e){return typeof t===e}s(T,"Vi");function S(t){return t===void 0||typeof t===J}s(S,"fe");function E(t){return t===null||S(t)}s(E,"x");function ge(t){return!E(t)}s(ge,"qi");function ue(t,e){return t&&$t.call(t,e)}s(ue,"wr");function gt(t){return typeof t===yt}s(gt,"st");function Be(t){return typeof t===Qe}s(Be,"z");function on(t,e,n,r){r===void 0&&(r=!1);var i=!1;if(!E(t))try{E(t[Nc])?E(t[Lc])||(t[Lc](Fc+e,n),i=!0):(t[Nc](e,n,r),i=!0)}catch(o){}return i}s(on,"Vt");function un(t,e,n,r){if(r===void 0&&(r=!1),!E(t))try{E(t[Uc])?E(t[Oc])||t[Oc](Fc+e,n):t[Uc](e,n,r)}catch(i){}}s(un,"Wn");function Fn(t){var e=t,n=/([^\w\d_$])/g;return n.test(t)&&(e=t.replace(n,"_")),e}s(Fn,"ji");function fn(t,e){if(t)for(var n in t)$t.call(t,n)&&e.call(t,n,t[n])}s(fn,"$");function Zn(t,e){if(t&&e){var n=e.length,r=t.length;if(t===e)return!0;if(r>=n){for(var i=r-1,o=n-1;o>=0;o--){if(t[i]!=e[o])return!1;i--}return!0}}return!1}s(Zn,"Gi");function Rn(t,e){return t&&e?t.indexOf(e)!==-1:!1}s(Rn,"Te");function br(t){return y(t)==="[object Date]"}s(br,"Pr");function vr(t){return y(t)==="[object Array]"}s(vr,"Fe");function Vr(t){return y(t)==="[object Error]"}s(Vr,"qt");function en(t){return typeof t=="string"}s(en,"U");function Ko(t){return typeof t=="number"}s(Ko,"ar");function uo(t){return typeof t=="boolean"}s(uo,"Gr");function ni(t){if(br(t)){var e=s(function(n){var r=String(n);return r.length===1&&(r="0"+r),r},"e");return t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1)+"-"+e(t.getUTCDate())+"T"+e(t.getUTCHours())+":"+e(t.getUTCMinutes())+":"+e(t.getUTCSeconds())+"."+String((t.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}s(ni,"Re");function vn(t,e,n){for(var r=t.length,i=0;i<r&&!(i in t&&e.call(n||t,t[i],i,t)===-1);i++);}s(vn,"R");function Ia(t,e,n){for(var r=t.length,i=n||0,o=Math.max(i>=0?i:r-Math.abs(i),0);o<r;o++)if(o in t&&t[o]===e)return o;return-1}s(Ia,"Ft");function Da(t,e,n){for(var r=t.length,i=n||t,o=new Array(r),a=0;a<r;a++)a in t&&(o[a]=e.call(i,t[a],t));return o}s(Da,"jt");function ed(t,e,n){var r=t.length,i=0,o;if(arguments.length>=3)o=arguments[2];else{for(;i<r&&!(i in t);)i++;o=t[i++]}for(;i<r;)i in t&&(o=e(o,t[i],i,t)),i++;return o}s(ed,"Kr");function mr(t){return typeof t!="string"?t:t.replace(/^\s+|\s+$/g,"")}s(mr,"oe");function xo(t){var e=typeof t;e!==Qe&&(e!==yt||t===null)&&En("objKeys called on non-object");var n=[];for(var r in t)t&&$t.call(t,r)&&n.push(r);if(id)for(var i=ps.length,o=0;o<i;o++)t&&$t.call(t,ps[o])&&n.push(ps[o]);return n}s(xo,"Ye");function Go(t,e,n,r){if(Hc)try{var i={enumerable:!0,configurable:!0};return n&&(i.get=n),r&&(i.set=r),Hc(t,e,i),!0}catch(o){}return!1}s(Go,"St");function li(){var t=Date;return t.now?t.now():new t().getTime()}s(li,"pe");function An(t){return Vr(t)?t.name:""}s(An,"G");function _n(t,e,n,r,i){var o=n;return t&&(o=t[e],o!==n&&(!i||i(o))&&(!r||r(n))&&(o=n,t[e]=o)),o}s(_n,"K");function _r(t,e,n){var r;return t?(r=t[e],!r&&E(r)&&(r=S(n)?{}:n,t[e]=r)):r=S(n)?{}:n,r}s(_r,"ge");function td(t){return!t}s(td,"Xn");function Mc(t){return!!t}s(Mc,"br");function ki(t){throw new Error(t)}s(ki,"Ae");function nd(t,e,n){if(t&&e&&t!==e&&gt(t)&&gt(e)){var r=s(function(o){if(en(o)){var a=e[o];Be(a)?(!n||n(o,!0,e,t))&&(t[o]=function(c){return function(){var l=arguments;return e[c].apply(e,l)}}(o)):(!n||n(o,!1,e,t))&&(ue(t,o)&&delete t[o],Go(t,o,function(){return e[o]},function(c){e[o]=c})||(t[o]=a))}},"n");for(var i in e)r(i)}return t}s(nd,"Wr");function Ip(t){return function(){function e(){var n=this;t&&fn(t,function(r,i){n[r]=i})}return s(e,"e"),e}()}s(Ip,"Ki");function rd(t){return t&&(t=Ue(Dt?Dt({},t):t)),t}s(rd,"Jn");var Fc,Lc,Nc,Oc,Uc,Hc,Dp,Tp,id,ps,Er=O(()=>{Bt(),Fc="on",Lc="attachEvent",Nc="addEventListener",Oc="detachEvent",Uc="removeEventListener",Hc=tt,Dp=Ue.freeze,Tp=Ue.seal,id=!{toString:null}.propertyIsEnumerable("toString"),ps=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]});function xr(t){var e=nn();return e&&e[t]?e[t]:t===Wc&&vs()?window:null}s(xr,"Ee");function vs(){return Boolean(typeof window===yt&&window)}s(vs,"or");function Ta(){return vs()?window:xr(Wc)}s(Ta,"It");function od(){return Boolean(typeof document===yt&&document)}s(od,"Qn");function Mi(){return od()?document:xr(ad)}s(Mi,"De");function Pp(){return Boolean(typeof navigator===yt&&navigator)}s(Pp,"Bo");function Fi(){return Pp()?navigator:xr(sd)}s(Fi,"Le");function Rp(){return Boolean(typeof history===yt&&history)}s(Rp,"zo");function Ap(){return Rp()?history:xr(cd)}s(Ap,"Zi");function Io(t){if(t&&pd){var e=xr("__mockLocation");if(e)return e}return typeof location===yt&&location?location:xr(ld)}s(Io,"$e");function kp(){return typeof console!==J?console:xr(ud)}s(kp,"Yi");function Gi(){return xr(dd)}s(Gi,"Je");function Qo(){return Boolean(typeof JSON===yt&&JSON||xr($c)!==null)}s(Qo,"mt");function Ci(){return Qo()?JSON||xr($c):null}s(Ci,"we");function Mp(){return xr(fd)}s(Mp,"$i");function Fp(){return xr(hd)}s(Fp,"ea");function Lp(){var t=Fi();return t&&t.product?t.product===gd:!1}s(Lp,"ta");function ms(){var t=Fi();if(t&&(t.userAgent!==Ss||Cs===null)){Ss=t.userAgent;var e=(Ss||"").toLowerCase();Cs=Rn(e,ys)||Rn(e,ws)}return Cs}s(ms,"Gt");function Bc(t){if(t===void 0&&(t=null),!t){var e=Fi()||{};t=e?(e.userAgent||"").toLowerCase():""}var n=(t||"").toLowerCase();if(Rn(n,ys))return parseInt(n.split(ys)[1]);if(Rn(n,ws)){var r=parseInt(n.split(ws)[1]);if(r)return r+4}return null}s(Bc,"sr");function hn(t){var e=Object[He].toString.call(t),n="";return e==="[object Error]"?n="{ stack: '"+t.stack+"', message: '"+t.message+"', name: '"+t.name+"'":Qo()&&(n=Ci().stringify(t)),e+n}s(hn,"O");var Wc,ad,sd,cd,ld,ud,dd,$c,fd,hd,gd,ys,ws,Cs,Ss,pd,Pa=O(()=>{"use strict";Bt(),Er(),Wc="window",ad="document",sd="navigator",cd="history",ld="location",ud="console",dd="performance",$c="JSON",fd="crypto",hd="msCrypto",gd="ReactNative",ys="msie",ws="trident/",Cs=null,Ss=null,pd=!1});function vd(t){return t?'"'+t.replace(/\"/g,"")+'"':""}s(vd,"Ho");function bs(t,e){return(t||{}).logger||new zc(e)}s(bs,"Mt");var md,yd,wd,Xo,zc,Vc=O(()=>{"use strict";sn(),Pa(),ht(),Er(),md="AI (Internal): ",yd="AI: ",wd="AITR_",Xo=function(){function t(e,n,r,i){r===void 0&&(r=!1);var o=this;o.messageId=e,o.message=(r?yd:md)+e;var a="";Qo()&&(a=Ci().stringify(i));var c=(n?" message:"+vd(n):"")+(i?" props:"+vd(a):"");o.message+=c}return s(t,"t"),t.dataType="MessageData",t}(),zc=function(){function t(e){this.identifier="DiagnosticLogger",this.queue=[];var n=0,r={};xn(t,this,function(i){E(e)&&(e={}),i.consoleLoggingLevel=function(){return o("loggingLevelConsole",0)},i.telemetryLoggingLevel=function(){return o("loggingLevelTelemetry",1)},i.maxInternalMessageLimit=function(){return o("maxMessageLimit",25)},i.enableDebugExceptions=function(){return o("enableDebugExceptions",!1)},i.throwInternal=function(c,l,u,d,h){h===void 0&&(h=!1);var g=new Xo(l,u,h,d);if(i.enableDebugExceptions())throw g;if(!S(g.message)){var p=i.consoleLoggingLevel();if(h){var C=+g.messageId;!r[C]&&p>=he.WARNING&&(i.warnToConsole(g.message),r[C]=!0)}else p>=he.WARNING&&i.warnToConsole(g.message);i.logInternalMessage(c,g)}},i.warnToConsole=function(c){var l=kp();if(l){var u="log";l.warn&&(u="warn"),Be(l[u])&&l[u](c)}},i.resetInternalMessageCount=function(){n=0,r={}},i.logInternalMessage=function(c,l){if(!a()){var u=!0,d=wd+l.messageId;if(r[d]?u=!1:r[d]=!0,u&&(c<=i.telemetryLoggingLevel()&&(i.queue.push(l),n++),n===i.maxInternalMessageLimit())){var h="Internal events throttle limit per PageView reached for this app.",g=new Xo(Y.MessageLimitPerPVExceeded,h,!1);i.queue.push(g),i.warnToConsole(h)}}};function o(c,l){var u=e[c];return E(u)?l:u}s(o,"a");function a(){return n>=i.maxInternalMessageLimit()}s(a,"o")})}return s(t,"t"),t}()});function Jo(t,e,n,r,i){if(t){var o=t;if(Be(o.getPerfMgr)&&(o=o.getPerfMgr()),o){var a=void 0,c=o.getCtx(_s);try{if(a=o.create(e(),r,i),a){if(c&&a.setCtx&&(a.setCtx(Yo.ParentContextKey,c),c.getCtx&&c.setCtx)){var l=c.getCtx(Yo.ChildrenContextKey);l||(l=[],c.setCtx(Yo.ChildrenContextKey,l)),l.push(a)}return o.setCtx(_s,a),n(a)}}catch(u){a&&a.setCtx&&a.setCtx("exception",u)}finally{a&&o.fire(a),o.setCtx(_s,c)}}}return n()}s(Jo,"ut");var Do,Yo,jc,_s,Es=O(()=>{ht(),Er(),Do="ctx",Yo=function(){function t(e,n,r){var i=this,o=!1;if(i.start=li(),i.name=e,i.isAsync=r,i.isChildEvt=function(){return!1},Be(n)){var a;o=Go(i,"payload",function(){return!a&&Be(n)&&(a=n(),n=null),a})}i.getCtx=function(c){return c?c===t.ParentContextKey||c===t.ChildrenContextKey?i[c]:(i[Do]||{})[c]:null},i.setCtx=function(c,l){if(c)if(c===t.ParentContextKey)i[c]||(i.isChildEvt=function(){return!0}),i[c]=l;else if(c===t.ChildrenContextKey)i[c]=l;else{var u=i[Do]=i[Do]||{};u[c]=l}},i.complete=function(){var c=0,l=i.getCtx(t.ChildrenContextKey);if(vr(l))for(var u=0;u<l.length;u++){var d=l[u];d&&(c+=d.time)}i.time=li()-i.start,i.exTime=i.time-c,i.complete=function(){},!o&&Be(n)&&(i.payload=n())}}return s(t,"t"),t.ParentContextKey="parent",t.ChildrenContextKey="childEvts",t}(),jc=function(){function t(e){this.ctx={},xn(t,this,function(n){n.create=function(r,i,o){return new Yo(r,i,o)},n.fire=function(r){r&&(r.complete(),e&&e.perfEvent(r))},n.setCtx=function(r,i){if(r){var o=n[Do]=n[Do]||{};o[r]=i}},n.getCtx=function(r){return(n[Do]||{})[r]}})}return s(t,"t"),t}(),_s="CoreUtils.doPerf"}),Cd,Np=O(()=>{"use strict";Es(),sn(),Er(),Cd=function(){function t(e,n){var r=this,i=null,o=Be(e.processTelemetry),a=Be(e.setNextPlugin);r._hasRun=!1,r.getPlugin=function(){return e},r.getNext=function(){return i},r.setNext=function(c){i=c},r.processTelemetry=function(c,l){l||(l=n);var u=e?e.identifier:"TelemetryPluginChain";Jo(l?l.core():null,function(){return u+":processTelemetry"},function(){if(e&&o){r._hasRun=!0;try{l.setNext(i),a&&e.setNextPlugin(i),i&&(i._hasRun=!1),e.processTelemetry(c,l)}catch(h){var d=i&&i._hasRun;(!i||!d)&&l.diagLog().throwInternal(he.CRITICAL,Y.PluginException,"Plugin ["+e.identifier+"] failed during processTelemetry - "+h),i&&!d&&i.processTelemetry(c,l)}}else i&&(r._hasRun=!0,i.processTelemetry(c,l))},function(){return{item:c}},!c.sync)}}return s(t,"t"),t}()});function qc(t,e){var n=[];if(t&&t.length>0)for(var r=null,i=0;i<t.length;i++){var o=t[i];if(o&&Be(o.processTelemetry)){var a=new Cd(o,e);n.push(a),r&&r.setNext(a),r=a}}return n.length>0?n[0]:null}s(qc,"na");function Op(t,e,n){var r=[],i=!n;if(t)for(;t;){var o=t.getPlugin();(i||o===n)&&(i=!0,r.push(o)),t=t.getNext()}return i||r.push(n),qc(r,e)}s(Op,"Qc");function Up(t,e,n){var r=t,i=!1;return n&&t&&(r=[],vn(t,function(o){(i||o===n)&&(i=!0,r.push(o))})),n&&!i&&(r||(r=[]),r.push(n)),qc(r,e)}s(Up,"Zc");var To,Kc=O(()=>{"use strict";Vc(),Np(),Er(),To=function(){function t(e,n,r,i){var o=this,a=null;i!==null&&(e&&Be(e.getPlugin)?a=Op(e,o,i||e.getPlugin()):i?a=Up(e,o,i):S(i)&&(a=qc(e,o))),o.core=function(){return r},o.diagLog=function(){return bs(r,n)},o.getCfg=function(){return n},o.getExtCfg=function(c,l){l===void 0&&(l={});var u;if(n){var d=n.extensionConfig;d&&c&&(u=d[c])}return u||l},o.getConfig=function(c,l,u){u===void 0&&(u=!1);var d,h=o.getExtCfg(c,null);return h&&!E(h[l])?d=h[l]:n&&!E(n[l])&&(d=n[l]),E(d)?u:d},o.hasNext=function(){return a!=null},o.getNext=function(){return a},o.setNext=function(c){a=c},o.processNext=function(c){var l=a;l&&(a=l.getNext(),l.processTelemetry(c,o))},o.createNew=function(c,l){return c===void 0&&(c=null),new t(c||a,n,r,l)}}return s(t,"t"),t}()}),Sd,Gc,bd=O(()=>{Sd="iKey",Gc="extensionConfig"}),Ra,Po,_d=O(()=>{"use strict";Kc(),Er(),bd(),Ra="getPlugin",Po=function(){function t(){var e=this,n=!1,r=null,i=null;e.core=null,e.diagLog=function(o){return e._getTelCtx(o).diagLog()},e.isInitialized=function(){return n},e.setInitialized=function(o){n=o},e.setNextPlugin=function(o){i=o},e.processNext=function(o,a){a?a.processNext(o):i&&Be(i.processTelemetry)&&i.processTelemetry(o,null)},e._getTelCtx=function(o){o===void 0&&(o=null);var a=o;if(!a){var c=r||new To(null,{},e.core);i&&i[Ra]?a=c.createNew(null,i[Ra]):a=c.createNew(null,i)}return a},e._baseTelInit=function(o,a,c,l){o&&_n(o,Gc,[],null,E),!l&&a&&(l=a.getProcessTelContext().getNext());var u=i;i&&i[Ra]&&(u=i[Ra]()),e.core=a,r=new To(l,o,a,u),n=!0}}return s(t,"t"),t.prototype.initialize=function(e,n,r,i){this._baseTelInit(e,n,r,i)},t}()});function Qc(t,e){for(var n=[],r=null,i=t.getNext();i;){var o=i.getPlugin();o&&(r&&Be(r[Jc])&&Be(o[xs])&&r[Jc](o),(!Be(o[Yc])||!o[Yc]())&&n.push(o),r=o,i=i.getNext())}vn(n,function(a){a.initialize(t.getCfg(),t.core(),e,t.getNext())})}s(Qc,"Qr");function Ed(t){return t.sort(function(e,n){var r=0,i=Be(n[xs]);return Be(e[xs])?r=i?e[Xc]-n[Xc]:1:i&&(r=-1),r})}s(Ed,"sa");var xs,Xc,Jc,Yc,xd=O(()=>{"use strict";Er(),xs="processTelemetry",Xc="priority",Jc="setNextPlugin",Yc="isInitialized"}),Is,Id,Dd,Hp=O(()=>{"use strict";Bt(),ht(),_d(),Kc(),xd(),Er(),Is=500,Id="Channel has invalid priority",Dd=function(t){te(e,t);function e(){var n=t.call(this)||this;n.identifier="ChannelControllerPlugin",n.priority=Is;var r;xn(e,n,function(c,l){c.setNextPlugin=function(u){},c.processTelemetry=function(u,d){r&&vn(r,function(h){if(h.length>0){var g=n._getTelCtx(d).createNew(h);g.processNext(u)}})},c.getChannelControls=function(){return r},c.initialize=function(u,d,h){c.isInitialized()||(l.initialize(u,d,h),a((u||{}).channels,h),vn(r,function(g){return Qc(new To(g,u,d),h)}))}});function i(c){vn(c,function(l){l.priority<Is&&ki(Id+l.identifier)})}s(i,"i");function o(c){c&&c.length>0&&(c=c.sort(function(l,u){return l.priority-u.priority}),i(c),r.push(c))}s(o,"a");function a(c,l){if(r=[],c&&vn(c,function(d){return o(d)}),l){var u=[];vn(l,function(d){d.priority>Is&&u.push(d)}),o(u)}}return s(a,"o"),n}return s(e,"e"),e._staticInit=function(){var n=e.prototype;Go(n,"ChannelControls",n.getChannelControls),Go(n,"channelQueue",n.getChannelControls)}(),e}(Po)});function Td(t,e){var n=Aa[Qi]||Ma[Qi];return n||(n=Aa[Qi]=Aa(t,e),Ma[Qi]=n),n}s(Td,"va");function Ds(t){return t?t.isEnabled():!0}s(Ds,"ni");function Bp(t){var e=t.cookieCfg=t.cookieCfg||{};if(_n(e,"domain",t.cookieDomain,ge,E),_n(e,"path",t.cookiePath||"/",null,E),E(e[Rs])){var n=void 0;S(t[nl])||(n=!t[nl]),S(t[rl])||(n=!t[rl]),e[Rs]=n}return e}s(Bp,"$c");function Zc(t,e){var n;if(t)n=t.getCookieMgr();else if(e){var r=e.cookieCfg;r[Qi]?n=r[Qi]:n=Aa(e)}return n||(n=Td(e,(t||{}).logger)),n}s(Zc,"lr");function Aa(t,e){var n=Bp(t||Ma),r=n.path||"/",i=n.domain,o=n[Rs]!==!1,a={isEnabled:function(){var c=o&&Pd(e),l=Ma[Qi];return c&&l&&a!==l&&(c=Ds(l)),c},setEnabled:function(c){o=c!==!1},set:function(c,l,u,d,h){if(Ds(a)){var g={},p=mr(l||ui),C=p.indexOf(";");if(C!==-1&&(p=mr(l.substring(0,C)),g=Rd(l.substring(C+1))),_n(g,"domain",d||i,Mc,S),!E(u)){var v=ms();if(S(g[Ps])){var m=li(),b=m+u*1e3;if(b>0){var w=new Date;w.setTime(b),_n(g,Ps,Ad(w,v?el:tl)||Ad(w,v?el:tl)||ui,Mc)}}v||_n(g,"max-age",ui+u,null,S)}var P=Io();P&&P.protocol==="https:"&&(_n(g,"secure",null,null,S),As===null&&(As=!Fd((Fi()||{}).userAgent)),As&&_n(g,"SameSite","None",null,S)),_n(g,"path",h||r,null,S);var F=n.setCookie||Md;F(c,kd(p,g))}},get:function(c){var l=ui;return Ds(a)&&(l=(n.getCookie||Wp)(c)),l},del:function(c,l){Ds(a)&&a.purge(c,l)},purge:function(c,l){if(Pd(e)){var u=(h={},h.path=l||"/",h[Ps]="Thu, 01 Jan 1970 00:00:01 GMT",h);ms()||(u["max-age"]="0");var d=n.delCookie||Md;d(c,kd(ui,u))}var h}};return a[Qi]=a,a}s(Aa,"cr");function Pd(t){if(ka===null){ka=!1;try{var e=Zo||{};ka=e[Ts]!==void 0}catch(n){t&&t.throwInternal(he.WARNING,Y.CannotAccessCookie,"Cannot access document.cookie - "+An(n),{exception:hn(n)})}}return ka}s(Pd,"da");function Rd(t){var e={};if(t&&t.length){var n=mr(t).split(";");vn(n,function(r){if(r=mr(r||ui),r){var i=r.indexOf("=");i===-1?e[r]=null:e[mr(r.substring(0,i))]=mr(r.substring(i+1))}})}return e}s(Rd,"as");function Ad(t,e){return Be(t[e])?t[e]():null}s(Ad,"rs");function kd(t,e){var n=t||ui;return fn(e,function(r,i){n+="; "+r+(E(i)?ui:"="+i)}),n}s(kd,"ns");function Wp(t){var e=ui;if(Zo){var n=Zo[Ts]||ui;il!==n&&(ol=Rd(n),il=n),e=mr(ol[t]||ui)}return e}s(Wp,"el");function Md(t,e){Zo&&(Zo[Ts]=t+"="+e)}s(Md,"is");function Fd(t){return en(t)?!!(Rn(t,"CPU iPhone OS 12")||Rn(t,"iPad; CPU OS 12")||Rn(t,"Macintosh; Intel Mac OS X 10_14")&&Rn(t,"Version/")&&Rn(t,"Safari")||Rn(t,"Macintosh; Intel Mac OS X 10_14")&&Zn(t,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||Rn(t,"Chrome/5")||Rn(t,"Chrome/6")||Rn(t,"UnrealEngine")&&!Rn(t,"Chrome")||Rn(t,"UCBrowser/12")||Rn(t,"UCBrowser/11")):!1}s(Fd,"ai");var el,tl,Ts,Ps,Rs,nl,rl,Qi,ui,ka,As,il,Zo,ol,Ma,al=O(()=>{sn(),Pa(),Er(),el="toGMTString",tl="toUTCString",Ts="cookie",Ps="expires",Rs="enabled",nl="isCookieUseDisabled",rl="disableCookiesUsage",Qi="_ckMgr",ui="",ka=null,As=null,il=null,Zo=Mi(),ol={},Ma={}}),Ld,sl,cl,Nd=O(()=>{"use strict";Bt(),ht(),Hp(),Kc(),xd(),Es(),al(),Er(),bd(),Ld="Extensions must provide callback to initialize",sl="_notificationManager",cl=function(){function t(){var e=!1,n,r,i,o,a;xn(t,this,function(c){c._extensions=new Array,r=new Dd,c.logger=$n({throwInternal:function(l,u,d,h,g){g===void 0&&(g=!1)},warnToConsole:function(l){},resetInternalMessageCount:function(){}}),n=[],c.isInitialized=function(){return e},c.initialize=function(l,u,d,h){c.isInitialized()&&ki("Core should not be initialized more than once"),(!l||E(l.instrumentationKey))&&ki("Please provide instrumentation key"),i=h,c[sl]=h,c.config=l||{},l.extensions=E(l.extensions)?[]:l.extensions;var g=_r(l,Gc);g.NotificationManager=h,d&&(c.logger=d);var p=[];p.push.apply(p,u.concat(l.extensions)),p=Ed(p);var C=[],v=[],m={};vn(p,function(b){(E(b)||E(b.initialize))&&ki(Ld);var w=b.priority,P=b.identifier;b&&w&&(E(m[w])?m[w]=P:d.warnToConsole("Two extensions have same priority #"+w+" - "+m[w]+", "+P)),!w||w<r.priority?C.push(b):v.push(b)}),p.push(r),C.push(r),p=Ed(p),c._extensions=p,Qc(new To([r],l,c),p),Qc(new To(C,l,c),p),c._extensions=C,c.getTransmissionControls().length===0&&ki("No channels available"),e=!0,c.releaseQueue()},c.getTransmissionControls=function(){return r.getChannelControls()},c.track=function(l){_n(l,Sd,c.config.instrumentationKey,null,td),_n(l,"time",ni(new Date),null,td),_n(l,"ver","4.0",null,E),c.isInitialized()?c.getProcessTelContext().processNext(l):n.push(l)},c.getProcessTelContext=function(){var l=c._extensions,u=l;return(!l||l.length===0)&&(u=[r]),new To(u,c.config,c)},c.getNotifyMgr=function(){return i||(i=$n({addNotificationListener:function(l){},removeNotificationListener:function(l){},eventsSent:function(l){},eventsDiscarded:function(l,u){},eventsSendRequest:function(l,u){}}),c[sl]=i),i},c.getCookieMgr=function(){return a||(a=Aa(c.config,c.logger)),a},c.setCookieMgr=function(l){a=l},c.getPerfMgr=function(){return o||c.config&&c.config.enablePerfMgr&&(o=new jc(c.getNotifyMgr())),o},c.setPerfMgr=function(l){o=l},c.eventCnt=function(){return n.length},c.releaseQueue=function(){n.length>0&&(vn(n,function(l){c.getProcessTelContext().processNext(l)}),n=[])}})}return s(t,"t"),t}()}),ll,Od=O(()=>{ht(),Er(),ll=function(){function t(e){this.listeners=[];var n=!!(e||{}).perfEvtsSendAll;xn(t,this,function(r){r.addNotificationListener=function(i){r.listeners.push(i)},r.removeNotificationListener=function(i){for(var o=Ia(r.listeners,i);o>-1;)r.listeners.splice(o,1),o=Ia(r.listeners,i)},r.eventsSent=function(i){vn(r.listeners,function(o){o&&o.eventsSent&&setTimeout(function(){return o.eventsSent(i)},0)})},r.eventsDiscarded=function(i,o){vn(r.listeners,function(a){a&&a.eventsDiscarded&&setTimeout(function(){return a.eventsDiscarded(i,o)},0)})},r.eventsSendRequest=function(i,o){vn(r.listeners,function(a){if(a&&a.eventsSendRequest)if(o)setTimeout(function(){return a.eventsSendRequest(i,o)},0);else try{a.eventsSendRequest(i,o)}catch(c){}})},r.perfEvent=function(i){i&&(n||!i.isChildEvt())&&vn(r.listeners,function(o){if(o&&o.perfEvent)if(i.isAsync)setTimeout(function(){return o.perfEvent(i)},0);else try{o.perfEvent(i)}catch(a){}})}})}return s(t,"t"),t}()}),ul,$p=O(()=>{Bt(),Nd(),ke(),Od(),Es(),Vc(),ht(),Er(),ul=function(t){te(e,t);function e(){var n=t.call(this)||this;return xn(e,n,function(r,i){r.initialize=function(c,l,u,d){i.initialize(c,l,u||new zc(c),d||new ll(c))},r.track=function(c){Jo(r.getPerfMgr(),function(){return"AppInsightsCore:track"},function(){c===null&&(a(c),ki("Invalid telemetry item")),o(c),i.track(c)},function(){return{item:c}},!c.sync)},r.addNotificationListener=function(c){var l=r.getNotifyMgr();l&&l.addNotificationListener(c)},r.removeNotificationListener=function(c){var l=r.getNotifyMgr();l&&l.removeNotificationListener(c)},r.pollInternalLogs=function(c){var l=r.config.diagnosticLogInterval;return(!l||!(l>0))&&(l=1e4),setInterval(function(){var u=r.logger?r.logger.queue:[];vn(u,function(d){var h={name:c||"InternalMessageId: "+d.messageId,iKey:r.config.instrumentationKey,time:ni(new Date),baseType:Xo.dataType,baseData:{message:d.message}};r.track(h)}),u.length=0},l)};function o(c){if(E(c.name))throw a(c),Error("telemetry name required")}s(o,"a");function a(c){var l=r.getNotifyMgr();l&&l.eventsDiscarded([c],le.InvalidEvent)}s(a,"o")}),n}return s(e,"e"),e}(cl)});function Ud(t){t<0&&(t>>>=0),ea=123456789+t&Xi,ta=987654321-t&Xi,fl=!0}s(Ud,"ls");function Hd(){try{var t=li()&2147483647;Ud((Math.random()*dl^t)+t)}catch(e){}}s(Hd,"fs");function Bd(t){return t>0?Math.floor(Ro()/Xi*(t+1))>>>0:0}s(Bd,"si");function Ro(t){var e,n=Mp()||Fp();return n&&n.getRandomValues?e=n.getRandomValues(new Uint32Array(1))[0]&Xi:ms()?(fl||Hd(),e=Wd()&Xi):e=Math.floor(dl*Math.random()|0),t||(e>>>=0),e}s(Ro,"Ct");function zp(t){t?Ud(t):Hd()}s(zp,"xa");function Wd(t){ta=36969*(ta&65535)+(ta>>16)&Xi,ea=18e3*(ea&65535)+(ea>>16)&Xi;var e=(ta<<16)+(ea&65535)>>>0&Xi|0;return t||(e>>>=0),e}s(Wd,"ui");var dl,Xi,fl,ea,ta,$d=O(()=>{Pa(),Er(),dl=4294967296,Xi=4294967295,fl=!1,ea=123456789,ta=987654321});function Ao(t,e){var n=!1,r=Ta();r&&(n=on(r,t,e),n=on(r.body,t,e)||n);var i=Mi();return i&&(n=La.Attach(i,t,e)||n),n}s(Ao,"_t");function Vp(){function t(){return Bd(15)}return s(t,"t"),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(Vd,function(e){var n=t()|0,r=e==="x"?n:n&3|8;return r.toString(16)})}s(Vp,"ps");function jp(){var t=Gi();return t&&t.now?t.now():li()}s(jp,"ds");function ks(t){t===void 0&&(t=22);for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=Ro()>>>0,r=0,i="";i.length<t;)r++,i+=e.charAt(n&63),n>>>=6,r===5&&(n=(Ro()<<2&4294967295|n&3)>>>0,r=0);return i}s(ks,"Xt");function Li(){for(var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],e="",n,r=0;r<4;r++)n=Ro(),e+=t[n&15]+t[n>>4&15]+t[n>>8&15]+t[n>>12&15]+t[n>>16&15]+t[n>>20&15]+t[n>>24&15]+t[n>>28&15];var i=t[8+(Ro()&3)|0];return e.substr(0,8)+e.substr(9,4)+"4"+e.substr(13,3)+i+e.substr(16,3)+e.substr(19,12)}s(Li,"Oe");function na(t,e){var n=Td(t,e),r=Ms._canUseCookies;return ra===null&&(ra=[],Fa=r,Go(Ms,"_canUseCookies",function(){return Fa},function(i){Fa=i,vn(ra,function(o){o.setEnabled(i)})})),Ia(ra,n)===-1&&ra.push(n),uo(r)&&n.setEnabled(r),uo(Fa)&&n.setEnabled(Fa),n}s(na,"Qt");function zd(){na().setEnabled(!1)}s(zd,"ci");function qp(t){return na(null,t).isEnabled()}s(qp,"Sa");function Kp(t,e){return na(null,t).get(e)}s(Kp,"Ia");function Gp(t,e,n,r){na(null,t).set(e,n,null,r)}s(Gp,"Ca");function Qp(t,e){return na(null,t).del(e)}s(Qp,"Ta");var ra,Fa,Ms,Vd,La,Xp=O(()=>{"use strict";Bt(),al(),Pa(),Er(),$d(),ra=null,Ms={_canUseCookies:void 0,isTypeof:T,isUndefined:S,isNullOrUndefined:E,hasOwnProperty:ue,isFunction:Be,isObject:gt,isDate:br,isArray:vr,isError:Vr,isString:en,isNumber:Ko,isBoolean:uo,toISOString:ni,arrForEach:vn,arrIndexOf:Ia,arrMap:Da,arrReduce:ed,strTrim:mr,objCreate:$n,objKeys:xo,objDefineAccessors:Go,addEventHandler:Ao,dateNow:li,isIE:ms,disableCookies:zd,newGuid:Vp,perfNow:jp,newId:ks,randomValue:Bd,random32:Ro,mwcRandomSeed:zp,mwcRandom32:Wd,generateW3CId:Li},Vd=/[xy]/g,La={Attach:on,AttachEvent:on,Detach:un,DetachEvent:un}});function hl(t,e){if(t)for(var n=0;n<t.length&&!e(t[n],n);n++);}s(hl,"wa");function gl(t,e,n,r,i){i>=0&&i<=2&&hl(t,function(o,a){var c=o.cbks,l=c[ml[i]];if(l){e.ctx=function(){var h=r[a]=r[a]||{};return h};try{l.apply(e.inst,n)}catch(h){var u=e.err;try{var d=c[ml[2]];d&&(e.err=h,d.apply(e.inst,n))}catch(g){}finally{e.err=u}}}})}s(gl,"Ea");function Jp(t){return function(){var e=this,n=arguments,r=t.h,i={name:t.n,inst:e,ctx:null,set:l},o=[],a=c([i],n);function c(d,h){return hl(h,function(g){d.push(g)}),d}s(c,"u");function l(d,h){n=c([],n),n[d]=h,a=c([i],n)}s(l,"s"),gl(r,i,a,o,0);var u=t.f;try{i.rslt=u.apply(e,n)}catch(d){throw i.err=d,gl(r,i,a,o,3),d}return gl(r,i,a,o,1),i.rslt}}s(Jp,"al");function Yp(t){if(t){if(yl)return yl(t);var e=t[qd]||t[He]||t[Kd];if(e)return e}return null}s(Yp,"ol");function jd(t,e,n){var r=null;return t&&(ue(t,e)?r=t:n&&(r=jd(Yp(t),e,!1))),r}s(jd,"xs");function Zp(t,e,n){return t?pl(t[He],e,n,!1):null}s(Zp,"Pa");function pl(t,e,n,r){if(r===void 0&&(r=!0),t&&e&&n){var i=jd(t,e,r);if(i){var o=i[e];if(typeof o===Qe){var a=o[vl];if(!a){a={i:0,n:e,f:o,h:[]};var c=Jp(a);c[vl]=a,i[e]=c}var l={id:a.i,cbks:n,rm:function(){var u=this.id;hl(a.h,function(d,h){if(d.id===u)return a.h.splice(h,1),1})}};return a.i++,a.h.push(l),l}}}return null}s(pl,"sn");var vl,ml,qd,Kd,yl,ev=O(()=>{Bt(),Er(),vl="_aiHooks",ml=["req","rsp","hkErr","fnErr"],qd="__proto__",Kd="constructor",yl=Object.getPrototypeOf}),wn=O(()=>{$p(),Nd(),_d(),$d(),Xp(),Er(),Pa(),Bt(),Od(),Es(),Vc(),sn(),ev(),al()}),zn,Gd=O(()=>{zn={requestContextHeader:"Request-Context",requestContextTargetKey:"appId",requestContextAppIdFormat:"appId=cid-v1:",requestIdHeader:"Request-Id",traceParentHeader:"traceparent",traceStateHeader:"tracestate",sdkContextHeader:"Sdk-Context",sdkContextHeaderAppIdRequest:"appId",requestContextHeaderLowerCase:"request-context"}});function wl(t,e,n){var r=e.length,i=Qd(t,e);if(i.length!==r){for(var o=0,a=i;n[a]!==void 0;)o++,a=i.substring(0,150-3)+Yd(o);i=a}return i}s(wl,"li");function Qd(t,e){var n;return e&&(e=mr(e.toString()),e.length>150&&(n=e.substring(0,150),t.throwInternal(he.WARNING,Y.NameTooLong,"name is too long.  It has been truncated to "+150+" characters.",{name:e},!0))),n||e}s(Qd,"Aa");function Lr(t,e,n){n===void 0&&(n=1024);var r;return e&&(n=n||1024,e=mr(e),e.toString().length>n&&(r=e.toString().substring(0,n),t.throwInternal(he.WARNING,Y.StringValueTooLong,"string value is too long. It has been truncated to "+n+" characters.",{value:e},!0))),r||e}s(Lr,"ae");function Na(t,e){return Sl(t,e,2048,Y.UrlTooLong)}s(Na,"Tt");function Cl(t,e){var n;return e&&e.length>32768&&(n=e.substring(0,32768),t.throwInternal(he.WARNING,Y.MessageTruncated,"message is too long, it has been truncated to "+32768+" characters.",{message:e},!0)),n||e}s(Cl,"Nr");function Xd(t,e){var n;if(e){var r=""+e;r.length>32768&&(n=r.substring(0,32768),t.throwInternal(he.WARNING,Y.ExceptionTruncated,"exception is too long, it has been truncated to "+32768+" characters.",{exception:e},!0))}return n||e}s(Xd,"fi");function fo(t,e){if(e){var n={};fn(e,function(r,i){if(gt(i)&&Qo())try{i=Ci().stringify(i)}catch(o){t.throwInternal(he.WARNING,Y.CannotSerializeObjectNonSerializable,"custom property is not valid",{exception:o},!0)}i=Lr(t,i,8192),r=wl(t,r,n),n[r]=i}),e=n}return e}s(fo,"Be");function ho(t,e){if(e){var n={};fn(e,function(r,i){r=wl(t,r,n),n[r]=i}),e=n}return e}s(ho,"ze");function Jd(t,e){return e&&Sl(t,e,128,Y.IdTooLong).toString()}s(Jd,"pi");function Sl(t,e,n,r){var i;return e&&(e=mr(e),e.length>n&&(i=e.substring(0,n),t.throwInternal(he.WARNING,r,"input is too long, it has been truncated to "+n+" characters.",{data:e},!0))),i||e}s(Sl,"di");function Yd(t){var e="00"+t;return e.substr(e.length-3)}s(Yd,"Da");var Zd,Si=O(()=>{wn(),Zd={MAX_NAME_LENGTH:150,MAX_ID_LENGTH:128,MAX_PROPERTY_LENGTH:8192,MAX_STRING_LENGTH:1024,MAX_URL_LENGTH:2048,MAX_MESSAGE_LENGTH:32768,MAX_EXCEPTION_LENGTH:32768,sanitizeKeyAndAddUniqueness:wl,sanitizeKey:Qd,sanitizeString:Lr,sanitizeUrl:Na,sanitizeMessage:Cl,sanitizeException:Xd,sanitizeProperties:fo,sanitizeMeasurements:ho,sanitizeId:Jd,sanitizeInput:Sl,padNumber:Yd,trim:mr}});function ia(t){var e=null;if(Be(Event))e=new Event(t);else{var n=Mi();n&&n.createEvent&&(e=n.createEvent("Event"),e.initEvent(t,!0,!0))}return e}s(ia,"Ut");var ef=O(()=>{wn()});function Un(t,e){return e===void 0&&(e=!1),t==null?e:t.toString().toLowerCase()==="true"}s(Un,"ee");function Ji(t){(isNaN(t)||t<0)&&(t=0),t=Math.round(t);var e=""+t%1e3,n=""+Math.floor(t/1e3)%60,r=""+Math.floor(t/(1e3*60))%60,i=""+Math.floor(t/(1e3*60*60))%24,o=Math.floor(t/(1e3*60*60*24));return e=e.length===1?"00"+e:e.length===2?"0"+e:e,n=n.length<2?"0"+n:n,r=r.length<2?"0"+r:r,i=i.length<2?"0"+i:i,(o>0?o+".":"")+i+":"+r+":"+n+"."+e}s(Ji,"Ge");function bl(){var t=Fi();return"sendBeacon"in t&&t.sendBeacon}s(bl,"kr");function tf(t,e){var n=null;return vn(t,function(r){if(r.identifier===e)return n=r,-1}),n}s(tf,"un");function nf(t,e,n,r,i){return!i&&en(t)&&(t==="Script error."||t==="Script error")}s(nf,"cn");var Fs=O(()=>{wn()}),ko,Ls,oa,Ns,_l,di,bi=O(()=>{ko="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Ls="sampleRate",oa="ProcessLegacy",Ns="http.method",_l="https://dc.services.visualstudio.com",di="not_specified"}),Mo,_i,rf=O(()=>{(function(t){t[t.LocalStorage=0]="LocalStorage",t[t.SessionStorage=1]="SessionStorage"})(Mo||(Mo={})),function(t){t[t.AI=0]="AI",t[t.AI_AND_W3C=1]="AI_AND_W3C",t[t.W3C=2]="W3C"}(_i||(_i={}))});function El(){return Il()?Os(Mo.LocalStorage):null}s(El,"Ra");function Os(t){try{if(E(nn()))return null;var e=new Date,n=xr(t===Mo.LocalStorage?"localStorage":"sessionStorage");n.setItem(e.toString(),e.toString());var r=n.getItem(e.toString())!==e.toString();if(n.removeItem(e.toString()),!r)return n}catch(i){}return null}s(Os,"gi");function xl(){return aa()?Os(Mo.SessionStorage):null}s(xl,"Ma");function of(){go=!1,po=!1}s(of,"pn");function Il(){return go===void 0&&(go=!!Os(Mo.LocalStorage)),go}s(Il,"Rr");function af(t,e){var n=El();if(n!==null)try{return n.getItem(e)}catch(r){go=!1,t.throwInternal(he.WARNING,Y.BrowserCannotReadLocalStorage,"Browser failed read of local storage. "+An(r),{exception:hn(r)})}return null}s(af,"dn");function sf(t,e,n){var r=El();if(r!==null)try{return r.setItem(e,n),!0}catch(i){go=!1,t.throwInternal(he.WARNING,Y.BrowserCannotWriteLocalStorage,"Browser failed write to local storage. "+An(i),{exception:hn(i)})}return!1}s(sf,"gn");function cf(t,e){var n=El();if(n!==null)try{return n.removeItem(e),!0}catch(r){go=!1,t.throwInternal(he.WARNING,Y.BrowserFailedRemovalFromLocalStorage,"Browser failed removal of local storage item. "+An(r),{exception:hn(r)})}return!1}s(cf,"vn");function aa(){return po===void 0&&(po=!!Os(Mo.SessionStorage)),po}s(aa,"wt");function tv(){var t=[];return aa()&&fn(xr("sessionStorage"),function(e){t.push(e)}),t}s(tv,"La");function Us(t,e){var n=xl();if(n!==null)try{return n.getItem(e)}catch(r){po=!1,t.throwInternal(he.WARNING,Y.BrowserCannotReadSessionStorage,"Browser failed read of session storage. "+An(r),{exception:hn(r)})}return null}s(Us,"Yt");function Hs(t,e,n){var r=xl();if(r!==null)try{return r.setItem(e,n),!0}catch(i){po=!1,t.throwInternal(he.WARNING,Y.BrowserCannotWriteSessionStorage,"Browser failed write to session storage. "+An(i),{exception:hn(i)})}return!1}s(Hs,"$t");function lf(t,e){var n=xl();if(n!==null)try{return n.removeItem(e),!0}catch(r){po=!1,t.throwInternal(he.WARNING,Y.BrowserFailedRemovalFromSessionStorage,"Browser failed removal of session storage item. "+An(r),{exception:hn(r)})}return!1}s(lf,"mn");var go,po,uf=O(()=>{wn(),rf(),go=void 0,po=void 0});function Oa(t){var e=Pl,n=gf,r=n[e];return Tl.createElement?n[e]||(r=n[e]=Tl.createElement("a")):r={host:hf(t,!0)},r.href=t,e++,e>=n.length&&(e=0),Pl=e,r}s(Oa,"gr");function df(t){var e,n=Oa(t);return n&&(e=n.href),e}s(df,"hn");function nv(t){var e,n=Oa(t);return n&&(e=n.pathname),e}s(nv,"Ua");function ff(t,e){return t?t.toUpperCase()+" "+e:e}s(ff,"xn");function hf(t,e){var n=Dl(t,e)||"";if(n){var r=n.match(/(www[0-9]?\.)?(.[^/:]+)(\:[\d]+)?/i);if(r!=null&&r.length>3&&en(r[2])&&r[2].length>0)return r[2]+(r[3]||"")}return n}s(hf,"vi");function Dl(t,e){var n=null;if(t){var r=t.match(/(\w*):\/\/(.[^/:]+)(\:[\d]+)?/i);if(r!=null&&r.length>2&&en(r[2])&&r[2].length>0&&(n=r[2]||"",e&&r.length>2)){var i=(r[1]||"").toLowerCase(),o=r[3]||"";(i==="http"&&o===":80"||i==="https"&&o===":443")&&(o=""),n+=o}}return n}s(Dl,"yn");var Tl,Pl,gf,pf=O(()=>{wn(),Tl=Mi()||{},Pl=0,gf=[null,null,null,null,null]});function Bs(t){return vf.indexOf(t.toLowerCase())!==-1}s(Bs,"Mr");function rv(t,e,n,r){var i,o=r,a=r;if(e&&e.length>0){var c=Oa(e);if(i=c.host,!o)if(c.pathname!=null){var l=c.pathname.length===0?"/":c.pathname;l.charAt(0)!=="/"&&(l="/"+l),a=c.pathname,o=Lr(t,n?n+" "+l:l)}else o=Lr(t,e)}else i=r,o=r;return{target:i,name:o,data:a}}s(rv,"Cs");function Ua(){var t=Gi();if(t&&t.now&&t.timing){var e=t.now()+t.timing.navigationStart;if(e>0)return e}return li()}s(Ua,"vr");function Nr(t,e){var n=null;return t!==0&&e!==0&&!E(t)&&!E(e)&&(n=e-t),n}s(Nr,"ve");var vf,Rl,mf,vo,yf,wf=O(()=>{wn(),Gd(),Si(),ef(),Fs(),bi(),uf(),pf(),vf=["https://dc.services.visualstudio.com/v2/track","https://breeze.aimon.applicationinsights.io/v2/track","https://dc-int.services.visualstudio.com/v2/track"],Rl={NotSpecified:di,createDomEvent:ia,disableStorage:of,isInternalApplicationInsightsEndpoint:Bs,canUseLocalStorage:Il,getStorage:af,setStorage:sf,removeStorage:cf,canUseSessionStorage:aa,getSessionStorageKeys:tv,getSessionStorage:Us,setSessionStorage:Hs,removeSessionStorage:lf,disableCookies:zd,canUseCookies:qp,disallowsSameSiteNone:Fd,setCookie:Gp,stringToBoolOrDefault:Un,getCookie:Kp,deleteCookie:Qp,trim:mr,newId:ks,random32:function(){return Ro(!0)},generateW3CId:Li,isArray:vr,isError:Vr,isDate:br,toISOStringForIE8:ni,getIEVersion:Bc,msToTimeSpan:Ji,isCrossOriginError:nf,dump:hn,getExceptionName:An,addEventHandler:on,IsBeaconApiSupported:bl,getExtension:tf},mf={parseUrl:Oa,getAbsoluteUrl:df,getPathName:nv,getCompleteUrl:ff,parseHost:hf,parseFullHost:Dl},vo={correlationIdPrefix:"cid-v1:",canIncludeCorrelationHeader:function(t,e,n){if(!e||t&&t.disableCorrelationHeaders)return!1;if(t&&t.correlationHeaderExcludePatterns){for(var r=0;r<t.correlationHeaderExcludePatterns.length;r++)if(t.correlationHeaderExcludePatterns[r].test(e))return!1}var i=Oa(e).host.toLowerCase();if(i&&(i.indexOf(":443")!==-1||i.indexOf(":80")!==-1)&&(i=(Dl(e,!0)||"").toLowerCase()),(!t||!t.enableCorsCorrelation)&&i&&i!==n)return!1;var o=t&&t.correlationHeaderDomains;if(o){var a;if(vn(o,function(u){var d=new RegExp(u.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));a=a||d.test(i)}),!a)return!1}var c=t&&t.correlationHeaderExcludedDomains;if(!c||c.length===0)return!0;for(var r=0;r<c.length;r++){var l=new RegExp(c[r].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));if(l.test(i))return!1}return i&&i.length>0},getCorrelationContext:function(t){if(t){var e=vo.getCorrelationContextValue(t,zn.requestContextTargetKey);if(e&&e!==vo.correlationIdPrefix)return e}},getCorrelationContextValue:function(t,e){if(t)for(var n=t.split(","),r=0;r<n.length;++r){var i=n[r].split("=");if(i.length===2&&i[0]===e)return i[1]}}},yf={Now:Ua,GetDuration:Nr}});function Cf(t){if(!t)return{};var e=t.split(Sf),n=ed(e,function(i,o){var a=o.split(bf);if(a.length===2){var c=a[0].toLowerCase(),l=a[1];i[c]=l}return i},{});if(xo(n).length>0){if(n.endpointsuffix){var r=n.location?n.location+".":"";n.ingestionendpoint=n.ingestionendpoint||"https://"+r+"dc."+n.endpointsuffix}n.ingestionendpoint=n.ingestionendpoint||_l}return n}s(Cf,"mi");var Sf,bf,_f,iv=O(()=>{bi(),wn(),Sf=";",bf="=",_f={parse:Cf}}),Al,Ef=O(()=>{Al=function(){function t(){}return s(t,"t"),t}()}),kl,xf=O(()=>{Bt(),Ef(),kl=function(t){te(e,t);function e(){return t.call(this)||this}return s(e,"e"),e}(Al)}),If,ov=O(()=>{If=function(){function t(){this.ver=1,this.sampleRate=100,this.tags={}}return s(t,"t"),t}()}),Ml,av=O(()=>{Bt(),ov(),Si(),wn(),bi(),Ml=function(t){te(e,t);function e(n,r,i){var o=t.call(this)||this;return o.name=Lr(n,i)||di,o.data=r,o.time=ni(new Date),o.aiDataContract={time:1,iKey:1,name:1,sampleRate:function(){return o.sampleRate===100?4:1},tags:1,data:1},o}return s(e,"e"),e}(If)}),Fl,Df=O(()=>{Fl=function(){function t(){this.ver=2,this.properties={},this.measurements={}}return s(t,"t"),t}()}),Ei,sv=O(()=>{Bt(),Df(),Si(),bi(),Ei=function(t){te(e,t);function e(n,r,i,o){var a=t.call(this)||this;return a.aiDataContract={ver:1,name:1,properties:0,measurements:0},a.name=Lr(n,r)||di,a.properties=fo(n,i),a.measurements=ho(n,o),a}return s(e,"e"),e.envelopeType="Microsoft.ApplicationInsights.{0}.Event",e.dataType="EventData",e}(Fl)}),Tf,cv=O(()=>{Tf=function(){function t(){}return s(t,"t"),t}()}),Pf,lv=O(()=>{Pf=function(){function t(){this.ver=2,this.exceptions=[],this.properties={},this.measurements={}}return s(t,"t"),t}()}),Rf,uv=O(()=>{Rf=function(){function t(){this.hasFullStack=!0,this.parsedStack=[]}return s(t,"t"),t}()});function Ll(t,e){var n=t;return n&&!en(n)&&(JSON&&JSON.stringify?(n=JSON.stringify(t),e&&(!n||n==="{}")&&(Be(t.toString)?n=t.toString():n=""+t)):n=""+t+" - (Missing JSON.stringify)"),n||""}s(Ll,"Ja");function Af(t,e){var n=t;return t&&(n=t[zs]||t[Ul]||"",n&&!en(n)&&(n=Ll(n,!0)),t.filename&&(n=n+" @"+(t.filename||"")+":"+(t.lineno||"?")+":"+(t.colno||"?"))),e&&e!=="String"&&e!=="Object"&&e!=="Error"&&(n||"").indexOf(e)===-1&&(n=e+": "+n),n||""}s(Af,"Os");function dv(t){return gt(t)?"hasFullStack"in t&&"typeName"in t:!1}s(dv,"pl");function fv(t){return gt(t)?"ver"in t&&"exceptions"in t&&"properties"in t:!1}s(fv,"dl");function kf(t){return t&&t.src&&en(t.src)&&t.obj&&vr(t.obj)}s(kf,"Ls");function sa(t){var e=t||"";en(e)||(en(e[ri])?e=e[ri]:e=""+e);var n=e.split(`
`);return{src:e,obj:n}}s(sa,"Lr");function hv(t){for(var e=[],n=t.split(`
`),r=0;r<n.length;r++){var i=n[r];n[r+1]&&(i+="@"+n[r+1],r++),e.push(i)}return{src:t,obj:e}}s(hv,"gl");function Mf(t){var e=null;if(t)try{if(t[ri])e=sa(t[ri]);else if(t[Fo]&&t[Fo][ri])e=sa(t[Fo][ri]);else if(t.exception&&t.exception[ri])e=sa(t.exception[ri]);else if(kf(t))e=t;else if(kf(t[$s]))e=t[$s];else if(window.opera&&t[zs])e=hv(t.message);else if(en(t))e=sa(t);else{var n=t[zs]||t[Ul]||"";en(t[Ol])&&(n&&(n+=`
`),n+=" from "+t[Ol]),n&&(e=sa(n))}}catch(r){e=sa(r)}return e||{src:"",obj:null}}s(Mf,"Bs");function gv(t){var e="";return t&&(t.obj?vn(t.obj,function(n){e+=n+`
`}):e=t.src||""),e}s(gv,"vl");function pv(t){var e,n=t.obj;if(n&&n.length>0){e=[];var r=0,i=0;vn(n,function(C){var v=C.toString();if(Vs.regex.test(v)){var m=new Vs(v,r++);i+=m.sizeInBytes,e.push(m)}});var o=32*1024;if(i>o)for(var a=0,c=e.length-1,l=0,u=a,d=c;a<c;){var h=e[a].sizeInBytes,g=e[c].sizeInBytes;if(l+=h+g,l>o){var p=d-u+1;e.splice(u,p);break}u=a,d=c,a++,c--}}return e}s(pv,"ml");function Ws(t){var e="";if(t&&(e=t.typeName||t.name||"",!e))try{var n=/function (.{1,200})\(/,r=n.exec(t.constructor.toString());e=r&&r.length>1?r[1]:""}catch(i){}return e}s(Ws,"xi");function Nl(t){if(t)try{if(!en(t)){var e=Ws(t),n=Ll(t,!1);return(!n||n==="{}")&&(t[Fo]&&(t=t[Fo],e=Ws(t)),n=Ll(t,!0)),n.indexOf(e)!==0&&e!=="String"?e+":"+n:n}}catch(r){}return""+(t||"")}s(Nl,"Ka");var Ff,Fo,ri,$s,Ol,zs,Ul,Or,Hl,Vs,vv=O(()=>{Bt(),cv(),lv(),uv(),Si(),wn(),bi(),Ff="<no_method>",Fo="error",ri="stack",$s="stackDetails",Ol="errorSrc",zs="message",Ul="description",Or=function(t){te(e,t);function e(n,r,i,o,a,c){var l=t.call(this)||this;return l.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0},fv(r)?(l.exceptions=r.exceptions,l.properties=r.properties,l.measurements=r.measurements,r.severityLevel&&(l.severityLevel=r.severityLevel),r.id&&(l.id=r.id),r.problemGroup&&(l.problemGroup=r.problemGroup),l.ver=2,E(r.isManual)||(l.isManual=r.isManual)):(i||(i={}),l.exceptions=[new Hl(n,r,i)],l.properties=fo(n,i),l.measurements=ho(n,o),a&&(l.severityLevel=a),c&&(l.id=c)),l}return s(e,"e"),e.CreateAutoException=function(n,r,i,o,a,c,l,u){var d=Ws(a||c||n);return{message:Af(n,d),url:r,lineNumber:i,columnNumber:o,error:Nl(a||c||n),evt:Nl(c||n),typeName:d,stackDetails:Mf(l||a||c),errorSrc:u}},e.CreateFromInterface=function(n,r,i,o){var a=r.exceptions&&Da(r.exceptions,function(l){return Hl.CreateFromInterface(n,l)}),c=new e(n,zt({},r,{exceptions:a}),i,o);return c},e.prototype.toInterface=function(){var n=this,r=n.exceptions,i=n.properties,o=n.measurements,a=n.severityLevel,c=n.ver,l=n.problemGroup,u=n.id,d=n.isManual,h=r instanceof Array&&Da(r,function(g){return g.toInterface()})||void 0;return{ver:"4.0",exceptions:h,severityLevel:a,properties:i,measurements:o,problemGroup:l,id:u,isManual:d}},e.CreateSimpleException=function(n,r,i,o,a,c){return{exceptions:[{hasFullStack:!0,message:n,stack:a,typeName:r}]}},e.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",e.dataType="ExceptionData",e.formatError=Nl,e}(Pf),Hl=function(t){te(e,t);function e(n,r,i){var o=t.call(this)||this;if(o.aiDataContract={id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2},dv(r))o.typeName=r.typeName,o.message=r.message,o[ri]=r[ri],o.parsedStack=r.parsedStack,o.hasFullStack=r.hasFullStack;else{var a=r,c=a&&a.evt;Vr(a)||(a=a[Fo]||c||a),o.typeName=Lr(n,Ws(a))||di,o.message=Cl(n,Af(r||a,o.typeName))||di;var l=r[$s]||Mf(r);o.parsedStack=pv(l),o[ri]=Xd(n,gv(l)),o.hasFullStack=vr(o.parsedStack)&&o.parsedStack.length>0,i&&(i.typeName=i.typeName||o.typeName)}return o}return s(e,"e"),e.prototype.toInterface=function(){var n=this.parsedStack instanceof Array&&Da(this.parsedStack,function(i){return i.toInterface()}),r={id:this.id,outerId:this.outerId,typeName:this.typeName,message:this.message,hasFullStack:this.hasFullStack,stack:this[ri],parsedStack:n||void 0};return r},e.CreateFromInterface=function(n,r){var i=r.parsedStack instanceof Array&&Da(r.parsedStack,function(a){return Vs.CreateFromInterface(a)})||r.parsedStack,o=new e(n,zt({},r,{parsedStack:i}));return o},e}(Rf),Vs=function(t){te(e,t);function e(n,r){var i=t.call(this)||this;if(i.sizeInBytes=0,i.aiDataContract={level:1,method:1,assembly:0,fileName:0,line:0},typeof n=="string"){var o=n;i.level=r,i.method=Ff,i.assembly=mr(o),i.fileName="",i.line=0;var a=o.match(e.regex);a&&a.length>=5&&(i.method=mr(a[2])||i.method,i.fileName=mr(a[4]),i.line=parseInt(a[5])||0)}else i.level=n.level,i.method=n.method,i.assembly=n.assembly,i.fileName=n.fileName,i.line=n.line,i.sizeInBytes=0;return i.sizeInBytes+=i.method.length,i.sizeInBytes+=i.fileName.length,i.sizeInBytes+=i.assembly.length,i.sizeInBytes+=e.baseSize,i.sizeInBytes+=i.level.toString().length,i.sizeInBytes+=i.line.toString().length,i}return s(e,"e"),e.CreateFromInterface=function(n){return new e(n,null)},e.prototype.toInterface=function(){return{level:this.level,method:this.method,assembly:this.assembly,fileName:this.fileName,line:this.line}},e.regex=/^([\s]+at)?[\s]{0,50}([^\@\()]+?)[\s]{0,50}(\@|\()([^\(\n]+):([0-9]+):([0-9]+)(\)?)$/,e.baseSize=58,e}(Tf)}),Lf,mv=O(()=>{Lf=function(){function t(){this.ver=2,this.metrics=[],this.properties={},this.measurements={}}return s(t,"t"),t}()}),Bl,yv=O(()=>{(function(t){t[t.Measurement=0]="Measurement",t[t.Aggregation=1]="Aggregation"})(Bl||(Bl={}))}),Nf,wv=O(()=>{yv(),Nf=function(){function t(){this.kind=Bl.Measurement}return s(t,"t"),t}()}),Of,Cv=O(()=>{Bt(),wv(),Of=function(t){te(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},n}return s(e,"e"),e}(Nf)}),Ni,Sv=O(()=>{Bt(),mv(),Si(),Cv(),bi(),Ni=function(t){te(e,t);function e(n,r,i,o,a,c,l,u){var d=t.call(this)||this;d.aiDataContract={ver:1,metrics:1,properties:0};var h=new Of;return h.count=o>0?o:void 0,h.max=isNaN(c)||c===null?void 0:c,h.min=isNaN(a)||a===null?void 0:a,h.name=Lr(n,r)||di,h.value=i,d.metrics=[h],d.properties=fo(n,l),d.measurements=ho(n,u),d}return s(e,"e"),e.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",e.dataType="MetricData",e}(Lf)}),js,Wl=O(()=>{Bt(),Df(),js=function(t){te(e,t);function e(){var n=t.call(this)||this;return n.ver=2,n.properties={},n.measurements={},n}return s(e,"e"),e}(Fl)}),xi,bv=O(()=>{Bt(),Wl(),Si(),Fs(),bi(),xi=function(t){te(e,t);function e(n,r,i,o,a,c,l){var u=t.call(this)||this;return u.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0},u.id=Jd(n,l),u.url=Na(n,i),u.name=Lr(n,r)||di,isNaN(o)||(u.duration=Ji(o)),u.properties=fo(n,a),u.measurements=ho(n,c),u}return s(e,"e"),e.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",e.dataType="PageviewData",e}(js)}),Uf,_v=O(()=>{Uf=function(){function t(){this.ver=2,this.success=!0,this.properties={},this.measurements={}}return s(t,"t"),t}()}),Oi,Ev=O(()=>{Bt(),Si(),wf(),_v(),Fs(),Oi=function(t){te(e,t);function e(n,r,i,o,a,c,l,u,d,h,g,p){d===void 0&&(d="Ajax");var C=t.call(this)||this;C.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0},C.id=r,C.duration=Ji(a),C.success=c,C.resultCode=l+"",C.type=Lr(n,d);var v=rv(n,i,u,o);return C.data=Na(n,o)||v.data,C.target=Lr(n,v.target),h&&(C.target=C.target+" | "+h),C.name=Lr(n,v.name),C.properties=fo(n,g),C.measurements=ho(n,p),C}return s(e,"e"),e.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",e.dataType="RemoteDependencyData",e}(Uf)}),Hf,xv=O(()=>{Hf=function(){function t(){this.ver=2,this.properties={},this.measurements={}}return s(t,"t"),t}()}),Yi,Iv=O(()=>{Bt(),xv(),Si(),bi(),Yi=function(t){te(e,t);function e(n,r,i,o,a){var c=t.call(this)||this;return c.aiDataContract={ver:1,message:1,severityLevel:0,properties:0},r=r||di,c.message=Cl(n,r),c.properties=fo(n,o),c.measurements=ho(n,a),i&&(c.severityLevel=i),c}return s(e,"e"),e.envelopeType="Microsoft.ApplicationInsights.{0}.Message",e.dataType="MessageData",e}(Hf)}),Bf,Dv=O(()=>{Bt(),Wl(),Bf=function(t){te(e,t);function e(){var n=t.call(this)||this;return n.ver=2,n.properties={},n.measurements={},n}return s(e,"e"),e}(js)}),Zi,Tv=O(()=>{Bt(),Dv(),Si(),bi(),Zi=function(t){te(e,t);function e(n,r,i,o,a,c,l){var u=t.call(this)||this;return u.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0},u.url=Na(n,i),u.name=Lr(n,r)||di,u.properties=fo(n,a),u.measurements=ho(n,c),l&&(u.domProcessing=l.domProcessing,u.duration=l.duration,u.networkConnect=l.networkConnect,u.perfTotal=l.perfTotal,u.receivedResponse=l.receivedResponse,u.sentRequest=l.sentRequest),u}return s(e,"e"),e.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",e.dataType="PageviewPerformanceData",e}(Bf)}),eo,Pv=O(()=>{Bt(),xf(),eo=function(t){te(e,t);function e(n,r){var i=t.call(this)||this;return i.aiDataContract={baseType:1,baseData:1},i.baseType=n,i.baseData=r,i}return s(e,"e"),e}(kl)}),Ha,Rv=O(()=>{(function(t){t[t.Verbose=0]="Verbose",t[t.Information=1]="Information",t[t.Warning=2]="Warning",t[t.Error=3]="Error",t[t.Critical=4]="Critical"})(Ha||(Ha={}))}),Wf,Av=O(()=>{wn(),Wf=function(){function t(){}return s(t,"t"),t.getConfig=function(e,n,r,i){i===void 0&&(i=!1);var o;return r&&e.extensionConfig&&e.extensionConfig[r]&&!E(e.extensionConfig[r][n])?o=e.extensionConfig[r][n]:o=e[n],E(o)?i:o},t}()});function mo(t){var e="ai."+t+".";return function(n){return e+n}}s(mo,"tr");var ca,rr,Ba,Lo,qs,to,yo,la,Ks,$f=O(()=>{Bt(),wn(),ca=mo("application"),rr=mo("device"),Ba=mo("location"),Lo=mo("operation"),qs=mo("session"),to=mo("user"),yo=mo("cloud"),la=mo("internal"),Ks=function(t){te(e,t);function e(){return t.call(this)||this}return s(e,"e"),e}(Ip({applicationVersion:ca("ver"),applicationBuild:ca("build"),applicationTypeId:ca("typeId"),applicationId:ca("applicationId"),applicationLayer:ca("layer"),deviceId:rr("id"),deviceIp:rr("ip"),deviceLanguage:rr("language"),deviceLocale:rr("locale"),deviceModel:rr("model"),deviceFriendlyName:rr("friendlyName"),deviceNetwork:rr("network"),deviceNetworkName:rr("networkName"),deviceOEMName:rr("oemName"),deviceOS:rr("os"),deviceOSVersion:rr("osVersion"),deviceRoleInstance:rr("roleInstance"),deviceRoleName:rr("roleName"),deviceScreenResolution:rr("screenResolution"),deviceType:rr("type"),deviceMachineName:rr("machineName"),deviceVMName:rr("vmName"),deviceBrowser:rr("browser"),deviceBrowserVersion:rr("browserVersion"),locationIp:Ba("ip"),locationCountry:Ba("country"),locationProvince:Ba("province"),locationCity:Ba("city"),operationId:Lo("id"),operationName:Lo("name"),operationParentId:Lo("parentId"),operationRootId:Lo("rootId"),operationSyntheticSource:Lo("syntheticSource"),operationCorrelationVector:Lo("correlationVector"),sessionId:qs("id"),sessionIsFirst:qs("isFirst"),sessionIsNew:qs("isNew"),userAccountAcquisitionDate:to("accountAcquisitionDate"),userAccountId:to("accountId"),userAgent:to("userAgent"),userId:to("id"),userStoreRegion:to("storeRegion"),userAuthUserId:to("authUserId"),userAnonymousUserAcquisitionDate:to("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:to("authUserAcquisitionDate"),cloudName:yo("name"),cloudRole:yo("role"),cloudRoleVer:yo("roleVer"),cloudRoleInstance:yo("roleInstance"),cloudEnvironment:yo("environment"),cloudLocation:yo("location"),cloudDeploymentUnit:yo("deploymentUnit"),internalNodeName:la("nodeName"),internalSdkVersion:la("sdkVersion"),internalAgentVersion:la("agentVersion"),internalSnippet:la("snippet"),internalSdkSrc:la("sdkSrc")}))}),Ui,kv=O(()=>{Si(),wn(),bi(),Ui=function(){function t(){}return s(t,"t"),t.create=function(e,n,r,i,o,a){if(r=Lr(i,r)||di,E(e)||E(n)||E(r))throw Error("Input doesn't contain all required fields");var c={name:r,time:ni(new Date),iKey:"",ext:a||{},tags:[],data:{},baseType:n,baseData:e};return E(o)||fn(o,function(l,u){c.data[l]=u}),c},t}()}),Ur,Wn,Mv=O(()=>{$f(),Ur={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},Wn=new Ks}),ua,Gs,$l,dr=O(()=>{wf(),iv(),Gd(),bi(),xf(),Ef(),av(),sv(),vv(),Sv(),bv(),Wl(),Ev(),Iv(),Tv(),Pv(),Rv(),Av(),$f(),Si(),kv(),Mv(),rf(),Fs(),ef(),uf(),pf(),ua="AppInsightsPropertiesPlugin",Gs="AppInsightsChannelPlugin",$l="ApplicationInsightsAnalytics"}),zf,Fv=O(()=>{dr(),wn(),ht(),zf=function(){function t(e,n,r,i){xn(t,this,function(o){var a=null,c=[],l=!1,u;r&&(u=r.logger);function d(){r&&vn(r.getTransmissionControls(),function(g){vn(g,function(p){return p.flush(!0)})})}s(d,"l");function h(g){c.push(g),a||(a=setInterval(function(){var p=c.slice(0),C=!1;c=[],vn(p,function(v){v()?C=!0:c.push(v)}),c.length===0&&(clearInterval(a),a=null),C&&d()},100))}s(h,"f"),o.trackPageView=function(g,p){var C=g.name;if(E(C)||typeof C!="string"){var v=Mi();C=g.name=v&&v.title||""}var m=g.uri;if(E(m)||typeof m!="string"){var b=Io();m=g.uri=b&&b.href||""}if(!i.isPerformanceTimingSupported()){e.sendPageViewInternal(g,p),d(),u.throwInternal(he.WARNING,Y.NavigationTimingNotSupported,"trackPageView: navigation timing API used for calculation of page duration is not supported in this browser. This page view will be collected without duration and timing info.");return}var w=!1,P,F=i.getPerformanceTiming().navigationStart;F>0&&(P=Nr(F,+new Date),i.shouldCollectDuration(P)||(P=void 0));var A;!E(p)&&!E(p.duration)&&(A=p.duration),(n||!isNaN(A))&&(isNaN(A)&&(p||(p={}),p.duration=P),e.sendPageViewInternal(g,p),d(),w=!0);var Z=6e4;p||(p={}),h(function(){var $e=!1;try{if(i.isPerformanceTimingDataReady()){$e=!0;var fe={name:C,uri:m};i.populatePageViewPerformanceEvent(fe),!fe.isValid&&!w?(p.duration=P,e.sendPageViewInternal(g,p)):(w||(p.duration=fe.durationMs,e.sendPageViewInternal(g,p)),l||(e.sendPageViewPerformanceInternal(fe,p),l=!0))}else F>0&&Nr(F,+new Date)>Z&&($e=!0,w||(p.duration=Z,e.sendPageViewInternal(g,p)))}catch(It){u.throwInternal(he.CRITICAL,Y.TrackPVFailedCalc,"trackPageView failed on page load calculation: "+An(It),{exception:hn(It)})}return $e})}})}return s(t,"t"),t}()}),Vf,jf,Lv=O(()=>{dr(),wn(),Vf=function(){function t(e,n){this.prevPageVisitDataKeyName="prevPageVisitData",this.pageVisitTimeTrackingHandler=n,this._logger=e}return s(t,"t"),t.prototype.trackPreviousPageVisit=function(e,n){try{var r=this.restartPageVisitTimer(e,n);r&&this.pageVisitTimeTrackingHandler(r.pageName,r.pageUrl,r.pageVisitTime)}catch(i){this._logger.warnToConsole("Auto track page visit time failed, metric will not be collected: "+hn(i))}},t.prototype.restartPageVisitTimer=function(e,n){try{var r=this.stopPageVisitTimer();return this.startPageVisitTimer(e,n),r}catch(i){return this._logger.warnToConsole("Call to restart failed: "+hn(i)),null}},t.prototype.startPageVisitTimer=function(e,n){try{if(aa()){Us(this._logger,this.prevPageVisitDataKeyName)!=null&&ki("Cannot call startPageVisit consecutively without first calling stopPageVisit");var r=new jf(e,n),i=Ci().stringify(r);Hs(this._logger,this.prevPageVisitDataKeyName,i)}}catch(o){this._logger.warnToConsole("Call to start failed: "+hn(o))}},t.prototype.stopPageVisitTimer=function(){try{if(aa()){var e=li(),n=Us(this._logger,this.prevPageVisitDataKeyName);if(n&&Qo()){var r=Ci().parse(n);return r.pageVisitTime=e-r.pageVisitStartTime,lf(this._logger,this.prevPageVisitDataKeyName),r}else return null}return null}catch(i){return this._logger.warnToConsole("Stop page visit timer failed: "+hn(i)),null}},t}(),jf=function(){function t(e,n){this.pageVisitStartTime=li(),this.pageName=e,this.pageUrl=n}return s(t,"t"),t}()}),qf,Nv=O(()=>{dr(),wn(),qf=function(){function t(e){this.MAX_DURATION_ALLOWED=36e5,e&&(this._logger=e.logger)}return s(t,"t"),t.prototype.populatePageViewPerformanceEvent=function(e){e.isValid=!1;var n=this.getPerformanceNavigationTiming(),r=this.getPerformanceTiming(),i=0,o=0,a=0,c=0,l=0;(n||r)&&(n?(i=n.duration,o=n.startTime===0?n.connectEnd:Nr(n.startTime,n.connectEnd),a=Nr(n.requestStart,n.responseStart),c=Nr(n.responseStart,n.responseEnd),l=Nr(n.responseEnd,n.loadEventEnd)):(i=Nr(r.navigationStart,r.loadEventEnd),o=Nr(r.navigationStart,r.connectEnd),a=Nr(r.requestStart,r.responseStart),c=Nr(r.responseStart,r.responseEnd),l=Nr(r.responseEnd,r.loadEventEnd)),i===0?this._logger.throwInternal(he.WARNING,Y.ErrorPVCalc,"error calculating page view performance.",{total:i,network:o,request:a,response:c,dom:l}):this.shouldCollectDuration(i,o,a,c,l)?i<Math.floor(o)+Math.floor(a)+Math.floor(c)+Math.floor(l)?this._logger.throwInternal(he.WARNING,Y.ClientPerformanceMathError,"client performance math error.",{total:i,network:o,request:a,response:c,dom:l}):(e.durationMs=i,e.perfTotal=e.duration=Ji(i),e.networkConnect=Ji(o),e.sentRequest=Ji(a),e.receivedResponse=Ji(c),e.domProcessing=Ji(l),e.isValid=!0):this._logger.throwInternal(he.WARNING,Y.InvalidDurationValue,"Invalid page load duration value. Browser perf data won't be sent.",{total:i,network:o,request:a,response:c,dom:l}))},t.prototype.getPerformanceTiming=function(){return this.isPerformanceTimingSupported()?Gi().timing:null},t.prototype.getPerformanceNavigationTiming=function(){return this.isPerformanceNavigationTimingSupported()?Gi().getEntriesByType("navigation")[0]:null},t.prototype.isPerformanceNavigationTimingSupported=function(){var e=Gi();return e&&e.getEntriesByType&&e.getEntriesByType("navigation").length>0},t.prototype.isPerformanceTimingSupported=function(){var e=Gi();return e&&e.timing},t.prototype.isPerformanceTimingDataReady=function(){var e=Gi(),n=e?e.timing:0;return n&&n.domainLookupStart>0&&n.navigationStart>0&&n.responseStart>0&&n.requestStart>0&&n.loadEventEnd>0&&n.responseEnd>0&&n.connectEnd>0&&n.domLoading>0},t.prototype.shouldCollectDuration=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Fi()||{},i=["googlebot","adsbot-google","apis-google","mediapartners-google"],o=r.userAgent,a=!1;if(o)for(var c=0;c<i.length;c++)a=a||o.toLowerCase().indexOf(i[c])!==-1;if(a)return!1;for(var c=0;c<e.length;c++)if(e[c]<0||e[c]>=this.MAX_DURATION_ALLOWED)return!1;return!0},t}()});function Wa(t,e){t&&t.dispatchEvent&&e&&t.dispatchEvent(e)}s(Wa,"Pn");var zl,Qs,Vl,jl,Ov=O(()=>{Bt(),dr(),wn(),Fv(),Lv(),Nv(),ht(),zl="duration",Qs="event",Vl=function(t){te(e,t);function e(){var n=t.call(this)||this;n.identifier=$l,n.priority=180,n.autoRoutePVDelay=500;var r,i,o,a=0,c,l;return xn(e,n,function(u,d){var h=Io(!0);c=h&&h.href||"",u.getCookieMgr=function(){return Zc(u.core)},u.processTelemetry=function(m,b){Jo(u.core,function(){return u.identifier+":processTelemetry"},function(){var w=!1,P=u._telemetryInitializers.length;b=u._getTelCtx(b);for(var F=0;F<P;++F){var A=u._telemetryInitializers[F];if(A)try{if(A.apply(null,[m])===!1){w=!0;break}}catch(Z){b.diagLog().throwInternal(he.CRITICAL,Y.TelemetryInitializerFailed,"One of telemetry initializers failed, telemetry item will not be sent: "+An(Z),{exception:hn(Z)},!0)}}w||u.processNext(m,b)},function(){return{item:m}},!m.sync)},u.trackEvent=function(m,b){try{var w=Ui.create(m,Ei.dataType,Ei.envelopeType,u.diagLog(),b);u.core.track(w)}catch(P){u.diagLog().throwInternal(he.WARNING,Y.TrackTraceFailed,"trackTrace failed, trace will not be collected: "+An(P),{exception:hn(P)})}},u.startTrackEvent=function(m){try{r.start(m)}catch(b){u.diagLog().throwInternal(he.CRITICAL,Y.StartTrackEventFailed,"startTrackEvent failed, event will not be collected: "+An(b),{exception:hn(b)})}},u.stopTrackEvent=function(m,b,w){try{r.stop(m,void 0,b)}catch(P){u.diagLog().throwInternal(he.CRITICAL,Y.StopTrackEventFailed,"stopTrackEvent failed, event will not be collected: "+An(P),{exception:hn(P)})}},u.trackTrace=function(m,b){try{var w=Ui.create(m,Yi.dataType,Yi.envelopeType,u.diagLog(),b);u.core.track(w)}catch(P){u.diagLog().throwInternal(he.WARNING,Y.TrackTraceFailed,"trackTrace failed, trace will not be collected: "+An(P),{exception:hn(P)})}},u.trackMetric=function(m,b){try{var w=Ui.create(m,Ni.dataType,Ni.envelopeType,u.diagLog(),b);u.core.track(w)}catch(P){u.diagLog().throwInternal(he.CRITICAL,Y.TrackMetricFailed,"trackMetric failed, metric will not be collected: "+An(P),{exception:hn(P)})}},u.trackPageView=function(m,b){try{var w=m||{};u._pageViewManager.trackPageView(w,zt({},w.properties,w.measurements,b)),u.config.autoTrackPageVisitTime&&u._pageVisitTimeManager.trackPreviousPageVisit(w.name,w.uri)}catch(P){u.diagLog().throwInternal(he.CRITICAL,Y.TrackPVFailed,"trackPageView failed, page view will not be collected: "+An(P),{exception:hn(P)})}},u.sendPageViewInternal=function(m,b,w){var P=Mi();P&&(m.refUri=m.refUri===void 0?P.referrer:m.refUri);var F=Ui.create(m,xi.dataType,xi.envelopeType,u.diagLog(),b,w);u.core.track(F),a=0},u.sendPageViewPerformanceInternal=function(m,b,w){var P=Ui.create(m,Zi.dataType,Zi.envelopeType,u.diagLog(),b,w);u.core.track(P)},u.trackPageViewPerformance=function(m,b){try{u._pageViewPerformanceManager.populatePageViewPerformanceEvent(m),u.sendPageViewPerformanceInternal(m,b)}catch(w){u.diagLog().throwInternal(he.CRITICAL,Y.TrackPVFailed,"trackPageViewPerformance failed, page view will not be collected: "+An(w),{exception:hn(w)})}},u.startTrackPage=function(m){try{if(typeof m!="string"){var b=Mi();m=b&&b.title||""}i.start(m)}catch(w){u.diagLog().throwInternal(he.CRITICAL,Y.StartTrackFailed,"startTrackPage failed, page view may not be collected: "+An(w),{exception:hn(w)})}},u.stopTrackPage=function(m,b,w,P){try{if(typeof m!="string"){var F=Mi();m=F&&F.title||""}if(typeof b!="string"){var A=Io();b=A&&A.href||""}i.stop(m,b,w,P),u.config.autoTrackPageVisitTime&&u._pageVisitTimeManager.trackPreviousPageVisit(m,b)}catch(Z){u.diagLog().throwInternal(he.CRITICAL,Y.StopTrackFailed,"stopTrackPage failed, page view will not be collected: "+An(Z),{exception:hn(Z)})}},u.sendExceptionInternal=function(m,b,w){var P=m.exception||m.error||new Error(di),F=new Or(u.diagLog(),P,m.properties||b,m.measurements,m.severityLevel,m.id).toInterface(),A=Ui.create(F,Or.dataType,Or.envelopeType,u.diagLog(),b,w);u.core.track(A)},u.trackException=function(m,b){try{u.sendExceptionInternal(m,b)}catch(w){u.diagLog().throwInternal(he.CRITICAL,Y.TrackExceptionFailed,"trackException failed, exception will not be collected: "+An(w),{exception:hn(w)})}},u._onerror=function(m){var b=m&&m.error,w=m&&m.evt;try{if(!w){var P=Ta();P&&(w=P[Qs])}var F=m&&m.url||(Mi()||{}).URL,A=m.errorSrc||"window.onerror@"+F+":"+(m.lineNumber||0)+":"+(m.columnNumber||0),Z={errorSrc:A,url:F,lineNumber:m.lineNumber||0,columnNumber:m.columnNumber||0,message:m.message};nf(m.message,m.url,m.lineNumber,m.columnNumber,m.error)?v(Or.CreateAutoException("Script error: The browser's same-origin policy prevents us from getting the details of this exception. Consider using the 'crossorigin' attribute.",F,m.lineNumber||0,m.columnNumber||0,b,w,null,A),Z):(m.errorSrc||(m.errorSrc=A),u.trackException({exception:m,severityLevel:Ha.Error},Z))}catch(fe){var $e=b?b.name+", "+b.message:"null";u.diagLog().throwInternal(he.CRITICAL,Y.ExceptionWhileLoggingError,"_onError threw exception while logging error, error will not be collected: "+An(fe),{exception:hn(fe),errorString:$e})}},u.addTelemetryInitializer=function(m){u._telemetryInitializers.push(m)},u.initialize=function(m,b,w,P){if(!u.isInitialized()){if(E(b))throw Error("Error initializing");d.initialize(m,b,w,P),u.setInitialized(!1);var F=u._getTelCtx(),A=u.identifier;u.config=F.getExtCfg(A);var Z=e.getDefaultConfig(m);Z!==void 0&&fn(Z,function(pt,Mt){u.config[pt]=F.getConfig(A,pt,Mt),u.config[pt]===void 0&&(u.config[pt]=Mt)}),u.config.isStorageUseDisabled&&of();var $e={instrumentationKey:function(){return m.instrumentationKey},accountId:function(){return u.config.accountId||m.accountId},sessionRenewalMs:function(){return u.config.sessionRenewalMs||m.sessionRenewalMs},sessionExpirationMs:function(){return u.config.sessionExpirationMs||m.sessionExpirationMs},sampleRate:function(){return u.config.samplingPercentage||m.samplingPercentage},sdkExtension:function(){return u.config.sdkExtension||m.sdkExtension},isBrowserLinkTrackingEnabled:function(){return u.config.isBrowserLinkTrackingEnabled||m.isBrowserLinkTrackingEnabled},appId:function(){return u.config.appId||m.appId}};u._pageViewPerformanceManager=new qf(u.core),u._pageViewManager=new zf(n,u.config.overridePageViewDuration,u.core,u._pageViewPerformanceManager),u._pageVisitTimeManager=new Vf(u.diagLog(),function(pt,Mt,Vt){return g(pt,Mt,Vt)}),u._telemetryInitializers=u._telemetryInitializers||[],p($e),r=new jl(u.diagLog(),"trackEvent"),r.action=function(pt,Mt,Vt,an){an||(an={}),an[zl]=Vt.toString(),u.trackEvent({name:pt,properties:an})},i=new jl(u.diagLog(),"trackPageView"),i.action=function(pt,Mt,Vt,an,Cn){E(an)&&(an={}),an[zl]=Vt.toString();var Hn={name:pt,uri:Mt,properties:an,measurements:Cn};u.sendPageViewInternal(Hn,an)};var fe=Ta(),It=Ap(),kt=Io(!0),Pt=n;if(u.config.disableExceptionTracking===!1&&!u.config.autoExceptionInstrumented&&fe){var st="onerror",Mn=fe[st];fe.onerror=function(pt,Mt,Vt,an,Cn){var Hn=fe[Qs],gi=Mn&&Mn(pt,Mt,Vt,an,Cn);return gi!==!0&&Pt._onerror(Or.CreateAutoException(pt,Mt,Vt,an,Cn,Hn)),gi},u.config.autoExceptionInstrumented=!0}if(u.config.disableExceptionTracking===!1&&u.config.enableUnhandledPromiseRejectionTracking===!0&&!u.config.autoUnhandledPromiseInstrumented&&fe){var q="onunhandledrejection",Xe=fe[q];fe[q]=function(pt){var Mt=fe[Qs],Vt=Xe&&Xe.call(fe,pt);return Vt!==!0&&Pt._onerror(Or.CreateAutoException(pt.reason.toString(),kt?kt.href:"",0,0,pt,Mt)),Vt},u.config.autoUnhandledPromiseInstrumented=!0}if(u.config.enableAutoRouteTracking===!0&&It&&Be(It.pushState)&&Be(It.replaceState)&&fe&&typeof Event!="undefined"){var vt=n;vn(w,function(pt){pt.identifier===ua&&(o=pt)}),It.pushState=function(pt){return function(){var Mt=pt.apply(this,arguments);return Wa(fe,ia(vt.config.namePrefix+"pushState")),Wa(fe,ia(vt.config.namePrefix+"locationchange")),Mt}}(It.pushState),It.replaceState=function(pt){return function(){var Mt=pt.apply(this,arguments);return Wa(fe,ia(vt.config.namePrefix+"replaceState")),Wa(fe,ia(vt.config.namePrefix+"locationchange")),Mt}}(It.replaceState),fe.addEventListener&&(fe.addEventListener(vt.config.namePrefix+"popstate",function(){Wa(fe,ia(vt.config.namePrefix+"locationchange"))}),fe.addEventListener(vt.config.namePrefix+"locationchange",function(){if(o&&o.context&&o.context.telemetryTrace){o.context.telemetryTrace.traceID=Li();var pt="_unknown_";kt&&kt.pathname&&(pt=kt.pathname+(kt.hash||"")),o.context.telemetryTrace.name=pt}l&&(c=l),l=kt&&kt.href||"",setTimeout(function(Mt){vt.trackPageView({refUri:Mt,properties:{duration:0}})}.bind(n,c),vt.autoRoutePVDelay)}))}u.setInitialized(!0)}};function g(m,b,w){var P={PageName:m,PageUrl:b};u.trackMetric({name:"PageVisitTime",average:w,max:w,min:w,sampleCount:1},P)}s(g,"g");function p(m){if(!m.isBrowserLinkTrackingEnabled()){var b=["/browserLinkSignalR/","/__browserLink/"],w=s(function(P){if(P.baseType===Oi.dataType){var F=P.baseData;if(F){for(var A=0;A<b.length;A++)if(F.target&&F.target.indexOf(b[A])>=0)return!1}}return!0},"y");C(w)}}s(p,"C");function C(m){u._telemetryInitializers.push(m)}s(C,"E");function v(m,b){var w=Ui.create(m,Or.dataType,Or.envelopeType,u.diagLog(),b);u.core.track(w)}s(v,"b")}),n}return s(e,"e"),e.getDefaultConfig=function(n){return n||(n={}),n.sessionRenewalMs=30*60*1e3,n.sessionExpirationMs=24*60*60*1e3,n.disableExceptionTracking=Un(n.disableExceptionTracking),n.autoTrackPageVisitTime=Un(n.autoTrackPageVisitTime),n.overridePageViewDuration=Un(n.overridePageViewDuration),n.enableUnhandledPromiseRejectionTracking=Un(n.enableUnhandledPromiseRejectionTracking),(isNaN(n.samplingPercentage)||n.samplingPercentage<=0||n.samplingPercentage>=100)&&(n.samplingPercentage=100),n.isStorageUseDisabled=Un(n.isStorageUseDisabled),n.isBrowserLinkTrackingEnabled=Un(n.isBrowserLinkTrackingEnabled),n.enableAutoRouteTracking=Un(n.enableAutoRouteTracking),n.namePrefix=n.namePrefix||"",n.enableDebug=Un(n.enableDebug),n.disableFlushOnBeforeUnload=Un(n.disableFlushOnBeforeUnload),n.disableFlushOnUnload=Un(n.disableFlushOnUnload,n.disableFlushOnBeforeUnload),n},e.Version="2.6.4",e}(Po),jl=function(){function t(e,n){var r=this,i={};r.start=function(o){typeof i[o]!="undefined"&&e.throwInternal(he.WARNING,Y.StartCalledMoreThanOnce,"start was called more than once for this event without calling stop.",{name:o,key:o},!0),i[o]=+new Date},r.stop=function(o,a,c,l){var u=i[o];if(isNaN(u))e.throwInternal(he.WARNING,Y.StopCalledWithoutStart,"stop was called without a corresponding start.",{name:o,key:o},!0);else{var d=+new Date,h=Nr(u,d);r.action(o,a,h,c,l)}delete i[o],i[o]=void 0}}return s(t,"t"),t}()}),Kf=O(()=>{Ov()}),Gf,Qf,Uv=O(()=>{dr(),wn(),ht(),Gf=function(){function t(e){var n=[];xn(t,this,function(r){r.enqueue=function(i){n.push(i)},r.count=function(){return n.length},r.clear=function(){n.length=0},r.getItems=function(){return n.slice(0)},r.batchPayloads=function(i){if(i&&i.length>0){var o=e.emitLineDelimitedJson()?i.join(`
`):"["+i.join(",")+"]";return o}return null},r.markAsSent=function(i){r.clear()},r.clearSent=function(i){}})}return s(t,"t"),t}(),Qf=function(){function t(e,n){var r=!1,i;xn(t,this,function(o){var a=u(t.BUFFER_KEY),c=u(t.SENT_BUFFER_KEY);i=a.concat(c),i.length>t.MAX_BUFFER_SIZE&&(i.length=t.MAX_BUFFER_SIZE),d(t.SENT_BUFFER_KEY,[]),d(t.BUFFER_KEY,i),o.enqueue=function(h){if(i.length>=t.MAX_BUFFER_SIZE){r||(e.throwInternal(he.WARNING,Y.SessionStorageBufferFull,"Maximum buffer size reached: "+i.length,!0),r=!0);return}i.push(h),d(t.BUFFER_KEY,i)},o.count=function(){return i.length},o.clear=function(){i=[],d(t.BUFFER_KEY,[]),d(t.SENT_BUFFER_KEY,[]),r=!1},o.getItems=function(){return i.slice(0)},o.batchPayloads=function(h){if(h&&h.length>0){var g=n.emitLineDelimitedJson()?h.join(`
`):"["+h.join(",")+"]";return g}return null},o.markAsSent=function(h){i=l(h,i),d(t.BUFFER_KEY,i);var g=u(t.SENT_BUFFER_KEY);g instanceof Array&&h instanceof Array&&(g=g.concat(h),g.length>t.MAX_BUFFER_SIZE&&(e.throwInternal(he.CRITICAL,Y.SessionStorageBufferFull,"Sent buffer reached its maximum size: "+g.length,!0),g.length=t.MAX_BUFFER_SIZE),d(t.SENT_BUFFER_KEY,g))},o.clearSent=function(h){var g=u(t.SENT_BUFFER_KEY);g=l(h,g),d(t.SENT_BUFFER_KEY,g)};function l(h,g){var p=[];return vn(g,function(C){!Be(C)&&Ia(h,C)===-1&&p.push(C)}),p}s(l,"s");function u(h){var g=h;try{g=n.namePrefix&&n.namePrefix()?n.namePrefix()+"_"+g:g;var p=Us(e,g);if(p){var C=Ci().parse(p);if(en(C)&&(C=Ci().parse(C)),C&&vr(C))return C}}catch(v){e.throwInternal(he.CRITICAL,Y.FailedToRestoreStorageBuffer," storage key: "+g+", "+An(v),{exception:hn(v)})}return[]}s(u,"c");function d(h,g){var p=h;try{p=n.namePrefix&&n.namePrefix()?n.namePrefix()+"_"+p:p;var C=JSON.stringify(g);Hs(e,p,C)}catch(v){Hs(e,p,JSON.stringify([])),e.throwInternal(he.WARNING,Y.FailedToSetStorageBuffer," storage key: "+p+", "+An(v)+". Buffer cleared",{exception:hn(v)})}}s(d,"l")})}return s(t,"t"),t.BUFFER_KEY="AI_buffer",t.SENT_BUFFER_KEY="AI_sentBuffer",t.MAX_BUFFER_SIZE=2e3,t}()});function ir(t,e,n){return _n(t,e,n,Mc)}s(ir,"xe");var Xs,Kn,fr,ql,Yn,Xf,Kl,Jf,Yf,Zf,eh,th,Hv=O(()=>{Bt(),dr(),wn(),Xs="baseType",Kn="baseData",fr="properties",ql="true",Yn=function(){function t(){}return s(t,"t"),t.extractPropsAndMeasurements=function(e,n,r){E(e)||fn(e,function(i,o){Ko(o)?r[i]=o:en(o)?n[i]=o:Qo()&&(n[i]=Ci().stringify(o))})},t.createEnvelope=function(e,n,r,i){var o=new Ml(e,i,n);ir(o,"sampleRate",r[Ls]),(r[Kn]||{}).startTime&&(o.time=ni(r[Kn].startTime)),o.iKey=r.iKey;var a=r.iKey.replace(/-/g,"");return o.name=o.name.replace("{0}",a),t.extractPartAExtensions(r,o),r.tags=r.tags||[],rd(o)},t.extractPartAExtensions=function(e,n){var r=n.tags=n.tags||{},i=e.ext=e.ext||{},o=e.tags=e.tags||[],a=i.user;a&&(ir(r,Wn.userAuthUserId,a.authId),ir(r,Wn.userId,a.id||a.localId));var c=i.app;c&&ir(r,Wn.sessionId,c.sesId);var l=i.device;l&&(ir(r,Wn.deviceId,l.id||l.localId),ir(r,Wn.deviceType,l.deviceClass),ir(r,Wn.deviceIp,l.ip),ir(r,Wn.deviceModel,l.model),ir(r,Wn.deviceType,l.deviceType));var u=e.ext.web;if(u){ir(r,Wn.deviceLanguage,u.browserLang),ir(r,Wn.deviceBrowserVersion,u.browserVer),ir(r,Wn.deviceBrowser,u.browser);var d=n.data=n.data||{},h=d[Kn]=d[Kn]||{},g=h[fr]=h[fr]||{};ir(g,"domain",u.domain),ir(g,"isManual",u.isManual?ql:null),ir(g,"screenRes",u.screenRes),ir(g,"userConsent",u.userConsent?ql:null)}var p=i.os;p&&ir(r,Wn.deviceOS,p.name);var C=i.trace;C&&(ir(r,Wn.operationParentId,C.parentID),ir(r,Wn.operationName,C.name),ir(r,Wn.operationId,C.traceID));for(var v={},m=o.length-1;m>=0;m--){var b=o[m];fn(b,function(P,F){v[P]=F}),o.splice(m,1)}fn(o,function(P,F){v[P]=F});var w=zt({},r,v);w[Wn.internalSdkVersion]||(w[Wn.internalSdkVersion]="javascript:"+t.Version),n.tags=rd(w)},t.prototype.Init=function(e,n){this._logger=e,E(n[Kn])&&this._logger.throwInternal(he.CRITICAL,Y.TelemetryEnvelopeInvalid,"telemetryItem.baseData cannot be null.")},t.Version="2.6.4",t}(),Xf=function(t){te(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return s(e,"e"),e.prototype.Create=function(n,r){t.prototype.Init.call(this,n,r);var i=r[Kn].measurements||{},o=r[Kn][fr]||{};Yn.extractPropsAndMeasurements(r.data,o,i);var a=r[Kn];if(E(a))return n.warnToConsole("Invalid input for dependency data"),null;var c=a[fr]&&a[fr][Ns]?a[fr][Ns]:"GET",l=new Oi(n,a.id,a.target,a.name,a.duration,a.success,a.responseCode,c,a.type,a.correlationContext,o,i),u=new eo(Oi.dataType,l);return Yn.createEnvelope(n,Oi.envelopeType,r,u)},e.DependencyEnvelopeCreator=new e,e}(Yn),Kl=function(t){te(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return s(e,"e"),e.prototype.Create=function(n,r){t.prototype.Init.call(this,n,r);var i={},o={};r[Xs]!==Ei.dataType&&(i.baseTypeSource=r[Xs]),r[Xs]===Ei.dataType?(i=r[Kn][fr]||{},o=r[Kn].measurements||{}):r[Kn]&&Yn.extractPropsAndMeasurements(r[Kn],i,o),Yn.extractPropsAndMeasurements(r.data,i,o);var a=r[Kn].name,c=new Ei(n,a,i,o),l=new eo(Ei.dataType,c);return Yn.createEnvelope(n,Ei.envelopeType,r,l)},e.EventEnvelopeCreator=new e,e}(Yn),Jf=function(t){te(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return s(e,"e"),e.prototype.Create=function(n,r){t.prototype.Init.call(this,n,r);var i=r[Kn].measurements||{},o=r[Kn][fr]||{};Yn.extractPropsAndMeasurements(r.data,o,i);var a=r[Kn],c=Or.CreateFromInterface(n,a,o,i),l=new eo(Or.dataType,c);return Yn.createEnvelope(n,Or.envelopeType,r,l)},e.ExceptionEnvelopeCreator=new e,e}(Yn),Yf=function(t){te(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return s(e,"e"),e.prototype.Create=function(n,r){t.prototype.Init.call(this,n,r);var i=r[Kn],o=i[fr]||{},a=i.measurements||{};Yn.extractPropsAndMeasurements(r.data,o,a);var c=new Ni(n,i.name,i.average,i.sampleCount,i.min,i.max,o,a),l=new eo(Ni.dataType,c);return Yn.createEnvelope(n,Ni.envelopeType,r,l)},e.MetricEnvelopeCreator=new e,e}(Yn),Zf=function(t){te(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return s(e,"e"),e.prototype.Create=function(n,r){t.prototype.Init.call(this,n,r);var i="duration",o,a=r[Kn];!E(a)&&!E(a[fr])&&!E(a[fr][i])?(o=a[fr][i],delete a[fr][i]):!E(r.data)&&!E(r.data[i])&&(o=r.data[i],delete r.data[i]);var c=r[Kn],l;((r.ext||{}).trace||{}).traceID&&(l=r.ext.trace.traceID);var u=c.id||l,d=c.name,h=c.uri,g=c[fr]||{},p=c.measurements||{};if(E(c.refUri)||(g.refUri=c.refUri),E(c.pageType)||(g.pageType=c.pageType),E(c.isLoggedIn)||(g.isLoggedIn=c.isLoggedIn.toString()),!E(c[fr])){var C=c[fr];fn(C,function(b,w){g[b]=w})}Yn.extractPropsAndMeasurements(r.data,g,p);var v=new xi(n,d,h,o,g,p,u),m=new eo(xi.dataType,v);return Yn.createEnvelope(n,xi.envelopeType,r,m)},e.PageViewEnvelopeCreator=new e,e}(Yn),eh=function(t){te(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return s(e,"e"),e.prototype.Create=function(n,r){t.prototype.Init.call(this,n,r);var i=r[Kn],o=i.name,a=i.uri||i.url,c=i[fr]||{},l=i.measurements||{};Yn.extractPropsAndMeasurements(r.data,c,l);var u=new Zi(n,o,a,void 0,c,l,i),d=new eo(Zi.dataType,u);return Yn.createEnvelope(n,Zi.envelopeType,r,d)},e.PageViewPerformanceEnvelopeCreator=new e,e}(Yn),th=function(t){te(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return s(e,"e"),e.prototype.Create=function(n,r){t.prototype.Init.call(this,n,r);var i=r[Kn].message,o=r[Kn].severityLevel,a=r[Kn][fr]||{},c=r[Kn].measurements||{};Yn.extractPropsAndMeasurements(r.data,a,c);var l=new Yi(n,i,o,a,c),u=new eo(Yi.dataType,l);return Yn.createEnvelope(n,Yi.envelopeType,r,u)},e.TraceEnvelopeCreator=new e,e}(Yn)}),nh,Bv=O(()=>{wn(),ht(),nh=function(){function t(e){xn(t,this,function(n){n.serialize=function(a){var c=r(a,"root");try{return Ci().stringify(c)}catch(l){e.throwInternal(he.CRITICAL,Y.CannotSerializeObject,l&&Be(l.toString)?l.toString():"Error serializing object",null,!0)}};function r(a,c){var l="__aiCircularRefCheck",u={};if(!a)return e.throwInternal(he.CRITICAL,Y.CannotSerializeObject,"cannot serialize object because it is null or undefined",{name:c},!0),u;if(a[l])return e.throwInternal(he.WARNING,Y.CircularReferenceDetected,"Circular reference detected while serializing object",{name:c},!0),u;if(!a.aiDataContract){if(c==="measurements")u=o(a,"number",c);else if(c==="properties")u=o(a,"string",c);else if(c==="tags")u=o(a,"string",c);else if(vr(a))u=i(a,c);else{e.throwInternal(he.WARNING,Y.CannotSerializeObjectNonSerializable,"Attempting to serialize an object which does not implement ISerializable",{name:c},!0);try{Ci().stringify(a),u=a}catch(d){e.throwInternal(he.CRITICAL,Y.CannotSerializeObject,d&&Be(d.toString)?d.toString():"Error serializing object",null,!0)}}return u}return a[l]=!0,fn(a.aiDataContract,function(d,h){var g=Be(h)?h()&1:h&1,p=Be(h)?h()&4:h&4,C=h&2,v=a[d]!==void 0,m=gt(a[d])&&a[d]!==null;if(g&&!v&&!C)e.throwInternal(he.CRITICAL,Y.MissingRequiredFieldSpecification,"Missing required field specification. The field is required but not present on source",{field:d,name:c});else if(!p){var b=void 0;m?C?b=i(a[d],d):b=r(a[d],d):b=a[d],b!==void 0&&(u[d]=b)}}),delete a[l],u}s(r,"n");function i(a,c){var l;if(a)if(!vr(a))e.throwInternal(he.CRITICAL,Y.ItemNotInArray,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:c},!0);else{l=[];for(var u=0;u<a.length;u++){var d=a[u],h=r(d,c+"["+u+"]");l.push(h)}}return l}s(i,"i");function o(a,c,l){var u;return a&&(u={},fn(a,function(d,h){if(c==="string")h===void 0?u[d]="undefined":h===null?u[d]="null":h.toString?u[d]=h.toString():u[d]="invalid field: toString() is not defined.";else if(c==="number")if(h===void 0)u[d]="undefined";else if(h===null)u[d]="null";else{var g=parseFloat(h);isNaN(g)?u[d]="NaN":u[d]=g}else u[d]="invalid field: "+l+" is of unknown type.",e.throwInternal(he.CRITICAL,u[d],null,!0)})),u}s(o,"a")})}return s(t,"t"),t}()}),rh,Gl,Wv=O(()=>{wn(),ht(),rh=function(){function t(){var e=Ta(),n=Mi(),r=!1,i=!0;xn(t,this,function(o){try{if(e&&La.Attach(e,"online",l)&&(La.Attach(e,"offline",u),r=!0),n){var a=n.body||n;S(a.ononline)||(a.ononline=l,a.onoffline=u,r=!0)}if(r){var c=Fi();c&&!E(c.onLine)&&(i=c.onLine)}}catch(d){r=!1}o.isListening=r,o.isOnline=function(){var d=!0,h=Fi();return r?d=i:h&&!E(h.onLine)&&(d=h.onLine),d},o.isOffline=function(){return!o.isOnline()};function l(){i=!0}s(l,"s");function u(){i=!1}s(u,"c")})}return s(t,"t"),t.Offline=new t,t}(),Gl=rh.Offline}),ih,$v=O(()=>{ih=function(){function t(){}return s(t,"t"),t.prototype.getHashCodeScore=function(e){var n=this.getHashCode(e)/t.INT_MAX_VALUE;return n*100},t.prototype.getHashCode=function(e){if(e==="")return 0;for(;e.length<t.MIN_INPUT_LENGTH;)e=e.concat(e);for(var n=5381,r=0;r<e.length;++r)n=(n<<5)+n+e.charCodeAt(r),n=n&n;return Math.abs(n)},t.INT_MAX_VALUE=2147483647,t.MIN_INPUT_LENGTH=8,t}()}),oh,zv=O(()=>{$v(),dr(),oh=function(){function t(){this.hashCodeGeneragor=new ih,this.keys=new Ks}return s(t,"t"),t.prototype.getSamplingScore=function(e){var n=0;return e.tags&&e.tags[this.keys.userId]?n=this.hashCodeGeneragor.getHashCodeScore(e.tags[this.keys.userId]):e.ext&&e.ext.user&&e.ext.user.id?n=this.hashCodeGeneragor.getHashCodeScore(e.ext.user.id):e.tags&&e.tags[this.keys.operationId]?n=this.hashCodeGeneragor.getHashCodeScore(e.tags[this.keys.operationId]):e.ext&&e.ext.telemetryTrace&&e.ext.telemetryTrace.traceID?n=this.hashCodeGeneragor.getHashCodeScore(e.ext.telemetryTrace.traceID):n=Math.random()*100,n},t}()}),ah,Vv=O(()=>{zv(),dr(),wn(),ah=function(){function t(e,n){this.INT_MAX_VALUE=2147483647,this._logger=n||bs(null),(e>100||e<0)&&(this._logger.throwInternal(he.WARNING,Y.SampleRateOutOfRange,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:e},!0),e=100),this.sampleRate=e,this.samplingScoreGenerator=new oh}return s(t,"t"),t.prototype.isSampledIn=function(e){var n=this.sampleRate,r=!1;return n==null||n>=100||e.baseType===Ni.dataType?!0:(r=this.samplingScoreGenerator.getSamplingScore(e)<n,r)},t}()});function Js(t){try{return t.responseText}catch(e){}return null}s(Js,"Ti");var Ql,jv=O(()=>{Bt(),Uv(),Hv(),Bv(),dr(),wn(),Wv(),Vv(),ht(),Ql=function(t){te(e,t);function e(){var n=t.call(this)||this;n.priority=1001,n.identifier=Gs,n._XMLHttpRequestSupported=!1;var r,i,o,a,c,l,u={};return xn(e,n,function(d,h){function g(){ki("Method not implemented.")}s(g,"g"),d.pause=g,d.resume=g,d.flush=function(){try{d.triggerSend(!0,null,1)}catch(q){d.diagLog().throwInternal(he.CRITICAL,Y.FlushFailed,"flush failed, telemetry will not be collected: "+An(q),{exception:hn(q)})}},d.onunloadFlush=function(){if((d._senderConfig.onunloadDisableBeacon()===!1||d._senderConfig.isBeaconApiDisabled()===!1)&&bl())try{d.triggerSend(!0,m,2)}catch(q){d.diagLog().throwInternal(he.CRITICAL,Y.FailedToSendQueuedTelemetry,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+An(q),{exception:hn(q)})}else d.flush()},d.teardown=g,d.addHeader=function(q,Xe){u[q]=Xe},d.initialize=function(q,Xe,vt,pt){h.initialize(q,Xe,vt,pt);var Mt=d._getTelCtx(),Vt=d.identifier;c=new nh(Xe.logger),r=0,i=null,o=0,d._sender=null,l=0;var an=e._getDefaultAppInsightsChannelConfig();if(d._senderConfig=e._getEmptyAppInsightsChannelConfig(),fn(an,function(Ce,ft){d._senderConfig[Ce]=function(){return Mt.getConfig(Vt,Ce,ft())}}),d._buffer=d._senderConfig.enableSessionStorageBuffer()&&aa()?new Qf(d.diagLog(),d._senderConfig):new Gf(d._senderConfig),d._sample=new ah(d._senderConfig.samplingPercentage(),d.diagLog()),Mn(q)||d.diagLog().throwInternal(he.CRITICAL,Y.InvalidInstrumentationKey,"Invalid Instrumentation key "+q.instrumentationKey),!Bs(d._senderConfig.endpointUrl())&&d._senderConfig.customHeaders()&&d._senderConfig.customHeaders().length>0&&vn(d._senderConfig.customHeaders(),function(Ce){n.addHeader(Ce.header,Ce.value)}),!d._senderConfig.isBeaconApiDisabled()&&bl())d._sender=m;else{var Cn=xr("XMLHttpRequest");if(Cn){var Hn=new Cn;"withCredentials"in Hn?(d._sender=b,d._XMLHttpRequestSupported=!0):typeof XDomainRequest!==J&&(d._sender=It)}else{var gi=xr("fetch");gi&&(d._sender=w)}}},d.processTelemetry=function(q,Xe){Xe=d._getTelCtx(Xe);try{if(d._senderConfig.disableTelemetry())return;if(!q){Xe.diagLog().throwInternal(he.CRITICAL,Y.CannotSendEmptyTelemetry,"Cannot send empty telemetry");return}if(q.baseData&&!q.baseType){Xe.diagLog().throwInternal(he.CRITICAL,Y.InvalidEvent,"Cannot send telemetry without baseData and baseType");return}if(q.baseType||(q.baseType="EventData"),!d._sender){Xe.diagLog().throwInternal(he.CRITICAL,Y.SenderNotInitialized,"Sender was not initialized");return}if(p(q))q[Ls]=d._sample.sampleRate;else{Xe.diagLog().throwInternal(he.WARNING,Y.TelemetrySampledAndNotSent,"Telemetry item was sampled out and not sent",{SampleRate:d._sample.sampleRate});return}var vt=e.constructEnvelope(q,d._senderConfig.instrumentationKey(),Xe.diagLog());if(!vt){Xe.diagLog().throwInternal(he.CRITICAL,Y.CreateEnvelopeError,"Unable to create an AppInsights envelope");return}var pt=!1;if(q.tags&&q.tags[oa]&&(vn(q.tags[oa],function(Cn){try{Cn&&Cn(vt)===!1&&(pt=!0,Xe.diagLog().warnToConsole("Telemetry processor check returns false"))}catch(Hn){Xe.diagLog().throwInternal(he.CRITICAL,Y.TelemetryInitializerFailed,"One of telemetry initializers failed, telemetry item will not be sent: "+An(Hn),{exception:hn(Hn)},!0)}}),delete q.tags[oa]),pt)return;var Mt=c.serialize(vt),Vt=d._buffer.getItems(),an=d._buffer.batchPayloads(Vt);an&&an.length+Mt.length>d._senderConfig.maxBatchSizeInBytes()&&d.triggerSend(!0,null,10),d._buffer.enqueue(Mt),Z()}catch(Cn){Xe.diagLog().throwInternal(he.WARNING,Y.FailedAddingTelemetryToBuffer,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+An(Cn),{exception:hn(Cn)})}d.processNext(q,Xe)},d._xhrReadyStateChange=function(q,Xe,vt){q.readyState===4&&C(q.status,Xe,q.responseURL,vt,fe(q),Js(q)||q.response)},d.triggerSend=function(q,Xe,vt){q===void 0&&(q=!0);try{if(d._senderConfig.disableTelemetry())d._buffer.clear();else{if(d._buffer.count()>0){var pt=d._buffer.getItems();st(vt||0,q),Xe?Xe.call(n,pt,q):d._sender(pt,q)}o=+new Date}clearTimeout(a),a=null,i=null}catch(Vt){var Mt=Bc();(!Mt||Mt>9)&&d.diagLog().throwInternal(he.CRITICAL,Y.TransmissionFailed,"Telemetry transmission failed, some telemetry will be lost: "+An(Vt),{exception:hn(Vt)})}},d._onError=function(q,Xe,vt){d.diagLog().throwInternal(he.WARNING,Y.OnError,"Failed to send telemetry.",{message:Xe}),d._buffer.clearSent(q)},d._onPartialSuccess=function(q,Xe){for(var vt=[],pt=[],Mt=Xe.errors.reverse(),Vt=0,an=Mt;Vt<an.length;Vt++){var Cn=an[Vt],Hn=q.splice(Cn.index,1)[0];$e(Cn.statusCode)?pt.push(Hn):vt.push(Hn)}q.length>0&&d._onSuccess(q,Xe.itemsAccepted),vt.length>0&&d._onError(vt,fe(null,["partial success",Xe.itemsAccepted,"of",Xe.itemsReceived].join(" "))),pt.length>0&&(F(pt),d.diagLog().throwInternal(he.WARNING,Y.TransmissionFailed,"Partial success. Delivered: "+q.length+", Failed: "+vt.length+". Will retry to send "+pt.length+" our of "+Xe.itemsReceived+" items"))},d._onSuccess=function(q,Xe){d._buffer.clearSent(q)},d._xdrOnLoad=function(q,Xe){var vt=Js(q);if(q&&(vt+""=="200"||vt===""))r=0,d._onSuccess(Xe,0);else{var pt=P(vt);pt&&pt.itemsReceived&&pt.itemsReceived>pt.itemsAccepted&&!d._senderConfig.isRetryDisabled()?d._onPartialSuccess(Xe,pt):d._onError(Xe,kt(q))}};function p(q){return d._sample.isSampledIn(q)}s(p,"C");function C(q,Xe,vt,pt,Mt,Vt){var an=null;if(d._appId||(an=P(Vt),an&&an.appId&&(d._appId=an.appId)),(q<200||q>=300)&&q!==0){if((q===301||q===307||q===308)&&!v(vt)){d._onError(Xe,Mt);return}!d._senderConfig.isRetryDisabled()&&$e(q)?(F(Xe),d.diagLog().throwInternal(he.WARNING,Y.TransmissionFailed,". Response code "+q+". Will retry to send "+Xe.length+" items.")):d._onError(Xe,Mt)}else if(Gl.isOffline()){if(!d._senderConfig.isRetryDisabled()){var Cn=10;F(Xe,Cn),d.diagLog().throwInternal(he.WARNING,Y.TransmissionFailed,". Offline - Response Code: "+q+". Offline status: "+Gl.isOffline()+". Will retry to send "+Xe.length+" items.")}}else v(vt),q===206?(an||(an=P(Vt)),an&&!d._senderConfig.isRetryDisabled()?d._onPartialSuccess(Xe,an):d._onError(Xe,Mt)):(r=0,d._onSuccess(Xe,pt))}s(C,"E");function v(q){return l>=10?!1:!E(q)&&q!==""&&q!==d._senderConfig.endpointUrl()?(d._senderConfig.endpointUrl=function(){return q},++l,!0):!1}s(v,"b");function m(q,Xe){var vt=d._senderConfig.endpointUrl(),pt=d._buffer.batchPayloads(q),Mt=new Blob([pt],{type:"text/plain;charset=UTF-8"}),Vt=Fi().sendBeacon(vt,Mt);Vt?(d._buffer.markAsSent(q),d._onSuccess(q,q.length)):(b(q,!0),d.diagLog().throwInternal(he.WARNING,Y.TransmissionFailed,". Failed to send telemetry with Beacon API, retried with xhrSender."))}s(m,"p");function b(q,Xe){var vt=new XMLHttpRequest,pt=d._senderConfig.endpointUrl();try{vt[ko]=!0}catch(Vt){}vt.open("POST",pt,Xe),vt.setRequestHeader("Content-type","application/json"),Bs(pt)&&vt.setRequestHeader(zn.sdkContextHeader,zn.sdkContextHeaderAppIdRequest),vn(xo(u),function(Vt){vt.setRequestHeader(Vt,u[Vt])}),vt.onreadystatechange=function(){return d._xhrReadyStateChange(vt,q,q.length)},vt.onerror=function(Vt){return d._onError(q,fe(vt),Vt)};var Mt=d._buffer.batchPayloads(q);vt.send(Mt),d._buffer.markAsSent(q)}s(b,"m");function w(q,Xe){var vt=d._senderConfig.endpointUrl(),pt=d._buffer.batchPayloads(q),Mt=new Blob([pt],{type:"text/plain;charset=UTF-8"}),Vt=new Headers;Bs(vt)&&Vt.append(zn.sdkContextHeader,zn.sdkContextHeaderAppIdRequest),vn(xo(u),function(Hn){Vt.append(Hn,u[Hn])});var an={method:"POST",headers:Vt,body:Mt},Cn=new Request(vt,an);fetch(Cn).then(function(Hn){if(Hn.ok)Hn.text().then(function(gi){C(Hn.status,q,Hn.url,q.length,Hn.statusText,gi)}),d._buffer.markAsSent(q);else throw Error(Hn.statusText)}).catch(function(Hn){d._onError(q,Hn.message)})}s(w,"y");function P(q){try{if(q&&q!==""){var Xe=Ci().parse(q);if(Xe&&Xe.itemsReceived&&Xe.itemsReceived>=Xe.itemsAccepted&&Xe.itemsReceived-Xe.itemsAccepted===Xe.errors.length)return Xe}}catch(vt){d.diagLog().throwInternal(he.CRITICAL,Y.InvalidBackendResponse,"Cannot parse the response. "+An(vt),{response:q})}return null}s(P,"w");function F(q,Xe){if(Xe===void 0&&(Xe=1),!(!q||q.length===0)){d._buffer.clearSent(q),r++;for(var vt=0,pt=q;vt<pt.length;vt++){var Mt=pt[vt];d._buffer.enqueue(Mt)}A(Xe),Z()}}s(F,"L");function A(q){var Xe=10,vt;if(r<=1)vt=Xe;else{var pt=(Math.pow(2,r)-1)/2,Mt=Math.floor(Math.random()*pt*Xe)+1;Mt=q*Mt,vt=Math.max(Math.min(Mt,3600),Xe)}var Vt=li()+vt*1e3;i=Vt}s(A,"k");function Z(){if(!a){var q=i?Math.max(0,i-li()):0,Xe=Math.max(d._senderConfig.maxBatchInterval(),q);a=setTimeout(function(){d.triggerSend(!0,null,1)},Xe)}}s(Z,"Q");function $e(q){return q===408||q===429||q===500||q===503}s($e,"ye");function fe(q,Xe){return q?"XMLHttpRequest,Status:"+q.status+",Response:"+Js(q)||0||0:Xe}s(fe,"J");function It(q,Xe){var vt=Ta(),pt=new XDomainRequest;pt.onload=function(){return d._xdrOnLoad(pt,q)},pt.onerror=function(Cn){return d._onError(q,kt(pt),Cn)};var Mt=vt&&vt.location&&vt.location.protocol||"";if(d._senderConfig.endpointUrl().lastIndexOf(Mt,0)!==0){d.diagLog().throwInternal(he.WARNING,Y.TransmissionFailed,". Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol."),d._buffer.clear();return}var Vt=d._senderConfig.endpointUrl().replace(/^(https?:)/,"");pt.open("POST",Vt);var an=d._buffer.batchPayloads(q);pt.send(an),d._buffer.markAsSent(q)}s(It,"de");function kt(q,Xe){return q?"XDomainRequest,Response:"+Js(q)||0:Xe}s(kt,"be");function Pt(){var q="getNotifyMgr";return d.core[q]?d.core[q]():d.core._notificationManager}s(Pt,"pt");function st(q,Xe){var vt=Pt();if(vt&&vt.eventsSendRequest)try{vt.eventsSendRequest(q,Xe)}catch(pt){d.diagLog().throwInternal(he.CRITICAL,Y.NotificationException,"send request notification failed: "+An(pt),{exception:hn(pt)})}}s(st,"it");function Mn(q){var Xe=E(q.disableInstrumentationKeyValidation)?!1:q.disableInstrumentationKeyValidation;if(Xe)return!0;var vt="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",pt=new RegExp(vt);return pt.test(q.instrumentationKey)}s(Mn,"dt")}),n}return s(e,"e"),e.constructEnvelope=function(n,r,i){var o;switch(r!==n.iKey&&!E(r)?o=zt({},n,{iKey:r}):o=n,o.baseType){case Ei.dataType:return Kl.EventEnvelopeCreator.Create(i,o);case Yi.dataType:return th.TraceEnvelopeCreator.Create(i,o);case xi.dataType:return Zf.PageViewEnvelopeCreator.Create(i,o);case Zi.dataType:return eh.PageViewPerformanceEnvelopeCreator.Create(i,o);case Or.dataType:return Jf.ExceptionEnvelopeCreator.Create(i,o);case Ni.dataType:return Yf.MetricEnvelopeCreator.Create(i,o);case Oi.dataType:return Xf.DependencyEnvelopeCreator.Create(i,o);default:return Kl.EventEnvelopeCreator.Create(i,o)}},e._getDefaultAppInsightsChannelConfig=function(){return{endpointUrl:function(){return"https://dc.services.visualstudio.com/v2/track"},emitLineDelimitedJson:function(){return!1},maxBatchInterval:function(){return 15e3},maxBatchSizeInBytes:function(){return 102400},disableTelemetry:function(){return!1},enableSessionStorageBuffer:function(){return!0},isRetryDisabled:function(){return!1},isBeaconApiDisabled:function(){return!0},onunloadDisableBeacon:function(){return!1},instrumentationKey:function(){},namePrefix:function(){},samplingPercentage:function(){return 100},customHeaders:function(){}}},e._getEmptyAppInsightsChannelConfig=function(){return{endpointUrl:void 0,emitLineDelimitedJson:void 0,maxBatchInterval:void 0,maxBatchSizeInBytes:void 0,disableTelemetry:void 0,enableSessionStorageBuffer:void 0,isRetryDisabled:void 0,isBeaconApiDisabled:void 0,onunloadDisableBeacon:void 0,instrumentationKey:void 0,namePrefix:void 0,samplingPercentage:void 0,customHeaders:void 0}},e}(Po)}),sh=O(()=>{jv()}),ch,Xl,lh,qv=O(()=>{ht(),dr(),wn(),ch="ai_session",Xl=function(){function t(){}return s(t,"t"),t}(),lh=function(){function t(e,n){var r=this,i,o,a=bs(n),c=Zc(n);xn(t,r,function(l){e||(e={}),Be(e.sessionExpirationMs)||(e.sessionExpirationMs=function(){return t.acquisitionSpan}),Be(e.sessionRenewalMs)||(e.sessionRenewalMs=function(){return t.renewalSpan}),l.config=e;var u=l.config.sessionCookiePostfix&&l.config.sessionCookiePostfix()?l.config.sessionCookiePostfix():l.config.namePrefix&&l.config.namePrefix()?l.config.namePrefix():"";i=s(function(){return ch+u},"i"),l.automaticSession=new Xl,l.update=function(){var v=li(),m=!1,b=l.automaticSession;b.id||(m=!d(b,v));var w=l.config.sessionExpirationMs();if(!m&&w>0){var P=l.config.sessionRenewalMs(),F=v-b.acquisitionDate,A=v-b.renewalDate;m=F<0||A<0,m=m||F>w,m=m||A>P}m?g(v):(!o||v-o>t.cookieUpdateInterval)&&p(b,v)},l.backup=function(){var v=l.automaticSession;C(v.id,v.acquisitionDate,v.renewalDate)};function d(v,m){var b=!1,w=c.get(i());if(w&&Be(w.split))b=h(v,w);else{var P=af(a,i());P&&(b=h(v,P))}return b||!!v.id}s(d,"l");function h(v,m){var b=!1,w=", session will be reset",P=m.split("|");if(P.length>=2)try{var F=+P[1]||0,A=+P[2]||0;isNaN(F)||F<=0?a.throwInternal(he.WARNING,Y.SessionRenewalDateIsZero,"AI session acquisition date is 0"+w):isNaN(A)||A<=0?a.throwInternal(he.WARNING,Y.SessionRenewalDateIsZero,"AI session renewal date is 0"+w):P[0]&&(v.id=P[0],v.acquisitionDate=F,v.renewalDate=A,b=!0)}catch(Z){a.throwInternal(he.CRITICAL,Y.ErrorParsingAISessionCookie,"Error parsing ai_session value ["+(m||"")+"]"+w+" - "+An(Z),{exception:hn(Z)})}return b}s(h,"f");function g(v){var m=l.config||{},b=(m.getNewId?m.getNewId():null)||ks;l.automaticSession.id=b(m.idLength?m.idLength():22),l.automaticSession.acquisitionDate=v,p(l.automaticSession,v),Il()||a.throwInternal(he.WARNING,Y.BrowserDoesNotSupportLocalStorage,"Browser does not support local storage. Session durations will be inaccurate.")}s(g,"g");function p(v,m){var b=v.acquisitionDate;v.renewalDate=m;var w=l.config,P=w.sessionRenewalMs(),F=b+w.sessionExpirationMs()-m,A=[v.id,b,m],Z=0;F<P?Z=F/1e3:Z=P/1e3;var $e=w.cookieDomain?w.cookieDomain():null;c.set(i(),A.join("|"),w.sessionExpirationMs()>0?Z:null,$e),o=m}s(p,"C");function C(v,m,b){sf(a,i(),[v,m,b].join("|"))}s(C,"E")})}return s(t,"t"),t.acquisitionSpan=864e5,t.renewalSpan=18e5,t.cookieUpdateInterval=6e4,t}()}),uh,Kv=O(()=>{uh=function(){function t(){}return s(t,"t"),t}()}),dh,Gv=O(()=>{dh=function(){function t(){this.id="browser",this.deviceClass="Browser"}return s(t,"t"),t}()}),fh,hh,Qv=O(()=>{fh="2.6.4",hh=function(){function t(e){this.sdkVersion=(e.sdkExtension&&e.sdkExtension()?e.sdkExtension()+"_":"")+"javascript:"+fh}return s(t,"t"),t}()});function gh(t){return!(typeof t!="string"||!t||t.match(/,|;|=| |\|/))}s(gh,"Xu");var ph,Xv=O(()=>{ht(),dr(),wn(),ph=function(){function t(e,n){this.isNewUser=!1;var r=bs(n),i=Zc(n),o;xn(t,this,function(a){a.config=e;var c=a.config.userCookiePostfix&&a.config.userCookiePostfix()?a.config.userCookiePostfix():"";o=s(function(){return t.userCookieName+c},"a");var l=i.get(o());if(l){a.isNewUser=!1;var u=l.split(t.cookieSeparator);u.length>0&&(a.id=u[0])}if(!a.id){var d=e||{},h=(d.getNewId?d.getNewId():null)||ks;a.id=h(d.idLength?e.idLength():22);var g=31536e3,p=ni(new Date);a.accountAcquisitionDate=p,a.isNewUser=!0;var C=[a.id,p];i.set(o(),C.join(t.cookieSeparator),g);var v=e.namePrefix&&e.namePrefix()?e.namePrefix()+"ai_session":"ai_session";cf(r,v)}a.accountId=e.accountId?e.accountId():void 0;var m=i.get(t.authUserCookieName);if(m){m=decodeURI(m);var b=m.split(t.cookieSeparator);b[0]&&(a.authenticatedId=b[0]),b.length>1&&b[1]&&(a.accountId=b[1])}a.setAuthenticatedUserContext=function(w,P,F){F===void 0&&(F=!1);var A=!gh(w)||P&&!gh(P);if(A){r.throwInternal(he.WARNING,Y.SetAuthContextFailedAccountName,"Setting auth user context failed. User auth/account id should be of type string, and not contain commas, semi-colons, equal signs, spaces, or vertical-bars.",!0);return}a.authenticatedId=w;var Z=a.authenticatedId;P&&(a.accountId=P,Z=[a.authenticatedId,a.accountId].join(t.cookieSeparator)),F&&i.set(t.authUserCookieName,encodeURI(Z))},a.clearAuthenticatedUserContext=function(){a.authenticatedId=null,a.accountId=null,i.del(t.authUserCookieName)}})}return s(t,"t"),t.cookieSeparator="|",t.userCookieName="ai_user",t.authUserCookieName="ai_authUser",t}()}),vh,Jv=O(()=>{vh=function(){function t(){}return s(t,"t"),t}()}),mh,Yv=O(()=>{dr(),wn(),mh=function(){function t(e,n,r,i){var o=this;o.traceID=e||Li(),o.parentID=n,o.name=r;var a=Io();!r&&a&&a.pathname&&(o.name=a.pathname),o.name=Lr(i,o.name)}return s(t,"t"),t}()});function da(t,e){t&&t[e]&&xo(t[e]).length===0&&delete t[e]}s(da,"Br");var $a,za,yh,Zv=O(()=>{ht(),wn(),qv(),dr(),Kv(),Gv(),Qv(),Xv(),Jv(),Yv(),$a="ext",za="tags",yh=function(){function t(e,n){var r=this,i=e.logger;this.appId=function(){return null},xn(t,this,function(o){o.application=new uh,o.internal=new hh(n),vs()&&(o.sessionManager=new lh(n,e),o.device=new dh,o.location=new vh,o.user=new ph(n,e),o.telemetryTrace=new mh(void 0,void 0,void 0,i),o.session=new Xl),o.applySessionContext=function(a,c){var l=o.session,u=o.sessionManager;l&&en(l.id)?_n(_r(a.ext,Ur.AppExt),"sesId",l.id):u&&u.automaticSession&&_n(_r(a.ext,Ur.AppExt),"sesId",u.automaticSession.id,en)},o.applyOperatingSystemContxt=function(a,c){_n(a.ext,Ur.OSExt,o.os)},o.applyApplicationContext=function(a,c){var l=o.application;if(l){var u=_r(a,za);_n(u,Wn.applicationVersion,l.ver,en),_n(u,Wn.applicationBuild,l.build,en)}},o.applyDeviceContext=function(a,c){var l=o.device;if(l){var u=_r(_r(a,$a),Ur.DeviceExt);_n(u,"localId",l.id,en),_n(u,"ip",l.ip,en),_n(u,"model",l.model,en),_n(u,"deviceClass",l.deviceClass,en)}},o.applyInternalContext=function(a,c){var l=o.internal;if(l){var u=_r(a,za);_n(u,Wn.internalAgentVersion,l.agentVersion,en),_n(u,Wn.internalSdkVersion,l.sdkVersion,en),(a.baseType===Xo.dataType||a.baseType===xi.dataType)&&(_n(u,Wn.internalSnippet,l.snippetVer,en),_n(u,Wn.internalSdkSrc,l.sdkSrc,en))}},o.applyLocationContext=function(a,c){var l=r.location;l&&_n(_r(a,za,[]),Wn.locationIp,l.ip,en)},o.applyOperationContext=function(a,c){var l=o.telemetryTrace;if(l){var u=_r(_r(a,$a),Ur.TraceExt,{traceID:void 0,parentID:void 0});_n(u,"traceID",l.traceID,en),_n(u,"name",l.name,en),_n(u,"parentID",l.parentID,en)}},o.applyWebContext=function(a,c){var l=r.web;l&&_n(_r(a,$a),Ur.WebExt,l)},o.applyUserContext=function(a,c){var l=o.user;if(l){var u=_r(a,za,[]);_n(u,Wn.userAccountId,l.accountId,en);var d=_r(_r(a,$a),Ur.UserExt);_n(d,"id",l.id,en),_n(d,"authId",l.authenticatedId,en)}},o.cleanUp=function(a,c){var l=a.ext;l&&(da(l,Ur.DeviceExt),da(l,Ur.UserExt),da(l,Ur.WebExt),da(l,Ur.OSExt),da(l,Ur.AppExt),da(l,Ur.TraceExt))}})}return s(t,"t"),t}()}),wh,Jl,em=O(()=>{Bt(),ht(),wn(),Zv(),dr(),wh=function(t){te(e,t);function e(){var n=t.call(this)||this;n.priority=110,n.identifier=ua;var r,i;return xn(e,n,function(o,a){o.initialize=function(l,u,d,h){a.initialize(l,u,d,h);var g=o._getTelCtx(),p=o.identifier,C=e.getDefaultConfig();i=i||{},fn(C,function(v,m){i[v]=function(){return g.getConfig(p,v,m())}}),o.context=new yh(u,i),r=tf(d,Gs),o.context.appId=function(){return r?r._appId:null},o._extConfig=i},o.processTelemetry=function(l,u){if(!E(l)){u=o._getTelCtx(u),l.name===xi.envelopeType&&u.diagLog().resetInternalMessageCount();var d=o.context||{};if(d.session&&typeof o.context.session.id!="string"&&d.sessionManager&&d.sessionManager.update(),c(l,u),d.user&&d.user.isNewUser){d.user.isNewUser=!1;var h=new Xo(Y.SendBrowserInfoOnUserInit,(Fi()||{}).userAgent||"");u.diagLog().logInternalMessage(he.CRITICAL,h)}o.processNext(l,u)}};function c(l,u){_r(l,"tags",[]),_r(l,"ext",{});var d=o.context;d.applySessionContext(l,u),d.applyApplicationContext(l,u),d.applyDeviceContext(l,u),d.applyOperationContext(l,u),d.applyUserContext(l,u),d.applyOperatingSystemContxt(l,u),d.applyWebContext(l,u),d.applyLocationContext(l,u),d.applyInternalContext(l,u),d.cleanUp(l,u)}s(c,"u")}),n}return s(e,"e"),e.getDefaultConfig=function(){var n={instrumentationKey:function(){},accountId:function(){return null},sessionRenewalMs:function(){return 18e5},samplingPercentage:function(){return 100},sessionExpirationMs:function(){return 864e5},cookieDomain:function(){return null},sdkExtension:function(){return null},isBrowserLinkTrackingEnabled:function(){return!1},appId:function(){return null},namePrefix:function(){},sessionCookiePostfix:function(){},userCookiePostfix:function(){},idLength:function(){return 22},getNewId:function(){return null}};return n},e}(Po),Jl=wh}),Ch=O(()=>{em()});function Sh(t,e,n){var r=0,i=t[e],o=t[n];return i&&o&&(r=Nr(i,o)),r}s(Sh,"ic");function No(t,e,n,r,i){var o=0,a=Sh(n,r,i);return a&&(o=wo(t,e,Ji(a))),o}s(No,"yr");function wo(t,e,n){var r="ajaxPerf",i=0;if(t&&e&&n){var o=t[r]=t[r]||{};o[e]=n,i=1}return i}s(wo,"rr");function tm(t,e){var n=t.perfTiming,r=e[jr]||{},i=0,o="name",a="Start",c="End",l="domainLookup",u="connect",d="redirect",h="request",g="response",p="duration",C="startTime",v=l+a,m=l+c,b=u+a,w=u+c,P=h+a,F=h+c,A=g+a,Z=g+c,$e=d+a,fe=d=c,It="transferSize",kt="encodedBodySize",Pt="decodedBodySize",st="serverTiming";if(n){i|=No(r,d,n,$e,fe),i|=No(r,l,n,v,m),i|=No(r,u,n,b,w),i|=No(r,h,n,P,F),i|=No(r,g,n,A,Z),i|=No(r,"networkConnect",n,C,w),i|=No(r,"sentRequest",n,P,Z);var Mn=n[p];Mn||(Mn=Sh(n,C,Z)||0),i|=wo(r,p,Mn),i|=wo(r,"perfTotal",Mn);var q=n[st];if(q){var Xe={};vn(q,function(vt,pt){var Mt=Fn(vt[o]||""+pt),Vt=Xe[Mt]||{};fn(vt,function(an,Cn){(an!==o&&en(Cn)||Ko(Cn))&&(Vt[an]&&(Cn=Vt[an]+";"+Cn),(Cn||!en(Cn))&&(Vt[an]=Cn))}),Xe[Mt]=Vt}),i|=wo(r,st,Xe)}i|=wo(r,It,n[It]),i|=wo(r,kt,n[kt]),i|=wo(r,Pt,n[Pt])}else t.perfMark&&(i|=wo(r,"missing",t.perfAttempts));i&&(e[jr]=r)}s(tm,"Cl");var jr,bh,Yl,nm=O(()=>{dr(),wn(),ht(),jr="properties",bh=function(){function t(){var e=this;e.openDone=!1,e.setRequestHeaderDone=!1,e.sendDone=!1,e.abortDone=!1,e.stateChangeAttached=!1}return s(t,"t"),t}(),Yl=function(){function t(e,n,r){var i=this,o=r,a="responseText";i.perfMark=null,i.completed=!1,i.requestHeadersSize=null,i.requestHeaders=null,i.responseReceivingDuration=null,i.callbackDuration=null,i.ajaxTotalDuration=null,i.aborted=0,i.pageUrl=null,i.requestUrl=null,i.requestSize=0,i.method=null,i.status=null,i.requestSentTime=null,i.responseStartedTime=null,i.responseFinishedTime=null,i.callbackFinishedTime=null,i.endTime=null,i.xhrMonitoringState=new bh,i.clientFailure=0,i.traceID=e,i.spanID=n,xn(t,i,function(c){c.getAbsoluteUrl=function(){return c.requestUrl?df(c.requestUrl):null},c.getPathName=function(){return c.requestUrl?Na(o,ff(c.method,c.requestUrl)):null},c.CreateTrackItem=function(l,u,d){if(c.ajaxTotalDuration=Math.round(Nr(c.requestSentTime,c.responseFinishedTime)*1e3)/1e3,c.ajaxTotalDuration<0)return null;var h=(v={id:"|"+c.traceID+"."+c.spanID,target:c.getAbsoluteUrl(),name:c.getPathName(),type:l,startTime:null,duration:c.ajaxTotalDuration,success:+c.status>=200&&+c.status<400,responseCode:+c.status,method:c.method},v[jr]={HttpMethod:c.method},v);if(c.requestSentTime&&(h.startTime=new Date,h.startTime.setTime(c.requestSentTime)),tm(c,h),u&&xo(c.requestHeaders).length>0&&(h[jr]=h[jr]||{},h[jr].requestHeaders=c.requestHeaders),d){var g=d();if(g){var p=g.correlationContext;if(p&&(h.correlationContext=p),g.headerMap&&xo(g.headerMap).length>0&&(h[jr]=h[jr]||{},h[jr].responseHeaders=g.headerMap),c.status>=400){var C=g.type;h[jr]=h[jr]||{},(C===""||C==="text")&&(h[jr][a]=g[a]?g.statusText+" - "+g[a]:g.statusText),C==="json"&&(h[jr][a]=g.response?g.statusText+" - "+JSON.stringify(g.response):g.statusText)}}}return h;var v}})}return s(t,"t"),t}()}),rm,im=O(()=>{wn(),wn(),rm=function(){function t(){}return s(t,"t"),t.GetLength=function(e){var n=0;if(!E(e)){var r="";try{r=e.toString()}catch(i){}n=r.length,n=isNaN(n)?0:n}return n},t}()}),Zl,om=O(()=>{wn(),Zl=function(){function t(e,n){var r=this;r.traceFlag=t.DEFAULT_TRACE_FLAG,r.version=t.DEFAULT_VERSION,e&&t.isValidTraceId(e)?r.traceId=e:r.traceId=Li(),n&&t.isValidSpanId(n)?r.spanId=n:r.spanId=Li().substr(0,16)}return s(t,"t"),t.isValidTraceId=function(e){return e.match(/^[0-9a-f]{32}$/)&&e!=="00000000000000000000000000000000"},t.isValidSpanId=function(e){return e.match(/^[0-9a-f]{16}$/)&&e!=="0000000000000000"},t.prototype.toString=function(){var e=this;return e.version+"-"+e.traceId+"-"+e.spanId+"-"+e.traceFlag},t.DEFAULT_TRACE_FLAG="01",t.DEFAULT_VERSION="00",t}()});function am(){var t=nn();return!t||E(t.Request)||E(t.Request[He])||E(t[ga])?null:t[ga]}s(am,"El");function sm(t){var e=!1;if(typeof XMLHttpRequest!==J&&!E(XMLHttpRequest)){var n=XMLHttpRequest[He];e=!E(n)&&!E(n.open)&&!E(n.send)&&!E(n.abort)}var r=Bc();if(r&&r<9&&(e=!1),e)try{var i=new XMLHttpRequest;i[qr]={};var o=XMLHttpRequest[He].open;XMLHttpRequest[He].open=o}catch(a){e=!1,Va(t,Y.FailedMonitorAjaxOpen,"Failed to enable XMLHttpRequest monitoring, extension is not supported",{exception:hn(a)})}return e}s(sm,"wl");function Ys(t){var e="";try{!E(t)&&!E(t[qr])&&!E(t[qr].requestUrl)&&(e+="(url: '"+t[qr].requestUrl+"')")}catch(n){}return e}s(Ys,"bi");function Va(t,e,n,r,i){t[ha]()[tu](he.CRITICAL,e,n,r,i)}s(Va,"Rn");function Zs(t,e,n,r,i){t[ha]()[tu](he.WARNING,e,n,r,i)}s(Zs,"Pi");function ja(t,e,n){return function(r){Va(t,e,n,{ajaxDiagnosticsMessage:Ys(r.inst),exception:hn(r.err)})}}s(ja,"Nn");function fa(t,e){return t&&e?t.indexOf(e):-1}s(fa,"zr");var eu,ha,qr,tu,ga,nu,ru,cm=O(()=>{Bt(),dr(),wn(),nm(),im(),om(),ht(),eu="ai.ajxmn.",ha="diagLog",qr="ajaxData",tu="throwInternal",ga="fetch",nu=0,ru=function(t){te(e,t);function e(){var n=t.call(this)||this;n.identifier=e.identifier,n.priority=120;var r="trackDependencyDataInternal",i=Io(),o=!1,a=!1,c=i&&i.host&&i.host.toLowerCase(),l=e.getEmptyConfig(),u=!1,d=0,h,g,p,C,v=!1,m=0,b=!1,w=[],P={},F;return xn(e,n,function(A,Z){A.initialize=function(Ce,ft,Tt,wt){if(!A.isInitialized()){Z.initialize(Ce,ft,Tt,wt);var Ot=A._getTelCtx(),tn=e.getDefaultConfig();fn(tn,function(Pr,lo){l[Pr]=Ot.getConfig(e.identifier,Pr,lo)});var Jt=l.distributedTracingMode;if(u=l.enableRequestHeaderTracking,v=l.enableAjaxPerfTracking,m=l.maxAjaxCallsPerView,b=l.enableResponseHeaderTracking,F=l.excludeRequestFromAutoTrackingPatterns,p=Jt===_i.AI||Jt===_i.AI_AND_W3C,g=Jt===_i.AI_AND_W3C||Jt===_i.W3C,v){var Sn=Ce.instrumentationKey||"unkwn";Sn.length>5?C=eu+Sn.substring(Sn.length-5)+".":C=eu+Sn+"."}if(l.disableAjaxTracking===!1&&kt(),fe(),Tt.length>0&&Tt){for(var Vn=void 0,er=0;!Vn&&er<Tt.length;)Tt[er]&&Tt[er].identifier===ua&&(Vn=Tt[er]),er++;Vn&&(h=Vn.context)}}},A.teardown=function(){vn(w,function(Ce){Ce.rm()}),w=[],o=!1,a=!1,A.setInitialized(!1)},A.trackDependencyData=function(Ce,ft){A[r](Ce,ft)},A.includeCorrelationHeaders=function(Ce,ft,Tt,wt){var Ot=A._currentWindowHost||c;if(ft){if(vo.canIncludeCorrelationHeader(l,Ce.getAbsoluteUrl(),Ot)){if(Tt||(Tt={}),Tt.headers=new Headers(Tt.headers||(ft instanceof Request?ft.headers||{}:{})),p){var tn="|"+Ce.traceID+"."+Ce.spanID;Tt.headers.set(zn.requestIdHeader,tn),u&&(Ce.requestHeaders[zn.requestIdHeader]=tn)}var Jt=l.appId||h&&h.appId();if(Jt&&(Tt.headers.set(zn.requestContextHeader,zn.requestContextAppIdFormat+Jt),u&&(Ce.requestHeaders[zn.requestContextHeader]=zn.requestContextAppIdFormat+Jt)),g){var Sn=new Zl(Ce.traceID,Ce.spanID);Tt.headers.set(zn.traceParentHeader,Sn.toString()),u&&(Ce.requestHeaders[zn.traceParentHeader]=Sn.toString())}}return Tt}else if(wt){if(vo.canIncludeCorrelationHeader(l,Ce.getAbsoluteUrl(),Ot)){if(p){var tn="|"+Ce.traceID+"."+Ce.spanID;wt.setRequestHeader(zn.requestIdHeader,tn),u&&(Ce.requestHeaders[zn.requestIdHeader]=tn)}var Jt=l.appId||h&&h.appId();if(Jt&&(wt.setRequestHeader(zn.requestContextHeader,zn.requestContextAppIdFormat+Jt),u&&(Ce.requestHeaders[zn.requestContextHeader]=zn.requestContextAppIdFormat+Jt)),g){var Sn=new Zl(Ce.traceID,Ce.spanID);wt.setRequestHeader(zn.traceParentHeader,Sn.toString()),u&&(Ce.requestHeaders[zn.traceParentHeader]=Sn.toString())}}return wt}},A[r]=function(Ce,ft,Tt){if(m===-1||d<m){(l.distributedTracingMode===_i.W3C||l.distributedTracingMode===_i.AI_AND_W3C)&&typeof Ce.id=="string"&&Ce.id[Ce.id.length-1]!=="."&&(Ce.id+="."),E(Ce.startTime)&&(Ce.startTime=new Date);var wt=Ui.create(Ce,Oi.dataType,Oi.envelopeType,A[ha](),ft,Tt);A.core.track(wt)}else d===m&&Va(A,Y.MaxAjaxPerPVExceeded,"Maximum ajax per page view limit reached, ajax monitoring is paused until the next trackPageView(). In order to increase the limit set the maxAjaxCallsPerView configuration parameter.",!0);++d};function $e(Ce){var ft=!0;return(Ce||l.ignoreHeaders)&&vn(l.ignoreHeaders,function(Tt){if(Tt.toLowerCase()===Ce.toLowerCase())return ft=!1,-1}),ft}s($e,"ye");function fe(){var Ce=am();if(Ce){var ft=nn(),Tt=Ce.polyfill;l.disableFetchTracking===!1?(w.push(pl(ft,ga,{req:function(wt,Ot,tn){var Jt;if(o&&!Pt(null,Ot,tn)&&!(Tt&&a)){var Sn=wt.ctx();Jt=an(Ot,tn);var Vn=A.includeCorrelationHeaders(Jt,Ot,tn);Vn!==tn&&wt.set(1,Vn),Sn.data=Jt}},rsp:function(wt,Ot){var tn=wt.ctx().data;tn&&(wt.rslt=wt.rslt.then(function(Jt){return Hn(wt,(Jt||{}).status,Jt,tn,function(){var Sn={statusText:Jt.statusText,headerMap:null,correlationContext:gi(Jt)};if(b){var Vn={};Jt.headers.forEach(function(er,Pr){$e(Pr)&&(Vn[Pr]=er)}),Sn.headerMap=Vn}return Sn}),Jt}).catch(function(Jt){throw Hn(wt,0,Ot,tn,null,{error:Jt.message}),Jt}))},hkErr:ja(A,Y.FailedMonitorAjaxOpen,"Failed to monitor Window.fetch, monitoring data for this fetch call may be incorrect.")})),o=!0):Tt&&w.push(pl(ft,ga,{req:function(wt,Ot,tn){Pt(null,Ot,tn)}})),Tt&&(ft[ga].polyfill=Tt)}}s(fe,"J");function It(Ce,ft,Tt){w.push(Zp(Ce,ft,Tt))}s(It,"de");function kt(){sm(A)&&!a&&(It(XMLHttpRequest,"open",{req:function(Ce,ft,Tt,wt){var Ot=Ce.inst,tn=Ot[qr];!Pt(Ot,Tt)&&st(Ot,!0)&&(!tn||!tn.xhrMonitoringState.openDone)&&Mn(Ot,ft,Tt,wt)},hkErr:ja(A,Y.FailedMonitorAjaxOpen,"Failed to monitor XMLHttpRequest.open, monitoring data for this ajax call may be incorrect.")}),It(XMLHttpRequest,"send",{req:function(Ce,ft){var Tt=Ce.inst,wt=Tt[qr];st(Tt)&&!wt.xhrMonitoringState.sendDone&&(Mt("xhr",wt),wt.requestSentTime=Ua(),A.includeCorrelationHeaders(wt,void 0,void 0,Tt),wt.xhrMonitoringState.sendDone=!0)},hkErr:ja(A,Y.FailedMonitorAjaxSend,"Failed to monitor XMLHttpRequest, monitoring data for this ajax call may be incorrect.")}),It(XMLHttpRequest,"abort",{req:function(Ce){var ft=Ce.inst,Tt=ft[qr];st(ft)&&!Tt.xhrMonitoringState.abortDone&&(Tt.aborted=1,Tt.xhrMonitoringState.abortDone=!0)},hkErr:ja(A,Y.FailedMonitorAjaxAbort,"Failed to monitor XMLHttpRequest.abort, monitoring data for this ajax call may be incorrect.")}),u&&It(XMLHttpRequest,"setRequestHeader",{req:function(Ce,ft,Tt){var wt=Ce.inst;st(wt)&&$e(ft)&&(wt[qr].requestHeaders[ft]=Tt)},hkErr:ja(A,Y.FailedMonitorAjaxSetRequestHeader,"Failed to monitor XMLHttpRequest.setRequestHeader, monitoring data for this ajax call may be incorrect.")}),a=!0)}s(kt,"be");function Pt(Ce,ft,Tt){var wt=!1,Ot=((en(ft)?ft:(ft||{}).url||"")||"").toLowerCase();if(vn(F,function(Sn){var Vn=Sn;en(Sn)&&(Vn=new RegExp(Sn)),wt||(wt=Vn.test(Ot))}),wt)return wt;var tn=fa(Ot,"?"),Jt=fa(Ot,"#");return(tn===-1||Jt!==-1&&Jt<tn)&&(tn=Jt),tn!==-1&&(Ot=Ot.substring(0,tn)),E(Ce)?E(ft)||(wt=(typeof ft=="object"?ft[ko]===!0:!1)||(Tt?Tt[ko]===!0:!1)):wt=Ce[ko]===!0||Ot[ko]===!0,wt?P[Ot]||(P[Ot]=1):P[Ot]&&(wt=!0),wt}s(Pt,"pt");function st(Ce,ft){var Tt=!0,wt=a;return E(Ce)||(Tt=ft===!0||!E(Ce[qr])),wt&&Tt}s(st,"it");function Mn(Ce,ft,Tt,wt){var Ot=h&&h.telemetryTrace&&h.telemetryTrace.traceID||Li(),tn=Li().substr(0,16),Jt=new Yl(Ot,tn,A[ha]());Jt.method=ft,Jt.requestUrl=Tt,Jt.xhrMonitoringState.openDone=!0,Jt.requestHeaders={},Jt.async=wt,Ce[qr]=Jt,q(Ce)}s(Mn,"dt");function q(Ce){Ce[qr].xhrMonitoringState.stateChangeAttached=La.Attach(Ce,"readystatechange",function(){try{Ce&&Ce.readyState===4&&st(Ce)&&vt(Ce)}catch(Tt){var ft=hn(Tt);(!ft||fa(ft.toLowerCase(),"c00c023f")===-1)&&Va(A,Y.FailedMonitorAjaxRSC,"Failed to monitor XMLHttpRequest 'readystatechange' event handler, monitoring data for this ajax call may be incorrect.",{ajaxDiagnosticsMessage:Ys(Ce),exception:ft})}})}s(q,"d");function Xe(Ce){try{var ft=Ce.responseType;if(ft===""||ft==="text")return Ce.responseText}catch(Tt){}return null}s(Xe,"T");function vt(Ce){var ft=Ce[qr];ft.responseFinishedTime=Ua(),ft.status=Ce.status;function Tt(wt,Ot){var tn=Ot||{};tn.ajaxDiagnosticsMessage=Ys(Ce),wt&&(tn.exception=hn(wt)),Zs(A,Y.FailedMonitorAjaxDur,"Failed to calculate the duration of the ajax call, monitoring data for this ajax call won't be sent.",tn)}s(Tt,"N"),Vt("xmlhttprequest",ft,function(){try{var wt=ft.CreateTrackItem("Ajax",u,function(){var Ot={statusText:Ce.statusText,headerMap:null,correlationContext:pt(Ce),type:Ce.responseType,responseText:Xe(Ce),response:Ce.response};if(b){var tn=Ce.getAllResponseHeaders();if(tn){var Jt=mr(tn).split(/[\r\n]+/),Sn={};vn(Jt,function(Vn){var er=Vn.split(": "),Pr=er.shift(),lo=er.join(": ");$e(Pr)&&(Sn[Pr]=lo)}),Ot.headerMap=Sn}}return Ot});wt?A[r](wt):Tt(null,{requestSentTime:ft.requestSentTime,responseFinishedTime:ft.responseFinishedTime})}finally{try{Ce[qr]=null}catch(Ot){}}},function(wt){Tt(wt,null)})}s(vt,"D");function pt(Ce){try{var ft=Ce.getAllResponseHeaders();if(ft!==null){var Tt=fa(ft.toLowerCase(),zn.requestContextHeaderLowerCase);if(Tt!==-1){var wt=Ce.getResponseHeader(zn.requestContextHeader);return vo.getCorrelationContext(wt)}}}catch(Ot){Zs(A,Y.FailedMonitorAjaxGetCorrelationHeader,"Failed to get Request-Context correlation header as it may be not included in the response or not accessible.",{ajaxDiagnosticsMessage:Ys(Ce),exception:hn(Ot)})}}s(pt,"A");function Mt(Ce,ft){if(ft.requestUrl&&C&&v){var Tt=Gi();if(Tt&&Be(Tt.mark)){nu++;var wt=C+Ce+"#"+nu;Tt.mark(wt);var Ot=Tt.getEntriesByName(wt);Ot&&Ot.length===1&&(ft.perfMark=Ot[0])}}}s(Mt,"H");function Vt(Ce,ft,Tt,wt){var Ot=ft.perfMark,tn=Gi(),Jt=l.maxAjaxPerfLookupAttempts,Sn=l.ajaxPerfLookupDelay,Vn=ft.requestUrl,er=0;s(function Pr(){try{if(tn&&Ot){er++;for(var lo=null,Rc=tn.getEntries(),xa=Rc.length-1;xa>=0;xa--){var pi=Rc[xa];if(pi){if(pi.entryType==="resource")pi.initiatorType===Ce&&(fa(pi.name,Vn)!==-1||fa(Vn,pi.name)!==-1)&&(lo=pi);else if(pi.entryType==="mark"&&pi.name===Ot.name){ft.perfTiming=lo;break}if(pi.startTime<Ot.startTime-1e3)break}}}!Ot||ft.perfTiming||er>=Jt||ft.async===!1?(Ot&&Be(tn.clearMarks)&&tn.clearMarks(Ot.name),ft.perfAttempts=er,Tt()):setTimeout(Pr,Sn)}catch(Yu){wt(Yu)}},"We")()}s(Vt,"_");function an(Ce,ft){var Tt=h&&h.telemetryTrace&&h.telemetryTrace.traceID||Li(),wt=Li().substr(0,16),Ot=new Yl(Tt,wt,A[ha]());Ot.requestSentTime=Ua(),Ce instanceof Request?Ot.requestUrl=Ce?Ce.url:"":Ot.requestUrl=Ce;var tn="GET";ft&&ft.method?tn=ft.method:Ce&&Ce instanceof Request&&(tn=Ce.method),Ot.method=tn;var Jt={};if(u){var Sn=new Headers((ft?ft.headers:0)||(Ce instanceof Request?Ce.headers||{}:{}));Sn.forEach(function(Vn,er){$e(er)&&(Jt[er]=Vn)})}return Ot.requestHeaders=Jt,Mt("fetch",Ot),Ot}s(an,"j");function Cn(Ce){var ft="";try{E(Ce)||(typeof Ce=="string"?ft+="(url: '"+Ce+"')":ft+="(url: '"+Ce.url+"')")}catch(Tt){Va(A,Y.FailedMonitorAjaxOpen,"Failed to grab failed fetch diagnostics message",{exception:hn(Tt)})}return ft}s(Cn,"Z");function Hn(Ce,ft,Tt,wt,Ot,tn){if(!wt)return;function Jt(Sn,Vn,er){var Pr=er||{};Pr.fetchDiagnosticsMessage=Cn(Tt),Vn&&(Pr.exception=hn(Vn)),Zs(A,Sn,"Failed to calculate the duration of the fetch call, monitoring data for this fetch call won't be sent.",Pr)}s(Jt,"V"),wt.responseFinishedTime=Ua(),wt.status=ft,Vt("fetch",wt,function(){var Sn=wt.CreateTrackItem("Fetch",u,Ot);Sn?A[r](Sn):Jt(Y.FailedMonitorAjaxDur,null,{requestSentTime:wt.requestSentTime,responseFinishedTime:wt.responseFinishedTime})},function(Sn){Jt(Y.FailedMonitorAjaxGetCorrelationHeader,Sn,null)})}s(Hn,"ie");function gi(Ce){if(Ce&&Ce.headers)try{var ft=Ce.headers.get(zn.requestContextHeader);return vo.getCorrelationContext(ft)}catch(Tt){Zs(A,Y.FailedMonitorAjaxGetCorrelationHeader,"Failed to get Request-Context correlation header as it may be not included in the response or not accessible.",{fetchDiagnosticsMessage:Cn(Ce),exception:hn(Tt)})}}s(gi,"Ht")}),n}return s(e,"e"),e.getDefaultConfig=function(){var n={maxAjaxCallsPerView:500,disableAjaxTracking:!1,disableFetchTracking:!0,excludeRequestFromAutoTrackingPatterns:void 0,disableCorrelationHeaders:!1,distributedTracingMode:_i.AI_AND_W3C,correlationHeaderExcludedDomains:["*.blob.core.windows.net","*.blob.core.chinacloudapi.cn","*.blob.core.cloudapi.de","*.blob.core.usgovcloudapi.net"],correlationHeaderDomains:void 0,correlationHeaderExcludePatterns:void 0,appId:void 0,enableCorsCorrelation:!1,enableRequestHeaderTracking:!1,enableResponseHeaderTracking:!1,enableAjaxErrorStatusText:!1,enableAjaxPerfTracking:!1,maxAjaxPerfLookupAttempts:3,ajaxPerfLookupDelay:25,ignoreHeaders:["Authorization","X-API-Key","WWW-Authenticate"]};return n},e.getEmptyConfig=function(){var n=this.getDefaultConfig();return fn(n,function(r){n[r]=void 0}),n},e.prototype.processTelemetry=function(n,r){this.processNext(n,r)},e.identifier="AjaxDependencyPlugin",e}(Po)}),_h=O(()=>{cm()}),iu,ou,Eh,xh,au,Ih=O(()=>{wn(),Kf(),sh(),Ch(),_h(),dr(),ou=["snippet","dependencies","properties","_snippetVersion","appInsightsNew","getSKUDefaults"],Eh={Default:0,Required:1,Array:2,Hidden:4},xh={__proto__:null,PropertiesPluginIdentifier:ua,BreezeChannelIdentifier:Gs,AnalyticsPluginIdentifier:$l,Util:Rl,CorrelationIdHelper:vo,UrlHelper:mf,DateTimeUtils:yf,ConnectionStringParser:_f,FieldType:Eh,RequestHeaders:zn,DisabledPropertyName:ko,ProcessLegacy:oa,SampleRate:Ls,HttpMethod:Ns,DEFAULT_BREEZE_ENDPOINT:_l,AIData:kl,AIBase:Al,Envelope:Ml,Event:Ei,Exception:Or,Metric:Ni,PageView:xi,PageViewData:js,RemoteDependencyData:Oi,Trace:Yi,PageViewPerformance:Zi,Data:eo,SeverityLevel:Ha,ConfigurationManager:Wf,ContextTagKeys:Ks,DataSanitizer:Zd,TelemetryItemCreator:Ui,CtxTagKeys:Wn,Extensions:Ur,DistributedTracingModes:_i},au=function(){function t(e){var n=this;n._snippetVersion=""+(e.sv||e.version||""),e.queue=e.queue||[],e.version=e.version||2;var r=e.config||{};if(r.connectionString){var i=Cf(r.connectionString),o=i.ingestionendpoint;r.endpointUrl=o?o+"/v2/track":r.endpointUrl,r.instrumentationKey=i.instrumentationkey||r.instrumentationKey}n.appInsights=new Vl,n.properties=new Jl,n.dependencies=new ru,n.core=new ul,n._sender=new Ql,n.snippet=e,n.config=r,n.getSKUDefaults()}return s(t,"t"),t.prototype.getCookieMgr=function(){return this.appInsights.getCookieMgr()},t.prototype.trackEvent=function(e,n){this.appInsights.trackEvent(e,n)},t.prototype.trackPageView=function(e){var n=e||{};this.appInsights.trackPageView(n)},t.prototype.trackPageViewPerformance=function(e){var n=e||{};this.appInsights.trackPageViewPerformance(n)},t.prototype.trackException=function(e){e&&!e.exception&&e.error&&(e.exception=e.error),this.appInsights.trackException(e)},t.prototype._onerror=function(e){this.appInsights._onerror(e)},t.prototype.trackTrace=function(e,n){this.appInsights.trackTrace(e,n)},t.prototype.trackMetric=function(e,n){this.appInsights.trackMetric(e,n)},t.prototype.startTrackPage=function(e){this.appInsights.startTrackPage(e)},t.prototype.stopTrackPage=function(e,n,r,i){this.appInsights.stopTrackPage(e,n,r,i)},t.prototype.startTrackEvent=function(e){this.appInsights.startTrackEvent(e)},t.prototype.stopTrackEvent=function(e,n,r){this.appInsights.stopTrackEvent(e,n,r)},t.prototype.addTelemetryInitializer=function(e){return this.appInsights.addTelemetryInitializer(e)},t.prototype.setAuthenticatedUserContext=function(e,n,r){r===void 0&&(r=!1),this.properties.context.user.setAuthenticatedUserContext(e,n,r)},t.prototype.clearAuthenticatedUserContext=function(){this.properties.context.user.clearAuthenticatedUserContext()},t.prototype.trackDependencyData=function(e){this.dependencies.trackDependencyData(e)},t.prototype.flush=function(e){var n=this;e===void 0&&(e=!0),Jo(this.core,function(){return"AISKU.flush"},function(){vn(n.core.getTransmissionControls(),function(r){vn(r,function(i){i.flush(e)})})},null,e)},t.prototype.onunloadFlush=function(e){e===void 0&&(e=!0),vn(this.core.getTransmissionControls(),function(n){vn(n,function(r){r.onunloadFlush?r.onunloadFlush():r.flush(e)})})},t.prototype.loadAppInsights=function(e,n,r){var i=this;e===void 0&&(e=!1);var o=this;function a(c){if(c){var l="";E(o._snippetVersion)||(l+=o._snippetVersion),e&&(l+=".lg"),o.context&&o.context.internal&&(o.context.internal.snippetVer=l||"-"),fn(o,function(u,d){en(u)&&!Be(d)&&u&&u[0]!=="_"&&ou.indexOf(u)===-1&&(c[u]=d)})}}return s(a,"o"),e&&o.config.extensions&&o.config.extensions.length>0&&ki("Extensions not allowed in legacy mode"),Jo(o.core,function(){return"AISKU.loadAppInsights"},function(){var c=[];c.push(o._sender),c.push(o.properties),c.push(o.dependencies),c.push(o.appInsights),o.core.initialize(o.config,c,n,r),o.context=o.properties.context,iu&&o.context&&(o.context.internal.sdkSrc=iu),a(o.snippet),o.emptyQueue(),o.pollInternalLogs(),o.addHousekeepingBeforeUnload(i)}),o},t.prototype.updateSnippetDefinitions=function(e){nd(e,this,function(n){return n&&ou.indexOf(n)===-1})},t.prototype.emptyQueue=function(){var e=this;try{if(vr(e.snippet.queue)){for(var n=e.snippet.queue.length,r=0;r<n;r++){var i=e.snippet.queue[r];i()}e.snippet.queue=void 0,delete e.snippet.queue}}catch(a){var o={};a&&Be(a.toString)&&(o.exception=a.toString())}},t.prototype.pollInternalLogs=function(){this.core.pollInternalLogs()},t.prototype.addHousekeepingBeforeUnload=function(e){if(vs()||od()){var n=s(function(){e.onunloadFlush(!1),vn(e.appInsights.core._extensions,function(i){if(i.identifier===ua)return i&&i.context&&i.context._sessionManager&&i.context._sessionManager.backup(),-1})},"r");if(!e.appInsights.config.disableFlushOnBeforeUnload){var r=Ao("beforeunload",n);r=Ao("unload",n)||r,r=Ao("pagehide",n)||r,r=Ao("visibilitychange",n)||r,!r&&!Lp()&&e.appInsights.core.logger.throwInternal(he.CRITICAL,Y.FailedToAddHandlerForOnBeforeUnload,"Could not add handler for beforeunload and pagehide")}e.appInsights.config.disableFlushOnUnload||(Ao("pagehide",n),Ao("visibilitychange",n))}},t.prototype.getSender=function(){return this._sender},t.prototype.getSKUDefaults=function(){var e=this;e.config.diagnosticLogInterval=e.config.diagnosticLogInterval&&e.config.diagnosticLogInterval>0?e.config.diagnosticLogInterval:1e4},t}(),function(){var t=null,e=!1,n=["://js.monitor.azure.com/","://az416426.vo.msecnd.net/"];try{var r=(document||{}).currentScript;r&&(t=r.src)}catch(c){}if(t)try{var i=t.toLowerCase();if(i){for(var o="",a=0;a<n.length;a++)if(i.indexOf(n[a])!==-1){o="cdn"+(a+1),i.indexOf("/scripts/")===-1&&(i.indexOf("/next/")!==-1?o+="-next":i.indexOf("/beta/")!==-1&&(o+="-beta")),iu=o+(e?".mod":"");break}}}catch(c){}}()}),Dh,Th,lm=O(()=>{dr(),wn(),Dh=["snippet","getDefaultConfig","_hasLegacyInitializers","_queue","_processLegacyInitializers"],Th=function(){function t(e,n){this._hasLegacyInitializers=!1,this._queue=[],this.config=t.getDefaultConfig(e.config),this.appInsightsNew=n,this.context={addTelemetryInitializer:this.addTelemetryInitializers.bind(this)}}return s(t,"t"),t.getDefaultConfig=function(e){return e||(e={}),e.endpointUrl=e.endpointUrl||"https://dc.services.visualstudio.com/v2/track",e.sessionRenewalMs=30*60*1e3,e.sessionExpirationMs=24*60*60*1e3,e.maxBatchSizeInBytes=e.maxBatchSizeInBytes>0?e.maxBatchSizeInBytes:102400,e.maxBatchInterval=isNaN(e.maxBatchInterval)?15e3:e.maxBatchInterval,e.enableDebug=Un(e.enableDebug),e.disableExceptionTracking=Un(e.disableExceptionTracking),e.disableTelemetry=Un(e.disableTelemetry),e.verboseLogging=Un(e.verboseLogging),e.emitLineDelimitedJson=Un(e.emitLineDelimitedJson),e.diagnosticLogInterval=e.diagnosticLogInterval||1e4,e.autoTrackPageVisitTime=Un(e.autoTrackPageVisitTime),(isNaN(e.samplingPercentage)||e.samplingPercentage<=0||e.samplingPercentage>=100)&&(e.samplingPercentage=100),e.disableAjaxTracking=Un(e.disableAjaxTracking),e.maxAjaxCallsPerView=isNaN(e.maxAjaxCallsPerView)?500:e.maxAjaxCallsPerView,e.isBeaconApiDisabled=Un(e.isBeaconApiDisabled,!0),e.disableCorrelationHeaders=Un(e.disableCorrelationHeaders),e.correlationHeaderExcludedDomains=e.correlationHeaderExcludedDomains||["*.blob.core.windows.net","*.blob.core.chinacloudapi.cn","*.blob.core.cloudapi.de","*.blob.core.usgovcloudapi.net"],e.disableFlushOnBeforeUnload=Un(e.disableFlushOnBeforeUnload),e.disableFlushOnUnload=Un(e.disableFlushOnUnload,e.disableFlushOnBeforeUnload),e.enableSessionStorageBuffer=Un(e.enableSessionStorageBuffer,!0),e.isRetryDisabled=Un(e.isRetryDisabled),e.isCookieUseDisabled=Un(e.isCookieUseDisabled),e.isStorageUseDisabled=Un(e.isStorageUseDisabled),e.isBrowserLinkTrackingEnabled=Un(e.isBrowserLinkTrackingEnabled),e.enableCorsCorrelation=Un(e.enableCorsCorrelation),e},t.prototype.addTelemetryInitializers=function(e){var n=this;this._hasLegacyInitializers||(this.appInsightsNew.addTelemetryInitializer(function(r){n._processLegacyInitializers(r)}),this._hasLegacyInitializers=!0),this._queue.push(e)},t.prototype.getCookieMgr=function(){return this.appInsightsNew.getCookieMgr()},t.prototype.startTrackPage=function(e){this.appInsightsNew.startTrackPage(e)},t.prototype.stopTrackPage=function(e,n,r,i){this.appInsightsNew.stopTrackPage(e,n,r)},t.prototype.trackPageView=function(e,n,r,i,o){var a={name:e,uri:n,properties:r,measurements:i};this.appInsightsNew.trackPageView(a)},t.prototype.trackEvent=function(e,n,r){this.appInsightsNew.trackEvent({name:e})},t.prototype.trackDependency=function(e,n,r,i,o,a,c){this.appInsightsNew.trackDependencyData({id:e,target:r,type:i,duration:o,properties:{HttpMethod:n},success:a,responseCode:c})},t.prototype.trackException=function(e,n,r,i,o){this.appInsightsNew.trackException({exception:e})},t.prototype.trackMetric=function(e,n,r,i,o,a){this.appInsightsNew.trackMetric({name:e,average:n,sampleCount:r,min:i,max:o})},t.prototype.trackTrace=function(e,n,r){this.appInsightsNew.trackTrace({message:e,severityLevel:r})},t.prototype.flush=function(e){this.appInsightsNew.flush(e)},t.prototype.setAuthenticatedUserContext=function(e,n,r){this.appInsightsNew.context.user.setAuthenticatedUserContext(e,n,r)},t.prototype.clearAuthenticatedUserContext=function(){this.appInsightsNew.context.user.clearAuthenticatedUserContext()},t.prototype._onerror=function(e,n,r,i,o){this.appInsightsNew._onerror({message:e,url:n,lineNumber:r,columnNumber:i,error:o})},t.prototype.startTrackEvent=function(e){this.appInsightsNew.startTrackEvent(e)},t.prototype.stopTrackEvent=function(e,n,r){this.appInsightsNew.stopTrackEvent(e,n,r)},t.prototype.downloadAndSetup=function(e){ki("downloadAndSetup not implemented in web SKU")},t.prototype.updateSnippetDefinitions=function(e){nd(e,this,function(n){return n&&Dh.indexOf(n)===-1})},t.prototype.loadAppInsights=function(){var e=this;if(this.config.iKey){var n=this.trackPageView;this.trackPageView=function(o,a,c){n.apply(e,[null,o,a,c])}}var r="logPageView";typeof this.snippet[r]=="function"&&(this[r]=function(o,a,c){e.trackPageView(null,o,a,c)});var i="logEvent";return typeof this.snippet[i]=="function"&&(this[i]=function(o,a,c){e.trackEvent(o,a,c)}),this},t.prototype._processLegacyInitializers=function(e){return e.tags[oa]=this._queue,e},t}()}),Ph,um=O(()=>{lm(),Ih(),wn(),Ph=function(){function t(){}return s(t,"t"),t.getAppInsights=function(e,n){var r=new au(e),i=n!==2;if(na(),n===2)return r.updateSnippetDefinitions(e),r.loadAppInsights(i),r;var o=new Th(e,r);return o.updateSnippetDefinitions(e),r.loadAppInsights(i),o},t}()}),Rh={};ln(Rh,{AppInsightsCore:()=>ul,ApplicationAnalytics:()=>Vl,ApplicationInsights:()=>au,ApplicationInsightsContainer:()=>Ph,BaseCore:()=>cl,BaseTelemetryPlugin:()=>Po,CoreUtils:()=>Ms,DependenciesPlugin:()=>ru,DistributedTracingModes:()=>_i,Event:()=>Ei,Exception:()=>Or,LoggingSeverity:()=>he,Metric:()=>Ni,NotificationManager:()=>ll,PageView:()=>xi,PageViewPerformance:()=>Zi,PerfEvent:()=>Yo,PerfManager:()=>jc,PropertiesPlugin:()=>Jl,RemoteDependencyData:()=>Oi,Sender:()=>Ql,SeverityLevel:()=>Ha,Telemetry:()=>xh,Trace:()=>Yi,Util:()=>Rl,_InternalMessageId:()=>Y,doPerf:()=>Jo});var dm=O(()=>{Ih(),um(),wn(),dr(),sh(),Kf(),Ch(),_h()}),fm=s((t,e,n)=>_(void 0,null,function*(){let r=yield Promise.resolve().then(jn.bind(jn,850)),i=yield Promise.resolve().then(jn.bind(jn,156)),o=new r.AppInsightsCore,a=new i.PostChannel,c={instrumentationKey:t,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[a]]};if(n){c.extensionConfig={};let u={alwaysUseXhrOverride:!0,httpXHROverride:n};c.extensionConfig[a.identifier]=u}let l=e.workspace.getConfiguration("telemetry").get("internalTesting");return o.initialize(c,[]),o.addTelemetryInitializer(u=>{var d,h;!l||(u.ext=(d=u.ext)!=null?d:{},u.ext.utc=(h=u.ext.utc)!=null?h:{},u.ext.utc.flags=8462029)}),o}),"wc"),hm=s((t,e,n)=>_(void 0,null,function*(){let r=yield fm(t,e,n);return{logEvent:(i,o)=>{try{r==null||r.track({name:i,baseData:{name:i,properties:o==null?void 0:o.properties,measurements:o==null?void 0:o.measurements}})}catch(a){throw new Error(`Failed to log event to app insights!
`+a.message)}},logException:(i,o)=>{throw new Error("1DS SDK does not support logging exceptions, please use logEvent for exception tracking")},flush:()=>_(void 0,null,function*(){try{r==null||r.unload()}catch(i){throw new Error(`Failed to flush app insights!
`+i.message)}})}}),"yo"),gm=s(class{constructor(t,e){this._instantiationStatus=0,this._eventQueue=[],this._exceptionQueue=[],this._clientFactory=e,this._key=t}logEvent(t,e){if(!this._telemetryClient){this._instantiationStatus!==2&&this._eventQueue.push({eventName:t,data:e});return}this._telemetryClient.logEvent(t,e)}logException(t,e){if(!this._telemetryClient){this._instantiationStatus!==2&&this._exceptionQueue.push({exception:t,data:e});return}this._telemetryClient.logException(t,e)}flush(){return _(this,null,function*(){this._telemetryClient&&(yield this._telemetryClient.flush(),this._telemetryClient=void 0)})}_flushQueues(){this._eventQueue.forEach(({eventName:t,data:e})=>this.logEvent(t,e)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:t,data:e})=>this.logException(t,e)),this._exceptionQueue=[]}instantiateAppender(){this._instantiationStatus===0&&(this._instantiationStatus=1,this._clientFactory(this._key).then(t=>{this._telemetryClient=t,this._instantiationStatus=2,this._flushQueues()}).catch(t=>{console.error(t),this._instantiationStatus=2}))}},"Ln"),Hi=s(class{constructor(t){this.vscodeAPI=t}getTelemetryLevel(){let t="telemetry",e="enableTelemetry";try{let n=this.vscodeAPI.env.telemetryConfiguration;return n.isUsageEnabled&&n.isErrorsEnabled&&n.isCrashEnabled?"on":n.isErrorsEnabled&&n.isCrashEnabled?"error":"off"}catch(n){return this.vscodeAPI.env.isTelemetryEnabled!==void 0?this.vscodeAPI.env.isTelemetryEnabled?"on":"off":this.vscodeAPI.workspace.getConfiguration(t).get(e)?"on":"off"}}static applyReplacements(t,e){for(let n of Object.keys(t))for(let r of e)r.lookup.test(n)&&(r.replacementString!==void 0?t[n]=r.replacementString:delete t[n])}static shouldUseOneDataSystemSDK(t){return t.length===74&&t[32]==="-"&&t[41]==="-"&&t[46]==="-"&&t[51]==="-"&&t[56]==="-"&&t[69]==="-"}static getInstance(t){return Hi._instance||(Hi._instance=new Hi(t)),Hi._instance}},"je"),pm=s(class{constructor(t,e,n,r,i,o){this.extensionId=t,this.extensionVersion=e,this.telemetryAppender=n,this.osShim=r,this.vscodeAPI=i,this.firstParty=!1,this.userOptIn=!1,this.errorOptIn=!1,this.disposables=[],this.firstParty=!!o,this.updateUserOptStatus(),i.env.onDidChangeTelemetryEnabled!==void 0?(this.disposables.push(i.env.onDidChangeTelemetryEnabled(()=>this.updateUserOptStatus())),this.disposables.push(i.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))):this.disposables.push(i.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))}updateUserOptStatus(){let t=Hi.getInstance(this.vscodeAPI).getTelemetryLevel();this.userOptIn=t==="on",this.errorOptIn=t==="error"||this.userOptIn,(this.userOptIn||this.errorOptIn)&&this.telemetryAppender.instantiateAppender()}cleanRemoteName(t){if(!t)return"none";let e="other";return["ssh-remote","dev-container","attached-container","wsl","codespaces"].forEach(n=>{t.indexOf(`${n}`)===0&&(e=n)}),e}get extension(){return this._extension===void 0&&(this._extension=this.vscodeAPI.extensions.getExtension(this.extensionId)),this._extension}cloneAndChange(t,e){if(t===null||typeof t!="object"||typeof e!="function")return t;let n={};for(let r in t)n[r]=e(r,t[r]);return n}shouldSendErrorTelemetry(){return this.errorOptIn===!1?!1:this.firstParty?!(this.vscodeAPI.env.remoteName&&this.cleanRemoteName(this.vscodeAPI.env.remoteName)==="other"):!0}getCommonProperties(){let t={};if(t["common.os"]=this.osShim.platform,t["common.nodeArch"]=this.osShim.architecture,t["common.platformversion"]=(this.osShim.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),t["common.extname"]=this.extensionId,t["common.extversion"]=this.extensionVersion,this.vscodeAPI&&this.vscodeAPI.env){switch(t["common.vscodemachineid"]=this.vscodeAPI.env.machineId,t["common.vscodesessionid"]=this.vscodeAPI.env.sessionId,t["common.vscodeversion"]=this.vscodeAPI.version,t["common.isnewappinstall"]=this.vscodeAPI.env.isNewAppInstall?this.vscodeAPI.env.isNewAppInstall.toString():"false",t["common.product"]=this.vscodeAPI.env.appHost,this.vscodeAPI.env.uiKind){case this.vscodeAPI.UIKind.Web:t["common.uikind"]="web";break;case this.vscodeAPI.UIKind.Desktop:t["common.uikind"]="desktop";break;default:t["common.uikind"]="unknown"}t["common.remotename"]=this.cleanRemoteName(this.vscodeAPI.env.remoteName)}return t}anonymizeFilePaths(t,e){let n;if(t==null)return"";let r=[];this.vscodeAPI.env.appRoot!==""&&r.push(new RegExp(this.vscodeAPI.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")),this.extension&&r.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));let i=t;if(e){let o=[];for(let u of r)for(;(n=u.exec(t))&&n;)o.push([n.index,u.lastIndex]);let a=/^[\\/]?(node_modules|node_modules\.asar)[\\/]/,c=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-._]+(\\\\|\\|\/))+[\w-._]*/g,l=0;for(i="";(n=c.exec(t))&&n;)n[0]&&!a.test(n[0])&&o.every(([u,d])=>n.index<u||n.index>=d)&&(i+=t.substring(l,n.index)+"<REDACTED: user-file-path>",l=c.lastIndex);l<t.length&&(i+=t.substr(l))}for(let o of r)i=i.replace(o,"");return i}removePropertiesWithPossibleUserInfo(t){if(typeof t!="object")return;let e={};for(let n of Object.keys(t)){let r=t[n];if(!r)continue;let i=/@[a-zA-Z0-9-.]+/,o=/(key|token|sig|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/,a=/xox[pbaors]-[a-zA-Z0-9]+-[a-zA-Z0-9-]+?/;o.test(r.toLowerCase())?e[n]="<REDACTED: secret>":i.test(r)?e[n]="<REDACTED: email>":a.test(r)?e[n]="<REDACTED: token>":e[n]=r}return e}get telemetryLevel(){switch(Hi.getInstance(this.vscodeAPI).getTelemetryLevel()){case"on":return"all";case"error":return"error";case"off":return"off"}}internalSendTelemetryEvent(t,e,n,r,i){if((this.userOptIn||i)&&t!==""){if(e=dt(dt({},e),this.getCommonProperties()),r){let o=this.cloneAndChange(e,(a,c)=>this.anonymizeFilePaths(c,this.firstParty));e=this.removePropertiesWithPossibleUserInfo(o)}e=e!=null?e:{},n=n!=null?n:{},t=`${this.extensionId}/${t}`,this.telemetryAppender.logEvent(t,{properties:e,measurements:n})}}sendTelemetryEvent(t,e,n){this.internalSendTelemetryEvent(t,e,n,!0,!1)}sendRawTelemetryEvent(t,e,n){this.internalSendTelemetryEvent(t,e,n,!1,!1)}sendDangerousTelemetryEvent(t,e,n,r=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryEvent(t,e,n,r,!0)}internalSendTelemetryErrorEvent(t,e,n,r,i){if((this.shouldSendErrorTelemetry()||i)&&t!==""){if(e=dt(dt({},e),this.getCommonProperties()),r){let o=this.cloneAndChange(e,(a,c)=>this.anonymizeFilePaths(c,this.firstParty));e=this.removePropertiesWithPossibleUserInfo(o)}e=e!=null?e:{},n=n!=null?n:{},t=`${this.extensionId}/${t}`,this.telemetryAppender.logEvent(t,{properties:e,measurements:n})}}sendTelemetryErrorEvent(t,e,n){this.internalSendTelemetryErrorEvent(t,e,n,!0,!1)}sendDangerousTelemetryErrorEvent(t,e,n,r=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryErrorEvent(t,e,n,r,!0)}internalSendTelemetryException(t,e,n,r,i){if((this.shouldSendErrorTelemetry()||i)&&t){if(e=dt(dt({},e),this.getCommonProperties()),r){let o=this.cloneAndChange(e,(a,c)=>this.anonymizeFilePaths(c,this.firstParty));t.stack&&(t.stack=this.anonymizeFilePaths(t.stack,this.firstParty)),e=this.removePropertiesWithPossibleUserInfo(o)}e=e!=null?e:{},n=n!=null?n:{},this.telemetryAppender.logException(t,{properties:e,measurements:n})}}sendTelemetryException(t,e,n){this.internalSendTelemetryException(t,e,n,!0,!1)}sendDangerousTelemetryException(t,e,n,r=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryException(t,e,n,r,!0)}dispose(){return this.telemetryAppender.flush(),Promise.all(this.disposables.map(t=>t.dispose()))}},"_n"),vm=s((t,e)=>_(void 0,null,function*(){let n;try{let r=yield Promise.resolve().then(()=>(dm(),Rh)),i;t&&t.indexOf("AIF-")===0&&(i="https://vscode.vortex.data.microsoft.com/collect/v1"),n=new r.ApplicationInsights({config:{instrumentationKey:t,endpointUrl:i,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!0,disableInstrumentationKeyValidation:!0}}),n.loadAppInsights(),i&&fetch(i).catch(()=>n=void 0)}catch(r){return Promise.reject(r)}return{logEvent:(r,i)=>{let o=dt(dt({},i==null?void 0:i.properties),i==null?void 0:i.measurements);e!=null&&e.length&&Hi.applyReplacements(o,e),n==null||n.trackEvent({name:r},o)},logException:(r,i)=>{let o=dt(dt({},i==null?void 0:i.properties),i==null?void 0:i.measurements);e!=null&&e.length&&Hi.applyReplacements(o,e),n==null||n.trackException({exception:r,properties:o})},flush:()=>_(void 0,null,function*(){n==null||n.flush()})}}),"Al"),mm=s(class extends pm{constructor(t,e,n,r,i){let o=s(c=>vm(c,i),"o");Hi.shouldUseOneDataSystemSDK(n)&&(o=s(c=>hm(c,f),"o"));let a=new gm(n,o);n&&(n.indexOf("AIF-")===0||Hi.shouldUseOneDataSystemSDK(n))&&(r=!0),super(t,e,a,{release:navigator.appVersion,platform:"web",architecture:"web"},f,r)}},"go");/*!
 * Microsoft Dynamic Proto Utility, 1.1.6
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */const ym="Type of classified event does not match event properties",su=s(class{constructor(t){this.context=t,this.sharedProperties={},su._instance=this,this.reporter=new mm(t.extension.id,t.extension.packageJSON.version,su.ingestionKey,!0)}static get instance(){return this._instance}dispose(){this.reporter.dispose()}publicLog2(t,e){e!==ym&&this.reporter.sendTelemetryEvent(t,{...this.sharedProperties,...e})}sendEvent(t,e,n){this.reporter.sendTelemetryEvent(t,{...this.sharedProperties,...e},n)}sendErrorEvent(t,e,n){this.reporter.sendTelemetryErrorEvent(t,{...this.sharedProperties,...e},n)}sendException(t,e,n){this.reporter.sendTelemetryException(t,{...this.sharedProperties,...e},n)}setSharedProperty(t,e){this.sharedProperties[t]=e}reportWorkbenchLoadResult(t){const e="_codespaces.webeditor.connectWorkspace";f.env.appHost==="github.dev"&&(ce.debug(`Executing ${e}`),t={...t,errorDetail:t.errorDetail instanceof Error?t.errorDetail.name:void 0},f.commands.executeCommand(e,t).then(n=>{},n=>{ce.debug(`Failed to execute ${e}`,n)}))}},"_TelemetryService");let qa=su;qa.ingestionKey="0c6ae279ed8443289764825290e4f9e2-1a736e7c-1324-4338-be46-fc2a58ae4d14-7255";function Ka(t){const e=performance.now()*.001;let n=Math.floor(e),r=Math.floor(e%1*1e9);return t!==void 0&&(n=n-t[0],r=r-t[1],r<0&&(n--,r+=1e9)),[n,r]}s(Ka,"hrtime");let cu=0;function wm(){return cu===Number.MAX_SAFE_INTEGER&&(cu=0),++cu}s(wm,"getNextInstanceId");const Oo=s(class{constructor(t,e,...n){this.context=t,this.instance=`[${wm().toString().padStart(5)}] `;var r,i,o,a,c,l;let u;if(typeof(e==null?void 0:e.log)=="boolean"?u=e.log?{}:void 0:u=(r=e==null?void 0:e.log)!=null?r:{},this.logLevel=(i=e==null?void 0:e.logLevel)!=null?i:mn.Info,this.time=Ka(),u){if(!ce.enabled(this.logLevel))return;n.length?ec(this.logLevel,`${this.instance}${(o=u.prefix)!=null?o:""}${t}${(a=u.message)!=null?a:""}`,...n):ec(this.logLevel,`${this.instance}${(c=u.prefix)!=null?c:""}${t}${(l=u.message)!=null?l:""}`)}}log(t){this.logCore(this.context,t,!1)}logStep(t,e){(!t||e)&&this.logCore(this.context,e,!1),this.step=t?{time:Ka(),label:t}:void 0}restart(t){this.logCore(this.context,t,!0),this.step=void 0,this.time=Ka()}stop(t){this.restart(t)}logCore(t,e,n){var r,i,o,a,c,l,u;if(!ce.enabled(this.logLevel))return;let d="";if(this.step){const[C,v]=Ka(this.step.time),m=C*1e3+Math.floor(v/1e6);d=`${this.step.label?`${this.step.label} took `:""}${m} ms`}if(!n){ec(this.logLevel,`${this.instance}${(r=e==null?void 0:e.prefix)!=null?r:""}${t}${(i=e==null?void 0:e.message)!=null?i:""}${d?` ${d}`:""}${(o=e==null?void 0:e.suffix)!=null?o:""}`);return}const[h,g]=Ka(this.time),p=h*1e3+Math.floor(g/1e6);ec(p>500?mn.Warn:this.logLevel,`${this.instance}${(a=e==null?void 0:e.prefix)!=null?a:""}${t}${(c=e==null?void 0:e.message)!=null?c:""}${(l=e==null?void 0:e.took)!=null?l:" took "}${p} ms${d?` (${d})`:""}${(u=e==null?void 0:e.suffix)!=null?u:""}`)}static start(t,e,...n){var r;(r=Oo.watches.get(t))==null||r.log(),Oo.watches.set(t,new Oo(t,e,...n))}static log(t,e){var n;(n=Oo.watches.get(t))==null||n.log(e)}static stop(t,e){var n;(n=Oo.watches.get(t))==null||n.stop(e),Oo.watches.delete(t)}},"_Stopwatch");let Ln=Oo;Ln.watches=new Map;function ec(t,e,...n){switch(t){case mn.Warn:ce.warn(e,...n);break;case mn.Info:ce.log(e,...n);break;default:ce.debug(e,...n);break}}s(ec,"log");class Ah{constructor(e){this.providerService=e,this.providers=[],this.handledRepositories=new Set,this.services=new Map,this.disposable=f.Disposable.from(e.onDidChangeRepositories(n=>{for(const r of n.added)this.repositoryOpened(r);for(const r of n.removed)this.repositoryClosed(r)}),mt.onDidChange(n=>{for(const r of this.services.values()){const i=r.service.getRepository();n.affectsConfiguration("remoteHub.richNavigation.indexMode",i.uri)&&r.service.updateIndexMode().catch(o=>{ce.error(o)})}}));for(const n of this.providerService.repositories)this.repositoryOpened(n)}dispose(){this.disposable.dispose()}register(e){const n=this.providers.length;return this.providers.push(e),{dispose:()=>this.providers.splice(n,1)}}async repositoryOpened(e){const n=R(e.uri);if(!this.handledRepositories.has(n)){this.handledRepositories.add(n);for(const r of this.providers){const i=await r.createNavigationService(this.providerService,e);if(i!==void 0){const o=i();this.services.set(n,{service:o});break}}}}repositoryClosed(e){const n=R(e.uri);this.handledRepositories.delete(n);const r=this.services.get(n);r!==void 0&&(r.service.dispose(),this.services.delete(R(e.uri)))}}s(Ah,"CodeNavigationServices");const Ga=globalThis.fetch;async function Cm(t,e,n){const r=new AbortController;n.onCancellationRequested(()=>r.abort());try{return await globalThis.fetch(t,{...e,signal:r.signal})}catch(i){throw n.isCancellationRequested?new CancellationError:i}}s(Cm,"fetchWithCancellation");async function hy(t,e,n,r,i){if(n===0)throw new CancellationError;const o=new CancellationTokenSource;r.onCancellationRequested(()=>o.cancel());try{const a=await Cm(t,e,o.token);if(a.body){const c=[];let l=0;const u=a.body.getReader();let d=3;for(;;){let{done:h,value:g}=await u.read();if(h){const C=c.reduce((b,w)=>b+w.length,0),v=new Uint8Array(C);let m=0;for(const b of c)v.set(b,m),m+=b.length;return v}g&&(c.push(g),l+=g.length);const p=Math.floor(l/(1024*1024));if(d<p){d=p;const C={message:p+" MB"};i.report(C)}if(n!==void 0&&l>n)throw u.cancel(),o.cancel(),new Error("LIMIT_HIT")}}}catch(a){throw r.isCancellationRequested?new CancellationError:a}throw new CancellationError}s(hy,"fetchUInt8ArrayWithMaxSizeAndCancellation");/*! (c) Andrea Giammarchi - ISC */var tc={};try{(function(t,e){if(new t("q=%2B").get("q")!==e||new t({q:e}).get("q")!==e||new t([["q",e]]).get("q")!==e||new t(`q=
`).toString()!=="q=%0A"||new t({q:" &"}).toString()!=="q=+%26"||new t({q:"%zx"}).toString()!=="q=%25zx")throw t;tc.URLSearchParams=t})(URLSearchParams,"+")}catch(t){(function(e,n,r){"use strict";var i=e.create,o=e.defineProperty,a=/[!'\(\)~]|%20|%00/g,c=/%(?![0-9a-fA-F]{2})/g,l=/\+/g,u={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"},d={append:function(w,P){C(this._ungap,w,P)},delete:function(w){delete this._ungap[w]},get:function(w){return this.has(w)?this._ungap[w][0]:null},getAll:function(w){return this.has(w)?this._ungap[w].slice(0):[]},has:function(w){return w in this._ungap},set:function(w,P){this._ungap[w]=[n(P)]},forEach:function(w,P){var F=this;for(var A in F._ungap)F._ungap[A].forEach(Z,A);function Z($e){w.call(P,$e,n(A),F)}s(Z,"invoke")},toJSON:function(){return{}},toString:function(){var w=[];for(var P in this._ungap)for(var F=m(P),A=0,Z=this._ungap[P];A<Z.length;A++)w.push(F+"="+m(Z[A]));return w.join("&")}};for(var h in d)o(g.prototype,h,{configurable:!0,writable:!0,value:d[h]});tc.URLSearchParams=g;function g(w){var P=i(null);switch(o(this,"_ungap",{value:P}),!0){case!w:break;case typeof w=="string":w.charAt(0)==="?"&&(w=w.slice(1));for(var F=w.split("&"),A=0,Z=F.length;A<Z;A++){var $e=F[A],fe=$e.indexOf("=");-1<fe?C(P,v($e.slice(0,fe)),v($e.slice(fe+1))):$e.length&&C(P,v($e),"")}break;case r(w):for(var A=0,Z=w.length;A<Z;A++){var $e=w[A];C(P,$e[0],$e[1])}break;case"forEach"in w:w.forEach(p,P);break;default:for(var It in w)C(P,It,w[It])}}s(g,"URLSearchParams");function p(w,P){C(this,P,w)}s(p,"addEach");function C(w,P,F){var A=r(F)?F.join(","):F;P in w?w[P].push(A):w[P]=[A]}s(C,"appendTo");function v(w){return decodeURIComponent(w.replace(c,"%25").replace(l," "))}s(v,"decode");function m(w){return encodeURIComponent(w).replace(a,b)}s(m,"encode");function b(w){return u[w]}s(b,"replacer")})(Object,String,Array.isArray)}(function(t){var e=!1;try{e=!!Symbol.iterator}catch(r){}"forEach"in t||(t.forEach=s(function(i,o){var a=this,c=Object.create(null);this.toString().replace(/=[\s\S]*?(?:&|$)/g,"=").split("=").forEach(function(l){!l.length||l in c||(c[l]=a.getAll(l)).forEach(function(u){i.call(o,u,l,a)})})},"forEach")),"keys"in t||(t.keys=s(function(){return n(this,function(i,o){this.push(o)})},"keys")),"values"in t||(t.values=s(function(){return n(this,function(i,o){this.push(i)})},"values")),"entries"in t||(t.entries=s(function(){return n(this,function(i,o){this.push([o,i])})},"entries")),e&&!(Symbol.iterator in t)&&(t[Symbol.iterator]=t.entries),"sort"in t||(t.sort=s(function(){for(var i=this.entries(),o=i.next(),a=o.done,c=[],l=Object.create(null),u,d,h;!a;)h=o.value,d=h[0],c.push(d),d in l||(l[d]=[]),l[d].push(h[1]),o=i.next(),a=o.done;for(c.sort(),u=0;u<c.length;u++)this.delete(c[u]);for(u=0;u<c.length;u++)d=c[u],this.append(d,l[d].shift())},"sort"));function n(r,i){var o=[];return r.forEach(i,o),e?o[Symbol.iterator]():{next:function(){var a=o.shift();return{done:a===void 0,value:a}}}}s(n,"iterator"),function(r){var i=r.defineProperty,o=r.getOwnPropertyDescriptor,a=s(function(h){function g(v,m){t.append.call(this,v,m),v=this.toString(),h.set.call(this._usp,v?"?"+v:"")}s(g,"append");function p(v){t.delete.call(this,v),v=this.toString(),h.set.call(this._usp,v?"?"+v:"")}s(p,"del");function C(v,m){t.set.call(this,v,m),v=this.toString(),h.set.call(this._usp,v?"?"+v:"")}return s(C,"set"),function(v,m){return v.append=g,v.delete=p,v.set=C,i(v,"_usp",{configurable:!0,writable:!0,value:m})}},"createSearchParamsPollute"),c=s(function(h){return function(g,p){return i(g,"_searchParams",{configurable:!0,writable:!0,value:h(p,g)}),p}},"createSearchParamsCreate"),l=s(function(h){var g=h.append;h.append=t.append,URLSearchParams.call(h,h._usp.search.slice(1)),h.append=g},"updateSearchParams"),u=s(function(h,g){if(!(h instanceof g))throw new TypeError("'searchParams' accessed on an object that does not implement interface "+g.name)},"verifySearchParams"),d=s(function(h){var g=h.prototype,p=o(g,"searchParams"),C=o(g,"href"),v=o(g,"search"),m;!p&&v&&v.set&&(m=c(a(v)),r.defineProperties(g,{href:{get:function(){return C.get.call(this)},set:function(b){var w=this._searchParams;C.set.call(this,b),w&&l(w)}},search:{get:function(){return v.get.call(this)},set:function(b){var w=this._searchParams;v.set.call(this,b),w&&l(w)}},searchParams:{get:function(){return u(this,h),this._searchParams||m(this,new URLSearchParams(this.search.slice(1)))},set:function(b){u(this,h),m(this,b)}}}))},"upgradeClass");try{d(HTMLAnchorElement),/^function|object$/.test(typeof URL)&&URL.prototype&&d(URL)}catch(h){}}(Object)})(tc.URLSearchParams.prototype,Object);const kh=tc.URLSearchParams;var nc,Sm=new Uint8Array(16);function bm(){if(!nc&&(nc=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!nc))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return nc(Sm)}s(bm,"rng");const _m=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Em(t){return typeof t=="string"&&_m.test(t)}s(Em,"validate");const xm=Em;for(var yr=[],lu=0;lu<256;++lu)yr.push((lu+256).toString(16).substr(1));function Im(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(yr[t[e+0]]+yr[t[e+1]]+yr[t[e+2]]+yr[t[e+3]]+"-"+yr[t[e+4]]+yr[t[e+5]]+"-"+yr[t[e+6]]+yr[t[e+7]]+"-"+yr[t[e+8]]+yr[t[e+9]]+"-"+yr[t[e+10]]+yr[t[e+11]]+yr[t[e+12]]+yr[t[e+13]]+yr[t[e+14]]+yr[t[e+15]]).toLowerCase();if(!xm(n))throw TypeError("Stringified UUID is invalid");return n}s(Im,"stringify");const Dm=Im;function Tm(t,e,n){t=t||{};var r=t.random||(t.rng||bm)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return Dm(r)}s(Tm,"v4");const Mh=Tm,Wt=de.loadMessageBundle(),uu=60,du=uu*60,Qa=du*24,Fh=Qa*7,Lh=Qa*30,Nh=Qa*365;function pa(t,e){typeof t!="number"&&(t=t.getTime());const n=Math.round((new Date().getTime()-t)/1e3);if(n<-30)return Wt("date.fromNow.in","in {0}",pa(new Date().getTime()+n*1e3,{ago:!1,short:e==null?void 0:e.short}));if(n<30)return(e==null?void 0:e.ago)?(e==null?void 0:e.short)?Wt("date.fromNow.seconds.short.ago","secs ago"):Wt("date.fromNow.seconds.ago","A few seconds ago"):(e==null?void 0:e.short)?Wt("date.fromNow.now.short","now"):Wt("date.fromNow.now","Just now");let r;return n<uu?(r=n,(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?Wt("date.fromNow.seconds.singular.short.ago","{0} sec ago",r):Wt("date.fromNow.seconds.singular.ago","{0} second ago",r):(e==null?void 0:e.short)?Wt("date.fromNow.seconds.plural.short.ago","{0} secs ago",r):Wt("date.fromNow.seconds.plural.ago","{0} seconds ago",r):r===1?(e==null?void 0:e.short)?Wt("date.fromNow.seconds.singular.short","{0} sec",r):Wt("date.fromNow.seconds.singular","{0} second",r):(e==null?void 0:e.short)?Wt("date.fromNow.seconds.plural.short","{0} secs",r):Wt("date.fromNow.seconds.plural","{0} seconds",r)):n<du?(r=Math.floor(n/uu),(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?Wt("date.fromNow.minutes.singular.short.ago","{0} min ago",r):Wt("date.fromNow.minutes.singular.ago","{0} minute ago",r):(e==null?void 0:e.short)?Wt("date.fromNow.minutes.plural.short.ago","{0} mins ago",r):Wt("date.fromNow.minutes.plural.ago","{0} minutes ago",r):r===1?(e==null?void 0:e.short)?Wt("date.fromNow.minutes.singular.short","{0} min",r):Wt("date.fromNow.minutes.singular","{0} minute",r):(e==null?void 0:e.short)?Wt("date.fromNow.minutes.plural.short","{0} mins",r):Wt("date.fromNow.minutes.plural","{0} minutes",r)):n<Qa?(r=Math.floor(n/du),(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?Wt("date.fromNow.hours.singular.short.ago","{0} hr ago",r):Wt("date.fromNow.hours.singular.ago","{0} hour ago",r):(e==null?void 0:e.short)?Wt("date.fromNow.hours.plural.short.ago","{0} hrs ago",r):Wt("date.fromNow.hours.plural.ago","{0} hours ago",r):r===1?(e==null?void 0:e.short)?Wt("date.fromNow.hours.singular.short","{0} hr",r):Wt("date.fromNow.hours.singular","{0} hour",r):(e==null?void 0:e.short)?Wt("date.fromNow.hours.plural.short","{0} hrs",r):Wt("date.fromNow.hours.plural","{0} hours",r)):n<Fh?(r=Math.floor(n/Qa),(e==null?void 0:e.ago)?r===1?Wt("date.fromNow.days.singular.ago","{0} day ago",r):Wt("date.fromNow.days.plural.ago","{0} days ago",r):r===1?Wt("date.fromNow.days.singular","{0} day",r):Wt("date.fromNow.days.plural","{0} days",r)):n<Lh?(r=Math.floor(n/Fh),(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?Wt("date.fromNow.weeks.singular.short.ago","{0} wk ago",r):Wt("date.fromNow.weeks.singular.ago","{0} week ago",r):(e==null?void 0:e.short)?Wt("date.fromNow.weeks.plural.short.ago","{0} wks ago",r):Wt("date.fromNow.weeks.plural.ago","{0} weeks ago",r):r===1?(e==null?void 0:e.short)?Wt("date.fromNow.weeks.singular.short","{0} wk",r):Wt("date.fromNow.weeks.singular","{0} week",r):(e==null?void 0:e.short)?Wt("date.fromNow.weeks.plural.short","{0} wks",r):Wt("date.fromNow.weeks.plural","{0} weeks",r)):n<Nh?(r=Math.floor(n/Lh),(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?Wt("date.fromNow.months.singular.short.ago","{0} mo ago",r):Wt("date.fromNow.months.singular.ago","{0} month ago",r):(e==null?void 0:e.short)?Wt("date.fromNow.months.plural.short.ago","{0} mos ago",r):Wt("date.fromNow.months.plural.ago","{0} months ago",r):r===1?(e==null?void 0:e.short)?Wt("date.fromNow.months.singular.short","{0} mo",r):Wt("date.fromNow.months.singular","{0} month",r):(e==null?void 0:e.short)?Wt("date.fromNow.months.plural.short","{0} mos",r):Wt("date.fromNow.months.plural","{0} months",r)):(r=Math.floor(n/Nh),(e==null?void 0:e.ago)?r===1?(e==null?void 0:e.short)?Wt("date.fromNow.years.singular.short.ago","{0} yr ago",r):Wt("date.fromNow.years.singular.ago","{0} year ago",r):(e==null?void 0:e.short)?Wt("date.fromNow.years.plural.short.ago","{0} yrs ago",r):Wt("date.fromNow.years.plural.ago","{0} years ago",r):r===1?(e==null?void 0:e.short)?Wt("date.fromNow.years.singular.short","{0} yr",r):Wt("date.fromNow.years.singular","{0} year",r):(e==null?void 0:e.short)?Wt("date.fromNow.years.plural.short","{0} yrs",r):Wt("date.fromNow.years.plural","{0} years",r))}s(pa,"fromNow");var Oh,Ir;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(Ir||(Ir={}));class Uh{constructor(){this[Oh]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)==null?void 0:e.value}get last(){var e;return(e=this._tail)==null?void 0:e.value}has(e){return this._map.has(e)}get(e,n=Ir.None){const r=this._map.get(e);if(!!r)return n!==Ir.None&&this.touch(r,n),r.value}set(e,n,r=Ir.None){let i=this._map.get(e);if(i)i.value=n,r!==Ir.None&&this.touch(i,r);else{switch(i={key:e,value:n,next:void 0,previous:void 0},r){case Ir.None:this.addItemLast(i);break;case Ir.First:this.addItemFirst(i);break;case Ir.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return Boolean(this.remove(e))}remove(e){const n=this._map.get(e);if(!!n)return this._map.delete(e),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,n){const r=this._state;let i=this._head;for(;i;){if(n?e.bind(n)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){const e=this._state;let n=this._head;const r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){const i={value:n.key,done:!1};return n=n.next,i}return{value:void 0,done:!0}}};return r}values(){const e=this._state;let n=this._head;const r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){const i={value:n.value,done:!1};return n=n.next,i}return{value:void 0,done:!0}}};return r}entries(){const e=this._state;let n=this._head;const r={[Symbol.iterator]:()=>r,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){const i={value:[n.key,n.value],done:!1};return n=n.next,i}return{value:void 0,done:!0}}};return r}[(Oh=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>e;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const n=e.next,r=e.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}e.next=void 0,e.previous=void 0,this._state++}touch(e,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==Ir.First&&n!==Ir.Last)){if(n===Ir.First){if(e===this._head)return;const r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(n===Ir.Last){if(e===this._tail)return;const r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((n,r)=>{e.push([r,n])}),e}fromJSON(e){this.clear();for(const[n,r]of e)this.set(n,r)}}s(Uh,"LinkedMap");class no extends Uh{constructor(e,n=1){super();this._limit=e,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,n=Ir.AsNew){return super.get(e,n)}peek(e){return super.get(e,Ir.None)}set(e,n){return super.set(e,n,Ir.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}s(no,"LRUCache");class Hh{constructor(e){this.menuItem=e}get label(){return`${this.menuItem.icon?`${this.menuItem.icon} `:""}${this.menuItem.title}`}get description(){return this.menuItem.extension.builtin?"Built-in":this.menuItem.extension.name||this.menuItem.extension.id}async execute(e){return void await f.commands.executeCommand(this.menuItem.command,e)}}s(Hh,"ContinueOnCommandQuickPickItem");var fu;(function(t){async function e(n,r,i){const o=Pm(n).map(l=>new Hh(l)),a=f.window.createQuickPick(),c=[];try{return await new Promise(u=>{c.push(a.onDidHide(()=>u(void 0)),a.onDidAccept(()=>{if(a.activeItems.length!==0){const[d]=a.activeItems;u(d)}})),a.title=i,a.placeholder=r,a.items=o,a.show()})}finally{a.dispose(),c.forEach(l=>void l.dispose())}}s(e,"show"),t.show=e})(fu||(fu={}));function Pm(t){var e,n,r,i,o;const a=new Map,[,c]=t.split(".");for(const u of f.extensions.all){const{name:d,displayName:h,contributes:g}=u.packageJSON;if(!g)continue;const p=(n=(e=g.virtualWorkspaces)==null?void 0:e.menus)==null?void 0:n.continueOn;if(p==null?void 0:p.length){const C=new Map(((r=g.commands)!=null?r:[]).map(v=>[v.command,v]));for(const v of p){if(!v.command)continue;if(a.has(v.command)){ce.warn(`Duplicate 'continueOn' menu command: ${v.command}`);continue}const m=C.get(v.command);if(!m){ce.warn(`Unable to find 'continueOn' menu command: ${v.command}`);continue}if(!Rm(v.when))continue;const b=(o=(i=v.group)==null?void 0:i.lastIndexOf("@"))!=null?o:-1;a.set(v.command,{extension:{id:d,name:h,builtin:d===c},command:m.command,title:m.title,icon:typeof m.icon=="string"?m.icon:void 0,group:b>0?v.group.substr(0,b):v.group,order:b>0?Number(v.group.substr(b+1)):0,category:m.category})}}}function l(u,d){const h=u.group,g=d.group;if(h!==g){if(!h)return 1;if(!g||h==="navigation")return-1;if(g==="navigation")return 1;const p=h.localeCompare(g);if(p!==0)return p}return u.order<d.order?-1:u.order>d.order?1:u.title.localeCompare(d.title)}return s(l,"compareMenuItems"),[...a.values()].sort(l)}s(Pm,"getContinueOnContributions");function Rm(t){return t?t.split("&&").every(e=>{const n=/^(?:(!)?(\S+)|(\S+)\s?(==|!=|=~)\s?(\S+))$/.exec(e.trim());if(!n)return!0;const[,r,i,o,a,c]=n;if(i){if(i==="false")return!1;if(!Ge(i))return!0;const l=je(i);return r?!l:l}if(o&&a&&c)switch(a){case"==":return!Ge(o)||!Ge(c)||je(o)==je(c);case"!=":return!Ge(o)||!Ge(c)||je(o)!=je(c);case"=~":{if(!Ge(o))return!0;const l=je(o);try{return new RegExp(c.slice(1,-1)).test(String(l!=null?l:""))}catch{return!1}}}return!0}):!0}s(Rm,"evaluateWhenClause");function Am(t,e){return t.reduce((r,i)=>{const o=e(i),a=r.get(o);return a===void 0?r.set(o,[i]):a.push(i),r},new Map)}s(Am,"groupBy");function gy(t){let e=0;for(const n of t){if(n===0)return!0;if(e++,e>8e3)break}return!1}s(gy,"isBinary");function km(t,e,n=r=>r){return[...t.reduce((i,o)=>{const a=e(o),c=i.get(a);if(c===void 0)i.set(a,o);else{const l=n(c,o);l!==void 0&&i.set(a,l)}return i},new Map).values()]}s(km,"uniqueBy");function rc(t,e){switch(t){case H.Branch:case H.RemoteBranch:return e?"$(git-pull-request)":"$(git-branch)";case H.Tag:return"$(tag)";case H.Commit:return"$(git-commit)"}}s(rc,"headTypeToCodicon");function Bh(t){switch(t){case z.Active:return"$(layers-active)";case z.Match:return"$(layers-dot)";case z.Indexed:return"$(layers)"}}s(Bh,"indexTypeToCodicon");function Mm(t,e){switch(t){case H.Branch:case H.RemoteBranch:return e?new f.ThemeIcon("git-pull-request"):new f.ThemeIcon("git-branch");case H.Tag:return new f.ThemeIcon("tag");case H.Commit:return new f.ThemeIcon("git-commit")}}s(Mm,"headTypeToThemeIcon");function*Fm(t,e){for(const n of t)yield*e(n)}s(Fm,"flatMap");function*Lm(t,e){for(const n of t)e(n)&&(yield n)}s(Lm,"filter");function*py(t,e){for(const n of t){const r=e(n);r!=null&&(yield r)}}s(py,"filterMap");function vy(t,e){for(const n of t)if(e(n))return n}s(vy,"find");function Nm(t,e){let n="";const r=t[Symbol.iterator]();let i=r.next();if(i.done)return n;for(;;){const o=i.value.toString();if(i=r.next(),i.done){n+=o;break}n+=o,n+=e}return n}s(Nm,"join");function*hu(t,e){for(const n of t)yield e(n)}s(hu,"map");function my(t,e){for(const n of t)if(e(n))return!0;return!1}s(my,"some");function*yy(...t){for(const e of t)for(const n of e)yield n}s(yy,"union");function*Om(t){const e=new Set;for(const n of t)e.has(n)||(e.add(n),yield n)}s(Om,"unique");const Um="";function Hm(...t){if(t.length===1){const e=t[0];return e===void 0?Um:typeof e=="string"?e:typeof e=="number"||typeof e=="boolean"||e instanceof Error?String(e):e instanceof f.Uri?e.toString():JSON.stringify(e)}return JSON.stringify(t)}s(Hm,"defaultResolver");function ic(t){return(e,n,r)=>{let i;if(typeof r.value=="function"?i=r.value:typeof r.get=="function"&&(i=r.get),i===void 0)throw new Error("Not supported");const o=`$serialize$${n}`;r.value=function(...a){const c=a.length===0?o:`${o}$${(t!=null?t:Hm)(...a)}`;Object.prototype.hasOwnProperty.call(this,c)||Object.defineProperty(this,c,{configurable:!1,enumerable:!1,writable:!0,value:void 0});let l=this[c];const u=s(()=>i.apply(this,a),"run");return l===void 0?l=u():l=l.then(u,u),this[c]=l,l}}}s(ic,"serialize");let gu=0;function Bm(){return gu===Number.MAX_SAFE_INTEGER&&(gu=0),String(++gu)}s(Bm,"getNextLockId");class Wh{constructor(){this.id=Bm()}async synchronize(e){let n;const r=this.promise;this.promise=new Promise(i=>n=i),await r;try{return await e()}finally{n()}}}s(Wh,"Lock");class Xa{constructor(e){this.lock=new Wh,this.readers=new Set,this.counter=0,this._id=e!=null?e:this.lock.id}get id(){return this._id}getNextCounter(){return this.counter===Number.MAX_SAFE_INTEGER&&(this.counter=0),++this.counter}async synchronizeRead(e,n){let r;const i=new Ln(`Reader(${this.getNextCounter()}|${this.id})`,{log:{prefix:"(A) ",message:n?` \u2022 ${n}`:""},logLevel:mn.Debug});let o;await this.lock.synchronize(async()=>{this.writer&&await this.writer,o=new Promise(a=>r=a),this.readers.add(o)}),i.restart({prefix:"(L) ",suffix:n?` \u2022 ${n}`:"",took:" waited for "});try{return await e()}finally{i.stop({prefix:"(U) ",suffix:n?` \u2022 ${n}`:"",took:" locked for "}),o!==void 0&&this.readers.delete(o),r()}}async synchronizeWrite(e,n){let r;const i=new Ln(`Writer(${this.getNextCounter()}|${this.id})`,{log:{prefix:"(A) ",message:n?` \u2022 ${n}`:""},logLevel:mn.Debug});await this.lock.synchronize(async()=>{if(this.writer&&await this.writer,this.readers.size){const o=[...this.readers];this.readers.clear(),await Promise.all(o)}this.writer=new Promise(o=>r=o)}),i.restart({prefix:"(L) ",suffix:n?` \u2022 ${n}`:"",took:" waited for "});try{return await e()}finally{i.stop({prefix:"(U) ",suffix:n?` \u2022 ${n}`:"",took:" locked for "}),r(),this.writer=void 0}}}s(Xa,"ReaderWriterLock");class $h{constructor(){this.locks=new Map}async synchronizeRead(e,n,r){let i=this.locks.get(e);return i===void 0&&(i=new Xa(String(e)),this.locks.set(e,i)),i.synchronizeRead(n,r)}async synchronizeWrite(e,n,r){let i=this.locks.get(e);return i===void 0&&(i=new Xa(String(e)),this.locks.set(e,i)),i.synchronizeWrite(n,r)}}s($h,"KeyedReaderWriterLock");const ii=de.loadMessageBundle(),Ja=s(class{constructor(t,e,n,r){this.providerService=t,this.storageService=e,this.changeStore=n,this.workspaceId=r,this._onDidChange=new f.EventEmitter,this.cache=new Map,this.lock=new Xa("WorkspaceRepositories"),this.disposable=f.Disposable.from(this.providerService.onDidChangeRepositories(this.onRepositoriesChanged,this),this.providerService.onDidChangeRepository(this.onRepositoryChanged,this),this.changeStore.onDidChange(this.onChangeStoreChanged,this))}get onDidChange(){return this._onDidChange.event}dispose(){this.disposable.dispose()}async exportDebugInfo(){const t=await f.workspace.openTextDocument({language:"json",content:`Remote Repositories

${this.toStorage(await this.getCore())}`});return void f.window.showTextDocument(t)}onChangeStoreChanged(t){const e=km(t.map(n=>n.rootUri),n=>R(n)).map(n=>this.providerService.getRepository(n)).filter(n=>Boolean(n));this.addOrUpdate(e)}onRepositoriesChanged(t){this.addOrUpdate(t.added)}onRepositoryChanged(t){this.addOrUpdate([t.repository])}async get(t){let e=await this.lock.synchronizeRead(async()=>{let n=this.cache.get("workspaceRepositories");return n===void 0&&(n=[...(await this.getCore()).values()].sort((r,i)=>i.timestamp-r.timestamp),this.cache.set("workspaceRepositories",n)),n},"WorkspaceRepositories.get");if(t){const n=R(t);e=e.filter(r=>R(r.canonicalUri)===n)}return e}async getCore(){return this.fromStorage(await this.storageService.get(Ja.storageKey))}async getRecents(t=10){return(await this.get()).slice(0,t)}async getRemoteWorkspaceSourceProvider(t){const e=await this.getRecents();if(e.length!==0)return e.filter(n=>n.provider.id===t)}refresh(){this.cache.clear()}async remove(t){await this.lock.synchronizeWrite(async()=>{const e=await this.getCore(),n=`${t.workspaceId}/${R(t.uri)}`,r=e.get(n);if(r===void 0)return;const i=this.changeStore.getScopedChangeStore(r),o=await i.getChanges(r.uri);if(o.length!==0){const a={title:ii("remove remote repo prompt confirm","Yes")},c={title:ii("remove remote repo prompt cancel","No"),isCloseAffordance:!0};if(await f.window.showWarningMessage(o.length===1?ii("remove remote repo prompt file changed",`This repository contains 1 file with uncommitted changes.

Removing it will cause those changes to be FOREVER LOST.
This is IRREVERSIBLE!

Are you sure you still want to remove it?`):ii("remove remote repo prompt files changes",`This repository contains {0} files with uncommitted changes.

Removing it will cause those changes to be FOREVER LOST.
This is IRREVERSIBLE!

Are you sure you still want to remove it?`,o.length),{modal:!0},a,c)!==a)return;await i.discardAll(r.uri)}this.cache.clear(),e.delete(n);try{await this.storageService.store(Ja.storageKey,this.toStorage(e))}catch(a){throw ce.error(a,"Failed to save workspace repositories"),a}},"WorkspaceRepositories.remove"),this._onDidChange.fire()}async addOrUpdate(t){await this.lock.synchronizeWrite(async()=>{this.cache.clear();const e=await this.getCore();for(const n of t){const[{HEAD:r,pullRequest:i},o]=await Promise.all([n.getMetadata(),n.getIndexMetadata()]),a=await this.changeStore.getChanges(n.uri);e.set(`${this.workspaceId}/${R(n.uri)}`,{workspaceId:this.workspaceId,uri:n.uri,canonicalUri:n.canonicalUri,name:n.name,provider:n.provider,ref:{type:r.type,name:r.name},idx:(o==null?void 0:o.type)&&z.hasIndex(o.type)?{type:o.type}:void 0,pullRequest:i?{id:i.id}:void 0,changes:$m(a),timestamp:Date.now()})}try{await this.storageService.store(Ja.storageKey,this.toStorage(e))}catch(n){throw ce.error(n,"Failed to save workspace repositories"),n}},"WorkspaceRepositories.addOrUpdate"),this._onDidChange.fire()}fromStorage(t){if(!t)return new Map;try{const e=JSON.parse(t,(n,r)=>(n==="uri"||n.endsWith("Uri"))&&G(r)?f.Uri.from(r):r);return new Map(e.workspaceRepositories)}catch(e){return ce.error(e,"Failed to deserialize workspace repositories"),new Map}}toStorage(t){const e={schemaVersion:Ja.storageSchemaVersion,workspaceRepositories:[...t]};return JSON.stringify(e)}},"_WorkspaceRepositories");let zh=Ja;zh.storageKey="workspaceRepositories",zh.storageSchemaVersion=1;function Vh(t){return t!==void 0&&(t.added!==0||t.changed!==0||t.deleted!==0)}s(Vh,"hasChanges");function Wm(t){return Vh(t.changes)}s(Wm,"hasUncommittedChanges");function $m(t){let e=0,n=0,r=0;for(const i of t)switch(i.type){case I.Created:e++;break;case I.Changed:n++;break;case I.Deleted:r++;break}return e||n||r?{added:e,changed:n,deleted:r,timestamp:Date.now()}:void 0}s($m,"toChangesSummary");function pu(t,{compact:e=!0,preamble:n,separator:r=", ",short:i=!1,single:o=!1}={}){if(!Vh(t))return ii("no changes","Everything up to date");const{added:a,changed:c,deleted:l}=t;if(o){const d=a+c+l;return d===1?ii("summary change","{0} change",d):ii("changes changes","{0} changes",d)}let u=`${n!=null?n:""}`;return(a||!e)&&(u+=i?`+${a}`:a===1?ii("file added","{0} file added",a):ii("files added","{0} files added",a),(c||l||!e)&&(u+=r)),(c||!e)&&(u+=i?`~${c}`:c===1?ii("file changed","{0} file changed",c):ii("files changed","{0} files changed",c),(l||!e)&&(u+=r)),(l||!e)&&(u+=i?`-${l}`:l===1?ii("file deleted","{0} file deleted",l):ii("files deleted","{0} files deleted",l)),u}s(pu,"formatChangesSummary");class Hr extends Error{constructor(e){var n;const r=typeof e=="string"?e:Br.getProviderId(e);super(`No provider registered with ${r}`);this.id=r,(n=Error.captureStackTrace)==null||n.call(Error,this,Hr)}}s(Hr,"ProviderNotFoundError");class jh{constructor(e,n,r,i,o){this.providerService=e,this.uri=n,this.id=r,this.name=i,this.provider={id:o.id,name:o.name}}get canonicalUri(){return this.providerService.getVirtualCanonicalRootUri(this.uri)}createRelativeUri(e){return this.providerService.createRelativeUri(this.uri,e)}async getMetadata(){const e=await this.providerService.getMetadata(this.uri);if(!e)throw new Error(`Unable to find metadata for ${this.uri.toString()}`);return e}async getIndexMetadata(){return this.providerService.getIndexMetadata(this.uri)}getUriMetadata(){return this.providerService.getVirtualUriMetadata(this.uri)}}s(jh,"VirtualRepository");var fi;(function(t){t[t.Repository=0]="Repository",t[t.PullRequest=1]="PullRequest",t[t.Branch=2]="Branch",t[t.Commit=3]="Commit",t[t.Tag=4]="Tag"})(fi||(fi={}));var Dn;(function(t){t[t.NotIndexed=0]="NotIndexed",t[t.Indexed=1]="Indexed",t[t.Match=2]="Match",t[t.Active=3]="Active"})(Dn||(Dn={})),function(t){function e(n){return n!==void 0&&(n===t.Indexed||n===t.Match||n===t.Active)}s(e,"hasIndex"),t.hasIndex=e}(Dn||(Dn={}));var vu;(function(t){function e(n){return n!==void 0&&n.type===3}s(e,"isActive"),t.isActive=e})(vu||(vu={}));var oi;(function(t){t[t.Latest=1]="Latest",t[t.SHA=2]="SHA"})(oi||(oi={}));var Uo;(function(t){function e(n){const r=k.decodeAuthority(n).metadata;if(!(r===void 0||r.idx===void 0)){if(r.idx==="latest")return{type:1};if(W(r.idx))return{type:2,sha:r.idx}}}s(e,"decode"),t.decode=e})(Uo||(Uo={}));function zm(t){return t!==void 0&&typeof t.then=="function"}s(zm,"isPromise");const Vm="";function jm(...t){if(t.length===1){const e=t[0];return e===void 0?Vm:typeof e=="string"?e:typeof e=="number"||typeof e=="boolean"||e instanceof Error?String(e):e instanceof f.Uri?e.toString():JSON.stringify(e)}return JSON.stringify(t)}s(jm,"gate_defaultResolver");function Bi(t){return(e,n,r)=>{let i;if(typeof r.value=="function"?i=r.value:typeof r.get=="function"&&(i=r.get),i===void 0)throw new Error("Not supported");const o=`$gate$${n}`;r.value=function(...a){const c=a.length===0?o:`${o}$${(t!=null?t:jm)(...a)}`;Object.prototype.hasOwnProperty.call(this,c)||Object.defineProperty(this,c,{configurable:!1,enumerable:!1,writable:!0,value:void 0});let l=this[c];if(l===void 0){let u;try{if(u=i.apply(this,a),u==null||!zm(u))return u;this[c]=l=u.then(d=>(this[c]=void 0,d)).catch(d=>{throw this[c]=void 0,d})}catch(d){throw this[c]=void 0,d}}return l}}}s(Bi,"gate");var qm=Object.defineProperty,Km=Object.getOwnPropertyDescriptor,Ya=s((t,e,n,r)=>{for(var i=r>1?void 0:r?Km(e,n):e,o=t.length-1,a;o>=0;o--)(a=t[o])&&(i=(r?a(e,n,i):a(i))||i);return r&&i&&qm(e,n,i),i},"__decorateClass");const Kr=de.loadMessageBundle();class Ho{constructor(){this.hasShownRepositoryNotValidMessage=!1}async showRepositoryNotValidMessage(){if(this.hasShownRepositoryNotValidMessage)return;this.hasShownRepositoryNotValidMessage=!0;const e=Kr("unable to open repo confirm","Open Repository");await f.window.showErrorMessage(Kr("repository not valid","The current workspace is not a valid repository. Would you like to open another repository?"),{modal:!0},e)===e&&f.commands.executeCommand("remoteHub.openRepository")}showGitHubStatus500Message(){return f.window.showErrorMessage(Kr("github 500 error notification","GitHub failed to respond and might be experiencing issues. Visit the [GitHub status page](https://githubstatus.com) for more information."),Kr("ok","OK")),Promise.resolve()}async showStatus401Message(e){if(!e)return void f.window.showErrorMessage(Kr("401 error notification","The provided credentials are either invalid or expired."),Kr("ok","OK"));const n=Kr("401 error notification confirm","Reauthenticate");await f.window.showErrorMessage(Kr("401 error notification with reauth","The provided credentials are either invalid or expired. Would you like to reauthenticate?"),n)===n&&e()}async showStatus403Message(e){if(!e)return void f.window.showErrorMessage(Kr("403 error notification","The provided credentials do not have the required access."),Kr("ok","OK"));const n=Kr("403 error notification confirm","Reauthenticate"),r=Kr("403 error notification with reauth","The provided credentials do not have the required access. Would you like to reauthenticate to grant additional access?");await f.window.showErrorMessage(r,n)===n&&e()}async showProviderNotFoundMessage(e){const n=Gm.get(e.id);if(n&&f.extensions.getExtension(n[0])===void 0){const r=Kr("provider extension missing install","Install");if(await f.window.showInformationMessage(Kr("provider extension not installed","Extension '{0}' is not installed. Would you like to install the extension and reload the window to open this workspace?",n[1]),{modal:!0},r)!==r)return;await f.commands.executeCommand("workbench.extensions.installExtension",n[0]),await f.commands.executeCommand("workbench.action.reloadWindow")}}}s(Ho,"Messages"),Ya([Bi(()=>"")],Ho.prototype,"showRepositoryNotValidMessage",1),Ya([Bi(()=>"")],Ho.prototype,"showGitHubStatus500Message",1),Ya([Bi(()=>"")],Ho.prototype,"showStatus401Message",1),Ya([Bi(()=>"")],Ho.prototype,"showStatus403Message",1),Ya([Bi()],Ho.prototype,"showProviderNotFoundMessage",1);const Gm=new Map([["github",["GitHub.remotehub","GitHub Repositories"]],["azurerepos",["ms-vscode.azure-repos","Azure Repos"]]]),oc=new Ho,ac=de.loadMessageBundle();async function Ii(t,e,n){var r,i,o,a,c;if(qa.instance.publicLog2("openWorkspace",{location:e.location}),e.location===$.AddToWorkspace){const u=(i=(r=f.workspace.workspaceFolders)==null?void 0:r.length)!=null?i:0;return void f.workspace.updateWorkspaceFolders(u,0,{uri:e.uri,name:e.name})}if(e.location===$.CurrentWindow&&!(n==null?void 0:n.skipChangesPrompt)){const u=await t.getWorkspaceProvidersWithChanges();if(u.length){const d={title:ac("continue","Continue")},h={title:ac("cancel","Cancel"),isCloseAffordance:!0};if(await f.window.showWarningMessage(Tn?ac("open folder uncommitted changes web",`You have uncommitted changes.

If you want to see your changes on {0} or from other browsers or machines, commit them before leaving this workspace. Otherwise, you can re-open this workspace anytime and pick up right where you left off.

Do you want to continue opening a new workspace?`,u.map(p=>p.name).join(", ")):ac("open folder uncommitted changes",`You have uncommitted changes.

If you want to see your changes on {0} or from other machines, commit them before leaving this workspace. Otherwise, you can re-open this workspace anytime and pick up right where you left off.

Do you want to continue opening a new workspace?`,u.map(p=>p.name).join(", ")),{modal:!0},d,h)!==d){qa.instance.publicLog2("openWorkspace.abort",{reason:"abandoned uncommitted changes prompt"});return}}}const l=f.env.remoteName?!0:void 0;return e.filesToOpen&&(e.location===$.CurrentWindow&&l===void 0&&((o=f.workspace.workspaceFolders)==null?void 0:o.length)===1&&f.workspace.workspaceFolders[0].uri.toString()===e.uri.toString()?await((a=Tc())==null?void 0:a.openPendingFiles(e.uri,e.filesToOpen)):await((c=Tc())==null?void 0:c.setPendingFilesToOpen(e.uri,e.filesToOpen))),qa.instance.publicLog2("openWorkspace.success",{location:e.location,forceLocalWindow:String(l)}),void f.commands.executeCommand("vscode.openFolder",e.uri,{forceNewWindow:e.location===$.NewWindow,forceLocalWindow:l})}s(Ii,"openWorkspace");var wy=jn(724),Qm=Object.defineProperty,Xm=Object.getOwnPropertyDescriptor,Jm=s((t,e,n,r)=>{for(var i=r>1?void 0:r?Xm(e,n):e,o=t.length-1,a;o>=0;o--)(a=t[o])&&(i=(r?a(e,n,i):a(i))||i);return r&&i&&Qm(e,n,i),i},"providers_decorateClass");const Ym=de.loadMessageBundle(),qh="remoteHub.metadata.migration.invalidTagSha",Gr=s(class{constructor(t,e){this.telemetryService=t,this.workspaceState=e,this._providers=new Map,this._indexProviders=new Map,this._onDidChangeProviders=new f.EventEmitter,this._onDidChangeChangeStore=new f.EventEmitter,this._onDidChangeWorkspaceRepositories=new f.EventEmitter,this._repositories=new Map,this._onDidChangeRepositories=new f.EventEmitter,this._onDidChangeRepository=new f.EventEmitter,this._onDidSyncRepository=new f.EventEmitter,this._onDidRefresh=new f.EventEmitter,this._onWillRefresh=new f.EventEmitter,this.pendingMetadataRequests=new Map,this.disposable=f.Disposable.from(f.workspace.onDidChangeWorkspaceFolders(this.onWorkspaceFoldersChanged,this))}get onDidChangeProviders(){return this._onDidChangeProviders.event}get onDidChangeChangeStore(){return this._onDidChangeChangeStore.event}get onDidChangeWorkspaceRepositories(){return this._onDidChangeWorkspaceRepositories.event}get onDidChangeRepositories(){return this._onDidChangeRepositories.event}get onDidChangeRepository(){return this._onDidChangeRepository.event}get onDidSyncRepository(){return this._onDidSyncRepository.event}get onDidRefresh(){return this._onDidRefresh.event}get onWillRefresh(){return this._onWillRefresh.event}dispose(){this.disposable.dispose(),this._providers.clear(),this._repositories.clear()}onMetadataChanged(t){const e=this._repositories.get(R(t.uri));!e||(ce.log(`VirtualProviderService.onMetadataChanged(${t.uri.toString()}, reason=${t.reason}): Firing onDidChangeRepository...`),this._onDidChangeRepository.fire({repository:e,reason:t.reason==="revision"?"HEAD":void 0}))}onWorkspaceFoldersChanged(t){if(t.added.length)for(const e of t.added){const n=R(e.uri);if(e.uri.scheme!==Gr.scheme||this._repositories.has(n))continue;const r=this.getProvider(e.uri);if(!r)continue;this._repositories.set(n,null);const{repo:i,name:o}=this.getVirtualUriMetadata(e.uri),a=new jh(this,e.uri,i,o,r);this._repositories.set(n,a),this._onDidChangeRepositories.fire({added:[a],removed:[]}),this.telemetryService.publicLog2("repository.opened",{provider:r.id,repositories:this._repositories.size.toString()})}if(t.removed.length)for(const e of t.removed){const n=R(e.uri);if(e.uri.scheme!==Gr.scheme||!this._repositories.has(n))continue;const r=this._repositories.get(n);this._repositories.delete(n),r&&(this._onDidChangeRepositories.fire({added:[],removed:[r]}),this.telemetryService.publicLog2("repository.closed",{repositories:this._repositories.size.toString()}))}_t(ve.HasVirtualFolders,this._repositories.size!==0),_t(ve.VirtualFolderProviders,Nm(Om(hu(this.getRepositories(),e=>e.provider.id)),","))}get hasProviders(){return this._providers.size!==0}get registeredProviders(){return[...hu(this._providers.values(),t=>({id:t.id,name:t.name}))]}get repositories(){return[...this.getRepositories()]}registerVirtualIndexProvider(t,e){if(this._indexProviders.has(t))throw new Error(`Virtual index provider '${t}' has already been registered`);return this._indexProviders.set(t,e),{dispose:()=>{this._indexProviders.delete(t)}}}register(t,e,n,r,i,o,a,c){var l;if(this._providers.has(t))throw new Error(`Provider '${t}' has already been registered`);const u={id:t,name:e,provider:n,fs:r,storage:i,changeStore:o,metadataStore:a,workspaceRepositories:c};this._providers.set(t,u);const d=f.Disposable.from(u.metadataStore.onDidChange(h=>this.onMetadataChanged(h)),u.changeStore.onDidChange(h=>this._onDidChangeChangeStore.fire(h)),u.workspaceRepositories.onDidChange(async()=>{const h=await this.workspaceRepositoriesGetRepositories();_t(ve.HasRecentRepositories,h.length>0),this._onDidChangeWorkspaceRepositories.fire()}));return this._onDidChangeProviders.fire({added:[u],removed:[]}),this.telemetryService.publicLog2("provider.registered",{provider:t}),this.onWorkspaceFoldersChanged({added:(l=f.workspace.workspaceFolders)!=null?l:[],removed:[]}),{dispose:()=>{this._providers.delete(t);const h=[];for(const[g,p]of[...this._repositories])(p==null?void 0:p.provider.id)===t&&(this._repositories.delete(g),h.push(p));this._onDidChangeRepositories.fire({added:[],removed:h}),this._onDidChangeProviders.fire({added:[],removed:[u]}),d.dispose()}}}refresh(){if(this._providers.size===0)return;const t=[],e=[];for(const n of this._providers.values()){t.push(...hu(this.getRepositories(n.id),i=>i.uri));const r=this._indexProviders.get(n.id);r!==void 0&&e.push(r)}this._onWillRefresh.fire(t),t.forEach(n=>this.getMetadataStore(n).refresh()),e.forEach(n=>n.refresh(t)),this._onDidRefresh.fire(t)}getRegisteredProvider(t){const e=this.getProvider(t);return e?{id:e.id,name:e.name}:void 0}getRepository(t,e){const n=f.workspace.getWorkspaceFolder(t);if(!n||n.uri.scheme!==Gr.scheme)return;const r=this._repositories.get(R(n.uri));if(!(e!==void 0&&(r==null?void 0:r.provider.id)!==e))return r!=null?r:void 0}getRepositories(t){return Lm(this._repositories.values(),e=>e!==null&&(!t||e.provider.id===t))}hasProvider(t,e){const n=typeof t=="string"?t:Gr.getProviderId(t),r=this._providers.get(n);return e!==void 0&&(r==null?void 0:r.id)!==e?!1:r!==void 0}getProvider(t){const e=typeof t=="string"?t:Gr.getProviderId(t);return this._providers.get(e)}getRepositoryProvider(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.provider;if(n)return n;throw new Hr(t)}getChangeStore(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.changeStore;if(n)return n;throw new Hr(t)}getMetadataStore(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.metadataStore;if(n)return n;throw new Hr(t)}getWorkspaceRepositories(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.workspaceRepositories;if(n)return n;throw new Hr(t)}getFileSystemProvider(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.fs;if(n)return n;throw new Hr(t)}getStorageService(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.storage;if(n)return n;throw new Hr(t)}async getRecentRemoteSourceProviders(){return{name:"Recents",label:"Open Recent Repository",icon:"$(history)",placeholder:Ym("pick","Choose a recent repository"),getRemoteSources:async()=>{const t=[];for(const[,e]of this._providers.entries()){const n=await e.workspaceRepositories.getRemoteWorkspaceSourceProvider(e.id);t.push(...n!=null?n:[])}if(t.length!==0)return Promise.all(t.sort((e,n)=>n.timestamp-e.timestamp).map(async e=>({providerId:e.provider.id,name:e.name,icon:"repo",description:pa(e.timestamp,{ago:!0}),detail:`${e.provider.name}${e.pullRequest?`\xA0\xA0\u2022\xA0\xA0$(git-pull-request) Pull Request #${e.pullRequest.id}`:""}${k.isCanonicalUri(e.uri)?"":`\xA0\xA0\u2022\xA0\xA0${rc(e.ref.type)} ${e.ref.name}`}\xA0\xA0\u2022\xA0\xA0${pu(e.changes)}${e.idx?`\xA0\xA0\u2022\xA0\xA0${Bh(e.idx.type)}`:""}`,url:(await this.getBestRemoteUri(e.uri)).toString()})))}}}getRemoteSourceProviders(t){const e=s(n=>n.provider.getRemoteSourceProviders().map(i=>{var o;return{...i,getRecentRemoteSources:(o=i.getRecentRemoteSources)!=null?o:async()=>{var a;const c=(a=await n.workspaceRepositories.getRemoteWorkspaceSourceProvider(n.id))!=null?a:[];return Promise.all(c.map(async l=>({providerId:l.provider.id,name:l.name,icon:"repo",timestamp:l.timestamp,description:pa(l.timestamp,{ago:!0}),detail:`${l.provider.name}${l.pullRequest?`\xA0\xA0\u2022\xA0\xA0$(git-pull-request) Pull Request #${l.pullRequest.id}`:""}${k.isCanonicalUri(l.uri)?"":`\xA0\xA0\u2022\xA0\xA0${rc(l.ref.type)} ${l.ref.name}`}\xA0\xA0\u2022\xA0\xA0${pu(l.changes)}${l.idx?`\xA0\xA0\u2022\xA0\xA0${Bh(l.idx.type)}`:""}`,url:(await this.getBestRemoteUri(l.uri)).toString()})))}}}),"createRemoteSourceProviders");if(t){const n=this.getProvider(t);return n?e(n):[]}return[...Fm(this._providers.values(),n=>{var r;return(r=e(n))!=null?r:[]})]}async getWorkspaceProvidersWithChanges(){var t,e;const n=new Map;for(const r of(t=f.workspace.workspaceFolders)!=null?t:[])if(r.uri.scheme===k.scheme&&await this.getChangeStore(r.uri).hasChanges(r.uri)){const i=(e=this.getRepository(r.uri))==null?void 0:e.provider;if(!i)continue;n.set(i.id,i)}return[...n.values()]}isInWorkspace(t){return this.getVirtualWorkspaceUri(t)!==void 0}getAuthentication(t){const e=this.getProvider(t);if(!e)throw new Hr(t);return e==null?void 0:e.provider.getAuthentication(t)}canOpenRemoteUrl(t,e){if(e){const n=this.getProvider(e),r=n==null?void 0:n.provider.canOpenRemoteUrl(t);return r!==void 0?{provider:n,urlType:r}:void 0}for(const n of this._providers.values()){const r=n.provider.canOpenRemoteUrl(t);if(r!==void 0)return{provider:n,urlType:r}}}async createWorkspaceForRemoteUrl(t,e,n=$.CurrentWindow){var r;const i=this.canOpenRemoteUrl(t,e);return(r=i==null?void 0:i.provider)==null?void 0:r.provider.createWorkspaceForRemoteUrl(t,n)}async openWorkspace(t,e){return Ii(this,t,e)}createProviderUri(t,e,n){return k.getProviderUri(this.getRepositoryProvider(t).createVirtualUri(Gr.baseVirtualWorkspaceUri,e,n))}createRelativeProviderUri(t,e){return k.getProviderUri(this.createRelativeUri(t,e))}createRelativeUri(t,e){const n=this.getProviderRootUri(t);let r=`${n.path}/`;r.endsWith("/")&&(r=r.slice(0,-1));const i=n.with({path:`${n.path}/${e.startsWith("/")?e.substr(1):e}`});return t.scheme===Gr.scheme?k.getVirtualUri(i):i}createRelativeVirtualUri(t,e){return k.getVirtualUri(this.createRelativeUri(t,e))}createVirtualUri(t,e,n){return this.getRepositoryProvider(t).createVirtualUri(Gr.baseVirtualWorkspaceUri,e,n)}async getBestRemoteUri(t,e){const{provider:n,repo:r,ref:i}=this.getVirtualUriMetadata(t);if(e===fi.Repository)return this.getRemoteUri(n.id,{repo:r});if(e===fi.PullRequest||e===void 0&&(i==null?void 0:i.type)===L.PullRequest){if((i==null?void 0:i.type)===L.PullRequest)return this.getRemoteUri(n.id,{repo:r,pullRequest:{id:i.id}});const{pullRequest:o}=await this.getMetadata(t);if(e===fi.PullRequest&&o)return this.getRemoteUri(n.id,{repo:r,pullRequest:{id:o.id}})}if(e===fi.Branch||e===void 0&&(i==null?void 0:i.type)===L.Branch){if((i==null?void 0:i.type)===L.Branch)return this.getRemoteUri(n.id,{repo:r,branch:i.id});const{HEAD:o}=await this.getMetadata(t);if(o.type===H.Branch||o.type===H.RemoteBranch&&e===fi.Branch)return this.getRemoteUri(n.id,{repo:r,branch:o.branch.name})}if(e===fi.Tag||e===void 0&&(i==null?void 0:i.type)===L.Tag){if((i==null?void 0:i.type)===L.Tag)return this.getRemoteUri(n.id,{repo:r,tag:i.id});const{HEAD:o}=await this.getMetadata(t);if(o.type===H.Tag)return this.getRemoteUri(n.id,{repo:r,tag:o.detached.name})}if(e===fi.Commit||e===void 0&&((i==null?void 0:i.type)===L.Commit||(i==null?void 0:i.type)===L.Tree&&W(i.id))){if((i==null?void 0:i.type)===L.Commit||(i==null?void 0:i.type)===L.Tree&&W(i.id))return this.getRemoteUri(n.id,{repo:r,sha:i.id});const{HEAD:o}=await this.getMetadata(t);if(e===fi.Commit||o.type===H.Commit)return this.getRemoteUri(n.id,{repo:r,sha:o.sha})}if(e===void 0&&(i==null?void 0:i.type)===L.Tree&&!W(i.id))return this.getRemoteUri(n.id,{repo:r,branch:i.id});if(e===void 0)return this.getRemoteUri(n.id,{repo:r})}getCanonicalUri(t){let{authority:e}=t;const n=e.indexOf(Gr.authoritySeparator);return n!==-1&&(e=e.substr(0,n)),t.with({authority:e})}getRemoteUri(t,e){var n,r;return(r=(n=this.getRepositoryProvider(t)).getRemoteUri)==null?void 0:r.call(n,e)}getProviderRootUri(t){return t=k.getProviderUri(t),this.getRepositoryProvider(t).getProviderRootUri(t)}getRelativeFilePath(t,e){return e=k.getProviderUri(e!=null?e:t),this.getRepositoryProvider(e).getRelativeFilePath(t,e)}getVirtualUriMetadata(t){return this.getRepositoryProvider(t).getVirtualUriMetadata(t)}getVirtualCanonicalRootUri(t){const e=k.getVirtualUri(this.getProviderRootUri(t));let{authority:n}=e;const r=n.indexOf(Gr.authoritySeparator);return r!==-1&&(n=n.substr(0,r)),e.with({authority:n})}getVirtualRootUri(t){return k.getVirtualUri(this.getProviderRootUri(t))}getVirtualWorkspaceUri(t){var e;return(e=f.workspace.getWorkspaceFolder(k.getVirtualUri(t)))==null?void 0:e.uri}createIGitRepository(t,e,n){var r,i;const o=this.getChangeStore(t);return(i=(r=this.getRepositoryProvider(t)).createIGitRepository)==null?void 0:i.call(r,t,e,n,o)}async getCommitOperations(t,e){const n=this.getChangeStore(t);let r;return(e==null?void 0:e.staged)?(r=await n.getStagedChanges(t),r.length===0&&e.staged==="auto"&&(r=await n.getChanges(t))):r=await n.getChanges(t),r.map(o=>{const a=this.getRelativeFilePath(t,o.uri);switch(o.type){case I.Created:case I.Changed:return{type:o.type,path:a,fileType:o.fileType,content:n.readFile(o.uri).then(async c=>{if(!c)throw this.telemetryService.sendErrorEvent("changeStore.readFailed",{reason:"content undefined"}),new Error("No working content for created or changed commit operation");if(await cr(c)!==o.hash)throw this.telemetryService.sendErrorEvent("changeStore.readFailed",{reason:"content hash mismatch"}),new Error("Working file content hash does not match expected file content hash");return c})};case I.Deleted:return{type:o.type,path:a,fileType:o.fileType,content:void 0}}})}async getMetadata(t){return{...await this.getMetadataCore(this.getVirtualRootUri(t)),path:this.getRelativeFilePath(t,t)}}async getIndexMetadata(t){const e=this.getIndexProvider(t);return e?e.getIndexMetadata(t):void 0}getModeConfig(t,e,n){return mt.getMode(this.getVirtualRootUri(t),e,Boolean(n))}async getModeRefType(t,e){return t=this.getVirtualRootUri(t),this.getRepositoryProvider(t).getModeRefType(t,e)}getIndexProvider(t){var e;const n=(e=this.getProvider(t))==null?void 0:e.id;return n?this._indexProviders.get(n):void 0}async getMetadataCore(t){const e=R(t);let n=this.pendingMetadataRequests.get(e);if(n)return n;let{revision:r,cachedMetadata:i}=await this.getMetadataStore(t).get(t);const o=(i==null?void 0:i.HEAD.type)===H.Tag;if(i!==void 0&&(!o||this.workspaceState.get(qh)))return i;const a=this.getProvider(t);if(!a)throw new Hr(t);const c=Uo.decode(t);(c==null?void 0:c.type)===oi.SHA&&(r=c.sha);try{n=a.provider.createMetadata(t,r),this.pendingMetadataRequests.set(e,n);const l=await n;return await this.updateMetadataCore(t,l,{silent:!0}),o&&await this.workspaceState.update(qh,!0),l}catch(l){throw be.asVirtualProviderErrorCode(l)===ne.InvalidRepositoryError&&oc.showRepositoryNotValidMessage(),l}finally{this.pendingMetadataRequests.delete(e)}}async updateMetadata(t,e){const n=new Ln(`VirtualProviderService.updateMetadata(${t.toString()})`,{},e.HEAD.sha);try{await this.getMetadataStore(t).set(k.getVirtualUri(t),e.HEAD.sha,e)}finally{n.stop()}}updateMetadataCore(t,e,n){return this.getMetadataStore(t).set(k.getVirtualUri(t),e.HEAD.sha,e,n)}async clone(t){const{cloneUrl:e}=await this.getMetadata(t),r=mt.get("gitProtocol")==="http"?e.http:e.ssh;if(!r)throw new Error("No url found for clone");if(Tn)return void f.env.openExternal(f.Uri.parse(`${f.env.uriScheme}://vscode.git/clone?url=${encodeURIComponent(r)}`));const i=s(async o=>{try{await o.activate(),await f.commands.executeCommand("git.clone",r)}catch(a){ce.error(a,"Unable to clone repository")}},"cloneRepository");if(f.workspace.isTrusted){const o=f.extensions.getExtension("vscode.git");if(o)await i(o);else throw new Error("Git extension not found")}else{const o=f.extensions.onDidChange(async()=>{const c=f.extensions.getExtension("vscode.git");c&&(await i(c),o.dispose())});await f.workspace.requestWorkspaceTrust()||o.dispose()}}createBranch(t,e,n,r){return this.getRepositoryProvider(t).createBranch(t,e,n,r)}createAndPushCommit(t,e,n,r,i,o){return this.getRepositoryProvider(t).createAndPushCommit(t,e,n,r,i,o)}createPullRequest(t,e,n,r,i,o){return this.getRepositoryProvider(t).createPullRequest(t,e,n,r,i,o)}fetch(t,e){return this.getRepositoryProvider(t).fetch(t,e)}async fetchOrSync(t){await this.getChangeStore(t).hasChanges(t)?await this.fetch(t):await this.sync(t,{reason:"invoked"})}fork(t){return this.getRepositoryProvider(t).fork(t)}getBranches(t,e){return this.getRepositoryProvider(t).getBranches(t,e)}getCommit(t,e){return this.getRepositoryProvider(t).getCommit(t,e)}getCommits(t,e){var n;return(n=this.getRepositoryProvider(t))==null?void 0:n.getCommits(t,e)}compareCommits(t,e){var n;return(n=this.getRepositoryProvider(t))==null?void 0:n.compareCommits(t,e)}getFileContent(t,e,n){return this.getRepositoryProvider(t).getFileContent(t,e,n)}getFork(t){return this.getRepositoryProvider(t).getFork(t)}async getIncomingChanges(t){var e,n,r;return(r=(n=(e=this.getRepositoryProvider(t)).getIncomingChanges)==null?void 0:n.call(e,t))!=null?r:[]}getPullRequest(t,e){return this.getRepositoryProvider(t).getPullRequest(t,e)}getTags(t,e){return this.getRepositoryProvider(t).getTags(t,e)}getSnapshots(t,e){var n,r;return(r=(n=this.getIndexProvider(t))==null?void 0:n.getSnapshots(t,e))!=null?r:Promise.resolve([])}async getTarGz(t,e,n){var r,i;return(i=(r=this.getRepositoryProvider(t)).getTarGz)==null?void 0:i.call(r,t,e,n)}async loadWorkspaceContents(t){return await Tr(this,t),this.getRepositoryProvider(t).loadWorkspaceContents(t)}switchTo(t,e,n){return this.getRepositoryProvider(t).switchTo(t,e,n)}async sync(t,e){const n=this._repositories.get(R(t));n&&this._onDidSyncRepository.fire({repository:n,syncing:!0});try{const r=this.getProvider(t),i=this.getIndexProvider(t);if(r===void 0)throw new Hr(t);let{to:o,reason:a,...c}=e!=null?e:{};o===void 0&&i&&(o=await i.resolveIndexRef(t,a==="user"));const l=this.getChangeStore(t);if(await l.hasMergeConflicts(t))throw be.UnresolvedConflictsError();return await r.provider.sync(t,l,{conflictResolution:ae.Abort,...c,to:o})}finally{n&&this._onDidSyncRepository.fire({repository:n,syncing:!1})}}stat(t){return this.getFileSystemProvider(t).stat(t)}readDirectory(t){return this.getFileSystemProvider(t).readDirectory(t)}readFile(t){return this.getFileSystemProvider(t).readFile(t)}watch(t,e){return this.getFileSystemProvider(t).watch(t,e)}changeStoreApplyChangeset(t,e,n){return this.getChangeStore(t).applyChangeset(t,e,n)}changeStoreCreateFile(t,e){return this.getChangeStore(t).createFile(t,e)}changeStoreCreateDirectory(t){return this.getChangeStore(t).createDirectory(t)}changeStoreDeleteDirectory(t){return this.getChangeStore(t).deleteDirectory(t)}changeStoreDeleteFile(t){return this.getChangeStore(t).deleteFile(t)}changeStoreExportDebugInfo(){var t;for(const e of(t=f.workspace.workspaceFolders)!=null?t:[])this.getChangeStore(e.uri).exportDebugInfo(e.uri)}changeStoreGetChange(t){return this.getChangeStore(t).getChange(t)}changeStoreGetChanges(t,e){return this.getChangeStore(t).getChanges(this.stripUriScope(t),e)}changeStoreGetScopedChangeStore(t,e){const n=typeof e=="string"?e:e.workspaceId;return this.getChangeStore(t).getScopedChangeStore(n)}changeStoreGetScopedUri(t,e){const n=typeof e=="string"?e:e.workspaceId;return this.getChangeStore(t).getScopedUri(t,n)}changeStoreHasChanges(t){return this.getChangeStore(t).hasChanges(this.stripUriScope(t))}changeStoreMaybeHasChanges(t,e){return this.getChangeStore(t).maybeHasChanges(this.stripUriScope(t),this.stripUriScope(e))}changeStoreReadFile(t){return this.getChangeStore(t).readFile(t)}changeStoreResolveDiffCommand(t,e,n,r){return this.getChangeStore(t).resolveDiffCommand(t,e,n,r)}changeStoreStat(t){return this.getChangeStore(t).stat(t)}changeStoreUpdateDirectoryEntries(t,e){return this.getChangeStore(t).updateDirectoryEntries(t,e)}changeStoreWriteFile(t,e,n,r){return this.getChangeStore(t).writeFile(t,e,n,r)}stripUriScope(t){return t===void 0||!t.fragment?t:t.with({fragment:""})}getFromStorage(t,e){return this.getStorageService(t).get(e)}async storeInStorage(t,e,n){return this.getStorageService(t).store(e,n)}async deleteFromStorage(t,e){return this.getStorageService(t).delete(e)}async workspaceRepositoriesGetRepositoriesByCanonicalUri(){const t=await this.workspaceRepositoriesGetRepositories();return Am(t.sort((e,n)=>n.timestamp-e.timestamp),e=>R(e.canonicalUri))}workspaceRepositoriesRemoveRepository(t){return this.getWorkspaceRepositories(t.uri).remove(t)}workspaceRepositoriesRefresh(){for(const[,t]of this._providers.entries())t.workspaceRepositories.refresh()}async workspaceRepositoriesGetRepositories(){const t=[];for(const[,e]of this._providers.entries()){const n=await e.workspaceRepositories.get();t.push(...n.filter(r=>r.provider.id===e.id))}return t}provideFileSearchResults(t,e,n){return this.getFileSystemProvider(e.folder).provideFileSearchResults(t,e,n)}provideTextSearchResults(t,e,n,r){return this.getFileSystemProvider(e.folder).provideTextSearchResults(t,e,n,r)}static getProviderId(t){const{authority:e}=t,n=e.indexOf(Gr.authoritySeparator);return n!==-1?e.substr(0,n):e}static isCanonicalUri(t){return t.authority.indexOf(Gr.authoritySeparator)===-1}},"_VirtualProviderService");let Br=Gr;Br.scheme="vscode-vfs",Br.authoritySeparator="+",Br.baseVirtualWorkspaceUri=f.Uri.parse(`${Gr.scheme}://`),Jm([ic()],Br.prototype,"getMetadataCore",1);const kn=de.loadMessageBundle();function Zm(t,e,n){let r=!1;async function i(){var a;if(await Tr(t,void 0),!r){const l=t.getRemoteSourceProviders(),u=await((a=f.extensions.getExtension("vscode.git-base"))==null?void 0:a.activate()),d=u==null?void 0:u.getAPI(1);if(!d)return;l.map(h=>d.registerRemoteSourceProvider(h)),r=!0}const c=await f.commands.executeCommand("git-base.api.getRemoteSources",{title:kn("open remote repository","Open Remote Repository"),placeholder:kn("open repo placeholder","Enter a remote url, or select a remote provider"),showRecentSources:!0,providerLabel:l=>{var u;return(u=l.label)!=null?u:kn("open repo from","Open Repository from {0}",l.name)},urlLabel:l=>{const u=t.canOpenRemoteUrl(l);if(u){const{provider:d,urlType:h}=u;switch(h){case ut.Branch:return kn("remote url picker open branch","Open Branch from {0} Repository",d.name);case ut.Tag:return kn("remote url picker open tag","Open Tag from {0} Repository",d.name);case ut.Commit:return kn("remote url picker open commit","Open Commit from {0} Repository",d.name);case ut.File:return kn("remote url picker open file","Open File from {0} Repository",d.name);case ut.PullRequest:return kn("remote url picker open pull request","Open Pull Request from {0} Repository",d.name);default:return kn("remote url picker open repository","Open {0} Repository",d.name)}}return kn("remote url picker open unknown","Enter a Remote Url")}});if(!c){n.publicLog2("openRepository.abort",{reason:"abandoned"});return}try{const u=f.workspace.getConfiguration("window").get("openFoldersInNewWindow")==="on"?$.NewWindow:$.CurrentWindow,d=await t.createWorkspaceForRemoteUrl(c,void 0,u);if(!d){n.publicLog2("openRepository.abort",{reason:"aborted invalid url"});const h=kn("install","Install");await f.window.showInformationMessage(kn("unable to open url","Extension 'GitHub Repositories' is not installed or enabled. Would you like to install the extension and reload the window to open this workspace?"),{modal:!0},h)===h&&(await f.commands.executeCommand("workbench.extensions.installExtension","github.remotehub"),await f.commands.executeCommand("workbench.action.reloadWindow"))}if(!d)return;await Ii(t,d)}catch(l){if(n.sendException(l),be.asVirtualProviderErrorCode(l)===ne.InvalidCredentialsError){const{action:u}=l;if(u){oc.showStatus401Message(()=>u());return}}ce.error(l)}}s(i,"openRepository");async function o(a,c,l){if(l==null?void 0:l.workspaceFolder){const d=t.getRepository(l.workspaceFolder,c);if(d!==void 0)return d}const u=c?t.repositories.filter(d=>d.provider.id===c):t.repositories;if(u.length!==0){if(u.length>1){const d=await f.window.showQuickPick(u.map(h=>({label:h.name,description:h.provider.name,repository:h})),{placeHolder:a});return d?d.repository:void 0}return u[0]}}return s(o,"getRepository"),[f.commands.registerCommand("remoteHub.openRepository",()=>(n.publicLog2("command.openRepository"),i())),f.commands.registerCommand("remoteHub.continueOn.openRepository",()=>(n.publicLog2("command.continueOn.openRepository"),i())),f.commands.registerCommand("remoteHub.addRepositoryToWorkspace",()=>{}),f.commands.registerCommand("remoteHub.continueOn.addRepositoryToWorkspace",()=>{}),f.commands.registerCommand("remoteHub.continueOn",async()=>{var a;if(f.workspace.getConfiguration("workbench.experimental.editSessions").get("enabled")===!0)return f.commands.executeCommand("_workbench.experimental.editSessions.actions.continueEditSession");const c=await o(kn("continue on choose repository placeholder","Choose which repository to continue working on elsewhere"));if(c===void 0)return;n.publicLog2("command.continueOn");const l=await fu.show(e,kn("continue on placeholder","Choose how you would like to continue working"),kn("continue on title","Continue '{0}' on",c.name));if(!l){n.publicLog2("command.continueOn.abort",{reason:"abandoned"});return}if(await t.changeStoreHasChanges(c.uri)&&f.workspace.getConfiguration("workbench.experimental.editSessions").get("enabled")!==!0){const d={title:kn("continue","Continue")},h={title:kn("cancel","Cancel"),isCloseAffordance:!0};if(await f.window.showWarningMessage(kn("continue on uncommitted changes",`You have uncommitted changes.

Unless you commit those changes, you won't be able see them from elsewhere.`),{modal:!0},d,h)!==d){n.publicLog2("command.continueOn.abort",{reason:"abandoned uncommitted changes prompt"});return}}const{HEAD:u}=await c.getMetadata();if(((a=u.branch)==null?void 0:a.remote)!==void 0){const h=t.getRemoteUri(c.provider.id,{repo:u.branch.remote.repo}).toString(!0),g=await t.createWorkspaceForRemoteUrl(h);if(!g)throw new Error(`Unable to create workspace for URL: ${h}`);await l.execute({provider:c.provider,workspaceFolder:g.uri,name:u.branch.remote.name,url:h,ref:u.branch.name})}else{const d=t.getRemoteUri(c.provider.id,{repo:c.id});await l.execute({provider:c.provider,workspaceFolder:c.uri,name:c.name,url:d==null?void 0:d.toString(!0),ref:u.name})}}),f.commands.registerCommand("remoteHub.openOnDesktop",async a=>{if(!Tn)return;const c=await o(kn("continue on desktop choose repository placeholder","Choose which repository to open on the desktop"),void 0,a);if(c===void 0)return;const l=await t.getBestRemoteUri(c.uri);if(l===void 0)return;n.publicLog2("command.openOnDesktop");const u=f.Uri.parse(`${f.env.uriScheme}://${e}/open?url=${encodeURIComponent(l.toString(!0))}`);f.env.openExternal(u)}),f.commands.registerCommand("remoteHub.continueEditSession.openOnWeb",async()=>{if(Tn)return;const a=await o(kn("continue on web choose repository placeholder","Choose which repository to open on the web"));if(a===void 0)return;const c=await t.getBestRemoteUri(a.uri);if(c===void 0)return;const l=f.env.appName.toLowerCase().includes("insider")?"insiders.vscode.dev":"vscode.dev";return c.with({authority:`${l}/${c.authority}`})}),f.commands.registerCommand("remoteHub.openOnWeb",async a=>{if(Tn)return;const c=await o(kn("continue on web choose repository placeholder","Choose which repository to open on the web"),void 0,a);if(c===void 0)return;const l=await t.getBestRemoteUri(c.uri);if(l===void 0)return;const u=f.env.appName.toLowerCase().includes("insider")?"insiders.vscode.dev":"vscode.dev",d=l.with({authority:`${u}/${l.authority}`});n.publicLog2("command.openOnWeb"),f.env.openExternal(d)}),f.commands.registerCommand("remoteHub.copyVscodeDevLink",async()=>{const a=await o(kn("continue on web choose repository placeholder","Choose which repository to copy a vscode.dev link for"),void 0);if(a===void 0)return;const c=await t.getBestRemoteUri(a.uri,fi.Commit);if(c===void 0)return;const l=f.env.appName.toLowerCase().includes("insider")?"insiders.vscode.dev":"vscode.dev",u=c.with({authority:`${l}/${c.authority}`});await f.env.clipboard.writeText(u.toString(!0))}),f.commands.registerCommand("remoteHub.copyVscodeDevLinkFile",async()=>{const a=await o(kn("continue on web choose repository placeholder","Choose which repository to copy a vscode.dev link for"),void 0);if(a===void 0)return;const c=e0();if(!c)return;const l=t.getRemoteUri(a.provider.id,{repo:a.id,path:t.getRelativeFilePath(c.uri),sha:(await t.getMetadata(a.uri)).HEAD.sha});if(l===void 0)return;const u=f.env.appName.toLowerCase().includes("insider")?"insiders.vscode.dev":"vscode.dev",d=c.type===mu.File?`${t0(c.range)}`:`${n0(c.cellIndex,c.range)}`,h=l.with({authority:`${u}/${l.authority}`,fragment:d});await f.env.clipboard.writeText(h.toString(!0))}),f.commands.registerCommand("remoteHub.goToRepository",async()=>{n.publicLog2("command.goToRepository");const a=await o(kn("open on remote choose repository placeholder","Choose which repository to open on the remote"));if(!a)return;const c={provider:a.provider,repo:a.id};return f.commands.executeCommand("remoteHub.openOnRemote",c)}),f.commands.registerCommand("remoteHub.openOnRemote",async a=>{n.publicLog2("command.openOnRemote");const{provider:c,...l}=a,u=t.getRemoteUri(c.id,l);if(u){await f.env.openExternal(u);return}f.window.showErrorMessage(kn("open on remote command provider not supported","Unable to open the resource on {0}",a.provider.name))}),f.commands.registerCommand("remoteHub.clone",async a=>{const c=await o(kn("clone placeholder","Choose which repository to clone"),void 0,a);if(c!==void 0){if(n.publicLog2("command.clone"),a===void 0&&await t.changeStoreHasChanges(c.uri)&&f.workspace.getConfiguration("workbench.experimental.editSessions").get("autoResume")==="off"){const l={title:kn("continue","Continue")},u={title:kn("cancel","Cancel"),isCloseAffordance:!0};if(await f.window.showWarningMessage(kn("clone uncommitted changes",`You have uncommitted changes.

Unless you commit those changes, you won't be able see them in your local clone.`),{modal:!0},l,u)!==l){n.publicLog2("command.clone.abort",{reason:"abandoned uncommitted changes prompt"});return}}await t.clone(c.uri)}}),f.commands.registerCommand("remoteHub.refresh",()=>void t.refresh()),f.commands.registerCommand("remoteHub.enableDebugLogging",()=>mt.updateEffective("logLevel",mn.Debug)),f.commands.registerCommand("remoteHub.disableDebugLogging",()=>mt.updateEffective("logLevel",mn.Warn)),f.commands.registerCommand("remoteHub.exportDebugInfo",async()=>{t.changeStoreExportDebugInfo()}),f.commands.registerCommand("remoteHub.setContext",async(a,c)=>{if(!a.startsWith("continueOn:"))throw new Error("Key must start with 'continueOn:'");await _t(a,c)}),f.commands.registerCommand("remoteHub.notebook.continueOn",async()=>{const a={title:kn("continue on","Continue Working On...")};await f.window.showInformationMessage(kn("notebook continue on","Running notebook cells is not available in the web editor. To run this cell, you will need to continue in an environment that can run code, like a codespace or local VS Code."),{modal:!0},a)===a&&await f.commands.executeCommand("remoteHub.continueOn")}),f.commands.registerCommand("remoteHub.remoteHelp.getStarted",()=>Tn?"https://aka.ms/vscode-web-docs":"https://aka.ms/vscode-remote/remote-repositories/getting-started")]}s(Zm,"registerCommands");function Di(t){return t}s(Di,"command");async function Kh(t,e){return f.commands.executeCommand(t,e)}s(Kh,"executeCommand");var mu;(function(t){t[t.File=1]="File",t[t.Notebook=2]="Notebook"})(mu||(mu={}));function e0(){var t,e;let n,r;if(f.window.activeTextEditor){if(n=f.window.activeTextEditor.document.uri,n.scheme==="vscode-notebook-cell"&&((t=f.window.activeNotebookEditor)==null?void 0:t.notebook.uri.fsPath)===n.fsPath){const i=f.window.activeNotebookEditor.notebook.getCells().find(c=>c.document.uri.fragment===(n==null?void 0:n.fragment)),o=(e=i==null?void 0:i.index)!=null?e:f.window.activeNotebookEditor.selection.start,a=i!==void 0?f.window.activeTextEditor.selection:void 0;return{type:2,uri:n,cellIndex:o,range:a}}return r=f.window.activeTextEditor.selection,{type:1,uri:n,range:r}}if(f.window.activeNotebookEditor)return{type:2,uri:f.window.activeNotebookEditor.notebook.uri,cellIndex:f.window.activeNotebookEditor.selection.start,range:void 0}}s(e0,"getFileAndPosition");function t0(t){if(!t)return"";let e=`L${t.start.line+1}`;return t.start.line!==t.end.line&&(e+=`-L${t.end.line+1}`),e}s(t0,"rangeString");function n0(t,e){if(t===void 0)return"";if(!e)return`C${t+1}`;let n=`C${t+1}:L${e.start.line+1}`;return e.start.line!==e.end.line&&(n+=`-L${e.end.line+1}`),n}s(n0,"notebookCellRangeString");function r0(t,e,n){return new Co(new yu(t),new yu(e)).ComputeDiff(n).changes}s(r0,"stringDiff");class ro{constructor(e,n,r,i){this.originalStart=e,this.originalLength=n,this.modifiedStart=r,this.modifiedLength=i}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}s(ro,"DiffChange");var Gh;(function(t){t[t.MAX_SAFE_SMALL_INTEGER=1073741824]="MAX_SAFE_SMALL_INTEGER",t[t.MIN_SAFE_SMALL_INTEGER=-1073741824]="MIN_SAFE_SMALL_INTEGER",t[t.MAX_UINT_8=255]="MAX_UINT_8",t[t.MAX_UINT_16=65535]="MAX_UINT_16",t[t.MAX_UINT_32=4294967295]="MAX_UINT_32",t[t.UNICODE_SUPPLEMENTARY_PLANE_BEGIN=65536]="UNICODE_SUPPLEMENTARY_PLANE_BEGIN"})(Gh||(Gh={}));function Qh(t,e){return(e<<5)-e+t|0}s(Qh,"numberHash");function i0(t,e){e=Qh(149417,e);for(let n=0,r=t.length;n<r;n++)e=Qh(t.charCodeAt(n),e);return e}s(i0,"stringHash");class yu{constructor(e){this.source=e}getElements(){const e=this.source,n=new Int32Array(e.length);for(let r=0,i=e.length;r<i;r++)n[r]=e.charCodeAt(r);return n}}s(yu,"StringDiffSequence");class Bo{static Assert(e,n){if(!e)throw new Error(n)}}s(Bo,"Debug");class Wo{static Copy(e,n,r,i,o){for(let a=0;a<o;a++)r[i+a]=e[n+a]}static Copy2(e,n,r,i,o){for(let a=0;a<o;a++)r[i+a]=e[n+a]}}s(Wo,"MyArray");var Xh;(function(t){t[t.MaxDifferencesHistory=1447]="MaxDifferencesHistory"})(Xh||(Xh={}));class wu{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new ro(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,n){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,n),this.m_originalCount++}AddModifiedElement(e,n){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,n),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}s(wu,"DiffChangeHelper");class Co{constructor(e,n,r=null){this.ContinueProcessingPredicate=r,this._originalSequence=e,this._modifiedSequence=n;const[i,o,a]=Co._getElements(e),[c,l,u]=Co._getElements(n);this._hasStrings=a&&u,this._originalStringElements=i,this._originalElementsOrHash=o,this._modifiedStringElements=c,this._modifiedElementsOrHash=l,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){const n=e.getElements();if(Co._isStringArray(n)){const r=new Int32Array(n.length);for(let i=0,o=n.length;i<o;i++)r[i]=i0(n[i],0);return[n,r,!0]}return n instanceof Int32Array?[[],n,!1]:[[],new Int32Array(n),!1]}ElementsAreEqual(e,n){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[n]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[n]:!0}ElementsAreStrictEqual(e,n){if(!this.ElementsAreEqual(e,n))return!1;const r=Co._getStrictElement(this._originalSequence,e),i=Co._getStrictElement(this._modifiedSequence,n);return r===i}static _getStrictElement(e,n){return typeof e.getStrictElement=="function"?e.getStrictElement(n):null}OriginalElementsAreEqual(e,n){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[n]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[n]:!0}ModifiedElementsAreEqual(e,n){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[n]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[n]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,n,r,i,o){const a=[!1];let c=this.ComputeDiffRecursive(e,n,r,i,a);return o&&(c=this.PrettifyChanges(c)),{quitEarly:a[0],changes:c}}ComputeDiffRecursive(e,n,r,i,o){for(o[0]=!1;e<=n&&r<=i&&this.ElementsAreEqual(e,r);)e++,r++;for(;n>=e&&i>=r&&this.ElementsAreEqual(n,i);)n--,i--;if(e>n||r>i){let h;return r<=i?(Bo.Assert(e===n+1,"originalStart should only be one more than originalEnd"),h=[new ro(e,0,r,i-r+1)]):e<=n?(Bo.Assert(r===i+1,"modifiedStart should only be one more than modifiedEnd"),h=[new ro(e,n-e+1,r,0)]):(Bo.Assert(e===n+1,"originalStart should only be one more than originalEnd"),Bo.Assert(r===i+1,"modifiedStart should only be one more than modifiedEnd"),h=[]),h}const a=[0],c=[0],l=this.ComputeRecursionPoint(e,n,r,i,a,c,o),u=a[0],d=c[0];if(l!==null)return l;if(!o[0]){const h=this.ComputeDiffRecursive(e,u,r,d,o);let g=[];return o[0]?g=[new ro(u+1,n-(u+1)+1,d+1,i-(d+1)+1)]:g=this.ComputeDiffRecursive(u+1,n,d+1,i,o),this.ConcatenateChanges(h,g)}return[new ro(e,n-e+1,r,i-r+1)]}WALKTRACE(e,n,r,i,o,a,c,l,u,d,h,g,p,C,v,m,b,w){let P=null,F=null,A=new wu,Z=n,$e=r,fe=p[0]-m[0]-i,It=-1073741824,kt=this.m_forwardHistory.length-1;do{const Pt=fe+e;Pt===Z||Pt<$e&&u[Pt-1]<u[Pt+1]?(h=u[Pt+1],C=h-fe-i,h<It&&A.MarkNextChange(),It=h,A.AddModifiedElement(h+1,C),fe=Pt+1-e):(h=u[Pt-1]+1,C=h-fe-i,h<It&&A.MarkNextChange(),It=h-1,A.AddOriginalElement(h,C+1),fe=Pt-1-e),kt>=0&&(u=this.m_forwardHistory[kt],e=u[0],Z=1,$e=u.length-1)}while(--kt>=-1);if(P=A.getReverseChanges(),w[0]){let Pt=p[0]+1,st=m[0]+1;if(P!==null&&P.length>0){const Mn=P[P.length-1];Pt=Math.max(Pt,Mn.getOriginalEnd()),st=Math.max(st,Mn.getModifiedEnd())}F=[new ro(Pt,g-Pt+1,st,v-st+1)]}else{A=new wu,Z=a,$e=c,fe=p[0]-m[0]-l,It=1073741824,kt=b?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const Pt=fe+o;Pt===Z||Pt<$e&&d[Pt-1]>=d[Pt+1]?(h=d[Pt+1]-1,C=h-fe-l,h>It&&A.MarkNextChange(),It=h+1,A.AddOriginalElement(h+1,C+1),fe=Pt+1-o):(h=d[Pt-1],C=h-fe-l,h>It&&A.MarkNextChange(),It=h,A.AddModifiedElement(h+1,C+1),fe=Pt-1-o),kt>=0&&(d=this.m_reverseHistory[kt],o=d[0],Z=1,$e=d.length-1)}while(--kt>=-1);F=A.getChanges()}return this.ConcatenateChanges(P,F)}ComputeRecursionPoint(e,n,r,i,o,a,c){let l=0,u=0,d=0,h=0,g=0,p=0;e--,r--,o[0]=0,a[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const C=n-e+(i-r),v=C+1,m=new Int32Array(v),b=new Int32Array(v),w=i-r,P=n-e,F=e-r,A=n-i,$e=(P-w)%2==0;m[w]=e,b[P]=n,c[0]=!1;for(let fe=1;fe<=C/2+1;fe++){let It=0,kt=0;d=this.ClipDiagonalBound(w-fe,fe,w,v),h=this.ClipDiagonalBound(w+fe,fe,w,v);for(let st=d;st<=h;st+=2){st===d||st<h&&m[st-1]<m[st+1]?l=m[st+1]:l=m[st-1]+1,u=l-(st-w)-F;const Mn=l;for(;l<n&&u<i&&this.ElementsAreEqual(l+1,u+1);)l++,u++;if(m[st]=l,l+u>It+kt&&(It=l,kt=u),!$e&&Math.abs(st-P)<=fe-1&&l>=b[st])return o[0]=l,a[0]=u,Mn<=b[st]&&1447>0&&fe<=1447+1?this.WALKTRACE(w,d,h,F,P,g,p,A,m,b,l,n,o,u,i,a,$e,c):null}const Pt=(It-e+(kt-r)-fe)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(It,Pt))return c[0]=!0,o[0]=It,a[0]=kt,Pt>0&&1447>0&&fe<=1447+1?this.WALKTRACE(w,d,h,F,P,g,p,A,m,b,l,n,o,u,i,a,$e,c):(e++,r++,[new ro(e,n-e+1,r,i-r+1)]);g=this.ClipDiagonalBound(P-fe,fe,P,v),p=this.ClipDiagonalBound(P+fe,fe,P,v);for(let st=g;st<=p;st+=2){st===g||st<p&&b[st-1]>=b[st+1]?l=b[st+1]-1:l=b[st-1],u=l-(st-P)-A;const Mn=l;for(;l>e&&u>r&&this.ElementsAreEqual(l,u);)l--,u--;if(b[st]=l,$e&&Math.abs(st-w)<=fe&&l<=m[st])return o[0]=l,a[0]=u,Mn>=m[st]&&1447>0&&fe<=1447+1?this.WALKTRACE(w,d,h,F,P,g,p,A,m,b,l,n,o,u,i,a,$e,c):null}if(fe<=1447){let st=new Int32Array(h-d+2);st[0]=w-d+1,Wo.Copy2(m,d,st,1,h-d+1),this.m_forwardHistory.push(st),st=new Int32Array(p-g+2),st[0]=P-g+1,Wo.Copy2(b,g,st,1,p-g+1),this.m_reverseHistory.push(st)}}return this.WALKTRACE(w,d,h,F,P,g,p,A,m,b,l,n,o,u,i,a,$e,c)}PrettifyChanges(e){for(let n=0;n<e.length;n++){const r=e[n],i=n<e.length-1?e[n+1].originalStart:this._originalElementsOrHash.length,o=n<e.length-1?e[n+1].modifiedStart:this._modifiedElementsOrHash.length,a=r.originalLength>0,c=r.modifiedLength>0;for(;r.originalStart+r.originalLength<i&&r.modifiedStart+r.modifiedLength<o&&(!a||this.OriginalElementsAreEqual(r.originalStart,r.originalStart+r.originalLength))&&(!c||this.ModifiedElementsAreEqual(r.modifiedStart,r.modifiedStart+r.modifiedLength));){const u=this.ElementsAreStrictEqual(r.originalStart,r.modifiedStart);if(this.ElementsAreStrictEqual(r.originalStart+r.originalLength,r.modifiedStart+r.modifiedLength)&&!u)break;r.originalStart++,r.modifiedStart++}let l=[null];if(n<e.length-1&&this.ChangesOverlap(e[n],e[n+1],l)){e[n]=l[0],e.splice(n+1,1),n--;continue}}for(let n=e.length-1;n>=0;n--){const r=e[n];let i=0,o=0;if(n>0){const h=e[n-1];i=h.originalStart+h.originalLength,o=h.modifiedStart+h.modifiedLength}const a=r.originalLength>0,c=r.modifiedLength>0;let l=0,u=this._boundaryScore(r.originalStart,r.originalLength,r.modifiedStart,r.modifiedLength);for(let h=1;;h++){const g=r.originalStart-h,p=r.modifiedStart-h;if(g<i||p<o||a&&!this.OriginalElementsAreEqual(g,g+r.originalLength)||c&&!this.ModifiedElementsAreEqual(p,p+r.modifiedLength))break;const v=(g===i&&p===o?5:0)+this._boundaryScore(g,r.originalLength,p,r.modifiedLength);v>u&&(u=v,l=h)}r.originalStart-=l,r.modifiedStart-=l;const d=[null];if(n>0&&this.ChangesOverlap(e[n-1],e[n],d)){e[n-1]=d[0],e.splice(n,1),n++;continue}}if(this._hasStrings)for(let n=1,r=e.length;n<r;n++){const i=e[n-1],o=e[n],a=o.originalStart-i.originalStart-i.originalLength,c=i.originalStart,l=o.originalStart+o.originalLength,u=l-c,d=i.modifiedStart,h=o.modifiedStart+o.modifiedLength,g=h-d;if(a<5&&u<20&&g<20){const p=this._findBetterContiguousSequence(c,u,d,g,a);if(p){const[C,v]=p;(C!==i.originalStart+i.originalLength||v!==i.modifiedStart+i.modifiedLength)&&(i.originalLength=C-i.originalStart,i.modifiedLength=v-i.modifiedStart,o.originalStart=C+a,o.modifiedStart=v+a,o.originalLength=l-o.originalStart,o.modifiedLength=h-o.modifiedStart)}}}return e}_findBetterContiguousSequence(e,n,r,i,o){if(n<o||i<o)return null;const a=e+n-o+1,c=r+i-o+1;let l=0,u=0,d=0;for(let h=e;h<a;h++)for(let g=r;g<c;g++){const p=this._contiguousSequenceScore(h,g,o);p>0&&p>l&&(l=p,u=h,d=g)}return l>0?[u,d]:null}_contiguousSequenceScore(e,n,r){let i=0;for(let o=0;o<r;o++){if(!this.ElementsAreEqual(e+o,n+o))return 0;i+=this._originalStringElements[e+o].length}return i}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,n){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(n>0){const r=e+n;if(this._OriginalIsBoundary(r-1)||this._OriginalIsBoundary(r))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,n){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(n>0){const r=e+n;if(this._ModifiedIsBoundary(r-1)||this._ModifiedIsBoundary(r))return!0}return!1}_boundaryScore(e,n,r,i){const o=this._OriginalRegionIsBoundary(e,n)?1:0,a=this._ModifiedRegionIsBoundary(r,i)?1:0;return o+a}ConcatenateChanges(e,n){let r=[];if(e.length===0||n.length===0)return n.length>0?n:e;if(this.ChangesOverlap(e[e.length-1],n[0],r)){const i=new Array(e.length+n.length-1);return Wo.Copy(e,0,i,0,e.length-1),i[e.length-1]=r[0],Wo.Copy(n,1,i,e.length,n.length-1),i}else{const i=new Array(e.length+n.length);return Wo.Copy(e,0,i,0,e.length),Wo.Copy(n,0,i,e.length,n.length),i}}ChangesOverlap(e,n,r){if(Bo.Assert(e.originalStart<=n.originalStart,"Left change is not less than or equal to right change"),Bo.Assert(e.modifiedStart<=n.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=n.originalStart||e.modifiedStart+e.modifiedLength>=n.modifiedStart){const i=e.originalStart;let o=e.originalLength;const a=e.modifiedStart;let c=e.modifiedLength;return e.originalStart+e.originalLength>=n.originalStart&&(o=n.originalStart+n.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=n.modifiedStart&&(c=n.modifiedStart+n.modifiedLength-e.modifiedStart),r[0]=new ro(i,o,a,c),!0}else return r[0]=null,!1}ClipDiagonalBound(e,n,r,i){if(e>=0&&e<i)return e;const o=r,a=i-r-1,c=n%2==0;if(e<0){const l=o%2==0;return c===l?0:1}else{const l=a%2==0;return c===l?i-1:i-2}}}s(Co,"LcsDiff");var Cu;(function(t){function e(r,i){return r instanceof va?i:new f.Position(i.line,i.character)}s(e,"makePosition"),t.makePosition=e;function n(r,i){return r instanceof va?i:new f.Range(i.start.line,i.start.character,i.end.line,i.end.character)}s(n,"makeRange"),t.makeRange=n})(Cu||(Cu={}));var Jh;(function(t){t[t.index2code=1]="index2code",t[t.code2Index=2]="code2Index"})(Jh||(Jh={}));const Yh=s(class{constructor(t,e,n,r){this.diffCache=new no(32),this.indexDocumentCache=new no(32),this.codeDocumentCache=new no(32),this.providerService=t,this.rootUri=e,this.index=n,this.code=r,this.changes=this.computeChanges()}async computeChanges(){if(this.index===this.code)return new Map;const t=await this.providerService.compareCommits(this.rootUri,{base:this.index,compare:this.code});return t===void 0?new Map:new Map(t.map(e=>[e.uri.toString(),e.type]))}async needsMapping(t){const e=t.uri;if(!e.toString().startsWith(this.rootUri.toString()))return!1;if((await this.changes).get(e.toString())!==void 0)return!0;const i=await this.getIndexDocument(e);return i===void 0?!0:this.getDiff(1,i,t).length!==0}async mapPositionFromCodeToIndex(t,e){const n=t.uri;if(!n.toString().startsWith(this.rootUri.toString()))return;const i=(await this.changes).get(n.toString());if(i===I.Created||i===I.Deleted)return;const o=await this.getIndexDocument(n);if(o===void 0)return;const a=this.getDiff(2,o,t);if(a.length===0)return e;const c=t.offsetAt(new f.Position(e.line,e.character));let l=c;for(const g of a){if(g.modifiedStart<=c&&c<g.modifiedStart+g.modifiedLength)return;if(l<g.modifiedStart)break;l=l-(g.modifiedLength-g.originalLength)}const u=o.positionAt(l),d=this.getWordAtOffset(o.lineAt(u.line).text,u.character),h=this.getWordAtOffset(t.lineAt(e.line).text,e.character);if(!(d===void 0||h===void 0||d!==h))return new f.Position(u.line,u.character)}async mapRangeFromIndexToCode(t,e){const n=t instanceof f.Uri?t:t.uri;if(!n.toString().startsWith(this.rootUri.toString()))return;const i=(await this.changes).get(n.toString());if(i===I.Created||i===I.Deleted)return;const[o,a]=await Promise.all([this.getIndexDocument(n),this.getCodeDocument(t)]);if(o===void 0||a===void 0)return;const c=this.getDiff(1,o,a);if(c.length===0)return e;const l=o.offsetAt(e.start);let u=l;const d=o.offsetAt(e.end);let h=d;for(const m of c){if(h<m.originalStart)break;const b=m.modifiedLength-m.originalLength;if(m.originalStart<=l){if(l<m.originalStart+m.originalLength)return;u+=b}else if(d<m.originalStart+m.originalLength)return;if(m.originalStart<=d){if(d<m.originalStart+m.originalLength)return;h+=b}}const g=a.positionAt(u),p=a.positionAt(h),C=o.getText(e),v=a.getText(Cu.makeRange(a,{start:g,end:p}));if(C===v)return new f.Range(g.line,g.character,p.line,p.character)}async getIndexDocument(t){return this.getDocument(this.indexDocumentCache,t,this.index)}async getCodeDocument(t){return t instanceof f.Uri?this.getDocument(this.codeDocumentCache,t,this.code):t}async getDocument(t,e,n){let r=t.get(e.toString());if(r!==null)return r!==void 0||(r=this._getDocument(e,n),t.set(e.toString(),r),r.then(i=>{i===void 0&&t.set(e.toString(),null)},void 0)),r}async _getDocument(t,e){const n=t.toString().substr(this.rootUri.toString().length);return this.providerService.getFileContent(this.rootUri,e,n).then(r=>new va(t,Number.MAX_VALUE,Yh.textDecoder.decode(r)),()=>{})}getDiff(t,e,n){if(e.uri.toString()!==n.uri.toString())throw new Error(`Original (${e.uri.toString()}) and modified (${n.uri.toString()}) are pointing to a different document`);const r=`${t}${e.uri.toString()}`;let i=this.diffCache.get(r);return i!==void 0&&i.original===e.version&&i.modified===n.version||(i={original:e.version,modified:n.version,changes:r0(e.getText(),n.getText(),!0)},this.diffCache.set(r,i)),i.changes}getWordAtOffset(t,e){let n="findStart",r=0,i=t.length,o=0;for(;o<t.length&&n!=="endFound";){switch(o===e&&(n="findEnd"),t[o]){case" ":case"	":case"(":case")":case"[":case"]":case"{":case"}":case"'":case'"':case"`":switch(n){case"findStart":r=o+1;break;case"findEnd":i=o,n="endFound";break}break}o++}return n==="endFound"?t.substring(r,i):void 0}},"_DiffMapper");let Zh=Yh;Zh.textDecoder=new TextDecoder("utf8");var eg;(function(t){t[t.LineFeed=10]="LineFeed",t[t.CarriageReturn=13]="CarriageReturn"})(eg||(eg={}));class va{static computeLineOffsets(e,n,r=0){const i=n?[r]:[];for(let o=0;o<e.length;o++){const a=e.charCodeAt(o);(a===13||a===10)&&(a===13&&o+1<e.length&&e.charCodeAt(o+1)===10&&o++,i.push(r+o+1))}return i}constructor(e,n,r){this._content=r,this.uri=e,this.version=n,this._lineOffsets=void 0}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=va.computeLineOffsets(this._content,!0)),this._lineOffsets}getText(e){if(e){const n=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(n,r)}return this._content}lineAt(e){const n=this.getLineOffsets();if(e>=n.length)return{lineNumber:e,text:""};const r=n[e],i=n[e+1];if(i===void 0)return{lineNumber:e,text:this._content.substring(r)};const o=this._content.substring(r,i);let a=o.length-1;for(;a>=0&&(o[a]===`
`||o[a]==="\r");)a--;return{lineNumber:e,text:o.substr(0,a+1)}}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);const n=this.getLineOffsets();let r=0,i=n.length;if(i===0)return{line:0,character:e};for(;r<i;){const a=Math.floor((r+i)/2);n[a]>e?i=a:r=a+1}const o=r-1;return{line:o,character:e-n[o]}}offsetAt(e){const n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;const r=n[e.line],i=e.line+1<n.length?n[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,i),r)}get lineCount(){return this.getLineOffsets().length}}s(va,"TextDocument");var tg;(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647})(tg||(tg={}));var sc;(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647})(sc||(sc={}));var Wi;(function(t){function e(r,i){return r===Number.MAX_VALUE&&(r=sc.MAX_VALUE),i===Number.MAX_VALUE&&(i=sc.MAX_VALUE),{line:r,character:i}}s(e,"create"),t.create=e;function n(r){var i=r;return ie.objectLiteral(i)&&ie.uinteger(i.line)&&ie.uinteger(i.character)}s(n,"is"),t.is=n})(Wi||(Wi={}));var wr;(function(t){function e(r,i,o,a){if(ie.uinteger(r)&&ie.uinteger(i)&&ie.uinteger(o)&&ie.uinteger(a))return{start:Wi.create(r,i),end:Wi.create(o,a)};if(Wi.is(r)&&Wi.is(i))return{start:r,end:i};throw new Error("Range#create called with invalid arguments["+r+", "+i+", "+o+", "+a+"]")}s(e,"create"),t.create=e;function n(r){var i=r;return ie.objectLiteral(i)&&Wi.is(i.start)&&Wi.is(i.end)}s(n,"is"),t.is=n})(wr||(wr={}));var Su;(function(t){function e(r,i){return{uri:r,range:i}}s(e,"create"),t.create=e;function n(r){var i=r;return ie.defined(i)&&wr.is(i.range)&&(ie.string(i.uri)||ie.undefined(i.uri))}s(n,"is"),t.is=n})(Su||(Su={}));var cc;(function(t){function e(r,i,o,a){return{targetUri:r,targetRange:i,targetSelectionRange:o,originSelectionRange:a}}s(e,"create"),t.create=e;function n(r){var i=r;return ie.defined(i)&&wr.is(i.targetRange)&&ie.string(i.targetUri)&&(wr.is(i.targetSelectionRange)||ie.undefined(i.targetSelectionRange))&&(wr.is(i.originSelectionRange)||ie.undefined(i.originSelectionRange))}s(n,"is"),t.is=n})(cc||(cc={}));var bu;(function(t){function e(r,i,o,a){return{red:r,green:i,blue:o,alpha:a}}s(e,"create"),t.create=e;function n(r){var i=r;return ie.numberRange(i.red,0,1)&&ie.numberRange(i.green,0,1)&&ie.numberRange(i.blue,0,1)&&ie.numberRange(i.alpha,0,1)}s(n,"is"),t.is=n})(bu||(bu={}));var ng;(function(t){function e(r,i){return{range:r,color:i}}s(e,"create"),t.create=e;function n(r){var i=r;return wr.is(i.range)&&bu.is(i.color)}s(n,"is"),t.is=n})(ng||(ng={}));var rg;(function(t){function e(r,i,o){return{label:r,textEdit:i,additionalTextEdits:o}}s(e,"create"),t.create=e;function n(r){var i=r;return ie.string(i.label)&&(ie.undefined(i.textEdit)||So.is(i))&&(ie.undefined(i.additionalTextEdits)||ie.typedArray(i.additionalTextEdits,So.is))}s(n,"is"),t.is=n})(rg||(rg={}));var Za;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(Za||(Za={}));var ig;(function(t){function e(r,i,o,a,c){var l={startLine:r,endLine:i};return ie.defined(o)&&(l.startCharacter=o),ie.defined(a)&&(l.endCharacter=a),ie.defined(c)&&(l.kind=c),l}s(e,"create"),t.create=e;function n(r){var i=r;return ie.uinteger(i.startLine)&&ie.uinteger(i.startLine)&&(ie.undefined(i.startCharacter)||ie.uinteger(i.startCharacter))&&(ie.undefined(i.endCharacter)||ie.uinteger(i.endCharacter))&&(ie.undefined(i.kind)||ie.string(i.kind))}s(n,"is"),t.is=n})(ig||(ig={}));var _u;(function(t){function e(r,i){return{location:r,message:i}}s(e,"create"),t.create=e;function n(r){var i=r;return ie.defined(i)&&Su.is(i.location)&&ie.string(i.message)}s(n,"is"),t.is=n})(_u||(_u={}));var ma;(function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(ma||(ma={}));var lc;(function(t){t.Unnecessary=1,t.Deprecated=2})(lc||(lc={}));var Eu;(function(t){function e(n){var r=n;return r!=null&&ie.string(r.href)}s(e,"is"),t.is=e})(Eu||(Eu={}));var uc;(function(t){function e(r,i,o,a,c,l){var u={range:r,message:i};return ie.defined(o)&&(u.severity=o),ie.defined(a)&&(u.code=a),ie.defined(c)&&(u.source=c),ie.defined(l)&&(u.relatedInformation=l),u}s(e,"create"),t.create=e;function n(r){var i,o=r;return ie.defined(o)&&wr.is(o.range)&&ie.string(o.message)&&(ie.number(o.severity)||ie.undefined(o.severity))&&(ie.integer(o.code)||ie.string(o.code)||ie.undefined(o.code))&&(ie.undefined(o.codeDescription)||ie.string((i=o.codeDescription)===null||i===void 0?void 0:i.href))&&(ie.string(o.source)||ie.undefined(o.source))&&(ie.undefined(o.relatedInformation)||ie.typedArray(o.relatedInformation,_u.is))}s(n,"is"),t.is=n})(uc||(uc={}));var es;(function(t){function e(r,i){for(var o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];var c={title:r,command:i};return ie.defined(o)&&o.length>0&&(c.arguments=o),c}s(e,"create"),t.create=e;function n(r){var i=r;return ie.defined(i)&&ie.string(i.title)&&ie.string(i.command)}s(n,"is"),t.is=n})(es||(es={}));var So;(function(t){function e(o,a){return{range:o,newText:a}}s(e,"replace"),t.replace=e;function n(o,a){return{range:{start:o,end:o},newText:a}}s(n,"insert"),t.insert=n;function r(o){return{range:o,newText:""}}s(r,"del"),t.del=r;function i(o){var a=o;return ie.objectLiteral(a)&&ie.string(a.newText)&&wr.is(a.range)}s(i,"is"),t.is=i})(So||(So={}));var ya;(function(t){function e(r,i,o){var a={label:r};return i!==void 0&&(a.needsConfirmation=i),o!==void 0&&(a.description=o),a}s(e,"create"),t.create=e;function n(r){var i=r;return i!==void 0&&ie.objectLiteral(i)&&ie.string(i.label)&&(ie.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(ie.string(i.description)||i.description===void 0)}s(n,"is"),t.is=n})(ya||(ya={}));var Dr;(function(t){function e(n){var r=n;return typeof r=="string"}s(e,"is"),t.is=e})(Dr||(Dr={}));var bo;(function(t){function e(o,a,c){return{range:o,newText:a,annotationId:c}}s(e,"replace"),t.replace=e;function n(o,a,c){return{range:{start:o,end:o},newText:a,annotationId:c}}s(n,"insert"),t.insert=n;function r(o,a){return{range:o,newText:"",annotationId:a}}s(r,"del"),t.del=r;function i(o){var a=o;return So.is(a)&&(ya.is(a.annotationId)||Dr.is(a.annotationId))}s(i,"is"),t.is=i})(bo||(bo={}));var ts;(function(t){function e(r,i){return{textDocument:r,edits:i}}s(e,"create"),t.create=e;function n(r){var i=r;return ie.defined(i)&&fc.is(i.textDocument)&&Array.isArray(i.edits)}s(n,"is"),t.is=n})(ts||(ts={}));var wa;(function(t){function e(r,i,o){var a={kind:"create",uri:r};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(a.options=i),o!==void 0&&(a.annotationId=o),a}s(e,"create"),t.create=e;function n(r){var i=r;return i&&i.kind==="create"&&ie.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||ie.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||ie.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||Dr.is(i.annotationId))}s(n,"is"),t.is=n})(wa||(wa={}));var Ca;(function(t){function e(r,i,o,a){var c={kind:"rename",oldUri:r,newUri:i};return o!==void 0&&(o.overwrite!==void 0||o.ignoreIfExists!==void 0)&&(c.options=o),a!==void 0&&(c.annotationId=a),c}s(e,"create"),t.create=e;function n(r){var i=r;return i&&i.kind==="rename"&&ie.string(i.oldUri)&&ie.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||ie.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||ie.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||Dr.is(i.annotationId))}s(n,"is"),t.is=n})(Ca||(Ca={}));var Sa;(function(t){function e(r,i,o){var a={kind:"delete",uri:r};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(a.options=i),o!==void 0&&(a.annotationId=o),a}s(e,"create"),t.create=e;function n(r){var i=r;return i&&i.kind==="delete"&&ie.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||ie.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||ie.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||Dr.is(i.annotationId))}s(n,"is"),t.is=n})(Sa||(Sa={}));var xu;(function(t){function e(n){var r=n;return r&&(r.changes!==void 0||r.documentChanges!==void 0)&&(r.documentChanges===void 0||r.documentChanges.every(function(i){return ie.string(i.kind)?wa.is(i)||Ca.is(i)||Sa.is(i):ts.is(i)}))}s(e,"is"),t.is=e})(xu||(xu={}));var dc=function(){function t(e,n){this.edits=e,this.changeAnnotations=n}return s(t,"TextEditChangeImpl"),t.prototype.insert=function(e,n,r){var i,o;if(r===void 0?i=So.insert(e,n):Dr.is(r)?(o=r,i=bo.insert(e,n,r)):(this.assertChangeAnnotations(this.changeAnnotations),o=this.changeAnnotations.manage(r),i=bo.insert(e,n,o)),this.edits.push(i),o!==void 0)return o},t.prototype.replace=function(e,n,r){var i,o;if(r===void 0?i=So.replace(e,n):Dr.is(r)?(o=r,i=bo.replace(e,n,r)):(this.assertChangeAnnotations(this.changeAnnotations),o=this.changeAnnotations.manage(r),i=bo.replace(e,n,o)),this.edits.push(i),o!==void 0)return o},t.prototype.delete=function(e,n){var r,i;if(n===void 0?r=So.del(e):Dr.is(n)?(i=n,r=bo.del(e,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),r=bo.del(e,i)),this.edits.push(r),i!==void 0)return i},t.prototype.add=function(e){this.edits.push(e)},t.prototype.all=function(){return this.edits},t.prototype.clear=function(){this.edits.splice(0,this.edits.length)},t.prototype.assertChangeAnnotations=function(e){if(e===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},t}(),og=function(){function t(e){this._annotations=e===void 0?Object.create(null):e,this._counter=0,this._size=0}return s(t,"ChangeAnnotations"),t.prototype.all=function(){return this._annotations},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),t.prototype.manage=function(e,n){var r;if(Dr.is(e)?r=e:(r=this.nextId(),n=e),this._annotations[r]!==void 0)throw new Error("Id "+r+" is already in use.");if(n===void 0)throw new Error("No annotation provided for id "+r);return this._annotations[r]=n,this._size++,r},t.prototype.nextId=function(){return this._counter++,this._counter.toString()},t}(),Cy=function(){function t(e){var n=this;this._textEditChanges=Object.create(null),e!==void 0?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new og(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach(function(r){if(ts.is(r)){var i=new dc(r.edits,n._changeAnnotations);n._textEditChanges[r.textDocument.uri]=i}})):e.changes&&Object.keys(e.changes).forEach(function(r){var i=new dc(e.changes[r]);n._textEditChanges[r]=i})):this._workspaceEdit={}}return s(t,"WorkspaceChange"),Object.defineProperty(t.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),t.prototype.getTextEditChange=function(e){if(fc.is(e)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var n={uri:e.uri,version:e.version},r=this._textEditChanges[n.uri];if(!r){var i=[],o={textDocument:n,edits:i};this._workspaceEdit.documentChanges.push(o),r=new dc(i,this._changeAnnotations),this._textEditChanges[n.uri]=r}return r}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var r=this._textEditChanges[e];if(!r){var i=[];this._workspaceEdit.changes[e]=i,r=new dc(i),this._textEditChanges[e]=r}return r}},t.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new og,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},t.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},t.prototype.createFile=function(e,n,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;ya.is(n)||Dr.is(n)?i=n:r=n;var o,a;if(i===void 0?o=wa.create(e,r):(a=Dr.is(i)?i:this._changeAnnotations.manage(i),o=wa.create(e,r,a)),this._workspaceEdit.documentChanges.push(o),a!==void 0)return a},t.prototype.renameFile=function(e,n,r,i){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var o;ya.is(r)||Dr.is(r)?o=r:i=r;var a,c;if(o===void 0?a=Ca.create(e,n,i):(c=Dr.is(o)?o:this._changeAnnotations.manage(o),a=Ca.create(e,n,i,c)),this._workspaceEdit.documentChanges.push(a),c!==void 0)return c},t.prototype.deleteFile=function(e,n,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var i;ya.is(n)||Dr.is(n)?i=n:r=n;var o,a;if(i===void 0?o=Sa.create(e,r):(a=Dr.is(i)?i:this._changeAnnotations.manage(i),o=Sa.create(e,r,a)),this._workspaceEdit.documentChanges.push(o),a!==void 0)return a},t}(),ag;(function(t){function e(r){return{uri:r}}s(e,"create"),t.create=e;function n(r){var i=r;return ie.defined(i)&&ie.string(i.uri)}s(n,"is"),t.is=n})(ag||(ag={}));var sg;(function(t){function e(r,i){return{uri:r,version:i}}s(e,"create"),t.create=e;function n(r){var i=r;return ie.defined(i)&&ie.string(i.uri)&&ie.integer(i.version)}s(n,"is"),t.is=n})(sg||(sg={}));var fc;(function(t){function e(r,i){return{uri:r,version:i}}s(e,"create"),t.create=e;function n(r){var i=r;return ie.defined(i)&&ie.string(i.uri)&&(i.version===null||ie.integer(i.version))}s(n,"is"),t.is=n})(fc||(fc={}));var cg;(function(t){function e(r,i,o,a){return{uri:r,languageId:i,version:o,text:a}}s(e,"create"),t.create=e;function n(r){var i=r;return ie.defined(i)&&ie.string(i.uri)&&ie.string(i.languageId)&&ie.integer(i.version)&&ie.string(i.text)}s(n,"is"),t.is=n})(cg||(cg={}));var io;(function(t){t.PlainText="plaintext",t.Markdown="markdown"})(io||(io={})),function(t){function e(n){var r=n;return r===t.PlainText||r===t.Markdown}s(e,"is"),t.is=e}(io||(io={}));var Iu;(function(t){function e(n){var r=n;return ie.objectLiteral(n)&&io.is(r.kind)&&ie.string(r.value)}s(e,"is"),t.is=e})(Iu||(Iu={}));var lg;(function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(lg||(lg={}));var ug;(function(t){t.PlainText=1,t.Snippet=2})(ug||(ug={}));var dg;(function(t){t.Deprecated=1})(dg||(dg={}));var fg;(function(t){function e(r,i,o){return{newText:r,insert:i,replace:o}}s(e,"create"),t.create=e;function n(r){var i=r;return i&&ie.string(i.newText)&&wr.is(i.insert)&&wr.is(i.replace)}s(n,"is"),t.is=n})(fg||(fg={}));var hg;(function(t){t.asIs=1,t.adjustIndentation=2})(hg||(hg={}));var gg;(function(t){function e(n){return{label:n}}s(e,"create"),t.create=e})(gg||(gg={}));var pg;(function(t){function e(n,r){return{items:n||[],isIncomplete:!!r}}s(e,"create"),t.create=e})(pg||(pg={}));var hc;(function(t){function e(r){return r.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}s(e,"fromPlainText"),t.fromPlainText=e;function n(r){var i=r;return ie.string(i)||ie.objectLiteral(i)&&ie.string(i.language)&&ie.string(i.value)}s(n,"is"),t.is=n})(hc||(hc={}));var vg;(function(t){function e(n){var r=n;return!!r&&ie.objectLiteral(r)&&(Iu.is(r.contents)||hc.is(r.contents)||ie.typedArray(r.contents,hc.is))&&(n.range===void 0||wr.is(n.range))}s(e,"is"),t.is=e})(vg||(vg={}));var mg;(function(t){function e(n,r){return r?{label:n,documentation:r}:{label:n}}s(e,"create"),t.create=e})(mg||(mg={}));var yg;(function(t){function e(n,r){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a={label:n};return ie.defined(r)&&(a.documentation=r),ie.defined(i)?a.parameters=i:a.parameters=[],a}s(e,"create"),t.create=e})(yg||(yg={}));var ns;(function(t){t.Text=1,t.Read=2,t.Write=3})(ns||(ns={}));var wg;(function(t){function e(n,r){var i={range:n};return ie.number(r)&&(i.kind=r),i}s(e,"create"),t.create=e})(wg||(wg={}));var Du;(function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(Du||(Du={}));var Tu;(function(t){t.Deprecated=1})(Tu||(Tu={}));var Cg;(function(t){function e(n,r,i,o,a){var c={name:n,kind:r,location:{uri:o,range:i}};return a&&(c.containerName=a),c}s(e,"create"),t.create=e})(Cg||(Cg={}));var Sg;(function(t){function e(r,i,o,a,c,l){var u={name:r,detail:i,kind:o,range:a,selectionRange:c};return l!==void 0&&(u.children=l),u}s(e,"create"),t.create=e;function n(r){var i=r;return i&&ie.string(i.name)&&ie.number(i.kind)&&wr.is(i.range)&&wr.is(i.selectionRange)&&(i.detail===void 0||ie.string(i.detail))&&(i.deprecated===void 0||ie.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}s(n,"is"),t.is=n})(Sg||(Sg={}));var $i;(function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"})($i||($i={}));var bg;(function(t){function e(r,i){var o={diagnostics:r};return i!=null&&(o.only=i),o}s(e,"create"),t.create=e;function n(r){var i=r;return ie.defined(i)&&ie.typedArray(i.diagnostics,uc.is)&&(i.only===void 0||ie.typedArray(i.only,ie.string))}s(n,"is"),t.is=n})(bg||(bg={}));var _g;(function(t){function e(r,i,o){var a={title:r},c=!0;return typeof i=="string"?(c=!1,a.kind=i):es.is(i)?a.command=i:a.edit=i,c&&o!==void 0&&(a.kind=o),a}s(e,"create"),t.create=e;function n(r){var i=r;return i&&ie.string(i.title)&&(i.diagnostics===void 0||ie.typedArray(i.diagnostics,uc.is))&&(i.kind===void 0||ie.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||es.is(i.command))&&(i.isPreferred===void 0||ie.boolean(i.isPreferred))&&(i.edit===void 0||xu.is(i.edit))}s(n,"is"),t.is=n})(_g||(_g={}));var Eg;(function(t){function e(r,i){var o={range:r};return ie.defined(i)&&(o.data=i),o}s(e,"create"),t.create=e;function n(r){var i=r;return ie.defined(i)&&wr.is(i.range)&&(ie.undefined(i.command)||es.is(i.command))}s(n,"is"),t.is=n})(Eg||(Eg={}));var xg;(function(t){function e(r,i){return{tabSize:r,insertSpaces:i}}s(e,"create"),t.create=e;function n(r){var i=r;return ie.defined(i)&&ie.uinteger(i.tabSize)&&ie.boolean(i.insertSpaces)}s(n,"is"),t.is=n})(xg||(xg={}));var Ig;(function(t){function e(r,i,o){return{range:r,target:i,data:o}}s(e,"create"),t.create=e;function n(r){var i=r;return ie.defined(i)&&wr.is(i.range)&&(ie.undefined(i.target)||ie.string(i.target))}s(n,"is"),t.is=n})(Ig||(Ig={}));var Dg;(function(t){function e(r,i){return{range:r,parent:i}}s(e,"create"),t.create=e;function n(r){var i=r;return i!==void 0&&wr.is(i.range)&&(i.parent===void 0||t.is(i.parent))}s(n,"is"),t.is=n})(Dg||(Dg={}));var Sy=null,Tg;(function(t){function e(o,a,c,l){return new o0(o,a,c,l)}s(e,"create"),t.create=e;function n(o){var a=o;return!!(ie.defined(a)&&ie.string(a.uri)&&(ie.undefined(a.languageId)||ie.string(a.languageId))&&ie.uinteger(a.lineCount)&&ie.func(a.getText)&&ie.func(a.positionAt)&&ie.func(a.offsetAt))}s(n,"is"),t.is=n;function r(o,a){for(var c=o.getText(),l=i(a,function(C,v){var m=C.range.start.line-v.range.start.line;return m===0?C.range.start.character-v.range.start.character:m}),u=c.length,d=l.length-1;d>=0;d--){var h=l[d],g=o.offsetAt(h.range.start),p=o.offsetAt(h.range.end);if(p<=u)c=c.substring(0,g)+h.newText+c.substring(p,c.length);else throw new Error("Overlapping edit");u=g}return c}s(r,"applyEdits"),t.applyEdits=r;function i(o,a){if(o.length<=1)return o;var c=o.length/2|0,l=o.slice(0,c),u=o.slice(c);i(l,a),i(u,a);for(var d=0,h=0,g=0;d<l.length&&h<u.length;){var p=a(l[d],u[h]);p<=0?o[g++]=l[d++]:o[g++]=u[h++]}for(;d<l.length;)o[g++]=l[d++];for(;h<u.length;)o[g++]=u[h++];return o}s(i,"mergeSort")})(Tg||(Tg={}));var o0=function(){function t(e,n,r,i){this._uri=e,this._languageId=n,this._version=r,this._content=i,this._lineOffsets=void 0}return s(t,"FullTextDocument"),Object.defineProperty(t.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),t.prototype.getText=function(e){if(e){var n=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(n,r)}return this._content},t.prototype.update=function(e,n){this._content=e.text,this._version=n,this._lineOffsets=void 0},t.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var e=[],n=this._content,r=!0,i=0;i<n.length;i++){r&&(e.push(i),r=!1);var o=n.charAt(i);r=o==="\r"||o===`
`,o==="\r"&&i+1<n.length&&n.charAt(i+1)===`
`&&i++}r&&n.length>0&&e.push(n.length),this._lineOffsets=e}return this._lineOffsets},t.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var n=this.getLineOffsets(),r=0,i=n.length;if(i===0)return Wi.create(0,e);for(;r<i;){var o=Math.floor((r+i)/2);n[o]>e?i=o:r=o+1}var a=r-1;return Wi.create(a,e-n[a])},t.prototype.offsetAt=function(e){var n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;var r=n[e.line],i=e.line+1<n.length?n[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,i),r)},Object.defineProperty(t.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),t}(),ie;(function(t){var e=Object.prototype.toString;function n(p){return typeof p!="undefined"}s(n,"defined"),t.defined=n;function r(p){return typeof p=="undefined"}s(r,"undefined"),t.undefined=r;function i(p){return p===!0||p===!1}s(i,"boolean"),t.boolean=i;function o(p){return e.call(p)==="[object String]"}s(o,"string"),t.string=o;function a(p){return e.call(p)==="[object Number]"}s(a,"number"),t.number=a;function c(p,C,v){return e.call(p)==="[object Number]"&&C<=p&&p<=v}s(c,"numberRange"),t.numberRange=c;function l(p){return e.call(p)==="[object Number]"&&-2147483648<=p&&p<=2147483647}s(l,"integer"),t.integer=l;function u(p){return e.call(p)==="[object Number]"&&0<=p&&p<=2147483647}s(u,"uinteger"),t.uinteger=u;function d(p){return e.call(p)==="[object Function]"}s(d,"func"),t.func=d;function h(p){return p!==null&&typeof p=="object"}s(h,"objectLiteral"),t.objectLiteral=h;function g(p,C){return Array.isArray(p)&&p.every(C)}s(g,"typedArray"),t.typedArray=g})(ie||(ie={}));var rs;(function(t){function e(r){return typeof r=="string"||r instanceof String}s(e,"string"),t.string=e;function n(r){return typeof r=="number"||r instanceof Number}s(n,"number"),t.number=n})(rs||(rs={}));var Pu;(function(t){function e(n){const r=n;return r!=null&&(rs.number(r.value)||rs.string(r.value))&&rs.string(r.target)}s(e,"is"),t.is=e})(Pu||(Pu={}));class Pg extends f.Diagnostic{constructor(e,n,r,i){super(e,n,r);this.data=i,this.hasDiagnosticCode=!1}}s(Pg,"ProtocolDiagnostic");var zi;(function(t){const e=Object.prototype.toString;function n(d){return typeof d!="undefined"}s(n,"defined"),t.defined=n;function r(d){return d===!0||d===!1}s(r,"boolean"),t.boolean=r;function i(d){return e.call(d)==="[object String]"}s(i,"string"),t.string=i;function o(d){return e.call(d)==="[object Number]"}s(o,"number"),t.number=o;function a(d){return d!==null&&typeof d=="object"}s(a,"objectLiteral"),t.objectLiteral=a;function c(d){return Array.isArray(d)}s(c,"array"),t.array=c;function l(d){return c(d)&&d.every(h=>i(h))}s(l,"stringArray"),t.stringArray=l;function u(d,h){return Array.isArray(d)&&d.every(h)}s(u,"typedArray"),t.typedArray=u})(zi||(zi={}));var gc;(function(t){function e(n){const r=n;return r&&zi.string(r.language)&&zi.string(r.value)}s(e,"is"),t.is=e})(gc||(gc={}));function a0(t){const e=s(x=>f.Uri.parse(x),"nullConverter"),n=t!=null?t:e;function r(x){return n(x)}s(r,"asUri");function i(x){return x.map(o)}s(i,"asDiagnostics");function o(x){const nt=new Pg(h(x.range),x.message,p(x.severity),x.data);return x.code!==void 0&&(Eu.is(x.codeDescription)?nt.code={value:x.code,target:r(x.codeDescription.href)}:Pu.is(x.code)?(nt.hasDiagnosticCode=!0,nt.code={value:x.code.value,target:r(x.code.target)}):nt.code=x.code),x.source&&(nt.source=x.source),x.relatedInformation&&(nt.relatedInformation=a(x.relatedInformation)),Array.isArray(x.tags)&&(nt.tags=l(x.tags)),nt}s(o,"asDiagnostic");function a(x){return x.map(c)}s(a,"asRelatedInformation");function c(x){return new f.DiagnosticRelatedInformation(fe(x.location),x.message)}s(c,"asDiagnosticRelatedInformation");function l(x){if(!x)return;const nt=[];for(const gn of x){const Cr=u(gn);Cr!==void 0&&nt.push(Cr)}return nt.length>0?nt:void 0}s(l,"asDiagnosticTags");function u(x){switch(x){case lc.Unnecessary:return f.DiagnosticTag.Unnecessary;case lc.Deprecated:return f.DiagnosticTag.Deprecated;default:return}}s(u,"asDiagnosticTag");function d(x){if(!!x)return new f.Position(x.line,x.character)}s(d,"asPosition");function h(x){if(!!x)return new f.Range(d(x.start),d(x.end))}s(h,"asRange");function g(x){return x.map(nt=>h(nt))}s(g,"asRanges");function p(x){if(x==null)return f.DiagnosticSeverity.Error;switch(x){case ma.Error:return f.DiagnosticSeverity.Error;case ma.Warning:return f.DiagnosticSeverity.Warning;case ma.Information:return f.DiagnosticSeverity.Information;case ma.Hint:return f.DiagnosticSeverity.Hint}return f.DiagnosticSeverity.Error}s(p,"asDiagnosticSeverity");function C(x){if(zi.string(x))return new f.MarkdownString(x);if(gc.is(x))return new f.MarkdownString().appendCodeblock(x.value,x.language);if(Array.isArray(x)){const gn=[];for(const Cr of x){const hs=new f.MarkdownString;gc.is(Cr)?hs.appendCodeblock(Cr.value,Cr.language):hs.appendMarkdown(Cr),gn.push(hs)}return gn}let nt;switch(x.kind){case io.Markdown:return new f.MarkdownString(x.value);case io.PlainText:return nt=new f.MarkdownString,nt.appendText(x.value),nt;default:return nt=new f.MarkdownString,nt.appendText(`Unsupported Markup content received. Kind is: ${x.kind}`),nt}}s(C,"asHoverContent");function v(x){if(zi.string(x))return x;switch(x.kind){case io.Markdown:return new f.MarkdownString(x.value);case io.PlainText:return x.value;default:return`Unsupported Markup content received. Kind is: ${x.kind}`}}s(v,"asDocumentation");function m(x){if(!!x)return new f.Hover(C(x.contents),h(x.range))}s(m,"asHover");function b(x){if(!!x)return new f.TextEdit(h(x.range),x.newText)}s(b,"asTextEdit");function w(x){if(!!x)return x.map(b)}s(w,"asTextEdits");function P(x){if(!x)return;const nt=new f.SignatureHelp;return zi.number(x.activeSignature)?nt.activeSignature=x.activeSignature:nt.activeSignature=0,zi.number(x.activeParameter)?nt.activeParameter=x.activeParameter:nt.activeParameter=0,x.signatures&&(nt.signatures=F(x.signatures)),nt}s(P,"asSignatureHelp");function F(x){return x.map(A)}s(F,"asSignatureInformations");function A(x){const nt=new f.SignatureInformation(x.label);return x.documentation!==void 0&&(nt.documentation=v(x.documentation)),x.parameters!==void 0&&(nt.parameters=Z(x.parameters)),x.activeParameter!==void 0&&(nt.activeParameter=x.activeParameter),nt}s(A,"asSignatureInformation");function Z(x){return x.map($e)}s(Z,"asParameterInformations");function $e(x){const nt=new f.ParameterInformation(x.label);return x.documentation&&(nt.documentation=v(x.documentation)),nt}s($e,"asParameterInformation");function fe(x){if(!!x)return new f.Location(n(x.uri),h(x.range))}s(fe,"asLocation");function It(x){if(!!x)return st(x)}s(It,"asDeclarationResult");function kt(x){if(!!x)return st(x)}s(kt,"asDefinitionResult");function Pt(x){if(!x)return;const nt={targetUri:n(x.targetUri),targetRange:h(x.targetSelectionRange),originSelectionRange:h(x.originSelectionRange),targetSelectionRange:h(x.targetSelectionRange)};if(!nt.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return nt}s(Pt,"asLocationLink");function st(x){if(!!x)return zi.array(x)?x.length===0?[]:cc.is(x[0])?x.map(Cr=>Pt(Cr)):x.map(gn=>fe(gn)):cc.is(x)?[Pt(x)]:fe(x)}s(st,"asLocationResult");function Mn(x){if(!!x)return x.map(nt=>fe(nt))}s(Mn,"asReferences");function q(x){if(!!x)return x.map(Xe)}s(q,"asDocumentHighlights");function Xe(x){const nt=new f.DocumentHighlight(h(x.range));return zi.number(x.kind)&&(nt.kind=vt(x.kind)),nt}s(Xe,"asDocumentHighlight");function vt(x){switch(x){case ns.Text:return f.DocumentHighlightKind.Text;case ns.Read:return f.DocumentHighlightKind.Read;case ns.Write:return f.DocumentHighlightKind.Write}return f.DocumentHighlightKind.Text}s(vt,"asDocumentHighlightKind");function pt(x,nt){if(!!x)return x.map(gn=>Cn(gn,nt))}s(pt,"asSymbolInformations");function Mt(x){return x<=Du.TypeParameter?x-1:f.SymbolKind.Property}s(Mt,"asSymbolKind");function Vt(x){switch(x){case Tu.Deprecated:return f.SymbolTag.Deprecated;default:return}}s(Vt,"asSymbolTag");function an(x){if(x==null)return;const nt=[];for(const gn of x){const Cr=Vt(gn);Cr!==void 0&&nt.push(Cr)}return nt.length===0?void 0:nt}s(an,"asSymbolTags");function Cn(x,nt){const gn=new f.SymbolInformation(x.name,Mt(x.kind),h(x.location.range),x.location.uri?n(x.location.uri):nt);return Ce(gn,x),x.containerName&&(gn.containerName=x.containerName),gn}s(Cn,"asSymbolInformation");function Hn(x){if(x!=null)return x.map(gi)}s(Hn,"asDocumentSymbols");function gi(x){var nt;const gn=new f.DocumentSymbol(x.name,(nt=x.detail)!=null?nt:"",Mt(x.kind),h(x.range),h(x.selectionRange));if(Ce(gn,x),x.children!==void 0&&x.children.length>0){const Cr=[];for(const hs of x.children)Cr.push(gi(hs));gn.children=Cr}return gn}s(gi,"asDocumentSymbol");function Ce(x,nt){x.tags=an(nt.tags),nt.deprecated&&(x.tags?x.tags.includes(f.SymbolTag.Deprecated)||(x.tags=x.tags.concat(f.SymbolTag.Deprecated)):x.tags=[f.SymbolTag.Deprecated])}s(Ce,"fillTags");function ft(x){const nt={title:x.title,command:x.command};return x.arguments&&(nt.arguments=x.arguments),nt}s(ft,"asCommand");function Tt(x){if(!!x)return x.map(ft)}s(Tt,"asCommands");const wt=new Map;wt.set($i.Empty,f.CodeActionKind.Empty),wt.set($i.QuickFix,f.CodeActionKind.QuickFix),wt.set($i.Refactor,f.CodeActionKind.Refactor),wt.set($i.RefactorExtract,f.CodeActionKind.RefactorExtract),wt.set($i.RefactorInline,f.CodeActionKind.RefactorInline),wt.set($i.RefactorRewrite,f.CodeActionKind.RefactorRewrite),wt.set($i.Source,f.CodeActionKind.Source),wt.set($i.SourceOrganizeImports,f.CodeActionKind.SourceOrganizeImports);function Ot(x){if(x==null)return;let nt=wt.get(x);if(nt)return nt;const gn=x.split(".");nt=f.CodeActionKind.Empty;for(const Cr of gn)nt=nt.append(Cr);return nt}s(Ot,"asCodeActionKind");function tn(x){if(x!=null)return x.map(nt=>Ot(nt))}s(tn,"asCodeActionKinds");function Jt(x){if(x==null)return;const nt=new f.CodeAction(x.title);return x.kind!==void 0&&(nt.kind=Ot(x.kind)),x.diagnostics&&(nt.diagnostics=i(x.diagnostics)),x.edit&&(nt.edit=Sn(x.edit)),x.command&&(nt.command=ft(x.command)),x.isPreferred!==void 0&&(nt.isPreferred=x.isPreferred),nt}s(Jt,"asCodeAction");function Sn(x){if(!x)return;const nt=new f.WorkspaceEdit;return x.documentChanges?x.documentChanges.forEach(gn=>{if(wa.is(gn))nt.createFile(n(gn.uri),gn.options);else if(Ca.is(gn))nt.renameFile(n(gn.oldUri),n(gn.newUri),gn.options);else if(Sa.is(gn))nt.deleteFile(n(gn.uri),gn.options);else if(ts.is(gn))nt.set(n(gn.textDocument.uri),w(gn.edits));else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(gn,void 0,4)}`)}):x.changes&&Object.keys(x.changes).forEach(gn=>{nt.set(n(gn),w(x.changes[gn]))}),nt}s(Sn,"asWorkspaceEdit");function Vn(x){return new f.Color(x.red,x.green,x.blue,x.alpha)}s(Vn,"asColor");function er(x){return new f.ColorInformation(h(x.range),Vn(x.color))}s(er,"asColorInformation");function Pr(x){if(Array.isArray(x))return x.map(er)}s(Pr,"asColorInformations");function lo(x){const nt=new f.ColorPresentation(x.label);return nt.additionalTextEdits=w(x.additionalTextEdits),x.textEdit&&(nt.textEdit=b(x.textEdit)),nt}s(lo,"asColorPresentation");function Rc(x){if(Array.isArray(x))return x.map(lo)}s(Rc,"asColorPresentations");function xa(x){if(x)switch(x){case Za.Comment:return f.FoldingRangeKind.Comment;case Za.Imports:return f.FoldingRangeKind.Imports;case Za.Region:return f.FoldingRangeKind.Region}}s(xa,"asFoldingRangeKind");function pi(x){return new f.FoldingRange(x.startLine,x.endLine,xa(x.kind))}s(pi,"asFoldingRange");function Yu(x){if(Array.isArray(x))return x.map(pi)}s(Yu,"asFoldingRanges");function Zu(x){return new f.SelectionRange(h(x.range),x.parent?Zu(x.parent):void 0)}s(Zu,"asSelectionRange");function dy(x){if(!Array.isArray(x))return[];const nt=[];for(const gn of x)nt.push(Zu(gn));return nt}return s(dy,"asSelectionRanges"),{asUri:r,asDiagnostics:i,asDiagnostic:o,asRange:h,asRanges:g,asPosition:d,asDiagnosticSeverity:p,asDiagnosticTag:u,asHover:m,asTextEdit:b,asTextEdits:w,asSignatureHelp:P,asSignatureInformations:F,asSignatureInformation:A,asParameterInformations:Z,asParameterInformation:$e,asDeclarationResult:It,asDefinitionResult:kt,asLocation:fe,asReferences:Mn,asDocumentHighlights:q,asDocumentHighlight:Xe,asDocumentHighlightKind:vt,asSymbolKind:Mt,asSymbolTag:Vt,asSymbolTags:an,asSymbolInformations:pt,asSymbolInformation:Cn,asDocumentSymbols:Hn,asDocumentSymbol:gi,asCommand:ft,asCommands:Tt,asCodeAction:Jt,asCodeActionKind:Ot,asCodeActionKinds:tn,asWorkspaceEdit:Sn,asFoldingRangeKind:xa,asFoldingRange:pi,asFoldingRanges:Yu,asColor:Vn,asColorInformation:er,asColorInformations:Pr,asColorPresentation:lo,asColorPresentations:Rc,asSelectionRange:Zu,asSelectionRanges:dy}}s(a0,"createConverter");const or=de.loadMessageBundle();var Vi;(function(t){function e(r,i){const{provider:o,repo:a}=i instanceof f.Uri?r.getVirtualUriMetadata(i):i;return r.getRemoteUri(o.id,{repo:a})}s(e,"externalUri"),t.externalUri=e;function n(r,i){const{provider:o,repo:a}=i instanceof f.Uri?r.getVirtualUriMetadata(i):i;return r.getRemoteUri(o.id,{repo:a})}s(n,"externalIndexUri"),t.externalIndexUri=n})(Vi||(Vi={}));var _o;(function(t){function e(i){if(i.HEAD.type===H.Branch||i.HEAD.type===H.RemoteBranch)return i.HEAD.name}s(e,"getBranchName"),t.getBranchName=e;function n(i){if(i.HEAD.type!==H.Branch)return;if(i.pullRequest!==void 0)return i.HEAD.name;const o=i.HEAD.name;return o===void 0||o.startsWith("refs/heads/")?o:`refs/heads/${o}`}s(n,"getIndexBranchName"),t.getIndexBranchName=n;async function r(i,o,a=hr.timeout){const c=await i.getMetadata(o),l=Vi.externalIndexUri(i,c),u=t.getIndexBranchName(c);if(!(l===void 0||u===void 0))return hr.getIndexedTip(l,u,{authentication:i.getAuthentication(o)},a)}s(r,"getIndexedTip"),t.getIndexedTip=r})(_o||(_o={}));var is;(function(t){const e=new no(1024);function n(a,c,l){let u=e.get(l);return u!==void 0||(u=a.getCommit(c,l),e.set(l,u)),u}s(n,"get"),t.get=n;async function r(a,c,l){const u=[];for(const h of l)u.push(n(a,c,h));const d=[];for(const h of await Promise.all(u))h!==void 0&&d.push(h);return d}s(r,"all"),t.all=r;function i(a,c){const l=a.commitDate,u=c.commitDate;return l===void 0&&u===void 0?0:l===void 0?1:u===void 0?-1:l<u?1:l>u?-1:0}s(i,"sort"),t.sort=i;function o(a){const c=a.authorName!==void 0?`  \u2022  ${a.authorName}`:"",l=a.commitDate!==void 0?`  \u2022  ${pa(a.commitDate,{ago:!0})}`:"",u=a.branchName!==void 0?` - ${a.branchName}`:"",d=a.tags!==void 0?typeof a.tags=="string"?`  \u2022  ${a.tags}`:`  \u2022  ${a.tags.join(" ")}`:"";return{author:c,date:l,branch:u,tag:d}}s(o,"getCommitInfo"),t.getCommitInfo=o})(is||(is={}));var Rg;(function(t){t[t.Unknown=0]="Unknown",t[t.New=1]="New",t[t.Failed=2]="Failed",t[t.Partial=3]="Partial",t[t.InProgress=4]="InProgress",t[t.Complete=5]="Complete",t[t.PartialIndex=6]="PartialIndex",t[t.CompleteIndex=7]="CompleteIndex"})(Rg||(Rg={}));var pc;(function(t){function e(r){return{workspaceId:r.WorkspaceId,snapshotId:r.SnapshotId,state:r.State,commitId:r.commitId.toLowerCase(),branchName:n(r.BranchName),creationDate:new Date(r._ts*1e3)}}s(e,"asWorkspaceSnapshot"),t.asWorkspaceSnapshot=e;function n(r){if(r!==null)return r.startsWith("refs/heads/")?r.substr(11):r}s(n,"getBranchName")})(pc||(pc={}));var hr;(function(t){t.timeout=5*60*1e3;const e=new no(32),n=new no(32);async function r(h,g,p,C=t.timeout){const v=await i(h,g,p,C);if(!(v===void 0||v.length===0))return v[0]}s(r,"getIndexedTip"),t.getIndexedTip=r;async function i(h,g,p,C=t.timeout){const v=c(h,g);let m=e.get(v);if(m===void 0||m!==void 0&&Date.now()-m.time>C){const b=ai.getAllWorkspaceSnapshots(h,p,g);m={time:Date.now(),promise:b,snapshots:void 0},e.set(v,m)}if(m.snapshots!==null){if(m.snapshots===void 0){let b=await m.promise;if(b===void 0){m.snapshots=null;return}b.sort((w,P)=>P.creationDate.getTime()-w.creationDate.getTime()),b=b.filter(w=>w.state===5||w.state===3),m.snapshots=b}return m.snapshots}}s(i,"all"),t.all=i;async function o(h,g,p,C,v=t.timeout){const m=a(h,g);let b=n.get(m);if(b===null)return;if(b!==void 0)return b;const w=c(h,p),P=e.get(w);if(P!==void 0&&Date.now()-P.time<=v){if(P.snapshots===null)return;const F=P.snapshots!==void 0?P.snapshots:await i(h,p,C);if(F!==void 0){for(const A of F)if(A.commitId===g)return n.set(m,A),A}return}if(b=await ai.getWorkspaceSnapshot(g,C),b===void 0){n.set(m,null);return}return n.set(m,b),b}s(o,"single"),t.single=o;function a(h,g){return`${h.toString()}/${g}`}s(a,"getSingleCacheKey");function c(h,g){return g!==void 0?`${g}\\${h.toString()}`:h.toString()}s(c,"getAllCacheKey");async function l(h,g,p,C=t.timeout){return await o(h,g,void 0,p,C)!==void 0}s(l,"exists"),t.exists=l;async function u(h,g,p,C=t.timeout){return await i(h,g,p,C)!==void 0}s(u,"branch"),t.branch=u;async function d(h,g,p){const C=new Map(p.map(b=>[b.commitId,b])),v=await is.all(h,g.uri,p.map(b=>b.commitId));if(v.length===0)return;const m=[];for(const b of v){const w=C.get(b.hash);w!==void 0&&m.push({...w,commit:b})}if(m.length!==0)return m}s(d,"resolve"),t.resolve=d})(hr||(hr={}));var ji;(function(t){function e(n=!1){return{hoverProvider:n,declarationProvider:n,definitionProvider:n,typeDefinitionProvider:n,referencesProvider:n,documentSymbolProvider:n,foldingRangeProvider:n,diagnosticProvider:n,workspaceSymbolProvider:n}}s(e,"create"),t.create=e})(ji||(ji={}));var ai;(function(t){const e="v0.1",n="https://prod.richnav.vsengsaas.visualstudio.com/api";async function r(w,P,F){var A;const Z=await Ga(w,{method:"POST",body:JSON.stringify(P),headers:{"Content-Type":"application/json",...(await F.authentication).getRichNavigationHeaders(),"x-correlation-id":(A=F.correlationId)!=null?A:Mh()}});if(!!Z.ok)return Z.json()}s(r,"postRequest");async function i(w,P,F){const A=await Ga(w,{method:"POST",body:P,headers:(await F.authentication).getRichNavigationHeaders()});if(!!A.ok)return await A.json()}s(i,"postForm");function o(w,P){return`${n}/${e}/HttpLanguageService/${w}/${P}`}s(o,"makeRequestUrl");async function a(w,P){const F=await Ga(`${n}/${e}/WorkspaceSnapshot?commitId=${w}`,{headers:(await P.authentication).getRichNavigationHeaders()});if(F.ok){const A=await F.json();return{workspaceId:A.workspaceId,snapshotId:A.snapshotId,state:A.state,commitId:w.toLowerCase(),branchName:void 0,creationDate:new Date}}}s(a,"getWorkspaceSnapshot"),t.getWorkspaceSnapshot=a;async function c(w,P,F){const A=new kh;A.append("uriString",w.toString(!0)),F!==void 0&&A.append("branchName",F);try{const Z=await i(`${n}/${e}/WorkspaceSnapshot/all`,A,P);return Z===void 0?void 0:Z.map(pc.asWorkspaceSnapshot)}catch(Z){ce.error(Z);return}}s(c,"getAllWorkspaceSnapshots"),t.getAllWorkspaceSnapshots=c;async function l(w,P,F){const A=new kh;A.append("uriString",w.toString(!0)),F!==void 0&&A.append("branchName",F);try{const Z=await i(`${n}/${e}/WorkspaceSnapshot/latest`,A,P);return Z===void 0?void 0:pc.asWorkspaceSnapshot(Z)}catch(Z){ce.error(Z);return}}s(l,"getLatestWorkspaceSnapshot"),t.getLatestWorkspaceSnapshot=l;async function u(w,P,F){try{return r(o(w,"textDocument/capabilities"),P,F)}catch(A){ce.error(A);return}}s(u,"capabilities"),t.capabilities=u;async function d(w,P,F){try{return r(o(w,"textDocument/hover"),P,F)}catch(A){ce.error(A);return}}s(d,"provideHover"),t.provideHover=d;async function h(w,P,F){try{return r(o(w,"textDocument/definition"),P,F)}catch(A){ce.error(A);return}}s(h,"provideDefinition"),t.provideDefinition=h;async function g(w,P,F){try{return r(o(w,"textDocument/declaration"),P,F)}catch(A){ce.error(A);return}}s(g,"provideDeclaration"),t.provideDeclaration=g;async function p(w,P,F){try{return r(o(w,"textDocument/typeDefinition"),P,F)}catch(A){ce.error(A);return}}s(p,"provideTypeDefinition"),t.provideTypeDefinition=p;async function C(w,P,F){try{return r(o(w,"textDocument/references"),P,F)}catch(A){ce.error(A);return}}s(C,"provideReferences"),t.provideReferences=C;async function v(w,P,F){try{return r(o(w,"textDocument/foldingRange"),P,F)}catch(A){ce.error(A);return}}s(v,"providerFoldingRanges"),t.providerFoldingRanges=v;async function m(w,P,F){if(P=="")return;const A=await Ga(`${n}/${e}/Search/${w}/${P}`,{headers:(await F.authentication).getRichNavigationHeaders()});if(A.ok)return await A.json()}s(m,"provideWorkspaceSymbols"),t.provideWorkspaceSymbols=m;async function b(w,P,F){const A=f.Uri.from({scheme:"https",authority:"prod.richnav.vsengsaas.visualstudio.com",path:`/api/${e}/Workspace/${w}/${P}/assets/designtime`,query:`id=${F}`});try{const Z=await Ga(A.toString().replace("?id%3D","?id="),{method:"GET",headers:{accept:"text/plain"}});return Z.ok?Z.text():void 0}catch(Z){ce.error(Z);return}}s(b,"getDesignTimeFileContent"),t.getDesignTimeFileContent=b})(ai||(ai={}));class Ag{constructor(e,n){this.providerService=e,this.telemetryService=n,this.metadata=new Map;const r=[];r.push(this.providerService.onDidChangeRepositories(i=>{var o;for(const a of i.added){const c=a.uri,l=mt.getIndexMemento(c);if(l!==void 0){const u=Vi.externalIndexUri(this.providerService,c);u!==void 0&&(typeof((o=l.branch)==null?void 0:o.name)=="string"?hr.all(u,l.branch.name,{authentication:this.providerService.getAuthentication(c)}).catch(void 0):typeof l.ref=="string"&&W(l.ref)&&hr.single(u,l.ref,void 0,{authentication:this.providerService.getAuthentication(c)}).catch(void 0))}this.providerService.getMetadata(c).then(u=>{const d={},h=u.pullRequest===void 0?_o.getIndexBranchName(u):void 0;h!==void 0?d.branch={name:h}:d.ref=u.HEAD.sha,mt.setIndexMemento(c,d).then(void 0,void 0)},void 0)}})),r.push(this.providerService.onDidChangeRepository(i=>{const o=i.repository.uri,a=R(o);this.metadata.delete(a),this.getIndexMetadata(o).catch(void 0)})),this.disposable=f.Disposable.from(...r)}dispose(){this.disposable.dispose()}async resolveIndexRef(e,n){const r=await this.providerService.getModeRefType(e),i=Uo.decode(e);if(i!==void 0){if(i.type===oi.Latest)return r===Je.Branch?this.getIndexedTip(e,n?0:hr.timeout):void 0;if(i.type===oi.SHA){const a=Vi.externalIndexUri(this.providerService,e);return a===void 0?void 0:await hr.exists(a,i.sha,{authentication:this.providerService.getAuthentication(e)},n?0:hr.timeout)?i.sha:void 0}}if(this.providerService.getModeConfig(e,r).index===rt.Latest)return this.getIndexedTip(e,n?0:hr.timeout)}refresh(e){for(const n of e)this.metadata.delete(n.toString())}getIndexMetadata(e){const n=this.providerService.getVirtualRootUri(e),r=R(n);let i=this.metadata.get(r);return i!==void 0||(i=this.createIndexMetadata(e),this.metadata.set(r,i)),i}async getIndexedTip(e,n=hr.timeout){const r=await _o.getIndexedTip(this.providerService,e,n);return r!==void 0?r.commitId:void 0}async createIndexMetadata(e){const n=new Ln(`RichNavIndexProvider.createIndexMetadata(${e.toString()})`);try{const r=Vi.externalIndexUri(this.providerService,e);if(r===void 0)return;n.logStep("Getting metadata");const i=this.providerService.getMetadata(e),o=this.providerService.getModeRefType(e,i),a=await i;n.logStep("Getting snapshot",{suffix:" \u2022 Getting snapshot..."});const c=this.providerService.getAuthentication(e),l=a.pullRequest===void 0?_o.getIndexBranchName(a):void 0,u=await hr.single(r,a.HEAD.sha,l,{authentication:this.providerService.getAuthentication(e)});if(a.HEAD.type===H.Branch||a.HEAD.type===H.RemoteBranch){const p=Uo.decode(e);if(p!==void 0)return n.logStep("Handle legacy encoding",{suffix:" \u2022 Handle legacy encoding..."}),u===void 0?p.type===oi.Latest?(n.logStep("Getting branch snapshot",{suffix:" \u2022 Getting branch snapshot..."}),l!==void 0&&await hr.branch(r,l,{authentication:this.providerService.getAuthentication(e)})?{type:Dn.Indexed}:{type:Dn.NotIndexed}):{type:Dn.NotIndexed}:p.type===oi.Latest||p.type===oi.SHA?{type:Dn.Active,sha:Promise.resolve(u.commitId),branch:{name:u.branchName}}:{type:Dn.Match,sha:Promise.resolve(u.commitId),branch:{name:u.branchName}}}n.logStep("Getting mode config",{suffix:" \u2022 Getting mode config..."});const h=this.providerService.getModeConfig(e,await o),g=this.providerService.getVirtualUriMetadata(e);if((h.index===rt.Latest||h.index===rt.Match)&&u!==void 0)return{type:Dn.Active,sha:Promise.resolve(u.commitId),branch:{name:u.branchName}};if(h.index===rt.TipPlusLatest&&g.provider.id==="github"){if(u!==void 0&&u.commitId===a.HEAD.sha)return{type:Dn.Active,sha:Promise.resolve(u.commitId),branch:{name:u.branchName}};if(a.HEAD.type===H.Branch&&l!==void 0){n.logStep("Getting closest index",{suffix:" \u2022 Getting closest index..."});const p=await hr.all(r,l,{authentication:c});if(p!==void 0&&p.length>0)return{type:Dn.Active,sha:this.computeClosestIndex(e,a.HEAD.sha,p),branch:{name:l}}}}return u!==void 0?{type:Dn.Indexed}:a.HEAD.type===H.Branch&&(n.logStep("Getting branch snapshot",{suffix:" \u2022 Getting branch snapshot..."}),l!==void 0&&await hr.branch(r,l,{authentication:c}))?{type:Dn.Indexed}:{type:Dn.NotIndexed}}finally{n.stop()}}async computeClosestIndex(e,n,r){if(r.length===0)throw new Error("At least on snapshot should exist");const i=new Set(r.map(d=>d.commitId)),o=await this.providerService.getCommits(e,{ref:n,limit:100});if(o===void 0)return;let a;for(const d of o.commits)if(d.hash===n){a=d;break}if(a===void 0)return;const c=new Map(o.commits.map(d=>[d.hash,d])),l=[a];let u;for(;l.length>0;){for(u=l.shift();u!==void 0&&!i.has(u.hash);)if(u.parents.length>0){for(let d=1;d<u.parents.length;d++){const h=c.get(u.parents[d]);h!==void 0&&l.push(h)}u=c.get(u.parents[0])}if(u!==void 0)break}return u!==void 0?u.hash:void 0}async getSnapshots(e,n){const r=Vi.externalIndexUri(this.providerService,e);if(r===void 0)return[];const i=await hr.all(r,void 0,{authentication:this.providerService.getAuthentication(e)});if(i===void 0)return[];const o=[];for(const a of i)a.branchName!==void 0&&o.push({workspaceId:a.workspaceId,snapshotId:a.snapshotId,hash:a.commitId,branch:{name:a.branchName}});return o}async getStatusBarContributions(e){const n=await this.providerService.getMetadata(e),[r,i]=await Promise.all([this.getIndexMetadata(e),this.providerService.getModeRefType(e,n)]),o=this.providerService.getModeConfig(e,i);if(r===void 0)return[];const{HEAD:a}=n,c=[];if(r!==void 0){let l;const u=[`${we(a.sha)}`];if(r.type===Dn.Active){const d=await r.sha;o.index===rt.Latest||o.index===rt.Match?(l=o.display===ee.Browse?"$(layers-active)\u2009\u2009$(lock)":"$(layers-active)",u.push(or("statusbar.active",`The commit is indexed and rich code navigation features are enabled.
The files in the workspace are readonly.`))):o.index===rt.TipPlusLatest&&(l="$(layers-dot)",d!==n.HEAD.sha?u.push(or("statusbar.tipPlusLatest","The commit is not indexed. Rich code navigation features are enabled using a former indexed commit which might lead to fuzzy results.")):u.push(or("statusbar.tipPlusLatest","The commit is indexed. Rich code navigation features are enabled. Files in the workspace can be modified which might lead to fuzzy results.")))}else r.type===Dn.Match?(l="$(layers)",u.push(or("statusbar.match",`The commit you are on is indexed, but rich navigation is not enabled.
Click the status bar item to enable it.`))):r.type===Dn.Indexed&&(l="$(layers)",u.push(or("statusbar.indexed",`The branch you are on is indexed, but rich navigation is not enabled.
Click the status bar item to enable it.`)));l&&c.push(Di({command:"remoteHub.indexMode.select",title:l,tooltip:u.join(`
`),arguments:[{uri:e}]}))}return c}}s(Ag,"RichNavIndexProvider");var $o;(function(t){let e;function n(){return e=f.window.createStatusBarItem(f.StatusBarAlignment.Right),e.text="$(compass)",e.command="remoteHub.indexMode.select",e.hide(),[e,f.window.onDidChangeActiveTextEditor(()=>{l()}),f.commands.registerCommand("remoteHub.indexMode.select",d=>{u(d).catch(h=>ce.log("Selecting index mode failed.",h))})]}s(n,"create"),t.create=n;const r=new Map;function i(d){r.set(d.key(),d)}s(i,"addService"),t.addService=i;function o(d){r.delete(d.key())}s(o,"removeService"),t.removeService=o;function a(d){return r.get(R(d))}s(a,"getService");async function c(d){for(const h of r.values())if(await h.handles(d))return h}s(c,"getServiceForDocument");async function l(){try{let d=s(function(C){const v=C.lastIndexOf("/");return v<=0?C:C.substr(v+1)},"basename");const h=f.window.activeTextEditor;if(h===void 0){e.hide();return}const g=await c(h.document);if(g===void 0){e.hide();return}const p=await g.isDocumentIndexed(h.document);p===vc.Indexed?(e.text="$(compass)",e.tooltip=new f.MarkdownString(or("isIndexed","The source file '{0}' is indexed and provides rich code navigation features like Go to Declaration and Find all References.",d(h.document.uri.path))),e.show()):p===vc.IndexMapped?(e.text="$(compass-dot)",e.tooltip=new f.MarkdownString(or("isIndexed","The source file '{0}' provides rich code navigation features using an earlier indexed commit. Navigation results might be fuzzy.",d(h.document.uri.path))),e.show()):e.hide()}catch(d){e.hide()}}s(l,"updateStatusBarItem"),t.updateStatusBarItem=l;async function u(d){var h;const g=d.uri,p=a(g);if(p===void 0)return;const[C,v,m,b]=await Promise.all([p.getBranchName(),p.getMetadata(),p.getIndexMetadata(),p.getModeRefType(g)]);if(m===void 0||!Dn.hasIndex(m.type))return;let w,P=!1;const F=Uo.decode(g);(F==null?void 0:F.type)===oi.Latest||(F==null?void 0:F.type)===oi.SHA?(P=!0,w={display:ee.Browse,index:F.type===oi.Latest?rt.Latest:rt.Match}):w=(h=p.getCurrentIndexMode())!=null?h:p.getModeConfig(g,b);const A=p.getUriMetadata(),Z=or("current item","{0} current","$(check)"),$e={indexKind:"disable",label:or("RichNavStatus.disable.label","Disable"),description:w.index===rt.None?`  \u2022  ${Z}`:void 0,detail:or("RichNavStatus.disable.detail","Disable rich navigation.")};let fe,It;if(b===Je.PullRequestBranch||b===Je.PullRequestRemoteBranch||b===Je.Commit||b===Je.Tag){const kt={indexKind:"match",label:or("RichNavStatus.match.label","Current indexed commit - readonly"),description:w.index===rt.Match&&w.display===ee.Browse?`  \u2022  ${Z}`:void 0,detail:or("RichNavStatus.match.detail","Enable rich navigation only if the current commit is indexed. Files will be read-only.")},Pt={indexKind:"match+writeable",label:or("RichNavStatus.matchWritable.label","Current indexed commit - writable"),description:w.index===rt.Match&&w.display===ee.Edit?`  \u2022  ${Z}`:void 0,detail:or("RichNavStatus.match.detail","Enable rich navigation only if the current commit is indexed. Files will be writable.")};let st=A.provider.id==="github";st&&(st=v.HEAD.type===H.RemoteBranch?v.HEAD.branch.remote.accessLevel>=xe.Write:!0);const Mn=st?[kt,Pt,$e]:[kt,$e];It=await f.window.showQuickPick(Mn,{placeHolder:"Pick a rich navigation mode"})}else if(b===Je.Branch||b===Je.RemoteBranch){const kt={indexKind:"latest",label:or("RichNavStatus.latestIndexed.label","Latest indexed commit"),description:w.index===rt.Latest?`  \u2022  ${Z}`:void 0,detail:or("RichNavStatus.latestIndexed.detail","Enable rich navigation on the latest indexed commit. Files will be read-only.")},Pt={indexKind:"tip+latest",label:or("RichNavStatus.matchLatestIndexed.label","Current commit & latest index"),description:w.index===rt.TipPlusLatest?`  \u2022  ${Z}`:void 0,detail:or("RichNavStatus.matchLatestIndexed.detail","Enable rich navigation on the current commit using the latest index. Files will be writeable.")},st=A.provider.id==="github"?[kt,Pt,$e]:[kt,$e];It=await f.window.showQuickPick(st,{placeHolder:or("RichNavStatus.placeHolder","Pick a rich navigation mode for branch {0}",C)})}if(It!==void 0&&(It.indexKind==="disable"?fe={display:ee.Edit,index:rt.None}:It.indexKind==="match"?fe={display:ee.Browse,index:rt.Match}:It.indexKind==="match+writeable"?fe={display:ee.Edit,index:rt.Match}:It.indexKind==="tip+latest"?fe={display:ee.Edit,index:rt.TipPlusLatest}:It.indexKind==="latest"&&(fe={display:ee.Browse,index:rt.Latest}),fe!==void 0&&!_e.equals(w,fe))){if(await p.hasChanges()&&fe.display===ee.Browse){await f.window.showInformationMessage("The repository has outgoing changes. Commit them first before switching to browse mode.",{modal:!0});return}if(await p.updateIndexMode(fe),P){const kt=await p.getNonIndexedWorkspaceDescriptor();kt!==void 0&&Ii(p.getProviderService(),kt)}}}s(u,"toggleIndexMode")})($o||($o={}));class Ru{constructor(e){this.telemetryService=e}static createStatus(){return $o.create()}async createNavigationService(e,n){const r=await e.getIndexMetadata(n.uri);if(!(r===void 0||r.type===Dn.NotIndexed))return()=>new ku(e,n,this.telemetryService)}}s(Ru,"RichNavServiceProvider");var os;(function(t){const e=new RegExp("^vsck:\\/\\/([a-fA-F0-9]+)\\/(latest|[a-fA-F0-9]{15})\\/designtime\\/([a-fA-F0-9]+)(\\/?.*)$");function n(i){const o=e.exec(i);if(o===null||o.length!==5)return;const a={v:1,w:o[1],s:o[2],a:o[3]};return f.Uri.from({scheme:oo.scheme,authority:U(JSON.stringify(a)),path:o[4]})}s(n,"toVSCode"),t.toVSCode=n;function r(i){if(i.scheme!==oo.scheme)return;let o;try{return o=JSON.parse(pe(i.authority)),o===void 0?void 0:{workspaceId:o.w,snapshotId:o.s,assetId:`${o.a}${i.path}`}}catch{return}}s(r,"toRichNavComponents"),t.toRichNavComponents=r})(os||(os={}));const Au=s(class{constructor(){this._onDidChangeFile=new f.EventEmitter,this.cache=new no(64),this.textEncoder=new TextEncoder}get onDidChangeFile(){return this._onDidChangeFile.event}watch(t,e){return Au.emptyDisposable}async stat(t){const e=await this.getFile(t);if(e===void 0)throw f.FileSystemError.FileNotFound();return{type:f.FileType.File,mtime:e.time,ctime:e.time,size:e.content.length,permissions:f.FilePermission.Readonly}}readDirectory(t){return[]}createDirectory(t){throw f.FileSystemError.NoPermissions()}async readFile(t){const e=await this.getFile(t);if(e===void 0)throw f.FileSystemError.FileNotFound();return e.content}writeFile(t,e,n){throw f.FileSystemError.NoPermissions()}delete(t,e){throw f.FileSystemError.NoPermissions()}rename(t,e,n){throw f.FileSystemError.NoPermissions()}async getFile(t){let e=this.cache.get(t.toString());if(e!==void 0)return e;if(t.scheme!==Au.scheme)return;const n=os.toRichNavComponents(t);if(n===void 0)return;const r=await ai.getDesignTimeFileContent(n.workspaceId,n.snapshotId,n.assetId);if(r!==void 0)return e={content:this.textEncoder.encode(r),time:Date.now()},this.cache.set(t.toString(),e),e}},"_RichNavFileSystemProvider");let oo=Au;oo.scheme="vsck-fs",oo.emptyDisposable={dispose:()=>{}};var vc;(function(t){t[t.NotIndexed=0]="NotIndexed",t[t.IndexMapped=1]="IndexMapped",t[t.Indexed=2]="Indexed"})(vc||(vc={}));const Ti=s(class{static registerCapability(t,e,n){var r;const i=this.disabledCapabilities.get(t);if(i==null?void 0:i[e])return!1;const o=this.localCapabilities.get(t);return(o==null?void 0:o[e])?!1:(r=n[e])!=null?r:!1}constructor(t,e,n){this.providerService=t,this.repository=e,this.telemetryService=n,this.repositoryRoot=`${e.uri.toString()}/`;const r=s((o=!1)=>{const a=this.repository.uri;o||(this.metadata=this.providerService.getMetadata(a),this.indexMetadata=this.providerService.getIndexMetadata(a)),Promise.all([this.metadata,this.indexMetadata,this.providerService.getModeRefType(a,this.metadata)]).then(async c=>{var l,u;const[d,h,g]=this.currentlyResolved,[p,C,v]=c,m=this.providerService.getModeConfig(a,v);if(d!==void 0&&h!==void 0&&g!==void 0&&d.HEAD.sha===p.HEAD.sha&&C!==void 0&&h.type===C.type&&g.index===m.index&&g.display===m.display){const w=(h==null?void 0:h.type)===Dn.Active?await h.sha:void 0,P=(C==null?void 0:C.type)===Dn.Active?await C.sha:void 0;if(w===P)return}const b={newDisplayMode:m.display,newIndexMode:m.index,newIndexType:(C==null?void 0:C.type)===void 0?"undefined":Dn[C==null?void 0:C.type],currentDisplayMode:(l=g==null?void 0:g.display)!=null?l:"undefined",currentIndexMode:(u=g==null?void 0:g.index)!=null?u:"undefined",currentIndexType:(h==null?void 0:h.type)===void 0?"undefined":Dn[h==null?void 0:h.type]};this.telemetryService.publicLog2("codex.handleRepositoryChanged",b),this.currentlyResolved=[p,C,m];for(const w of this.registeredFeatures.values())w.dispose();if(this.registeredFeatures.clear(),this.pendingCapabilitiesRequests.clear(),this.documentListeners!==void 0&&this.documentListeners.dispose(),this.workspaceSnapshot=void 0,this.mapper=void 0,vu.isActive(C)){const w=Vi.externalIndexUri(this.providerService,p),P=await C.sha;if(w!==void 0&&P!==void 0){const F=await hr.single(w,P,_o.getIndexBranchName(p),{authentication:this.providerService.getAuthentication(a)});F!==void 0&&(this.telemetryService.publicLog2("codex.foundSnapshot",{snapshotId:F.snapshotId}),this.workspaceSnapshot=F,this.documentListeners=this.installDocumentListeners(),((m==null?void 0:m.display)===ee.Edit||p.HEAD.sha!==P)&&(this.mapper=new Zh(this.providerService,a,P,p.HEAD.sha)))}}await $o.updateStatusBarItem()}).then(void 0,void 0)},"handleRepositoryChanged");this.metadata=this.providerService.getMetadata(this.repository.uri),this.indexMetadata=this.providerService.getIndexMetadata(this.repository.uri),this.currentlyResolved=[void 0,void 0,void 0],this.registeredFeatures=new Map,this.pendingCapabilitiesRequests=new Map,this.capabilitiesCache=new no(2048),this.knownDesignTimeFiles=new Set;const i=[];i.push(this.providerService.onDidChangeRepository(o=>{R(o.repository.uri)===R(this.repository.uri)&&r()})),i.push(this.providerService.onDidRefresh(o=>{for(const a of o)if(R(a)===R(this.repository.uri)){r();break}})),this.environmentListeners=f.Disposable.from(...i),r(!0),$o.addService(this),this.indexMetadata.then(async o=>{var a;const c=this.repository.uri;let l=!1;const u=Uo.decode(this.repository.uri);if(u!==void 0&&o!==void 0&&(u.type===oi.Latest&&o.type!==Dn.Active||u.type===oi.SHA&&(o.type!==Dn.Active||await o.sha!==u.sha))&&(l=!0),!l){await this.metadata;const d=await this.providerService.getModeRefType(c,this.metadata),h=(a=this.currentlyResolved[2])!=null?a:this.providerService.getModeConfig(c,d,!0);h!==void 0&&h.display===ee.Browse&&o!==void 0&&h.index!==rt.None&&o.type!==Dn.Active?l=!0:(o==null?void 0:o.type)===Dn.Active&&await o.sha===void 0&&((h==null?void 0:h.display)===ee.Browse,l=!0)}l&&f.window.showWarningMessage(or("RichNavService.latest.notIndexed","The repository got opened in rich code navigation mode but no corresponding index is available. Rich code navigation features are disabled.")).then(void 0,void 0)},void 0),Ti.fileSystemProvider===void 0&&(Ti.fileSystemProvider=new oo,f.workspace.registerFileSystemProvider(oo.scheme,Ti.fileSystemProvider))}getRepository(){return this.repository}async updateIndexMode(t){const e=this.currentlyResolved[2],n=t!==void 0;if(t===void 0){const r=this.repository.uri,i=await this.providerService.getModeRefType(r,this.metadata);t=this.providerService.getModeConfig(r,i),await new Promise(o=>setTimeout(o,1e3))}if(e===void 0||e.index!==t.index||e.display!==t.display){if(t.index===rt.Latest){await Promise.all([this.metadata,this.indexMetadata]);const r=await this.getIndexedTip();if(r===void 0)return;await this.sync(r.hash)}else t.index===rt.TipPlusLatest&&(await Promise.all([this.metadata,this.indexMetadata]),await this.sync());n&&await mt.setMode(this.repository.uri,t),this.refresh()}}getCurrentIndexMode(){return this.currentlyResolved[2]}key(){return R(this.repository.uri)}dispose(){for(const t of this.registeredFeatures.values())t.dispose();this.registeredFeatures.clear(),$o.removeService(this),this.documentListeners!==void 0&&(this.documentListeners.dispose(),this.documentListeners=void 0),this.environmentListeners!==void 0&&(this.environmentListeners.dispose(),this.environmentListeners=void 0)}handles(t){return t.uri.scheme!==Br.scheme?Promise.resolve(!1):Promise.resolve(t.uri.toString().startsWith(this.repositoryRoot))}async getBranchName(){return _o.getBranchName(await this.metadata)}async getMetadata(){return this.metadata}async getIndexMetadata(){return this.indexMetadata}getProviderService(){return this.providerService}getUriMetadata(){return this.providerService.getVirtualUriMetadata(this.repository.uri)}getModeConfig(t,e){return this.providerService.getModeConfig(t,e)}getModeRefType(t){return this.providerService.getModeRefType(t)}refresh(){return this.providerService.refresh()}async getNonIndexedWorkspaceDescriptor(){const{name:t,repo:e}=await this.metadata,{ref:n}=this.providerService.getVirtualUriMetadata(this.repository.uri);return{name:t,uri:this.providerService.createVirtualUri(this.repository.uri,{repo:e,ref:n}),location:$.CurrentWindow}}async isDocumentIndexed(t){await this.metadata;const e=await this.indexMetadata;if(e===void 0||e.type===Dn.NotIndexed||this.workspaceSnapshot===void 0)return 0;const n=this.pendingCapabilitiesRequests.get(t.uri.toString());return n!==void 0&&await n,this.registeredFeatures.has(t.uri.toString())?this.mapper===void 0?2:await this.mapper.needsMapping(t)?1:2:0}async getIndexedTip(){const t=await this.metadata,e=Vi.externalIndexUri(this.providerService,t),n=_o.getIndexBranchName(t);if(e===void 0||n===void 0)return;const r=await hr.getIndexedTip(e,n,{authentication:this.providerService.getAuthentication(this.repository.uri)});if(r===void 0)return;const i=await is.get(this.providerService,this.repository.uri,r.commitId);if(i!==void 0)return{...i,branchName:n}}hasChanges(){return this.providerService.getChangeStore(this.repository.uri).hasChanges(this.repository.uri)}sync(t){return this.providerService.sync(this.repository.uri,{to:t,reason:"user"})}async getCommit(t){const e=await this.metadata,n=Vi.externalIndexUri(this.providerService,e);if(n===void 0)return;const[r,i]=await Promise.all([is.get(this.providerService,this.repository.uri,t),hr.single(n,t,void 0,{authentication:this.providerService.getAuthentication(this.repository.uri)})]);if(!(r===void 0||i===void 0))return{...r,branchName:i.branchName}}installDocumentListeners(){const t=[],e=s(async n=>{const r=n.uri.scheme;if(Br.scheme!==r&&oo.scheme!==r)return;const i=n.uri.toString();if(r===Br.scheme&&!i.startsWith(this.repositoryRoot)||r===oo.scheme&&!this.knownDesignTimeFiles.has(i)||this.pendingCapabilitiesRequests.has(i))return;const o=this.workspaceSnapshot!==void 0?this.workspaceSnapshot.commitId:void 0;if(o===void 0)return;let a=this.capabilitiesCache.get(i);if(a!==null){if(a===void 0){const c=this.capabilities(n.uri);this.pendingCapabilitiesRequests.set(i,c),a=await c,this.pendingCapabilitiesRequests.delete(i),this.capabilitiesCache.set(i,a===void 0?null:a)}a===void 0||!f.workspace.textDocuments.some(c=>c===n)||this.registerProviders(n,a,o)}},"openHandler");return t.push(f.workspace.onDidOpenTextDocument(e)),f.workspace.textDocuments.forEach(e),t.push(f.workspace.onDidCloseTextDocument(n=>{const r=n.uri.toString(),i=this.registeredFeatures.get(r);i!==void 0&&(this.registeredFeatures.delete(n.uri.toString()),i.dispose()),this.pendingCapabilitiesRequests.delete(r)})),f.Disposable.from(...t)}registerProviders(t,e,n){if(this.workspaceSnapshot===void 0)return;const r=this.workspaceSnapshot,i=t.languageId,a=[{scheme:this.repository.uri.scheme,pattern:t.uri.fsPath,language:t.languageId,exclusive:!0}],c=[],l=new Promise((v,m)=>{const b=`/${r.snapshotId}/source/`;this.metadata.then(w=>{v(a0(P=>{const F=f.Uri.parse(P);if(w===void 0)return F;try{if(F.scheme==="vsck"&&F.authority===r.workspaceId&&F.path.startsWith(b))return this.repository.createRelativeUri(F.path.substr(b.length));const A=os.toVSCode(P);return A!==void 0?(this.knownDesignTimeFiles.add(A.toString()),A):F}catch(A){return F}}))},m)}),u=new RegExp(`^vsck:\\/\\/${r.workspaceId}\\/(?:latest|[a-fA-F0-9]{15})\\/designtime\\/(?:[a-fA-F0-9]+)(\\/?.*)$`);function d(v){const m=u.exec(v);return m===null||m.length===2}s(d,"designTimeFilter");function h(v){if(v==null)return v;if(Array.isArray(v)){if(v.length===0)return[];const m=v[0];return typeof m.uri=="string"?v.filter(P=>d(P.uri)):typeof m.targetUri=="string"?v.filter(P=>d(P.targetUri)):[]}return u.exec(v.uri)===null?v:void 0}s(h,"filterDesignTimeFiles");async function g(v,m,b){var w,P,F;if(b==null||v===void 0)return b;const A=new Map(f.workspace.textDocuments.map($e=>[$e.uri.toString(!0),$e]));if(Array.isArray(b)){const $e=[],fe=[];if(b.length===0)return[];for(const It of b){const kt=It;if(kt.uri instanceof f.Uri){const Pt=await v.mapRangeFromIndexToCode((w=A.get(kt.uri.toString()))!=null?w:kt.uri,kt.range);Pt!==void 0&&$e.push(new f.Location(kt.uri,Pt))}else{const Pt=It,st=(P=A.get(Pt.targetUri.toString()))!=null?P:Pt.targetUri,Mn=Pt.originSelectionRange?await v.mapRangeFromIndexToCode(m,Pt.originSelectionRange):void 0;if(Mn!==void 0||Pt.originSelectionRange===void 0){const q=await v.mapRangeFromIndexToCode(st,Pt.targetRange);if(q!==void 0){const Xe=Pt.targetSelectionRange?await v.mapRangeFromIndexToCode(st,Pt.targetSelectionRange):void 0;(Xe!==void 0||Pt.targetSelectionRange===void 0)&&fe.push({targetUri:Pt.targetUri,targetRange:q,targetSelectionRange:Xe,originSelectionRange:Mn})}}}}return $e.length>0?$e:fe}const Z=await v.mapRangeFromIndexToCode((F=A.get(b.uri.toString()))!=null?F:b.uri,b.range);if(Z!==void 0)return new f.Location(b.uri,Z)}s(g,"mapLocations");const p=s(v=>({authentication:this.providerService.getAuthentication(v.uri),correlationId:Mh()}),"getRestApiOptions"),C=s((v,m)=>{const b={method:v,correlationId:m.correlationId};this.telemetryService.publicLog2("codex.restAPICall",b)},"sendTelemetry");Ti.registerCapability(i,"hoverProvider",e)&&c.push(f.languages.registerHoverProvider(a,{provideHover:async(v,m)=>{const b=await this.createTextDocumentPositionParams(v,m);if(b===void 0)return;const w=p(v);return C("codex.provideHover",w),(await l).asHover(await ai.provideHover(n,b,w))}})),Ti.registerCapability(i,"definitionProvider",e)&&c.push(f.languages.registerDefinitionProvider(a,{provideDefinition:async(v,m)=>{const b=await this.createTextDocumentPositionParams(v,m);if(b===void 0)return;const w=p(v);return C("codex.provideDefinition",w),g(this.mapper,v,(await l).asDefinitionResult(h(await ai.provideDefinition(n,b,w))))}})),Ti.registerCapability(i,"declarationProvider",e)&&c.push(f.languages.registerDeclarationProvider(a,{provideDeclaration:async(v,m)=>{const b=await this.createTextDocumentPositionParams(v,m);if(b===void 0)return;const w=p(v);return C("codex.provideDeclaration",w),g(this.mapper,v,(await l).asDeclarationResult(h(await ai.provideDeclaration(n,b,w))))}})),Ti.registerCapability(i,"typeDefinitionProvider",e)&&c.push(f.languages.registerTypeDefinitionProvider(a,{provideTypeDefinition:async(v,m)=>{const b=await this.createTextDocumentPositionParams(v,m);if(b===void 0)return;const w=p(v);return C("codex.provideTypeDefinition",w),g(this.mapper,v,(await l).asDefinitionResult(h(await ai.provideTypeDefinition(n,b,w))))}})),Ti.registerCapability(i,"referencesProvider",e)&&c.push(f.languages.registerReferenceProvider(a,{provideReferences:async(v,m,b)=>{const w=this.mapper!==void 0?await this.mapper.mapPositionFromCodeToIndex(v,m):m;if(w===void 0)return;const P={position:{line:w.line,character:w.character},textDocument:{uri:this.createRichNavDocumentUri(v.uri).toString(!0)},context:{includeDeclaration:b.includeDeclaration}},F=p(v);return C("codex.provideReferences",F),g(this.mapper,v,(await l).asReferences(h(await ai.provideReferences(n,P,F))))}})),Ti.registerCapability(i,"foldingRangeProvider",e)&&c.push(f.languages.registerFoldingRangeProvider(a,{provideFoldingRanges:async v=>{if(this.mapper!==void 0&&await this.mapper.needsMapping(v))return;const m=p(v);return C("codex.provideFoldingRanges",m),(await l).asFoldingRanges(await ai.providerFoldingRanges(n,this.createTextDocumentParams(v.uri),m))}})),Ti.registerCapability(i,"workspaceSymbolProvider",e)&&c.push(f.languages.registerWorkspaceSymbolProvider({provideWorkspaceSymbols:async v=>{const m=p(t),b=await ai.provideWorkspaceSymbols(n,v,m);if(b!==void 0)return(await l).asSymbolInformations(b)}})),this.registeredFeatures.set(t.uri.toString(),f.Disposable.from(...c)),$o.updateStatusBarItem()}async capabilities(t){var e;const n=this.workspaceSnapshot!==void 0?this.workspaceSnapshot.commitId:void 0;if(n!==void 0)return(e=await ai.capabilities(n,this.createTextDocumentParams(t),{authentication:this.providerService.getAuthentication(t)}))!=null?e:void 0}createTextDocumentParams(t){return{textDocument:{uri:this.createRichNavDocumentUri(t).toString(!0)}}}async createTextDocumentPositionParams(t,e){const n=this.mapper!==void 0?await this.mapper.mapPositionFromCodeToIndex(t,e):e;if(n!==void 0)return{position:{line:n.line,character:n.character},textDocument:{uri:this.createRichNavDocumentUri(t.uri).toString(!0)}}}createRichNavDocumentUri(t){if(t.scheme===oo.scheme){const r=os.toRichNavComponents(t);return r===void 0?t:f.Uri.file(r.assetId)}const e=this.repository.uri.toString(!0),n=t.toString(!0);return f.Uri.file(n.substr(e.length))}},"_RichNavService");let ku=Ti;ku.localCapabilities=new Map([["javascript",Object.assign(ji.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})],["javascriptreact",Object.assign(ji.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})],["typescript",Object.assign(ji.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})],["typescriptreact",Object.assign(ji.create(),{documentSymbolProvider:!0,foldingRangeProvider:!0})]]),ku.disabledCapabilities=new Map([["javascript",Object.assign(ji.create(),{declarationProvider:!0})],["javascriptreact",Object.assign(ji.create(),{declarationProvider:!0})],["typescript",Object.assign(ji.create(),{declarationProvider:!0})],["typescriptreact",Object.assign(ji.create(),{declarationProvider:!0})]]);var kg=s((t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},"__accessCheck"),s0=s((t,e,n)=>(kg(t,e,"read from private field"),n?n.call(t):e.get(t)),"__privateGet"),c0=s((t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},"__privateAdd"),l0=s((t,e,n,r)=>(kg(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),"__privateSet"),mc;class Mg{constructor(e){c0(this,mc,void 0),l0(this,mc,e)}async provideEditSessionIdentity(e,n){var r,i;const o=s0(this,mc).getRepository(e.uri);if(!o||n.isCancellationRequested)return null;const a=await o.getMetadata();return JSON.stringify({remote:a.cloneUrl.http,ref:(i=(r=a.HEAD.branch)==null?void 0:r.name)!=null?i:null,sha:a.HEAD.sha})}}s(Mg,"EditSessionIdentityProvider"),mc=new WeakMap;var Fg=s((t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},"extensionApi_accessCheck"),Eo=s((t,e,n)=>(Fg(t,e,"read from private field"),n?n.call(t):e.get(t)),"extensionApi_privateGet"),u0=s((t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},"extensionApi_privateAdd"),d0=s((t,e,n,r)=>(Fg(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),"extensionApi_privateSet"),Pi;class Lg{constructor(e){u0(this,Pi,void 0),d0(this,Pi,e)}async getMetadata(e){const n=Eo(this,Pi).getVirtualUriMetadata(e);if(n===void 0)return;const{provider:r,repo:i}=n;return{provider:{id:r.id,name:r.name},repo:i,getRevision:async()=>{const{HEAD:o}=await Eo(this,Pi).getMetadata(e);return{type:o.type,name:o.name,revision:o.sha}}}}getProvider(e){return Eo(this,Pi).getRegisteredProvider(e)}getProviderUri(e){return k.getProviderUri(e)}getProviderRootUri(e){return Eo(this,Pi).getProviderRootUri(e)}isProviderUri(e,n){return e.scheme!==Br.scheme&&Eo(this,Pi).hasProvider(e,n)}getVirtualUri(e){return k.getVirtualUri(e)}getVirtualWorkspaceUri(e){return Eo(this,Pi).getVirtualWorkspaceUri(e)}async loadWorkspaceContents(e){if(e.scheme!==k.scheme)return!1;const n=Eo(this,Pi).getProviderRootUri(e);return n.scheme!=="github"?!1:Eo(this,Pi).loadWorkspaceContents(n)}}s(Lg,"ExtensionApi"),Pi=new WeakMap;var f0=Object.defineProperty,h0=Object.getOwnPropertyDescriptor,Mu=s((t,e,n,r)=>{for(var i=r>1?void 0:r?h0(e,n):e,o=t.length-1,a;o>=0;o--)(a=t[o])&&(i=(r?a(e,n,i):a(i))||i);return r&&i&&f0(e,n,i),i},"fs_decorateClass");const Fu=f.FileSystemError.FileNotFound().code;class as{constructor(e){this.providerService=e,this._onDidChangeFile=new f.EventEmitter,this.implicitlyWatchedUris=new Map,this.watchedUris=new Map,this.syncedRootUris=new Set,this.disposable=f.Disposable.from(f.workspace.registerFileSystemProvider(this.scheme,this,{isCaseSensitive:!0}),f.workspace.registerFileSearchProvider(this.scheme,this),f.workspace.registerTextSearchProvider(this.scheme,this),e.onDidChangeRepository(n=>{n.reason==="HEAD"&&this.onRefreshOrRepositoryChanged([n.repository.uri])}),e.onDidRefresh(n=>this.onRefreshOrRepositoryChanged(n)),e.onDidChangeChangeStore(n=>{const r=n.map(i=>{switch(i.type){case I.Created:return{type:f.FileChangeType.Created,uri:i.uri};case I.Changed:return{type:f.FileChangeType.Changed,uri:i.uri};case I.Deleted:return{type:f.FileChangeType.Deleted,uri:i.uri}}});setTimeout(()=>this._onDidChangeFile.fire(r),0)}))}get onDidChangeFile(){return this._onDidChangeFile.event}get scheme(){return Br.scheme}dispose(){var e;(e=this.disposable)==null||e.dispose()}onRefreshOrRepositoryChanged(e){e=e.filter(n=>n.scheme===this.scheme),e.length!==0&&(ce.log(`fs.onRefreshOrRepositoryChanged(${e.map(n=>n.toString()).join(", ")})`),this.updateOpenOrWatchedUris(e))}updateOpenOrWatchedUris(e){const n=k.getOpenUris(this.scheme,e);for(const[i,o]of[...this.watchedUris,...this.implicitlyWatchedUris])e.some(a=>X(o,a))&&(this.implicitlyWatchedUris.delete(i),n.set(i,o));ce.debug(`fs.updateOpenOrWatchedUris(${e.map(i=>i.toString()).join(", ")}): uris=${n.size}`);for(const i of e)n.set(R(i),i);const r=[...n.values()].map(i=>({type:f.FileChangeType.Changed,uri:i}));setTimeout(()=>{ce.debug(`fs.updateOpenOrWatchedUris: Firing events=${r.map(i=>i.uri.toString()).join(", ")}`),this._onDidChangeFile.fire(r)},0)}watch(e,n){const r=R(e);this.watchedUris.set(r,e);const i=Tr(this.providerService,e).then(()=>this.providerService.watch(k.getProviderUri(e),n));return{dispose:async()=>{this.watchedUris.delete(r),(await i).dispose()}}}async stat(e){const n=new Ln(`fs.stat(${e.toString()})`);await Tr(this.providerService,e);const r=this.providerService.getVirtualRootUri(e),i=r.toString();this.syncedRootUris.has(i)||(this.syncedRootUris.add(i),await this.providerService.fetchOrSync(r));let o;try{if(this.providerService.changeStoreMaybeHasChanges(r,e)!==!1){if(n.logStep("ChangeStore query"),o=await this.providerService.changeStoreStat(e),o!==void 0)return o;n.logStep("Provider query",{message:": Not found \u2022",suffix:" \u2022 Querying provider..."})}else n.logStep("Provider query"),this.implicitlyWatchedUris.set(R(e),e);return o=await this.providerService.stat(k.getProviderUri(e)),o}finally{o===void 0&&this.implicitlyWatchedUris.delete(R(e)),n.stop()}}async readDirectory(e){const n=new Ln(`fs.readDirectory(${e.toString()})`);await Tr(this.providerService,e),this.implicitlyWatchedUris.set(R(e),e);try{n.logStep("Provider query");let r=await this.providerService.readDirectory(k.getProviderUri(e));return this.providerService.changeStoreMaybeHasChanges(this.providerService.getVirtualRootUri(e))!==!1&&(n.logStep("Applying changes",{suffix:" \u2022 Applying changes..."}),r=await this.providerService.changeStoreUpdateDirectoryEntries(e,r)),r}finally{n.stop()}}async createDirectory(e){const n=new Ln(`fs.createDirectory(${e.toString()})`);await Tr(this.providerService,e);try{await this.providerService.changeStoreCreateDirectory(e)}catch(r){throw ce.error(r,n.context),r}finally{n.stop()}}async readFile(e){const n=new Ln(`fs.readFile(${e.toString()})`),r=R(e);let i;await Tr(this.providerService,e);try{if(this.providerService.changeStoreMaybeHasChanges(this.providerService.getVirtualRootUri(e),e)!==!1){n.logStep("ChangeStore query");const o=await this.providerService.changeStoreReadFile(e);if(o!==void 0)return o;n.logStep("Provider query",{message:": Not found \u2022",suffix:" \u2022 Querying provider..."})}else n.logStep("Provider query"),this.implicitlyWatchedUris.set(r,e);return i=await this.providerService.readFile(k.getProviderUri(e)),i}catch(o){throw o instanceof Hr&&oc.showProviderNotFoundMessage(o),o}finally{i===void 0&&this.implicitlyWatchedUris.delete(r),n.stop()}}async writeFile(e,n,r){const i=new Ln(`fs.writeFile(${e.toString()})`,{},n.length,r);await Tr(this.providerService,e);try{let o;try{if(o=await this.stat(e),!r.overwrite)throw f.FileSystemError.FileExists()}catch(a){if(a instanceof f.FileSystemError&&a.code===Fu){if(!r.create)throw f.FileSystemError.FileNotFound(e)}else throw a}try{if(o===void 0)await this.providerService.changeStoreCreateFile(e,n);else{i.logStep("Provider original query");let a;try{a=await this.providerService.readFile(k.getProviderUri(e))}catch(c){if(c instanceof f.FileSystemError&&c.code===Fu)a=new Uint8Array;else throw c}i.logStep("Writing file",{suffix:" \u2022 Writing file to Change Store..."}),await this.providerService.changeStoreWriteFile(e,n,a)}}catch(a){throw ce.error(a,i.context),a}}catch(o){throw o instanceof Hr&&oc.showProviderNotFoundMessage(o),o}finally{i.stop()}}async delete(e,n){const r=new Ln(`fs.delete(${e.toString()})`,{},n);await Tr(this.providerService,e);try{switch((await this.stat(e)).type){case f.FileType.File:await this.providerService.changeStoreDeleteFile(e);break;case f.FileType.Directory:{await this.deleteDirectory(e,n);break}default:throw f.FileSystemError.NoPermissions()}}catch(i){throw ce.error(i,r.context),i}finally{r.stop()}}async deleteDirectory(e,n){const r=new Ln(`fs.deleteDirectory(${e.toString()})`,{},n);try{const i=await this.readDirectory(e);if(i.length!==0){if(!n.recursive&&i.some(([,o])=>o===f.FileType.Directory))throw f.FileSystemError.NoPermissions();for(const[o,a]of i)a===f.FileType.Directory?await this.deleteDirectory(f.Uri.joinPath(e,o),n):await this.providerService.changeStoreDeleteFile(f.Uri.joinPath(e,o))}await this.providerService.changeStoreDeleteDirectory(e)}catch(i){throw ce.error(i,r.context),i}finally{r.stop()}}async rename(e,n,r){const i=new Ln(`fs.rename(${e.toString()} -> ${n.toString()})`,{},r);await Tr(this.providerService,e);try{switch((await this.stat(e)).type){case f.FileType.File:{const a=await this.readFile(e);await this.writeFile(n,a,{create:!0,overwrite:r.overwrite}),await this.delete(e,{recursive:!1});break}case f.FileType.Directory:{await this.renameDirectory(e,n,r);break}default:throw f.FileSystemError.NoPermissions()}}catch(o){throw ce.error(o,i.context),o}finally{i.stop()}}async renameDirectory(e,n,r){const i=new Ln(`fs.renameDirectory(${e.toString()} -> ${n.toString()})`,{},r);try{await this.copyDirectory(e,n,r),await this.delete(e,{recursive:!0})}catch(o){throw ce.error(o,i.context),o}finally{i.stop()}}async copy(e,n,r){const i=new Ln(`fs.copy(${e.toString()} -> ${n.toString()})`,{},r);try{switch((await this.stat(e)).type){case f.FileType.File:{const a=await this.readFile(e);await this.writeFile(n,a,{create:!0,overwrite:r.overwrite});break}case f.FileType.Directory:{await this.copyDirectory(e,n,r);break}default:throw f.FileSystemError.NoPermissions()}}catch(o){throw ce.error(o,i.context),o}finally{i.stop()}}async copyDirectory(e,n,r){const i=new Ln(`fs.copyDirectory(${e.toString()} -> ${n.toString()})`,{},r);try{if(await this.exists(n))throw f.FileSystemError.FileExists();try{await this.createDirectory(n);const o=await this.readDirectory(e);for(const[a,c]of o)c===f.FileType.Directory?await this.copyDirectory(f.Uri.joinPath(e,a),f.Uri.joinPath(n,a),r):await this.copy(f.Uri.joinPath(e,a),f.Uri.joinPath(n,a),r)}catch(o){throw ce.error(o,i.context),o}}finally{i.stop()}}async exists(e){try{return await this.stat(e),!0}catch(n){if(n instanceof f.FileSystemError&&n.code===Fu)return!1;throw n}}async provideFileSearchResults(e,n,r){var i;const o=new Ln(`fs.provideFileSearchResults(${e.pattern}, ${n.folder.toString()})`,{logLevel:mn.Debug});await Tr(this.providerService,n.folder);let a;try{return a=await this.providerService.provideFileSearchResults(e,{...n,folder:k.getProviderUri(n.folder)},r),a==null?void 0:a.map(c=>k.getVirtualUri(c))}catch(c){throw ce.error(c,o.context),c}finally{o.stop({suffix:` \u2022 ${(i=a==null?void 0:a.length)!=null?i:0} results found`})}}async provideTextSearchResults(e,n,r,i){return await Tr(this.providerService,n.folder),this.providerService.provideTextSearchResults(e,{...n,folder:k.getProviderUri(n.folder)},{report:o=>r.report({...o,uri:k.getVirtualUri(o.uri)})},i)}}s(as,"ChangeTrackingFileSystem"),Mu([ic()],as.prototype,"stat",1),Mu([ic()],as.prototype,"readDirectory",1),Mu([ic()],as.prototype,"readFile",1);const zo=de.loadMessageBundle(),Ng=s(class{constructor(t){this.providerService=t,this.lock=new Xa("PendingRepositoryOpenActions"),this.disposable=f.Disposable.from(t.onDidChangeRepositories(e=>e.added.length&&this.onRepositoriesOpened(e.added)))}dispose(){this.disposable.dispose()}async onRepositoriesOpened(t){for(const e of t){const n=await this.getAndDelete(e);(n==null?void 0:n.applyChangeset)&&await this.applyPendingChangeset(e,n.applyChangeset),(n==null?void 0:n.filesToOpen)&&this.openPendingFiles(e.uri,n.filesToOpen),await this.fetchOrSync(e).then(async()=>{const r=mt.get("uncommittedChangesOnEntry");if(r==="none"||!await this.providerService.changeStoreHasChanges(e.uri)||(await this.providerService.getIncomingChanges(this.providerService.getVirtualRootUri(e.uri))).length===0&&r==="promptIfBehind")return;const{state:a}=await this.providerService.getMetadata(e.uri);if(a===void 0||a.behind<1)return;const c=await this.providerService.changeStoreGetChanges(e.uri),l=c.length===1?zo("prompt uncommitted changes file","You have {0} file with uncommitted changes from a previous edit session.",c.length.toString()):zo("prompt uncommitted changes files","You have {0} files with uncommitted changes from a previous edit session.",c.length.toString());let u="";a.behind===1?u=zo("prompt incoming changes commit",`Your repository contents may be out of date until you sync.

You are {0} commit behind.`,a.behind.toString()):a.behind>1&&(u=zo("prompt incoming changes commits",`Your repository contents may be out of date until you sync.

You are {0} commits behind.`,a.behind.toString()));const d=[l,u].join(`

`),h={title:zo("sync uncommitted changes","Sync")},g={title:zo("continue uncommitted changes","Continue Without Syncing"),isCloseAffordance:!0},p={title:zo("don't show again","Don't Show Again")},C=await f.window.showInformationMessage(d,{modal:!0},h,g,p);switch(C==null?void 0:C.title){case h.title:await f.commands.executeCommand("remoteHub.sync");break;case p.title:await mt.updateEffective("uncommittedChangesOnEntry","none");break;default:break}})}}async fetchOrSync(t){await this.providerService.fetchOrSync(t.uri)}async get(t){return this.lock.synchronizeRead(()=>this.getCore(t.uri),"PendingRepositoryOpenActions.get")}async getAndDelete(t){ce.debug(`RepositoryOpenActionsService.getAndDelete(${t.uri.toString()})`);try{return await this.lock.synchronizeWrite(async()=>{const n=await this.getCore(t.uri);if(n!==void 0)return await this.storeCore(t.uri,void 0),n},"PendingRepositoryOpenActions.getAndDelete")}catch(e){ce.error(e,`Failed to get pending actions for ${t.uri.toString()}`);return}}async openPendingFiles(t,e){if(e.length!==0){ce.log(`RepositoryOpenActionsService.openPendingFiles(${t.toString()})`,e.join(","));for(let n of e){const r=/:(?<start>\d+)(?:-(?<end>\d+))?$/.exec(n);let i,o;(r==null?void 0:r.groups)!==void 0&&(i=Number(r.groups.start),isNaN(i)&&(i=void 0),o=Number(r.groups.end),isNaN(o)&&(o=void 0),n=n.substring(0,r.index));const a=f.Uri.joinPath(t,n);let c;try{c=await f.workspace.fs.stat(a)}catch{}if((c==null?void 0:c.type)===f.FileType.Directory)f.commands.executeCommand("revealInExplorer",a);else{let l;i!==void 0&&(l={selection:new f.Range(Number(i)-1,0,o!=null?o:i,0)}),f.commands.executeCommand("vscode.open",a,l)}}}}setChangesetToApply(t,e){return ce.log(`RepositoryOpenActionsService.setChangesetToApply(${t.toString()})`),this.lock.synchronizeWrite(async()=>{const n=await this.getCore(t);await this.storeCore(t,{...n,applyChangeset:e})},"PendingRepositoryOpenActions.setChangesetToApply")}setPendingFilesToOpen(t,e){return ce.log(`RepositoryOpenActionsService.setPendingFilesToOpen(${t.toString()})`,e.length),this.lock.synchronizeWrite(async()=>{const n=await this.getCore(t);await this.storeCore(t,{...n,filesToOpen:e})},"PendingRepositoryOpenActions.setPendingFilesToOpen")}async applyPendingChangeset(t,e){ce.log(`RepositoryOpenActionsService.applyPendingChangeset(${t.uri.toString()})`);try{await this.providerService.changeStoreApplyChangeset(t.uri,e,{save:!0})}catch(n){ce.error(n,`Failed to apply pending changeset for ${t.uri.toString()}`)}}async getCore(t){return this.fromStorage(await this.providerService.getFromStorage(t,this.getStorageKey(t)))}storeCore(t,e){return e===void 0||e.applyChangeset===void 0&&(e.filesToOpen===void 0||e.filesToOpen.length===0)?this.providerService.deleteFromStorage(t,this.getStorageKey(t)):this.providerService.storeInStorage(t,this.getStorageKey(t),this.toStorage(e))}getStorageKey(t){return`actions/${R(t)}`}fromStorage(t){if(!!t)try{const e=JSON.parse(t,(n,r)=>(n==="uri"||n.endsWith("Uri"))&&G(r)?f.Uri.from(r):r);return{filesToOpen:e.filesToOpen,applyChangeset:e.applyChangeset}}catch(e){return ce.error(e,"Failed to deserialize pending repository actions"),{}}}toStorage(t){const e={schemaVersion:Ng.storageSchemaVersion,...t};return JSON.stringify(e)}},"_RepositoryOpenActionsService");let Og=Ng;Og.storageSchemaVersion=1;function ao(){}s(ao,"Diff"),ao.prototype={diff:s(function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.callback;typeof r=="function"&&(i=r,r={}),this.options=r;var o=this;function a(v){return i?(setTimeout(function(){i(void 0,v)},0),!0):v}s(a,"done"),e=this.castInput(e),n=this.castInput(n),e=this.removeEmpty(this.tokenize(e)),n=this.removeEmpty(this.tokenize(n));var c=n.length,l=e.length,u=1,d=c+l,h=[{newPos:-1,components:[]}],g=this.extractCommon(h[0],n,e,0);if(h[0].newPos+1>=c&&g+1>=l)return a([{value:this.join(n),count:n.length}]);function p(){for(var v=-1*u;v<=u;v+=2){var m=void 0,b=h[v-1],w=h[v+1],P=(w?w.newPos:0)-v;b&&(h[v-1]=void 0);var F=b&&b.newPos+1<c,A=w&&0<=P&&P<l;if(!F&&!A){h[v]=void 0;continue}if(!F||A&&b.newPos<w.newPos?(m=p0(w),o.pushComponent(m.components,void 0,!0)):(m=b,m.newPos++,o.pushComponent(m.components,!0,void 0)),P=o.extractCommon(m,n,e,v),m.newPos+1>=c&&P+1>=l)return a(g0(o,m.components,n,e,o.useLongestToken));h[v]=m}u++}if(s(p,"execEditLength"),i)s(function v(){setTimeout(function(){if(u>d)return i();p()||v()},0)},"exec")();else for(;u<=d;){var C=p();if(C)return C}},"diff"),pushComponent:s(function(e,n,r){var i=e[e.length-1];i&&i.added===n&&i.removed===r?e[e.length-1]={count:i.count+1,added:n,removed:r}:e.push({count:1,added:n,removed:r})},"pushComponent"),extractCommon:s(function(e,n,r,i){for(var o=n.length,a=r.length,c=e.newPos,l=c-i,u=0;c+1<o&&l+1<a&&this.equals(n[c+1],r[l+1]);)c++,l++,u++;return u&&e.components.push({count:u}),e.newPos=c,l},"extractCommon"),equals:s(function(e,n){return this.options.comparator?this.options.comparator(e,n):e===n||this.options.ignoreCase&&e.toLowerCase()===n.toLowerCase()},"equals"),removeEmpty:s(function(e){for(var n=[],r=0;r<e.length;r++)e[r]&&n.push(e[r]);return n},"removeEmpty"),castInput:s(function(e){return e},"castInput"),tokenize:s(function(e){return e.split("")},"tokenize"),join:s(function(e){return e.join("")},"join")};function g0(t,e,n,r,i){for(var o=0,a=e.length,c=0,l=0;o<a;o++){var u=e[o];if(u.removed){if(u.value=t.join(r.slice(l,l+u.count)),l+=u.count,o&&e[o-1].added){var h=e[o-1];e[o-1]=e[o],e[o]=h}}else{if(!u.added&&i){var d=n.slice(c,c+u.count);d=d.map(function(p,C){var v=r[l+C];return v.length>p.length?v:p}),u.value=t.join(d)}else u.value=t.join(n.slice(c,c+u.count));c+=u.count,u.added||(l+=u.count)}}var g=e[a-1];return a>1&&typeof g.value=="string"&&(g.added||g.removed)&&t.equals("",g.value)&&(e[a-2].value+=g.value,e.pop()),e}s(g0,"buildValues");function p0(t){return{newPos:t.newPos,components:t.components.slice(0)}}s(p0,"clonePath");var v0=new ao;function by(t,e,n){return v0.diff(t,e,n)}s(by,"diffChars");function Ug(t,e){if(typeof t=="function")e.callback=t;else if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}s(Ug,"generateOptions");var Hg=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,Bg=/\S/,yc=new ao;yc.equals=function(t,e){return this.options.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t===e||this.options.ignoreWhitespace&&!Bg.test(t)&&!Bg.test(e)},yc.tokenize=function(t){for(var e=t.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),n=0;n<e.length-1;n++)!e[n+1]&&e[n+2]&&Hg.test(e[n])&&Hg.test(e[n+2])&&(e[n]+=e[n+2],e.splice(n+1,2),n--);return e};function _y(t,e,n){return n=Ug(n,{ignoreWhitespace:!0}),yc.diff(t,e,n)}s(_y,"diffWords");function Ey(t,e,n){return yc.diff(t,e,n)}s(Ey,"diffWordsWithSpace");var wc=new ao;wc.tokenize=function(t){var e=[],n=t.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var r=0;r<n.length;r++){var i=n[r];r%2&&!this.options.newlineIsToken?e[e.length-1]+=i:(this.options.ignoreWhitespace&&(i=i.trim()),e.push(i))}return e};function m0(t,e,n){return wc.diff(t,e,n)}s(m0,"diffLines");function xy(t,e,n){var r=Ug(n,{ignoreWhitespace:!0});return wc.diff(t,e,r)}s(xy,"diffTrimmedLines");var Wg=new ao;Wg.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};function Iy(t,e,n){return Wg.diff(t,e,n)}s(Iy,"diffSentences");var $g=new ao;$g.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function Dy(t,e,n){return $g.diff(t,e,n)}s(Dy,"diffCss");function Cc(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Cc=s(function(e){return typeof e},"_typeof"):Cc=s(function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},"_typeof"),Cc(t)}s(Cc,"_typeof");function so(t){return y0(t)||w0(t)||C0(t)||S0()}s(so,"_toConsumableArray");function y0(t){if(Array.isArray(t))return Lu(t)}s(y0,"_arrayWithoutHoles");function w0(t){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(t))return Array.from(t)}s(w0,"_iterableToArray");function C0(t,e){if(!!t){if(typeof t=="string")return Lu(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lu(t,e)}}s(C0,"_unsupportedIterableToArray");function Lu(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}s(Lu,"_arrayLikeToArray");function S0(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}s(S0,"_nonIterableSpread");var b0=Object.prototype.toString,ba=new ao;ba.useLongestToken=!0,ba.tokenize=wc.tokenize,ba.castInput=function(t){var e=this.options,n=e.undefinedReplacement,r=e.stringifyReplacer,i=r===void 0?function(o,a){return typeof a=="undefined"?n:a}:r;return typeof t=="string"?t:JSON.stringify(Nu(t,null,null,i),i,"  ")},ba.equals=function(t,e){return ao.prototype.equals.call(ba,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"))};function Ty(t,e,n){return ba.diff(t,e,n)}s(Ty,"diffJson");function Nu(t,e,n,r,i){e=e||[],n=n||[],r&&(t=r(i,t));var o;for(o=0;o<e.length;o+=1)if(e[o]===t)return n[o];var a;if(b0.call(t)==="[object Array]"){for(e.push(t),a=new Array(t.length),n.push(a),o=0;o<t.length;o+=1)a[o]=Nu(t[o],e,n,r,i);return e.pop(),n.pop(),a}if(t&&t.toJSON&&(t=t.toJSON()),Cc(t)==="object"&&t!==null){e.push(t),a={},n.push(a);var c=[],l;for(l in t)t.hasOwnProperty(l)&&c.push(l);for(c.sort(),o=0;o<c.length;o+=1)l=c[o],a[l]=Nu(t[l],e,n,r,l);e.pop(),n.pop()}else a=t;return a}s(Nu,"canonicalize");var Sc=new ao;Sc.tokenize=function(t){return t.slice()},Sc.join=Sc.removeEmpty=function(t){return t};function Py(t,e,n){return Sc.diff(t,e,n)}s(Py,"diffArrays");function ss(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.split(/\r\n|[\n\v\f\r\x85]/),r=t.match(/\r\n|[\n\v\f\r\x85]/g)||[],i=[],o=0;function a(){var u={};for(i.push(u);o<n.length;){var d=n[o];if(/^(\-\-\-|\+\+\+|@@)\s/.test(d))break;var h=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(d);h&&(u.index=h[1]),o++}for(c(u),c(u),u.hunks=[];o<n.length;){var g=n[o];if(/^(Index:|diff|\-\-\-|\+\+\+)\s/.test(g))break;if(/^@@/.test(g))u.hunks.push(l());else{if(g&&e.strict)throw new Error("Unknown line "+(o+1)+" "+JSON.stringify(g));o++}}}s(a,"parseIndex");function c(u){var d=/^(---|\+\+\+)\s+(.*)$/.exec(n[o]);if(d){var h=d[1]==="---"?"old":"new",g=d[2].split("	",2),p=g[0].replace(/\\\\/g,"\\");/^".*"$/.test(p)&&(p=p.substr(1,p.length-2)),u[h+"FileName"]=p,u[h+"Header"]=(g[1]||"").trim(),o++}}s(c,"parseFileHeader");function l(){var u=o,d=n[o++],h=d.split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),g={oldStart:+h[1],oldLines:typeof h[2]=="undefined"?1:+h[2],newStart:+h[3],newLines:typeof h[4]=="undefined"?1:+h[4],lines:[],linedelimiters:[]};g.oldLines===0&&(g.oldStart+=1),g.newLines===0&&(g.newStart+=1);for(var p=0,C=0;o<n.length&&!(n[o].indexOf("--- ")===0&&o+2<n.length&&n[o+1].indexOf("+++ ")===0&&n[o+2].indexOf("@@")===0);o++){var v=n[o].length==0&&o!=n.length-1?" ":n[o][0];if(v==="+"||v==="-"||v===" "||v==="\\")g.lines.push(n[o]),g.linedelimiters.push(r[o]||`
`),v==="+"?p++:v==="-"?C++:v===" "&&(p++,C++);else break}if(!p&&g.newLines===1&&(g.newLines=0),!C&&g.oldLines===1&&(g.oldLines=0),e.strict){if(p!==g.newLines)throw new Error("Added line count did not match for hunk at line "+(u+1));if(C!==g.oldLines)throw new Error("Removed line count did not match for hunk at line "+(u+1))}return g}for(s(l,"parseHunk");o<n.length;)a();return i}s(ss,"parsePatch");function _0(t,e,n){var r=!0,i=!1,o=!1,a=1;return s(function c(){if(r&&!o){if(i?a++:r=!1,t+a<=n)return a;o=!0}if(!i)return o||(r=!0),e<=t-a?-a++:(i=!0,c())},"iterator")}s(_0,"distanceIterator");function zg(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string"&&(e=ss(e)),Array.isArray(e)){if(e.length>1)throw new Error("applyPatch only works with a single input.");e=e[0]}var r=t.split(/\r\n|[\n\v\f\r\x85]/),i=t.match(/\r\n|[\n\v\f\r\x85]/g)||[],o=e.hunks,a=n.compareLine||function(Xe,vt,pt,Mt){return vt===Mt},c=0,l=n.fuzzFactor||0,u=0,d=0,h,g;function p(Xe,vt){for(var pt=0;pt<Xe.lines.length;pt++){var Mt=Xe.lines[pt],Vt=Mt.length>0?Mt[0]:" ",an=Mt.length>0?Mt.substr(1):Mt;if(Vt===" "||Vt==="-"){if(!a(vt+1,r[vt],Vt,an)&&(c++,c>l))return!1;vt++}}return!0}s(p,"hunkFits");for(var C=0;C<o.length;C++){for(var v=o[C],m=r.length-v.oldLines,b=0,w=d+v.oldStart-1,P=_0(w,u,m);b!==void 0;b=P())if(p(v,w+b)){v.offset=d+=b;break}if(b===void 0)return!1;u=v.offset+v.oldStart+v.oldLines}for(var F=0,A=0;A<o.length;A++){var Z=o[A],$e=Z.oldStart+Z.offset+F-1;F+=Z.newLines-Z.oldLines;for(var fe=0;fe<Z.lines.length;fe++){var It=Z.lines[fe],kt=It.length>0?It[0]:" ",Pt=It.length>0?It.substr(1):It,st=Z.linedelimiters[fe];if(kt===" ")$e++;else if(kt==="-")r.splice($e,1),i.splice($e,1);else if(kt==="+")r.splice($e,0,Pt),i.splice($e,0,st),$e++;else if(kt==="\\"){var Mn=Z.lines[fe-1]?Z.lines[fe-1][0]:null;Mn==="+"?h=!0:Mn==="-"&&(g=!0)}}}if(h)for(;!r[r.length-1];)r.pop(),i.pop();else g&&(r.push(""),i.push(`
`));for(var q=0;q<r.length-1;q++)r[q]=r[q]+i[q];return r.join("")}s(zg,"applyPatch");function Ry(t,e){typeof t=="string"&&(t=ss(t));var n=0;function r(){var i=t[n++];if(!i)return e.complete();e.loadFile(i,function(o,a){if(o)return e.complete(o);var c=zg(a,i,e);e.patched(i,c,function(l){if(l)return e.complete(l);r()})})}s(r,"processIndex"),r()}s(Ry,"applyPatches");function Vg(t,e,n,r,i,o,a){a||(a={}),typeof a.context=="undefined"&&(a.context=4);var c=m0(n,r,a);c.push({value:"",lines:[]});function l(b){return b.map(function(w){return" "+w})}s(l,"contextLines");for(var u=[],d=0,h=0,g=[],p=1,C=1,v=s(function(w){var P=c[w],F=P.lines||P.value.replace(/\n$/,"").split(`
`);if(P.lines=F,P.added||P.removed){var A;if(!d){var Z=c[w-1];d=p,h=C,Z&&(g=a.context>0?l(Z.lines.slice(-a.context)):[],d-=g.length,h-=g.length)}(A=g).push.apply(A,so(F.map(function(q){return(P.added?"+":"-")+q}))),P.added?C+=F.length:p+=F.length}else{if(d)if(F.length<=a.context*2&&w<c.length-2){var $e;($e=g).push.apply($e,so(l(F)))}else{var fe,It=Math.min(F.length,a.context);(fe=g).push.apply(fe,so(l(F.slice(0,It))));var kt={oldStart:d,oldLines:p-d+It,newStart:h,newLines:C-h+It,lines:g};if(w>=c.length-2&&F.length<=a.context){var Pt=/\n$/.test(n),st=/\n$/.test(r),Mn=F.length==0&&g.length>kt.oldLines;!Pt&&Mn&&n.length>0&&g.splice(kt.oldLines,0,"\\ No newline at end of file"),(!Pt&&!Mn||!st)&&g.push("\\ No newline at end of file")}u.push(kt),d=0,h=0,g=[]}p+=F.length,C+=F.length}},"_loop"),m=0;m<c.length;m++)v(m);return{oldFileName:t,newFileName:e,oldHeader:i,newHeader:o,hunks:u}}s(Vg,"structuredPatch");function E0(t){var e=[];t.oldFileName==t.newFileName&&e.push("Index: "+t.oldFileName),e.push("==================================================================="),e.push("--- "+t.oldFileName+(typeof t.oldHeader=="undefined"?"":"	"+t.oldHeader)),e.push("+++ "+t.newFileName+(typeof t.newHeader=="undefined"?"":"	"+t.newHeader));for(var n=0;n<t.hunks.length;n++){var r=t.hunks[n];r.oldLines===0&&(r.oldStart-=1),r.newLines===0&&(r.newStart-=1),e.push("@@ -"+r.oldStart+","+r.oldLines+" +"+r.newStart+","+r.newLines+" @@"),e.push.apply(e,r.lines)}return e.join(`
`)+`
`}s(E0,"formatPatch");function x0(t,e,n,r,i,o,a){return E0(Vg(t,e,n,r,i,o,a))}s(x0,"createTwoFilesPatch");function I0(t,e,n,r,i,o){return x0(t,t,e,n,r,i,o)}s(I0,"createPatch");function D0(t,e){return t.length!==e.length?!1:Ou(t,e)}s(D0,"arrayEqual");function Ou(t,e){if(e.length>t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}s(Ou,"arrayStartsWith");function T0(t){var e=Hu(t.lines),n=e.oldLines,r=e.newLines;n!==void 0?t.oldLines=n:delete t.oldLines,r!==void 0?t.newLines=r:delete t.newLines}s(T0,"calcLineCount");function Ay(t,e,n){t=jg(t,n),e=jg(e,n);var r={};(t.index||e.index)&&(r.index=t.index||e.index),(t.newFileName||e.newFileName)&&(qg(t)?qg(e)?(r.oldFileName=bc(r,t.oldFileName,e.oldFileName),r.newFileName=bc(r,t.newFileName,e.newFileName),r.oldHeader=bc(r,t.oldHeader,e.oldHeader),r.newHeader=bc(r,t.newHeader,e.newHeader)):(r.oldFileName=t.oldFileName,r.newFileName=t.newFileName,r.oldHeader=t.oldHeader,r.newHeader=t.newHeader):(r.oldFileName=e.oldFileName||t.oldFileName,r.newFileName=e.newFileName||t.newFileName,r.oldHeader=e.oldHeader||t.oldHeader,r.newHeader=e.newHeader||t.newHeader)),r.hunks=[];for(var i=0,o=0,a=0,c=0;i<t.hunks.length||o<e.hunks.length;){var l=t.hunks[i]||{oldStart:1/0},u=e.hunks[o]||{oldStart:1/0};if(Kg(l,u))r.hunks.push(Gg(l,a)),i++,c+=l.newLines-l.oldLines;else if(Kg(u,l))r.hunks.push(Gg(u,c)),o++,a+=u.newLines-u.oldLines;else{var d={oldStart:Math.min(l.oldStart,u.oldStart),oldLines:0,newStart:Math.min(l.newStart+a,u.oldStart+c),newLines:0,lines:[]};P0(d,l.oldStart,l.lines,u.oldStart,u.lines),o++,i++,r.hunks.push(d)}}return r}s(Ay,"merge");function jg(t,e){if(typeof t=="string"){if(/^@@/m.test(t)||/^Index:/m.test(t))return ss(t)[0];if(!e)throw new Error("Must provide a base reference or pass in a patch");return Vg(void 0,void 0,e,t)}return t}s(jg,"loadPatch");function qg(t){return t.newFileName&&t.newFileName!==t.oldFileName}s(qg,"fileNameChanged");function bc(t,e,n){return e===n?e:(t.conflict=!0,{mine:e,theirs:n})}s(bc,"selectField");function Kg(t,e){return t.oldStart<e.oldStart&&t.oldStart+t.oldLines<e.oldStart}s(Kg,"hunkBefore");function Gg(t,e){return{oldStart:t.oldStart,oldLines:t.oldLines,newStart:t.newStart+e,newLines:t.newLines,lines:t.lines}}s(Gg,"cloneHunk");function P0(t,e,n,r,i){var o={offset:e,lines:n,index:0},a={offset:r,lines:i,index:0};for(Xg(t,o,a),Xg(t,a,o);o.index<o.lines.length&&a.index<a.lines.length;){var c=o.lines[o.index],l=a.lines[a.index];if((c[0]==="-"||c[0]==="+")&&(l[0]==="-"||l[0]==="+"))R0(t,o,a);else if(c[0]==="+"&&l[0]===" "){var u;(u=t.lines).push.apply(u,so(Vo(o)))}else if(l[0]==="+"&&c[0]===" "){var d;(d=t.lines).push.apply(d,so(Vo(a)))}else c[0]==="-"&&l[0]===" "?Qg(t,o,a):l[0]==="-"&&c[0]===" "?Qg(t,a,o,!0):c===l?(t.lines.push(c),o.index++,a.index++):Uu(t,Vo(o),Vo(a))}Jg(t,o),Jg(t,a),T0(t)}s(P0,"mergeLines");function R0(t,e,n){var r=Vo(e),i=Vo(n);if(Yg(r)&&Yg(i)){if(Ou(r,i)&&Zg(n,r,r.length-i.length)){var o;(o=t.lines).push.apply(o,so(r));return}else if(Ou(i,r)&&Zg(e,i,i.length-r.length)){var a;(a=t.lines).push.apply(a,so(i));return}}else if(D0(r,i)){var c;(c=t.lines).push.apply(c,so(r));return}Uu(t,r,i)}s(R0,"mutualChange");function Qg(t,e,n,r){var i=Vo(e),o=A0(n,i);if(o.merged){var a;(a=t.lines).push.apply(a,so(o.merged))}else Uu(t,r?o:i,r?i:o)}s(Qg,"removal");function Uu(t,e,n){t.conflict=!0,t.lines.push({conflict:!0,mine:e,theirs:n})}s(Uu,"conflict");function Xg(t,e,n){for(;e.offset<n.offset&&e.index<e.lines.length;){var r=e.lines[e.index++];t.lines.push(r),e.offset++}}s(Xg,"insertLeading");function Jg(t,e){for(;e.index<e.lines.length;){var n=e.lines[e.index++];t.lines.push(n)}}s(Jg,"insertTrailing");function Vo(t){for(var e=[],n=t.lines[t.index][0];t.index<t.lines.length;){var r=t.lines[t.index];if(n==="-"&&r[0]==="+"&&(n="+"),n===r[0])e.push(r),t.index++;else break}return e}s(Vo,"collectChange");function A0(t,e){for(var n=[],r=[],i=0,o=!1,a=!1;i<e.length&&t.index<t.lines.length;){var c=t.lines[t.index],l=e[i];if(l[0]==="+")break;if(o=o||c[0]!==" ",r.push(l),i++,c[0]==="+")for(a=!0;c[0]==="+";)n.push(c),c=t.lines[++t.index];l.substr(1)===c.substr(1)?(n.push(c),t.index++):a=!0}if((e[i]||"")[0]==="+"&&o&&(a=!0),a)return n;for(;i<e.length;)r.push(e[i++]);return{merged:r,changes:n}}s(A0,"collectContext");function Yg(t){return t.reduce(function(e,n){return e&&n[0]==="-"},!0)}s(Yg,"allRemoves");function Zg(t,e,n){for(var r=0;r<n;r++){var i=e[e.length-n+r].substr(1);if(t.lines[t.index+r]!==" "+i)return!1}return t.index+=n,!0}s(Zg,"skipRemoveSuperset");function Hu(t){var e=0,n=0;return t.forEach(function(r){if(typeof r!="string"){var i=Hu(r.mine),o=Hu(r.theirs);e!==void 0&&(i.oldLines===o.oldLines?e+=i.oldLines:e=void 0),n!==void 0&&(i.newLines===o.newLines?n+=i.newLines:n=void 0)}else n!==void 0&&(r[0]==="+"||r[0]===" ")&&n++,e!==void 0&&(r[0]==="-"||r[0]===" ")&&e++}),{oldLines:e,newLines:n}}s(Hu,"calcOldNewLineCount");function ky(t){for(var e=[],n,r,i=0;i<t.length;i++)n=t[i],n.added?r=1:n.removed?r=-1:r=0,e.push([r,n.value]);return e}s(ky,"convertChangesToDMP");function My(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];r.added?e.push("<ins>"):r.removed&&e.push("<del>"),e.push(k0(r.value)),r.added?e.push("</ins>"):r.removed&&e.push("</del>")}return e.join("")}s(My,"convertChangesToXML");function k0(t){var e=t;return e=e.replace(/&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/"/g,"&quot;"),e}s(k0,"escapeHTML");var ep=/[^a-zA-Z0-9]/,tp=/\s/,np=/[\r\n]/,M0=/\n\r?\n$/,F0=/^\r?\n\r?\n/,Ze;(function(t){t[t.DIFF_DELETE=-1]="DIFF_DELETE",t[t.DIFF_INSERT=1]="DIFF_INSERT",t[t.DIFF_EQUAL=0]="DIFF_EQUAL"})(Ze||(Ze={}));function L0(t,e){return t<e?t:e}s(L0,"min");function N0(t,e){return t>e?t:e}s(N0,"max");var Qr=Ft,cs=function(){function t(){this.diffs=[],this.start1=0,this.start2=0,this.length1=0,this.length2=0}return s(t,"PatchObject"),t.prototype.toString=function(){var e,n;this.length1===0?e=this.start1+",0":this.length1===1?e=this.start1+1:e=this.start1+1+","+this.length1,this.length2===0?n=this.start2+",0":this.length2===1?n=this.start2+1:n=this.start2+1+","+this.length2;for(var r=["@@ -"+e+" +"+n+` @@
`],i,o=0;o<this.diffs.length;o++){switch(this.diffs[o][0]){case Ze.DIFF_INSERT:i="+";break;case Ze.DIFF_DELETE:i="-";break;case Ze.DIFF_EQUAL:i=" ";break}r[o+1]=i+encodeURI(this.diffs[o][1])+`
`}return r.join("").replace(/%20/g," ")},t}(),O0=function(){function t(){this.diffTimeout=1,this.diffEditCost=4,this.matchThreshold=.5,this.matchDistance=1e3,this.patchDeleteThreshold=.5,this.patchMargin=4,this.matchMaxBits=32}return s(t,"DiffMatchPatch"),t.prototype.diff_main=function(e,n,r,i){typeof i=="undefined"&&(this.diffTimeout<=0?i=Number.MAX_VALUE:i=Date.now()+this.diffTimeout*1e3);var o=i;if(e==null||n==null)throw new Error("Null input. (diff_main)");if(e===n)return e?[[Ze.DIFF_EQUAL,e]]:[];typeof r=="undefined"&&(r=!0);var a=r,c=this.diff_commonPrefix(e,n),l=e.substring(0,c);e=e.substring(c),n=n.substring(c),c=this.diff_commonSuffix(e,n);var u=e.substring(e.length-c);e=e.substring(0,e.length-c),n=n.substring(0,n.length-c);var d=this.diff_compute_(e,n,a,o);return l&&d.unshift([Ze.DIFF_EQUAL,l]),u&&d.push([Ze.DIFF_EQUAL,u]),this.diff_cleanupMerge(d),d},t.prototype.diff_commonPrefix=function(e,n){if(!e||!n||e.charAt(0)!==n.charAt(0))return 0;for(var r=0,i=Qr.min(e.length,n.length),o=i,a=0;r<o;)e.substring(a,o)===n.substring(a,o)?(r=o,a=r):i=o,o=Math.floor((i-r)/2+r);return o},t.prototype.diff_commonSuffix=function(e,n){if(!e||!n||e.charAt(e.length-1)!==n.charAt(n.length-1))return 0;for(var r=0,i=Qr.min(e.length,n.length),o=i,a=0;r<o;)e.substring(e.length-o,e.length-a)===n.substring(n.length-o,n.length-a)?(r=o,a=r):i=o,o=Math.floor((i-r)/2+r);return o},t.prototype.diff_cleanupSemantic=function(e){for(var n=!1,r=[],i=0,o=null,a=0,c=0,l=0,u=0,d=0;a<e.length;)e[a][0]===Ze.DIFF_EQUAL?(r[i++]=a,c=u,l=d,u=0,d=0,o=e[a][1]):(e[a][0]===Ze.DIFF_INSERT?u+=e[a][1].length:d+=e[a][1].length,o&&o.length<=Qr.max(c,l)&&o.length<=Qr.max(u,d)&&(e.splice(r[i-1],0,[Ze.DIFF_DELETE,o]),e[r[i-1]+1][0]=Ze.DIFF_INSERT,i--,i--,a=i>0?r[i-1]:-1,c=0,l=0,u=0,d=0,o=null,n=!0)),a++;for(n&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),a=1;a<e.length;){if(e[a-1][0]===Ze.DIFF_DELETE&&e[a][0]===Ze.DIFF_INSERT){var h=e[a-1][1],g=e[a][1],p=this.diff_commonOverlap_(h,g),C=this.diff_commonOverlap_(g,h);p>=C?(p>=h.length/2||p>=g.length/2)&&(e.splice(a,0,[Ze.DIFF_EQUAL,g.substring(0,p)]),e[a-1][1]=h.substring(0,h.length-p),e[a+1][1]=g.substring(p),a++):(C>=h.length/2||C>=g.length/2)&&(e.splice(a,0,[Ze.DIFF_EQUAL,h.substring(0,C)]),e[a-1][0]=Ze.DIFF_INSERT,e[a-1][1]=g.substring(0,g.length-C),e[a+1][0]=Ze.DIFF_DELETE,e[a+1][1]=h.substring(C),a++),a++}a++}},t.prototype.diff_cleanupSemanticLossless=function(e){for(var n=1;n<e.length-1;){if(e[n-1][0]===Ze.DIFF_EQUAL&&e[n+1][0]===Ze.DIFF_EQUAL){var r=e[n-1][1],i=e[n][1],o=e[n+1][1],a=this.diff_commonSuffix(r,i);if(a){var c=i.substring(i.length-a);r=r.substring(0,r.length-a),i=c+i.substring(0,i.length-a),o=c+o}for(var l=r,u=i,d=o,h=this.diff_cleanupSemanticScore_(r,i)+this.diff_cleanupSemanticScore_(i,o);i.charAt(0)===o.charAt(0);){r+=i.charAt(0),i=i.substring(1)+o.charAt(0),o=o.substring(1);var g=this.diff_cleanupSemanticScore_(r,i)+this.diff_cleanupSemanticScore_(i,o);g>=h&&(h=g,l=r,u=i,d=o)}e[n-1][1]!==l&&(l?e[n-1][1]=l:(e.splice(n-1,1),n--),e[n][1]=u,d?e[n+1][1]=d:(e.splice(n+1,1),n--))}n++}},t.prototype.diff_cleanupEfficiency=function(e){for(var n=!1,r=[],i=0,o=null,a=0,c=!1,l=!1,u=!1,d=!1;a<e.length;)e[a][0]===Ze.DIFF_EQUAL?(e[a][1].length<this.diffEditCost&&(u||d)?(r[i++]=a,c=u,l=d,o=e[a][1]):(i=0,o=null),u=d=!1):(e[a][0]===Ze.DIFF_DELETE?d=!0:u=!0,o&&(c&&l&&u&&d||o.length<this.diffEditCost/2&&Number(c)+Number(l)+Number(u)+Number(d)===3)&&(e.splice(r[i-1],0,[Ze.DIFF_DELETE,o]),e[r[i-1]+1][0]=Ze.DIFF_INSERT,i--,o=null,c&&l?(u=d=!0,i=0):(i--,a=i>0?r[i-1]:-1,u=d=!1),n=!0)),a++;n&&this.diff_cleanupMerge(e)},t.prototype.diff_cleanupMerge=function(e){e.push([Ze.DIFF_EQUAL,""]);for(var n=0,r=0,i=0,o="",a="",c;n<e.length;)switch(e[n][0]){case Ze.DIFF_INSERT:i++,a+=e[n][1],n++;break;case Ze.DIFF_DELETE:r++,o+=e[n][1],n++;break;case Ze.DIFF_EQUAL:r+i>1?(r!==0&&i!==0&&(c=this.diff_commonPrefix(a,o),c!==0&&(n-r-i>0&&e[n-r-i-1][0]===Ze.DIFF_EQUAL?e[n-r-i-1][1]+=a.substring(0,c):(e.splice(0,0,[Ze.DIFF_EQUAL,a.substring(0,c)]),n++),a=a.substring(c),o=o.substring(c)),c=this.diff_commonSuffix(a,o),c!==0&&(e[n][1]=a.substring(a.length-c)+e[n][1],a=a.substring(0,a.length-c),o=o.substring(0,o.length-c))),n-=r+i,e.splice(n,r+i),o.length&&(e.splice(n,0,[Ze.DIFF_DELETE,o]),n++),a.length&&(e.splice(n,0,[Ze.DIFF_INSERT,a]),n++),n++):n!==0&&e[n-1][0]===Ze.DIFF_EQUAL?(e[n-1][1]+=e[n][1],e.splice(n,1)):n++,i=0,r=0,o="",a="";break}e[e.length-1][1]===""&&e.pop();var l=!1;for(n=1;n<e.length-1;)e[n-1][0]===Ze.DIFF_EQUAL&&e[n+1][0]===Ze.DIFF_EQUAL&&(e[n][1].substring(e[n][1].length-e[n-1][1].length)===e[n-1][1]?(e[n][1]=e[n-1][1]+e[n][1].substring(0,e[n][1].length-e[n-1][1].length),e[n+1][1]=e[n-1][1]+e[n+1][1],e.splice(n-1,1),l=!0):e[n][1].substring(0,e[n+1][1].length)===e[n+1][1]&&(e[n-1][1]+=e[n+1][1],e[n][1]=e[n][1].substring(e[n+1][1].length)+e[n+1][1],e.splice(n+1,1),l=!0)),n++;l&&this.diff_cleanupMerge(e)},t.prototype.diff_xIndex=function(e,n){var r=0,i=0,o=0,a=0,c;for(c=0;c<e.length&&(e[c][0]!==Ze.DIFF_INSERT&&(r+=e[c][1].length),e[c][0]!==Ze.DIFF_DELETE&&(i+=e[c][1].length),!(r>n));c++)o=r,a=i;return e.length!==c&&e[c][0]===Ze.DIFF_DELETE?a:a+(n-o)},t.prototype.diff_prettyHtml=function(e){for(var n=[],r=/&/g,i=/</g,o=/>/g,a=/\n/g,c=0;c<e.length;c++){var l=e[c][0],u=e[c][1],d=u.replace(r,"&amp;").replace(i,"&lt;").replace(o,"&gt;").replace(a,"&para;<br>");switch(l){case Ze.DIFF_INSERT:n[c]='<ins style="background:#e6ffe6;">'+d+"</ins>";break;case Ze.DIFF_DELETE:n[c]='<del style="background:#ffe6e6;">'+d+"</del>";break;case Ze.DIFF_EQUAL:n[c]="<span>"+d+"</span>";break}}return n.join("")},t.prototype.diff_text1=function(e){for(var n=[],r=0;r<e.length;r++)e[r][0]!==Ze.DIFF_INSERT&&(n[r]=e[r][1]);return n.join("")},t.prototype.diff_text2=function(e){for(var n=[],r=0;r<e.length;r++)e[r][0]!==Ze.DIFF_DELETE&&(n[r]=e[r][1]);return n.join("")},t.prototype.diff_levenshtein=function(e){for(var n=0,r=0,i=0,o=0;o<e.length;o++){var a=e[o][0],c=e[o][1];switch(a){case Ze.DIFF_INSERT:r+=c.length;break;case Ze.DIFF_DELETE:i+=c.length;break;case Ze.DIFF_EQUAL:n+=Qr.max(r,i),r=0,i=0;break}}return n+=Qr.max(r,i),n},t.prototype.diff_toDelta=function(e){for(var n=[],r=0;r<e.length;r++)switch(e[r][0]){case Ze.DIFF_INSERT:n[r]="+"+encodeURI(e[r][1]);break;case Ze.DIFF_DELETE:n[r]="-"+e[r][1].length;break;case Ze.DIFF_EQUAL:n[r]="="+e[r][1].length;break}return n.join("	").replace(/%20/g," ")},t.prototype.diff_fromDelta=function(e,n){for(var r=[],i=0,o=0,a=n.split(/\t/g),c=0;c<a.length;c++){var l=a[c].substring(1);switch(a[c].charAt(0)){case"+":try{r[i++]=[Ze.DIFF_INSERT,decodeURI(l)]}catch(h){throw new Error("Illegal escape in diff_fromDelta: "+l)}break;case"-":case"=":var u=parseInt(l,10);if(isNaN(u)||u<0)throw new Error("Invalid number in diff_fromDelta: "+l);var d=e.substring(o,o+=u);a[c].charAt(0)==="="?r[i++]=[Ze.DIFF_EQUAL,d]:r[i++]=[Ze.DIFF_DELETE,d];break;default:if(a[c])throw new Error("Invalid diff operation in diff_fromDelta: "+a[c])}}if(o!==e.length)throw new Error("Delta length ("+o+") does not equal source text length ("+e.length+")");return r},t.prototype.diff_linesToChars=function(e,n){var r=[],i={};r[0]="";var o=this.diff_linesToCharsMunge_(e,r,i,4e4),a=this.diff_linesToCharsMunge_(n,r,i,65535);return{chars1:o,chars2:a,lineArray:r}},t.prototype.diff_charsToLines=function(e,n){for(var r=0;r<e.length;r++){for(var i=e[r][1],o=[],a=0;a<i.length;a++)o[a]=n[i.charCodeAt(a)];e[r][1]=o.join("")}},t.prototype.match_main=function(e,n,r){if(e==null||n==null||r==null)throw new Error("Null input. (match_main)");return r=Qr.max(0,Qr.min(r,e.length)),e===n?0:e.length?e.substring(r,r+n.length)===n?r:this.match_bitap_(e,n,r):-1},t.prototype.patch_make=function(e,n,r){var i,o;if(typeof e=="string"&&typeof n=="string"&&typeof r=="undefined")i=e,o=this.diff_main(i,n,!0),o.length>2&&(this.diff_cleanupSemantic(o),this.diff_cleanupEfficiency(o));else if(e&&typeof e=="object"&&typeof n=="undefined"&&typeof r=="undefined")o=e,i=this.diff_text1(o);else if(typeof e=="string"&&n&&typeof n=="object"&&typeof r=="undefined")i=e,o=n;else if(typeof e=="string"&&typeof n=="string"&&r&&typeof r=="object")i=e,o=r;else throw new Error("Unknown call format to patch_make");if(o.length===0)return[];for(var a=[],c=new cs,l=0,u=0,d=0,h=i,g=i,p=0;p<o.length;p++){var C=o[p][0],v=o[p][1];switch(!l&&C!==Ze.DIFF_EQUAL&&(c.start1=u,c.start2=d),C){case Ze.DIFF_INSERT:c.diffs[l++]=o[p],c.length2+=v.length,g=g.substring(0,d)+v+g.substring(d);break;case Ze.DIFF_DELETE:c.length1+=v.length,c.diffs[l++]=o[p],g=g.substring(0,d)+g.substring(d+v.length);break;case Ze.DIFF_EQUAL:v.length<=2*this.patchMargin&&l&&o.length!==p+1?(c.diffs[l++]=o[p],c.length1+=v.length,c.length2+=v.length):v.length>=2*this.patchMargin&&l&&(this.patch_addContext_(c,h),a.push(c),c=new cs,l=0,h=g,u=d);break}C!==Ze.DIFF_INSERT&&(u+=v.length),C!==Ze.DIFF_DELETE&&(d+=v.length)}return l&&(this.patch_addContext_(c,h),a.push(c)),a},t.prototype.patch_deepCopy=function(e){for(var n=[],r=0;r<e.length;r++){for(var i=e[r],o=new cs,a=0;a<i.diffs.length;a++)o.diffs[a]=[i.diffs[a][0],i.diffs[a][1]];o.start1=i.start1,o.start2=i.start2,o.length1=i.length1,o.length2=i.length2,n[r]=o}return n},t.prototype.patch_apply=function(e,n){if(e.length===0)return[n,[]];e=this.patch_deepCopy(e);var r=this.patch_addPadding(e);n=r+n+r,this.patch_splitMax(e);for(var i=0,o=[],a=0;a<e.length;a++){var c=e[a].start2+i,l=this.diff_text1(e[a].diffs),u=void 0,d=-1;if(l.length>this.matchMaxBits?(u=this.match_main(n,l.substring(0,this.matchMaxBits),c),u!==-1&&(d=this.match_main(n,l.substring(l.length-this.matchMaxBits),c+l.length-this.matchMaxBits),(d===-1||u>=d)&&(u=-1))):u=this.match_main(n,l,c),u===-1)o[a]=!1,i-=e[a].length2-e[a].length1;else{o[a]=!0,i=u-c;var h=void 0;if(d===-1?h=n.substring(u,u+l.length):h=n.substring(u,d+this.matchMaxBits),l===h)n=n.substring(0,u)+this.diff_text2(e[a].diffs)+n.substring(u+l.length);else{var g=this.diff_main(l,h,!1);if(l.length>this.matchMaxBits&&this.diff_levenshtein(g)/l.length>this.patchDeleteThreshold)o[a]=!1;else{this.diff_cleanupSemanticLossless(g);for(var p=0,C=0,v=0;v<e[a].diffs.length;v++){var m=e[a].diffs[v];m[0]!==Ze.DIFF_EQUAL&&(C=this.diff_xIndex(g,p)),m[0]===Ze.DIFF_INSERT?n=n.substring(0,u+C)+m[1]+n.substring(u+C):m[0]===Ze.DIFF_DELETE&&(n=n.substring(0,u+C)+n.substring(u+this.diff_xIndex(g,p+m[1].length))),m[0]!==Ze.DIFF_DELETE&&(p+=m[1].length)}}}}}return n=n.substring(r.length,n.length-r.length),[n,o]},t.prototype.patch_addPadding=function(e){for(var n=this.patchMargin,r="",i=1;i<=n;i++)r+=String.fromCharCode(i);for(var i=0;i<e.length;i++)e[i].start1+=n,e[i].start2+=n;var o=e[0],a=o.diffs;if(a.length===0||a[0][0]!==Ze.DIFF_EQUAL)a.unshift([Ze.DIFF_EQUAL,r]),o.start1-=n,o.start2-=n,o.length1+=n,o.length2+=n;else if(n>a[0][1].length){var c=n-a[0][1].length;a[0][1]=r.substring(a[0][1].length)+a[0][1],o.start1-=c,o.start2-=c,o.length1+=c,o.length2+=c}if(o=e[e.length-1],a=o.diffs,a.length===0||a[a.length-1][0]!==Ze.DIFF_EQUAL)a.push([Ze.DIFF_EQUAL,r]),o.length1+=n,o.length2+=n;else if(n>a[a.length-1][1].length){var c=n-a[a.length-1][1].length;a[a.length-1][1]+=r.substring(0,c),o.length1+=c,o.length2+=c}return r},t.prototype.patch_splitMax=function(e){for(var n=this.matchMaxBits,r=0;r<e.length;r++)if(!(e[r].length1<=n)){var i=e[r];e.splice(r--,1);for(var o=i.start1,a=i.start2,c="";i.diffs.length!==0;){var l=new cs,u=!0;for(l.start1=o-c.length,l.start2=a-c.length,c!==""&&(l.length1=l.length2=c.length,l.diffs.push([Ze.DIFF_EQUAL,c]));i.diffs.length!==0&&l.length1<n-this.patchMargin;){var d=i.diffs[0][0],h=i.diffs[0][1];d===Ze.DIFF_INSERT?(l.length2+=h.length,a+=h.length,l.diffs.push(i.diffs.shift()),u=!1):d===Ze.DIFF_DELETE&&l.diffs.length===1&&l.diffs[0][0]===Ze.DIFF_EQUAL&&h.length>2*n?(l.length1+=h.length,o+=h.length,u=!1,l.diffs.push([d,h]),i.diffs.shift()):(h=h.substring(0,n-l.length1-this.patchMargin),l.length1+=h.length,o+=h.length,d===Ze.DIFF_EQUAL?(l.length2+=h.length,a+=h.length):u=!1,l.diffs.push([d,h]),h===i.diffs[0][1]?i.diffs.shift():i.diffs[0][1]=i.diffs[0][1].substring(h.length))}c=this.diff_text2(l.diffs),c=c.substring(c.length-this.patchMargin);var g=this.diff_text1(i.diffs).substring(0,this.patchMargin);g!==""&&(l.length1+=g.length,l.length2+=g.length,l.diffs.length!==0&&l.diffs[l.diffs.length-1][0]===Ze.DIFF_EQUAL?l.diffs[l.diffs.length-1][1]+=g:l.diffs.push([Ze.DIFF_EQUAL,g])),u||e.splice(++r,0,l)}}},t.prototype.patch_toText=function(e){for(var n=[],r=0;r<e.length;r++)n[r]=e[r];return n.join("")},t.prototype.patch_fromText=function(e){var n=[];if(!e)return n;for(var r=e.split(`
`),i=0,o=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;i<r.length;){var a=r[i].match(o);if(!a)throw new Error("Invalid patch string: "+r[i]);var c=new cs;n.push(c),c.start1=parseInt(a[1],10),a[2]===""?(c.start1--,c.length1=1):a[2]==="0"?c.length1=0:(c.start1--,c.length1=parseInt(a[2],10)),c.start2=parseInt(a[3],10),a[4]===""?(c.start2--,c.length2=1):a[4]==="0"?c.length2=0:(c.start2--,c.length2=parseInt(a[4],10)),i++;for(var l=void 0,u=void 0,d=void 0;i<r.length;){l=r[i].charAt(0),d=r[i].substring(1);try{u=decodeURI(d)}catch(h){throw new Error("Illegal escape in patch_fromText: "+d)}if(l==="-")c.diffs.push([Ze.DIFF_DELETE,u]);else if(l==="+")c.diffs.push([Ze.DIFF_INSERT,u]);else if(l===" ")c.diffs.push([Ze.DIFF_EQUAL,u]);else{if(l==="@")break;if(l!=="")throw new Error('Invalid patch mode "'+l+'" in: '+u)}i++}}return n},t.prototype.diff_compute_=function(e,n,r,i){var o;if(!e)return[[Ze.DIFF_INSERT,n]];if(!n)return[[Ze.DIFF_DELETE,e]];var a=e.length>n.length?e:n,c=e.length>n.length?n:e,l=a.indexOf(c);if(l!==-1)return o=[[Ze.DIFF_INSERT,a.substring(0,l)],[Ze.DIFF_EQUAL,c],[Ze.DIFF_INSERT,a.substring(l+c.length)]],e.length>n.length&&(o[0][0]=Ze.DIFF_DELETE,o[2][0]=Ze.DIFF_DELETE),o;if(c.length===1)return[[Ze.DIFF_DELETE,e],[Ze.DIFF_INSERT,n]];var u=this.diff_halfMatch_(e,n);if(u){var d=u[0],h=u[1],g=u[2],p=u[3],C=u[4],v=this.diff_main(d,g,r,i),m=this.diff_main(h,p,r,i);return v.concat([[Ze.DIFF_EQUAL,C]],m)}return r&&e.length>100&&n.length>100?this.diff_lineMode_(e,n,i):this.diff_bisect_(e,n,i)},t.prototype.diff_lineMode_=function(e,n,r){var i=this.diff_linesToChars(e,n);e=i.chars1,n=i.chars2;var o=i.lineArray,a=this.diff_main(e,n,!1,r);this.diff_charsToLines(a,o),this.diff_cleanupSemantic(a),a.push([Ze.DIFF_EQUAL,""]);for(var c=0,l=0,u=0,d="",h="";c<a.length;){switch(a[c][0]){case Ze.DIFF_INSERT:u++,h+=a[c][1];break;case Ze.DIFF_DELETE:l++,d+=a[c][1];break;case Ze.DIFF_EQUAL:if(l>=1&&u>=1){a.splice(c-l-u,l+u),c=c-l-u;for(var g=this.diff_main(d,h,!1,r),p=g.length-1;p>=0;p--)a.splice(c,0,g[p]);c=c+g.length}u=0,l=0,d="",h="";break}c++}return a.pop(),a},t.prototype.diff_bisect_=function(e,n,r){for(var i=e.length,o=n.length,a=Math.ceil((i+o)/2),c=a,l=2*a,u=new Array(l),d=new Array(l),h=0;h<l;h++)u[h]=-1,d[h]=-1;u[c+1]=0,d[c+1]=0;for(var g=i-o,p=g%2!=0,C=0,v=0,m=0,b=0,w=0;w<a&&!(Date.now()>r);w++){for(var P=-w+C;P<=w-v;P+=2){var F=c+P,A=void 0;P===-w||P!==w&&u[F-1]<u[F+1]?A=u[F+1]:A=u[F-1]+1;for(var Z=A-P;A<i&&Z<o&&e.charAt(A)===n.charAt(Z);)A++,Z++;if(u[F]=A,A>i)v+=2;else if(Z>o)C+=2;else if(p){var $e=c+g-P;if($e>=0&&$e<l&&d[$e]!==-1){var fe=i-d[$e];if(A>=fe)return this.diff_bisectSplit_(e,n,A,Z,r)}}}for(var It=-w+m;It<=w-b;It+=2){var $e=c+It,fe=void 0;It===-w||It!==w&&d[$e-1]<d[$e+1]?fe=d[$e+1]:fe=d[$e-1]+1;for(var kt=fe-It;fe<i&&kt<o&&e.charAt(i-fe-1)===n.charAt(o-kt-1);)fe++,kt++;if(d[$e]=fe,fe>i)b+=2;else if(kt>o)m+=2;else if(!p){var F=c+g-It;if(F>=0&&F<l&&u[F]!==-1){var A=u[F],Z=c+A-F;if(fe=i-fe,A>=fe)return this.diff_bisectSplit_(e,n,A,Z,r)}}}}return[[Ze.DIFF_DELETE,e],[Ze.DIFF_INSERT,n]]},t.prototype.diff_bisectSplit_=function(e,n,r,i,o){var a=e.substring(0,r),c=n.substring(0,i),l=e.substring(r),u=n.substring(i),d=this.diff_main(a,c,!1,o),h=this.diff_main(l,u,!1,o);return d.concat(h)},t.prototype.diff_linesToCharsMunge_=function(e,n,r,i){for(var o="",a=0,c=-1,l=n.length;c<e.length-1;){c=e.indexOf(`
`,a),c===-1&&(c=e.length-1);var u=e.substring(a,c+1);(r.hasOwnProperty?r.hasOwnProperty(u):r[u]!==void 0)?o+=String.fromCharCode(r[u]):(l===i&&(u=e.substring(a),c=e.length),o+=String.fromCharCode(l),r[u]=l,n[l++]=u),a=c+1}return o},t.prototype.diff_commonOverlap_=function(e,n){var r=e.length,i=n.length;if(r===0||i===0)return 0;r>i?e=e.substring(r-i):r<i&&(n=n.substring(0,r));var o=Qr.min(r,i);if(e===n)return o;for(var a=0,c=1;;){var l=e.substring(o-c),u=n.indexOf(l);if(u===-1)return a;c+=u,(u===0||e.substring(o-c)===n.substring(0,c))&&(a=c,c++)}},t.prototype.diff_halfMatch_=function(e,n){if(this.diffTimeout<=0)return null;var r=e.length>n.length?e:n,i=e.length>n.length?n:e;if(r.length<4||i.length*2<r.length)return null;var o=this.diff_halfMatchI_(r,i,Math.ceil(r.length/4)),a=this.diff_halfMatchI_(r,i,Math.ceil(r.length/2)),c;if(!o&&!a)return null;a?o?c=o[4].length>a[4].length?o:a:c=a:c=o;var l,u,d,h,g=c[4];return e.length>n.length?(l=c[0],u=c[1],d=c[2],h=c[3]):(d=c[0],h=c[1],l=c[2],u=c[3]),[l,u,d,h,g]},t.prototype.diff_halfMatchI_=function(e,n,r){for(var i=e.substring(r,r+Math.floor(e.length/4)),o="",a,c,l,u,d=n.indexOf(i,0);d!==-1;){var h=this.diff_commonPrefix(e.substring(r),n.substring(d)),g=this.diff_commonSuffix(e.substring(0,r),n.substring(0,d));o.length<g+h&&(o=n.substring(d-g,d)+n.substring(d,d+h),a=e.substring(0,r-g),c=e.substring(r+h),l=n.substring(0,d-g),u=n.substring(d+h)),d=n.indexOf(i,d+1)}return o.length*2>=e.length?[a,c,l,u,o]:null},t.prototype.diff_cleanupSemanticScore_=function(e,n){if(!e||!n)return 6;var r=e.charAt(e.length-1),i=n.charAt(0),o=r.match(ep),a=i.match(ep),c=o&&r.match(tp),l=a&&i.match(tp),u=c&&r.match(np),d=l&&i.match(np),h=u&&e.match(M0),g=d&&n.match(F0);return h||g?5:u||d?4:o&&!c&&l?3:c||l?2:o||a?1:0},t.prototype.match_bitap_=function(e,n,r){if(n.length>this.matchMaxBits)throw new Error("Pattern too long for this browser");var i=this.match_alphabet_(n),o=this.matchThreshold,a=e.indexOf(n,r);a!==-1&&(o=Qr.min(this.match_bitapScore_(0,a,n,r),o),a=e.lastIndexOf(n,r+n.length),a!==-1&&(o=Qr.min(this.match_bitapScore_(0,a,n,r),o)));var c=1<<n.length-1;a=-1;for(var l,u,d=n.length+e.length,h,g=0;g<n.length;g++){for(l=0,u=d;l<u;)this.match_bitapScore_(g,r+u,n,r)<=o?l=u:d=u,u=Math.floor((d-l)/2+l);d=u;var p=Qr.max(1,r-u+1),C=Qr.min(r+u,e.length)+n.length,v=Array(C+2);v[C+1]=(1<<g)-1;for(var m=C;m>=p;m--){var b=i[e.charAt(m-1)];if(g===0?v[m]=(v[m+1]<<1|1)&b:v[m]=(v[m+1]<<1|1)&b|((h[m+1]|h[m])<<1|1)|h[m+1],v[m]&c){var w=this.match_bitapScore_(g,m-1,n,r);if(w<=o)if(o=w,a=m-1,a>r)p=Qr.max(1,2*r-a);else break}}if(this.match_bitapScore_(g+1,r,n,r)>o)break;h=v}return a},t.prototype.match_bitapScore_=function(e,n,r,i){var o=e/r.length,a=Math.abs(i-n);return this.matchDistance?o+a/this.matchDistance:a?1:o},t.prototype.match_alphabet_=function(e){for(var n={},r=0;r<e.length;r++)n[e.charAt(r)]=0;for(var r=0;r<e.length;r++)n[e.charAt(r)]|=1<<e.length-r-1;return n},t.prototype.patch_addContext_=function(e,n){if(n.length!==0){if(e.start2==null)throw Error("patch not initialized");for(var r=n.substring(e.start2,e.start2+e.length1),i=0;n.indexOf(r)!==n.lastIndexOf(r)&&r.length<this.matchMaxBits-this.patchMargin-this.patchMargin;)i+=this.patchMargin,r=n.substring(e.start2-i,e.start2+e.length1+i);i+=this.patchMargin;var o=n.substring(e.start2-i,e.start2);o&&e.diffs.unshift([Ze.DIFF_EQUAL,o]);var a=n.substring(e.start2+e.length1,e.start2+e.length1+i);a&&e.diffs.push([Ze.DIFF_EQUAL,a]),e.start1-=o.length,e.start2-=o.length,e.length1+=o.length+a.length,e.length2+=o.length+a.length}},t}();function Bu(t,e){let n={};for(let o=0;o<e.length;o++){const a=e[o];n[a]?n[a].push(o):n[a]=[o]}let i=[{buffer1index:-1,buffer2index:-1,chain:null}];for(let o=0;o<t.length;o++){const a=t[o],c=n[a]||[];let l=0,u=i[0];for(let d=0;d<c.length;d++){const h=c[d];let g;for(g=l;g<i.length&&!(i[g].buffer2index<h&&(g===i.length-1||i[g+1].buffer2index>h));g++);if(g<i.length){const p={buffer1index:o,buffer2index:h,chain:i[g]};if(l===i.length?i.push(u):i[l]=u,l=g+1,u=p,l===i.length)break}}i[l]=u}return i[i.length-1]}s(Bu,"LCS");function U0(t,e){const n=Bu(t,e);let r=[],i=t.length,o=e.length,a={common:[]};function c(){a.common.length&&(a.common.reverse(),r.push(a),a={common:[]})}s(c,"processCommon");for(let l=n;l!==null;l=l.chain){let u={buffer1:[],buffer2:[]};for(;--i>l.buffer1index;)u.buffer1.push(t[i]);for(;--o>l.buffer2index;)u.buffer2.push(e[o]);(u.buffer1.length||u.buffer2.length)&&(c(),u.buffer1.reverse(),u.buffer2.reverse(),r.push(u)),i>=0&&a.common.push(t[i])}return c(),r.reverse(),r}s(U0,"diffComm");function rp(t,e){const n=Bu(t,e);let r=[],i=t.length,o=e.length;for(let a=n;a!==null;a=a.chain){const c=i-a.buffer1index-1,l=o-a.buffer2index-1;i=a.buffer1index,o=a.buffer2index,(c||l)&&r.push({buffer1:[i+1,c],buffer1Content:t.slice(i+1,i+1+c),buffer2:[o+1,l],buffer2Content:e.slice(o+1,o+1+l)})}return r.reverse(),r}s(rp,"diffIndices");function Fy(t,e){const n=Bu(t,e);let r=[],i=t.length,o=e.length;function a(c,l,u){let d=[];for(let h=0;h<u;h++)d.push(c[l+h]);return{offset:l,length:u,chunk:d}}s(a,"chunkDescription");for(let c=n;c!==null;c=c.chain){const l=i-c.buffer1index-1,u=o-c.buffer2index-1;i=c.buffer1index,o=c.buffer2index,(l||u)&&r.push({buffer1:a(t,c.buffer1index+1,l),buffer2:a(e,c.buffer2index+1,u)})}return r.reverse(),r}s(Fy,"diffPatch");function H0(t,e,n){let r=[];function i(l,u){r.push({ab:u,oStart:l.buffer1[0],oLength:l.buffer1[1],abStart:l.buffer2[0],abLength:l.buffer2[1]})}s(i,"addHunk"),rp(e,t).forEach(l=>i(l,"a")),rp(e,n).forEach(l=>i(l,"b")),r.sort((l,u)=>l.oStart-u.oStart);let o=[],a=0;function c(l){l>a&&(o.push({stable:!0,buffer:"o",bufferStart:a,bufferLength:l-a,bufferContent:e.slice(a,l)}),a=l)}for(s(c,"advanceTo");r.length;){let l=r.shift(),u=l.oStart,d=l.oStart+l.oLength,h=[l];for(c(u);r.length;){const g=r[0],p=g.oStart;if(p>d)break;d=Math.max(d,p+g.oLength),h.push(r.shift())}if(h.length===1){if(l.abLength>0){const g=l.ab==="a"?t:n;o.push({stable:!0,buffer:l.ab,bufferStart:l.abStart,bufferLength:l.abLength,bufferContent:g.slice(l.abStart,l.abStart+l.abLength)})}}else{let g={a:[t.length,-1,e.length,-1],b:[n.length,-1,e.length,-1]};for(;h.length;){l=h.shift();const w=l.oStart,P=w+l.oLength,F=l.abStart,A=F+l.abLength;let Z=g[l.ab];Z[0]=Math.min(F,Z[0]),Z[1]=Math.max(A,Z[1]),Z[2]=Math.min(w,Z[2]),Z[3]=Math.max(P,Z[3])}const p=g.a[0]+(u-g.a[2]),C=g.a[1]+(d-g.a[3]),v=g.b[0]+(u-g.b[2]),m=g.b[1]+(d-g.b[3]);let b={stable:!1,aStart:p,aLength:C-p,aContent:t.slice(p,C),oStart:u,oLength:d-u,oContent:e.slice(u,d),bStart:v,bLength:m-v,bContent:n.slice(v,m)};o.push(b)}a=d}return c(e.length),o}s(H0,"diff3MergeRegions");function Wu(t,e,n,r){r=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/},r);const o=typeof t=="string",a=typeof e=="string",c=typeof n=="string";o&&(t=t.split(r.stringSeparator)),a&&(e=e.split(r.stringSeparator)),c&&(n=n.split(r.stringSeparator));let l=[];const u=H0(t,e,n);let d=[];function h(){d.length&&l.push({ok:d}),d=[]}s(h,"flushOk");function g(p,C){if(p.length!==C.length)return!1;for(let v=0;v<p.length;v++)if(p[v]!==C[v])return!1;return!0}return s(g,"isFalseConflict"),u.forEach(p=>{p.stable?d.push(...p.bufferContent):r.excludeFalseConflicts&&g(p.aContent,p.bContent)?d.push(...p.aContent):(h(),l.push({conflict:{a:p.aContent,aIndex:p.aStart,o:p.oContent,oIndex:p.oStart,b:p.bContent,bIndex:p.bStart}}))}),h(),l}s(Wu,"diff3Merge");function Ly(t,e,n,r){r=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/,label:{}},r);const o=Wu(t,e,n,r);let a=!1,c=[];return o.forEach(l=>{l.ok?c=c.concat(l.ok):l.conflict&&(a=!0,c.push(`<<<<<<<${r.label.a?` ${r.label.a}`:""}`),c=c.concat(l.conflict.a),c.push(`|||||||${r.label.o?` ${r.label.o}`:""}`),c=c.concat(l.conflict.o),c.push("======="),c=c.concat(l.conflict.b),c.push(`>>>>>>>${r.label.b?` ${r.label.b}`:""}`))}),{conflict:a,result:c}}s(Ly,"mergeDiff3");function B0(t,e,n,r){r=Object.assign({excludeFalseConflicts:!0,stringSeparator:/\s+/},r);const o=Wu(t,e,n,r);let a=!1,c=[];for(let l=0;l<o.length;l++){const u=o[l];u.ok?c=c.concat(u.ok):(a=!0,c=c.concat([`
<<<<<<<<<
`],u.conflict.a,[`
=========
`],u.conflict.b,[`
>>>>>>>>>
`]))}return{conflict:a,result:c}}s(B0,"node_diff3_merge");function Ny(t,e,n,r){r=Object.assign({excludeFalseConflicts:!1,stringSeparator:/\s+/},r);const o=Wu(t,e,n,r);let a=!1,c=[];for(let l=0;l<o.length;l++){const u=o[l];if(u.ok)c=c.concat(u.ok);else{const d=U0(u.conflict.a,u.conflict.b);for(let h=0;h<d.length;h++){let g=d[h];g.common?c=c.concat(g.common):(a=!0,c=c.concat([`
<<<<<<<<<
`],g.buffer1,[`
=========
`],g.buffer2,[`
>>>>>>>>>
`]))}}}return{conflict:a,result:c}}s(Ny,"mergeDigIn");function Oy(t,e){let n=[],r=0;function i(o){for(;r<o;)n.push(t[r]),r++}s(i,"advanceTo");for(let o=0;o<e.length;o++){let a=e[o];i(a.buffer1.offset);for(let c=0;c<a.buffer2.chunk.length;c++)n.push(a.buffer2.chunk[c]);r+=a.buffer1.length}return i(t.length),n}s(Oy,"patch");function Uy(t){return t.map(e=>({buffer1:{offset:e.buffer1.offset,length:e.buffer1.length},buffer2:{chunk:e.buffer2.chunk}}))}s(Uy,"stripPatch");function Hy(t){return t.map(e=>({buffer1:e.buffer2,buffer2:e.buffer1}))}s(Hy,"invertPatch");const $u=new O0;$u.diffTimeout=0;function ip(t,e,n){return mt.get("experimental.useDiffMatchPatch")===!0?$u.patch_toText($u.patch_make(e,n)):I0(t,e,n)}s(ip,"diffs_createPatch");function op(t,e,n,r){const i=`diff --git a/${t} b/${t}`;switch(r){case"modify":return ip(t,e,n);case"add":{let o;!n.endsWith(`
`)&&!n.endsWith(`\r
`)?o=`
\\ No newline at end of file`:o="";const a=/\r?\n/g,c=n.split(a),l=n.match(a)||[],u=c.length,d=[];for(let h=0;h<u;h+=1)(h<c.length-1||h===c.length-1&&c[h]!=="")&&d.push("+"),d.push(c[h]),h<l.length&&d.push(l[h]);return n=d.join(""),`${i}
new file mode 100644
--- /dev/null
+++ b/${t}
@@ -0,0 +1,${u} @@
${n}${o}`}case"delete":{let o=0;return e=e.replace(/\r?\n/g,a=>(o++,`${a}-`)),`${i}
deleted file mode 100644
--- a/${t}
+++ /dev/null
@@ -1,${o} +0,0 @@
-${e}`}}}s(op,"createPatch2");function ap(t,e,n){return zg(t,e,n)}s(ap,"diffs_applyPatch");function W0(t,e){const n=[];for(const r of ss(t,e))n.push({...r,oldFileName:r.newFileName,oldHeader:r.newHeader,newFileName:r.oldFileName,newHeader:r.oldHeader,hunks:r.hunks.map(i=>({...i,oldLines:i.newLines,oldStart:i.newStart,newLines:i.oldLines,newStart:i.oldStart,lines:i.lines.map(o=>o[0]==="-"?`+${o.slice(1)}`:o[0]==="+"?`-${o.slice(1)}`:o)}))}),n.push(r);return n}s(W0,"reversePatch");function sp(t,e,n,r){let i=`
`;const o=t.match(/(?:\r?\n)/g);if(o!==null&&o.length!==0){const u=o.filter(d=>d===`\r
`).length;i=u>o.length-u?`\r
`:`
`}const a=B0(t,e,n,{excludeFalseConflicts:!0,stringSeparator:/\r?\n/}),c=a.result;let l=a.conflict;for(let u=0;u<c.length;u+=1)c[u]===`
<<<<<<<<<
`?c[u]="<<<<<<< HEAD":c[u]===`
=========
`?c[u]="=======":c[u]===`
>>>>>>>>>
`&&(c[u]=`>>>>>>> ${r}`);return{conflicts:l,mergedContent:c.join(i)}}s(sp,"diffs_merge");var $0=Object.defineProperty,z0=Object.getOwnPropertyDescriptor,V0=s((t,e,n,r)=>{for(var i=r>1?void 0:r?z0(e,n):e,o=t.length-1,a;o>=0;o--)(a=t[o])&&(i=(r?a(e,n,i):a(i))||i);return r&&i&&$0(e,n,i),i},"changeStore_decorateClass");const ar=de.loadMessageBundle(),j0=f.FileSystemError.FileNotFound().code,cp=`===================================================================
`,qi=new TextDecoder,q0=new TextEncoder;function K0(t){return t&&"type"in t&&"uri"in t&&"uri"in t&&"fileType"in t&&"revision"in t&&"timestamp"in t}s(K0,"isOperation");function _c(t,e,n){return{type:t.type,rootUri:e,uri:n!=null?n:t.uri}}s(_c,"toEvent");const ls=s(class{constructor(t,e,n,r,i,o){this.providerService=t,this.storageService=e,this.fileStorageService=n,this.telemetryService=r,this.workspaceId=i,this._onDidChange=new f.EventEmitter,this.cache=new Map,this.lock=new $h,this.scopedStores=new Map,o===void 0&&(this.disposable=f.Disposable.from(this.providerService.onDidRefresh(()=>this.cache.clear())))}get onDidChange(){return this._onDidChange.event}dispose(){var t;(t=this.disposable)==null||t.dispose()}async exportDebugInfo(t){var e;async function n(r){const i=await f.workspace.openTextDocument({language:"json",content:`ChangeStore Operations for ${r.toString(!0)}

${this.toStorage(await this.getWorkingOperations(r))}`});return void f.window.showTextDocument(i)}if(s(n,"exportCore"),t===void 0)for(const r of(e=f.workspace.workspaceFolders)!=null?e:[])await n.call(this,r.uri);else return n.call(this,t)}async getWorkspacesWithChanges(){var t;const e=new Ln("ChangeStore.getWorkspacesWithChanges()");try{const n=[];for(const r of(t=f.workspace.workspaceFolders)!=null?t:[])r.uri.scheme===k.scheme&&await this.hasChanges(r.uri)&&n.push(r.uri);return n.length>0?n:void 0}finally{e.stop()}}async acceptAll(t,e){const n=`ChangeStore.acceptAll(${t.toString()}, ${e==null?void 0:e.staged})`;ce.log(n);const r=[];await this.lock.synchronizeWrite(R(t),async()=>{const i=await this.getWorkingOperations(t),o=[];let a=[];const c=(e==null?void 0:e.staged)&&!(e.staged==="auto"&&!i.some(l=>l.staged));for(const l of i){if(c&&!l.staged){a.push(l);continue}l.fileType===f.FileType.File&&await this.discardWorkingContent(t,l.uri);let u;if(l.type===I.Created&&l.fileType===f.FileType.Directory&&(i.some(d=>j(d.uri,l.uri))||(u={type:I.Deleted,rootUri:t,uri:l.uri})),r.push(u!=null?u:_c(l,t)),l.type===I.Created){let d=l.uri;for(;;){const{parent:h}=this.findParent(d,i,g=>g.type===I.Created);if(h){o.push(h),d=h.uri;continue}break}}}a.length>0&&o.length>0&&(a=a.filter(l=>o.includes(l)?(r.push(_c(l,t)),!1):!0)),await this.saveWorkingOperations(t,a)},n),r.length!==0&&this._onDidChange.fire(r)}async discard(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=`ChangeStore.discard(${t.toString()})`;ce.log(n);const r=[];await this.lock.synchronizeWrite(R(e),async()=>this.discardCore(e,t,r),n),r.length!==0&&this._onDidChange.fire(r)}async discardCore(t,e,n){ce.debug(`ChangeStore.discardCore(${e.toString()})`);let r=await this.getWorkingOperations(t);if(r.length===0)return;const i=V(e),o=r.findIndex(l=>V(l.uri)===i);if(o===-1)return;const[a]=r.splice(o,1);let c;switch(a.type){case I.Created:c=I.Deleted;break;case I.Deleted:c=I.Created;break;default:c=a.type;break}if(n.push({type:c,rootUri:t,uri:e}),a.type===I.Created){let l=a.uri;for(;;){const{parent:u,parentIndex:d}=this.findNewParentWithOnlyChild(l,r);if(u){r.splice(d,1),n.push({type:I.Deleted,rootUri:t,uri:u.uri}),l=u.uri;continue}break}}else if(a.type===I.Deleted){let l=a.uri;const u=this.findDeletedParents(l,r);let d=[...r];u.forEach(({parent:h,parentIndex:g})=>{d[g]=void 0,n.push({type:I.Created,rootUri:t,uri:h.uri})}),r=d.filter(h=>h!==void 0)}await this.saveWorkingOperations(t,r),a.fileType===f.FileType.File&&await this.discardWorkingContent(t,e)}async discardAll(t,e){const n=this.getUriScope(t);if(n)return this.getScopedChangeStore(n).discardAll(t,e);const r=`ChangeStore.discardAll(${t.toString()}, ${e==null?void 0:e.staged})`;ce.log(r);const i=[];await this.lock.synchronizeWrite(R(t),async()=>{const o=await this.getWorkingOperations(t),a=[];let c=[];const l=(e==null?void 0:e.staged)&&!(e.staged==="auto"&&!o.some(u=>u.staged));for(const u of o){if(l&&!u.staged){c.push(u);continue}u.fileType===f.FileType.File&&await this.discardWorkingContent(t,u.uri);let d;switch(u.type){case I.Created:d=I.Deleted;break;case I.Deleted:d=I.Created;break;default:d=u.type;break}if(i.push({type:d,rootUri:t,uri:u.uri}),u.type===I.Created){let h=u.uri;for(;;){const{parent:g}=this.findNewParentWithOnlyChild(h,o);if(g){a.push(g),h=g.uri;continue}break}}}c.length>0&&a.length>0&&(c=c.filter(u=>a.includes(u)?(i.push({type:I.Deleted,rootUri:t,uri:u.uri}),!1):!0)),await this.saveWorkingOperations(t,c)},r),i.length!==0&&this._onDidChange.fire(i)}async stage(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=`ChangeStore.stage(${t.toString()})`;ce.log(n);const r=[];await this.lock.synchronizeWrite(R(e),async()=>{const{operation:i,index:o}=await this.getWorkingOperation(t,e);i!==void 0&&await this.stageCore(e,t,i,r,o)},n),r.length!==0&&this._onDidChange.fire(r)}async stageAll(t){const e=`ChangeStore.stageAll(${t.toString()})`;ce.log(e);const n=[];await this.lock.synchronizeWrite(R(t),async()=>{const r=(await this.getWorkingOperations(t)).filter(i=>!i.staged);if(r.length!==0)for(const i of r){const{index:o}=await this.getWorkingOperation(i.uri,t);if(!await this.stageCore(t,i.uri,i,n,o))return}},e),n.length!==0&&this._onDidChange.fire(n)}async stageCore(t,e,n,r,i){if(n.conflicts){if(!n.conflicts.status.includes(I.Deleted)){const a=ar("yes","Yes");if(await f.window.showWarningMessage(ar("stage with merge conflicts","Are you sure you want to stage {0} with merge conflicts?",re(e)),{modal:!0},a)!==a)return!1}const[,o]=n.conflicts.status;switch(o){case I.Changed:switch(n.type){case I.Created:return!1;case I.Changed:return await this.spliceOperation(e,i,{...n,conflicts:void 0,staged:!0,timestamp:Date.now()},r),!0;case I.Deleted:const a=ar("keep theirs","Keep Their Version"),c=ar("delete","Delete File"),l=await f.window.showInformationMessage(ar("deleted by us",`File '{0}' was deleted by us and modified by them.

What would you like to do?`,re(e)),{modal:!0},a,c);return l===a?(await this.discardCore(t,e,r),!0):l===c?(await this.spliceOperation(e,i,{...n,type:I.Deleted,size:void 0,hash:void 0,originalHash:void 0,conflicts:void 0,staged:!0,timestamp:Date.now()},r),!0):!1}case I.Created:switch(n.type){case I.Changed:case I.Deleted:return!1;case I.Created:return await this.spliceOperation(e,i,{...n,type:I.Changed,conflicts:void 0,size:n.size,hash:n.hash,originalHash:n.originalHash,staged:!0,timestamp:Date.now()},r),!0}case I.Deleted:switch(n.type){case I.Created:case I.Changed:{const a=ar("keep ours","Keep Our Version"),c=ar("delete","Delete File"),l=await f.window.showInformationMessage(ar("deleted by them",`File '{0}' was deleted by them and modified by us.

What would you like to do?`,re(e)),{modal:!0},a,c);return l===a?(await this.spliceOperation(e,i,{...n,type:I.Created,originalHash:void 0,conflicts:void 0,staged:!0,timestamp:Date.now()},r),!0):l===c?(await this.discardCore(t,e,r),!0):!1}case I.Deleted:return await this.discardCore(t,e,r),!0}}}return await this.spliceOperation(e,i,{...n,staged:!0,conflicts:void 0,timestamp:Date.now()},r),!0}async unstage(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=`ChangeStore.unstage(${t.toString()})`;ce.log(n);const r=[];await this.lock.synchronizeWrite(R(e),async()=>{const{operation:i,index:o}=await this.getWorkingOperation(t,e);i!==void 0&&await this.spliceOperation(t,o,{...i,staged:!1,timestamp:Date.now()},r)},n),r.length!==0&&this._onDidChange.fire(r)}async unstageAll(t){const e=`ChangeStore.unstageAll(${t.toString()})`;ce.log(e);const n=[];await this.lock.synchronizeWrite(R(t),async()=>{const r=(await this.getWorkingOperations(t)).map(i=>({...i,staged:!1,timestamp:Date.now()}));r.length!==0&&(await this.saveWorkingOperations(t,r),n.push(...r.map(i=>_c(i,t))))},e),n.length!==0&&this._onDidChange.fire(n)}async hasChanges(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).hasChanges(t);const n=R(t),r=this.cache.get(n);return r!==void 0?r.length!==0:this.lock.synchronizeRead(n,async()=>(await this.getWorkingOperations(t)).length!==0,`ChangeStore.hasChanges(${t.toString()})`)}maybeHasChanges(t,e){const n=this.getUriScope(t);if(n)return this.getScopedChangeStore(n).maybeHasChanges(t,e);const r=R(t),i=this.cache.get(r);if(i===void 0)return;if(i.length===0)return!1;if(e===void 0)return!0;const o=V(e);return i.some(a=>V(a.uri)===o)}async hasMergeConflicts(t){return this.lock.synchronizeRead(R(t),async()=>(await this.getWorkingOperations(t)).some(e=>e.conflicts!==void 0),`ChangeStore.hasMergeConflicts(${t.toString()})`)}async hasStagedChanges(t){return this.lock.synchronizeRead(R(t),async()=>(await this.getWorkingOperations(t)).some(e=>e.staged&&e.conflicts===void 0),`ChangeStore.hasStagedChanges(${t.toString()})`)}async hasWorkingChanges(t){return this.lock.synchronizeRead(R(t),async()=>(await this.getWorkingOperations(t)).some(e=>!e.staged&&e.conflicts===void 0),`ChangeStore.hasWorkingChanges(${t.toString()})`)}async getChange(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).getChange(t);const n=this.providerService.getVirtualRootUri(t);if(n!==void 0)return this.lock.synchronizeRead(R(n),async()=>{const{operation:r}=await this.getWorkingOperation(t,n);return r},`ChangeStore.getChange(${t.toString()})`)}async getChanges(t,e){const n=this.getUriScope(t);return n?this.getScopedChangeStore(n).getChanges(t,e):this.lock.synchronizeRead(R(t),async()=>{let r=await this.getWorkingOperations(t);if((e==null?void 0:e.excludeConflicts)||(e==null?void 0:e.predicate)){const{excludeConflicts:i,predicate:o}=e;r=r.filter(a=>{var c;return(!i||a.conflicts===void 0)&&((c=o==null?void 0:o(a))!=null?c:!0)})}return r},`ChangeStore.getChanges(${t.toString()})`)}async getGroupedChanges(t,e){const n=this.getUriScope(t);return n?this.getScopedChangeStore(n).getGroupedChanges(t,e):this.lock.synchronizeRead(R(t),async()=>{var r,i;const o=await this.getWorkingOperations(t),a={conflicts:[],staged:[],working:[]};for(const c of o)!((i=(r=e==null?void 0:e.predicate)==null?void 0:r.call(e,c))!=null?i:!0)||(c.conflicts?a.conflicts.push(c):c.staged?a.staged.push(c):a.working.push(c));return a},`ChangeStore.getChangesByType(${t.toString()})`)}async getContent(t){const e=this.providerService.getVirtualRootUri(t);if(e===void 0)throw new Error(`Unable to find content for ${t.toString()}; Repository not found`);const n=R(e),r=this.cache.get(n);if((r==null?void 0:r.length)===0)throw new Error(`Unable to find content for ${t.toString()}`);return this.lock.synchronizeRead(n,async()=>{const i=qi.decode(await this.getWorkingContent(e,t));if(i!==void 0)return i;throw new Error(`Unable to find content for ${t.toString()}`)},`ChangeStore.getContent(${t.toString()}}`)}async getMergeConflicts(t,e){return this.lock.synchronizeRead(R(t),async()=>(await this.getWorkingOperations(t)).filter(r=>{var i,o;return r.conflicts!==void 0&&((o=(i=e==null?void 0:e.predicate)==null?void 0:i.call(e,r))!=null?o:!0)}),`ChangeStore.getMergeConflicts(${t.toString()})`)}async getStagedChanges(t,e){return this.lock.synchronizeRead(R(t),async()=>(await this.getWorkingOperations(t)).filter(r=>{var i,o;return r.staged&&r.conflicts===void 0&&((o=(i=e==null?void 0:e.predicate)==null?void 0:i.call(e,r))!=null?o:!0)}),`ChangeStore.getStagedChanges(${t.toString()})`)}async getWorkingChanges(t,e){return this.lock.synchronizeRead(R(t),async()=>(await this.getWorkingOperations(t)).filter(r=>{var i,o;return!r.staged&&r.conflicts===void 0&&((o=(i=e==null?void 0:e.predicate)==null?void 0:i.call(e,r))!=null?o:!0)}),`ChangeStore.getWorkingChanges(${t.toString()})`)}async applyChangeset(t,e,n,r){var i;let o;K0(n)?o=n:r=r!=null?r:n,ce.log(`ChangeStore.applyChangeset${t.toString()}`,e.workspaceId,e.uri,o==null?void 0:o.uri,r==null?void 0:r.save);const a=this.getScopedChangeStore(e.workspaceId),c=(i=e.patch)!=null?i:await a.createPatch(e.uri,o==null?void 0:o.uri);await this.applyPatchCore(t,c,{...r,getIncomingContent:async l=>{const u=this.getScopedUri(this.providerService.createRelativeVirtualUri(e.uri,l),e.workspaceId);return qi.decode(await f.workspace.fs.readFile(u))},merge:async(l,u,d)=>{try{const h=k.getProviderUri(l),g=qi.decode(await f.workspace.fs.readFile(h)),p=this.getScopedUri(this.providerService.createRelativeVirtualUri(e.uri,u),e.workspaceId),C=qi.decode(await f.workspace.fs.readFile(p)),v=await this.providerService.getMetadata(p);return{...sp(d,g,C,v.HEAD.sha),baseUri:h,incomingUri:p}}catch(h){throw new Error(`Unable to apply patch to ${u}: ${String(h)}`)}}})}async applyPatch(t,e,n){if(ce.log(`ChangeStore.applyPatch(${t.toString()})`,n==null?void 0:n.save),!e.startsWith("diff --"))throw new Error("Invalid patch");return this.applyPatchCore(t,e,n)}async applyPatchCore(t,e,n={}){const r=`ChangeStore.applyPatchCore(${t.toString()})`;ce.debug(r,n==null?void 0:n.save);const i=new f.WorkspaceEdit,o=[],a=new Map;async function c(g){var p;const C=R(g),v=f.workspace.textDocuments.find(m=>R(m.uri)===C);return(p=v==null?void 0:v.getText())!=null?p:qi.decode(await f.workspace.fs.readFile(g))}s(c,"getContent");async function l(g){try{const p=await f.workspace.fs.stat(g);return Boolean(p)}catch{return!1}}s(l,"exists");async function u(g,p,C){let v=ap("",C,{fuzzFactor:0});if(v===!1){if(!n.getIncomingContent)throw new Error(`Unable to apply patch to ${p}`);v=await n.getIncomingContent(p)}i.createFile(g,{overwrite:!0}),i.replace(g,new f.Range(0,0,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),v)}s(u,"applyCreate");async function d(g,p,C,v){const m=await c(g);let b=ap(m,C,{fuzzFactor:1});if(b===!1){if(n.merge===void 0)throw new Error(`Unable to apply patch to ${p}; Resulted in conflicts`);const w={title:ar("apply patch failed prompt confirm","Merge")},P={title:ar("apply patch failed prompt cancel","Skip File"),isCloseAffordance:!0};if(await f.window.showWarningMessage(ar("apply patch failed prompt",`Unable to apply changes to '{0}'.

Do you want to retry by merging the files?`,p),{modal:!0},w,P)!==w)return;const A=await n.merge(g,p,m);b=A.mergedContent,A.conflicts&&a.set(R(g),{type:v,baseUri:A.baseUri,incomingUri:A.incomingUri})}i.replace(g,new f.Range(0,0,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),b)}s(d,"applyModification");const h=(n==null?void 0:n.reverse)?W0(e,{}):ss(e,{});for(const g of h)if(g.oldFileName==="/dev/null"){if(!g.newFileName)continue;const p=g.newFileName.startsWith("b/")?g.newFileName.substr(2):g.newFileName,C=this.providerService.createRelativeVirtualUri(t,p);o.push(R(C)),!await l(C)?await u(C,p,g):await d(C,p,g,I.Created)}else if(g.newFileName==="/dev/null"){if(!g.oldFileName)continue;const p=g.oldFileName.startsWith("a/")?g.oldFileName.substr(2):g.oldFileName,C=this.providerService.createRelativeVirtualUri(t,p);await l(C)&&i.deleteFile(C)}else if(g.oldFileName===g.newFileName){if(!g.newFileName)continue;const p=this.providerService.createRelativeVirtualUri(t,g.newFileName);o.push(R(p)),!await l(p)?await u(p,g.newFileName,g):await d(p,g.newFileName,g,I.Changed)}else throw new Error(`Unable to apply patch to ${g.oldFileName}; Renames aren't currently supported`);if(await f.workspace.applyEdit(i),n.save&&o.length)for(const g of o){const p=f.workspace.textDocuments.find(C=>R(C.uri)===g);await(p==null?void 0:p.save())}a.size&&setTimeout(async()=>{const g=[];await this.lock.synchronizeWrite(R(t),async()=>{const p=await this.getWorkingOperations(t);if(p.length===0)return;let C=-1;for(const v of p){C++;const m=a.get(R(v.uri));m!==void 0&&await this.spliceOperation(v.uri,C,{...v,conflicts:{baseUri:m.baseUri,incomingUri:m.incomingUri,status:[v.type,m.type]},timestamp:Date.now()},g)}},r),g.length!==0&&this._onDidChange.fire(g)},0)}async createChangeset(t){ce.log(`ChangeStore.createChangeset${t.toString()})`);const e=await this.createPatch(t);return e?{workspaceId:this.workspaceId,uri:t,patch:e}:void 0}async createPatch(t,e,n){if(ce.log(`ChangeStore.createPatch${t.toString()})`,e),e===void 0){let o=await this.getWorkingOperations(t);if((n==null?void 0:n.staged)&&(o=o.filter(c=>c.staged)),o.length===0)return"";const a=[];for(const c of o){const l=await this.createPatchCore(t,c);a.push(l)}return a.join("")}const{operation:r}=await this.getWorkingOperation(e,t);if(r===void 0)throw new Error(`Unable to create patch for ${e.toString()}`);return(n==null?void 0:n.staged)&&r.staged?"":await this.createPatchCore(t,r)}async createPatchCore(t,e){if(e.fileType!==f.FileType.File)return"";const n=this.providerService.getRelativeFilePath(t,e.uri),r=`diff --git a/${n} b/${n}`;if(e.type===I.Created){let l=await this.getContent(e.uri);return op(n,"",l,"add")}if(e.type===I.Deleted){let l=qi.decode(await f.workspace.fs.readFile(k.getProviderUri(e.uri)));return op(n,l,"","delete")}const i=await this.getContent(e.uri),o=qi.decode(await f.workspace.fs.readFile(k.getProviderUri(e.uri))),a=ip(n,o,i),c=a.indexOf(cp);return`${r}
${a.substr(c+cp.length)}`}async keep(t,e){const n=this.providerService.getVirtualWorkspaceUri(t);if(n===void 0)return;const r=`ChangeStore.keep(${t.toString()})`;ce.log(r,e);const i=[];await this.lock.synchronizeWrite(R(n),async()=>{const{operation:o,index:a}=await this.getWorkingOperation(t,n);if(o===void 0)return;if(e===void 0&&o.conflicts){const[,l]=o.conflicts.status;switch(l){case I.Changed:switch(o.type){case I.Changed:case I.Created:case I.Deleted:await this.spliceOperation(t,a,{...o,conflicts:void 0,timestamp:Date.now()},i);break}break;case I.Created:switch(o.type){case I.Changed:case I.Deleted:await this.spliceOperation(t,a,{...o,conflicts:void 0,timestamp:Date.now()},i);break;case I.Created:await this.spliceOperation(t,a,{...o,type:I.Changed,size:o.size,hash:o.hash,originalHash:o.originalHash,conflicts:void 0,timestamp:Date.now()},i);break}break;case I.Deleted:switch(o.type){case I.Deleted:await this.discardCore(n,t,i);break;case I.Changed:await this.spliceOperation(t,a,{...o,type:I.Created,originalHash:void 0,conflicts:void 0,timestamp:Date.now()},i);break;case I.Created:await this.spliceOperation(t,a,{...o,conflicts:void 0,timestamp:Date.now()},i);break}break}return}if(e===void 0)return;switch(e.type){case I.Changed:switch(o.type){case I.Deleted:await this.spliceOperation(t,a,{...o,type:I.Deleted,size:void 0,hash:void 0,originalHash:void 0,conflicts:void 0,timestamp:Date.now()},i);return;case I.Created:break;case I.Changed:break}break;case I.Created:switch(o.type){case I.Changed:case I.Deleted:return;case I.Created:break}break;case I.Deleted:switch(o.type){case I.Deleted:return this.discardCore(n,t,i);case I.Changed:await this.spliceOperation(t,a,{...o,type:I.Created,originalHash:void 0,conflicts:void 0,timestamp:Date.now()},i);return;case I.Created:return}}const c=e!==void 0?await f.workspace.fs.readFile(e.providerUri):void 0;await this.spliceOperation(t,a,{...o,type:I.Changed,originalHash:c!==void 0?await cr(c):o.originalHash,conflicts:void 0,timestamp:Date.now()},i)},r),i.length!==0&&this._onDidChange.fire(i)}async merge(t,e,n){const r=this.providerService.getVirtualWorkspaceUri(t);if(r===void 0)return;const i=`ChangeStore.merge(${t.toString()})`;ce.log(i,e,n);const o=[];await this.lock.synchronizeWrite(R(r),async()=>{const{operation:a,index:c}=await this.getWorkingOperation(t,r);if(a===void 0)return;switch(e.type){case I.Changed:switch(a.type){case I.Deleted:await this.spliceOperation(t,c,{...a,type:I.Deleted,size:void 0,hash:void 0,originalHash:void 0,conflicts:{baseUri:n.providerUri,incomingUri:e.providerUri,status:[a.type,e.type]},timestamp:Date.now()},o);return;case I.Created:break;case I.Changed:break}break;case I.Created:switch(a.type){case I.Deleted:case I.Changed:return;case I.Created:break}break;case I.Deleted:switch(a.type){case I.Deleted:return this.discardCore(r,t,o);case I.Changed:await this.spliceOperation(t,c,{...a,type:I.Created,originalHash:void 0,conflicts:{baseUri:void 0,incomingUri:e.providerUri,status:[a.type,e.type]},timestamp:Date.now()},o);return;case I.Created:return}}const l=await this.providerService.getMetadata(e.providerUri),u=await this.getWorkingContent(r,t),d=a.type===I.Created?new Uint8Array(0):await f.workspace.fs.readFile(n.providerUri),h=await f.workspace.fs.readFile(e.providerUri),g=sp(qi.decode(u),qi.decode(d),qi.decode(h),l.HEAD.sha);await this.writeFileCore(r,t,o,q0.encode(g.mergedContent),h!=null?h:new Uint8Array(0),g.conflicts?{baseUri:n.providerUri,incomingUri:e.providerUri,status:[a.type,e.type]}:void 0)},i),o.length!==0&&this._onDidChange.fire(o)}async resolveDiffCommand(t,e,n,r){let i;const o=this.providerService.getVirtualRootUri(t);return o!==void 0&&({operation:i}=await this.getWorkingOperation(t,o)),(i==null?void 0:i.type)===I.Deleted?this.resolveOpenCommand(e):((i==null?void 0:i.type)===I.Created&&(e=e.with({query:"~"})),{command:"vscode.diff",title:"Open Changes",arguments:[e,t,n,r]})}resolveOpenCommand(t,e){return{command:"vscode.open",title:"Open File",arguments:[t,e]}}getScopedUri(t,e){const n=typeof e=="string"?e:e.workspaceId;return n===this.workspaceId?t:t.with({fragment:n})}getUriScope(t){return t.fragment||void 0}getScopedChangeStore(t){const e=typeof t=="string"?t:t.workspaceId;ce.log(`ChangeStore.getScopedChangeStore(${e})`);let n=this.scopedStores.get(e);return n===void 0&&(n=e===this.workspaceId?new ls.ScopedChangeStore(this,e,this.workspaceId):new ls.ScopedChangeStore(new ls(this.providerService,this.storageService.with(e),this.fileStorageService.with(e),this.telemetryService,this.workspaceId,e),e,this.workspaceId),this.scopedStores.set(e,n)),n}async stat(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).stat(t);const n=this.providerService.getVirtualRootUri(t);if(n===void 0)return;const r=R(n),i=this.cache.get(r);if((i==null?void 0:i.length)!==0)return this.lock.synchronizeRead(r,async()=>{var o;const{operation:a}=await this.getWorkingOperation(t,n);if(a!==void 0){if(a.type===I.Deleted)throw f.FileSystemError.FileNotFound(`The ${a.fileType===f.FileType.Directory?"folder":"file"} has been deleted.`);return{type:a.fileType,size:(o=a.size)!=null?o:0,ctime:0,mtime:a.timestamp}}},`ChangeStore.stat(${t.toString()}`)}async readFile(t){const e=this.getUriScope(t);if(e)return this.getScopedChangeStore(e).readFile(t);const n=new Ln(`ChangeStore.readFile(${t.toString()})`);try{const r=this.providerService.getVirtualRootUri(t);if(r===void 0)return;const i=R(r),o=this.cache.get(i);return(o==null?void 0:o.length)===0?void 0:await this.lock.synchronizeRead(i,()=>{const a=this.cache.get(i);if((a==null?void 0:a.length)===0){n.log({message:": Not found; no operations"});return}return this.getWorkingContent(r,t)},n.context)}finally{n.stop()}}async createDirectory(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=new Ln(`ChangeStore.createDirectory(${t.toString()})`);try{const r=[];if(await this.lock.synchronizeWrite(R(e),async()=>{const{operation:i,index:o}=await this.getWorkingOperation(t,e),a=await this.providerService.getMetadata(t);await this.spliceOperation(t,o,i===void 0?{type:I.Created,uri:t,fileType:f.FileType.Directory,revision:a.HEAD.sha,timestamp:Date.now(),size:0,hash:"",originalHash:void 0}:{...i,timestamp:Date.now()},r)},n.context),r.length===0)return;this._onDidChange.fire(r)}finally{n.stop()}}async deleteDirectory(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=new Ln(`ChangeStore.deleteDirectory(${t.toString()})`);try{const r=[];if(await this.lock.synchronizeWrite(R(e),async()=>{const{operation:i,index:o}=await this.getWorkingOperation(t,e);if((i==null?void 0:i.type)===I.Created)return this.discardCore(e,t,r);const a=await this.providerService.getMetadata(t);await this.spliceOperation(t,o,{type:I.Deleted,uri:t,fileType:f.FileType.Directory,revision:a.HEAD.sha,timestamp:Date.now(),size:void 0,hash:void 0,originalHash:void 0},r)},n.context),r.length===0)return;this._onDidChange.fire(r)}finally{n.stop()}}async updateDirectoryEntries(t,e){const n=this.providerService.getVirtualWorkspaceUri(t);if(n===void 0)return e;const r=new Ln(`ChangeStore.updateDirectoryEntries(${t.toString()})`,{},e.length);try{const i=R(n),o=this.cache.get(i);return(o==null?void 0:o.length)===0?e:await this.lock.synchronizeRead(i,async()=>{const{path:a}=Pe(n,t),c=await this.getWorkingOperations(n);for(const l of c)switch(l.type){case I.Changed:break;case I.Created:{if(j(l.uri,a)){const u=this.providerService.getRelativeFilePath(t,l.uri);e.push([u,l.fileType])}break}case I.Deleted:{if(j(l.uri,a)){const u=this.providerService.getRelativeFilePath(t,l.uri),d=e.findIndex(([h])=>h===u);d!==-1&&e.splice(d,1)}break}}return e},r.context)}finally{r.stop()}}async writeFile(t,e,n,r){const i=this.providerService.getVirtualWorkspaceUri(t);if(i===void 0)return;const o=new Ln(`ChangeStore.writeFile(${t.toString()})`,{},e.length,r);try{const a=[];if(await this.lock.synchronizeWrite(R(i),async()=>this.writeFileCore(i,t,a,e,n,r),o.context),a.length===0)return;this._onDidChange.fire(a)}finally{o.stop()}}async writeFileCore(t,e,n,r,i,o){const a=new Ln(`ChangeStore.writeFileCore(${e.toString()})`,{},r.length,o);try{const[{operation:c,index:l},u,d]=await Promise.all([this.getWorkingOperation(e,t),cr(r),cr(i)]);if(u===d&&(!c||(c==null?void 0:c.type)===I.Changed))return this.discardCore(t,e,n);if(u===(c==null?void 0:c.hash)&&d===(c==null?void 0:c.originalHash))return;const[{HEAD:h}]=await Promise.all([this.providerService.getMetadata(e),this.saveWorkingContent(t,e,r)]);await this.spliceOperation(e,l,c===void 0?{type:I.Changed,uri:e,fileType:f.FileType.File,revision:h.sha,timestamp:Date.now(),size:r.byteLength,hash:u,originalHash:d,conflicts:o,staged:!1}:{...c,revision:h.sha,timestamp:Date.now(),size:r.byteLength,hash:u,originalHash:d,conflicts:o,staged:!1},n)}finally{a.stop()}}async createFile(t,e){const n=this.providerService.getVirtualWorkspaceUri(t);if(n===void 0)return;const r=new Ln(`ChangeStore.createFile(${t.toString()})`,{},e.length);try{const i=[];if(await this.lock.synchronizeWrite(R(n),async()=>{const[{operation:o,index:a},c,l]=await Promise.all([this.getWorkingOperation(t,n),cr(e),this.providerService.getMetadata(t),this.saveWorkingContent(n,t,e)]);await this.spliceOperation(t,a,o===void 0?{type:I.Created,uri:t,fileType:f.FileType.File,revision:l.HEAD.sha,timestamp:Date.now(),size:e.byteLength,hash:c,originalHash:c}:{...o,type:I.Created,revision:l.HEAD.sha,timestamp:Date.now(),size:e.byteLength,hash:c},i)},r.context),i.length===0)return;this._onDidChange.fire(i)}finally{r.stop()}}async deleteFile(t){const e=this.providerService.getVirtualWorkspaceUri(t);if(e===void 0)return;const n=new Ln(`ChangeStore.deleteFile(${t.toString()})`);try{const r=[];if(await this.lock.synchronizeWrite(R(e),async()=>{const{operation:i,index:o}=await this.getWorkingOperation(t,e);if((i==null?void 0:i.type)===I.Created)return this.discardCore(e,t,r);const[a]=await Promise.all([this.providerService.getMetadata(t),this.discardWorkingContent(e,t)]);await this.spliceOperation(t,o,{type:I.Deleted,uri:t,fileType:f.FileType.File,revision:a.HEAD.sha,timestamp:Date.now(),size:void 0,hash:void 0,originalHash:void 0},r)},n.context),r.length===0)return;this._onDidChange.fire(r)}finally{n.stop()}}findParent(t,e,n){const r=De(t),{operation:i,index:o}=this.findWorkingOperation(r,e);return i!==void 0&&n(i,e)?{parent:i,parentIndex:o}:{parent:void 0,parentIndex:-1}}findNewParentWithOnlyChild(t,e){const n=V(t);return this.findParent(t,e,(r,i)=>r.type===I.Created&&!i.some(o=>j(o.uri,r.uri)&&V(o.uri)!==n))}findDeletedParents(t,e){const n=[];for(let r=0;r<e.length;r+=1){const i=e[r];i.type===I.Deleted&&X(t,i.uri)&&n.push({parent:i,parentIndex:r})}return n}async getWorkingOperation(t,e){return this.findWorkingOperation(t,await this.getWorkingOperations(e))}findWorkingOperation(t,e){if(e.length===0)return{operation:void 0,index:-1};const n=V(t);let r=-1;const i=e.find((o,a)=>V(o.uri)!==n?!1:(r=a,!0));return i===void 0?{operation:void 0,index:-1}:{operation:i,index:r}}async getWorkingOperations(t){const e=R(t);let n=this.cache.get(e);return n===void 0&&(n=this.fromStorage(await this.storageService.get(this.getOperationsStorageKey(e))),this.cache.set(e,n)),n}async saveWorkingOperations(t,e){ce.debug(`ChangeStore.saveWorkingOperations(${t.toString()})`,e.length);const n=R(t);this.cache.set(n,e);try{await this.storageService.store(this.getOperationsStorageKey(n),this.toStorage(e))}catch(r){throw this.cache.delete(n),ce.error(r,`Failed to save repository changes for ${n}`),r}}getOperationsStorageKey(t){return`operations/${t}`}async getWorkingContent(t,e){try{return await this.fileStorageService.get(this.getFileStorageKey(t,e))}catch(n){throw ce.error(n),this.telemetryService.sendException(n),n}}async discardWorkingContent(t,e){ce.debug(`ChangeStore.discardWorkingContent(${e.toString()})`);try{return await this.fileStorageService.delete(this.getFileStorageKey(t,e))}catch(n){if(n instanceof f.FileSystemError&&n.code===j0)return;throw ce.error(n),this.telemetryService.sendException(n),n}}async saveWorkingContent(t,e,n){ce.debug(`ChangeStore.saveWorkingContent(${e.toString()})`,n.length);try{return await this.fileStorageService.store(this.getFileStorageKey(t,e),n)}catch(r){throw ce.error(r),this.telemetryService.sendException(r),r}}getFileStorageKey(t,e){return`changestore/${Q(e)}`}async spliceOperation(t,e,n,r){const i=this.providerService.getVirtualWorkspaceUri(t);if(i===void 0)return;const o=await this.getWorkingOperations(i);e!==-1?o.splice(e,1,n):o.push(n),await this.saveWorkingOperations(i,o),r.push(_c(n,i,t))}fromStorage(t){if(!t)return[];try{const e=JSON.parse(t,(n,r)=>(n==="uri"||n.endsWith("Uri"))&&G(r)?typeof r=="string"?f.Uri.parse(r):f.Uri.from(r):r);return Array.isArray(e)?e:e.operations}catch(e){throw ce.error(e,"Failed to deserialize ChangeStore operations"),e}}toStorage(t){const e={schemaVersion:ls.operationsStorageSchemaVersion,operations:t};return JSON.stringify(e)}},"_ChangeStore");let zu=ls;zu.operationsStorageSchemaVersion=1,zu.ScopedChangeStore=class{constructor(t,e,n){this.changeStore=t,this.scope=e,this.workspaceId=n}createPatch(t,e,n){return this.changeStore.createPatch(this.stripUriScope(t),this.stripUriScope(e),n)}discardAll(t,e){return this.changeStore.discardAll(this.stripUriScope(t),e)}getChange(t){return this.changeStore.getChange(this.stripUriScope(t))}getChanges(t,e){return this.changeStore.getChanges(this.stripUriScope(t),e)}async getGroupedChanges(t,e){return this.changeStore.getGroupedChanges(this.stripUriScope(t),e)}hasChanges(t){return this.changeStore.hasChanges(this.stripUriScope(t))}maybeHasChanges(t,e){return this.changeStore.maybeHasChanges(this.stripUriScope(t),this.stripUriScope(e))}async stat(t){const n=this.changeStore.getUriScope(t)!==this.workspaceId,r=await this.changeStore.stat(this.stripUriScope(t));return r!==void 0&&n&&(r.permissions=f.FilePermission.Readonly),r}readFile(t){return this.changeStore.readFile(this.stripUriScope(t))}resolveDiffCommand(t,e,n,r){return this.changeStore.resolveDiffCommand(this.changeStore.getScopedUri(t,this.scope),this.changeStore.getScopedUri(e,this.scope),n,r)}stripUriScope(t){return t===void 0||!t.fragment?t:t.with({fragment:""})}},V0([Bi()],zu.prototype,"getWorkingOperations",1);function G0(t){switch(t){case I.Changed:return ar("change type changed","Modified");case I.Created:return ar("change type created","Added");case I.Deleted:return ar("change type deleted","Deleted")}}s(G0,"getStatusText");function Q0(t){const[e,n]=t;switch(e){case I.Changed:switch(n){case I.Changed:case I.Created:return ar("conflict status changed both","Modified by Both");case I.Deleted:return ar("conflict status deleted them","Deleted by Incoming")}case I.Created:switch(n){case I.Changed:case I.Created:return ar("conflict status created both","Added by Both");case I.Deleted:return ar("conflict status deleted them","Deleted by Incoming")}case I.Deleted:switch(n){case I.Changed:case I.Created:return ar("conflict status deleted us","Deleted by Current");case I.Deleted:return ar("conflict status deleted both","Deleted by Both")}}}s(Q0,"getConflictStatusText");const hi=de.loadMessageBundle();class lp{constructor(e){this.providerService=e,this._onDidChangeFileDecorations=new f.EventEmitter,this._decorations=new Map,this.disposable=f.Disposable.from(f.window.registerFileDecorationProvider(this),e.onDidChangeRepository(this.onRefresh,this),e.onDidRefresh(this.onRefresh,this),e.onDidChangeChangeStore(this.onUrisChanged,this))}get onDidChangeFileDecorations(){return this._onDidChangeFileDecorations.event}dispose(){this.disposable.dispose(),this._decorations.clear()}onRefresh(){this._decorations.clear(),setTimeout(()=>this._onDidChangeFileDecorations.fire(void 0),0)}onUrisChanged(e){const n=e.map(({uri:r})=>(this._decorations.delete(R(r)),r));setTimeout(()=>this._onDidChangeFileDecorations.fire(n),0)}async provideFileDecoration(e,n){if(e.scheme!==Br.scheme)return;await Tr(this.providerService,e);const r=R(e);let i=this._decorations.get(r);if(i!==void 0)return i!=null?i:void 0;const o=await this.providerService.getIncomingChanges(this.providerService.getVirtualRootUri(e));let a;o.length>0&&(a=o.find(l=>R(l.uri)===r));const c=await this.providerService.changeStoreGetChange(e);if(c===void 0){if(a!==void 0)switch(a.type){case I.Created:i={badge:"\u2193A",color:new f.ThemeColor("remoteHub.decorations.incomingAddedForegroundColor"),tooltip:hi("decoration tooltip incoming change added","Pending Incoming Changes (Added)")};break;case I.Deleted:i={badge:"\u2193D",color:new f.ThemeColor("remoteHub.decorations.incomingDeletedForegroundColor"),tooltip:hi("decoration tooltip incoming change deleted","Pending Incoming Changes (Deleted)")};break;case I.Changed:i={badge:"\u2193M",color:new f.ThemeColor("remoteHub.decorations.incomingModifiedForegroundColor"),tooltip:hi("decoration tooltip incoming change modified","Pending Incoming Changes (Modified)")};break;default:i={badge:"\u2193~",color:new f.ThemeColor("remoteHub.decorations.incomingModifiedForegroundColor"),tooltip:hi("decoration tooltip incoming change","Pending Incoming Changes")};break}return this._decorations.set(r,i!=null?i:null),i}if(c.conflicts)i={badge:"!",color:new f.ThemeColor("remoteHub.decorations.conflictForegroundColor"),tooltip:hi("decoration tooltip conflicts","Merge Conflicts ({0})",Q0(c.conflicts.status))};else if(a!==void 0)switch(a.type){case I.Created:i={badge:"\u26A0",color:new f.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:hi("decoration tooltip possible conflict added","Possible Merge Conflicts (Added)")};break;case I.Deleted:i={badge:"\u26A0",color:new f.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:hi("decoration tooltip possible conflict deleted","Possible Merge Conflicts (Deleted)")};break;case I.Changed:i={badge:"\u26A0",color:new f.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:hi("decoration tooltip possible conflict","Possible Merge Conflicts")};break;default:i={badge:"\u26A0",color:new f.ThemeColor("remoteHub.decorations.possibleConflictForegroundColor"),tooltip:hi("decoration tooltip possible conflict","Possible Merge Conflicts")}}else switch(c.type){case I.Created:i={badge:"A",color:new f.ThemeColor("remoteHub.decorations.addedForegroundColor"),tooltip:hi("decoration tooltip added","Added")};break;case I.Changed:i={badge:"M",color:new f.ThemeColor("remoteHub.decorations.modifiedForegroundColor"),tooltip:hi("decoration tooltip modified","Modified")};break;case I.Deleted:i={badge:"D",color:new f.ThemeColor("remoteHub.decorations.deletedForegroundColor"),tooltip:hi("decoration tooltip deleted","Deleted")};break}return this._decorations.set(r,i!=null?i:null),i}}s(lp,"ScmDecorationProvider");class Vu{constructor(e){this.defaultDelay=e}dispose(){this.cancelTimeout()}debounce(e,n=this.defaultDelay){return this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((r,i)=>{this.resolver=r,this.rejecter=i}).then(()=>{if(this.completionPromise=void 0,this.resolver=void 0,this.task){const r=this.task;return this.task=void 0,r()}})),this.timeout=setTimeout(()=>{var r;this.timeout=void 0,(r=this.resolver)==null||r.call(this,void 0)},n),this.completionPromise}cancel(){var e;this.cancelTimeout(),this.completionPromise&&((e=this.rejecter)==null||e.call(this,new Error("Canceled")),this.completionPromise=void 0)}cancelTimeout(){this.timeout!==void 0&&(clearTimeout(this.timeout),this.timeout=void 0)}}s(Vu,"TaskDebouncer");const X0=de.loadMessageBundle();class co{constructor(e){this.command=e}get label(){return this.command.title}async execute(){var e;return void await f.commands.executeCommand(this.command.command,...(e=this.command.arguments)!=null?e:[])}}s(co,"CommandQuickPickItem");var Ec;(function(t){async function e(n,r,i,o,a,c){let l;Array.isArray(a)?l=a:c===void 0&&(l=[],c=a);const u=f.window.createQuickPick(),d=new Vu(500),h=[d],{defaultBranch:g,HEAD:p}=await n.getMetadata(r);async function C(P){const[F,A,Z]=await Promise.all([n.getBranches(r,{query:P,limit:100}),n.getTags(r,{query:P,limit:100}),n.getSnapshots(r)]),$e=new Set,fe=new Set;for(const st of Z)$e.add(st.hash),fe.add(st.branch.name);const It=((c==null?void 0:c.filterBranches)?F.branches.filter(c==null?void 0:c.filterBranches):F.branches).filter(st=>st.name!==g.name),kt=X0("indexedCommit","Open indexed commit"),Pt=[{iconPath:new f.ThemeIcon("layers-active"),tooltip:kt}];return[...l,...(c==null?void 0:c.showHead)?[{label:"HEAD",description:`\u2022$(git-commit) ${we(p.sha)}${$e.has(p.sha)?"\xA0\xA0\u2022\xA0\xA0$(layers)":""}`,alwaysShow:!0,type:L.Commit,name:void 0,sha:p.sha,buttons:$e.has(p.sha)?Pt:void 0}]:[],{label:`$(git-branch) ${g.name} (default)`,description:`\u2022$(git-commit) ${we(g.sha)}${fe.has(g.name)||$e.has(g.sha)?"\xA0\xA0\u2022\xA0\xA0$(layers)":""}`,alwaysShow:!0,type:L.Branch,name:void 0,sha:g.sha,buttons:fe.has(g.name)||$e.has(g.sha)?Pt:void 0},...It.map(st=>({label:`$(git-branch) ${st.name}`,description:`\u2022$(git-commit) ${we(st.commit)}${fe.has(st.name)?"\xA0\xA0\u2022\xA0\xA0$(layers)":""}`,type:L.Branch,name:st.name,sha:st.commit,buttons:fe.has(st.name)?Pt:void 0})),...A.tags.map(st=>({label:`$(tag) ${st.name}`,description:`\u2022$(git-commit) ${we(st.commit)}${$e.has(st.commit)?"\xA0\xA0\u2022\xA0\xA0$(layers)":""}`,type:L.Tag,name:st.name,sha:st.commit,buttons:$e.has(st.commit)?Pt:void 0}))]}s(C,"getItems");const v=C(void 0);let m,b=!1;async function w(P){m=void 0;const F=u.activeItems;u.items=P!=null?P:await v,b&&F.length!==0&&(u.activeItems=u.items.filter(A=>F.some(Z=>Z.label===A.label))),u.busy=!1}s(w,"setItems");try{return await new Promise(F=>{var A;h.push(u.onDidHide(()=>F(void 0)),u.onDidChangeValue(Z=>{if(b=!1,Z=Z.trim(),(c==null?void 0:c.allowResetToSha)&&p.branch&&W(Z)){w([{label:`Reset $(git-branch) ${p.branch.name} to $(git-commit) ${Z}`,name:p.branch.name,sha:Z,type:L.Branch}]);return}u.busy=!0;const $e=d.debounce(Z?()=>C(Z):()=>v);m===void 0&&(m=$e.then(async fe=>w(fe)))}),u.onDidAccept(()=>{if(u.activeItems.length!==0){const[Z]=u.activeItems;F(Z)}}),u.onDidTriggerItemButton(Z=>{const $e=Z.item;$e instanceof co||($e.useIndex=!0),F($e)})),u.title=o,u.placeholder=i,u.matchOnDescription=!0,u.ignoreFocusOut=(A=c==null?void 0:c.ignoreFocusOut)!=null?A:!0,u.busy=!0,u.show(),m=d.debounce(async()=>v,0).then(Z=>w(Z))})}finally{u.dispose(),h.forEach(P=>void P.dispose())}}s(e,"show"),t.show=e})(Ec||(Ec={}));const se=de.loadMessageBundle(),J0=new TextDecoder;class up{constructor(e,n,r){this.providerService=e,this.openActionsService=n,this.telemetryService=r,this._onDidCloseRepository=new f.EventEmitter,this._onDidOpenRepository=new f.EventEmitter,this._onDidChangeState=new f.EventEmitter,this._scmProviders=[],this._state="uninitialized",this.disposable=f.Disposable.from(mt.onDidChange(this.onConfigurationChanged,this),this.providerService.onDidChangeRepositories(this.onRepositoriesChanged,this),this.providerService.onDidChangeRepository(async({repository:o})=>{const a=this.getScmProvider(k.getVirtualUri(o.uri));a!==void 0&&await this.updateStatusBarCommands(a,void 0)}),this.providerService.onDidSyncRepository(async({repository:o,syncing:a})=>{const c=this.getScmProvider(k.getVirtualUri(o.uri));c!==void 0&&await this.updateStatusBarCommands(c,{syncing:a})}),this.providerService.onDidRefresh(o=>{for(const a of o)this.update(a)}),this.providerService.onDidChangeChangeStore(o=>this.update(o[0].rootUri)),...this.registerCommands());const i=this.providerService.repositories;this.onRepositoriesChanged({added:i,removed:[]})}get onDidCloseRepository(){return this._onDidCloseRepository.event}get onDidOpenRepository(){return this._onDidOpenRepository.event}get onDidChangeState(){return this._onDidChangeState.event}get repositories(){return this._scmProviders.map(e=>e.repository).filter(e=>Boolean(e))}dispose(){var e;(e=this.disposable)==null||e.dispose()}get staging(){return this._staging===void 0&&(this._staging=mt.get("staging")),this._staging}get state(){return this._state}refresh(){for(const e of this._scmProviders)this.update(e.sourceControl.rootUri)}onConfigurationChanged(e){mt.changed(e,"staging")&&(this._staging=void 0,mt.changed(e,"staging.enabled")&&this.refresh()),mt.changed(e,"commitDirectlyWarning")&&this.refresh()}async onRepositoriesChanged(e){if(e.added.length)for(const n of e.added){const r=await this.update(n.uri);(r==null?void 0:r.repository)&&this._onDidOpenRepository.fire(r.repository)}if(e.removed.length)for(const n of e.removed){const r=this._scmProviders.findIndex(i=>R(i.sourceControl.rootUri)===R(n.uri));if(r!==-1){const i=this._scmProviders[r];i.repository&&this._onDidCloseRepository.fire(i.repository),i.sourceControl.dispose(),this._scmProviders.splice(r,1)}}this._state!=="initialized"&&(this._state="initialized",this._onDidChangeState.fire(this._state))}registerCommands(){return[f.commands.registerCommand("remoteHub.createPullRequest",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.publicLog2("command.createPullRequest"),void this.createPullRequest(e)}),f.commands.registerCommand("remoteHub.createDraftPullRequest",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.publicLog2("command.createDraftPullRequest"),void this.createPullRequest(e,{draft:!0})}),f.commands.registerCommand("remoteHub.commit",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.publicLog2("command.commit"),void this.commitChanges(e,{empty:!1})}),f.commands.registerCommand("remoteHub.commitEmpty",e=>{if(e=this.getSourceControlFrom(e),e!==void 0)return this.telemetryService.publicLog2("command.commitEmpty"),void this.commitChanges(e,{empty:!0})}),f.commands.registerCommand("remoteHub.discardAllChanges",async e=>{if(dp(e)){const a=e.resourceStates.filter(us);if(a.length!==0){if(await qu(a))for(const c of a)await this.providerService.getChangeStore(c.resourceUri).discard(c.resourceUri);else this.telemetryService.publicLog2("command.discardAllChanges.abort",{reason:"aborted"});return}}let n=!1;e!==void 0&&"confirmDiscard"in e&&(n=!0,e=void 0);const r=this.getSourceControlFrom(e);if((r==null?void 0:r.rootUri)===void 0)return;this.telemetryService.publicLog2("command.discardAllChanges");const i=await this.providerService.getChangeStore(r.rootUri).getChanges(r.rootUri);n||await qu(i)?await this.providerService.getChangeStore(r.rootUri).discardAll(r.rootUri):this.telemetryService.publicLog2("command.discardAllChanges.abort",{reason:"aborted"})}),f.commands.registerCommand("remoteHub.discardChanges",async(...e)=>{for(const n of e)!us(n)||(this.telemetryService.publicLog2("command.discardChanges"),await qu([n])?await this.providerService.getChangeStore(n.resourceUri).discard(n.resourceUri):this.telemetryService.publicLog2("command.discardChanges.abort",{reason:"aborted"}))}),f.commands.registerCommand("remoteHub.stageAllChanges",async e=>{const n=this.getSourceControlFrom(e);(n==null?void 0:n.rootUri)!==void 0&&(this.telemetryService.publicLog2("command.stageAllChanges"),await this.providerService.getChangeStore(n.rootUri).stageAll(n.rootUri))}),f.commands.registerCommand("remoteHub.stageChanges",async(...e)=>{for(const n of e)!us(n)||(this.telemetryService.publicLog2("command.stageChanges"),await this.providerService.getChangeStore(n.resourceUri).stage(n.resourceUri))}),f.commands.registerCommand("remoteHub.unstageAllChanges",e=>{const n=this.getSourceControlFrom(e);if((n==null?void 0:n.rootUri)!==void 0)return this.telemetryService.publicLog2("command.unstageAllChanges"),void this.providerService.getChangeStore(n.rootUri).unstageAll(n.rootUri)}),f.commands.registerCommand("remoteHub.unstageChanges",async(...e)=>{for(const n of e)!us(n)||(this.telemetryService.publicLog2("command.unstageChanges"),await this.providerService.getChangeStore(n.resourceUri).unstage(n.resourceUri))}),f.commands.registerCommand("remoteHub.keepChanges",async(...e)=>{for(const n of e)!us(n)||(this.telemetryService.publicLog2("command.keepChanges"),await this.providerService.getChangeStore(n.resourceUri).keep(n.resourceUri))}),f.commands.registerCommand("remoteHub.openChanges",e=>{var n;const{command:r}=e;if(!!r)return this.telemetryService.publicLog2("command.openChanges"),void f.commands.executeCommand(r.command,...(n=r.arguments)!=null?n:[])}),f.commands.registerCommand("remoteHub.openFile",async(...e)=>{var n;for(const r of e)if(ju(r)){const i=r,o=this.providerService.getChangeStore(i.resourceUri).resolveOpenCommand(i.resourceUri,{preserveFocus:!1,preview:!1,viewColumn:f.ViewColumn.Active});this.telemetryService.publicLog2("command.openFile"),await f.commands.executeCommand(o.command,...(n=o.arguments)!=null?n:[])}else if(r instanceof f.Uri){this.telemetryService.publicLog2("command.openFile");const i=r;await f.window.showTextDocument(i)}}),f.commands.registerCommand("remoteHub.createBranch",async e=>{await Kh("remoteHub.createBranchFrom",{...e,fromSha:"HEAD"})}),f.commands.registerCommand("remoteHub.createBranchFrom",async e=>{var n;const r=(n=e==null?void 0:e.uri)!=null?n:await ds(this._scmProviders,se("choose repo for create branch placeholder","Choose which repository to create a new branch on"),se("choose repo for create branch title","Create Branch"));if(r===void 0)return;this.telemetryService.publicLog2("command.createBranchFrom");const i=await this.providerService.getMetadata(r);if(i.accessLevel<xe.Write){this.telemetryService.publicLog2("command.createBranchFrom.abort",{reason:"no permissions"}),f.window.showErrorMessage(se("no permissions to create branch ","You don't have access to create branches on this repository."));return}let o,a=!1;if(e==null?void 0:e.fromSha)o=e.fromSha,o==="HEAD"&&(o=i.HEAD.sha);else{const p=await Ec.show(this.providerService,r,se("select ref for create placeholder","Select a ref to create the new branch from"),se("select ref for create title","Create Branch \u2022 {0}",i.name),{showHead:!0});if(!p){this.telemetryService.publicLog2("command.createBranchFrom.abort",{reason:"abandoned branch picker"});return}o=p.sha,a=Boolean(p.useIndex)}let c;try{c=await f.window.withProgress({location:f.ProgressLocation.SourceControl},()=>xc(this.providerService,r,o,se("create branch","Please provide a new branch name"),se("create branch placeholder","New branch name"),se("create branch title","Create Branch \u2022 {0}",i.name)))}catch(p){ce.error(p),f.window.showErrorMessage(se("unable to create branch","Unable to create the new branch."));return}if(!c){this.telemetryService.publicLog2("command.createBranchFrom.abort",{reason:"abandoned branch name prompt"});return}const l=await this.providerService.switchTo(r,{type:L.Branch,id:c});if(!l)return;const u=await this.providerService.getChangeStore(r).createChangeset(r);u&&await this.openActionsService.setChangesetToApply(l.uri,u);const d=se("switch to branch prompt open","Switch to Branch"),h=se("switch to branch prompt open in new window","Open in New Window"),g=await f.window.showInformationMessage(se("switch to branch prompt",`Created new branch '{0}'.

Any uncommitted changes will be applied to the new branch.

Do you want to switch to the new branch?`,c),{modal:!0},d,h);!g||(l.location=g===h?$.NewWindow:$.CurrentWindow,a&&await mt.setMode(l.uri,Me.getIndexDefault(Je.Branch)),await Ii(this.providerService,l,{skipChangesPrompt:!0}))}),f.commands.registerCommand("remoteHub.applyPatch",async e=>{if(e=this.getSourceControlFrom(e),(e==null?void 0:e.rootUri)===void 0)return;this.telemetryService.publicLog2("command.applyPatch");let n;const r=f.window.activeTextEditor;if((r==null?void 0:r.document.languageId)!=="diff"){const i=await f.window.showOpenDialog({openLabel:se("open patch","Open Patch"),title:se("open patch","Open Patch"),canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,filters:{Diff:["diff"],Patch:["*","patch"]}});if(i===void 0||i.length===0)return;n=J0.decode(await f.workspace.fs.readFile(i[0]))}else n=r.document.getText();try{await this.providerService.getChangeStore(e.rootUri).applyPatch(e.rootUri,n)}catch{f.window.showErrorMessage(se("invalid patch file","Invalid patch file"))}}),f.commands.registerCommand("remoteHub.exportPatch",async(...e)=>{const n=Array.isArray(e)?e:[e];for(const r of n){const i=this.getSourceControlFrom(r);if((i==null?void 0:i.rootUri)===void 0)return;let o;ju(r)&&(o=r.resourceUri),this.telemetryService.publicLog2("command.exportPatch");const a=await this.providerService.getChangeStore(i.rootUri).createPatch(i.rootUri,o),c=await f.workspace.openTextDocument({language:"diff",content:a});await f.window.showTextDocument(c)}}),f.commands.registerCommand("remoteHub.switchToBranch",async e=>{var n,r;const i=(n=e==null?void 0:e.uri)!=null?n:await ds(this._scmProviders,se("choose repo for switch branch placeholder","Choose which repository to switch branches on"),se("choose repo for switch branch title","Switch to Branch or Tag"));if(i===void 0)return;this.telemetryService.publicLog2("command.switchToBranch");const o=[],a=await this.providerService.getMetadata(i);if(e==null?void 0:e.commands)switch(a.accessLevel>=xe.Write&&o.push(new co(Di({command:"remoteHub.createBranch",title:se("create branch command.v3","{0} Create new branch...","$(add)"),arguments:[{uri:i}]})),new co(Di({command:"remoteHub.createBranchFrom",title:se("create branch from command.v3","{0} Create new branch from...","$(add)"),arguments:[{uri:i}]}))),a.HEAD.type){case H.Branch:o.push(new co(Di({command:"remoteHub.openOnRemote",title:se("open branch on remote command.v2","{0} Open Branch on {1}...","$(globe)",a.provider.name),arguments:[{provider:a.provider,repo:a.repo,branch:a.HEAD.branch.name}]})));break;case H.RemoteBranch:o.push(new co(Di({command:"remoteHub.openOnRemote",title:se("open remote branch on remote command.v2","{0} Open Remote Branch on {1}...","$(globe)",a.provider.name),arguments:[{provider:a.provider,repo:a.HEAD.branch.remote.repo,branch:a.HEAD.branch.name}]})));break;case H.Tag:o.push(new co(Di({command:"remoteHub.openOnRemote",title:se("open tag on remote command.v2","{0} Open Tag on {1}...","$(globe)",a.provider.name),arguments:[{provider:a.provider,repo:a.repo,tag:a.HEAD.detached.name}]})));break;case H.Commit:o.push(new co(Di({command:"remoteHub.openOnRemote",title:se("open commit on remote command.v2","{0} Open Commit on {1}...","$(globe)",a.provider.name),arguments:[{provider:a.provider,repo:a.repo,sha:a.HEAD.sha}]})));break}const c=(r=a.HEAD.branch)==null?void 0:r.name,l=Boolean(c&&!await this.providerService.getChangeStore(i).hasChanges(i)),u=await Ec.show(this.providerService,i,se("choose switch branch placeholder","Choose which branch to switch to"),se("choose switch branch title","Switch to Branch or Tag \u2022 {0}",a.name),o,{allowResetToSha:l,filterBranches:c?d=>d.name!==c:void 0,ignoreFocusOut:!1});if(!u){this.telemetryService.publicLog2("command.switchToBranch.abort",{reason:"abandoned branch picker"});return}return u instanceof co?void u.execute():l&&u.type===L.Branch&&u.name===c&&u.sha?f.window.withProgress({location:f.ProgressLocation.SourceControl},async()=>{try{await this.providerService.sync(i,{to:u.sha})}catch(d){ce.error(d),f.window.showErrorMessage(se("reset failed","Unable to reset the repository to commit '{0}'.",we(u.sha)))}}):void f.window.withProgress({location:f.ProgressLocation.SourceControl},async()=>{const d=await this.providerService.switchTo(i,u.name?{type:u.type,id:u.name}:void 0);if(d!==void 0){if(u.useIndex){const h=await this.providerService.getModeRefType(d.uri);await mt.setMode(d.uri,Me.getIndexDefault(h))}return Ii(this.providerService,d)}})}),f.commands.registerCommand("remoteHub.fetch",async e=>{var n;const r=(n=e==null?void 0:e.uri)!=null?n:await ds(this._scmProviders,se("choose repo for fetch placeholder","Choose which repository to fetch"),se("choose repo for fetch title","Fetch Repository"));if(r!==void 0){this.telemetryService.publicLog2("command.fetch");try{await f.window.withProgress({location:f.ProgressLocation.SourceControl},()=>this.providerService.fetch(r,{force:!0}))}catch(i){f.window.showErrorMessage(se("fetch failed","Unable to fetch repository"))}}}),f.commands.registerCommand("remoteHub.fetchAll",async e=>{const n=this.providerService.repositories;if(n.length===0)return;(e==null?void 0:e.automated)||this.telemetryService.publicLog2("command.fetchAll"),(await f.window.withProgress({location:f.ProgressLocation.SourceControl},async()=>{const i=[];for(const o of n)try{await this.providerService.fetch(o.uri)}catch(a){i.push(a)}return i})).length&&!(e==null?void 0:e.automated)&&f.window.showErrorMessage(n.length?se("fetch all failed","Unable to fetch repositories"):se("fetch failed","Unable to fetch repository"))}),f.commands.registerCommand("remoteHub.pull",async e=>{var n;const r=(n=e==null?void 0:e.uri)!=null?n:await ds(this._scmProviders,se("choose repo for pull placeholder","Choose which repository to pull"),se("choose repo for pull title","Pull Repository"));if(r!==void 0){this.telemetryService.publicLog2("command.pull");try{await this.sync(r,{pull:!0})}catch{}}}),f.commands.registerCommand("remoteHub.sync",async e=>{var n;const r=(n=e==null?void 0:e.uri)!=null?n:await ds(this._scmProviders,se("choose repo for sync placeholder","Choose which repository to sync"),se("choose repo for sync title","Synchronize Repository"));if(r!==void 0){this.telemetryService.publicLog2("command.sync");try{await this.sync(r)}catch{}}}),f.commands.registerCommand("remoteHub.disableCommitDirectlyWarning",()=>{this.telemetryService.publicLog2("command.disableCommitDirectlyWarning"),mt.updateEffective("commitDirectlyWarning",Lt.Off)})]}async sync(e,{pull:n,...r}={pull:!1}){this.telemetryService.publicLog2("sync");try{await f.window.withProgress({location:f.ProgressLocation.SourceControl},()=>this.providerService.sync(e,r))}catch(i){if(be.asVirtualProviderErrorCode(i)===ne.SyncConflictsError){const o={title:se("sync confirm","Continue")},a={title:se("sync cancel","Cancel"),isCloseAffordance:!0};await f.window.showWarningMessage(n?se("sync pull",`Pulling in changes may cause conflicts with your uncommitted changes as one of more of those files has changed since you started editing.

Do you want to continue pulling in changes.`):se("sync",`Syncing changes may cause conflicts with your uncommitted changes as one of more of those files has changed since you started editing.

Do you want to continue syncing changes?`),{modal:!0},o,a)===o?await f.window.withProgress({location:f.ProgressLocation.SourceControl},()=>this.providerService.sync(e,{conflictResolution:ae.Merge})):this.telemetryService.publicLog2("sync.abort",{reason:"abandoned"})}else if(be.asVirtualProviderErrorCode(i)===ne.UnresolvedConflictsError)await f.window.showErrorMessage(n?se("pull with unresolved merge conflicts","You must resolve any pending conflicts before pulling."):se("sync with unresolved merge conflicts","You must resolve any pending conflicts before syncing."),{modal:!0});else throw ce.error(i),this.telemetryService.sendException(i),f.window.showErrorMessage(se("sync failed","Unable to sync the repository.")),i}}async commitChanges(e,n){try{await f.window.withProgress({location:f.ProgressLocation.SourceControl},()=>this.commitChangesCore(e,n))}catch(r){if(be.asVirtualProviderErrorCode(r)===ne.NothingToCommitError){f.window.showInformationMessage(se("no changes to commit","There are no changes to commit."));return}ce.error(r),f.window.showErrorMessage(se("commit unable","Unable to commit.")),this.telemetryService.sendException(r)}}async commitChangesCore(e,n){const r=e.rootUri;this.telemetryService.publicLog2("commit",{staging:String(this.staging.enabled)});const i=new Ln(`VirtualSourceControl.commitChanges(${r.toString()})`);let o;try{const a=await this.providerService.getMetadata(r);let c,l;const u=this.staging.enabled?this.staging.smart?"auto":!0:!1;for(;;){const h=e.inputBox.value;if(await this.providerService.getChangeStore(r).hasMergeConflicts(r)){e.inputBox.showValidationMessage(se("commit resolve conflicts","You must resolve any pending conflicts before committing."),f.SourceControlInputBoxValidationType.Error),this.telemetryService.publicLog2("commit.abort",{reason:"aborted conflicts"}),o=": Aborted; Unresolved conflicts";return}const g=await this.providerService.getCommitOperations(r,{staged:u});if(g.length===0&&!n.empty){e.inputBox.showValidationMessage(this.staging.enabled?se("commit no staged changes","There are no staged changes to commit."):se("commit no changes","There are no changes to commit."),f.SourceControlInputBoxValidationType.Information),this.telemetryService.publicLog2("commit.abort",{reason:this.staging.enabled?"aborted no staged changes":"aborted no changes"}),o=`: Aborted; No ${this.staging.enabled?"staged ":""}changes`;return}if(!h){e.inputBox.showValidationMessage(se("specify commit message","You must specify a commit message before committing."),f.SourceControlInputBoxValidationType.Error),this.telemetryService.publicLog2("commit.abort",{reason:"aborted no message"}),o=": Aborted; No message";return}let p,C;if(a.HEAD.type===H.RemoteBranch?(C=a.HEAD.branch.remote.accessLevel<xe.Write,p=C&&a.accessLevel<xe.Write):(p=a.accessLevel<xe.Write,C=p),l===void 0&&p&&(l=await this.providerService.getFork(r),l===void 0)){const v={title:se("fork confirm","Fork Repository")},m={title:se("cancel","Cancel"),isCloseAffordance:!0};if(await f.window.showInformationMessage(se("fork","You\u2019re trying to make changes in a project you don\u2019t have write access to. Do you want to create a fork of this project to commit your proposed changes to?"),{modal:!0},v,m)!==v){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned fork prompt"}),o=": Aborted; Abandoned fork prompt";return}if(l=await f.window.withProgress({location:f.ProgressLocation.Notification,title:se("fork progress","Forking {0}...",a.name)},()=>this.providerService.fork(r)),l===void 0){f.window.showErrorMessage(se("unable to fork","Unable to fork repository.")),this.telemetryService.publicLog2("commit.abort",{reason:"aborted fork failed"}),o=": Aborted; Fork failed";return}}if(l||C){if(l===void 0){const m={title:se("remote branch create branch prompt confirm","Commit to New Branch")},b={title:se("cancel","Cancel"),isCloseAffordance:!0};if(await f.window.showErrorMessage(se("remote branch create branch prompt",`You\u2019re trying to make changes to a branch you don\u2019t have write access to.

Do you want to commit your changes to a new branch?`),{modal:!0},m,b)!==m){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned remote branch prompt"}),o=": Aborted; Abandoned commit to new branch prompt";return}}let v=0;try{const m=await this.providerService.getBranches(l?this.providerService.createVirtualUri(r,l):r,{query:"patch-"});for(const b of m.branches){const w=/^patch-(?<num>\d+)$/.exec(b.name);if(w==null?void 0:w.groups){const P=Number(w.groups.num);P>v&&(v=P)}}}catch{}if(c=await xc(this.providerService,r,a.HEAD.sha,se("create new branch prompt","Create a new branch to commit your changes to"),se("create new branch placeholder","New branch name"),se("create new branch title","Commit \u2022 Create Branch \u2022 {0}",l?l.name:a.name),l,`patch-${v+1}`),!c){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned create branch prompt"}),o=": Aborted; Abandoned create branch prompt";return}}try{await this.providerService.createAndPushCommit(r,h,g,c,n,l)}catch(v){const m=be.asVirtualProviderErrorCode(v);if(m===ne.DetachedHEADError){const b={title:se("detached head prompt confirm","Commit to New Branch")},w={title:se("cancel","Cancel"),isCloseAffordance:!0};if(await f.window.showErrorMessage(se("detached head prompt",`Unable to commit your changes because you are not currently on a branch.

Do you want to commit your changes to a new branch?`),{modal:!0},b,w)!==b){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned detached head prompt"}),o=": Aborted; Abandoned commit to new branch prompt (detached head)";return}if(c=await xc(this.providerService,r,a.HEAD.sha,se("create new branch prompt","Create a new branch to commit your changes to"),se("create new branch placeholder","New branch name"),se("create new branch title","Commit \u2022 Create Branch \u2022 {0}",l?l.name:a.name),l),!c){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned detached head create branch prompt"}),o=": Aborted; Abandoned create branch prompt (detached head)";return}continue}else if(m===ne.MergeConflictError){const b={title:se("push conflicts prompt pull","Pull")},w={title:se("push conflicts prompt sync","Sync (Pull & Push)")},P={title:se("cancel","Cancel"),isCloseAffordance:!0},F=await f.window.showErrorMessage(se("push conflicts prompt",`Changes have been committed since you started editing, so you must merge those changes before you can commit.

Do you want to pull or sync (pull and automatically push) your changes?`),{modal:!0},b,w,P);if(F!==b&&F!==w){this.telemetryService.publicLog2("commit.abort",{reason:"abandoned conflicts prompt"}),o=": Aborted; Abandoned merge changes prompt";return}if(await this.sync(r,{pull:F===b,conflictResolution:ae.Merge}),F===b){o=': Aborted; Chose "pull" from merge changes prompt';return}continue}else throw ce.error(v),o=`: Aborted; ${String(v)}`,v}break}if(e.inputBox.value="",l?await this.providerService.getChangeStore(r).discardAll(r,{staged:u}):await this.providerService.getChangeStore(r).acceptAll(r,{staged:u}),Qu(qo.HasCommitted,!0),!l&&!c)return;async function d(){if(l){const C={title:se("commit to fork confirm","Switch to Fork")},v={title:se("cancel","Cancel"),isCloseAffordance:!0},m=await f.window.showInformationMessage(se("commit to fork","Committed changes to your fork of {0}. Do you want to switch to your fork to continue making changes?",a.name),{modal:!0},C,v);if(this.telemetryService.publicLog2("commit.switchToFork",{confirm:String(m===C)}),m===C){let b;c!==void 0?b={type:L.Branch,id:c}:a.HEAD.branch!==void 0&&(b={type:L.Branch,id:a.HEAD.branch.name}),Ii(this.providerService,{name:l.name,uri:this.providerService.createVirtualUri(r,{repo:l.repo,ref:b}),location:$.CurrentWindow})}return}const h={title:se("commit to new branch confirm","Switch to Branch")},g={title:se("cancel","Cancel"),isCloseAffordance:!0},p=await f.window.showInformationMessage(se("commit to new branch","Committed changes to new branch '{0}'. Do you want to switch to the new branch to continue making changes?",c),{modal:!0},h,g);this.telemetryService.publicLog2("commit.switchToBranch",{confirm:String(p===h)}),p===h&&Ii(this.providerService,{name:a.name,uri:this.providerService.createVirtualUri(r,{repo:a.repo,ref:c?{type:L.Branch,id:c}:void 0}),location:$.CurrentWindow})}s(d,"showSwitchToPrompt"),d.call(this)}finally{i.stop(o?{message:o}:void 0)}}async createPullRequest(e,n){try{await f.window.withProgress({location:f.ProgressLocation.SourceControl},()=>this.createPullRequestCore(e,n))}catch(r){const i=be.asVirtualProviderErrorCode(r);if(i===ne.NothingToCommitError){f.window.showInformationMessage(se("no changes to commit","There are no changes to commit."));return}if(i===ne.CommitFailedError){f.window.showErrorMessage(se("commit unable","Unable to commit."));return}ce.error(r),f.window.showErrorMessage(se("unable to open pr","Unable to open a pull request.")),this.telemetryService.sendException(r)}}async createPullRequestCore(e,n){var r;const i=e.rootUri,o=(r=n==null?void 0:n.draft)!=null?r:!1;this.telemetryService.publicLog2("createPullRequest",{draft:String(o),staging:String(this.staging.enabled)});const a=new Ln(`VirtualSourceControl.createPullRequest(${i.toString()})`);let c;try{let l=s(function(){this.telemetryService.publicLog2("createPullRequest.abort",{reason:"abandoned branch prompt"}),c=": Aborted; Abandoned commit to new branch prompt"},"handleBranchNotCreated"),u;const d=this.staging.enabled?this.staging.smart?"auto":!0:!1;if(!(n==null?void 0:n.sha)){if(await this.providerService.getChangeStore(i).hasMergeConflicts(i)){e.inputBox.showValidationMessage(se("commit resolve conflicts","You must resolve any pending conflicts before committing."),f.SourceControlInputBoxValidationType.Error),this.telemetryService.publicLog2("createPullRequest.abort",{reason:"aborted conflicts"}),c=": Aborted; Unresolved conflicts";return}if(u=await this.providerService.getCommitOperations(i,{staged:this.staging.enabled?this.staging.smart?"auto":!0:!1}),u.length===0){e.inputBox.showValidationMessage(this.staging.enabled?se("commit no staged changes","There are no staged changes to commit."):se("commit no changes","There are no changes to commit."),f.SourceControlInputBoxValidationType.Information),this.telemetryService.publicLog2("createPullRequest.abort",{reason:this.staging.enabled?"aborted no staged changes":"aborted no changes"}),c=`: Aborted; No ${this.staging.enabled?"staged ":""}changes`;return}}const h=e.inputBox.value;if(!h){e.inputBox.showValidationMessage(se("specify commit message","You must specify a commit message before committing."),f.SourceControlInputBoxValidationType.Error),this.telemetryService.publicLog2("createPullRequest.abort",{reason:"aborted no message"}),c=": Aborted; No message";return}const g=await this.providerService.getMetadata(i);let p,C;g.HEAD.type===H.RemoteBranch?(C=g.HEAD.branch.remote.accessLevel<xe.Write,p=C&&g.accessLevel<xe.Write):(p=g.accessLevel<xe.Write,C=p);let v=n==null?void 0:n.fork;if(v===void 0&&p&&(v=await this.providerService.getFork(i),v===void 0)){const Z={title:se("fork confirm","Fork Repository")},$e={title:se("cancel","Cancel"),isCloseAffordance:!0};if(await f.window.showInformationMessage(se("fork",`You\u2019re trying to make changes in a project you don\u2019t have write access to.

Do you want to create a fork of this project to commit your proposed changes to?`),{modal:!0},Z,$e)!==Z){this.telemetryService.publicLog2("createPullRequest.abort",{reason:"abandoned fork prompt"}),c=": Aborted; Abandoned fork prompt";return}if(v=await f.window.withProgress({location:f.ProgressLocation.Notification,title:se("fork progress","Forking {0}...",g.name)},()=>this.providerService.fork(i)),v===void 0){f.window.showErrorMessage(se("unable to fork","Unable to fork repository.")),this.telemetryService.publicLog2("createPullRequest.abort",{reason:"aborted fork failed"}),c=": Aborted; Fork failed";return}}const m=h.trimStart().split(`
`),b=await f.window.showInputBox({ignoreFocusOut:!0,placeHolder:se("create pr placeholder","Pull request title"),prompt:se("create pr prompt","Enter a title for the new pull request"),title:se("create pr title","New Pull Request"),value:m[0]});if(!b){this.telemetryService.publicLog2("createPullRequest.abort",{reason:"abandoned title prompt"}),c=": Aborted; Abandoned title prompt";return}async function w(Z){let $e=0;try{const fe=await this.providerService.getBranches(v?this.providerService.createVirtualUri(i,v):i,{query:"patch-"});for(const It of fe.branches){const kt=/^patch-(?<num>\d+)$/.exec(It.name);if(kt==null?void 0:kt.groups){const Pt=Number(kt.groups.num);Pt>$e&&($e=Pt)}}}catch{}return xc(this.providerService,i,Z,se("create pr branch prompt","Create a new branch for this pull request"),se("create pr branch placeholder","New branch name"),se("create pr branch title","New Pull Request \u2022 Create Branch \u2022 {0}",v?v.name:g.name),v,`patch-${$e+1}`)}s(w,"createBranch");const P=await w.call(this,g.HEAD.sha);if(!P){l.call(this);return}(u==null?void 0:u.length)&&await this.providerService.createAndPushCommit(i,h,u,P,void 0,v);const F=await this.providerService.createPullRequest(i,P,b,m.slice(1).join(`
`),{draft:o},v);e.inputBox.value="",(u==null?void 0:u.length)&&(v?await this.providerService.getChangeStore(i).discardAll(i,{staged:d}):await this.providerService.getChangeStore(i).acceptAll(i,{staged:d}));async function A(){const Z={title:se("created pr notification confirm","Switch to Pull Request")},$e={title:se("cancel","Cancel"),isCloseAffordance:!0},fe=await f.window.showInformationMessage(se("created pr notification","Created pull request #{0} in {1}. Do you want to switch to the new pull request?",F.id,g.name),{modal:!0},Z,$e);this.telemetryService.publicLog2("commit.switchToPullRequest",{confirm:String(fe===Z)}),fe===Z&&Ii(this.providerService,{name:g.name,uri:this.providerService.createVirtualUri(i,{repo:g.repo,ref:{type:L.PullRequest,id:F.id}}),location:$.CurrentWindow})}s(A,"showSwitchToPrompt"),A.call(this)}finally{a.stop(c?{message:c}:void 0)}}async update(e){const n=f.workspace.getWorkspaceFolder(e);if(n===void 0)return;const r=await this.providerService.getMetadata(e),i=await this.createOrUpdateScmProvider(e,n.name),o=await this.providerService.getChangeStore(e).getGroupedChanges(e,{predicate:d=>d.fileType===f.FileType.File}),a=await Promise.all(o.conflicts.map(async d=>({type:d.type,resourceUri:d.uri,command:await this.providerService.getChangeStore(d.uri).resolveDiffCommand(d.uri,d.conflicts.incomingUri,se("diff title with conflicts","{0} (Incoming Changes \u2194 Current Changes)",re(d.uri)))}))),c=s(d=>this.providerService.createVirtualUri(k.getProviderId(d),{repo:r.repo,ref:{type:L.Commit,id:r.HEAD.sha}},this.providerService.getRelativeFilePath(d)),"getOriginalVirtualUri"),l=await Promise.all(o.staged.map(async d=>({type:d.type,resourceUri:d.uri,command:await this.providerService.getChangeStore(d.uri).resolveDiffCommand(d.uri,c(d.uri),se("diff title index","{0} (Index)",re(d.uri)))}))),u=await Promise.all(o.working.map(async d=>({type:d.type,resourceUri:d.uri,decorations:{strikeThrough:d.type===I.Deleted},command:await this.providerService.getChangeStore(d.uri).resolveDiffCommand(d.uri,c(d.uri),se("diff title working","{0} (Working Tree)",re(d.uri)))})));return this.ensureMergeConflictsGroup(i).resourceStates=a,this.ensureStagedChangesGroup(i).resourceStates=this.staging.enabled?l:[],this.ensureWorkingChangesGroup(i).resourceStates=this.staging.enabled?u:[...l,...u],i}async createOrUpdateScmProvider(e,n){var r,i;const o=await this.providerService.getMetadata(e);let a;const c=o.HEAD.branch?o.HEAD.name:void 0;let l=this.getScmProvider(e);if(l===void 0){n=o.name,a=f.scm.createSourceControl(`remoteHub:${o.provider.id}`,n,e),a.quickDiffProvider={provideOriginalResource:d=>k.getProviderUri(d)};const u=this.providerService.createIGitRepository(e,a,o);l={id:o.provider.id,name:o.provider.name,sourceControl:a,groups:[],repository:u},this.ensureMergeConflictsGroup(l),this.ensureStagedChangesGroup(l),this.ensureWorkingChangesGroup(l),this._scmProviders.push(l)}else a=l.sourceControl;return o.accessLevel>=xe.Write||((i=(r=o.HEAD.branch)==null?void 0:r.remote)==null?void 0:i.accessLevel)!==void 0&&o.HEAD.branch.remote.accessLevel>=xe.Write?(a.acceptInputCommand={command:"remoteHub.commit",title:se("scm input accept command title commit","Commit"),arguments:[a]},c?a.inputBox.placeholder=se("scm input placeholder commit","Message (Ctrl+Enter to commit and push to '{0}' on {1})",c,o.provider.name):a.inputBox.placeholder=se("scm input placeholder commit","Message (Ctrl+Enter to commit and push to {0})",o.provider.name),mt.get("commitDirectlyWarning")===Lt.Off?a.inputBox.validateInput=void 0:a.inputBox.validateInput=u=>{if(mt.get("commitDirectlyWarning")===Lt.Auto&&_p(qo.HasCommitted))return;const d=new f.MarkdownString(c?se("scm input validation commit branch directly","Your changes will be committed and immediately pushed to the '{0}' branch on {1}.",c,o.provider.name):se("scm input validation commit directly","Your changes will be committed and immediately pushed to {0}.",o.provider.name));return d.isTrusted=!0,d.appendMarkdown(`&nbsp; [${se("scm input validation action","Don't show again")}](command:remoteHub.disableCommitDirectlyWarning '${se("scm input validation action tip","Hide")}')`),{message:d,type:f.SourceControlInputBoxValidationType.Information}}):(a.acceptInputCommand={command:"remoteHub.createPullRequest",title:se("scm input accept command title pr","Create a Pull Request"),arguments:[a]},a.inputBox.placeholder=se("scm input placeholder pr","Message (Ctrl+Enter to create a pull request for '{0}')",n)),await this.updateStatusBarCommands(l,{syncing:!1},o),l}async updateStatusBarCommands(e,n,r){var i,o,a;const c=e.sourceControl.rootUri;r=r!=null?r:await this.providerService.getMetadata(c);const{HEAD:l}=r,u=await this.providerService.getIndexMetadata(c),d=(u==null?void 0:u.type)===Dn.Active,h=(u==null?void 0:u.type)===Dn.Active,g=Dn.hasIndex(u==null?void 0:u.type),p=await this.providerService.getChangeStore(c).hasChanges(c),C=rc(l.type),v=[];if(v.push(Di({command:"remoteHub.switchToBranch",title:`${C} ${l.name}${p?"*":""}`,tooltip:`${we(l.sha)}`,arguments:[{uri:c,commands:!0}]})),l.detached||((n==null?void 0:n.syncing)?v.push(Di({command:"",title:"$(sync~spin)",tooltip:se("sync command syncing","Syncing Changes..."),arguments:[]})):v.push(Di({command:"remoteHub.sync",title:`$(sync)${((o=(i=r.state)==null?void 0:i.behind)!=null?o:0)>0?` ${(a=r.state)==null?void 0:a.behind}\u2193`:""}`,tooltip:d||h?se("sync index","Sync to latest indexed commit"):se("sync command","Sync (Pull & Push)"),arguments:[{uri:c}]}))),r.pullRequest&&v.push(Di({command:"remoteHub.openOnRemote",title:`$(git-pull-request) ${r.pullRequest.id}`,tooltip:se("scm statusbar command open pr",`Open Pull Request #{0} on {1}

{2}`,r.pullRequest.id,r.provider.name,r.pullRequest.title),arguments:[{provider:r.provider,repo:r.repo,pullRequest:{id:r.pullRequest.id}}]})),g){const m=this.providerService.getIndexProvider(c);m&&v.push(...await m.getStatusBarContributions(c))}e.sourceControl.statusBarCommands=v}ensureMergeConflictsGroup(e){const n="conflicts";let r=e.groups.find(i=>i.id===n);return r===void 0&&(r=e.sourceControl.createResourceGroup(n,se("scm group conflicts","Merge Conflicts")),r.hideWhenEmpty=!0,e.groups.push(r)),r}ensureStagedChangesGroup(e){const n="staged";let r=e.groups.find(i=>i.id===n);return r===void 0&&(r=e.sourceControl.createResourceGroup(n,se("scm group staged","Staged Changes")),r.hideWhenEmpty=!0,e.groups.push(r)),r}ensureWorkingChangesGroup(e){const n="changes";let r=e.groups.find(i=>i.id===n);return r===void 0&&(r=e.sourceControl.createResourceGroup(n,se("scm group changes","Changes")),e.groups.push(r)),r}getScmProvider(e){const n=R(e);return this._scmProviders.find(r=>R(r.sourceControl.rootUri)===n)}getSourceControlFrom(e){if(e===void 0){if(this._scmProviders.length!==1)return;e=this._scmProviders[0].sourceControl}let n;if(Y0(e))n=e;else if(dp(e)){const r=e,i=this._scmProviders.find(o=>o.groups.includes(r));n=i==null?void 0:i.sourceControl}else if(ju(e)){const r=e,i=this._scmProviders.find(o=>o.groups.some(a=>a.resourceStates.includes(r)));n=i==null?void 0:i.sourceControl}else{if(this._scmProviders.length!==1)return;n=this._scmProviders[0].sourceControl}return n}}s(up,"VirtualSourceControl");function Y0(t){return"rootUri"in t&&"inputBox"in t}s(Y0,"isSourceControl");function dp(t){return t!==void 0&&"id"in t&&"label"in t&&"resourceStates"in t&&Array.isArray(t.resourceStates)}s(dp,"isSourceControlResourceGroup");function ju(t){return t!==void 0&&"resourceUri"in t&&t.resourceUri instanceof f.Uri}s(ju,"isSourceControlResourceState");function us(t){return"type"in t}s(us,"isTrackedChange");async function qu(t){var e,n,r;if(t.length===0)return!0;let i,o=se("discard","Discard Changes");if(t.length===1){const c=t[0];c.type===I.Created?(i=se("confirm delete",`Are you sure you want to DELETE {0}?
This is IRREVERSIBLE!
This file will be FOREVER LOST.`,re((e=c.resourceUri)!=null?e:c.uri)),o=se("delete file","Delete file")):c.type===I.Deleted?(o=se("restore file","Restore file"),i=se("confirm restore","Are you sure you want to restore {0}?",re((n=c.resourceUri)!=null?n:c.uri))):i=se("confirm discard","Are you sure you want to discard changes in {0}?",re((r=c.resourceUri)!=null?r:c.uri))}else t.every(c=>c.type===I.Created)?i=se("confirm delete multiple",`Are you sure you want to DELETE {0} files?
This is IRREVERSIBLE!
These files will be FOREVER LOST.`,t.length):t.every(c=>c.type===I.Deleted)?(o=se("restore files","Restore files"),i=se("confirm restore multiple","Are you sure you want to restore {0} files?",t.length)):i=se("confirm discard multiple","Are you sure you want to discard changes in {0} files?",t.length);return await f.window.showWarningMessage(i,{modal:!0},o)===o}s(qu,"confirmDiscard");async function ds(t,e,n){if(t.length===0)return;if(t.length===1)return t[0].sourceControl.rootUri;const r=await f.window.showQuickPick(t.map(({sourceControl:i})=>({label:i.label,uri:i.rootUri})),{placeHolder:e,title:n});if(!!r)return r.uri}s(ds,"getOrPickRootUri");async function xc(t,e,n,r,i,o,a,c){const l=new Set;let u;const d=f.window.createInputBox();d.ignoreFocusOut=!0;try{return await new Promise((h,g)=>{u=f.Disposable.from(d.onDidHide(()=>h(void 0)),d.onDidChangeValue(p=>{if(p=p.trim(),!p){d.validationMessage=se("scm create branch prompt validation missing name","Please enter a valid branch name");return}if(l.has(p)){d.validationMessage=se("scm create branch prompt validation already exists","Branch '{0}' already exists",p);return}if(!Ve(p)){d.validationMessage=se("scm create branch prompt validation invalid name","'{0}' isn't a valid branch name",p);return}d.validationMessage=void 0}),d.onDidAccept(async()=>{const p=d.value;try{d.enabled=!1,d.busy=!0;const C=await t.createBranch(e,p,n,a);h(C)}catch(C){if(be.asVirtualProviderErrorCode(C)===ne.InvalidBranchNameError){d.enabled=!0,d.busy=!1,d.validationMessage=C.message,l.add(p);return}g(C)}})),d.prompt=r,d.placeholder=i,d.title=o,c&&(d.value=c),d.show()})}finally{d.dispose(),u==null||u.dispose()}}s(xc,"createBranchWithPrompt");const sr=de.loadMessageBundle();class Ki extends f.TimelineItem{static is(e){return e instanceof Ki}constructor(e,n,r,i,{dateType:o,showAuthor:a,dateFormatter:c}){var l;const u=r.message.indexOf(`
`),d=u!==-1?`${r.message.substring(0,u)} \u2026`:r.message,h=o==="authored"?r.authorDate:r.commitDate;super(d,(l=h==null?void 0:h.getTime())!=null?l:0);this.id=r.hash,this.contextValue=`${k.scheme}:${n}:file:commit`,this.command=i,a&&(this.description=r.authorName),this.tooltip=sr("timeline item detail",`{0} ({1}) \u2014 {2}
{3}

{4}`,r.authorName,r.authorEmail,we(r.hash),c.format(h),r.message),this.iconPath=new f.ThemeIcon("git-commit"),this.rootUri=e,this.providerId=n,this.hash=r.hash,this.parents=r.parents,this.message=r.message}}s(Ki,"CommitTimelineItem");class jo extends f.TimelineItem{static is(e){return e instanceof jo}constructor(e,n,r,i,o,{dateFormatter:a}){const c=sr("timeline staged changes","Staged Changes");super(c,r.timestamp);this.id="index",this.contextValue=`${k.scheme}:${n}:file:${this.id}`,this.command=o,this.iconPath=new f.ThemeIcon("git-commit"),this.tooltip=sr("timeline index detail",`{0}  \u2014 {1}
{2}

{3}`,sr("timeline you","You"),sr("timeline index","Index"),a.format(new Date(r.timestamp)),G0(r.type)),this.rootUri=e,this.providerId=n,this.hash="~",this.parents=i,this.message=c}}s(jo,"ChangeOperationTimelineItem");class fp{constructor(e){this.providerService=e,this._onDidChange=new f.EventEmitter,this.id="github-file-history",this.label=sr("timeline.source","GitHub File History"),this.debouncer=new Vu(500),this.disposable=f.Disposable.from(this.debouncer,e.onDidChangeProviders(this.onProvidersChanged,this),e.onDidChangeRepositories(this.onRepositoriesChanged,this),e.onDidChangeRepository(this.onRepositoryChanged,this),e.onDidRefresh(this.onRefresh,this),e.onDidChangeChangeStore(this.onUrisChanged,this),mt.onDidChangeAny(this.onConfigurationChanged,this),...this.registerCommands()),e.hasProviders&&this.ensureProviderRegistration()}get onDidChange(){return this._onDidChange.event}dispose(){var e;(e=this.providerDisposable)==null||e.dispose(),this.disposable.dispose()}onConfigurationChanged(e){(e.affectsConfiguration("git.timeline.date")||e.affectsConfiguration("git.timeline.showAuthor"))&&this.fireChanged()}onProvidersChanged(e){this.ensureProviderRegistration(),this.fireChanged()}onRefresh(e){if(this.rootUri===void 0)return;const n=R(this.rootUri);!e.some(r=>R(r)===n)||this.fireChanged()}onRepositoriesChanged(e){if(this.rootUri===void 0)return;const n=R(this.rootUri);(e.added.some(r=>R(r.uri)===n)||e.removed.some(r=>R(r.uri)===n))&&this.fireChanged()}onRepositoryChanged(e){this.rootUri===void 0||R(this.rootUri)!==R(e.repository.uri)||this.fireChanged()}onUrisChanged(e){if(this.rootUri===void 0)return;const n=R(this.rootUri);e.some(r=>R(r.rootUri)===n)&&this.fireChanged()}async provideTimeline(e,n,r){var i;try{this.rootUri=this.providerService.getVirtualRootUri(e);for(const C of this.providerService.repositories)if(C.uri.path===this.rootUri.path){this.rootUri=C.uri;break}const o=this.providerService.getRelativeFilePath(this.rootUri,e),a=await this.providerService.getMetadata(this.rootUri);if(!a||r.isCancellationRequested)return{items:[]};const c=await this.providerService.getCommits(this.rootUri,{ref:a.HEAD.sha,path:o||void 0,cursor:n.cursor,limit:typeof n.limit=="number"?n.limit:void 0});if(c===void 0||c.commits.length===0||r.isCancellationRequested)return{items:[]};const l=((i=c.paging)==null?void 0:i.more)?{cursor:c.paging.cursor}:void 0,u=new Intl.DateTimeFormat(f.env.language,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}),d=mt.getAny("git.timeline.date",void 0,"committed"),h=mt.getAny("git.timeline.showAuthor",void 0,!0),g=await Promise.all(c.commits.map(async C=>new Ki(this.rootUri,a.provider.id,C,await this.resolveDiffCommand(C,a,e,o),{dateType:d,showAuthor:h,dateFormatter:u}))),p=n.cursor===void 0?await this.providerService.changeStoreGetChange(e):void 0;if(p&&Boolean(p.staged&&mt.get("staging.enabled"))){const v=new jo(this.rootUri,a.provider.id,p,[c.commits[0].hash],await this.providerService.changeStoreResolveDiffCommand(p.uri,k.getProviderUri(p.uri),sr("diff title index","{0} (Index)",re(p.uri))),{dateFormatter:u});g.splice(0,0,v)}return{items:g,paging:l}}catch(o){return ce.error(o),{items:[]}}}ensureProviderRegistration(){this.providerDisposable===void 0&&(this.providerDisposable=f.workspace.registerTimelineProvider([Br.scheme,...this.providerService.registeredProviders.map(e=>e.id)],this))}fireChanged(){this.debouncer.debounce(()=>this._onDidChange.fire(void 0))}registerCommands(){let e;return[f.commands.registerCommand("remoteHub.timeline.copyCommitId",(n,r,i)=>{!Ki.is(n)||f.env.clipboard.writeText(n.hash)}),f.commands.registerCommand("remoteHub.timeline.copyCommitMessage",(n,r,i)=>{!Ki.is(n)||f.env.clipboard.writeText(n.message)}),f.commands.registerCommand("remoteHub.timeline.openDiff",async(n,r,i)=>{var o;!Ki.is(n)&&!jo.is(n)||n.command!==void 0&&await f.commands.executeCommand(n.command.command,...(o=n.command.arguments)!=null?o:[])}),f.commands.registerCommand("remoteHub.timeline.openOnGitHub",async n=>{await this.openOnRemote(n)}),f.commands.registerCommand("remoteHub.timeline.openOnAzureRepos",async n=>{await this.openOnRemote(n)}),f.commands.registerCommand("remoteHub.timeline.selectForCompare",async(n,r,i)=>{!r||!Ki.is(n)&&!jo.is(n)||(e={uri:r,left:n},await f.commands.executeCommand("setContext","remoteHub.timeline.selectedForCompare",!0))}),f.commands.registerCommand("remoteHub.timeline.compareWithSelected",async(n,r,i)=>{if(!r||!e||!Ki.is(n)&&!jo.is(n)||R(r)!==R(e.uri))return;const{left:o}=e,a=this.providerService.getRelativeFilePath(n.rootUri,r),c=await this.providerService.getMetadata(n.rootUri),l=re(r),u=o.parents[0];let d;u===void 0?d=sr("timeline diff title ref","{0} ({1})",l,we(n.hash)):o.hash===""?d=sr("timeline diff title working","{0} (Working Tree)",l):o.hash==="~"?d=sr("timeline diff title index","{0} (Index)",l):d=sr("timeline diff title ref","{0} ({1})",l,we(o.hash));let h=o.hash===""||o.hash==="~"?r:this.providerService.createProviderUri(r,{repo:c.repo,ref:{type:L.Commit,id:u!=null?u:"0000000000000000000000000000000000000000"}},a);u===void 0&&(h=h.with({query:"~"}));const g=n.parents[0];let p;g===void 0?p=sr("timeline diff title ref","{0} ({1})",l,we(n.hash)):g==="~"&&n.hash===""?p=sr("timeline diff title working","{0} (Working Tree)",l):n.hash==="~"?p=sr("timeline diff title index","{0} (Index)",l):p=sr("timeline diff title ref","{0} ({1})",l,we(n.hash));const C=sr("timeline diff title","{0} \u27F7 {1}",d,p),v=n.hash===""||n.hash==="~"?r:this.providerService.createProviderUri(r,{repo:c.repo,ref:{type:L.Commit,id:n.hash}},a);await f.commands.executeCommand("vscode.diff",h,v,C)})]}async resolveDiffCommand(e,n,r,i,o){const a=re(r);let c=e.parents[0],l=this.providerService.createProviderUri(r,{repo:n.repo,ref:{type:L.Commit,id:c!=null?c:"0000000000000000000000000000000000000000"}},i);try{await this.providerService.stat(l)}catch(h){c=void 0}let u;c===void 0?u=sr("timeline diff title ref","{0} ({1})",a,we(e.hash)):e.hash===""?u=sr("timeline diff title working","{0} (Working Tree)",a):e.hash==="~"?u=sr("timeline diff title index","{0} (Index)",a):u=sr("timeline diff title refs","{0} ({1}) \u27F7  {0} ({2})",a,we(c),we(e.hash)),c===void 0&&(l=l.with({query:"~"}));const d=e.hash===""||e.hash==="~"?r:this.providerService.createProviderUri(r,{repo:n.repo,ref:{type:L.Commit,id:e.hash}},i);return{command:"vscode.diff",title:"Open Comparison",arguments:[l,d,u,o]}}async openOnRemote(e){if(!Ki.is(e))return;const n=await this.providerService.getMetadata(e.rootUri);await Kh("remoteHub.openOnRemote",{provider:n.provider,repo:n.repo,sha:e.hash})}}s(fp,"VirtualTimelineProvider");class hp{constructor(e,n){this.providerService=e,this.telemetryService=n,this.disposable=f.window.registerUriHandler(this)}dispose(){this.disposable.dispose()}async handleUri(e){var n;const r=new Ln(`RemoteUriHandler.handleUri(${e.path}, ${e.toString()})`);await Tr(this.providerService,void 0);try{switch(e.path){case"/open":{this.telemetryService.publicLog2("handleUri.open");let i,o;for(const c of e.query.split("&")){const[l,u]=c.split("=");switch(l){case"url":i=decodeURIComponent(u);break;case"location":o=u===$.CurrentWindow?$.CurrentWindow:$.NewWindow;break}}if(!i){r.log({message:": Unable to find url parameter"}),this.telemetryService.publicLog2("handleUri.open.abort",{reason:"aborted url not found"});return}i=i.trim(),o=o!=null?o:$.NewWindow;const a=await this.providerService.createWorkspaceForRemoteUrl(i,void 0,o);if(!a){r.log({message:`: Unable to open workspace for ${i}`}),this.telemetryService.publicLog2("handleUri.open.abort",{reason:"aborted invalid url"});return}r.log({message:`: Opening ${i} in ${o}`}),Ii(this.providerService,a);break}case"/open-files":{let i;for(const a of e.query.split("&")){const[c,l]=a.split("=");if(c==="url"){i=decodeURIComponent(l);break}}if(!i){r.log({message:": Unable to find url parameter"});return}i=i.trim();const o=await this.providerService.createWorkspaceForRemoteUrl(i);if(!o){r.log({message:`: Unable to open files/folders for ${i}`});return}o.filesToOpen?(r.log({message:`: Opening files/folders for ${i}`}),await((n=Tc())==null?void 0:n.openPendingFiles(o.uri,o.filesToOpen))):r.log({message:`: No files/folders found to open for ${i}`});break}default:{r.log({message:`: Unknown Uri ${e.toString()}`});break}}}finally{r.stop()}}}s(hp,"RemoteUriHandler");var Z0=Object.defineProperty,ey=Object.getOwnPropertyDescriptor,ty=s((t,e,n,r)=>{for(var i=r>1?void 0:r?ey(e,n):e,o=t.length-1,a;o>=0;o--)(a=t[o])&&(i=(r?a(e,n,i):a(i))||i);return r&&i&&Z0(e,n,i),i},"view_decorateClass"),_a;(function(t){t.Change="remoteHub:viewItem:change",t.WorkspaceRepository="remoteHub:viewItem:workspaceRepository",t.WorkspaceRepositories="remoteHub:viewItem:workspaceRepositories",t.Message="remoteHub:viewItem:message"})(_a||(_a={}));const gp=s(class{constructor(t,e){this.view=t,this.parent=e,this.splatted=!1}static is(t){return t instanceof gp}get id(){}toString(){return`${ce.toLoggableName(this)}${this.id!==void 0?`(${this.id})`:""}`}getParent(){var t,e;return((t=this.parent)==null?void 0:t.splatted)?(e=this.parent)==null?void 0:e.getParent():this.parent}triggerChange(t=!1,e=!1,n){return this.splatted&&this.parent!==void 0&&this.parent!==n?this.parent.triggerChange(t,e):this.view.refreshNode(this,t,e)}},"_ViewNode");let Ea=gp;ty([Bi((t=!1,e=!1,n)=>JSON.stringify([t,e,n==null?void 0:n.toString()]))],Ea.prototype,"triggerChange",1);class pp{constructor(e,n,r,i){this.id=e,this.name=n,this.providerService=r,this.telemetryService=i,this._onDidChangeTreeData=new f.EventEmitter,this.disposables=[];const o=!1;if(ce.isDebugging&&o){const a=this.getTreeItem;this.getTreeItem=async function(c){var l;const u=await a.apply(this,[c]),d=c.getParent();return u.tooltip===void 0&&(u.tooltip=new f.MarkdownString(u.label!==void 0&&typeof u.label!="string"?u.label.label:(l=u.label)!=null?l:"")),typeof u.tooltip=="string"?u.tooltip=`${u.tooltip}

---
context: ${u.contextValue}
node: ${c.toString()}${d!==void 0?`
parent: ${d.toString()}`:""}`:u.tooltip.appendMarkdown(`

---

context: \`${u.contextValue}\`\\
node: \`${c.toString()}\`${d!==void 0?`\\
parent: \`${d.toString()}\``:""}`),u}}this.disposables.push(...this.registerCommands()),this.initialize({showCollapseAll:this.showCollapseAll}),setTimeout(()=>this.onConfigurationChanged(),0)}get onDidChangeTreeData(){return this._onDidChangeTreeData.event}get showCollapseAll(){return!0}filterConfigurationChanged(e){return!!mt.changed(e,`views.${this.configKey}`)}dispose(){f.Disposable.from(...this.disposables).dispose()}get title(){return this._title}set title(e){this._title=e,this.tree!==void 0&&(this.tree.title=e)}get description(){return this._description}set description(e){this._description=e,this.tree!==void 0&&(this.tree.description=e)}get message(){return this._message}set message(e){this._message=e,this.tree!==void 0&&(this.tree.message=e)}getQualifiedCommand(e){return`${this.id}.${e}`}onConfigurationChanged(e){e!==void 0&&this.root!==void 0&&this.refresh(!0)}initialize(e={}){this.tree=f.window.createTreeView(this.id,{...e,treeDataProvider:this}),this.disposables.push(mt.onDidChange(n=>{!this.filterConfigurationChanged(n)||(this._config=void 0,this.onConfigurationChanged(n))},this),this.tree),this._title=this.tree.title}ensureRoot(e=!1){return(this.root===void 0||e)&&(this.telemetryService.publicLog2("view.open",{view:this.id}),this.root=this.getRoot()),this.root}async getChildren(e){return e!==void 0?e.getChildren():(await Tr(this.providerService,void 0),this.ensureRoot().getChildren())}getParent(e){return e.getParent()}getTreeItem(e){return e.getTreeItem()}get selection(){return this.tree===void 0||this.root===void 0?[]:[...this.tree.selection]}get visible(){return this.tree!==void 0?this.tree.visible:!1}async refresh(e=!1){var n,r;await((r=(n=this.root)==null?void 0:n.refresh)==null?void 0:r.call(n,e)),this.triggerNodeChange()}async refreshNode(e,n=!1,r=!1){var i;const o=await((i=e.refresh)==null?void 0:i.call(e,n));!r&&o===!0||this.triggerNodeChange(e)}async reveal(e,n){if(this.tree!==void 0)try{await this.tree.reveal(e,n)}catch(r){ce.error(r)}}async show(){try{await f.commands.executeCommand(`${this.id}.focus`)}catch(e){ce.error(e)}}triggerNodeChange(e){this._onDidChangeTreeData.fire(e!==void 0&&e!==this.root?e:void 0)}get config(){return this._config===void 0&&(this._config=mt.get("views")[this.configKey]),this._config}}s(pp,"View");class vp extends Ea{constructor(e,n,r,i,o,a,c){super(e,n);this._message=r,this._description=i,this._tooltip=o,this._iconPath=a,this._contextValue=c}getChildren(){return[]}getTreeItem(){var e;const n=new f.TreeItem(this._message,f.TreeItemCollapsibleState.None);return n.contextValue=(e=this._contextValue)!=null?e:_a.Message,n.description=this._description,n.tooltip=this._tooltip,n.iconPath=this._iconPath,n}}s(vp,"MessageNode");var ny=Object.defineProperty,ry=Object.getOwnPropertyDescriptor,Ku=s((t,e,n,r)=>{for(var i=r>1?void 0:r?ry(e,n):e,o=t.length-1,a;o>=0;o--)(a=t[o])&&(i=(r?a(e,n,i):a(i))||i);return r&&i&&ny(e,n,i),i},"workspaceRepositoriesView_decorateClass");const gr=de.loadMessageBundle(),mp=s(class extends Ea{constructor(t,e,n,r,i,o,a){super(t,e);this.changeStore=n,this.canonical=r,this.workspaceRepository=i,this.operation=o,this.canApplyChanges=a}static getId(t,e,n){return`${fs.getId(t,e)}:${this.key}(${n.uri.toString()})`}get id(){return mp.getId(this.canonical.uri,this.workspaceRepository,this.operation)}getChildren(){return[]}async getTreeItem(){const t=this.view.providerService.getRelativeFilePath(this.workspaceRepository.uri,this.operation.uri),e=new f.TreeItem(t,f.TreeItemCollapsibleState.None);return e.id=this.id,e.contextValue=`${_a.Change}${this.canApplyChanges?"+apply":""}`,e.resourceUri=this.view.providerService.getChangeStore(this.operation.uri).getScopedUri(this.operation.uri,this.workspaceRepository),e.command=await this.getDiffCommand(t,!0),e}async getDiffCommand(t,e=!1){if(e||this._command===void 0){const n=Boolean(this.operation.staged&&mt.get("staging.enabled"));if(this.workspaceRepository.workspaceId===this.view.workspaceId){const r=k.getProviderUri(this.operation.uri);this._command=await this.changeStore.resolveDiffCommand(this.operation.uri,r,n?gr("diff title index","{0} (Index)",re(this.operation.uri),this.workspaceRepository.ref.name):gr("diff title working","{0} (Working Tree)",re(this.operation.uri),this.workspaceRepository.ref.name))}else{const{repo:r}=this.view.providerService.getVirtualUriMetadata(this.workspaceRepository.uri),i=this.view.providerService.createProviderUri(this.operation.uri,{repo:r,ref:{type:L.Commit,id:this.operation.revision}},t);this._command=await this.changeStore.resolveDiffCommand(this.operation.uri,i,n?gr("diff title changeset index","{0} (Index of {1})",re(this.operation.uri),this.workspaceRepository.ref.name):gr("diff title changeset working","{0} (Working Tree of {1})",re(this.operation.uri),this.workspaceRepository.ref.name))}}return this._command}async openChanges(){var t;const e=await this.getDiffCommand(this.view.providerService.getRelativeFilePath(this.workspaceRepository.uri,this.operation.uri));await f.commands.executeCommand(e.command,...(t=e.arguments)!=null?t:[])}async openFile(){const t=this.view.providerService.getChangeStore(this.operation.uri).getScopedUri(this.operation.uri,this.workspaceRepository.workspaceId);await f.window.showTextDocument(t)}async applyChanges(){const t=await this.view.getRepositoryToApplyChangesetTo(this.workspaceRepository);if(t!==void 0)try{await this.view.providerService.getChangeStore(t.uri).applyChangeset(t.uri,this.workspaceRepository,this.operation)}catch(e){f.window.showErrorMessage(String(e))}}},"_FileChangeNode");let yp=mp;yp.key=":changes";const wp=s(class extends Ea{constructor(t,e,n,r,i){super(t,e);this.canonical=n,this.workspaceRepository=r,this.root=i}static getId(t,e){return`${Ic.getId(t)}:${this.key}(${e.workspaceId}/${e.uri.toString()})`}get id(){return wp.getId(this.canonical.uri,this.workspaceRepository)}get name(){return this.workspaceRepository.name}get uri(){return this.workspaceRepository.uri}canApplyChanges(){if(!this.canonical.hasActive||f.workspace.getWorkspaceFolder(this.workspaceRepository.uri)!==void 0)return!1;const{changes:e}=this.workspaceRepository;return e!==void 0&&(e.added!==0||e.changed!==0||e.deleted!==0)}async getChildren(){if(this._children===void 0){const t=this.view.providerService.getChangeStore(this.workspaceRepository.uri).getScopedChangeStore(this.workspaceRepository),e=await t.getChanges(this.workspaceRepository.uri);this._children=e.map(n=>new yp(this.view,this,t,this.canonical,this.workspaceRepository,n,this.canApplyChanges()))}return this._children}getTreeItem(){const t=this.workspaceRepository.workspaceId===this.view.workspaceId,e=Wm(this.workspaceRepository),n=Br.isCanonicalUri(this.workspaceRepository.uri)?gr("repositories view repository default ref","{0} (default)",this.workspaceRepository.ref.name):this.workspaceRepository.ref.name,r=new f.TreeItem(this.root?this.canonical.name:n,e?f.TreeItemCollapsibleState.Collapsed:f.TreeItemCollapsibleState.None);return r.id=this.id,r.contextValue=`${_a.WorkspaceRepository}${t?"+active":""}${this.canApplyChanges()?"+apply":""}`,r.description=`${this.root?`${this.workspaceRepository.ref.name}\xA0\xA0\u2022\xA0\xA0`:""}${pa(this.workspaceRepository.timestamp,{ago:!0})}`,r.iconPath=t?new f.ThemeIcon("check"):this.root?bp(this.canonical.provider.id):Mm(this.workspaceRepository.ref.type,this.workspaceRepository.pullRequest),r.tooltip=new f.MarkdownString(void 0,!0).appendMarkdown(gr("repositories view repository tooltip",`{0}{1}\\
{2} {3} {4}{5}\\
Last accessed {6}

{7}
`,this.canonical.name,this.workspaceRepository.pullRequest?gr("pull request",`\\
Pull request {0} #{1}`,"$(git-pull-request)",this.workspaceRepository.pullRequest.id):"",iy(this.workspaceRepository.ref.type),rc(this.workspaceRepository.ref.type),n,t?` \u2014 _${gr("repositories view repository tooltip active","Active")}_ `:"",pa(this.workspaceRepository.timestamp,{ago:!0}),pu(this.workspaceRepository.changes,{preamble:`${gr("repositories view has changes","Has Uncommitted Changes")}\\
`}))),e&&(r.resourceUri=f.Uri.parse("remotehub-view://wsrepo/changes")),r}refresh(t=!1){t&&(this._children=void 0)}async applyAllChanges(){const t=await this.view.getRepositoryToApplyChangesetTo(this.workspaceRepository);if(t!==void 0)try{await this.view.providerService.getChangeStore(t.uri).applyChangeset(t.uri,this.workspaceRepository)}catch(e){f.window.showErrorMessage(String(e))}}remove(){return this.view.providerService.workspaceRepositoriesRemoveRepository(this.workspaceRepository)}},"_WorkspaceRepositoryNode");let fs=wp;fs.key=":wsrepo",Ku([Bi()],fs.prototype,"refresh",1);const Cp=s(class extends Ea{constructor(t,e,n,r){super(t,e);this.canonical=n,this.workspaceRepositories=r}static getId(t){return`remoteHub${this.key}(${t.toString()})`}get id(){return Cp.getId(this.canonical.uri)}get name(){return this.canonical.name}get uri(){return this.canonical.uri}getChildren(){if(this.children===void 0){const t=this.workspaceRepositories;if(t.length===0)return this.view.message=void 0,[new vp(this.view,this,gr("repositories view message empty","No remote repositories could be found."))];this.view.message=void 0,this.children=t.map(e=>new fs(this.view,this,this.canonical,e,!1))}return this.children}getTreeItem(){const t=this.workspaceRepositories.some(n=>n.workspaceId===this.view.workspaceId),e=new f.TreeItem(this.canonical.name,t?f.TreeItemCollapsibleState.Expanded:f.TreeItemCollapsibleState.Collapsed);return e.contextValue=_a.WorkspaceRepositories,e.iconPath=bp(this.canonical.provider.id),e}refresh(t=!1){t&&(this.children=void 0)}},"_CanonicalWorkspaceRepositoryNode");let Ic=Cp;Ic.key=":wsrepos",Ku([Bi()],Ic.prototype,"refresh",1);class Gu extends Ea{constructor(e){super(e);this.splatted=!0}async getChildren(){if(this.children===void 0){const e=await this.view.providerService.workspaceRepositoriesGetRepositoriesByCanonicalUri();if(e.size===0)return[];this.view.message=void 0;const n=[];for(const[r,i]of e){const o=f.Uri.parse(r);try{const{name:a,provider:c}=this.view.providerService.getVirtualUriMetadata(o),l={uri:o,name:a,provider:c,hasActive:i.some(u=>u.workspaceId===this.view.workspaceId)};i.length===1?n.push(new fs(this.view,this,l,i[0],!0)):n.push(new Ic(this.view,this,l,i))}catch(a){if(a instanceof Hr)continue;ce.error(a)}}this.children=n}return this.children}getTreeItem(){return new f.TreeItem("Repositories",f.TreeItemCollapsibleState.Expanded)}refresh(e=!1){e&&(this.children=void 0)}}s(Gu,"WorkspaceRepositoriesViewNode"),Ku([Bi()],Gu.prototype,"refresh",1);class Sp extends pp{constructor(e,n,r){super("remoteHub.views.workspaceRepositories",gr("remote view title","Remote Repositories"),e,r);this.workspaceId=n,this.configKey="workspaceRepositories",this.disposables.push(this.providerService.onDidChangeWorkspaceRepositories(this.onRepositoriesChanged,this),f.window.registerFileDecorationProvider({provideFileDecoration:(i,o)=>{if(!(i.scheme!=="remotehub-view"||i.authority!=="wsrepo"||!i.path.includes("/changes")))return{badge:"\u25CF",color:new f.ThemeColor("remoteHub.decorations.workspaceRepositoriesView.hasUncommittedChangesForegroundColor"),tooltip:gr("repositories view decoration has changes","Has Uncommitted Changes")}}}))}getRoot(){return new Gu(this)}onRepositoriesChanged(){this.refresh(!0)}registerCommands(){return[f.commands.registerCommand(this.getQualifiedCommand("refresh"),()=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.refresh"),this.providerService.workspaceRepositoriesRefresh(),void this.refresh(!0)),this),f.commands.registerCommand(this.getQualifiedCommand("open"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.open"),Ii(this.providerService,{name:e.name,uri:e.uri,location:$.CurrentWindow})),this),f.commands.registerCommand(this.getQualifiedCommand("openInNewWindow"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.openInNewWindow"),Ii(this.providerService,{name:e.name,uri:e.uri,location:$.NewWindow})),this),f.commands.registerCommand(this.getQualifiedCommand("applyAllChanges"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.applyAllChanges"),e.applyAllChanges()),this),f.commands.registerCommand(this.getQualifiedCommand("remove"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.remove"),e.remove()),this),f.commands.registerCommand(this.getQualifiedCommand("openChanges"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.openChanges"),e.openChanges()),this),f.commands.registerCommand(this.getQualifiedCommand("openFile"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.openFile"),e.openFile()),this),f.commands.registerCommand(this.getQualifiedCommand("applyChanges"),e=>(this.telemetryService.publicLog2("command.views.workspaceRepositories.applyChanges"),e.applyChanges()),this)]}async getRepositoryToApplyChangesetTo(e){const n=R(this.providerService.getVirtualCanonicalRootUri(e.uri)),r=this.providerService.repositories.filter(o=>R(o.canonicalUri)===n);return await oy(r,gr("apply changeset pick repository placeholder","Choose a repository to apply the changeset to"))}}s(Sp,"WorkspaceRepositoriesView");function iy(t,e){switch(t){case H.Branch:return e?gr("type pr branch","Pull Request #{0}",e.id):gr("type branch","Branch");case H.RemoteBranch:return e?gr("type pr remote branch","Pull Request #{0}",e.id):gr("type remote branch","Remote Branch");case H.Tag:return gr("type tag","Tag");case H.Commit:return gr("type commit","Commit")}}s(iy,"headTypeToString");function bp(t){switch(t){case"github":return new f.ThemeIcon("github");case"azurerepos":return new f.ThemeIcon("azure-devops");default:return new f.ThemeIcon("vm")}}s(bp,"providerToIconPath");async function oy(t,e){if(t.length!==0){if(t.length>1){const n=await f.window.showQuickPick(t.map(r=>({label:r.name,description:r.provider.name,repository:r})),{placeHolder:e});return n?n.repository:void 0}return t[0]}}s(oy,"getRepository");let Dc;function Tc(){return Dc}s(Tc,"getOpenActionsService");var qo;(function(t){t.HasCommitted="has:committed",t.Version="version"})(qo||(qo={}));let Pc;function _p(t){return Pc.globalState.get(t)}s(_p,"getState");async function Qu(t,e){return Pc.globalState.update(t,e)}s(Qu,"updateState");let Ep=!1;function ay(){return Ep}s(ay,"isPreRelease");async function sy(t){Pc=t,Rt.configure("remoteHub",t),ce.configure(t,"Remote Repositories",mt.get("logLevel")),Ln.start("Time to root directory",{log:!1});const e=lt.configure(t),n=new qa(t),r=t.extension.packageJSON.version;await Qu(qo.Version,r),await t.workspaceState.update(qo.Version,r);const[,i]=Pc.extension.packageJSON.version.split(".");Ep=Number.parseInt(i)%2==1;try{const o=new Br(n,t.workspaceState);Dc=new Og(o);const a=new up(o,Dc,n),c=new Lg(o);return typeof f.workspace.registerEditSessionIdentityProvider!==void 0&&t.subscriptions.push(f.workspace.registerEditSessionIdentityProvider(k.scheme,new Mg(o))),t.subscriptions.push(mt.onDidChange(l=>{!mt.changed(l,"logLevel")||(ce.logLevel=mt.get("logLevel"))}),o.onDidChangeRepositories(async l=>{for(const u of l.added)try{const d=await u.getMetadata(),{HEAD:h,defaultBranch:g,name:p,provider:C,pullRequest:v}=d,m=h.name.replace(/\//g,"\u2009\u2215\u2009");let b=" ";if(v!==void 0)b=` (PR ${v.id}) `;else if(h.type===H.Tag)b=` (${m}) `;else if(h.type===H.Commit)b=` (${m}) `;else if(h.type===H.Branch||h.type===H.RemoteBranch){const P=h.branch.name.replace(/\//g,"\u2009\u2215\u2009");h.branch.name!==g.name&&(b=` (${P})`)}const w={uri:u.uri,type:"folder",label:`${p}${b}[${C.name}]`};f.commands.executeCommand("_workbench.addToRecentlyOpened",w)}catch(d){ce.error(d,"Failed to add repository to recently opened")}}),new lp(o),new as(o),new hp(o,n),...Zm(o,t.extension.id,n),...uy(o,n),...await cy(o,a,t,n),new fp(o),new Sp(o,e,n),a,Dc,o,n),n.publicLog2("activate"),Promise.resolve(c)}catch(o){throw ce.error(o),o}}s(sy,"activate");async function cy(t,e,n,r){const i=[];if(xp()){const o=new Ag(t,r);t.registerVirtualIndexProvider("github",o),t.registerVirtualIndexProvider("azurerepos",o),i.push(o)}return i.push(ly(t,e)),i}s(cy,"registerProviders");function ly(t,e){async function n(){var i;try{let o=(i=f.extensions.getExtension("GitHub.vscode-pull-request-github"))!=null?i:f.extensions.getExtension("GitHub.vscode-pull-request-github-insiders");o||(ce.log("[ GHPR] Not currently installed or enabled; waiting..."),await new Promise(h=>{const g=f.extensions.onDidChange(()=>{var p;o=(p=f.extensions.getExtension("GitHub.vscode-pull-request-github"))!=null?p:f.extensions.getExtension("GitHub.vscode-pull-request-github-insiders"),o&&(g.dispose(),h())})})),ce.log("[ GHPR] Registering..."),_t(ve.HasPullRequestExtension,!0);const a=await o.activate();if(!a)throw new Error("Unable to get registration api");const c=a.registerGitProvider(e),l=t.onDidChangeRepositories(h=>u(h));async function u(h){const g=h.added.filter(p=>p.provider.id==="github");if(g.length!==0){ce.log("[ GHPR] Checking for opened PRs...");for(const p of g){const C=await t.getBestRemoteUri(p.uri,fi.PullRequest);if(!!C){l.dispose(),ce.log("[ GHPR] Opened PR found; preloading"),f.commands.executeCommand("github.api.preloadPullRequest",C.toString());return}}ce.log("[ GHPR] No opened PRs found")}}s(u,"onRepositoriesChanged"),ce.log("[ GHPR] Registration complete");const d=t.repositories;return d.length&&u({added:d,removed:[]}),f.Disposable.from(c,l)}catch(o){return ce.error(o,"[ GHPR] Registration failed;"),{dispose:()=>{}}}}s(n,"registerWithGHPR");const r=n();return f.Disposable.from({dispose:async()=>{var i;return void((i=await r)==null?void 0:i.dispose())}})}s(ly,"registerGitHub");function uy(t,e){if(!xp())return[];e.publicLog2("codex.enableRichNav",{});const n=new Ah(t);return[n,n.register(new Ru(e)),...Ru.createStatus()]}s(uy,"registerNavigationServiceProviders");function xp(){return f.env.uiKind===f.UIKind.Desktop||mt.get("richNavigation.enabled")===!0}s(xp,"isRichNavEnabled");const Xu=new Map,Ju=new Map;async function Tr(t,e){var n,r,i;if(e!==void 0&&typeof e!="string"&&(e=Br.getProviderId(e)),e&&Ju.has(e)){const o=Ju.get(e);if(!o)return;await Xu.get(o);return}for(const o of f.extensions.all){const a=o.id,{contributes:c}=o.packageJSON;if(!c||!["github.remotehub","ms-vscode.azure-repos"].includes(a.toLowerCase()))continue;const l=Xu.get(a),u=(r=(n=c.virtualWorkspaces)==null?void 0:n.providers)!=null?r:[],d=u.find(g=>g===e)!==void 0,h=u.length&&e===void 0;if(!l&&(h||d)){const g=(i=f.extensions.getExtension(a))==null?void 0:i.activate().then(p=>p.registerVirtualProviderService(t));if(g===void 0)return;Xu.set(a,g);for(const p of u)Ju.set(p,a);if(await g,e!==void 0&&d)return}else l&&await l}}s(Tr,"ensureProvidersRegistered")})(),module.exports=kc})();
