(()=>{var __webpack_modules__={29436:(e,t,n)=>{var r={};e["exports"]=r;r.themes={};var i=n(73837);var s=r.styles=n(39482);var o=Object.defineProperties;var a=new RegExp(/[\r\n]+/g);r.supportsColor=n(92028).supportsColor;if(typeof r.enabled==="undefined"){r.enabled=r.supportsColor()!==false}r.enable=function(){r.enabled=true};r.disable=function(){r.enabled=false};r.stripColors=r.strip=function(e){return(""+e).replace(/\x1B\[\d+m/g,"")};var c=r.stylize=function stylize(e,t){if(!r.enabled){return e+""}var n=s[t];if(!n&&t in r){return r[t](e)}return n.open+e+n.close};var u=/[|\\{}()[\]^$+*?.]/g;var escapeStringRegexp=function(e){if(typeof e!=="string"){throw new TypeError("Expected a string")}return e.replace(u,"\\$&")};function build(e){var t=function builder(){return applyStyle.apply(builder,arguments)};t._styles=e;t.__proto__=d;return t}var l=function(){var e={};s.grey=s.gray;Object.keys(s).forEach((function(t){s[t].closeRe=new RegExp(escapeStringRegexp(s[t].close),"g");e[t]={get:function(){return build(this._styles.concat(t))}}}));return e}();var d=o((function colors(){}),l);function applyStyle(){var e=Array.prototype.slice.call(arguments);var t=e.map((function(e){if(e!=null&&e.constructor===String){return e}else{return i.inspect(e)}})).join(" ");if(!r.enabled||!t){return t}var n=t.indexOf("\n")!=-1;var o=this._styles;var c=o.length;while(c--){var u=s[o[c]];t=u.open+t.replace(u.closeRe,u.open)+u.close;if(n){t=t.replace(a,(function(e){return u.close+e+u.open}))}}return t}r.setTheme=function(e){if(typeof e==="string"){console.log("colors.setTheme now only accepts an object, not a string.  "+"If you are trying to set a theme from a file, it is now your (the "+"caller's) responsibility to require the file.  The old syntax "+"looked like colors.setTheme(__dirname + "+"'/../themes/generic-logging.js'); The new syntax looks like "+"colors.setTheme(require(__dirname + "+"'/../themes/generic-logging.js'));");return}for(var t in e){(function(t){r[t]=function(n){if(typeof e[t]==="object"){var i=n;for(var s in e[t]){i=r[e[t][s]](i)}return i}return r[e[t]](n)}})(t)}};function init(){var e={};Object.keys(l).forEach((function(t){e[t]={get:function(){return build([t])}}}));return e}var f=function sequencer(e,t){var n=t.split("");n=n.map(e);return n.join("")};r.trap=n(51016);r.zalgo=n(46133);r.maps={};r.maps.america=n(88548)(r);r.maps.zebra=n(54139)(r);r.maps.rainbow=n(71494)(r);r.maps.random=n(86143)(r);for(var p in r.maps){(function(e){r[e]=function(t){return f(r.maps[e],t)}})(p)}o(r,init())},51016:e=>{e["exports"]=function runTheTrap(e,t){var n="";e=e||"Run the trap, drop the bass";e=e.split("");var r={a:["@","Ä„","Èº","É…","Î”","Î›","Ğ”"],b:["ÃŸ","Æ","Éƒ","É®","Î²","à¸¿"],c:["Â©","È»","Ï¾"],d:["Ã","ÆŠ","Ô€","Ô","Ô‚","Ôƒ"],e:["Ã‹","Ä•","Æ","É˜","Î£","Î¾","Ò¼","à©¬"],f:["Óº"],g:["É¢"],h:["Ä¦","Æ•","Ò¢","Òº","Ó‡","ÔŠ"],i:["à¼"],j:["Ä´"],k:["Ä¸","Ò ","Óƒ","Ô"],l:["Ä¹"],m:["Ê","Ó","Ó","Ô ","Ô¡","àµ©"],n:["Ã‘","Å‹","Æ","Í¶","Î ","ÒŠ"],o:["Ã˜","Ãµ","Ã¸","Ç¾","Ê˜","Ñº","×","Û","à¹"],p:["Ç·","Ò"],q:["à§"],r:["Â®","Æ¦","È","ÉŒ","Ê€","Ğ¯"],s:["Â§","Ï","ÏŸ","Ï¨"],t:["Å","Å¦","Í³"],u:["Æ±","Õ"],v:["×˜"],w:["Ğ¨","Ñ ","Ñ¼","àµ°"],x:["Ò²","Ó¾","Ó¼","Ó½"],y:["Â¥","Ò°","Ó‹"],z:["Æµ","É€"]};e.forEach((function(e){e=e.toLowerCase();var t=r[e]||[" "];var i=Math.floor(Math.random()*t.length);if(typeof r[e]!=="undefined"){n+=r[e][i]}else{n+=e}}));return n}},46133:e=>{e["exports"]=function zalgo(e,t){e=e||"   he is here   ";var n={up:["Ì","Ì","Ì„","Ì…","Ì¿","Ì‘","Ì†","Ì","Í’","Í—","Í‘","Ì‡","Ìˆ","ÌŠ","Í‚","Ì“","Ìˆ","ÍŠ","Í‹","ÍŒ","Ìƒ","Ì‚","ÌŒ","Í","Ì€","Ì","Ì‹","Ì","Ì’","Ì“","Ì”","Ì½","Ì‰","Í£","Í¤","Í¥","Í¦","Í§","Í¨","Í©","Íª","Í«","Í¬","Í­","Í®","Í¯","Ì¾","Í›","Í†","Ìš"],down:["Ì–","Ì—","Ì˜","Ì™","Ìœ","Ì","Ì","ÌŸ","Ì ","Ì¤","Ì¥","Ì¦","Ì©","Ìª","Ì«","Ì¬","Ì­","Ì®","Ì¯","Ì°","Ì±","Ì²","Ì³","Ì¹","Ìº","Ì»","Ì¼","Í…","Í‡","Íˆ","Í‰","Í","Í","Í“","Í”","Í•","Í–","Í™","Íš","Ì£"],mid:["Ì•","Ì›","Ì€","Ì","Í˜","Ì¡","Ì¢","Ì§","Ì¨","Ì´","Ìµ","Ì¶","Íœ","Í","Í","ÍŸ","Í ","Í¢","Ì¸","Ì·","Í¡"," Ò‰"]};var r=[].concat(n.up,n.down,n.mid);function randomNumber(e){var t=Math.floor(Math.random()*e);return t}function isChar(e){var t=false;r.filter((function(n){t=n===e}));return t}function heComes(e,t){var r="";var i;var s;t=t||{};t["up"]=typeof t["up"]!=="undefined"?t["up"]:true;t["mid"]=typeof t["mid"]!=="undefined"?t["mid"]:true;t["down"]=typeof t["down"]!=="undefined"?t["down"]:true;t["size"]=typeof t["size"]!=="undefined"?t["size"]:"maxi";e=e.split("");for(s in e){if(isChar(s)){continue}r=r+e[s];i={up:0,down:0,mid:0};switch(t.size){case"mini":i.up=randomNumber(8);i.mid=randomNumber(2);i.down=randomNumber(8);break;case"maxi":i.up=randomNumber(16)+3;i.mid=randomNumber(4)+1;i.down=randomNumber(64)+3;break;default:i.up=randomNumber(8)+1;i.mid=randomNumber(6)/2;i.down=randomNumber(8)+1;break}var o=["up","mid","down"];for(var a in o){var c=o[a];for(var u=0;u<=i[c];u++){if(t[c]){r=r+n[c][randomNumber(n[c].length)]}}}}return r}return heComes(e,t)}},88548:e=>{e["exports"]=function(e){return function(t,n,r){if(t===" ")return t;switch(n%3){case 0:return e.red(t);case 1:return e.white(t);case 2:return e.blue(t)}}}},71494:e=>{e["exports"]=function(e){var t=["red","yellow","green","blue","magenta"];return function(n,r,i){if(n===" "){return n}else{return e[t[r++%t.length]](n)}}}},86143:e=>{e["exports"]=function(e){var t=["underline","inverse","grey","yellow","red","green","blue","white","cyan","magenta","brightYellow","brightRed","brightGreen","brightBlue","brightWhite","brightCyan","brightMagenta"];return function(n,r,i){return n===" "?n:e[t[Math.round(Math.random()*(t.length-2))]](n)}}},54139:e=>{e["exports"]=function(e){return function(t,n,r){return n%2===0?t:e.inverse(t)}}},39482:e=>{var t={};e["exports"]=t;var n={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],grey:[90,39],brightRed:[91,39],brightGreen:[92,39],brightYellow:[93,39],brightBlue:[94,39],brightMagenta:[95,39],brightCyan:[96,39],brightWhite:[97,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgGray:[100,49],bgGrey:[100,49],bgBrightRed:[101,49],bgBrightGreen:[102,49],bgBrightYellow:[103,49],bgBrightBlue:[104,49],bgBrightMagenta:[105,49],bgBrightCyan:[106,49],bgBrightWhite:[107,49],blackBG:[40,49],redBG:[41,49],greenBG:[42,49],yellowBG:[43,49],blueBG:[44,49],magentaBG:[45,49],cyanBG:[46,49],whiteBG:[47,49]};Object.keys(n).forEach((function(e){var r=n[e];var i=t[e]=[];i.open="["+r[0]+"m";i.close="["+r[1]+"m"}))},86912:e=>{"use strict";e.exports=function(e,t){t=t||process.argv;var n=t.indexOf("--");var r=/^-{1,2}/.test(e)?"":"--";var i=t.indexOf(r+e);return i!==-1&&(n===-1?true:i<n)}},92028:(e,t,n)=>{"use strict";var r=n(22037);var i=n(86912);var s=process.env;var o=void 0;if(i("no-color")||i("no-colors")||i("color=false")){o=false}else if(i("color")||i("colors")||i("color=true")||i("color=always")){o=true}if("FORCE_COLOR"in s){o=s.FORCE_COLOR.length===0||parseInt(s.FORCE_COLOR,10)!==0}function translateLevel(e){if(e===0){return false}return{level:e,hasBasic:true,has256:e>=2,has16m:e>=3}}function supportsColor(e){if(o===false){return 0}if(i("color=16m")||i("color=full")||i("color=truecolor")){return 3}if(i("color=256")){return 2}if(e&&!e.isTTY&&o!==true){return 0}var t=o?1:0;if(process.platform==="win32"){var n=r.release().split(".");if(Number(process.versions.node.split(".")[0])>=8&&Number(n[0])>=10&&Number(n[2])>=10586){return Number(n[2])>=14931?3:2}return 1}if("CI"in s){if(["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some((function(e){return e in s}))||s.CI_NAME==="codeship"){return 1}return t}if("TEAMCITY_VERSION"in s){return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(s.TEAMCITY_VERSION)?1:0}if("TERM_PROGRAM"in s){var a=parseInt((s.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(s.TERM_PROGRAM){case"iTerm.app":return a>=3?3:2;case"Hyper":return 3;case"Apple_Terminal":return 2}}if(/-256(color)?$/i.test(s.TERM)){return 2}if(/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test(s.TERM)){return 1}if("COLORTERM"in s){return 1}if(s.TERM==="dumb"){return t}return t}function getSupportLevel(e){var t=supportsColor(e);return translateLevel(t)}e.exports={supportsColor:getSupportLevel,stdout:getSupportLevel(process.stdout),stderr:getSupportLevel(process.stderr)}},16358:(e,t,n)=>{var r=n(29436);e["exports"]=r},2593:(e,t,n)=>{var r=n(47022);e.exports=function create(e){return function adapter(t){try{return r(t,e())}catch(e){}return false}}},15112:(e,t,n)=>{var r=n(2593);e.exports=r((function processenv(){return process.env.DEBUG||process.env.DIAGNOSTICS}))},44646:e=>{var t=[];var n=[];var r=function devnull(){};function use(e){if(~t.indexOf(e))return false;t.push(e);return true}function set(e){r=e}function enabled(e){var n=[];for(var r=0;r<t.length;r++){if(t[r].async){n.push(t[r]);continue}if(t[r](e))return true}if(!n.length)return false;return new Promise((function pinky(t){Promise.all(n.map((function prebind(t){return t(e)}))).then((function resolved(e){t(e.some(Boolean))}))}))}function modify(e){if(~n.indexOf(e))return false;n.push(e);return true}function write(){r.apply(r,arguments)}function process(e){for(var t=0;t<n.length;t++){e=n[t].apply(n[t],arguments)}return e}function introduce(e,t){var n=Object.prototype.hasOwnProperty;for(var r in t){if(n.call(t,r)){e[r]=t[r]}}return e}function nope(e){e.enabled=false;e.modify=modify;e.set=set;e.use=use;return introduce((function diagnopes(){return false}),e)}function yep(e){function diagnostics(){var t=Array.prototype.slice.call(arguments,0);write.call(write,e,process(t,e));return true}e.enabled=true;e.modify=modify;e.set=set;e.use=use;return introduce(diagnostics,e)}e.exports=function create(e){e.introduce=introduce;e.enabled=enabled;e.process=process;e.modify=modify;e.write=write;e.nope=nope;e.yep=yep;e.set=set;e.use=use;return e}},46651:e=>{e.exports=function(e,t){try{Function.prototype.apply.call(console.log,console,t)}catch(e){}}},80896:(e,t,n)=>{var r=n(27601);var i=n(54375);e.exports=function ansiModifier(e,t){var n=t.namespace;var s=t.colors!==false?i(n+":",r(n)):n+":";e[0]=s+" "+e[0];return e}},31945:(e,t,n)=>{var r=n(44646);var i=n(76224).isatty(1);var s=r((function dev(e,t){t=t||{};t.colors="colors"in t?t.colors:i;t.namespace=e;t.prod=false;t.dev=true;if(!dev.enabled(e)&&!(t.force||dev.force)){return dev.nope(t)}return dev.yep(t)}));s.modify(n(80896));s.use(n(15112));s.set(n(46651));e.exports=s},2039:(e,t,n)=>{if(process.env.NODE_ENV==="production"){e.exports=n(66746)}else{e.exports=n(31945)}},66746:(e,t,n)=>{var r=n(44646);var i=r((function prod(e,t){t=t||{};t.namespace=e;t.prod=true;t.dev=false;if(!(t.force||prod.force))return prod.nope(t);return prod.yep(t)}));e.exports=i},27729:(e,t,n)=>{"use strict";function __export(e){for(var n in e)if(!t.hasOwnProperty(n))t[n]=e[n]}Object.defineProperty(t,"__esModule",{value:true});__export(n(79696))},79696:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});const i=n(57147);const s=r(n(67984));const o=s.default("@kwsites/file-exists");function check(e,t,n){o(`checking %s`,e);try{const r=i.statSync(e);if(r.isFile()&&t){o(`[OK] path represents a file`);return true}if(r.isDirectory()&&n){o(`[OK] path represents a directory`);return true}o(`[FAIL] path represents something other than a file or directory`);return false}catch(e){if(e.code==="ENOENT"){o(`[FAIL] path is not accessible: %o`,e);return false}o(`[FATAL] %o`,e);throw e}}function exists(e,n=t.READABLE){return check(e,(n&t.FILE)>0,(n&t.FOLDER)>0)}t.exists=exists;t.FILE=1;t.FOLDER=2;t.READABLE=t.FILE+t.FOLDER},42841:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.createDeferred=t.deferred=void 0;function deferred(){let e;let t;let n="pending";const r=new Promise(((n,r)=>{e=n;t=r}));return{promise:r,done(t){if(n==="pending"){n="resolved";e(t)}},fail(e){if(n==="pending"){n="rejected";t(e)}},get fulfilled(){return n!=="pending"},get status(){return n}}}t.deferred=deferred;t.createDeferred=deferred;t["default"]=deferred},52275:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};const i=n(82361);const s=r(n(67984));const o=r(n(82393));const a=s.default("agent-base");function isAgent(e){return Boolean(e)&&typeof e.addRequest==="function"}function isSecureEndpoint(){const{stack:e}=new Error;if(typeof e!=="string")return false;return e.split("\n").some((e=>e.indexOf("(https.js:")!==-1||e.indexOf("node:https:")!==-1))}function createAgent(e,t){return new createAgent.Agent(e,t)}(function(e){class Agent extends i.EventEmitter{constructor(e,t){super();let n=t;if(typeof e==="function"){this.callback=e}else if(e){n=e}this.timeout=null;if(n&&typeof n.timeout==="number"){this.timeout=n.timeout}this.maxFreeSockets=1;this.maxSockets=1;this.maxTotalSockets=Infinity;this.sockets={};this.freeSockets={};this.requests={};this.options={}}get defaultPort(){if(typeof this.explicitDefaultPort==="number"){return this.explicitDefaultPort}return isSecureEndpoint()?443:80}set defaultPort(e){this.explicitDefaultPort=e}get protocol(){if(typeof this.explicitProtocol==="string"){return this.explicitProtocol}return isSecureEndpoint()?"https:":"http:"}set protocol(e){this.explicitProtocol=e}callback(e,t,n){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(e,t){const n=Object.assign({},t);if(typeof n.secureEndpoint!=="boolean"){n.secureEndpoint=isSecureEndpoint()}if(n.host==null){n.host="localhost"}if(n.port==null){n.port=n.secureEndpoint?443:80}if(n.protocol==null){n.protocol=n.secureEndpoint?"https:":"http:"}if(n.host&&n.path){delete n.path}delete n.agent;delete n.hostname;delete n._defaultAgent;delete n.defaultPort;delete n.createConnection;e._last=true;e.shouldKeepAlive=false;let r=false;let i=null;const s=n.timeout||this.timeout;const onerror=t=>{if(e._hadError)return;e.emit("error",t);e._hadError=true};const ontimeout=()=>{i=null;r=true;const e=new Error(`A "socket" was not created for HTTP request before ${s}ms`);e.code="ETIMEOUT";onerror(e)};const callbackError=e=>{if(r)return;if(i!==null){clearTimeout(i);i=null}onerror(e)};const onsocket=t=>{if(r)return;if(i!=null){clearTimeout(i);i=null}if(isAgent(t)){a("Callback returned another Agent instance %o",t.constructor.name);t.addRequest(e,n);return}if(t){t.once("free",(()=>{this.freeSocket(t,n)}));e.onSocket(t);return}const s=new Error(`no Duplex stream was returned to agent-base for \`${e.method} ${e.path}\``);onerror(s)};if(typeof this.callback!=="function"){onerror(new Error("`callback` is not defined"));return}if(!this.promisifiedCallback){if(this.callback.length>=3){a("Converting legacy callback function to promise");this.promisifiedCallback=o.default(this.callback)}else{this.promisifiedCallback=this.callback}}if(typeof s==="number"&&s>0){i=setTimeout(ontimeout,s)}if("port"in n&&typeof n.port!=="number"){n.port=Number(n.port)}try{a("Resolving socket for %o request: %o",n.protocol,`${e.method} ${e.path}`);Promise.resolve(this.promisifiedCallback(e,n)).then(onsocket,callbackError)}catch(e){Promise.reject(e).catch(callbackError)}}freeSocket(e,t){a("Freeing socket %o %o",e.constructor.name,t);e.destroy()}destroy(){a("Destroying agent %o",this.constructor.name)}}e.Agent=Agent;e.prototype=e.Agent.prototype})(createAgent||(createAgent={}));e.exports=createAgent},82393:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});function promisify(e){return function(t,n){return new Promise(((r,i)=>{e.call(this,t,n,((e,t)=>{if(e){i(e)}else{r(t)}}))}))}}t["default"]=promisify},41431:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=asyncify;var r=n(13600);var i=_interopRequireDefault(r);var s=n(53992);var o=_interopRequireDefault(s);var a=n(50456);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function asyncify(e){if((0,a.isAsync)(e)){return function(...t){const n=t.pop();const r=e.apply(this,t);return handlePromise(r,n)}}return(0,i.default)((function(t,n){var r;try{r=e.apply(this,t)}catch(e){return n(e)}if(r&&typeof r.then==="function"){return handlePromise(r,n)}else{n(null,r)}}))}function handlePromise(e,t){return e.then((e=>{invokeCallback(t,null,e)}),(e=>{invokeCallback(t,e&&e.message?e:new Error(e))}))}function invokeCallback(e,t,n){try{e(t,n)}catch(e){(0,o.default)((e=>{throw e}),e)}}e.exports=t["default"]},66390:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n(10860);var i=_interopRequireDefault(r);var s=n(45071);var o=_interopRequireDefault(s);var a=n(39378);var c=_interopRequireDefault(a);var u=n(69234);var l=_interopRequireDefault(u);var d=n(13456);var f=_interopRequireDefault(d);var p=n(50456);var h=_interopRequireDefault(p);var m=n(33638);var g=_interopRequireDefault(m);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function eachOfArrayLike(e,t,n){n=(0,l.default)(n);var r=0,i=0,{length:s}=e,a=false;if(s===0){n(null)}function iteratorCallback(e,t){if(e===false){a=true}if(a===true)return;if(e){n(e)}else if(++i===s||t===o.default){n(null)}}for(;r<s;r++){t(e[r],r,(0,f.default)(iteratorCallback))}}function eachOfGeneric(e,t,n){return(0,c.default)(e,Infinity,t,n)}function eachOf(e,t,n){var r=(0,i.default)(e)?eachOfArrayLike:eachOfGeneric;return r(e,(0,h.default)(t),n)}t["default"]=(0,g.default)(eachOf,3);e.exports=t["default"]},39378:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n(55604);var i=_interopRequireDefault(r);var s=n(50456);var o=_interopRequireDefault(s);var a=n(33638);var c=_interopRequireDefault(a);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function eachOfLimit(e,t,n,r){return(0,i.default)(t)(e,(0,o.default)(n),r)}t["default"]=(0,c.default)(eachOfLimit,4);e.exports=t["default"]},52978:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n(39378);var i=_interopRequireDefault(r);var s=n(33638);var o=_interopRequireDefault(s);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function eachOfSeries(e,t,n){return(0,i.default)(e,1,t,n)}t["default"]=(0,o.default)(eachOfSeries,3);e.exports=t["default"]},6270:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n(66390);var i=_interopRequireDefault(r);var s=n(10151);var o=_interopRequireDefault(s);var a=n(50456);var c=_interopRequireDefault(a);var u=n(33638);var l=_interopRequireDefault(u);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function eachLimit(e,t,n){return(0,i.default)(e,(0,o.default)((0,c.default)(t)),n)}t["default"]=(0,l.default)(eachLimit,3);e.exports=t["default"]},77110:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=asyncEachOfLimit;var r=n(45071);var i=_interopRequireDefault(r);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function asyncEachOfLimit(e,t,n,r){let s=false;let o=false;let a=false;let c=0;let u=0;function replenish(){if(c>=t||a||s)return;a=true;e.next().then((({value:e,done:t})=>{if(o||s)return;a=false;if(t){s=true;if(c<=0){r(null)}return}c++;n(e,u,iterateeCallback);u++;replenish()})).catch(handleError)}function iterateeCallback(e,t){c-=1;if(o)return;if(e)return handleError(e);if(e===false){s=true;o=true;return}if(t===i.default||s&&c<=0){s=true;return r(null)}replenish()}function handleError(e){if(o)return;a=false;s=true;r(e)}replenish()}e.exports=t["default"]},33638:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=awaitify;function awaitify(e,t=e.length){if(!t)throw new Error("arity is undefined");function awaitable(...n){if(typeof n[t-1]==="function"){return e.apply(this,n)}return new Promise(((r,i)=>{n[t-1]=(e,...t)=>{if(e)return i(e);r(t.length>1?t:t[0])};e.apply(this,n)}))}return awaitable}e.exports=t["default"]},45071:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const n={};t["default"]=n;e.exports=t["default"]},55604:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n(69234);var i=_interopRequireDefault(r);var s=n(50023);var o=_interopRequireDefault(s);var a=n(13456);var c=_interopRequireDefault(a);var u=n(50456);var l=n(77110);var d=_interopRequireDefault(l);var f=n(45071);var p=_interopRequireDefault(f);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t["default"]=e=>(t,n,r)=>{r=(0,i.default)(r);if(e<=0){throw new RangeError("concurrency limit cannot be less than 1")}if(!t){return r(null)}if((0,u.isAsyncGenerator)(t)){return(0,d.default)(t,e,n,r)}if((0,u.isAsyncIterable)(t)){return(0,d.default)(t[Symbol.asyncIterator](),e,n,r)}var s=(0,o.default)(t);var a=false;var l=false;var f=0;var h=false;function iterateeCallback(e,t){if(l)return;f-=1;if(e){a=true;r(e)}else if(e===false){a=true;l=true}else if(t===p.default||a&&f<=0){a=true;return r(null)}else if(!h){replenish()}}function replenish(){h=true;while(f<e&&!a){var t=s();if(t===null){a=true;if(f<=0){r(null)}return}f+=1;n(t.value,t.key,(0,c.default)(iterateeCallback))}h=false}replenish()};e.exports=t["default"]},60762:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=function(e){return e[Symbol.iterator]&&e[Symbol.iterator]()};e.exports=t["default"]},13600:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=function(e){return function(...t){var n=t.pop();return e.call(this,t,n)}};e.exports=t["default"]},10860:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=isArrayLike;function isArrayLike(e){return e&&typeof e.length==="number"&&e.length>=0&&e.length%1===0}e.exports=t["default"]},50023:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=createIterator;var r=n(10860);var i=_interopRequireDefault(r);var s=n(60762);var o=_interopRequireDefault(s);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function createArrayIterator(e){var t=-1;var n=e.length;return function next(){return++t<n?{value:e[t],key:t}:null}}function createES2015Iterator(e){var t=-1;return function next(){var n=e.next();if(n.done)return null;t++;return{value:n.value,key:t}}}function createObjectIterator(e){var t=e?Object.keys(e):[];var n=-1;var r=t.length;return function next(){var i=t[++n];if(i==="__proto__"){return next()}return n<r?{value:e[i],key:i}:null}}function createIterator(e){if((0,i.default)(e)){return createArrayIterator(e)}var t=(0,o.default)(e);return t?createES2015Iterator(t):createObjectIterator(e)}e.exports=t["default"]},69234:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=once;function once(e){function wrapper(...t){if(e===null)return;var n=e;e=null;n.apply(this,t)}Object.assign(wrapper,e);return wrapper}e.exports=t["default"]},13456:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=onlyOnce;function onlyOnce(e){return function(...t){if(e===null)throw new Error("Callback was already called.");var n=e;e=null;n.apply(this,t)}}e.exports=t["default"]},99632:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});var r=n(10860);var i=_interopRequireDefault(r);var s=n(50456);var o=_interopRequireDefault(s);var a=n(33638);var c=_interopRequireDefault(a);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}t["default"]=(0,c.default)(((e,t,n)=>{var r=(0,i.default)(t)?[]:{};e(t,((e,t,n)=>{(0,o.default)(e)(((e,...i)=>{if(i.length<2){[i]=i}r[t]=i;n(e)}))}),(e=>n(e,r)))}),3);e.exports=t["default"]},53992:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.fallback=fallback;t.wrap=wrap;var n=t.hasQueueMicrotask=typeof queueMicrotask==="function"&&queueMicrotask;var r=t.hasSetImmediate=typeof setImmediate==="function"&&setImmediate;var i=t.hasNextTick=typeof process==="object"&&typeof process.nextTick==="function";function fallback(e){setTimeout(e,0)}function wrap(e){return(t,...n)=>e((()=>t(...n)))}var s;if(n){s=queueMicrotask}else if(r){s=setImmediate}else if(i){s=process.nextTick}else{s=fallback}t["default"]=wrap(s)},10151:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=_withoutIndex;function _withoutIndex(e){return(t,n,r)=>e(t,r)}e.exports=t["default"]},50456:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isAsyncIterable=t.isAsyncGenerator=t.isAsync=undefined;var r=n(41431);var i=_interopRequireDefault(r);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function isAsync(e){return e[Symbol.toStringTag]==="AsyncFunction"}function isAsyncGenerator(e){return e[Symbol.toStringTag]==="AsyncGenerator"}function isAsyncIterable(e){return typeof e[Symbol.asyncIterator]==="function"}function wrapAsync(e){if(typeof e!=="function")throw new Error("expected a function");return isAsync(e)?(0,i.default)(e):e}t["default"]=wrapAsync;t.isAsync=isAsync;t.isAsyncGenerator=isAsyncGenerator;t.isAsyncIterable=isAsyncIterable},30384:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t["default"]=series;var r=n(99632);var i=_interopRequireDefault(r);var s=n(52978);var o=_interopRequireDefault(s);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function series(e,t){return(0,i.default)(o.default,e,t)}e.exports=t["default"]},23353:e=>{"use strict";e.exports=balanced;function balanced(e,t,n){if(e instanceof RegExp)e=maybeMatch(e,n);if(t instanceof RegExp)t=maybeMatch(t,n);var r=range(e,t,n);return r&&{start:r[0],end:r[1],pre:n.slice(0,r[0]),body:n.slice(r[0]+e.length,r[1]),post:n.slice(r[1]+t.length)}}function maybeMatch(e,t){var n=t.match(e);return n?n[0]:null}balanced.range=range;function range(e,t,n){var r,i,s,o,a;var c=n.indexOf(e);var u=n.indexOf(t,c+1);var l=c;if(c>=0&&u>0){if(e===t){return[c,u]}r=[];s=n.length;while(l>=0&&!a){if(l==c){r.push(l);c=n.indexOf(e,l+1)}else if(r.length==1){a=[r.pop(),u]}else{i=r.pop();if(i<s){s=i;o=u}u=n.indexOf(t,l+1)}l=c<u&&c>=0?c:u}if(r.length){a=[s,o]}}return a}},73197:(e,t,n)=>{var r=n(84527);var i=n(23353);e.exports=expandTop;var s="\0SLASH"+Math.random()+"\0";var o="\0OPEN"+Math.random()+"\0";var a="\0CLOSE"+Math.random()+"\0";var c="\0COMMA"+Math.random()+"\0";var u="\0PERIOD"+Math.random()+"\0";function numeric(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function escapeBraces(e){return e.split("\\\\").join(s).split("\\{").join(o).split("\\}").join(a).split("\\,").join(c).split("\\.").join(u)}function unescapeBraces(e){return e.split(s).join("\\").split(o).join("{").split(a).join("}").split(c).join(",").split(u).join(".")}function parseCommaParts(e){if(!e)return[""];var t=[];var n=i("{","}",e);if(!n)return e.split(",");var r=n.pre;var s=n.body;var o=n.post;var a=r.split(",");a[a.length-1]+="{"+s+"}";var c=parseCommaParts(o);if(o.length){a[a.length-1]+=c.shift();a.push.apply(a,c)}t.push.apply(t,a);return t}function expandTop(e){if(!e)return[];if(e.substr(0,2)==="{}"){e="\\{\\}"+e.substr(2)}return expand(escapeBraces(e),true).map(unescapeBraces)}function identity(e){return e}function embrace(e){return"{"+e+"}"}function isPadded(e){return/^-?0\d/.test(e)}function lte(e,t){return e<=t}function gte(e,t){return e>=t}function expand(e,t){var n=[];var s=i("{","}",e);if(!s||/\$$/.test(s.pre))return[e];var o=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(s.body);var c=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(s.body);var u=o||c;var l=s.body.indexOf(",")>=0;if(!u&&!l){if(s.post.match(/,.*\}/)){e=s.pre+"{"+s.body+a+s.post;return expand(e)}return[e]}var d;if(u){d=s.body.split(/\.\./)}else{d=parseCommaParts(s.body);if(d.length===1){d=expand(d[0],false).map(embrace);if(d.length===1){var f=s.post.length?expand(s.post,false):[""];return f.map((function(e){return s.pre+d[0]+e}))}}}var p=s.pre;var f=s.post.length?expand(s.post,false):[""];var h;if(u){var m=numeric(d[0]);var g=numeric(d[1]);var v=Math.max(d[0].length,d[1].length);var y=d.length==3?Math.abs(numeric(d[2])):1;var b=lte;var _=g<m;if(_){y*=-1;b=gte}var S=d.some(isPadded);h=[];for(var w=m;b(w,g);w+=y){var T;if(c){T=String.fromCharCode(w);if(T==="\\")T=""}else{T=String(w);if(S){var k=v-T.length;if(k>0){var C=new Array(k+1).join("0");if(w<0)T="-"+C+T.slice(1);else T=C+T}}}h.push(T)}}else{h=r(d,(function(e){return expand(e,false)}))}for(var E=0;E<h.length;E++){for(var R=0;R<f.length;R++){var x=p+h[E]+f[R];if(!t||u||x)n.push(x)}}return n}},9598:(e,t,n)=>{var r=n(59120);var i={};for(var s in r){if(r.hasOwnProperty(s)){i[r[s]]=s}}var o=e.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var a in o){if(o.hasOwnProperty(a)){if(!("channels"in o[a])){throw new Error("missing channels property: "+a)}if(!("labels"in o[a])){throw new Error("missing channel labels property: "+a)}if(o[a].labels.length!==o[a].channels){throw new Error("channel and label counts mismatch: "+a)}var c=o[a].channels;var u=o[a].labels;delete o[a].channels;delete o[a].labels;Object.defineProperty(o[a],"channels",{value:c});Object.defineProperty(o[a],"labels",{value:u})}}o.rgb.hsl=function(e){var t=e[0]/255;var n=e[1]/255;var r=e[2]/255;var i=Math.min(t,n,r);var s=Math.max(t,n,r);var o=s-i;var a;var c;var u;if(s===i){a=0}else if(t===s){a=(n-r)/o}else if(n===s){a=2+(r-t)/o}else if(r===s){a=4+(t-n)/o}a=Math.min(a*60,360);if(a<0){a+=360}u=(i+s)/2;if(s===i){c=0}else if(u<=.5){c=o/(s+i)}else{c=o/(2-s-i)}return[a,c*100,u*100]};o.rgb.hsv=function(e){var t;var n;var r;var i;var s;var o=e[0]/255;var a=e[1]/255;var c=e[2]/255;var u=Math.max(o,a,c);var l=u-Math.min(o,a,c);var diffc=function(e){return(u-e)/6/l+1/2};if(l===0){i=s=0}else{s=l/u;t=diffc(o);n=diffc(a);r=diffc(c);if(o===u){i=r-n}else if(a===u){i=1/3+t-r}else if(c===u){i=2/3+n-t}if(i<0){i+=1}else if(i>1){i-=1}}return[i*360,s*100,u*100]};o.rgb.hwb=function(e){var t=e[0];var n=e[1];var r=e[2];var i=o.rgb.hsl(e)[0];var s=1/255*Math.min(t,Math.min(n,r));r=1-1/255*Math.max(t,Math.max(n,r));return[i,s*100,r*100]};o.rgb.cmyk=function(e){var t=e[0]/255;var n=e[1]/255;var r=e[2]/255;var i;var s;var o;var a;a=Math.min(1-t,1-n,1-r);i=(1-t-a)/(1-a)||0;s=(1-n-a)/(1-a)||0;o=(1-r-a)/(1-a)||0;return[i*100,s*100,o*100,a*100]};function comparativeDistance(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2)}o.rgb.keyword=function(e){var t=i[e];if(t){return t}var n=Infinity;var s;for(var o in r){if(r.hasOwnProperty(o)){var a=r[o];var c=comparativeDistance(e,a);if(c<n){n=c;s=o}}}return s};o.keyword.rgb=function(e){return r[e]};o.rgb.xyz=function(e){var t=e[0]/255;var n=e[1]/255;var r=e[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92;n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92;r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92;var i=t*.4124+n*.3576+r*.1805;var s=t*.2126+n*.7152+r*.0722;var o=t*.0193+n*.1192+r*.9505;return[i*100,s*100,o*100]};o.rgb.lab=function(e){var t=o.rgb.xyz(e);var n=t[0];var r=t[1];var i=t[2];var s;var a;var c;n/=95.047;r/=100;i/=108.883;n=n>.008856?Math.pow(n,1/3):7.787*n+16/116;r=r>.008856?Math.pow(r,1/3):7.787*r+16/116;i=i>.008856?Math.pow(i,1/3):7.787*i+16/116;s=116*r-16;a=500*(n-r);c=200*(r-i);return[s,a,c]};o.hsl.rgb=function(e){var t=e[0]/360;var n=e[1]/100;var r=e[2]/100;var i;var s;var o;var a;var c;if(n===0){c=r*255;return[c,c,c]}if(r<.5){s=r*(1+n)}else{s=r+n-r*n}i=2*r-s;a=[0,0,0];for(var u=0;u<3;u++){o=t+1/3*-(u-1);if(o<0){o++}if(o>1){o--}if(6*o<1){c=i+(s-i)*6*o}else if(2*o<1){c=s}else if(3*o<2){c=i+(s-i)*(2/3-o)*6}else{c=i}a[u]=c*255}return a};o.hsl.hsv=function(e){var t=e[0];var n=e[1]/100;var r=e[2]/100;var i=n;var s=Math.max(r,.01);var o;var a;r*=2;n*=r<=1?r:2-r;i*=s<=1?s:2-s;a=(r+n)/2;o=r===0?2*i/(s+i):2*n/(r+n);return[t,o*100,a*100]};o.hsv.rgb=function(e){var t=e[0]/60;var n=e[1]/100;var r=e[2]/100;var i=Math.floor(t)%6;var s=t-Math.floor(t);var o=255*r*(1-n);var a=255*r*(1-n*s);var c=255*r*(1-n*(1-s));r*=255;switch(i){case 0:return[r,c,o];case 1:return[a,r,o];case 2:return[o,r,c];case 3:return[o,a,r];case 4:return[c,o,r];case 5:return[r,o,a]}};o.hsv.hsl=function(e){var t=e[0];var n=e[1]/100;var r=e[2]/100;var i=Math.max(r,.01);var s;var o;var a;a=(2-n)*r;s=(2-n)*i;o=n*i;o/=s<=1?s:2-s;o=o||0;a/=2;return[t,o*100,a*100]};o.hwb.rgb=function(e){var t=e[0]/360;var n=e[1]/100;var r=e[2]/100;var i=n+r;var s;var o;var a;var c;if(i>1){n/=i;r/=i}s=Math.floor(6*t);o=1-r;a=6*t-s;if((s&1)!==0){a=1-a}c=n+a*(o-n);var u;var l;var d;switch(s){default:case 6:case 0:u=o;l=c;d=n;break;case 1:u=c;l=o;d=n;break;case 2:u=n;l=o;d=c;break;case 3:u=n;l=c;d=o;break;case 4:u=c;l=n;d=o;break;case 5:u=o;l=n;d=c;break}return[u*255,l*255,d*255]};o.cmyk.rgb=function(e){var t=e[0]/100;var n=e[1]/100;var r=e[2]/100;var i=e[3]/100;var s;var o;var a;s=1-Math.min(1,t*(1-i)+i);o=1-Math.min(1,n*(1-i)+i);a=1-Math.min(1,r*(1-i)+i);return[s*255,o*255,a*255]};o.xyz.rgb=function(e){var t=e[0]/100;var n=e[1]/100;var r=e[2]/100;var i;var s;var o;i=t*3.2406+n*-1.5372+r*-.4986;s=t*-.9689+n*1.8758+r*.0415;o=t*.0557+n*-.204+r*1.057;i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*12.92;s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s*12.92;o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o*12.92;i=Math.min(Math.max(0,i),1);s=Math.min(Math.max(0,s),1);o=Math.min(Math.max(0,o),1);return[i*255,s*255,o*255]};o.xyz.lab=function(e){var t=e[0];var n=e[1];var r=e[2];var i;var s;var o;t/=95.047;n/=100;r/=108.883;t=t>.008856?Math.pow(t,1/3):7.787*t+16/116;n=n>.008856?Math.pow(n,1/3):7.787*n+16/116;r=r>.008856?Math.pow(r,1/3):7.787*r+16/116;i=116*n-16;s=500*(t-n);o=200*(n-r);return[i,s,o]};o.lab.xyz=function(e){var t=e[0];var n=e[1];var r=e[2];var i;var s;var o;s=(t+16)/116;i=n/500+s;o=s-r/200;var a=Math.pow(s,3);var c=Math.pow(i,3);var u=Math.pow(o,3);s=a>.008856?a:(s-16/116)/7.787;i=c>.008856?c:(i-16/116)/7.787;o=u>.008856?u:(o-16/116)/7.787;i*=95.047;s*=100;o*=108.883;return[i,s,o]};o.lab.lch=function(e){var t=e[0];var n=e[1];var r=e[2];var i;var s;var o;i=Math.atan2(r,n);s=i*360/2/Math.PI;if(s<0){s+=360}o=Math.sqrt(n*n+r*r);return[t,o,s]};o.lch.lab=function(e){var t=e[0];var n=e[1];var r=e[2];var i;var s;var o;o=r/360*2*Math.PI;i=n*Math.cos(o);s=n*Math.sin(o);return[t,i,s]};o.rgb.ansi16=function(e){var t=e[0];var n=e[1];var r=e[2];var i=1 in arguments?arguments[1]:o.rgb.hsv(e)[2];i=Math.round(i/50);if(i===0){return 30}var s=30+(Math.round(r/255)<<2|Math.round(n/255)<<1|Math.round(t/255));if(i===2){s+=60}return s};o.hsv.ansi16=function(e){return o.rgb.ansi16(o.hsv.rgb(e),e[2])};o.rgb.ansi256=function(e){var t=e[0];var n=e[1];var r=e[2];if(t===n&&n===r){if(t<8){return 16}if(t>248){return 231}return Math.round((t-8)/247*24)+232}var i=16+36*Math.round(t/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5);return i};o.ansi16.rgb=function(e){var t=e%10;if(t===0||t===7){if(e>50){t+=3.5}t=t/10.5*255;return[t,t,t]}var n=(~~(e>50)+1)*.5;var r=(t&1)*n*255;var i=(t>>1&1)*n*255;var s=(t>>2&1)*n*255;return[r,i,s]};o.ansi256.rgb=function(e){if(e>=232){var t=(e-232)*10+8;return[t,t,t]}e-=16;var n;var r=Math.floor(e/36)/5*255;var i=Math.floor((n=e%36)/6)/5*255;var s=n%6/5*255;return[r,i,s]};o.rgb.hex=function(e){var t=((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255);var n=t.toString(16).toUpperCase();return"000000".substring(n.length)+n};o.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t){return[0,0,0]}var n=t[0];if(t[0].length===3){n=n.split("").map((function(e){return e+e})).join("")}var r=parseInt(n,16);var i=r>>16&255;var s=r>>8&255;var o=r&255;return[i,s,o]};o.rgb.hcg=function(e){var t=e[0]/255;var n=e[1]/255;var r=e[2]/255;var i=Math.max(Math.max(t,n),r);var s=Math.min(Math.min(t,n),r);var o=i-s;var a;var c;if(o<1){a=s/(1-o)}else{a=0}if(o<=0){c=0}else if(i===t){c=(n-r)/o%6}else if(i===n){c=2+(r-t)/o}else{c=4+(t-n)/o+4}c/=6;c%=1;return[c*360,o*100,a*100]};o.hsl.hcg=function(e){var t=e[1]/100;var n=e[2]/100;var r=1;var i=0;if(n<.5){r=2*t*n}else{r=2*t*(1-n)}if(r<1){i=(n-.5*r)/(1-r)}return[e[0],r*100,i*100]};o.hsv.hcg=function(e){var t=e[1]/100;var n=e[2]/100;var r=t*n;var i=0;if(r<1){i=(n-r)/(1-r)}return[e[0],r*100,i*100]};o.hcg.rgb=function(e){var t=e[0]/360;var n=e[1]/100;var r=e[2]/100;if(n===0){return[r*255,r*255,r*255]}var i=[0,0,0];var s=t%1*6;var o=s%1;var a=1-o;var c=0;switch(Math.floor(s)){case 0:i[0]=1;i[1]=o;i[2]=0;break;case 1:i[0]=a;i[1]=1;i[2]=0;break;case 2:i[0]=0;i[1]=1;i[2]=o;break;case 3:i[0]=0;i[1]=a;i[2]=1;break;case 4:i[0]=o;i[1]=0;i[2]=1;break;default:i[0]=1;i[1]=0;i[2]=a}c=(1-n)*r;return[(n*i[0]+c)*255,(n*i[1]+c)*255,(n*i[2]+c)*255]};o.hcg.hsv=function(e){var t=e[1]/100;var n=e[2]/100;var r=t+n*(1-t);var i=0;if(r>0){i=t/r}return[e[0],i*100,r*100]};o.hcg.hsl=function(e){var t=e[1]/100;var n=e[2]/100;var r=n*(1-t)+.5*t;var i=0;if(r>0&&r<.5){i=t/(2*r)}else if(r>=.5&&r<1){i=t/(2*(1-r))}return[e[0],i*100,r*100]};o.hcg.hwb=function(e){var t=e[1]/100;var n=e[2]/100;var r=t+n*(1-t);return[e[0],(r-t)*100,(1-r)*100]};o.hwb.hcg=function(e){var t=e[1]/100;var n=e[2]/100;var r=1-n;var i=r-t;var s=0;if(i<1){s=(r-i)/(1-i)}return[e[0],i*100,s*100]};o.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]};o.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]};o.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]};o.gray.hsl=o.gray.hsv=function(e){return[0,0,e[0]]};o.gray.hwb=function(e){return[0,100,e[0]]};o.gray.cmyk=function(e){return[0,0,0,e[0]]};o.gray.lab=function(e){return[e[0],0,0]};o.gray.hex=function(e){var t=Math.round(e[0]/100*255)&255;var n=(t<<16)+(t<<8)+t;var r=n.toString(16).toUpperCase();return"000000".substring(r.length)+r};o.rgb.gray=function(e){var t=(e[0]+e[1]+e[2])/3;return[t/255*100]}},42830:(e,t,n)=>{var r=n(9598);var i=n(95180);var s={};var o=Object.keys(r);function wrapRaw(e){var wrappedFn=function(t){if(t===undefined||t===null){return t}if(arguments.length>1){t=Array.prototype.slice.call(arguments)}return e(t)};if("conversion"in e){wrappedFn.conversion=e.conversion}return wrappedFn}function wrapRounded(e){var wrappedFn=function(t){if(t===undefined||t===null){return t}if(arguments.length>1){t=Array.prototype.slice.call(arguments)}var n=e(t);if(typeof n==="object"){for(var r=n.length,i=0;i<r;i++){n[i]=Math.round(n[i])}}return n};if("conversion"in e){wrappedFn.conversion=e.conversion}return wrappedFn}o.forEach((function(e){s[e]={};Object.defineProperty(s[e],"channels",{value:r[e].channels});Object.defineProperty(s[e],"labels",{value:r[e].labels});var t=i(e);var n=Object.keys(t);n.forEach((function(n){var r=t[n];s[e][n]=wrapRounded(r);s[e][n].raw=wrapRaw(r)}))}));e.exports=s},59120:e=>{"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},95180:(e,t,n)=>{var r=n(9598);function buildGraph(){var e={};var t=Object.keys(r);for(var n=t.length,i=0;i<n;i++){e[t[i]]={distance:-1,parent:null}}return e}function deriveBFS(e){var t=buildGraph();var n=[e];t[e].distance=0;while(n.length){var i=n.pop();var s=Object.keys(r[i]);for(var o=s.length,a=0;a<o;a++){var c=s[a];var u=t[c];if(u.distance===-1){u.distance=t[i].distance+1;u.parent=i;n.unshift(c)}}}return t}function link(e,t){return function(n){return t(e(n))}}function wrapConversion(e,t){var n=[t[e].parent,e];var i=r[t[e].parent][e];var s=t[e].parent;while(t[s].parent){n.unshift(t[s].parent);i=link(r[t[s].parent][s],i);s=t[s].parent}i.conversion=n;return i}e.exports=function(e){var t=deriveBFS(e);var n={};var r=Object.keys(t);for(var i=r.length,s=0;s<i;s++){var o=r[s];var a=t[o];if(a.parent===null){continue}n[o]=wrapConversion(o,t)}return n}},39407:e=>{"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},48055:(e,t,n)=>{var r=n(39407);var i=n(59761);var s=Object.hasOwnProperty;var o=Object.create(null);for(var a in r){if(s.call(r,a)){o[r[a]]=a}}var c=e.exports={to:{},get:{}};c.get=function(e){var t=e.substring(0,3).toLowerCase();var n;var r;switch(t){case"hsl":n=c.get.hsl(e);r="hsl";break;case"hwb":n=c.get.hwb(e);r="hwb";break;default:n=c.get.rgb(e);r="rgb";break}if(!n){return null}return{model:r,value:n}};c.get.rgb=function(e){if(!e){return null}var t=/^#([a-f0-9]{3,4})$/i;var n=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i;var i=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/;var o=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/;var a=/^(\w+)$/;var c=[0,0,0,1];var u;var l;var d;if(u=e.match(n)){d=u[2];u=u[1];for(l=0;l<3;l++){var f=l*2;c[l]=parseInt(u.slice(f,f+2),16)}if(d){c[3]=parseInt(d,16)/255}}else if(u=e.match(t)){u=u[1];d=u[3];for(l=0;l<3;l++){c[l]=parseInt(u[l]+u[l],16)}if(d){c[3]=parseInt(d+d,16)/255}}else if(u=e.match(i)){for(l=0;l<3;l++){c[l]=parseInt(u[l+1],0)}if(u[4]){if(u[5]){c[3]=parseFloat(u[4])*.01}else{c[3]=parseFloat(u[4])}}}else if(u=e.match(o)){for(l=0;l<3;l++){c[l]=Math.round(parseFloat(u[l+1])*2.55)}if(u[4]){if(u[5]){c[3]=parseFloat(u[4])*.01}else{c[3]=parseFloat(u[4])}}}else if(u=e.match(a)){if(u[1]==="transparent"){return[0,0,0,0]}if(!s.call(r,u[1])){return null}c=r[u[1]];c[3]=1;return c}else{return null}for(l=0;l<3;l++){c[l]=clamp(c[l],0,255)}c[3]=clamp(c[3],0,1);return c};c.get.hsl=function(e){if(!e){return null}var t=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/;var n=e.match(t);if(n){var r=parseFloat(n[4]);var i=(parseFloat(n[1])%360+360)%360;var s=clamp(parseFloat(n[2]),0,100);var o=clamp(parseFloat(n[3]),0,100);var a=clamp(isNaN(r)?1:r,0,1);return[i,s,o,a]}return null};c.get.hwb=function(e){if(!e){return null}var t=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/;var n=e.match(t);if(n){var r=parseFloat(n[4]);var i=(parseFloat(n[1])%360+360)%360;var s=clamp(parseFloat(n[2]),0,100);var o=clamp(parseFloat(n[3]),0,100);var a=clamp(isNaN(r)?1:r,0,1);return[i,s,o,a]}return null};c.to.hex=function(){var e=i(arguments);return"#"+hexDouble(e[0])+hexDouble(e[1])+hexDouble(e[2])+(e[3]<1?hexDouble(Math.round(e[3]*255)):"")};c.to.rgb=function(){var e=i(arguments);return e.length<4||e[3]===1?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"};c.to.rgb.percent=function(){var e=i(arguments);var t=Math.round(e[0]/255*100);var n=Math.round(e[1]/255*100);var r=Math.round(e[2]/255*100);return e.length<4||e[3]===1?"rgb("+t+"%, "+n+"%, "+r+"%)":"rgba("+t+"%, "+n+"%, "+r+"%, "+e[3]+")"};c.to.hsl=function(){var e=i(arguments);return e.length<4||e[3]===1?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"};c.to.hwb=function(){var e=i(arguments);var t="";if(e.length>=4&&e[3]!==1){t=", "+e[3]}return"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"};c.to.keyword=function(e){return o[e.slice(0,3)]};function clamp(e,t,n){return Math.min(Math.max(t,e),n)}function hexDouble(e){var t=Math.round(e).toString(16).toUpperCase();return t.length<2?"0"+t:t}},29140:(e,t,n)=>{"use strict";var r=n(48055);var i=n(42830);var s=[].slice;var o=["keyword","gray","hex"];var a={};Object.keys(i).forEach((function(e){a[s.call(i[e].labels).sort().join("")]=e}));var c={};function Color(e,t){if(!(this instanceof Color)){return new Color(e,t)}if(t&&t in o){t=null}if(t&&!(t in i)){throw new Error("Unknown model: "+t)}var n;var u;if(e==null){this.model="rgb";this.color=[0,0,0];this.valpha=1}else if(e instanceof Color){this.model=e.model;this.color=e.color.slice();this.valpha=e.valpha}else if(typeof e==="string"){var l=r.get(e);if(l===null){throw new Error("Unable to parse color from string: "+e)}this.model=l.model;u=i[this.model].channels;this.color=l.value.slice(0,u);this.valpha=typeof l.value[u]==="number"?l.value[u]:1}else if(e.length){this.model=t||"rgb";u=i[this.model].channels;var d=s.call(e,0,u);this.color=zeroArray(d,u);this.valpha=typeof e[u]==="number"?e[u]:1}else if(typeof e==="number"){e&=16777215;this.model="rgb";this.color=[e>>16&255,e>>8&255,e&255];this.valpha=1}else{this.valpha=1;var f=Object.keys(e);if("alpha"in e){f.splice(f.indexOf("alpha"),1);this.valpha=typeof e.alpha==="number"?e.alpha:0}var p=f.sort().join("");if(!(p in a)){throw new Error("Unable to parse color from object: "+JSON.stringify(e))}this.model=a[p];var h=i[this.model].labels;var m=[];for(n=0;n<h.length;n++){m.push(e[h[n]])}this.color=zeroArray(m)}if(c[this.model]){u=i[this.model].channels;for(n=0;n<u;n++){var g=c[this.model][n];if(g){this.color[n]=g(this.color[n])}}}this.valpha=Math.max(0,Math.min(1,this.valpha));if(Object.freeze){Object.freeze(this)}}Color.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(e){var t=this.model in r.to?this:this.rgb();t=t.round(typeof e==="number"?e:1);var n=t.valpha===1?t.color:t.color.concat(this.valpha);return r.to[t.model](n)},percentString:function(e){var t=this.rgb().round(typeof e==="number"?e:1);var n=t.valpha===1?t.color:t.color.concat(this.valpha);return r.to.rgb.percent(n)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){var e={};var t=i[this.model].channels;var n=i[this.model].labels;for(var r=0;r<t;r++){e[n[r]]=this.color[r]}if(this.valpha!==1){e.alpha=this.valpha}return e},unitArray:function(){var e=this.rgb().color;e[0]/=255;e[1]/=255;e[2]/=255;if(this.valpha!==1){e.push(this.valpha)}return e},unitObject:function(){var e=this.rgb().object();e.r/=255;e.g/=255;e.b/=255;if(this.valpha!==1){e.alpha=this.valpha}return e},round:function(e){e=Math.max(e||0,0);return new Color(this.color.map(roundToPlace(e)).concat(this.valpha),this.model)},alpha:function(e){if(arguments.length){return new Color(this.color.concat(Math.max(0,Math.min(1,e))),this.model)}return this.valpha},red:getset("rgb",0,maxfn(255)),green:getset("rgb",1,maxfn(255)),blue:getset("rgb",2,maxfn(255)),hue:getset(["hsl","hsv","hsl","hwb","hcg"],0,(function(e){return(e%360+360)%360})),saturationl:getset("hsl",1,maxfn(100)),lightness:getset("hsl",2,maxfn(100)),saturationv:getset("hsv",1,maxfn(100)),value:getset("hsv",2,maxfn(100)),chroma:getset("hcg",1,maxfn(100)),gray:getset("hcg",2,maxfn(100)),white:getset("hwb",1,maxfn(100)),wblack:getset("hwb",2,maxfn(100)),cyan:getset("cmyk",0,maxfn(100)),magenta:getset("cmyk",1,maxfn(100)),yellow:getset("cmyk",2,maxfn(100)),black:getset("cmyk",3,maxfn(100)),x:getset("xyz",0,maxfn(100)),y:getset("xyz",1,maxfn(100)),z:getset("xyz",2,maxfn(100)),l:getset("lab",0,maxfn(100)),a:getset("lab",1),b:getset("lab",2),keyword:function(e){if(arguments.length){return new Color(e)}return i[this.model].keyword(this.color)},hex:function(e){if(arguments.length){return new Color(e)}return r.to.hex(this.rgb().round().color)},rgbNumber:function(){var e=this.rgb().color;return(e[0]&255)<<16|(e[1]&255)<<8|e[2]&255},luminosity:function(){var e=this.rgb().color;var t=[];for(var n=0;n<e.length;n++){var r=e[n]/255;t[n]=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity();var n=e.luminosity();if(t>n){return(t+.05)/(n+.05)}return(n+.05)/(t+.05)},level:function(e){var t=this.contrast(e);if(t>=7.1){return"AAA"}return t>=4.5?"AA":""},isDark:function(){var e=this.rgb().color;var t=(e[0]*299+e[1]*587+e[2]*114)/1e3;return t<128},isLight:function(){return!this.isDark()},negate:function(){var e=this.rgb();for(var t=0;t<3;t++){e.color[t]=255-e.color[t]}return e},lighten:function(e){var t=this.hsl();t.color[2]+=t.color[2]*e;return t},darken:function(e){var t=this.hsl();t.color[2]-=t.color[2]*e;return t},saturate:function(e){var t=this.hsl();t.color[1]+=t.color[1]*e;return t},desaturate:function(e){var t=this.hsl();t.color[1]-=t.color[1]*e;return t},whiten:function(e){var t=this.hwb();t.color[1]+=t.color[1]*e;return t},blacken:function(e){var t=this.hwb();t.color[2]+=t.color[2]*e;return t},grayscale:function(){var e=this.rgb().color;var t=e[0]*.3+e[1]*.59+e[2]*.11;return Color.rgb(t,t,t)},fade:function(e){return this.alpha(this.valpha-this.valpha*e)},opaquer:function(e){return this.alpha(this.valpha+this.valpha*e)},rotate:function(e){var t=this.hsl();var n=t.color[0];n=(n+e)%360;n=n<0?360+n:n;t.color[0]=n;return t},mix:function(e,t){if(!e||!e.rgb){throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof e)}var n=e.rgb();var r=this.rgb();var i=t===undefined?.5:t;var s=2*i-1;var o=n.alpha()-r.alpha();var a=((s*o===-1?s:(s+o)/(1+s*o))+1)/2;var c=1-a;return Color.rgb(a*n.red()+c*r.red(),a*n.green()+c*r.green(),a*n.blue()+c*r.blue(),n.alpha()*i+r.alpha()*(1-i))}};Object.keys(i).forEach((function(e){if(o.indexOf(e)!==-1){return}var t=i[e].channels;Color.prototype[e]=function(){if(this.model===e){return new Color(this)}if(arguments.length){return new Color(arguments,e)}var n=typeof arguments[t]==="number"?t:this.valpha;return new Color(assertArray(i[this.model][e].raw(this.color)).concat(n),e)};Color[e]=function(n){if(typeof n==="number"){n=zeroArray(s.call(arguments),t)}return new Color(n,e)}}));function roundTo(e,t){return Number(e.toFixed(t))}function roundToPlace(e){return function(t){return roundTo(t,e)}}function getset(e,t,n){e=Array.isArray(e)?e:[e];e.forEach((function(e){(c[e]||(c[e]=[]))[t]=n}));e=e[0];return function(r){var i;if(arguments.length){if(n){r=n(r)}i=this[e]();i.color[t]=r;return i}i=this[e]().color[t];if(n){i=n(i)}return i}}function maxfn(e){return function(t){return Math.max(0,Math.min(e,t))}}function assertArray(e){return Array.isArray(e)?e:[e]}function zeroArray(e,t){for(var n=0;n<t;n++){if(typeof e[n]!=="number"){e[n]=0}}return e}e.exports=Color},27601:(e,t,n)=>{"use strict";var r=n(29140),i=n(9454);e.exports=function colorspace(e,t){var n=e.split(t||":");var s=i(n[0]);if(!n.length)return s;for(var o=0,a=n.length-1;o<a;o++){s=r(s).mix(r(i(n[o+1]))).saturate(1).hex()}return s}},84527:e=>{e.exports=function(e,n){var r=[];for(var i=0;i<e.length;i++){var s=n(e[i],i);if(t(s))r.push.apply(r,s);else r.push(s)}return r};var t=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"}},8891:(e,t)=>{"use strict";
/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */t.parse=parse;t.serialize=serialize;var n=decodeURIComponent;var r=encodeURIComponent;var i=/; */;var s=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function parse(e,t){if(typeof e!=="string"){throw new TypeError("argument str must be a string")}var r={};var s=t||{};var o=e.split(i);var a=s.decode||n;for(var c=0;c<o.length;c++){var u=o[c];var l=u.indexOf("=");if(l<0){continue}var d=u.substr(0,l).trim();var f=u.substr(++l,u.length).trim();if('"'==f[0]){f=f.slice(1,-1)}if(undefined==r[d]){r[d]=tryDecode(f,a)}}return r}function serialize(e,t,n){var i=n||{};var o=i.encode||r;if(typeof o!=="function"){throw new TypeError("option encode is invalid")}if(!s.test(e)){throw new TypeError("argument name is invalid")}var a=o(t);if(a&&!s.test(a)){throw new TypeError("argument val is invalid")}var c=e+"="+a;if(null!=i.maxAge){var u=i.maxAge-0;if(isNaN(u)||!isFinite(u)){throw new TypeError("option maxAge is invalid")}c+="; Max-Age="+Math.floor(u)}if(i.domain){if(!s.test(i.domain)){throw new TypeError("option domain is invalid")}c+="; Domain="+i.domain}if(i.path){if(!s.test(i.path)){throw new TypeError("option path is invalid")}c+="; Path="+i.path}if(i.expires){if(typeof i.expires.toUTCString!=="function"){throw new TypeError("option expires is invalid")}c+="; Expires="+i.expires.toUTCString()}if(i.httpOnly){c+="; HttpOnly"}if(i.secure){c+="; Secure"}if(i.sameSite){var l=typeof i.sameSite==="string"?i.sameSite.toLowerCase():i.sameSite;switch(l){case true:c+="; SameSite=Strict";break;case"lax":c+="; SameSite=Lax";break;case"strict":c+="; SameSite=Strict";break;case"none":c+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return c}function tryDecode(e,t){try{return t(e)}catch(t){return e}}},85535:e=>{var t=1e3;var n=t*60;var r=n*60;var i=r*24;var s=i*7;var o=i*365.25;e.exports=function(e,t){t=t||{};var n=typeof e;if(n==="string"&&e.length>0){return parse(e)}else if(n==="number"&&isFinite(e)){return t.long?fmtLong(e):fmtShort(e)}throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function parse(e){e=String(e);if(e.length>100){return}var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!a){return}var c=parseFloat(a[1]);var u=(a[2]||"ms").toLowerCase();switch(u){case"years":case"year":case"yrs":case"yr":case"y":return c*o;case"weeks":case"week":case"w":return c*s;case"days":case"day":case"d":return c*i;case"hours":case"hour":case"hrs":case"hr":case"h":return c*r;case"minutes":case"minute":case"mins":case"min":case"m":return c*n;case"seconds":case"second":case"secs":case"sec":case"s":return c*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return undefined}}function fmtShort(e){var s=Math.abs(e);if(s>=i){return Math.round(e/i)+"d"}if(s>=r){return Math.round(e/r)+"h"}if(s>=n){return Math.round(e/n)+"m"}if(s>=t){return Math.round(e/t)+"s"}return e+"ms"}function fmtLong(e){var s=Math.abs(e);if(s>=i){return plural(e,s,i,"day")}if(s>=r){return plural(e,s,r,"hour")}if(s>=n){return plural(e,s,n,"minute")}if(s>=t){return plural(e,s,t,"second")}return e+" ms"}function plural(e,t,n,r){var i=t>=n*1.5;return Math.round(e/n)+" "+r+(i?"s":"")}},39851:(e,t,n)=>{t.formatArgs=formatArgs;t.save=save;t.load=load;t.useColors=useColors;t.storage=localstorage();t.destroy=(()=>{let e=false;return()=>{if(!e){e=true;console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}}})();t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function useColors(){if(typeof window!=="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)){return true}if(typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)){return false}return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function formatArgs(t){t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff);if(!this.useColors){return}const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let r=0;let i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{if(e==="%%"){return}r++;if(e==="%c"){i=r}}));t.splice(i,0,n)}t.log=console.debug||console.log||(()=>{});function save(e){try{if(e){t.storage.setItem("debug",e)}else{t.storage.removeItem("debug")}}catch(e){}}function load(){let e;try{e=t.storage.getItem("debug")}catch(e){}if(!e&&typeof process!=="undefined"&&"env"in process){e=process.env.DEBUG}return e}function localstorage(){try{return localStorage}catch(e){}}e.exports=n(36033)(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},36033:(e,t,n)=>{function setup(e){createDebug.debug=createDebug;createDebug.default=createDebug;createDebug.coerce=coerce;createDebug.disable=disable;createDebug.enable=enable;createDebug.enabled=enabled;createDebug.humanize=n(85535);createDebug.destroy=destroy;Object.keys(e).forEach((t=>{createDebug[t]=e[t]}));createDebug.names=[];createDebug.skips=[];createDebug.formatters={};function selectColor(e){let t=0;for(let n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n);t|=0}return createDebug.colors[Math.abs(t)%createDebug.colors.length]}createDebug.selectColor=selectColor;function createDebug(e){let t;let n=null;let r;let i;function debug(...e){if(!debug.enabled){return}const n=debug;const r=Number(new Date);const i=r-(t||r);n.diff=i;n.prev=t;n.curr=r;t=r;e[0]=createDebug.coerce(e[0]);if(typeof e[0]!=="string"){e.unshift("%O")}let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((t,r)=>{if(t==="%%"){return"%"}s++;const i=createDebug.formatters[r];if(typeof i==="function"){const r=e[s];t=i.call(n,r);e.splice(s,1);s--}return t}));createDebug.formatArgs.call(n,e);const o=n.log||createDebug.log;o.apply(n,e)}debug.namespace=e;debug.useColors=createDebug.useColors();debug.color=createDebug.selectColor(e);debug.extend=extend;debug.destroy=createDebug.destroy;Object.defineProperty(debug,"enabled",{enumerable:true,configurable:false,get:()=>{if(n!==null){return n}if(r!==createDebug.namespaces){r=createDebug.namespaces;i=createDebug.enabled(e)}return i},set:e=>{n=e}});if(typeof createDebug.init==="function"){createDebug.init(debug)}return debug}function extend(e,t){const n=createDebug(this.namespace+(typeof t==="undefined"?":":t)+e);n.log=this.log;return n}function enable(e){createDebug.save(e);createDebug.namespaces=e;createDebug.names=[];createDebug.skips=[];let t;const n=(typeof e==="string"?e:"").split(/[\s,]+/);const r=n.length;for(t=0;t<r;t++){if(!n[t]){continue}e=n[t].replace(/\*/g,".*?");if(e[0]==="-"){createDebug.skips.push(new RegExp("^"+e.slice(1)+"$"))}else{createDebug.names.push(new RegExp("^"+e+"$"))}}}function disable(){const e=[...createDebug.names.map(toNamespace),...createDebug.skips.map(toNamespace).map((e=>"-"+e))].join(",");createDebug.enable("");return e}function enabled(e){if(e[e.length-1]==="*"){return true}let t;let n;for(t=0,n=createDebug.skips.length;t<n;t++){if(createDebug.skips[t].test(e)){return false}}for(t=0,n=createDebug.names.length;t<n;t++){if(createDebug.names[t].test(e)){return true}}return false}function toNamespace(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}function coerce(e){if(e instanceof Error){return e.stack||e.message}return e}function destroy(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}createDebug.enable(createDebug.load());return createDebug}e.exports=setup},67984:(e,t,n)=>{if(typeof process==="undefined"||process.type==="renderer"||process.browser===true||process.__nwjs){e.exports=n(39851)}else{e.exports=n(13860)}},13860:(e,t,n)=>{const r=n(76224);const i=n(73837);t.init=init;t.log=log;t.formatArgs=formatArgs;t.save=save;t.load=load;t.useColors=useColors;t.destroy=i.deprecate((()=>{}),"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");t.colors=[6,2,3,4,5,1];try{const e=n(30395);if(e&&(e.stderr||e).level>=2){t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221]}}catch(e){}t.inspectOpts=Object.keys(process.env).filter((e=>/^debug_/i.test(e))).reduce(((e,t)=>{const n=t.substring(6).toLowerCase().replace(/_([a-z])/g,((e,t)=>t.toUpperCase()));let r=process.env[t];if(/^(yes|on|true|enabled)$/i.test(r)){r=true}else if(/^(no|off|false|disabled)$/i.test(r)){r=false}else if(r==="null"){r=null}else{r=Number(r)}e[n]=r;return e}),{});function useColors(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):r.isatty(process.stderr.fd)}function formatArgs(t){const{namespace:n,useColors:r}=this;if(r){const r=this.color;const i="[3"+(r<8?r:"8;5;"+r);const s=`  ${i};1m${n} [0m`;t[0]=s+t[0].split("\n").join("\n"+s);t.push(i+"m+"+e.exports.humanize(this.diff)+"[0m")}else{t[0]=getDate()+n+" "+t[0]}}function getDate(){if(t.inspectOpts.hideDate){return""}return(new Date).toISOString()+" "}function log(...e){return process.stderr.write(i.format(...e)+"\n")}function save(e){if(e){process.env.DEBUG=e}else{delete process.env.DEBUG}}function load(){return process.env.DEBUG}function init(e){e.inspectOpts={};const n=Object.keys(t.inspectOpts);for(let r=0;r<n.length;r++){e.inspectOpts[n[r]]=t.inspectOpts[n[r]]}}e.exports=n(36033)(t);const{formatters:s}=e.exports;s.o=function(e){this.inspectOpts.colors=this.useColors;return i.inspect(e,this.inspectOpts).split("\n").map((e=>e.trim())).join(" ")};s.O=function(e){this.inspectOpts.colors=this.useColors;return i.inspect(e,this.inspectOpts)}},47022:e=>{"use strict";e.exports=function enabled(e,t){if(!t)return false;var n=t.split(/[\s,]+/),r=0;for(;r<n.length;r++){t=n[r].replace("*",".*?");if("-"===t.charAt(0)){if(new RegExp("^"+t.substr(1)+"$").test(e)){return false}continue}if(new RegExp("^"+t+"$").test(e)){return true}}return false}},4440:e=>{"use strict";function assign(e,t){for(const n in t){Object.defineProperty(e,n,{value:t[n],enumerable:true,configurable:true})}return e}function createError(e,t,n){if(!e||typeof e==="string"){throw new TypeError("Please pass an Error to err-code")}if(!n){n={}}if(typeof t==="object"){n=t;t=undefined}if(t!=null){n.code=t}try{return assign(e,n)}catch(t){n.message=e.message;n.stack=e.stack;const ErrClass=function(){};ErrClass.prototype=Object.create(Object.getPrototypeOf(e));return assign(new ErrClass,n)}}e.exports=createError},64852:function(e,t){(function(e,n){true?n(t):0})(this,(function(e){"use strict";var t=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g;var n="\\d\\d?";var r="\\d\\d";var i="\\d{3}";var s="\\d{4}";var o="[^\\s]+";var a=/\[([^]*?)\]/gm;function shorten(e,t){var n=[];for(var r=0,i=e.length;r<i;r++){n.push(e[r].substr(0,t))}return n}var monthUpdate=function(e){return function(t,n){var r=n[e].map((function(e){return e.toLowerCase()}));var i=r.indexOf(t.toLowerCase());if(i>-1){return i}return null}};function assign(e){var t=[];for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}for(var r=0,i=t;r<i.length;r++){var s=i[r];for(var o in s){e[o]=s[o]}}return e}var c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];var u=["January","February","March","April","May","June","July","August","September","October","November","December"];var l=shorten(u,3);var d=shorten(c,3);var f={dayNamesShort:d,dayNames:c,monthNamesShort:l,monthNames:u,amPm:["am","pm"],DoFn:function(e){return e+["th","st","nd","rd"][e%10>3?0:(e-e%10!==10?1:0)*e%10]}};var p=assign({},f);var setGlobalDateI18n=function(e){return p=assign(p,e)};var regexEscape=function(e){return e.replace(/[|\\{()[^$+*?.-]/g,"\\$&")};var pad=function(e,t){if(t===void 0){t=2}e=String(e);while(e.length<t){e="0"+e}return e};var h={D:function(e){return String(e.getDate())},DD:function(e){return pad(e.getDate())},Do:function(e,t){return t.DoFn(e.getDate())},d:function(e){return String(e.getDay())},dd:function(e){return pad(e.getDay())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return String(e.getMonth()+1)},MM:function(e){return pad(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},YY:function(e){return pad(String(e.getFullYear()),4).substr(2)},YYYY:function(e){return pad(e.getFullYear(),4)},h:function(e){return String(e.getHours()%12||12)},hh:function(e){return pad(e.getHours()%12||12)},H:function(e){return String(e.getHours())},HH:function(e){return pad(e.getHours())},m:function(e){return String(e.getMinutes())},mm:function(e){return pad(e.getMinutes())},s:function(e){return String(e.getSeconds())},ss:function(e){return pad(e.getSeconds())},S:function(e){return String(Math.round(e.getMilliseconds()/100))},SS:function(e){return pad(Math.round(e.getMilliseconds()/10),2)},SSS:function(e){return pad(e.getMilliseconds(),3)},a:function(e,t){return e.getHours()<12?t.amPm[0]:t.amPm[1]},A:function(e,t){return e.getHours()<12?t.amPm[0].toUpperCase():t.amPm[1].toUpperCase()},ZZ:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+pad(Math.floor(Math.abs(t)/60)*100+Math.abs(t)%60,4)},Z:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+pad(Math.floor(Math.abs(t)/60),2)+":"+pad(Math.abs(t)%60,2)}};var monthParse=function(e){return+e-1};var m=[null,n];var g=[null,o];var v=["isPm",o,function(e,t){var n=e.toLowerCase();if(n===t.amPm[0]){return 0}else if(n===t.amPm[1]){return 1}return null}];var y=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(e){var t=(e+"").match(/([+-]|\d\d)/gi);if(t){var n=+t[1]*60+parseInt(t[2],10);return t[0]==="+"?n:-n}return 0}];var b={D:["day",n],DD:["day",r],Do:["day",n+o,function(e){return parseInt(e,10)}],M:["month",n,monthParse],MM:["month",r,monthParse],YY:["year",r,function(e){var t=new Date;var n=+(""+t.getFullYear()).substr(0,2);return+(""+(+e>68?n-1:n)+e)}],h:["hour",n,undefined,"isPm"],hh:["hour",r,undefined,"isPm"],H:["hour",n],HH:["hour",r],m:["minute",n],mm:["minute",r],s:["second",n],ss:["second",r],YYYY:["year",s],S:["millisecond","\\d",function(e){return+e*100}],SS:["millisecond",r,function(e){return+e*10}],SSS:["millisecond",i],d:m,dd:m,ddd:g,dddd:g,MMM:["month",o,monthUpdate("monthNamesShort")],MMMM:["month",o,monthUpdate("monthNames")],a:v,A:v,ZZ:y,Z:y};var _={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"};var setGlobalDateMasks=function(e){return assign(_,e)};var format=function(e,n,r){if(n===void 0){n=_["default"]}if(r===void 0){r={}}if(typeof e==="number"){e=new Date(e)}if(Object.prototype.toString.call(e)!=="[object Date]"||isNaN(e.getTime())){throw new Error("Invalid Date pass to format")}n=_[n]||n;var i=[];n=n.replace(a,(function(e,t){i.push(t);return"@@@"}));var s=assign(assign({},p),r);n=n.replace(t,(function(t){return h[t](e,s)}));return n.replace(/@@@/g,(function(){return i.shift()}))};function parse(e,n,r){if(r===void 0){r={}}if(typeof n!=="string"){throw new Error("Invalid format in fecha parse")}n=_[n]||n;if(e.length>1e3){return null}var i=new Date;var s={year:i.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null};var o=[];var c=[];var u=n.replace(a,(function(e,t){c.push(regexEscape(t));return"@@@"}));var l={};var d={};u=regexEscape(u).replace(t,(function(e){var t=b[e];var n=t[0],r=t[1],i=t[3];if(l[n]){throw new Error("Invalid format. "+n+" specified twice in format")}l[n]=true;if(i){d[i]=true}o.push(t);return"("+r+")"}));Object.keys(d).forEach((function(e){if(!l[e]){throw new Error("Invalid format. "+e+" is required in specified format")}}));u=u.replace(/@@@/g,(function(){return c.shift()}));var f=e.match(new RegExp(u,"i"));if(!f){return null}var h=assign(assign({},p),r);for(var m=1;m<f.length;m++){var g=o[m-1],v=g[0],y=g[2];var S=y?y(f[m],h):+f[m];if(S==null){return null}s[v]=S}if(s.isPm===1&&s.hour!=null&&+s.hour!==12){s.hour=+s.hour+12}else if(s.isPm===0&&+s.hour===12){s.hour=0}var w;if(s.timezoneOffset==null){w=new Date(s.year,s.month,s.day,s.hour,s.minute,s.second,s.millisecond);var T=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]];for(var m=0,k=T.length;m<k;m++){if(l[T[m][0]]&&s[T[m][0]]!==w[T[m][1]]()){return null}}}else{w=new Date(Date.UTC(s.year,s.month,s.day,s.hour,s.minute-s.timezoneOffset,s.second,s.millisecond));if(s.month>11||s.month<0||s.day>31||s.day<1||s.hour>23||s.hour<0||s.minute>59||s.minute<0||s.second>59||s.second<0){return null}}return w}var S={format:format,parse:parse,defaultI18n:f,setGlobalDateI18n:setGlobalDateI18n,setGlobalDateMasks:setGlobalDateMasks};e.assign=assign;e.default=S;e.format=format;e.parse=parse;e.defaultI18n=f;e.setGlobalDateI18n=setGlobalDateI18n;e.setGlobalDateMasks=setGlobalDateMasks;Object.defineProperty(e,"__esModule",{value:true})}))},38143:e=>{"use strict";var t=Object.prototype.toString;e.exports=function name(e){if("string"===typeof e.displayName&&e.constructor.name){return e.displayName}else if("string"===typeof e.name&&e.name){return e.name}if("object"===typeof e&&e.constructor&&"string"===typeof e.constructor.name)return e.constructor.name;var n=e.toString(),r=t.call(e).slice(8,-1);if("Function"===r){n=n.substring(n.indexOf("(")+1,n.indexOf(")"))}else{n=r}return n||"anonymous"}},76738:e=>{"use strict";e.exports=(e,t=process.argv)=>{const n=e.startsWith("-")?"":e.length===1?"-":"--";const r=t.indexOf(n+e);const i=t.indexOf("--");return r!==-1&&(i===-1||r<i)}},75747:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function fulfilled(e){try{step(r.next(e))}catch(e){i(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){i(e)}}function step(e){e.done?n(e.value):adopt(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())}))};var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});const s=i(n(41808));const o=i(n(24404));const a=i(n(57310));const c=i(n(39491));const u=i(n(67984));const l=n(52275);const d=i(n(43876));const f=u.default("https-proxy-agent:agent");class HttpsProxyAgent extends l.Agent{constructor(e){let t;if(typeof e==="string"){t=a.default.parse(e)}else{t=e}if(!t){throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!")}f("creating new HttpsProxyAgent instance: %o",t);super(t);const n=Object.assign({},t);this.secureProxy=t.secureProxy||isHTTPS(n.protocol);n.host=n.hostname||n.host;if(typeof n.port==="string"){n.port=parseInt(n.port,10)}if(!n.port&&n.host){n.port=this.secureProxy?443:80}if(this.secureProxy&&!("ALPNProtocols"in n)){n.ALPNProtocols=["http 1.1"]}if(n.host&&n.path){delete n.path;delete n.pathname}this.proxy=n}callback(e,t){return r(this,void 0,void 0,(function*(){const{proxy:n,secureProxy:r}=this;let i;if(r){f("Creating `tls.Socket`: %o",n);i=o.default.connect(n)}else{f("Creating `net.Socket`: %o",n);i=s.default.connect(n)}const a=Object.assign({},n.headers);const u=`${t.host}:${t.port}`;let l=`CONNECT ${u} HTTP/1.1\r\n`;if(n.auth){a["Proxy-Authorization"]=`Basic ${Buffer.from(n.auth).toString("base64")}`}let{host:p,port:h,secureEndpoint:m}=t;if(!isDefaultPort(h,m)){p+=`:${h}`}a.Host=p;a.Connection="close";for(const e of Object.keys(a)){l+=`${e}: ${a[e]}\r\n`}const g=d.default(i);i.write(`${l}\r\n`);const{statusCode:v,buffered:y}=yield g;if(v===200){e.once("socket",resume);if(t.secureEndpoint){const e=t.servername||t.host;if(!e){throw new Error('Could not determine "servername"')}f("Upgrading socket connection to TLS");return o.default.connect(Object.assign(Object.assign({},omit(t,"host","hostname","path","port")),{socket:i,servername:e}))}return i}i.destroy();const b=new s.default.Socket;b.readable=true;e.once("socket",(e=>{f("replaying proxy buffer for failed request");c.default(e.listenerCount("data")>0);e.push(y);e.push(null)}));return b}))}}t["default"]=HttpsProxyAgent;function resume(e){e.resume()}function isDefaultPort(e,t){return Boolean(!t&&e===80||t&&e===443)}function isHTTPS(e){return typeof e==="string"?/^https:?$/i.test(e):false}function omit(e,...t){const n={};let r;for(r in e){if(!t.includes(r)){n[r]=e[r]}}return n}},54214:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};const i=r(n(75747));function createHttpsProxyAgent(e){return new i.default(e)}(function(e){e.HttpsProxyAgent=i.default;e.prototype=i.default.prototype})(createHttpsProxyAgent||(createHttpsProxyAgent={}));e.exports=createHttpsProxyAgent},43876:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});const i=r(n(67984));const s=i.default("https-proxy-agent:parse-proxy-response");function parseProxyResponse(e){return new Promise(((t,n)=>{let r=0;const i=[];function read(){const t=e.read();if(t)ondata(t);else e.once("readable",read)}function cleanup(){e.removeListener("end",onend);e.removeListener("error",onerror);e.removeListener("close",onclose);e.removeListener("readable",read)}function onclose(e){s("onclose had error %o",e)}function onend(){s("onend")}function onerror(e){cleanup();s("onerror %o",e);n(e)}function ondata(e){i.push(e);r+=e.length;const n=Buffer.concat(i,r);const o=n.indexOf("\r\n\r\n");if(o===-1){s("have not received end of HTTP headers yet...");read();return}const a=n.toString("ascii",0,n.indexOf("\r\n"));const c=+a.split(" ")[1];s("got proxy server response: %o",a);t({statusCode:c,buffered:n})}e.on("error",onerror);e.on("close",onclose);e.on("end",onend);read()}))}t["default"]=parseProxyResponse},76919:(e,t,n)=>{try{var r=n(73837);if(typeof r.inherits!=="function")throw"";e.exports=r.inherits}catch(t){e.exports=n(27526)}},27526:e=>{if(typeof Object.create==="function"){e.exports=function inherits(e,t){if(t){e.super_=t;e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}})}}}else{e.exports=function inherits(e,t){if(t){e.super_=t;var TempCtor=function(){};TempCtor.prototype=t.prototype;e.prototype=new TempCtor;e.prototype.constructor=e}}}},1381:e=>{"use strict";const isStream=e=>e!==null&&typeof e==="object"&&typeof e.pipe==="function";isStream.writable=e=>isStream(e)&&e.writable!==false&&typeof e._write==="function"&&typeof e._writableState==="object";isStream.readable=e=>isStream(e)&&e.readable!==false&&typeof e._read==="function"&&typeof e._readableState==="object";isStream.duplex=e=>isStream.writable(e)&&isStream.readable(e);isStream.transform=e=>isStream.duplex(e)&&typeof e._transform==="function";e.exports=isStream},54375:e=>{"use strict";function Kuler(e,t){if(t)return new Kuler(e).style(t);if(!(this instanceof Kuler))return new Kuler(e);this.text=e}Kuler.prototype.prefix="[";Kuler.prototype.suffix="m";Kuler.prototype.hex=function hex(e){e=e[0]==="#"?e.substring(1):e;if(e.length===3){e=e.split("");e[5]=e[2];e[4]=e[2];e[3]=e[1];e[2]=e[1];e[1]=e[0];e=e.join("")}var t=e.substring(0,2),n=e.substring(2,4),r=e.substring(4,6);return[parseInt(t,16),parseInt(n,16),parseInt(r,16)]};Kuler.prototype.rgb=function rgb(e,t,n){var r=e/255*5,i=t/255*5,s=n/255*5;return this.ansi(r,i,s)};Kuler.prototype.ansi=function ansi(e,t,n){var r=Math.round(e),i=Math.round(t),s=Math.round(n);return 16+r*36+i*6+s};Kuler.prototype.reset=function reset(){return this.prefix+"39;49"+this.suffix};Kuler.prototype.style=function style(e){return this.prefix+"38;5;"+this.rgb.apply(this,this.hex(e))+this.suffix+this.text+this.reset()};e.exports=Kuler},5453:(e,t,n)=>{"use strict";const r=n(4461);const i=Symbol("max");const s=Symbol("length");const o=Symbol("lengthCalculator");const a=Symbol("allowStale");const c=Symbol("maxAge");const u=Symbol("dispose");const l=Symbol("noDisposeOnSet");const d=Symbol("lruList");const f=Symbol("cache");const p=Symbol("updateAgeOnGet");const naiveLength=()=>1;class LRUCache{constructor(e){if(typeof e==="number")e={max:e};if(!e)e={};if(e.max&&(typeof e.max!=="number"||e.max<0))throw new TypeError("max must be a non-negative number");const t=this[i]=e.max||Infinity;const n=e.length||naiveLength;this[o]=typeof n!=="function"?naiveLength:n;this[a]=e.stale||false;if(e.maxAge&&typeof e.maxAge!=="number")throw new TypeError("maxAge must be a number");this[c]=e.maxAge||0;this[u]=e.dispose;this[l]=e.noDisposeOnSet||false;this[p]=e.updateAgeOnGet||false;this.reset()}set max(e){if(typeof e!=="number"||e<0)throw new TypeError("max must be a non-negative number");this[i]=e||Infinity;trim(this)}get max(){return this[i]}set allowStale(e){this[a]=!!e}get allowStale(){return this[a]}set maxAge(e){if(typeof e!=="number")throw new TypeError("maxAge must be a non-negative number");this[c]=e;trim(this)}get maxAge(){return this[c]}set lengthCalculator(e){if(typeof e!=="function")e=naiveLength;if(e!==this[o]){this[o]=e;this[s]=0;this[d].forEach((e=>{e.length=this[o](e.value,e.key);this[s]+=e.length}))}trim(this)}get lengthCalculator(){return this[o]}get length(){return this[s]}get itemCount(){return this[d].length}rforEach(e,t){t=t||this;for(let n=this[d].tail;n!==null;){const r=n.prev;forEachStep(this,e,n,t);n=r}}forEach(e,t){t=t||this;for(let n=this[d].head;n!==null;){const r=n.next;forEachStep(this,e,n,t);n=r}}keys(){return this[d].toArray().map((e=>e.key))}values(){return this[d].toArray().map((e=>e.value))}reset(){if(this[u]&&this[d]&&this[d].length){this[d].forEach((e=>this[u](e.key,e.value)))}this[f]=new Map;this[d]=new r;this[s]=0}dump(){return this[d].map((e=>isStale(this,e)?false:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)})).toArray().filter((e=>e))}dumpLru(){return this[d]}set(e,t,n){n=n||this[c];if(n&&typeof n!=="number")throw new TypeError("maxAge must be a number");const r=n?Date.now():0;const a=this[o](t,e);if(this[f].has(e)){if(a>this[i]){del(this,this[f].get(e));return false}const o=this[f].get(e);const c=o.value;if(this[u]){if(!this[l])this[u](e,c.value)}c.now=r;c.maxAge=n;c.value=t;this[s]+=a-c.length;c.length=a;this.get(e);trim(this);return true}const p=new Entry(e,t,a,r,n);if(p.length>this[i]){if(this[u])this[u](e,t);return false}this[s]+=p.length;this[d].unshift(p);this[f].set(e,this[d].head);trim(this);return true}has(e){if(!this[f].has(e))return false;const t=this[f].get(e).value;return!isStale(this,t)}get(e){return get(this,e,true)}peek(e){return get(this,e,false)}pop(){const e=this[d].tail;if(!e)return null;del(this,e);return e.value}del(e){del(this,this[f].get(e))}load(e){this.reset();const t=Date.now();for(let n=e.length-1;n>=0;n--){const r=e[n];const i=r.e||0;if(i===0)this.set(r.k,r.v);else{const e=i-t;if(e>0){this.set(r.k,r.v,e)}}}}prune(){this[f].forEach(((e,t)=>get(this,t,false)))}}const get=(e,t,n)=>{const r=e[f].get(t);if(r){const t=r.value;if(isStale(e,t)){del(e,r);if(!e[a])return undefined}else{if(n){if(e[p])r.value.now=Date.now();e[d].unshiftNode(r)}}return t.value}};const isStale=(e,t)=>{if(!t||!t.maxAge&&!e[c])return false;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[c]&&n>e[c]};const trim=e=>{if(e[s]>e[i]){for(let t=e[d].tail;e[s]>e[i]&&t!==null;){const n=t.prev;del(e,t);t=n}}};const del=(e,t)=>{if(t){const n=t.value;if(e[u])e[u](n.key,n.value);e[s]-=n.length;e[f].delete(n.key);e[d].removeNode(t)}};class Entry{constructor(e,t,n,r,i){this.key=e;this.value=t;this.length=n;this.now=r;this.maxAge=i||0}}const forEachStep=(e,t,n,r)=>{let i=n.value;if(isStale(e,i)){del(e,n);if(!e[a])i=undefined}if(i)t.call(r,i.value,i.key,e)};e.exports=LRUCache},1999:function(e,t){(function(e,n){const r=true?t:0;n(r);if(typeof define=="function"&&define.amd){define("lru",r)}})(this,(function(e){const t=Symbol("newer");const n=Symbol("older");function LRUMap(e,t){if(typeof e!=="number"){t=e;e=0}this.size=0;this.limit=e;this.oldest=this.newest=undefined;this._keymap=new Map;if(t){this.assign(t);if(e<1){this.limit=this.size}}}e.LRUMap=LRUMap;function Entry(e,r){this.key=e;this.value=r;this[t]=undefined;this[n]=undefined}LRUMap.prototype._markEntryAsUsed=function(e){if(e===this.newest){return}if(e[t]){if(e===this.oldest){this.oldest=e[t]}e[t][n]=e[n]}if(e[n]){e[n][t]=e[t]}e[t]=undefined;e[n]=this.newest;if(this.newest){this.newest[t]=e}this.newest=e};LRUMap.prototype.assign=function(e){let r,i=this.limit||Number.MAX_VALUE;this._keymap.clear();let s=e[Symbol.iterator]();for(let e=s.next();!e.done;e=s.next()){let s=new Entry(e.value[0],e.value[1]);this._keymap.set(s.key,s);if(!r){this.oldest=s}else{r[t]=s;s[n]=r}r=s;if(i--==0){throw new Error("overflow")}}this.newest=r;this.size=this._keymap.size};LRUMap.prototype.get=function(e){var t=this._keymap.get(e);if(!t)return;this._markEntryAsUsed(t);return t.value};LRUMap.prototype.set=function(e,r){var i=this._keymap.get(e);if(i){i.value=r;this._markEntryAsUsed(i);return this}this._keymap.set(e,i=new Entry(e,r));if(this.newest){this.newest[t]=i;i[n]=this.newest}else{this.oldest=i}this.newest=i;++this.size;if(this.size>this.limit){this.shift()}return this};LRUMap.prototype.shift=function(){var e=this.oldest;if(e){if(this.oldest[t]){this.oldest=this.oldest[t];this.oldest[n]=undefined}else{this.oldest=undefined;this.newest=undefined}e[t]=e[n]=undefined;this._keymap.delete(e.key);--this.size;return[e.key,e.value]}};LRUMap.prototype.find=function(e){let t=this._keymap.get(e);return t?t.value:undefined};LRUMap.prototype.has=function(e){return this._keymap.has(e)};LRUMap.prototype["delete"]=function(e){var r=this._keymap.get(e);if(!r)return;this._keymap.delete(r.key);if(r[t]&&r[n]){r[n][t]=r[t];r[t][n]=r[n]}else if(r[t]){r[t][n]=undefined;this.oldest=r[t]}else if(r[n]){r[n][t]=undefined;this.newest=r[n]}else{this.oldest=this.newest=undefined}this.size--;return r.value};LRUMap.prototype.clear=function(){this.oldest=this.newest=undefined;this.size=0;this._keymap.clear()};function EntryIterator(e){this.entry=e}EntryIterator.prototype[Symbol.iterator]=function(){return this};EntryIterator.prototype.next=function(){let e=this.entry;if(e){this.entry=e[t];return{done:false,value:[e.key,e.value]}}else{return{done:true,value:undefined}}};function KeyIterator(e){this.entry=e}KeyIterator.prototype[Symbol.iterator]=function(){return this};KeyIterator.prototype.next=function(){let e=this.entry;if(e){this.entry=e[t];return{done:false,value:e.key}}else{return{done:true,value:undefined}}};function ValueIterator(e){this.entry=e}ValueIterator.prototype[Symbol.iterator]=function(){return this};ValueIterator.prototype.next=function(){let e=this.entry;if(e){this.entry=e[t];return{done:false,value:e.value}}else{return{done:true,value:undefined}}};LRUMap.prototype.keys=function(){return new KeyIterator(this.oldest)};LRUMap.prototype.values=function(){return new ValueIterator(this.oldest)};LRUMap.prototype.entries=function(){return this};LRUMap.prototype[Symbol.iterator]=function(){return new EntryIterator(this.oldest)};LRUMap.prototype.forEach=function(e,n){if(typeof n!=="object"){n=this}let r=this.oldest;while(r){e.call(n,r.value,r.key,this);r=r[t]}};LRUMap.prototype.toJSON=function(){var e=new Array(this.size),n=0,r=this.oldest;while(r){e[n++]={key:r.key,value:r.value};r=r[t]}return e};LRUMap.prototype.toString=function(){var e="",n=this.oldest;while(n){e+=String(n.key)+":"+n.value;n=n[t];if(n){e+=" < "}}return e}}))},99566:(e,t,n)=>{e.exports=minimatch;minimatch.Minimatch=Minimatch;var r=function(){try{return n(71017)}catch(e){}}()||{sep:"/"};minimatch.sep=r.sep;var i=minimatch.GLOBSTAR=Minimatch.GLOBSTAR={};var s=n(73197);var o={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}};var a="[^/]";var c=a+"*?";var u="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?";var l="(?:(?!(?:\\/|^)\\.).)*?";var d=charSet("().*{}+?[]^$\\!");function charSet(e){return e.split("").reduce((function(e,t){e[t]=true;return e}),{})}var f=/\/+/;minimatch.filter=filter;function filter(e,t){t=t||{};return function(n,r,i){return minimatch(n,e,t)}}function ext(e,t){t=t||{};var n={};Object.keys(e).forEach((function(t){n[t]=e[t]}));Object.keys(t).forEach((function(e){n[e]=t[e]}));return n}minimatch.defaults=function(e){if(!e||typeof e!=="object"||!Object.keys(e).length){return minimatch}var t=minimatch;var n=function minimatch(n,r,i){return t(n,r,ext(e,i))};n.Minimatch=function Minimatch(n,r){return new t.Minimatch(n,ext(e,r))};n.Minimatch.defaults=function defaults(n){return t.defaults(ext(e,n)).Minimatch};n.filter=function filter(n,r){return t.filter(n,ext(e,r))};n.defaults=function defaults(n){return t.defaults(ext(e,n))};n.makeRe=function makeRe(n,r){return t.makeRe(n,ext(e,r))};n.braceExpand=function braceExpand(n,r){return t.braceExpand(n,ext(e,r))};n.match=function(n,r,i){return t.match(n,r,ext(e,i))};return n};Minimatch.defaults=function(e){return minimatch.defaults(e).Minimatch};function minimatch(e,t,n){assertValidPattern(t);if(!n)n={};if(!n.nocomment&&t.charAt(0)==="#"){return false}return new Minimatch(t,n).match(e)}function Minimatch(e,t){if(!(this instanceof Minimatch)){return new Minimatch(e,t)}assertValidPattern(e);if(!t)t={};e=e.trim();if(!t.allowWindowsEscape&&r.sep!=="/"){e=e.split(r.sep).join("/")}this.options=t;this.set=[];this.pattern=e;this.regexp=null;this.negate=false;this.comment=false;this.empty=false;this.partial=!!t.partial;this.make()}Minimatch.prototype.debug=function(){};Minimatch.prototype.make=make;function make(){var e=this.pattern;var t=this.options;if(!t.nocomment&&e.charAt(0)==="#"){this.comment=true;return}if(!e){this.empty=true;return}this.parseNegate();var n=this.globSet=this.braceExpand();if(t.debug)this.debug=function debug(){console.error.apply(console,arguments)};this.debug(this.pattern,n);n=this.globParts=n.map((function(e){return e.split(f)}));this.debug(this.pattern,n);n=n.map((function(e,t,n){return e.map(this.parse,this)}),this);this.debug(this.pattern,n);n=n.filter((function(e){return e.indexOf(false)===-1}));this.debug(this.pattern,n);this.set=n}Minimatch.prototype.parseNegate=parseNegate;function parseNegate(){var e=this.pattern;var t=false;var n=this.options;var r=0;if(n.nonegate)return;for(var i=0,s=e.length;i<s&&e.charAt(i)==="!";i++){t=!t;r++}if(r)this.pattern=e.substr(r);this.negate=t}minimatch.braceExpand=function(e,t){return braceExpand(e,t)};Minimatch.prototype.braceExpand=braceExpand;function braceExpand(e,t){if(!t){if(this instanceof Minimatch){t=this.options}else{t={}}}e=typeof e==="undefined"?this.pattern:e;assertValidPattern(e);if(t.nobrace||!/\{(?:(?!\{).)*\}/.test(e)){return[e]}return s(e)}var p=1024*64;var assertValidPattern=function(e){if(typeof e!=="string"){throw new TypeError("invalid pattern")}if(e.length>p){throw new TypeError("pattern is too long")}};Minimatch.prototype.parse=parse;var h={};function parse(e,t){assertValidPattern(e);var n=this.options;if(e==="**"){if(!n.noglobstar)return i;else e="*"}if(e==="")return"";var r="";var s=!!n.nocase;var u=false;var l=[];var f=[];var p;var m=false;var g=-1;var v=-1;var y=e.charAt(0)==="."?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)";var b=this;function clearStateChar(){if(p){switch(p){case"*":r+=c;s=true;break;case"?":r+=a;s=true;break;default:r+="\\"+p;break}b.debug("clearStateChar %j %j",p,r);p=false}}for(var _=0,S=e.length,w;_<S&&(w=e.charAt(_));_++){this.debug("%s\t%s %s %j",e,_,r,w);if(u&&d[w]){r+="\\"+w;u=false;continue}switch(w){case"/":{return false}case"\\":clearStateChar();u=true;continue;case"?":case"*":case"+":case"@":case"!":this.debug("%s\t%s %s %j <-- stateChar",e,_,r,w);if(m){this.debug("  in class");if(w==="!"&&_===v+1)w="^";r+=w;continue}b.debug("call clearStateChar %j",p);clearStateChar();p=w;if(n.noext)clearStateChar();continue;case"(":if(m){r+="(";continue}if(!p){r+="\\(";continue}l.push({type:p,start:_-1,reStart:r.length,open:o[p].open,close:o[p].close});r+=p==="!"?"(?:(?!(?:":"(?:";this.debug("plType %j %j",p,r);p=false;continue;case")":if(m||!l.length){r+="\\)";continue}clearStateChar();s=true;var T=l.pop();r+=T.close;if(T.type==="!"){f.push(T)}T.reEnd=r.length;continue;case"|":if(m||!l.length||u){r+="\\|";u=false;continue}clearStateChar();r+="|";continue;case"[":clearStateChar();if(m){r+="\\"+w;continue}m=true;v=_;g=r.length;r+=w;continue;case"]":if(_===v+1||!m){r+="\\"+w;u=false;continue}var k=e.substring(v+1,_);try{RegExp("["+k+"]")}catch(e){var C=this.parse(k,h);r=r.substr(0,g)+"\\["+C[0]+"\\]";s=s||C[1];m=false;continue}s=true;m=false;r+=w;continue;default:clearStateChar();if(u){u=false}else if(d[w]&&!(w==="^"&&m)){r+="\\"}r+=w}}if(m){k=e.substr(v+1);C=this.parse(k,h);r=r.substr(0,g)+"\\["+C[0];s=s||C[1]}for(T=l.pop();T;T=l.pop()){var E=r.slice(T.reStart+T.open.length);this.debug("setting tail",r,T);E=E.replace(/((?:\\{2}){0,64})(\\?)\|/g,(function(e,t,n){if(!n){n="\\"}return t+t+n+"|"}));this.debug("tail=%j\n   %s",E,E,T,r);var R=T.type==="*"?c:T.type==="?"?a:"\\"+T.type;s=true;r=r.slice(0,T.reStart)+R+"\\("+E}clearStateChar();if(u){r+="\\\\"}var x=false;switch(r.charAt(0)){case"[":case".":case"(":x=true}for(var O=f.length-1;O>-1;O--){var D=f[O];var P=r.slice(0,D.reStart);var I=r.slice(D.reStart,D.reEnd-8);var M=r.slice(D.reEnd-8,D.reEnd);var N=r.slice(D.reEnd);M+=N;var A=P.split("(").length-1;var F=N;for(_=0;_<A;_++){F=F.replace(/\)[+*?]?/,"")}N=F;var L="";if(N===""&&t!==h){L="$"}var j=P+I+N+L+M;r=j}if(r!==""&&s){r="(?=.)"+r}if(x){r=y+r}if(t===h){return[r,s]}if(!s){return globUnescape(e)}var q=n.nocase?"i":"";try{var $=new RegExp("^"+r+"$",q)}catch(e){return new RegExp("$.")}$._glob=e;$._src=r;return $}minimatch.makeRe=function(e,t){return new Minimatch(e,t||{}).makeRe()};Minimatch.prototype.makeRe=makeRe;function makeRe(){if(this.regexp||this.regexp===false)return this.regexp;var e=this.set;if(!e.length){this.regexp=false;return this.regexp}var t=this.options;var n=t.noglobstar?c:t.dot?u:l;var r=t.nocase?"i":"";var s=e.map((function(e){return e.map((function(e){return e===i?n:typeof e==="string"?regExpEscape(e):e._src})).join("\\/")})).join("|");s="^(?:"+s+")$";if(this.negate)s="^(?!"+s+").*$";try{this.regexp=new RegExp(s,r)}catch(e){this.regexp=false}return this.regexp}minimatch.match=function(e,t,n){n=n||{};var r=new Minimatch(t,n);e=e.filter((function(e){return r.match(e)}));if(r.options.nonull&&!e.length){e.push(t)}return e};Minimatch.prototype.match=function match(e,t){if(typeof t==="undefined")t=this.partial;this.debug("match",e,this.pattern);if(this.comment)return false;if(this.empty)return e==="";if(e==="/"&&t)return true;var n=this.options;if(r.sep!=="/"){e=e.split(r.sep).join("/")}e=e.split(f);this.debug(this.pattern,"split",e);var i=this.set;this.debug(this.pattern,"set",i);var s;var o;for(o=e.length-1;o>=0;o--){s=e[o];if(s)break}for(o=0;o<i.length;o++){var a=i[o];var c=e;if(n.matchBase&&a.length===1){c=[s]}var u=this.matchOne(c,a,t);if(u){if(n.flipNegate)return true;return!this.negate}}if(n.flipNegate)return false;return this.negate};Minimatch.prototype.matchOne=function(e,t,n){var r=this.options;this.debug("matchOne",{this:this,file:e,pattern:t});this.debug("matchOne",e.length,t.length);for(var s=0,o=0,a=e.length,c=t.length;s<a&&o<c;s++,o++){this.debug("matchOne loop");var u=t[o];var l=e[s];this.debug(t,u,l);if(u===false)return false;if(u===i){this.debug("GLOBSTAR",[t,u,l]);var d=s;var f=o+1;if(f===c){this.debug("** at the end");for(;s<a;s++){if(e[s]==="."||e[s]===".."||!r.dot&&e[s].charAt(0)===".")return false}return true}while(d<a){var p=e[d];this.debug("\nglobstar while",e,d,t,f,p);if(this.matchOne(e.slice(d),t.slice(f),n)){this.debug("globstar found match!",d,a,p);return true}else{if(p==="."||p===".."||!r.dot&&p.charAt(0)==="."){this.debug("dot detected!",e,d,t,f);break}this.debug("globstar swallow a segment, and continue");d++}}if(n){this.debug("\n>>> no match, partial?",e,d,t,f);if(d===a)return true}return false}var h;if(typeof u==="string"){h=l===u;this.debug("string match",u,l,h)}else{h=l.match(u);this.debug("pattern match",u,l,h)}if(!h)return false}if(s===a&&o===c){return true}else if(s===a){return n}else if(o===c){return s===a-1&&e[s]===""}throw new Error("wtf?")};function globUnescape(e){return e.replace(/\\(.)/g,"$1")}function regExpEscape(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}},22376:(e,t,n)=>{const{ProfileHelpers:r}=n(52259);class MixpanelGroups extends(r()){constructor(e){super();this.mixpanel=e;this.endpoint="/groups"}set_once(e,t,n,r,i,s){const o={$group_key:e,$group_id:t};this._set(n,r,i,s,{identifiers:o,set_once:true})}set(e,t,n,r,i,s){const o={$group_key:e,$group_id:t};this._set(n,r,i,s,{identifiers:o})}delete_group(e,t,n,r){const i={$group_key:e,$group_id:t};this._delete_profile({identifiers:i,modifiers:n,callback:r})}remove(e,t,n,r,i){const s={$group_key:e,$group_id:t};this._remove({identifiers:s,data:n,modifiers:r,callback:i})}union(e,t,n,r,i){const s={$group_key:e,$group_id:t};this._union({identifiers:s,data:n,modifiers:r,callback:i})}unset(e,t,n,r,i){const s={$group_key:e,$group_id:t};this._unset({identifiers:s,prop:n,modifiers:r,callback:i})}}t.MixpanelGroups=MixpanelGroups},36449:(e,t,n)=>{const r=n(63477);const i=n(14300).Buffer;const s=n(13685);const o=n(95687);const a=n(54214);const c=n(57310);const u=n(62023);const{async_all:l,ensure_timestamp:d}=n(53899);const{MixpanelGroups:f}=n(22376);const{MixpanelPeople:p}=n(59919);const h={test:false,debug:false,verbose:false,host:"api.mixpanel.com",protocol:"https",path:"",keepAlive:true,geolocate:false};var create_client=function(e,t){if(!e){throw new Error("The Mixpanel Client needs a Mixpanel token: `init(token)`")}const n={token:e,config:{...h}};const{keepAlive:m}=n.config;const g=50;const v=60*60*24*5;const y={http:s,https:o};const b={http:new s.Agent({keepAlive:m}),https:new o.Agent({keepAlive:m})};const _=process.env.HTTPS_PROXY||process.env.HTTP_PROXY;const S=_?new a(Object.assign(c.parse(_),{keepAlive:m})):null;n.send_request=function(e,t){t=t||function(){};let s=i.from(JSON.stringify(e.data)).toString("base64");const a=e.endpoint;const c=(e.method||"GET").toUpperCase();let u={ip:n.config.geolocate?1:0,verbose:n.config.verbose?1:0};const l=n.config.key;const d=n.config.secret;const f=y[n.config.protocol];let p={host:n.config.host,port:n.config.port,headers:{},method:c};let h;if(!f){throw new Error("Mixpanel Initialization Error: Unsupported protocol "+n.config.protocol+". "+"Supported protocols are: "+Object.keys(y))}if(c==="POST"){s="data="+s;p.headers["Content-Type"]="application/x-www-form-urlencoded";p.headers["Content-Length"]=i.byteLength(s)}else if(c==="GET"){u.data=s}if(d){if(f!==o){throw new Error("Must use HTTPS if authenticating with API Secret")}const e=i.from(d+":").toString("base64");p.headers["Authorization"]="Basic "+e}else if(l){u.api_key=l}else if(a==="/import"){throw new Error("The Mixpanel Client needs a Mixpanel API Secret when importing old events: `init(token, { secret: ... })`")}p.agent=S||b[n.config.protocol];if(n.config.test){u.test=1}p.path=n.config.path+a+"?"+r.stringify(u);h=f.request(p,(function(e){var r="";e.on("data",(function(e){r+=e}));e.on("end",(function(){var e;if(n.config.verbose){try{var i=JSON.parse(r);if(i.status!=1){e=new Error("Mixpanel Server Error: "+i.error)}}catch(t){e=new Error("Could not parse response from Mixpanel")}}else{e=r!=="1"?new Error("Mixpanel Server Error: "+r):undefined}t(e)}))}));h.on("error",(function(e){if(n.config.debug){console.log("Got Error: "+e.message)}t(e)}));if(c==="POST"){h.write(s)}h.end()};n.send_event_request=function(e,t,r,i){r.token=n.token;r.mp_lib="node";r.$lib_version=u.version;var s={event:t,properties:r};if(n.config.debug){console.log("Sending the following event to Mixpanel:\n",s)}n.send_request({method:"GET",endpoint:e,data:s},i)};var chunk=function(e,t){var n=[],r=0,i=e.length;while(r<i){n.push(e.slice(r,r+=t))}return n};var send_batch_requests=function(e,t){var r=e.event_list,i=e.endpoint,s=e.max_batch_size?Math.min(g,e.max_batch_size):g,o=e.max_concurrent_requests||e.max_batch_size>g&&Math.ceil(e.max_batch_size/g),a=chunk(r,s),c=o?chunk(a,o):[a],u=a.length,f=c.length;function send_event_batch(e,t){if(e.length>0){e=e.map((function(e){var t=e.properties;if(i==="/import"||e.properties.time){e.properties.time=d(e.properties.time)}e.properties.token=e.properties.token||n.token;return e}));n.send_request({method:"POST",endpoint:i,data:e},t)}}function send_next_request_batch(e){var n=c[e],cb=function(n,r){e+=1;if(e===f){t&&t(n,r)}else{send_next_request_batch(e)}};l(n,send_event_batch,cb)}send_next_request_batch(0);if(n.config.debug){console.log("Sending "+r.length+" events to Mixpanel in "+u+" batches of events and "+f+" batches of requests")}};n.track=function(e,t,r){if(!t||typeof t==="function"){r=t;t={}}if(t.time){t.time=d(t.time);if(t.time<Date.now()/1e3-v){throw new Error("`track` not allowed for event more than 5 days old; use `mixpanel.import()`")}}n.send_event_request("/track",e,t,r)};n.track_batch=function(e,t,n){t=t||{};if(typeof t==="function"){n=t;t={}}var r={event_list:e,endpoint:"/track",max_concurrent_requests:t.max_concurrent_requests,max_batch_size:t.max_batch_size};send_batch_requests(r,n)};n.import=function(e,t,r,i){if(!r||typeof r==="function"){i=r;r={}}r.time=d(t);n.send_event_request("/import",e,r,i)};n.import_batch=function(e,t,n){var r;if(typeof t==="function"||!t){n=t;t={}}r={event_list:e,endpoint:"/import",max_concurrent_requests:t.max_concurrent_requests,max_batch_size:t.max_batch_size};send_batch_requests(r,n)};n.alias=function(e,t,r){var i={distinct_id:e,alias:t};n.track("$create_alias",i,r)};n.groups=new f(n);n.people=new p(n);n.set_config=function(e){Object.assign(n.config,e);if(e.host){const[t,r]=e.host.split(":");n.config.host=t;if(r){n.config.port=Number(r)}}};if(t){n.set_config(t)}return n};e.exports={Client:function(e){console.warn("The function `Client(token)` is deprecated.  It is now called `init(token)`.");return create_client(e)},init:create_client}},59919:(e,t,n)=>{const{merge_modifiers:r,ProfileHelpers:i}=n(52259);class MixpanelPeople extends(i()){constructor(e){super();this.mixpanel=e;this.endpoint="/engage"}set_once(e,t,n,r,i){const s={$distinct_id:e};this._set(t,n,r,i,{identifiers:s,set_once:true})}set(e,t,n,r,i){const s={$distinct_id:e};this._set(t,n,r,i,{identifiers:s})}increment(e,t,n,i,s){var o={};if(typeof t==="object"){if(typeof n==="object"){s=i;i=n}else{s=n}for(const[e,n]of Object.entries(t)){if(isNaN(parseFloat(n))){if(this.mixpanel.config.debug){console.error("Invalid increment value passed to mixpanel.people.increment - must be a number");console.error("Passed "+e+":"+n)}}else{o[e]=n}}}else{if(typeof n==="number"||!n){n=n||1;o[t]=n;if(typeof i==="function"){s=i}}else if(typeof n==="function"){s=n;o[t]=1}else{s=i;i=typeof n==="object"?n:{};o[t]=1}}var a={$add:o,$token:this.mixpanel.token,$distinct_id:e};a=r(a,i);if(this.mixpanel.config.debug){console.log("Sending the following data to Mixpanel (Engage):");console.log(a)}this.mixpanel.send_request({method:"GET",endpoint:"/engage",data:a},s)}append(e,t,n,i,s){var o={};if(typeof t==="object"){if(typeof n==="object"){s=i;i=n}else{s=n}Object.keys(t).forEach((function(e){o[e]=t[e]}))}else{o[t]=n;if(typeof i==="function"){s=i}}var a={$append:o,$token:this.mixpanel.token,$distinct_id:e};a=r(a,i);if(this.mixpanel.config.debug){console.log("Sending the following data to Mixpanel (Engage):");console.log(a)}this.mixpanel.send_request({method:"GET",endpoint:"/engage",data:a},s)}track_charge(e,t,n,i,s){if(typeof n==="function"||!n){s=n||function(){};n={}}else{if(typeof i==="function"||!i){s=i||function(){};if(n.$ignore_time||n.hasOwnProperty("$ip")){i={};Object.keys(n).forEach((function(e){i[e]=n[e];delete n[e]}))}}}if(typeof t!=="number"){t=parseFloat(t);if(isNaN(t)){console.error("Invalid value passed to mixpanel.people.track_charge - must be a number");return}}n.$amount=t;if(n.hasOwnProperty("$time")){var o=n.$time;if(Object.prototype.toString.call(o)==="[object Date]"){n.$time=o.toISOString()}}var a={$append:{$transactions:n},$token:this.mixpanel.token,$distinct_id:e};a=r(a,i);if(this.mixpanel.config.debug){console.log("Sending the following data to Mixpanel (Engage):");console.log(a)}this.mixpanel.send_request({method:"GET",endpoint:"/engage",data:a},s)}clear_charges(e,t,n){var i={$set:{$transactions:[]},$token:this.mixpanel.token,$distinct_id:e};if(typeof t==="function"){n=t}i=r(i,t);if(this.mixpanel.config.debug){console.log("Clearing this user's charges:",e)}this.mixpanel.send_request({method:"GET",endpoint:"/engage",data:i},n)}delete_user(e,t,n){const r={$distinct_id:e};this._delete_profile({identifiers:r,modifiers:t,callback:n})}remove(e,t,n,r){const i={$distinct_id:e};this._remove({identifiers:i,data:t,modifiers:n,callback:r})}union(e,t,n,r){const i={$distinct_id:e};this._union({identifiers:i,data:t,modifiers:n,callback:r})}unset(e,t,n,r){const i={$distinct_id:e};this._unset({identifiers:i,prop:t,modifiers:n,callback:r})}}t.MixpanelPeople=MixpanelPeople},52259:(e,t,n)=>{const r=n(73837);const{ensure_timestamp:i}=n(53899);function merge_modifiers(e,t){if(t){if(t.$ignore_alias){e.$ignore_alias=t.$ignore_alias}if(t.$ignore_time){e.$ignore_time=t.$ignore_time}if(t.hasOwnProperty("$ip")){e.$ip=t.$ip}if(t.hasOwnProperty("$time")){e.$time=i(t.$time)}if(t.hasOwnProperty("$latitude")&&t.hasOwnProperty("$longitude")){e.$latitude=t.$latitude;e.$longitude=t.$longitude}}return e}t.merge_modifiers=merge_modifiers;t.ProfileHelpers=(e=Object)=>class extends e{get token(){return this.mixpanel.token}get config(){return this.mixpanel.config}_set(e,t,n,r,{identifiers:i,set_once:s=false}){let o={};if(typeof e==="object"){if(typeof t==="object"){r=n;n=t}else{r=t}o=e}else{o[e]=t;if(typeof n==="function"||!n){r=n}}let a={$token:this.token,...i};const c=s?"$set_once":"$set";a[c]=o;if("ip"in o){a.$ip=o.ip;delete o.ip}if(o.$ignore_time){a.$ignore_time=o.$ignore_time;delete o.$ignore_time}a=merge_modifiers(a,n);if(this.config.debug){console.log(`Sending the following data to Mixpanel (${this.endpoint}):`);console.log(a)}this.mixpanel.send_request({method:"GET",endpoint:this.endpoint,data:a},r)}_delete_profile({identifiers:e,modifiers:t,callback:n}){let r={$delete:"",$token:this.token,...e};if(typeof t==="function"){n=t}r=merge_modifiers(r,t);if(this.config.debug){console.log(`Deleting profile ${JSON.stringify(e)}`)}this.mixpanel.send_request({method:"GET",endpoint:this.endpoint,data:r},n)}_remove({identifiers:e,data:t,modifiers:n,callback:i}){let s={};if(typeof t!=="object"||r.isArray(t)){if(this.config.debug){console.error("Invalid value passed to #remove - data must be an object with scalar values")}return}for(const[e,n]of Object.entries(t)){if(typeof n==="string"||typeof n==="number"){s[e]=n}else{if(this.config.debug){console.error("Invalid argument passed to #remove - values must be scalar");console.error("Passed "+e+":",n)}return}}if(Object.keys(s).length===0){return}t={$remove:s,$token:this.token,...e};if(typeof n==="function"){i=n}t=merge_modifiers(t,n);if(this.config.debug){console.log(`Sending the following data to Mixpanel (${this.endpoint}):`);console.log(t)}this.mixpanel.send_request({method:"GET",endpoint:this.endpoint,data:t},i)}_union({identifiers:e,data:t,modifiers:n,callback:i}){let s={};if(typeof t!=="object"||r.isArray(t)){if(this.config.debug){console.error("Invalid value passed to #union - data must be an object with scalar or array values")}return}for(const[e,n]of Object.entries(t)){if(r.isArray(n)){var o=n.filter((function(e){return typeof e==="string"||typeof e==="number"}));if(o.length>0){s[e]=o}}else if(typeof n==="string"||typeof n==="number"){s[e]=[n]}else{if(this.config.debug){console.error("Invalid argument passed to #union - values must be a scalar value or array");console.error("Passed "+e+":",n)}}}if(Object.keys(s).length===0){return}t={$union:s,$token:this.token,...e};if(typeof n==="function"){i=n}t=merge_modifiers(t,n);if(this.config.debug){console.log(`Sending the following data to Mixpanel (${this.endpoint}):`);console.log(t)}this.mixpanel.send_request({method:"GET",endpoint:this.endpoint,data:t},i)}_unset({identifiers:e,prop:t,modifiers:n,callback:i}){let s=[];if(r.isArray(t)){s=t}else if(typeof t==="string"){s=[t]}else{if(this.config.debug){console.error("Invalid argument passed to #unset - must be a string or array");console.error("Passed: "+t)}return}let o={$unset:s,$token:this.token,...e};if(typeof n==="function"){i=n}o=merge_modifiers(o,n);if(this.config.debug){console.log(`Sending the following data to Mixpanel (${this.endpoint}):`);console.log(o)}this.mixpanel.send_request({method:"GET",endpoint:this.endpoint,data:o},i)}}},53899:(e,t)=>{t.async_all=function(e,t,n){var r=e.length,i=null,s=[],done=function(e,t){if(e){i=i||[];i.push(e)}s.push(t);if(--r===0){n(i,s)}};if(r===0){n(i,s)}else{for(var o=0,a=e.length;o<a;o++){t(e[o],done)}}};t.ensure_timestamp=function(e){if(!(e instanceof Date||typeof e==="number")){throw new Error("`time` property must be a Date or Unix timestamp and is only required for `import` endpoint")}return e instanceof Date?Math.floor(e.getTime()/1e3):e}},80040:e=>{var t=1e3;var n=t*60;var r=n*60;var i=r*24;var s=i*7;var o=i*365.25;e.exports=function(e,t){t=t||{};var n=typeof e;if(n==="string"&&e.length>0){return parse(e)}else if(n==="number"&&isFinite(e)){return t.long?fmtLong(e):fmtShort(e)}throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function parse(e){e=String(e);if(e.length>100){return}var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!a){return}var c=parseFloat(a[1]);var u=(a[2]||"ms").toLowerCase();switch(u){case"years":case"year":case"yrs":case"yr":case"y":return c*o;case"weeks":case"week":case"w":return c*s;case"days":case"day":case"d":return c*i;case"hours":case"hour":case"hrs":case"hr":case"h":return c*r;case"minutes":case"minute":case"mins":case"min":case"m":return c*n;case"seconds":case"second":case"secs":case"sec":case"s":return c*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return undefined}}function fmtShort(e){var s=Math.abs(e);if(s>=i){return Math.round(e/i)+"d"}if(s>=r){return Math.round(e/r)+"h"}if(s>=n){return Math.round(e/n)+"m"}if(s>=t){return Math.round(e/t)+"s"}return e+"ms"}function fmtLong(e){var s=Math.abs(e);if(s>=i){return plural(e,s,i,"day")}if(s>=r){return plural(e,s,r,"hour")}if(s>=n){return plural(e,s,n,"minute")}if(s>=t){return plural(e,s,t,"second")}return e+" ms"}function plural(e,t,n,r){var i=t>=n*1.5;return Math.round(e/n)+" "+r+(i?"s":"")}},56625:(e,t,n)=>{"use strict";var r=n(38143);e.exports=function one(e){var t=0,n;function onetime(){if(t)return n;t=1;n=e.apply(this,arguments);e=null;return n}onetime.displayName=r(e);return onetime}},31974:function(e){(function(t,n){if(true){e.exports=n()}else{}})(this,(function(){var e=[];var t=[];var n={};var r={};var i={};function sanitizeRule(e){if(typeof e==="string"){return new RegExp("^"+e+"$","i")}return e}function restoreCase(e,t){if(e===t)return t;if(e===e.toLowerCase())return t.toLowerCase();if(e===e.toUpperCase())return t.toUpperCase();if(e[0]===e[0].toUpperCase()){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()}return t.toLowerCase()}function interpolate(e,t){return e.replace(/\$(\d{1,2})/g,(function(e,n){return t[n]||""}))}function replace(e,t){return e.replace(t[0],(function(n,r){var i=interpolate(t[1],arguments);if(n===""){return restoreCase(e[r-1],i)}return restoreCase(n,i)}))}function sanitizeWord(e,t,r){if(!e.length||n.hasOwnProperty(e)){return t}var i=r.length;while(i--){var s=r[i];if(s[0].test(t))return replace(t,s)}return t}function replaceWord(e,t,n){return function(r){var i=r.toLowerCase();if(t.hasOwnProperty(i)){return restoreCase(r,i)}if(e.hasOwnProperty(i)){return restoreCase(r,e[i])}return sanitizeWord(i,r,n)}}function checkWord(e,t,n,r){return function(r){var i=r.toLowerCase();if(t.hasOwnProperty(i))return true;if(e.hasOwnProperty(i))return false;return sanitizeWord(i,i,n)===i}}function pluralize(e,t,n){var r=t===1?pluralize.singular(e):pluralize.plural(e);return(n?t+" ":"")+r}pluralize.plural=replaceWord(i,r,e);pluralize.isPlural=checkWord(i,r,e);pluralize.singular=replaceWord(r,i,t);pluralize.isSingular=checkWord(r,i,t);pluralize.addPluralRule=function(t,n){e.push([sanitizeRule(t),n])};pluralize.addSingularRule=function(e,n){t.push([sanitizeRule(e),n])};pluralize.addUncountableRule=function(e){if(typeof e==="string"){n[e.toLowerCase()]=true;return}pluralize.addPluralRule(e,"$0");pluralize.addSingularRule(e,"$0")};pluralize.addIrregularRule=function(e,t){t=t.toLowerCase();e=e.toLowerCase();i[e]=t;r[t]=e};[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["is","are"],["was","were"],["has","have"],["this","these"],["that","those"],["echo","echoes"],["dingo","dingoes"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["looey","looies"],["thief","thieves"],["groove","grooves"],["pickaxe","pickaxes"],["passerby","passersby"]].forEach((function(e){return pluralize.addIrregularRule(e[0],e[1])}));[[/s?$/i,"s"],[/[^\u0000-\u007F]$/i,"$0"],[/([^aeiou]ese)$/i,"$1"],[/(ax|test)is$/i,"$1es"],[/(alias|[^aou]us|t[lm]as|gas|ris)$/i,"$1es"],[/(e[mn]u)s?$/i,"$1s"],[/([^l]ias|[aeiou]las|[ejzr]as|[iu]am)$/i,"$1"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1i"],[/(alumn|alg|vertebr)(?:a|ae)$/i,"$1ae"],[/(seraph|cherub)(?:im)?$/i,"$1im"],[/(her|at|gr)o$/i,"$1oes"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i,"$1a"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i,"$1a"],[/sis$/i,"ses"],[/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i,"$1$2ves"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/([^ch][ieo][ln])ey$/i,"$1ies"],[/(x|ch|ss|sh|zz)$/i,"$1es"],[/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i,"$1ices"],[/\b((?:tit)?m|l)(?:ice|ouse)$/i,"$1ice"],[/(pe)(?:rson|ople)$/i,"$1ople"],[/(child)(?:ren)?$/i,"$1ren"],[/eaux$/i,"$0"],[/m[ae]n$/i,"men"],["thou","you"]].forEach((function(e){return pluralize.addPluralRule(e[0],e[1])}));[[/s$/i,""],[/(ss)$/i,"$1"],[/(wi|kni|(?:after|half|high|low|mid|non|night|[^\w]|^)li)ves$/i,"$1fe"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/i,"$1f"],[/ies$/i,"y"],[/\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i,"$1ie"],[/\b(mon|smil)ies$/i,"$1ey"],[/\b((?:tit)?m|l)ice$/i,"$1ouse"],[/(seraph|cherub)im$/i,"$1"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|t[lm]as|gas|(?:her|at|gr)o|[aeiou]ris)(?:es)?$/i,"$1"],[/(analy|diagno|parenthe|progno|synop|the|empha|cri|ne)(?:sis|ses)$/i,"$1sis"],[/(movie|twelve|abuse|e[mn]u)s$/i,"$1"],[/(test)(?:is|es)$/i,"$1is"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1us"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i,"$1um"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i,"$1on"],[/(alumn|alg|vertebr)ae$/i,"$1a"],[/(cod|mur|sil|vert|ind)ices$/i,"$1ex"],[/(matr|append)ices$/i,"$1ix"],[/(pe)(rson|ople)$/i,"$1rson"],[/(child)ren$/i,"$1"],[/(eau)x?$/i,"$1"],[/men$/i,"man"]].forEach((function(e){return pluralize.addSingularRule(e[0],e[1])}));["adulthood","advice","agenda","aid","aircraft","alcohol","ammo","analytics","anime","athletics","audio","bison","blood","bream","buffalo","butter","carp","cash","chassis","chess","clothing","cod","commerce","cooperation","corps","debris","diabetes","digestion","elk","energy","equipment","excretion","expertise","firmware","flounder","fun","gallows","garbage","graffiti","hardware","headquarters","health","herpes","highjinks","homework","housework","information","jeans","justice","kudos","labour","literature","machinery","mackerel","mail","media","mews","moose","music","mud","manga","news","only","personnel","pike","plankton","pliers","police","pollution","premises","rain","research","rice","salmon","scissors","series","sewage","shambles","shrimp","software","species","staff","swine","tennis","traffic","transportation","trout","tuna","wealth","welfare","whiting","wildebeest","wildlife","you",/pok[eÃ©]mon$/i,/[^aeiou]ese$/i,/deer$/i,/fish$/i,/measles$/i,/o[iu]s$/i,/pox$/i,/sheep$/i].forEach(pluralize.addUncountableRule);return pluralize}))},96359:(e,t,n)=>{"use strict";var r=n(4440);var i=n(5566);var s=Object.prototype.hasOwnProperty;function isRetryError(e){return e&&e.code==="EPROMISERETRY"&&s.call(e,"retried")}function promiseRetry(e,t){var n;var s;if(typeof e==="object"&&typeof t==="function"){n=t;t=e;e=n}s=i.operation(t);return new Promise((function(t,n){s.attempt((function(i){Promise.resolve().then((function(){return e((function(e){if(isRetryError(e)){e=e.retried}throw r(new Error("Retrying"),"EPROMISERETRY",{retried:e})}),i)})).then(t,(function(e){if(isRetryError(e)){e=e.retried;if(s.retry(e||new Error)){return}}n(e)}))}))}))}e.exports=promiseRetry},5566:(e,t,n)=>{e.exports=n(78418)},78418:(e,t,n)=>{var r=n(44330);t.operation=function(e){var n=t.timeouts(e);return new r(n,{forever:e&&e.forever,unref:e&&e.unref,maxRetryTime:e&&e.maxRetryTime})};t.timeouts=function(e){if(e instanceof Array){return[].concat(e)}var t={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:Infinity,randomize:false};for(var n in e){t[n]=e[n]}if(t.minTimeout>t.maxTimeout){throw new Error("minTimeout is greater than maxTimeout")}var r=[];for(var i=0;i<t.retries;i++){r.push(this.createTimeout(i,t))}if(e&&e.forever&&!r.length){r.push(this.createTimeout(i,t))}r.sort((function(e,t){return e-t}));return r};t.createTimeout=function(e,t){var n=t.randomize?Math.random()+1:1;var r=Math.round(n*t.minTimeout*Math.pow(t.factor,e));r=Math.min(r,t.maxTimeout);return r};t.wrap=function(e,n,r){if(n instanceof Array){r=n;n=null}if(!r){r=[];for(var i in e){if(typeof e[i]==="function"){r.push(i)}}}for(var s=0;s<r.length;s++){var o=r[s];var a=e[o];e[o]=function retryWrapper(r){var i=t.operation(n);var s=Array.prototype.slice.call(arguments,1);var o=s.pop();s.push((function(e){if(i.retry(e)){return}if(e){arguments[0]=i.mainError()}o.apply(this,arguments)}));i.attempt((function(){r.apply(e,s)}))}.bind(e,a);e[o].options=n}}},44330:e=>{function RetryOperation(e,t){if(typeof t==="boolean"){t={forever:t}}this._originalTimeouts=JSON.parse(JSON.stringify(e));this._timeouts=e;this._options=t||{};this._maxRetryTime=t&&t.maxRetryTime||Infinity;this._fn=null;this._errors=[];this._attempts=1;this._operationTimeout=null;this._operationTimeoutCb=null;this._timeout=null;this._operationStart=null;if(this._options.forever){this._cachedTimeouts=this._timeouts.slice(0)}}e.exports=RetryOperation;RetryOperation.prototype.reset=function(){this._attempts=1;this._timeouts=this._originalTimeouts};RetryOperation.prototype.stop=function(){if(this._timeout){clearTimeout(this._timeout)}this._timeouts=[];this._cachedTimeouts=null};RetryOperation.prototype.retry=function(e){if(this._timeout){clearTimeout(this._timeout)}if(!e){return false}var t=(new Date).getTime();if(e&&t-this._operationStart>=this._maxRetryTime){this._errors.unshift(new Error("RetryOperation timeout occurred"));return false}this._errors.push(e);var n=this._timeouts.shift();if(n===undefined){if(this._cachedTimeouts){this._errors.splice(this._errors.length-1,this._errors.length);this._timeouts=this._cachedTimeouts.slice(0);n=this._timeouts.shift()}else{return false}}var r=this;var i=setTimeout((function(){r._attempts++;if(r._operationTimeoutCb){r._timeout=setTimeout((function(){r._operationTimeoutCb(r._attempts)}),r._operationTimeout);if(r._options.unref){r._timeout.unref()}}r._fn(r._attempts)}),n);if(this._options.unref){i.unref()}return true};RetryOperation.prototype.attempt=function(e,t){this._fn=e;if(t){if(t.timeout){this._operationTimeout=t.timeout}if(t.cb){this._operationTimeoutCb=t.cb}}var n=this;if(this._operationTimeoutCb){this._timeout=setTimeout((function(){n._operationTimeoutCb()}),n._operationTimeout)}this._operationStart=(new Date).getTime();this._fn(this._attempts)};RetryOperation.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated");this.attempt(e)};RetryOperation.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated");this.attempt(e)};RetryOperation.prototype.start=RetryOperation.prototype.try;RetryOperation.prototype.errors=function(){return this._errors};RetryOperation.prototype.attempts=function(){return this._attempts};RetryOperation.prototype.mainError=function(){if(this._errors.length===0){return null}var e={};var t=null;var n=0;for(var r=0;r<this._errors.length;r++){var i=this._errors[r];var s=i.message;var o=(e[s]||0)+1;e[s]=o;if(o>=n){t=i;n=o}}return t}},13130:e=>{"use strict";const t={};function createErrorType(e,n,r){if(!r){r=Error}function getMessage(e,t,r){if(typeof n==="string"){return n}else{return n(e,t,r)}}class NodeError extends r{constructor(e,t,n){super(getMessage(e,t,n))}}NodeError.prototype.name=r.name;NodeError.prototype.code=e;t[e]=NodeError}function oneOf(e,t){if(Array.isArray(e)){const n=e.length;e=e.map((e=>String(e)));if(n>2){return`one of ${t} ${e.slice(0,n-1).join(", ")}, or `+e[n-1]}else if(n===2){return`one of ${t} ${e[0]} or ${e[1]}`}else{return`of ${t} ${e[0]}`}}else{return`of ${t} ${String(e)}`}}function startsWith(e,t,n){return e.substr(!n||n<0?0:+n,t.length)===t}function endsWith(e,t,n){if(n===undefined||n>e.length){n=e.length}return e.substring(n-t.length,n)===t}function includes(e,t,n){if(typeof n!=="number"){n=0}if(n+t.length>e.length){return false}else{return e.indexOf(t,n)!==-1}}createErrorType("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError);createErrorType("ERR_INVALID_ARG_TYPE",(function(e,t,n){let r;if(typeof t==="string"&&startsWith(t,"not ")){r="must not be";t=t.replace(/^not /,"")}else{r="must be"}let i;if(endsWith(e," argument")){i=`The ${e} ${r} ${oneOf(t,"type")}`}else{const n=includes(e,".")?"property":"argument";i=`The "${e}" ${n} ${r} ${oneOf(t,"type")}`}i+=`. Received type ${typeof n}`;return i}),TypeError);createErrorType("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");createErrorType("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"}));createErrorType("ERR_STREAM_PREMATURE_CLOSE","Premature close");createErrorType("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"}));createErrorType("ERR_MULTIPLE_CALLBACK","Callback called multiple times");createErrorType("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");createErrorType("ERR_STREAM_WRITE_AFTER_END","write after end");createErrorType("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);createErrorType("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError);createErrorType("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");e.exports.q=t},88393:(e,t,n)=>{"use strict";var r=Object.keys||function(e){var t=[];for(var n in e){t.push(n)}return t};e.exports=Duplex;var i=n(80284);var s=n(36100);n(76919)(Duplex,i);{var o=r(s.prototype);for(var a=0;a<o.length;a++){var c=o[a];if(!Duplex.prototype[c])Duplex.prototype[c]=s.prototype[c]}}function Duplex(e){if(!(this instanceof Duplex))return new Duplex(e);i.call(this,e);s.call(this,e);this.allowHalfOpen=true;if(e){if(e.readable===false)this.readable=false;if(e.writable===false)this.writable=false;if(e.allowHalfOpen===false){this.allowHalfOpen=false;this.once("end",onend)}}}Object.defineProperty(Duplex.prototype,"writableHighWaterMark",{enumerable:false,get:function get(){return this._writableState.highWaterMark}});Object.defineProperty(Duplex.prototype,"writableBuffer",{enumerable:false,get:function get(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(Duplex.prototype,"writableLength",{enumerable:false,get:function get(){return this._writableState.length}});function onend(){if(this._writableState.ended)return;process.nextTick(onEndNT,this)}function onEndNT(e){e.end()}Object.defineProperty(Duplex.prototype,"destroyed",{enumerable:false,get:function get(){if(this._readableState===undefined||this._writableState===undefined){return false}return this._readableState.destroyed&&this._writableState.destroyed},set:function set(e){if(this._readableState===undefined||this._writableState===undefined){return}this._readableState.destroyed=e;this._writableState.destroyed=e}})},55125:(e,t,n)=>{"use strict";e.exports=PassThrough;var r=n(65469);n(76919)(PassThrough,r);function PassThrough(e){if(!(this instanceof PassThrough))return new PassThrough(e);r.call(this,e)}PassThrough.prototype._transform=function(e,t,n){n(null,e)}},80284:(e,t,n)=>{"use strict";e.exports=Readable;var r;Readable.ReadableState=ReadableState;var i=n(82361).EventEmitter;var s=function EElistenerCount(e,t){return e.listeners(t).length};var o=n(35016);var a=n(14300).Buffer;var c=global.Uint8Array||function(){};function _uint8ArrayToBuffer(e){return a.from(e)}function _isUint8Array(e){return a.isBuffer(e)||e instanceof c}var u=n(73837);var l;if(u&&u.debuglog){l=u.debuglog("stream")}else{l=function debug(){}}var d=n(63900);var f=n(3090);var p=n(5785),h=p.getHighWaterMark;var m=n(13130).q,g=m.ERR_INVALID_ARG_TYPE,v=m.ERR_STREAM_PUSH_AFTER_EOF,y=m.ERR_METHOD_NOT_IMPLEMENTED,b=m.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;var _;var S;var w;n(76919)(Readable,o);var T=f.errorOrDestroy;var k=["error","close","destroy","pause","resume"];function prependListener(e,t,n){if(typeof e.prependListener==="function")return e.prependListener(t,n);if(!e._events||!e._events[t])e.on(t,n);else if(Array.isArray(e._events[t]))e._events[t].unshift(n);else e._events[t]=[n,e._events[t]]}function ReadableState(e,t,i){r=r||n(88393);e=e||{};if(typeof i!=="boolean")i=t instanceof r;this.objectMode=!!e.objectMode;if(i)this.objectMode=this.objectMode||!!e.readableObjectMode;this.highWaterMark=h(this,e,"readableHighWaterMark",i);this.buffer=new d;this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.ended=false;this.endEmitted=false;this.reading=false;this.sync=true;this.needReadable=false;this.emittedReadable=false;this.readableListening=false;this.resumeScheduled=false;this.paused=true;this.emitClose=e.emitClose!==false;this.autoDestroy=!!e.autoDestroy;this.destroyed=false;this.defaultEncoding=e.defaultEncoding||"utf8";this.awaitDrain=0;this.readingMore=false;this.decoder=null;this.encoding=null;if(e.encoding){if(!_)_=n(60642).s;this.decoder=new _(e.encoding);this.encoding=e.encoding}}function Readable(e){r=r||n(88393);if(!(this instanceof Readable))return new Readable(e);var t=this instanceof r;this._readableState=new ReadableState(e,this,t);this.readable=true;if(e){if(typeof e.read==="function")this._read=e.read;if(typeof e.destroy==="function")this._destroy=e.destroy}o.call(this)}Object.defineProperty(Readable.prototype,"destroyed",{enumerable:false,get:function get(){if(this._readableState===undefined){return false}return this._readableState.destroyed},set:function set(e){if(!this._readableState){return}this._readableState.destroyed=e}});Readable.prototype.destroy=f.destroy;Readable.prototype._undestroy=f.undestroy;Readable.prototype._destroy=function(e,t){t(e)};Readable.prototype.push=function(e,t){var n=this._readableState;var r;if(!n.objectMode){if(typeof e==="string"){t=t||n.defaultEncoding;if(t!==n.encoding){e=a.from(e,t);t=""}r=true}}else{r=true}return readableAddChunk(this,e,t,false,r)};Readable.prototype.unshift=function(e){return readableAddChunk(this,e,null,true,false)};function readableAddChunk(e,t,n,r,i){l("readableAddChunk",t);var s=e._readableState;if(t===null){s.reading=false;onEofChunk(e,s)}else{var o;if(!i)o=chunkInvalid(s,t);if(o){T(e,o)}else if(s.objectMode||t&&t.length>0){if(typeof t!=="string"&&!s.objectMode&&Object.getPrototypeOf(t)!==a.prototype){t=_uint8ArrayToBuffer(t)}if(r){if(s.endEmitted)T(e,new b);else addChunk(e,s,t,true)}else if(s.ended){T(e,new v)}else if(s.destroyed){return false}else{s.reading=false;if(s.decoder&&!n){t=s.decoder.write(t);if(s.objectMode||t.length!==0)addChunk(e,s,t,false);else maybeReadMore(e,s)}else{addChunk(e,s,t,false)}}}else if(!r){s.reading=false;maybeReadMore(e,s)}}return!s.ended&&(s.length<s.highWaterMark||s.length===0)}function addChunk(e,t,n,r){if(t.flowing&&t.length===0&&!t.sync){t.awaitDrain=0;e.emit("data",n)}else{t.length+=t.objectMode?1:n.length;if(r)t.buffer.unshift(n);else t.buffer.push(n);if(t.needReadable)emitReadable(e)}maybeReadMore(e,t)}function chunkInvalid(e,t){var n;if(!_isUint8Array(t)&&typeof t!=="string"&&t!==undefined&&!e.objectMode){n=new g("chunk",["string","Buffer","Uint8Array"],t)}return n}Readable.prototype.isPaused=function(){return this._readableState.flowing===false};Readable.prototype.setEncoding=function(e){if(!_)_=n(60642).s;var t=new _(e);this._readableState.decoder=t;this._readableState.encoding=this._readableState.decoder.encoding;var r=this._readableState.buffer.head;var i="";while(r!==null){i+=t.write(r.data);r=r.next}this._readableState.buffer.clear();if(i!=="")this._readableState.buffer.push(i);this._readableState.length=i.length;return this};var C=1073741824;function computeNewHighWaterMark(e){if(e>=C){e=C}else{e--;e|=e>>>1;e|=e>>>2;e|=e>>>4;e|=e>>>8;e|=e>>>16;e++}return e}function howMuchToRead(e,t){if(e<=0||t.length===0&&t.ended)return 0;if(t.objectMode)return 1;if(e!==e){if(t.flowing&&t.length)return t.buffer.head.data.length;else return t.length}if(e>t.highWaterMark)t.highWaterMark=computeNewHighWaterMark(e);if(e<=t.length)return e;if(!t.ended){t.needReadable=true;return 0}return t.length}Readable.prototype.read=function(e){l("read",e);e=parseInt(e,10);var t=this._readableState;var n=e;if(e!==0)t.emittedReadable=false;if(e===0&&t.needReadable&&((t.highWaterMark!==0?t.length>=t.highWaterMark:t.length>0)||t.ended)){l("read: emitReadable",t.length,t.ended);if(t.length===0&&t.ended)endReadable(this);else emitReadable(this);return null}e=howMuchToRead(e,t);if(e===0&&t.ended){if(t.length===0)endReadable(this);return null}var r=t.needReadable;l("need readable",r);if(t.length===0||t.length-e<t.highWaterMark){r=true;l("length less than watermark",r)}if(t.ended||t.reading){r=false;l("reading or ended",r)}else if(r){l("do read");t.reading=true;t.sync=true;if(t.length===0)t.needReadable=true;this._read(t.highWaterMark);t.sync=false;if(!t.reading)e=howMuchToRead(n,t)}var i;if(e>0)i=fromList(e,t);else i=null;if(i===null){t.needReadable=t.length<=t.highWaterMark;e=0}else{t.length-=e;t.awaitDrain=0}if(t.length===0){if(!t.ended)t.needReadable=true;if(n!==e&&t.ended)endReadable(this)}if(i!==null)this.emit("data",i);return i};function onEofChunk(e,t){l("onEofChunk");if(t.ended)return;if(t.decoder){var n=t.decoder.end();if(n&&n.length){t.buffer.push(n);t.length+=t.objectMode?1:n.length}}t.ended=true;if(t.sync){emitReadable(e)}else{t.needReadable=false;if(!t.emittedReadable){t.emittedReadable=true;emitReadable_(e)}}}function emitReadable(e){var t=e._readableState;l("emitReadable",t.needReadable,t.emittedReadable);t.needReadable=false;if(!t.emittedReadable){l("emitReadable",t.flowing);t.emittedReadable=true;process.nextTick(emitReadable_,e)}}function emitReadable_(e){var t=e._readableState;l("emitReadable_",t.destroyed,t.length,t.ended);if(!t.destroyed&&(t.length||t.ended)){e.emit("readable");t.emittedReadable=false}t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark;flow(e)}function maybeReadMore(e,t){if(!t.readingMore){t.readingMore=true;process.nextTick(maybeReadMore_,e,t)}}function maybeReadMore_(e,t){while(!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&t.length===0)){var n=t.length;l("maybeReadMore read 0");e.read(0);if(n===t.length)break}t.readingMore=false}Readable.prototype._read=function(e){T(this,new y("_read()"))};Readable.prototype.pipe=function(e,t){var n=this;var r=this._readableState;switch(r.pipesCount){case 0:r.pipes=e;break;case 1:r.pipes=[r.pipes,e];break;default:r.pipes.push(e);break}r.pipesCount+=1;l("pipe count=%d opts=%j",r.pipesCount,t);var i=(!t||t.end!==false)&&e!==process.stdout&&e!==process.stderr;var o=i?onend:unpipe;if(r.endEmitted)process.nextTick(o);else n.once("end",o);e.on("unpipe",onunpipe);function onunpipe(e,t){l("onunpipe");if(e===n){if(t&&t.hasUnpiped===false){t.hasUnpiped=true;cleanup()}}}function onend(){l("onend");e.end()}var a=pipeOnDrain(n);e.on("drain",a);var c=false;function cleanup(){l("cleanup");e.removeListener("close",onclose);e.removeListener("finish",onfinish);e.removeListener("drain",a);e.removeListener("error",onerror);e.removeListener("unpipe",onunpipe);n.removeListener("end",onend);n.removeListener("end",unpipe);n.removeListener("data",ondata);c=true;if(r.awaitDrain&&(!e._writableState||e._writableState.needDrain))a()}n.on("data",ondata);function ondata(t){l("ondata");var i=e.write(t);l("dest.write",i);if(i===false){if((r.pipesCount===1&&r.pipes===e||r.pipesCount>1&&indexOf(r.pipes,e)!==-1)&&!c){l("false write response, pause",r.awaitDrain);r.awaitDrain++}n.pause()}}function onerror(t){l("onerror",t);unpipe();e.removeListener("error",onerror);if(s(e,"error")===0)T(e,t)}prependListener(e,"error",onerror);function onclose(){e.removeListener("finish",onfinish);unpipe()}e.once("close",onclose);function onfinish(){l("onfinish");e.removeListener("close",onclose);unpipe()}e.once("finish",onfinish);function unpipe(){l("unpipe");n.unpipe(e)}e.emit("pipe",n);if(!r.flowing){l("pipe resume");n.resume()}return e};function pipeOnDrain(e){return function pipeOnDrainFunctionResult(){var t=e._readableState;l("pipeOnDrain",t.awaitDrain);if(t.awaitDrain)t.awaitDrain--;if(t.awaitDrain===0&&s(e,"data")){t.flowing=true;flow(e)}}}Readable.prototype.unpipe=function(e){var t=this._readableState;var n={hasUnpiped:false};if(t.pipesCount===0)return this;if(t.pipesCount===1){if(e&&e!==t.pipes)return this;if(!e)e=t.pipes;t.pipes=null;t.pipesCount=0;t.flowing=false;if(e)e.emit("unpipe",this,n);return this}if(!e){var r=t.pipes;var i=t.pipesCount;t.pipes=null;t.pipesCount=0;t.flowing=false;for(var s=0;s<i;s++){r[s].emit("unpipe",this,{hasUnpiped:false})}return this}var o=indexOf(t.pipes,e);if(o===-1)return this;t.pipes.splice(o,1);t.pipesCount-=1;if(t.pipesCount===1)t.pipes=t.pipes[0];e.emit("unpipe",this,n);return this};Readable.prototype.on=function(e,t){var n=o.prototype.on.call(this,e,t);var r=this._readableState;if(e==="data"){r.readableListening=this.listenerCount("readable")>0;if(r.flowing!==false)this.resume()}else if(e==="readable"){if(!r.endEmitted&&!r.readableListening){r.readableListening=r.needReadable=true;r.flowing=false;r.emittedReadable=false;l("on readable",r.length,r.reading);if(r.length){emitReadable(this)}else if(!r.reading){process.nextTick(nReadingNextTick,this)}}}return n};Readable.prototype.addListener=Readable.prototype.on;Readable.prototype.removeListener=function(e,t){var n=o.prototype.removeListener.call(this,e,t);if(e==="readable"){process.nextTick(updateReadableListening,this)}return n};Readable.prototype.removeAllListeners=function(e){var t=o.prototype.removeAllListeners.apply(this,arguments);if(e==="readable"||e===undefined){process.nextTick(updateReadableListening,this)}return t};function updateReadableListening(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0;if(t.resumeScheduled&&!t.paused){t.flowing=true}else if(e.listenerCount("data")>0){e.resume()}}function nReadingNextTick(e){l("readable nexttick read 0");e.read(0)}Readable.prototype.resume=function(){var e=this._readableState;if(!e.flowing){l("resume");e.flowing=!e.readableListening;resume(this,e)}e.paused=false;return this};function resume(e,t){if(!t.resumeScheduled){t.resumeScheduled=true;process.nextTick(resume_,e,t)}}function resume_(e,t){l("resume",t.reading);if(!t.reading){e.read(0)}t.resumeScheduled=false;e.emit("resume");flow(e);if(t.flowing&&!t.reading)e.read(0)}Readable.prototype.pause=function(){l("call pause flowing=%j",this._readableState.flowing);if(this._readableState.flowing!==false){l("pause");this._readableState.flowing=false;this.emit("pause")}this._readableState.paused=true;return this};function flow(e){var t=e._readableState;l("flow",t.flowing);while(t.flowing&&e.read()!==null){}}Readable.prototype.wrap=function(e){var t=this;var n=this._readableState;var r=false;e.on("end",(function(){l("wrapped end");if(n.decoder&&!n.ended){var e=n.decoder.end();if(e&&e.length)t.push(e)}t.push(null)}));e.on("data",(function(i){l("wrapped data");if(n.decoder)i=n.decoder.write(i);if(n.objectMode&&(i===null||i===undefined))return;else if(!n.objectMode&&(!i||!i.length))return;var s=t.push(i);if(!s){r=true;e.pause()}}));for(var i in e){if(this[i]===undefined&&typeof e[i]==="function"){this[i]=function methodWrap(t){return function methodWrapReturnFunction(){return e[t].apply(e,arguments)}}(i)}}for(var s=0;s<k.length;s++){e.on(k[s],this.emit.bind(this,k[s]))}this._read=function(t){l("wrapped _read",t);if(r){r=false;e.resume()}};return this};if(typeof Symbol==="function"){Readable.prototype[Symbol.asyncIterator]=function(){if(S===undefined){S=n(42250)}return S(this)}}Object.defineProperty(Readable.prototype,"readableHighWaterMark",{enumerable:false,get:function get(){return this._readableState.highWaterMark}});Object.defineProperty(Readable.prototype,"readableBuffer",{enumerable:false,get:function get(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(Readable.prototype,"readableFlowing",{enumerable:false,get:function get(){return this._readableState.flowing},set:function set(e){if(this._readableState){this._readableState.flowing=e}}});Readable._fromList=fromList;Object.defineProperty(Readable.prototype,"readableLength",{enumerable:false,get:function get(){return this._readableState.length}});function fromList(e,t){if(t.length===0)return null;var n;if(t.objectMode)n=t.buffer.shift();else if(!e||e>=t.length){if(t.decoder)n=t.buffer.join("");else if(t.buffer.length===1)n=t.buffer.first();else n=t.buffer.concat(t.length);t.buffer.clear()}else{n=t.buffer.consume(e,t.decoder)}return n}function endReadable(e){var t=e._readableState;l("endReadable",t.endEmitted);if(!t.endEmitted){t.ended=true;process.nextTick(endReadableNT,t,e)}}function endReadableNT(e,t){l("endReadableNT",e.endEmitted,e.length);if(!e.endEmitted&&e.length===0){e.endEmitted=true;t.readable=false;t.emit("end");if(e.autoDestroy){var n=t._writableState;if(!n||n.autoDestroy&&n.finished){t.destroy()}}}}if(typeof Symbol==="function"){Readable.from=function(e,t){if(w===undefined){w=n(57453)}return w(Readable,e,t)}}function indexOf(e,t){for(var n=0,r=e.length;n<r;n++){if(e[n]===t)return n}return-1}},65469:(e,t,n)=>{"use strict";e.exports=Transform;var r=n(13130).q,i=r.ERR_METHOD_NOT_IMPLEMENTED,s=r.ERR_MULTIPLE_CALLBACK,o=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=r.ERR_TRANSFORM_WITH_LENGTH_0;var c=n(88393);n(76919)(Transform,c);function afterTransform(e,t){var n=this._transformState;n.transforming=false;var r=n.writecb;if(r===null){return this.emit("error",new s)}n.writechunk=null;n.writecb=null;if(t!=null)this.push(t);r(e);var i=this._readableState;i.reading=false;if(i.needReadable||i.length<i.highWaterMark){this._read(i.highWaterMark)}}function Transform(e){if(!(this instanceof Transform))return new Transform(e);c.call(this,e);this._transformState={afterTransform:afterTransform.bind(this),needTransform:false,transforming:false,writecb:null,writechunk:null,writeencoding:null};this._readableState.needReadable=true;this._readableState.sync=false;if(e){if(typeof e.transform==="function")this._transform=e.transform;if(typeof e.flush==="function")this._flush=e.flush}this.on("prefinish",prefinish)}function prefinish(){var e=this;if(typeof this._flush==="function"&&!this._readableState.destroyed){this._flush((function(t,n){done(e,t,n)}))}else{done(this,null,null)}}Transform.prototype.push=function(e,t){this._transformState.needTransform=false;return c.prototype.push.call(this,e,t)};Transform.prototype._transform=function(e,t,n){n(new i("_transform()"))};Transform.prototype._write=function(e,t,n){var r=this._transformState;r.writecb=n;r.writechunk=e;r.writeencoding=t;if(!r.transforming){var i=this._readableState;if(r.needTransform||i.needReadable||i.length<i.highWaterMark)this._read(i.highWaterMark)}};Transform.prototype._read=function(e){var t=this._transformState;if(t.writechunk!==null&&!t.transforming){t.transforming=true;this._transform(t.writechunk,t.writeencoding,t.afterTransform)}else{t.needTransform=true}};Transform.prototype._destroy=function(e,t){c.prototype._destroy.call(this,e,(function(e){t(e)}))};function done(e,t,n){if(t)return e.emit("error",t);if(n!=null)e.push(n);if(e._writableState.length)throw new a;if(e._transformState.transforming)throw new o;return e.push(null)}},36100:(e,t,n)=>{"use strict";e.exports=Writable;function WriteReq(e,t,n){this.chunk=e;this.encoding=t;this.callback=n;this.next=null}function CorkedRequest(e){var t=this;this.next=null;this.entry=null;this.finish=function(){onCorkedFinish(t,e)}}var r;Writable.WritableState=WritableState;var i={deprecate:n(49209)};var s=n(35016);var o=n(14300).Buffer;var a=global.Uint8Array||function(){};function _uint8ArrayToBuffer(e){return o.from(e)}function _isUint8Array(e){return o.isBuffer(e)||e instanceof a}var c=n(3090);var u=n(5785),l=u.getHighWaterMark;var d=n(13130).q,f=d.ERR_INVALID_ARG_TYPE,p=d.ERR_METHOD_NOT_IMPLEMENTED,h=d.ERR_MULTIPLE_CALLBACK,m=d.ERR_STREAM_CANNOT_PIPE,g=d.ERR_STREAM_DESTROYED,v=d.ERR_STREAM_NULL_VALUES,y=d.ERR_STREAM_WRITE_AFTER_END,b=d.ERR_UNKNOWN_ENCODING;var _=c.errorOrDestroy;n(76919)(Writable,s);function nop(){}function WritableState(e,t,i){r=r||n(88393);e=e||{};if(typeof i!=="boolean")i=t instanceof r;this.objectMode=!!e.objectMode;if(i)this.objectMode=this.objectMode||!!e.writableObjectMode;this.highWaterMark=l(this,e,"writableHighWaterMark",i);this.finalCalled=false;this.needDrain=false;this.ending=false;this.ended=false;this.finished=false;this.destroyed=false;var s=e.decodeStrings===false;this.decodeStrings=!s;this.defaultEncoding=e.defaultEncoding||"utf8";this.length=0;this.writing=false;this.corked=0;this.sync=true;this.bufferProcessing=false;this.onwrite=function(e){onwrite(t,e)};this.writecb=null;this.writelen=0;this.bufferedRequest=null;this.lastBufferedRequest=null;this.pendingcb=0;this.prefinished=false;this.errorEmitted=false;this.emitClose=e.emitClose!==false;this.autoDestroy=!!e.autoDestroy;this.bufferedRequestCount=0;this.corkedRequestsFree=new CorkedRequest(this)}WritableState.prototype.getBuffer=function getBuffer(){var e=this.bufferedRequest;var t=[];while(e){t.push(e);e=e.next}return t};(function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:i.deprecate((function writableStateBufferGetter(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer "+"instead.","DEP0003")})}catch(e){}})();var S;if(typeof Symbol==="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]==="function"){S=Function.prototype[Symbol.hasInstance];Object.defineProperty(Writable,Symbol.hasInstance,{value:function value(e){if(S.call(this,e))return true;if(this!==Writable)return false;return e&&e._writableState instanceof WritableState}})}else{S=function realHasInstance(e){return e instanceof this}}function Writable(e){r=r||n(88393);var t=this instanceof r;if(!t&&!S.call(Writable,this))return new Writable(e);this._writableState=new WritableState(e,this,t);this.writable=true;if(e){if(typeof e.write==="function")this._write=e.write;if(typeof e.writev==="function")this._writev=e.writev;if(typeof e.destroy==="function")this._destroy=e.destroy;if(typeof e.final==="function")this._final=e.final}s.call(this)}Writable.prototype.pipe=function(){_(this,new m)};function writeAfterEnd(e,t){var n=new y;_(e,n);process.nextTick(t,n)}function validChunk(e,t,n,r){var i;if(n===null){i=new v}else if(typeof n!=="string"&&!t.objectMode){i=new f("chunk",["string","Buffer"],n)}if(i){_(e,i);process.nextTick(r,i);return false}return true}Writable.prototype.write=function(e,t,n){var r=this._writableState;var i=false;var s=!r.objectMode&&_isUint8Array(e);if(s&&!o.isBuffer(e)){e=_uint8ArrayToBuffer(e)}if(typeof t==="function"){n=t;t=null}if(s)t="buffer";else if(!t)t=r.defaultEncoding;if(typeof n!=="function")n=nop;if(r.ending)writeAfterEnd(this,n);else if(s||validChunk(this,r,e,n)){r.pendingcb++;i=writeOrBuffer(this,r,s,e,t,n)}return i};Writable.prototype.cork=function(){this._writableState.corked++};Writable.prototype.uncork=function(){var e=this._writableState;if(e.corked){e.corked--;if(!e.writing&&!e.corked&&!e.bufferProcessing&&e.bufferedRequest)clearBuffer(this,e)}};Writable.prototype.setDefaultEncoding=function setDefaultEncoding(e){if(typeof e==="string")e=e.toLowerCase();if(!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new b(e);this._writableState.defaultEncoding=e;return this};Object.defineProperty(Writable.prototype,"writableBuffer",{enumerable:false,get:function get(){return this._writableState&&this._writableState.getBuffer()}});function decodeChunk(e,t,n){if(!e.objectMode&&e.decodeStrings!==false&&typeof t==="string"){t=o.from(t,n)}return t}Object.defineProperty(Writable.prototype,"writableHighWaterMark",{enumerable:false,get:function get(){return this._writableState.highWaterMark}});function writeOrBuffer(e,t,n,r,i,s){if(!n){var o=decodeChunk(t,r,i);if(r!==o){n=true;i="buffer";r=o}}var a=t.objectMode?1:r.length;t.length+=a;var c=t.length<t.highWaterMark;if(!c)t.needDrain=true;if(t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:s,next:null};if(u){u.next=t.lastBufferedRequest}else{t.bufferedRequest=t.lastBufferedRequest}t.bufferedRequestCount+=1}else{doWrite(e,t,false,a,r,i,s)}return c}function doWrite(e,t,n,r,i,s,o){t.writelen=r;t.writecb=o;t.writing=true;t.sync=true;if(t.destroyed)t.onwrite(new g("write"));else if(n)e._writev(i,t.onwrite);else e._write(i,s,t.onwrite);t.sync=false}function onwriteError(e,t,n,r,i){--t.pendingcb;if(n){process.nextTick(i,r);process.nextTick(finishMaybe,e,t);e._writableState.errorEmitted=true;_(e,r)}else{i(r);e._writableState.errorEmitted=true;_(e,r);finishMaybe(e,t)}}function onwriteStateUpdate(e){e.writing=false;e.writecb=null;e.length-=e.writelen;e.writelen=0}function onwrite(e,t){var n=e._writableState;var r=n.sync;var i=n.writecb;if(typeof i!=="function")throw new h;onwriteStateUpdate(n);if(t)onwriteError(e,n,r,t,i);else{var s=needFinish(n)||e.destroyed;if(!s&&!n.corked&&!n.bufferProcessing&&n.bufferedRequest){clearBuffer(e,n)}if(r){process.nextTick(afterWrite,e,n,s,i)}else{afterWrite(e,n,s,i)}}}function afterWrite(e,t,n,r){if(!n)onwriteDrain(e,t);t.pendingcb--;r();finishMaybe(e,t)}function onwriteDrain(e,t){if(t.length===0&&t.needDrain){t.needDrain=false;e.emit("drain")}}function clearBuffer(e,t){t.bufferProcessing=true;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount;var i=new Array(r);var s=t.corkedRequestsFree;s.entry=n;var o=0;var a=true;while(n){i[o]=n;if(!n.isBuf)a=false;n=n.next;o+=1}i.allBuffers=a;doWrite(e,t,true,t.length,i,"",s.finish);t.pendingcb++;t.lastBufferedRequest=null;if(s.next){t.corkedRequestsFree=s.next;s.next=null}else{t.corkedRequestsFree=new CorkedRequest(t)}t.bufferedRequestCount=0}else{while(n){var c=n.chunk;var u=n.encoding;var l=n.callback;var d=t.objectMode?1:c.length;doWrite(e,t,false,d,c,u,l);n=n.next;t.bufferedRequestCount--;if(t.writing){break}}if(n===null)t.lastBufferedRequest=null}t.bufferedRequest=n;t.bufferProcessing=false}Writable.prototype._write=function(e,t,n){n(new p("_write()"))};Writable.prototype._writev=null;Writable.prototype.end=function(e,t,n){var r=this._writableState;if(typeof e==="function"){n=e;e=null;t=null}else if(typeof t==="function"){n=t;t=null}if(e!==null&&e!==undefined)this.write(e,t);if(r.corked){r.corked=1;this.uncork()}if(!r.ending)endWritable(this,r,n);return this};Object.defineProperty(Writable.prototype,"writableLength",{enumerable:false,get:function get(){return this._writableState.length}});function needFinish(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function callFinal(e,t){e._final((function(n){t.pendingcb--;if(n){_(e,n)}t.prefinished=true;e.emit("prefinish");finishMaybe(e,t)}))}function prefinish(e,t){if(!t.prefinished&&!t.finalCalled){if(typeof e._final==="function"&&!t.destroyed){t.pendingcb++;t.finalCalled=true;process.nextTick(callFinal,e,t)}else{t.prefinished=true;e.emit("prefinish")}}}function finishMaybe(e,t){var n=needFinish(t);if(n){prefinish(e,t);if(t.pendingcb===0){t.finished=true;e.emit("finish");if(t.autoDestroy){var r=e._readableState;if(!r||r.autoDestroy&&r.endEmitted){e.destroy()}}}}return n}function endWritable(e,t,n){t.ending=true;finishMaybe(e,t);if(n){if(t.finished)process.nextTick(n);else e.once("finish",n)}t.ended=true;e.writable=false}function onCorkedFinish(e,t,n){var r=e.entry;e.entry=null;while(r){var i=r.callback;t.pendingcb--;i(n);r=r.next}t.corkedRequestsFree.next=e}Object.defineProperty(Writable.prototype,"destroyed",{enumerable:false,get:function get(){if(this._writableState===undefined){return false}return this._writableState.destroyed},set:function set(e){if(!this._writableState){return}this._writableState.destroyed=e}});Writable.prototype.destroy=c.destroy;Writable.prototype._undestroy=c.undestroy;Writable.prototype._destroy=function(e,t){t(e)}},42250:(e,t,n)=>{"use strict";var r;function _defineProperty(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var i=n(4360);var s=Symbol("lastResolve");var o=Symbol("lastReject");var a=Symbol("error");var c=Symbol("ended");var u=Symbol("lastPromise");var l=Symbol("handlePromise");var d=Symbol("stream");function createIterResult(e,t){return{value:e,done:t}}function readAndResolve(e){var t=e[s];if(t!==null){var n=e[d].read();if(n!==null){e[u]=null;e[s]=null;e[o]=null;t(createIterResult(n,false))}}}function onReadable(e){process.nextTick(readAndResolve,e)}function wrapForNext(e,t){return function(n,r){e.then((function(){if(t[c]){n(createIterResult(undefined,true));return}t[l](n,r)}),r)}}var f=Object.getPrototypeOf((function(){}));var p=Object.setPrototypeOf((r={get stream(){return this[d]},next:function next(){var e=this;var t=this[a];if(t!==null){return Promise.reject(t)}if(this[c]){return Promise.resolve(createIterResult(undefined,true))}if(this[d].destroyed){return new Promise((function(t,n){process.nextTick((function(){if(e[a]){n(e[a])}else{t(createIterResult(undefined,true))}}))}))}var n=this[u];var r;if(n){r=new Promise(wrapForNext(n,this))}else{var i=this[d].read();if(i!==null){return Promise.resolve(createIterResult(i,false))}r=new Promise(this[l])}this[u]=r;return r}},_defineProperty(r,Symbol.asyncIterator,(function(){return this})),_defineProperty(r,"return",(function _return(){var e=this;return new Promise((function(t,n){e[d].destroy(null,(function(e){if(e){n(e);return}t(createIterResult(undefined,true))}))}))})),r),f);var h=function createReadableStreamAsyncIterator(e){var t;var n=Object.create(p,(t={},_defineProperty(t,d,{value:e,writable:true}),_defineProperty(t,s,{value:null,writable:true}),_defineProperty(t,o,{value:null,writable:true}),_defineProperty(t,a,{value:null,writable:true}),_defineProperty(t,c,{value:e._readableState.endEmitted,writable:true}),_defineProperty(t,l,{value:function value(e,t){var r=n[d].read();if(r){n[u]=null;n[s]=null;n[o]=null;e(createIterResult(r,false))}else{n[s]=e;n[o]=t}},writable:true}),t));n[u]=null;i(e,(function(e){if(e&&e.code!=="ERR_STREAM_PREMATURE_CLOSE"){var t=n[o];if(t!==null){n[u]=null;n[s]=null;n[o]=null;t(e)}n[a]=e;return}var r=n[s];if(r!==null){n[u]=null;n[s]=null;n[o]=null;r(createIterResult(undefined,true))}n[c]=true}));e.on("readable",onReadable.bind(null,n));return n};e.exports=h},63900:(e,t,n)=>{"use strict";function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);if(t)r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};if(t%2){ownKeys(Object(n),true).forEach((function(t){_defineProperty(e,t,n[t])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(n))}else{ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}}return e}function _defineProperty(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}function _classCallCheck(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){if(t)_defineProperties(e.prototype,t);if(n)_defineProperties(e,n);return e}var r=n(14300),i=r.Buffer;var s=n(73837),o=s.inspect;var a=o&&o.custom||"inspect";function copyBuffer(e,t,n){i.prototype.copy.call(e,t,n)}e.exports=function(){function BufferList(){_classCallCheck(this,BufferList);this.head=null;this.tail=null;this.length=0}_createClass(BufferList,[{key:"push",value:function push(e){var t={data:e,next:null};if(this.length>0)this.tail.next=t;else this.head=t;this.tail=t;++this.length}},{key:"unshift",value:function unshift(e){var t={data:e,next:this.head};if(this.length===0)this.tail=t;this.head=t;++this.length}},{key:"shift",value:function shift(){if(this.length===0)return;var e=this.head.data;if(this.length===1)this.head=this.tail=null;else this.head=this.head.next;--this.length;return e}},{key:"clear",value:function clear(){this.head=this.tail=null;this.length=0}},{key:"join",value:function join(e){if(this.length===0)return"";var t=this.head;var n=""+t.data;while(t=t.next){n+=e+t.data}return n}},{key:"concat",value:function concat(e){if(this.length===0)return i.alloc(0);var t=i.allocUnsafe(e>>>0);var n=this.head;var r=0;while(n){copyBuffer(n.data,t,r);r+=n.data.length;n=n.next}return t}},{key:"consume",value:function consume(e,t){var n;if(e<this.head.data.length){n=this.head.data.slice(0,e);this.head.data=this.head.data.slice(e)}else if(e===this.head.data.length){n=this.shift()}else{n=t?this._getString(e):this._getBuffer(e)}return n}},{key:"first",value:function first(){return this.head.data}},{key:"_getString",value:function _getString(e){var t=this.head;var n=1;var r=t.data;e-=r.length;while(t=t.next){var i=t.data;var s=e>i.length?i.length:e;if(s===i.length)r+=i;else r+=i.slice(0,e);e-=s;if(e===0){if(s===i.length){++n;if(t.next)this.head=t.next;else this.head=this.tail=null}else{this.head=t;t.data=i.slice(s)}break}++n}this.length-=n;return r}},{key:"_getBuffer",value:function _getBuffer(e){var t=i.allocUnsafe(e);var n=this.head;var r=1;n.data.copy(t);e-=n.data.length;while(n=n.next){var s=n.data;var o=e>s.length?s.length:e;s.copy(t,t.length-e,0,o);e-=o;if(e===0){if(o===s.length){++r;if(n.next)this.head=n.next;else this.head=this.tail=null}else{this.head=n;n.data=s.slice(o)}break}++r}this.length-=r;return t}},{key:a,value:function value(e,t){return o(this,_objectSpread({},t,{depth:0,customInspect:false}))}}]);return BufferList}()},3090:e=>{"use strict";function destroy(e,t){var n=this;var r=this._readableState&&this._readableState.destroyed;var i=this._writableState&&this._writableState.destroyed;if(r||i){if(t){t(e)}else if(e){if(!this._writableState){process.nextTick(emitErrorNT,this,e)}else if(!this._writableState.errorEmitted){this._writableState.errorEmitted=true;process.nextTick(emitErrorNT,this,e)}}return this}if(this._readableState){this._readableState.destroyed=true}if(this._writableState){this._writableState.destroyed=true}this._destroy(e||null,(function(e){if(!t&&e){if(!n._writableState){process.nextTick(emitErrorAndCloseNT,n,e)}else if(!n._writableState.errorEmitted){n._writableState.errorEmitted=true;process.nextTick(emitErrorAndCloseNT,n,e)}else{process.nextTick(emitCloseNT,n)}}else if(t){process.nextTick(emitCloseNT,n);t(e)}else{process.nextTick(emitCloseNT,n)}}));return this}function emitErrorAndCloseNT(e,t){emitErrorNT(e,t);emitCloseNT(e)}function emitCloseNT(e){if(e._writableState&&!e._writableState.emitClose)return;if(e._readableState&&!e._readableState.emitClose)return;e.emit("close")}function undestroy(){if(this._readableState){this._readableState.destroyed=false;this._readableState.reading=false;this._readableState.ended=false;this._readableState.endEmitted=false}if(this._writableState){this._writableState.destroyed=false;this._writableState.ended=false;this._writableState.ending=false;this._writableState.finalCalled=false;this._writableState.prefinished=false;this._writableState.finished=false;this._writableState.errorEmitted=false}}function emitErrorNT(e,t){e.emit("error",t)}function errorOrDestroy(e,t){var n=e._readableState;var r=e._writableState;if(n&&n.autoDestroy||r&&r.autoDestroy)e.destroy(t);else e.emit("error",t)}e.exports={destroy:destroy,undestroy:undestroy,errorOrDestroy:errorOrDestroy}},4360:(e,t,n)=>{"use strict";var r=n(13130).q.ERR_STREAM_PREMATURE_CLOSE;function once(e){var t=false;return function(){if(t)return;t=true;for(var n=arguments.length,r=new Array(n),i=0;i<n;i++){r[i]=arguments[i]}e.apply(this,r)}}function noop(){}function isRequest(e){return e.setHeader&&typeof e.abort==="function"}function eos(e,t,n){if(typeof t==="function")return eos(e,null,t);if(!t)t={};n=once(n||noop);var i=t.readable||t.readable!==false&&e.readable;var s=t.writable||t.writable!==false&&e.writable;var o=function onlegacyfinish(){if(!e.writable)c()};var a=e._writableState&&e._writableState.finished;var c=function onfinish(){s=false;a=true;if(!i)n.call(e)};var u=e._readableState&&e._readableState.endEmitted;var l=function onend(){i=false;u=true;if(!s)n.call(e)};var d=function onerror(t){n.call(e,t)};var f=function onclose(){var t;if(i&&!u){if(!e._readableState||!e._readableState.ended)t=new r;return n.call(e,t)}if(s&&!a){if(!e._writableState||!e._writableState.ended)t=new r;return n.call(e,t)}};var p=function onrequest(){e.req.on("finish",c)};if(isRequest(e)){e.on("complete",c);e.on("abort",f);if(e.req)p();else e.on("request",p)}else if(s&&!e._writableState){e.on("end",o);e.on("close",o)}e.on("end",l);e.on("finish",c);if(t.error!==false)e.on("error",d);e.on("close",f);return function(){e.removeListener("complete",c);e.removeListener("abort",f);e.removeListener("request",p);if(e.req)e.req.removeListener("finish",c);e.removeListener("end",o);e.removeListener("close",o);e.removeListener("finish",c);e.removeListener("end",l);e.removeListener("error",d);e.removeListener("close",f)}}e.exports=eos},57453:(e,t,n)=>{"use strict";function asyncGeneratorStep(e,t,n,r,i,s,o){try{var a=e[s](o);var c=a.value}catch(e){n(e);return}if(a.done){t(c)}else{Promise.resolve(c).then(r,i)}}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var s=e.apply(t,n);function _next(e){asyncGeneratorStep(s,r,i,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(s,r,i,_next,_throw,"throw",e)}_next(undefined)}))}}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);if(t)r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}));n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};if(t%2){ownKeys(Object(n),true).forEach((function(t){_defineProperty(e,t,n[t])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(n))}else{ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}}return e}function _defineProperty(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}var r=n(13130).q.ERR_INVALID_ARG_TYPE;function from(e,t,n){var i;if(t&&typeof t.next==="function"){i=t}else if(t&&t[Symbol.asyncIterator])i=t[Symbol.asyncIterator]();else if(t&&t[Symbol.iterator])i=t[Symbol.iterator]();else throw new r("iterable",["Iterable"],t);var s=new e(_objectSpread({objectMode:true},n));var o=false;s._read=function(){if(!o){o=true;next()}};function next(){return _next2.apply(this,arguments)}function _next2(){_next2=_asyncToGenerator((function*(){try{var e=yield i.next(),t=e.value,n=e.done;if(n){s.push(null)}else if(s.push(yield t)){next()}else{o=false}}catch(e){s.destroy(e)}}));return _next2.apply(this,arguments)}return s}e.exports=from},61391:(e,t,n)=>{"use strict";var r;function once(e){var t=false;return function(){if(t)return;t=true;e.apply(void 0,arguments)}}var i=n(13130).q,s=i.ERR_MISSING_ARGS,o=i.ERR_STREAM_DESTROYED;function noop(e){if(e)throw e}function isRequest(e){return e.setHeader&&typeof e.abort==="function"}function destroyer(e,t,i,s){s=once(s);var a=false;e.on("close",(function(){a=true}));if(r===undefined)r=n(4360);r(e,{readable:t,writable:i},(function(e){if(e)return s(e);a=true;s()}));var c=false;return function(t){if(a)return;if(c)return;c=true;if(isRequest(e))return e.abort();if(typeof e.destroy==="function")return e.destroy();s(t||new o("pipe"))}}function call(e){e()}function pipe(e,t){return e.pipe(t)}function popCallback(e){if(!e.length)return noop;if(typeof e[e.length-1]!=="function")return noop;return e.pop()}function pipeline(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++){t[n]=arguments[n]}var r=popCallback(t);if(Array.isArray(t[0]))t=t[0];if(t.length<2){throw new s("streams")}var i;var o=t.map((function(e,n){var s=n<t.length-1;var a=n>0;return destroyer(e,s,a,(function(e){if(!i)i=e;if(e)o.forEach(call);if(s)return;o.forEach(call);r(i)}))}));return t.reduce(pipe)}e.exports=pipeline},5785:(e,t,n)=>{"use strict";var r=n(13130).q.ERR_INVALID_OPT_VALUE;function highWaterMarkFrom(e,t,n){return e.highWaterMark!=null?e.highWaterMark:t?e[n]:null}function getHighWaterMark(e,t,n,i){var s=highWaterMarkFrom(t,i,n);if(s!=null){if(!(isFinite(s)&&Math.floor(s)===s)||s<0){var o=i?n:"highWaterMark";throw new r(o,s)}return Math.floor(s)}return e.objectMode?16:16*1024}e.exports={getHighWaterMark:getHighWaterMark}},35016:(e,t,n)=>{e.exports=n(12781)},30675:(e,t,n)=>{var r=n(12781);if(process.env.READABLE_STREAM==="disable"&&r){e.exports=r.Readable;Object.assign(e.exports,r);e.exports.Stream=r}else{t=e.exports=n(80284);t.Stream=r||t;t.Readable=t;t.Writable=n(36100);t.Duplex=n(88393);t.Transform=n(65469);t.PassThrough=n(55125);t.finished=n(4360);t.pipeline=n(61391)}},53118:(e,t,n)=>{
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var r=n(14300);var i=r.Buffer;function copyProps(e,t){for(var n in e){t[n]=e[n]}}if(i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow){e.exports=r}else{copyProps(r,t);t.Buffer=SafeBuffer}function SafeBuffer(e,t,n){return i(e,t,n)}SafeBuffer.prototype=Object.create(i.prototype);copyProps(i,SafeBuffer);SafeBuffer.from=function(e,t,n){if(typeof e==="number"){throw new TypeError("Argument must not be a number")}return i(e,t,n)};SafeBuffer.alloc=function(e,t,n){if(typeof e!=="number"){throw new TypeError("Argument must be a number")}var r=i(e);if(t!==undefined){if(typeof n==="string"){r.fill(t,n)}else{r.fill(t)}}else{r.fill(0)}return r};SafeBuffer.allocUnsafe=function(e){if(typeof e!=="number"){throw new TypeError("Argument must be a number")}return i(e)};SafeBuffer.allocUnsafeSlow=function(e){if(typeof e!=="number"){throw new TypeError("Argument must be a number")}return r.SlowBuffer(e)}},5693:(e,t)=>{"use strict";const n=configure();n.configure=configure;n.stringify=n;n.default=n;t.stringify=n;t.configure=configure;e.exports=n;const r=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff]/;const i=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff]/g;const s=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000b","\\f","\\r","\\u000e","\\u000f","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001a","\\u001b","\\u001c","\\u001d","\\u001e","\\u001f","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\"];function escapeFn(e){if(e.length===2){const t=e.charCodeAt(1);return`${e[0]}\\u${t.toString(16)}`}const t=e.charCodeAt(0);return s.length>t?s[t]:`\\u${t.toString(16)}`}function strEscape(e){if(e.length<5e3&&!r.test(e)){return e}if(e.length>100){return e.replace(i,escapeFn)}let t="";let n=0;for(let r=0;r<e.length;r++){const i=e.charCodeAt(r);if(i===34||i===92||i<32){t+=`${e.slice(n,r)}${s[i]}`;n=r+1}else if(i>=55296&&i<=57343){if(i<=56319&&r+1<e.length){const t=e.charCodeAt(r+1);if(t>=56320&&t<=57343){r++;continue}}t+=`${e.slice(n,r)}${`\\u${i.toString(16)}`}`;n=r+1}}t+=e.slice(n);return t}function insertSort(e){if(e.length>200){return e.sort()}for(let t=1;t<e.length;t++){const n=e[t];let r=t;while(r!==0&&e[r-1]>n){e[r]=e[r-1];r--}e[r]=n}return e}const o=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Uint8Array)),Symbol.toStringTag).get;function isTypedArrayWithEntries(e){return o.call(e)!==undefined&&e.length!==0}function stringifyTypedArray(e,t,n){if(e.length<n){n=e.length}const r=t===","?"":" ";let i=`"0":${r}${e[0]}`;for(let s=1;s<n;s++){i+=`${t}"${s}":${r}${e[s]}`}return i}function getCircularValueOption(e){if(e&&Object.prototype.hasOwnProperty.call(e,"circularValue")){var t=e.circularValue;if(typeof t==="string"){return`"${t}"`}if(t==null){return t}if(t===Error||t===TypeError){return{toString(){throw new TypeError("Converting circular structure to JSON")}}}throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}function getBooleanOption(e,t){if(e&&Object.prototype.hasOwnProperty.call(e,t)){var n=e[t];if(typeof n!=="boolean"){throw new TypeError(`The "${t}" argument must be of type boolean`)}}return n===undefined?true:n}function getPositiveIntegerOption(e,t){if(e&&Object.prototype.hasOwnProperty.call(e,t)){var n=e[t];if(typeof n!=="number"){throw new TypeError(`The "${t}" argument must be of type number`)}if(!Number.isInteger(n)){throw new TypeError(`The "${t}" argument must be an integer`)}if(n<1){throw new RangeError(`The "${t}" argument must be >= 1`)}}return n===undefined?Infinity:n}function getItemCount(e){if(e===1){return"1 item"}return`${e} items`}function getUniqueReplacerSet(e){const t=new Set;for(const n of e){if(typeof n==="string"){t.add(n)}else if(typeof n==="number"){t.add(String(n))}}return t}function configure(e){const t=getCircularValueOption(e);const n=getBooleanOption(e,"bigint");const r=getBooleanOption(e,"deterministic");const i=getPositiveIntegerOption(e,"maximumDepth");const s=getPositiveIntegerOption(e,"maximumBreadth");function stringifyFnReplacer(e,o,a,c,u,l){let d=o[e];if(typeof d==="object"&&d!==null&&typeof d.toJSON==="function"){d=d.toJSON(e)}d=c.call(o,e,d);switch(typeof d){case"string":return`"${strEscape(d)}"`;case"object":{if(d===null){return"null"}if(a.indexOf(d)!==-1){return t}let e="";let n=",";const o=l;if(Array.isArray(d)){if(d.length===0){return"[]"}if(i<a.length+1){return'"[Array]"'}a.push(d);if(u!==""){l+=u;e+=`\n${l}`;n=`,\n${l}`}const t=Math.min(d.length,s);let r=0;for(;r<t-1;r++){const t=stringifyFnReplacer(r,d,a,c,u,l);e+=t!==undefined?t:"null";e+=n}const f=stringifyFnReplacer(r,d,a,c,u,l);e+=f!==undefined?f:"null";if(d.length-1>s){const t=d.length-s-1;e+=`${n}"... ${getItemCount(t)} not stringified"`}if(u!==""){e+=`\n${o}`}a.pop();return`[${e}]`}let f=Object.keys(d);const p=f.length;if(p===0){return"{}"}if(i<a.length+1){return'"[Object]"'}let h="";let m="";if(u!==""){l+=u;n=`,\n${l}`;h=" "}let g=Math.min(p,s);if(isTypedArrayWithEntries(d)){e+=stringifyTypedArray(d,n,s);f=f.slice(d.length);g-=d.length;m=n}if(r){f=insertSort(f)}a.push(d);for(let t=0;t<g;t++){const r=f[t];const i=stringifyFnReplacer(r,d,a,c,u,l);if(i!==undefined){e+=`${m}"${strEscape(r)}":${h}${i}`;m=n}}if(p>s){const t=p-s;e+=`${m}"...":${h}"${getItemCount(t)} not stringified"`;m=n}if(u!==""&&m.length>1){e=`\n${l}${e}\n${o}`}a.pop();return`{${e}}`}case"number":return isFinite(d)?String(d):"null";case"boolean":return d===true?"true":"false";case"bigint":return n?String(d):undefined}}function stringifyArrayReplacer(e,r,o,a,c,u){if(typeof r==="object"&&r!==null&&typeof r.toJSON==="function"){r=r.toJSON(e)}switch(typeof r){case"string":return`"${strEscape(r)}"`;case"object":{if(r===null){return"null"}if(o.indexOf(r)!==-1){return t}const e=u;let n="";let l=",";if(Array.isArray(r)){if(r.length===0){return"[]"}if(i<o.length+1){return'"[Array]"'}o.push(r);if(c!==""){u+=c;n+=`\n${u}`;l=`,\n${u}`}const t=Math.min(r.length,s);let d=0;for(;d<t-1;d++){const e=stringifyArrayReplacer(d,r[d],o,a,c,u);n+=e!==undefined?e:"null";n+=l}const f=stringifyArrayReplacer(d,r[d],o,a,c,u);n+=f!==undefined?f:"null";if(r.length-1>s){const e=r.length-s-1;n+=`${l}"... ${getItemCount(e)} not stringified"`}if(c!==""){n+=`\n${e}`}o.pop();return`[${n}]`}if(a.size===0){return"{}"}o.push(r);let d="";if(c!==""){u+=c;l=`,\n${u}`;d=" "}let f="";for(const e of a){const t=stringifyArrayReplacer(e,r[e],o,a,c,u);if(t!==undefined){n+=`${f}"${strEscape(e)}":${d}${t}`;f=l}}if(c!==""&&f.length>1){n=`\n${u}${n}\n${e}`}o.pop();return`{${n}}`}case"number":return isFinite(r)?String(r):"null";case"boolean":return r===true?"true":"false";case"bigint":return n?String(r):undefined}}function stringifyIndent(e,o,a,c,u){switch(typeof o){case"string":return`"${strEscape(o)}"`;case"object":{if(o===null){return"null"}if(typeof o.toJSON==="function"){o=o.toJSON(e);if(typeof o!=="object"){return stringifyIndent(e,o,a,c,u)}if(o===null){return"null"}}if(a.indexOf(o)!==-1){return t}const n=u;if(Array.isArray(o)){if(o.length===0){return"[]"}if(i<a.length+1){return'"[Array]"'}a.push(o);u+=c;let e=`\n${u}`;const t=`,\n${u}`;const r=Math.min(o.length,s);let l=0;for(;l<r-1;l++){const n=stringifyIndent(l,o[l],a,c,u);e+=n!==undefined?n:"null";e+=t}const d=stringifyIndent(l,o[l],a,c,u);e+=d!==undefined?d:"null";if(o.length-1>s){const n=o.length-s-1;e+=`${t}"... ${getItemCount(n)} not stringified"`}e+=`\n${n}`;a.pop();return`[${e}]`}let l=Object.keys(o);const d=l.length;if(d===0){return"{}"}if(i<a.length+1){return'"[Object]"'}u+=c;const f=`,\n${u}`;let p="";let h="";let m=Math.min(d,s);if(isTypedArrayWithEntries(o)){p+=stringifyTypedArray(o,f,s);l=l.slice(o.length);m-=o.length;h=f}if(r){l=insertSort(l)}a.push(o);for(let e=0;e<m;e++){const t=l[e];const n=stringifyIndent(t,o[t],a,c,u);if(n!==undefined){p+=`${h}"${strEscape(t)}": ${n}`;h=f}}if(d>s){const e=d-s;p+=`${h}"...": "${getItemCount(e)} not stringified"`;h=f}if(h!==""){p=`\n${u}${p}\n${n}`}a.pop();return`{${p}}`}case"number":return isFinite(o)?String(o):"null";case"boolean":return o===true?"true":"false";case"bigint":return n?String(o):undefined}}function stringifySimple(e,o,a){switch(typeof o){case"string":return`"${strEscape(o)}"`;case"object":{if(o===null){return"null"}if(typeof o.toJSON==="function"){o=o.toJSON(e);if(typeof o!=="object"){return stringifySimple(e,o,a)}if(o===null){return"null"}}if(a.indexOf(o)!==-1){return t}let n="";if(Array.isArray(o)){if(o.length===0){return"[]"}if(i<a.length+1){return'"[Array]"'}a.push(o);const e=Math.min(o.length,s);let t=0;for(;t<e-1;t++){const e=stringifySimple(t,o[t],a);n+=e!==undefined?e:"null";n+=","}const r=stringifySimple(t,o[t],a);n+=r!==undefined?r:"null";if(o.length-1>s){const e=o.length-s-1;n+=`,"... ${getItemCount(e)} not stringified"`}a.pop();return`[${n}]`}let c=Object.keys(o);const u=c.length;if(u===0){return"{}"}if(i<a.length+1){return'"[Object]"'}let l="";let d=Math.min(u,s);if(isTypedArrayWithEntries(o)){n+=stringifyTypedArray(o,",",s);c=c.slice(o.length);d-=o.length;l=","}if(r){c=insertSort(c)}a.push(o);for(let e=0;e<d;e++){const t=c[e];const r=stringifySimple(t,o[t],a);if(r!==undefined){n+=`${l}"${strEscape(t)}":${r}`;l=","}}if(u>s){const e=u-s;n+=`${l}"...":"${getItemCount(e)} not stringified"`}a.pop();return`{${n}}`}case"number":return isFinite(o)?String(o):"null";case"boolean":return o===true?"true":"false";case"bigint":return n?String(o):undefined}}function stringify(e,t,n){if(arguments.length>1){let r="";if(typeof n==="number"){r=" ".repeat(Math.min(n,10))}else if(typeof n==="string"){r=n.slice(0,10)}if(t!=null){if(typeof t==="function"){return stringifyFnReplacer("",{"":e},[],t,r,"")}if(Array.isArray(t)){return stringifyArrayReplacer("",e,[],getUniqueReplacerSet(t),r,"")}}if(r.length!==0){return stringifyIndent("",e,[],r,"")}}return stringifySimple("",e,[])}return stringify}},71790:(e,t,n)=>{const r=Symbol("SemVer ANY");class Comparator{static get ANY(){return r}constructor(e,t){t=i(t);if(e instanceof Comparator){if(e.loose===!!t.loose){return e}else{e=e.value}}c("comparator",e,t);this.options=t;this.loose=!!t.loose;this.parse(e);if(this.semver===r){this.value=""}else{this.value=this.operator+this.semver.version}c("comp",this)}parse(e){const t=this.options.loose?s[o.COMPARATORLOOSE]:s[o.COMPARATOR];const n=e.match(t);if(!n){throw new TypeError(`Invalid comparator: ${e}`)}this.operator=n[1]!==undefined?n[1]:"";if(this.operator==="="){this.operator=""}if(!n[2]){this.semver=r}else{this.semver=new u(n[2],this.options.loose)}}toString(){return this.value}test(e){c("Comparator.test",e,this.options.loose);if(this.semver===r||e===r){return true}if(typeof e==="string"){try{e=new u(e,this.options)}catch(e){return false}}return a(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof Comparator)){throw new TypeError("a Comparator is required")}if(!t||typeof t!=="object"){t={loose:!!t,includePrerelease:false}}if(this.operator===""){if(this.value===""){return true}return new l(e.value,t).test(this.value)}else if(e.operator===""){if(e.value===""){return true}return new l(this.value,t).test(e.semver)}const n=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">");const r=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<");const i=this.semver.version===e.semver.version;const s=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<=");const o=a(this.semver,"<",e.semver,t)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<");const c=a(this.semver,">",e.semver,t)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return n||r||i&&s||o||c}}e.exports=Comparator;const i=n(36772);const{re:s,t:o}=n(84063);const a=n(48801);const c=n(53619);const u=n(71490);const l=n(25287)},25287:(e,t,n)=>{class Range{constructor(e,t){t=s(t);if(e instanceof Range){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease){return e}else{return new Range(e.raw,t)}}if(e instanceof o){this.raw=e.value;this.set=[[e]];this.format();return this}this.options=t;this.loose=!!t.loose;this.includePrerelease=!!t.includePrerelease;this.raw=e;this.set=e.split("||").map((e=>this.parseRange(e.trim()))).filter((e=>e.length));if(!this.set.length){throw new TypeError(`Invalid SemVer Range: ${e}`)}if(this.set.length>1){const e=this.set[0];this.set=this.set.filter((e=>!isNullSet(e[0])));if(this.set.length===0){this.set=[e]}else if(this.set.length>1){for(const e of this.set){if(e.length===1&&isAny(e[0])){this.set=[e];break}}}}this.format()}format(){this.range=this.set.map((e=>e.join(" ").trim())).join("||").trim();return this.range}toString(){return this.range}parseRange(e){e=e.trim();const t=Object.keys(this.options).join(",");const n=`parseRange:${t}:${e}`;const r=i.get(n);if(r){return r}const s=this.options.loose;const c=s?u[l.HYPHENRANGELOOSE]:u[l.HYPHENRANGE];e=e.replace(c,hyphenReplace(this.options.includePrerelease));a("hyphen replace",e);e=e.replace(u[l.COMPARATORTRIM],d);a("comparator trim",e);e=e.replace(u[l.TILDETRIM],f);e=e.replace(u[l.CARETTRIM],p);e=e.split(/\s+/).join(" ");let h=e.split(" ").map((e=>parseComparator(e,this.options))).join(" ").split(/\s+/).map((e=>replaceGTE0(e,this.options)));if(s){h=h.filter((e=>{a("loose invalid filter",e,this.options);return!!e.match(u[l.COMPARATORLOOSE])}))}a("range list",h);const m=new Map;const g=h.map((e=>new o(e,this.options)));for(const e of g){if(isNullSet(e)){return[e]}m.set(e.value,e)}if(m.size>1&&m.has("")){m.delete("")}const v=[...m.values()];i.set(n,v);return v}intersects(e,t){if(!(e instanceof Range)){throw new TypeError("a Range is required")}return this.set.some((n=>isSatisfiable(n,t)&&e.set.some((e=>isSatisfiable(e,t)&&n.every((n=>e.every((e=>n.intersects(e,t)))))))))}test(e){if(!e){return false}if(typeof e==="string"){try{e=new c(e,this.options)}catch(e){return false}}for(let t=0;t<this.set.length;t++){if(testSet(this.set[t],e,this.options)){return true}}return false}}e.exports=Range;const r=n(5453);const i=new r({max:1e3});const s=n(36772);const o=n(71790);const a=n(53619);const c=n(71490);const{re:u,t:l,comparatorTrimReplace:d,tildeTrimReplace:f,caretTrimReplace:p}=n(84063);const isNullSet=e=>e.value==="<0.0.0-0";const isAny=e=>e.value==="";const isSatisfiable=(e,t)=>{let n=true;const r=e.slice();let i=r.pop();while(n&&r.length){n=r.every((e=>i.intersects(e,t)));i=r.pop()}return n};const parseComparator=(e,t)=>{a("comp",e,t);e=replaceCarets(e,t);a("caret",e);e=replaceTildes(e,t);a("tildes",e);e=replaceXRanges(e,t);a("xrange",e);e=replaceStars(e,t);a("stars",e);return e};const isX=e=>!e||e.toLowerCase()==="x"||e==="*";const replaceTildes=(e,t)=>e.trim().split(/\s+/).map((e=>replaceTilde(e,t))).join(" ");const replaceTilde=(e,t)=>{const n=t.loose?u[l.TILDELOOSE]:u[l.TILDE];return e.replace(n,((t,n,r,i,s)=>{a("tilde",e,t,n,r,i,s);let o;if(isX(n)){o=""}else if(isX(r)){o=`>=${n}.0.0 <${+n+1}.0.0-0`}else if(isX(i)){o=`>=${n}.${r}.0 <${n}.${+r+1}.0-0`}else if(s){a("replaceTilde pr",s);o=`>=${n}.${r}.${i}-${s} <${n}.${+r+1}.0-0`}else{o=`>=${n}.${r}.${i} <${n}.${+r+1}.0-0`}a("tilde return",o);return o}))};const replaceCarets=(e,t)=>e.trim().split(/\s+/).map((e=>replaceCaret(e,t))).join(" ");const replaceCaret=(e,t)=>{a("caret",e,t);const n=t.loose?u[l.CARETLOOSE]:u[l.CARET];const r=t.includePrerelease?"-0":"";return e.replace(n,((t,n,i,s,o)=>{a("caret",e,t,n,i,s,o);let c;if(isX(n)){c=""}else if(isX(i)){c=`>=${n}.0.0${r} <${+n+1}.0.0-0`}else if(isX(s)){if(n==="0"){c=`>=${n}.${i}.0${r} <${n}.${+i+1}.0-0`}else{c=`>=${n}.${i}.0${r} <${+n+1}.0.0-0`}}else if(o){a("replaceCaret pr",o);if(n==="0"){if(i==="0"){c=`>=${n}.${i}.${s}-${o} <${n}.${i}.${+s+1}-0`}else{c=`>=${n}.${i}.${s}-${o} <${n}.${+i+1}.0-0`}}else{c=`>=${n}.${i}.${s}-${o} <${+n+1}.0.0-0`}}else{a("no pr");if(n==="0"){if(i==="0"){c=`>=${n}.${i}.${s}${r} <${n}.${i}.${+s+1}-0`}else{c=`>=${n}.${i}.${s}${r} <${n}.${+i+1}.0-0`}}else{c=`>=${n}.${i}.${s} <${+n+1}.0.0-0`}}a("caret return",c);return c}))};const replaceXRanges=(e,t)=>{a("replaceXRanges",e,t);return e.split(/\s+/).map((e=>replaceXRange(e,t))).join(" ")};const replaceXRange=(e,t)=>{e=e.trim();const n=t.loose?u[l.XRANGELOOSE]:u[l.XRANGE];return e.replace(n,((n,r,i,s,o,c)=>{a("xRange",e,n,r,i,s,o,c);const u=isX(i);const l=u||isX(s);const d=l||isX(o);const f=d;if(r==="="&&f){r=""}c=t.includePrerelease?"-0":"";if(u){if(r===">"||r==="<"){n="<0.0.0-0"}else{n="*"}}else if(r&&f){if(l){s=0}o=0;if(r===">"){r=">=";if(l){i=+i+1;s=0;o=0}else{s=+s+1;o=0}}else if(r==="<="){r="<";if(l){i=+i+1}else{s=+s+1}}if(r==="<"){c="-0"}n=`${r+i}.${s}.${o}${c}`}else if(l){n=`>=${i}.0.0${c} <${+i+1}.0.0-0`}else if(d){n=`>=${i}.${s}.0${c} <${i}.${+s+1}.0-0`}a("xRange return",n);return n}))};const replaceStars=(e,t)=>{a("replaceStars",e,t);return e.trim().replace(u[l.STAR],"")};const replaceGTE0=(e,t)=>{a("replaceGTE0",e,t);return e.trim().replace(u[t.includePrerelease?l.GTE0PRE:l.GTE0],"")};const hyphenReplace=e=>(t,n,r,i,s,o,a,c,u,l,d,f,p)=>{if(isX(r)){n=""}else if(isX(i)){n=`>=${r}.0.0${e?"-0":""}`}else if(isX(s)){n=`>=${r}.${i}.0${e?"-0":""}`}else if(o){n=`>=${n}`}else{n=`>=${n}${e?"-0":""}`}if(isX(u)){c=""}else if(isX(l)){c=`<${+u+1}.0.0-0`}else if(isX(d)){c=`<${u}.${+l+1}.0-0`}else if(f){c=`<=${u}.${l}.${d}-${f}`}else if(e){c=`<${u}.${l}.${+d+1}-0`}else{c=`<=${c}`}return`${n} ${c}`.trim()};const testSet=(e,t,n)=>{for(let n=0;n<e.length;n++){if(!e[n].test(t)){return false}}if(t.prerelease.length&&!n.includePrerelease){for(let n=0;n<e.length;n++){a(e[n].semver);if(e[n].semver===o.ANY){continue}if(e[n].semver.prerelease.length>0){const r=e[n].semver;if(r.major===t.major&&r.minor===t.minor&&r.patch===t.patch){return true}}}return false}return true}},71490:(e,t,n)=>{const r=n(53619);const{MAX_LENGTH:i,MAX_SAFE_INTEGER:s}=n(9073);const{re:o,t:a}=n(84063);const c=n(36772);const{compareIdentifiers:u}=n(48587);class SemVer{constructor(e,t){t=c(t);if(e instanceof SemVer){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease){return e}else{e=e.version}}else if(typeof e!=="string"){throw new TypeError(`Invalid Version: ${e}`)}if(e.length>i){throw new TypeError(`version is longer than ${i} characters`)}r("SemVer",e,t);this.options=t;this.loose=!!t.loose;this.includePrerelease=!!t.includePrerelease;const n=e.trim().match(t.loose?o[a.LOOSE]:o[a.FULL]);if(!n){throw new TypeError(`Invalid Version: ${e}`)}this.raw=e;this.major=+n[1];this.minor=+n[2];this.patch=+n[3];if(this.major>s||this.major<0){throw new TypeError("Invalid major version")}if(this.minor>s||this.minor<0){throw new TypeError("Invalid minor version")}if(this.patch>s||this.patch<0){throw new TypeError("Invalid patch version")}if(!n[4]){this.prerelease=[]}else{this.prerelease=n[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<s){return t}}return e}))}this.build=n[5]?n[5].split("."):[];this.format()}format(){this.version=`${this.major}.${this.minor}.${this.patch}`;if(this.prerelease.length){this.version+=`-${this.prerelease.join(".")}`}return this.version}toString(){return this.version}compare(e){r("SemVer.compare",this.version,this.options,e);if(!(e instanceof SemVer)){if(typeof e==="string"&&e===this.version){return 0}e=new SemVer(e,this.options)}if(e.version===this.version){return 0}return this.compareMain(e)||this.comparePre(e)}compareMain(e){if(!(e instanceof SemVer)){e=new SemVer(e,this.options)}return u(this.major,e.major)||u(this.minor,e.minor)||u(this.patch,e.patch)}comparePre(e){if(!(e instanceof SemVer)){e=new SemVer(e,this.options)}if(this.prerelease.length&&!e.prerelease.length){return-1}else if(!this.prerelease.length&&e.prerelease.length){return 1}else if(!this.prerelease.length&&!e.prerelease.length){return 0}let t=0;do{const n=this.prerelease[t];const i=e.prerelease[t];r("prerelease compare",t,n,i);if(n===undefined&&i===undefined){return 0}else if(i===undefined){return 1}else if(n===undefined){return-1}else if(n===i){continue}else{return u(n,i)}}while(++t)}compareBuild(e){if(!(e instanceof SemVer)){e=new SemVer(e,this.options)}let t=0;do{const n=this.build[t];const i=e.build[t];r("prerelease compare",t,n,i);if(n===undefined&&i===undefined){return 0}else if(i===undefined){return 1}else if(n===undefined){return-1}else if(n===i){continue}else{return u(n,i)}}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0;this.patch=0;this.minor=0;this.major++;this.inc("pre",t);break;case"preminor":this.prerelease.length=0;this.patch=0;this.minor++;this.inc("pre",t);break;case"prepatch":this.prerelease.length=0;this.inc("patch",t);this.inc("pre",t);break;case"prerelease":if(this.prerelease.length===0){this.inc("patch",t)}this.inc("pre",t);break;case"major":if(this.minor!==0||this.patch!==0||this.prerelease.length===0){this.major++}this.minor=0;this.patch=0;this.prerelease=[];break;case"minor":if(this.patch!==0||this.prerelease.length===0){this.minor++}this.patch=0;this.prerelease=[];break;case"patch":if(this.prerelease.length===0){this.patch++}this.prerelease=[];break;case"pre":if(this.prerelease.length===0){this.prerelease=[0]}else{let e=this.prerelease.length;while(--e>=0){if(typeof this.prerelease[e]==="number"){this.prerelease[e]++;e=-2}}if(e===-1){this.prerelease.push(0)}}if(t){if(u(this.prerelease[0],t)===0){if(isNaN(this.prerelease[1])){this.prerelease=[t,0]}}else{this.prerelease=[t,0]}}break;default:throw new Error(`invalid increment argument: ${e}`)}this.format();this.raw=this.version;return this}}e.exports=SemVer},57876:(e,t,n)=>{const r=n(58257);const clean=(e,t)=>{const n=r(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null};e.exports=clean},48801:(e,t,n)=>{const r=n(41561);const i=n(18671);const s=n(93473);const o=n(42967);const a=n(86762);const c=n(80973);const cmp=(e,t,n,u)=>{switch(t){case"===":if(typeof e==="object"){e=e.version}if(typeof n==="object"){n=n.version}return e===n;case"!==":if(typeof e==="object"){e=e.version}if(typeof n==="object"){n=n.version}return e!==n;case"":case"=":case"==":return r(e,n,u);case"!=":return i(e,n,u);case">":return s(e,n,u);case">=":return o(e,n,u);case"<":return a(e,n,u);case"<=":return c(e,n,u);default:throw new TypeError(`Invalid operator: ${t}`)}};e.exports=cmp},96899:(e,t,n)=>{const r=n(71490);const i=n(58257);const{re:s,t:o}=n(84063);const coerce=(e,t)=>{if(e instanceof r){return e}if(typeof e==="number"){e=String(e)}if(typeof e!=="string"){return null}t=t||{};let n=null;if(!t.rtl){n=e.match(s[o.COERCE])}else{let t;while((t=s[o.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length)){if(!n||t.index+t[0].length!==n.index+n[0].length){n=t}s[o.COERCERTL].lastIndex=t.index+t[1].length+t[2].length}s[o.COERCERTL].lastIndex=-1}if(n===null){return null}return i(`${n[2]}.${n[3]||"0"}.${n[4]||"0"}`,t)};e.exports=coerce},77375:(e,t,n)=>{const r=n(71490);const compareBuild=(e,t,n)=>{const i=new r(e,n);const s=new r(t,n);return i.compare(s)||i.compareBuild(s)};e.exports=compareBuild},68186:(e,t,n)=>{const r=n(84905);const compareLoose=(e,t)=>r(e,t,true);e.exports=compareLoose},84905:(e,t,n)=>{const r=n(71490);const compare=(e,t,n)=>new r(e,n).compare(new r(t,n));e.exports=compare},83272:(e,t,n)=>{const r=n(58257);const i=n(41561);const diff=(e,t)=>{if(i(e,t)){return null}else{const n=r(e);const i=r(t);const s=n.prerelease.length||i.prerelease.length;const o=s?"pre":"";const a=s?"prerelease":"";for(const e in n){if(e==="major"||e==="minor"||e==="patch"){if(n[e]!==i[e]){return o+e}}}return a}};e.exports=diff},41561:(e,t,n)=>{const r=n(84905);const eq=(e,t,n)=>r(e,t,n)===0;e.exports=eq},93473:(e,t,n)=>{const r=n(84905);const gt=(e,t,n)=>r(e,t,n)>0;e.exports=gt},42967:(e,t,n)=>{const r=n(84905);const gte=(e,t,n)=>r(e,t,n)>=0;e.exports=gte},25009:(e,t,n)=>{const r=n(71490);const inc=(e,t,n,i)=>{if(typeof n==="string"){i=n;n=undefined}try{return new r(e instanceof r?e.version:e,n).inc(t,i).version}catch(e){return null}};e.exports=inc},86762:(e,t,n)=>{const r=n(84905);const lt=(e,t,n)=>r(e,t,n)<0;e.exports=lt},80973:(e,t,n)=>{const r=n(84905);const lte=(e,t,n)=>r(e,t,n)<=0;e.exports=lte},39799:(e,t,n)=>{const r=n(71490);const major=(e,t)=>new r(e,t).major;e.exports=major},27600:(e,t,n)=>{const r=n(71490);const minor=(e,t)=>new r(e,t).minor;e.exports=minor},18671:(e,t,n)=>{const r=n(84905);const neq=(e,t,n)=>r(e,t,n)!==0;e.exports=neq},58257:(e,t,n)=>{const{MAX_LENGTH:r}=n(9073);const{re:i,t:s}=n(84063);const o=n(71490);const a=n(36772);const parse=(e,t)=>{t=a(t);if(e instanceof o){return e}if(typeof e!=="string"){return null}if(e.length>r){return null}const n=t.loose?i[s.LOOSE]:i[s.FULL];if(!n.test(e)){return null}try{return new o(e,t)}catch(e){return null}};e.exports=parse},2112:(e,t,n)=>{const r=n(71490);const patch=(e,t)=>new r(e,t).patch;e.exports=patch},45094:(e,t,n)=>{const r=n(58257);const prerelease=(e,t)=>{const n=r(e,t);return n&&n.prerelease.length?n.prerelease:null};e.exports=prerelease},76110:(e,t,n)=>{const r=n(84905);const rcompare=(e,t,n)=>r(t,e,n);e.exports=rcompare},24550:(e,t,n)=>{const r=n(77375);const rsort=(e,t)=>e.sort(((e,n)=>r(n,e,t)));e.exports=rsort},81495:(e,t,n)=>{const r=n(25287);const satisfies=(e,t,n)=>{try{t=new r(t,n)}catch(e){return false}return t.test(e)};e.exports=satisfies},56034:(e,t,n)=>{const r=n(77375);const sort=(e,t)=>e.sort(((e,n)=>r(e,n,t)));e.exports=sort},3863:(e,t,n)=>{const r=n(58257);const valid=(e,t)=>{const n=r(e,t);return n?n.version:null};e.exports=valid},77546:(e,t,n)=>{const r=n(84063);e.exports={re:r.re,src:r.src,tokens:r.t,SEMVER_SPEC_VERSION:n(9073).SEMVER_SPEC_VERSION,SemVer:n(71490),compareIdentifiers:n(48587).compareIdentifiers,rcompareIdentifiers:n(48587).rcompareIdentifiers,parse:n(58257),valid:n(3863),clean:n(57876),inc:n(25009),diff:n(83272),major:n(39799),minor:n(27600),patch:n(2112),prerelease:n(45094),compare:n(84905),rcompare:n(76110),compareLoose:n(68186),compareBuild:n(77375),sort:n(56034),rsort:n(24550),gt:n(93473),lt:n(86762),eq:n(41561),neq:n(18671),gte:n(42967),lte:n(80973),cmp:n(48801),coerce:n(96899),Comparator:n(71790),Range:n(25287),satisfies:n(81495),toComparators:n(382),maxSatisfying:n(81706),minSatisfying:n(97095),minVersion:n(80507),validRange:n(38029),outside:n(47714),gtr:n(9104),ltr:n(15072),intersects:n(79057),simplifyRange:n(69550),subset:n(48693)}},9073:e=>{const t="2.0.0";const n=256;const r=Number.MAX_SAFE_INTEGER||9007199254740991;const i=16;e.exports={SEMVER_SPEC_VERSION:t,MAX_LENGTH:n,MAX_SAFE_INTEGER:r,MAX_SAFE_COMPONENT_LENGTH:i}},53619:e=>{const t=typeof process==="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=t},48587:e=>{const t=/^[0-9]+$/;const compareIdentifiers=(e,n)=>{const r=t.test(e);const i=t.test(n);if(r&&i){e=+e;n=+n}return e===n?0:r&&!i?-1:i&&!r?1:e<n?-1:1};const rcompareIdentifiers=(e,t)=>compareIdentifiers(t,e);e.exports={compareIdentifiers:compareIdentifiers,rcompareIdentifiers:rcompareIdentifiers}},36772:e=>{const t=["includePrerelease","loose","rtl"];const parseOptions=e=>!e?{}:typeof e!=="object"?{loose:true}:t.filter((t=>e[t])).reduce(((e,t)=>{e[t]=true;return e}),{});e.exports=parseOptions},84063:(e,t,n)=>{const{MAX_SAFE_COMPONENT_LENGTH:r}=n(9073);const i=n(53619);t=e.exports={};const s=t.re=[];const o=t.src=[];const a=t.t={};let c=0;const createToken=(e,t,n)=>{const r=c++;i(e,r,t);a[e]=r;o[r]=t;s[r]=new RegExp(t,n?"g":undefined)};createToken("NUMERICIDENTIFIER","0|[1-9]\\d*");createToken("NUMERICIDENTIFIERLOOSE","[0-9]+");createToken("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");createToken("MAINVERSION",`(${o[a.NUMERICIDENTIFIER]})\\.`+`(${o[a.NUMERICIDENTIFIER]})\\.`+`(${o[a.NUMERICIDENTIFIER]})`);createToken("MAINVERSIONLOOSE",`(${o[a.NUMERICIDENTIFIERLOOSE]})\\.`+`(${o[a.NUMERICIDENTIFIERLOOSE]})\\.`+`(${o[a.NUMERICIDENTIFIERLOOSE]})`);createToken("PRERELEASEIDENTIFIER",`(?:${o[a.NUMERICIDENTIFIER]}|${o[a.NONNUMERICIDENTIFIER]})`);createToken("PRERELEASEIDENTIFIERLOOSE",`(?:${o[a.NUMERICIDENTIFIERLOOSE]}|${o[a.NONNUMERICIDENTIFIER]})`);createToken("PRERELEASE",`(?:-(${o[a.PRERELEASEIDENTIFIER]}(?:\\.${o[a.PRERELEASEIDENTIFIER]})*))`);createToken("PRERELEASELOOSE",`(?:-?(${o[a.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${o[a.PRERELEASEIDENTIFIERLOOSE]})*))`);createToken("BUILDIDENTIFIER","[0-9A-Za-z-]+");createToken("BUILD",`(?:\\+(${o[a.BUILDIDENTIFIER]}(?:\\.${o[a.BUILDIDENTIFIER]})*))`);createToken("FULLPLAIN",`v?${o[a.MAINVERSION]}${o[a.PRERELEASE]}?${o[a.BUILD]}?`);createToken("FULL",`^${o[a.FULLPLAIN]}$`);createToken("LOOSEPLAIN",`[v=\\s]*${o[a.MAINVERSIONLOOSE]}${o[a.PRERELEASELOOSE]}?${o[a.BUILD]}?`);createToken("LOOSE",`^${o[a.LOOSEPLAIN]}$`);createToken("GTLT","((?:<|>)?=?)");createToken("XRANGEIDENTIFIERLOOSE",`${o[a.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);createToken("XRANGEIDENTIFIER",`${o[a.NUMERICIDENTIFIER]}|x|X|\\*`);createToken("XRANGEPLAIN",`[v=\\s]*(${o[a.XRANGEIDENTIFIER]})`+`(?:\\.(${o[a.XRANGEIDENTIFIER]})`+`(?:\\.(${o[a.XRANGEIDENTIFIER]})`+`(?:${o[a.PRERELEASE]})?${o[a.BUILD]}?`+`)?)?`);createToken("XRANGEPLAINLOOSE",`[v=\\s]*(${o[a.XRANGEIDENTIFIERLOOSE]})`+`(?:\\.(${o[a.XRANGEIDENTIFIERLOOSE]})`+`(?:\\.(${o[a.XRANGEIDENTIFIERLOOSE]})`+`(?:${o[a.PRERELEASELOOSE]})?${o[a.BUILD]}?`+`)?)?`);createToken("XRANGE",`^${o[a.GTLT]}\\s*${o[a.XRANGEPLAIN]}$`);createToken("XRANGELOOSE",`^${o[a.GTLT]}\\s*${o[a.XRANGEPLAINLOOSE]}$`);createToken("COERCE",`${"(^|[^\\d])"+"(\\d{1,"}${r}})`+`(?:\\.(\\d{1,${r}}))?`+`(?:\\.(\\d{1,${r}}))?`+`(?:$|[^\\d])`);createToken("COERCERTL",o[a.COERCE],true);createToken("LONETILDE","(?:~>?)");createToken("TILDETRIM",`(\\s*)${o[a.LONETILDE]}\\s+`,true);t.tildeTrimReplace="$1~";createToken("TILDE",`^${o[a.LONETILDE]}${o[a.XRANGEPLAIN]}$`);createToken("TILDELOOSE",`^${o[a.LONETILDE]}${o[a.XRANGEPLAINLOOSE]}$`);createToken("LONECARET","(?:\\^)");createToken("CARETTRIM",`(\\s*)${o[a.LONECARET]}\\s+`,true);t.caretTrimReplace="$1^";createToken("CARET",`^${o[a.LONECARET]}${o[a.XRANGEPLAIN]}$`);createToken("CARETLOOSE",`^${o[a.LONECARET]}${o[a.XRANGEPLAINLOOSE]}$`);createToken("COMPARATORLOOSE",`^${o[a.GTLT]}\\s*(${o[a.LOOSEPLAIN]})$|^$`);createToken("COMPARATOR",`^${o[a.GTLT]}\\s*(${o[a.FULLPLAIN]})$|^$`);createToken("COMPARATORTRIM",`(\\s*)${o[a.GTLT]}\\s*(${o[a.LOOSEPLAIN]}|${o[a.XRANGEPLAIN]})`,true);t.comparatorTrimReplace="$1$2$3";createToken("HYPHENRANGE",`^\\s*(${o[a.XRANGEPLAIN]})`+`\\s+-\\s+`+`(${o[a.XRANGEPLAIN]})`+`\\s*$`);createToken("HYPHENRANGELOOSE",`^\\s*(${o[a.XRANGEPLAINLOOSE]})`+`\\s+-\\s+`+`(${o[a.XRANGEPLAINLOOSE]})`+`\\s*$`);createToken("STAR","(<|>)?=?\\s*\\*");createToken("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");createToken("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},9104:(e,t,n)=>{const r=n(47714);const gtr=(e,t,n)=>r(e,t,">",n);e.exports=gtr},79057:(e,t,n)=>{const r=n(25287);const intersects=(e,t,n)=>{e=new r(e,n);t=new r(t,n);return e.intersects(t)};e.exports=intersects},15072:(e,t,n)=>{const r=n(47714);const ltr=(e,t,n)=>r(e,t,"<",n);e.exports=ltr},81706:(e,t,n)=>{const r=n(71490);const i=n(25287);const maxSatisfying=(e,t,n)=>{let s=null;let o=null;let a=null;try{a=new i(t,n)}catch(e){return null}e.forEach((e=>{if(a.test(e)){if(!s||o.compare(e)===-1){s=e;o=new r(s,n)}}}));return s};e.exports=maxSatisfying},97095:(e,t,n)=>{const r=n(71490);const i=n(25287);const minSatisfying=(e,t,n)=>{let s=null;let o=null;let a=null;try{a=new i(t,n)}catch(e){return null}e.forEach((e=>{if(a.test(e)){if(!s||o.compare(e)===1){s=e;o=new r(s,n)}}}));return s};e.exports=minSatisfying},80507:(e,t,n)=>{const r=n(71490);const i=n(25287);const s=n(93473);const minVersion=(e,t)=>{e=new i(e,t);let n=new r("0.0.0");if(e.test(n)){return n}n=new r("0.0.0-0");if(e.test(n)){return n}n=null;for(let t=0;t<e.set.length;++t){const i=e.set[t];let o=null;i.forEach((e=>{const t=new r(e.semver.version);switch(e.operator){case">":if(t.prerelease.length===0){t.patch++}else{t.prerelease.push(0)}t.raw=t.format();case"":case">=":if(!o||s(t,o)){o=t}break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}}));if(o&&(!n||s(n,o))){n=o}}if(n&&e.test(n)){return n}return null};e.exports=minVersion},47714:(e,t,n)=>{const r=n(71490);const i=n(71790);const{ANY:s}=i;const o=n(25287);const a=n(81495);const c=n(93473);const u=n(86762);const l=n(80973);const d=n(42967);const outside=(e,t,n,f)=>{e=new r(e,f);t=new o(t,f);let p,h,m,g,v;switch(n){case">":p=c;h=l;m=u;g=">";v=">=";break;case"<":p=u;h=d;m=c;g="<";v="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(a(e,t,f)){return false}for(let n=0;n<t.set.length;++n){const r=t.set[n];let o=null;let a=null;r.forEach((e=>{if(e.semver===s){e=new i(">=0.0.0")}o=o||e;a=a||e;if(p(e.semver,o.semver,f)){o=e}else if(m(e.semver,a.semver,f)){a=e}}));if(o.operator===g||o.operator===v){return false}if((!a.operator||a.operator===g)&&h(e,a.semver)){return false}else if(a.operator===v&&m(e,a.semver)){return false}}return true};e.exports=outside},69550:(e,t,n)=>{const r=n(81495);const i=n(84905);e.exports=(e,t,n)=>{const s=[];let o=null;let a=null;const c=e.sort(((e,t)=>i(e,t,n)));for(const e of c){const i=r(e,t,n);if(i){a=e;if(!o){o=e}}else{if(a){s.push([o,a])}a=null;o=null}}if(o){s.push([o,null])}const u=[];for(const[e,t]of s){if(e===t){u.push(e)}else if(!t&&e===c[0]){u.push("*")}else if(!t){u.push(`>=${e}`)}else if(e===c[0]){u.push(`<=${t}`)}else{u.push(`${e} - ${t}`)}}const l=u.join(" || ");const d=typeof t.raw==="string"?t.raw:String(t);return l.length<d.length?l:t}},48693:(e,t,n)=>{const r=n(25287);const i=n(71790);const{ANY:s}=i;const o=n(81495);const a=n(84905);const subset=(e,t,n={})=>{if(e===t){return true}e=new r(e,n);t=new r(t,n);let i=false;e:for(const r of e.set){for(const e of t.set){const t=simpleSubset(r,e,n);i=i||t!==null;if(t){continue e}}if(i){return false}}return true};const simpleSubset=(e,t,n)=>{if(e===t){return true}if(e.length===1&&e[0].semver===s){if(t.length===1&&t[0].semver===s){return true}else if(n.includePrerelease){e=[new i(">=0.0.0-0")]}else{e=[new i(">=0.0.0")]}}if(t.length===1&&t[0].semver===s){if(n.includePrerelease){return true}else{t=[new i(">=0.0.0")]}}const r=new Set;let c,u;for(const t of e){if(t.operator===">"||t.operator===">="){c=higherGT(c,t,n)}else if(t.operator==="<"||t.operator==="<="){u=lowerLT(u,t,n)}else{r.add(t.semver)}}if(r.size>1){return null}let l;if(c&&u){l=a(c.semver,u.semver,n);if(l>0){return null}else if(l===0&&(c.operator!==">="||u.operator!=="<=")){return null}}for(const e of r){if(c&&!o(e,String(c),n)){return null}if(u&&!o(e,String(u),n)){return null}for(const r of t){if(!o(e,String(r),n)){return false}}return true}let d,f;let p,h;let m=u&&!n.includePrerelease&&u.semver.prerelease.length?u.semver:false;let g=c&&!n.includePrerelease&&c.semver.prerelease.length?c.semver:false;if(m&&m.prerelease.length===1&&u.operator==="<"&&m.prerelease[0]===0){m=false}for(const e of t){h=h||e.operator===">"||e.operator===">=";p=p||e.operator==="<"||e.operator==="<=";if(c){if(g){if(e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===g.major&&e.semver.minor===g.minor&&e.semver.patch===g.patch){g=false}}if(e.operator===">"||e.operator===">="){d=higherGT(c,e,n);if(d===e&&d!==c){return false}}else if(c.operator===">="&&!o(c.semver,String(e),n)){return false}}if(u){if(m){if(e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===m.major&&e.semver.minor===m.minor&&e.semver.patch===m.patch){m=false}}if(e.operator==="<"||e.operator==="<="){f=lowerLT(u,e,n);if(f===e&&f!==u){return false}}else if(u.operator==="<="&&!o(u.semver,String(e),n)){return false}}if(!e.operator&&(u||c)&&l!==0){return false}}if(c&&p&&!u&&l!==0){return false}if(u&&h&&!c&&l!==0){return false}if(g||m){return false}return true};const higherGT=(e,t,n)=>{if(!e){return t}const r=a(e.semver,t.semver,n);return r>0?e:r<0?t:t.operator===">"&&e.operator===">="?t:e};const lowerLT=(e,t,n)=>{if(!e){return t}const r=a(e.semver,t.semver,n);return r<0?e:r>0?t:t.operator==="<"&&e.operator==="<="?t:e};e.exports=subset},382:(e,t,n)=>{const r=n(25287);const toComparators=(e,t)=>new r(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")));e.exports=toComparators},38029:(e,t,n)=>{const r=n(25287);const validRange=(e,t)=>{try{return new r(e,t).range||"*"}catch(e){return null}};e.exports=validRange},59761:(e,t,n)=>{"use strict";var r=n(29553);var i=Array.prototype.concat;var s=Array.prototype.slice;var o=e.exports=function swizzle(e){var t=[];for(var n=0,o=e.length;n<o;n++){var a=e[n];if(r(a)){t=i.call(t,s.call(a))}else{t.push(a)}}return t};o.wrap=function(e){return function(){return e(o(arguments))}}},29553:e=>{e.exports=function isArrayish(e){if(!e||typeof e==="string"){return false}return e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String")}},67921:(e,t)=>{t.get=function(e){var n=Error.stackTraceLimit;Error.stackTraceLimit=Infinity;var r={};var i=Error.prepareStackTrace;Error.prepareStackTrace=function(e,t){return t};Error.captureStackTrace(r,e||t.get);var s=r.stack;Error.prepareStackTrace=i;Error.stackTraceLimit=n;return s};t.parse=function(e){if(!e.stack){return[]}var t=this;var n=e.stack.split("\n").slice(1);return n.map((function(e){if(e.match(/^\s*[-]{4,}$/)){return t._createParsedCallSite({fileName:e,lineNumber:null,functionName:null,typeName:null,methodName:null,columnNumber:null,native:null})}var n=e.match(/at (?:(.+)\s+\()?(?:(.+?):(\d+)(?::(\d+))?|([^)]+))\)?/);if(!n){return}var r=null;var i=null;var s=null;var o=null;var a=null;var c=n[5]==="native";if(n[1]){s=n[1];var u=s.lastIndexOf(".");if(s[u-1]==".")u--;if(u>0){r=s.substr(0,u);i=s.substr(u+1);var l=r.indexOf(".Module");if(l>0){s=s.substr(l+1);r=r.substr(0,l)}}o=null}if(i){o=r;a=i}if(i==="<anonymous>"){a=null;s=null}var d={fileName:n[2]||null,lineNumber:parseInt(n[3],10)||null,functionName:s,typeName:o,methodName:a,columnNumber:parseInt(n[4],10)||null,native:c};return t._createParsedCallSite(d)})).filter((function(e){return!!e}))};function CallSite(e){for(var t in e){this[t]=e[t]}}var n=["this","typeName","functionName","methodName","fileName","lineNumber","columnNumber","function","evalOrigin"];var r=["topLevel","eval","native","constructor"];n.forEach((function(e){CallSite.prototype[e]=null;CallSite.prototype["get"+e[0].toUpperCase()+e.substr(1)]=function(){return this[e]}}));r.forEach((function(e){CallSite.prototype[e]=false;CallSite.prototype["is"+e[0].toUpperCase()+e.substr(1)]=function(){return this[e]}}));t._createParsedCallSite=function(e){return new CallSite(e)}},60642:(e,t,n)=>{"use strict";var r=n(53118).Buffer;var i=r.isEncoding||function(e){e=""+e;switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return true;default:return false}};function _normalizeEncoding(e){if(!e)return"utf8";var t;while(true){switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase();t=true}}}function normalizeEncoding(e){var t=_normalizeEncoding(e);if(typeof t!=="string"&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}t.s=StringDecoder;function StringDecoder(e){this.encoding=normalizeEncoding(e);var t;switch(this.encoding){case"utf16le":this.text=utf16Text;this.end=utf16End;t=4;break;case"utf8":this.fillLast=utf8FillLast;t=4;break;case"base64":this.text=base64Text;this.end=base64End;t=3;break;default:this.write=simpleWrite;this.end=simpleEnd;return}this.lastNeed=0;this.lastTotal=0;this.lastChar=r.allocUnsafe(t)}StringDecoder.prototype.write=function(e){if(e.length===0)return"";var t;var n;if(this.lastNeed){t=this.fillLast(e);if(t===undefined)return"";n=this.lastNeed;this.lastNeed=0}else{n=0}if(n<e.length)return t?t+this.text(e,n):this.text(e,n);return t||""};StringDecoder.prototype.end=utf8End;StringDecoder.prototype.text=utf8Text;StringDecoder.prototype.fillLast=function(e){if(this.lastNeed<=e.length){e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed);return this.lastChar.toString(this.encoding,0,this.lastTotal)}e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length);this.lastNeed-=e.length};function utf8CheckByte(e){if(e<=127)return 0;else if(e>>5===6)return 2;else if(e>>4===14)return 3;else if(e>>3===30)return 4;return e>>6===2?-1:-2}function utf8CheckIncomplete(e,t,n){var r=t.length-1;if(r<n)return 0;var i=utf8CheckByte(t[r]);if(i>=0){if(i>0)e.lastNeed=i-1;return i}if(--r<n||i===-2)return 0;i=utf8CheckByte(t[r]);if(i>=0){if(i>0)e.lastNeed=i-2;return i}if(--r<n||i===-2)return 0;i=utf8CheckByte(t[r]);if(i>=0){if(i>0){if(i===2)i=0;else e.lastNeed=i-3}return i}return 0}function utf8CheckExtraBytes(e,t,n){if((t[0]&192)!==128){e.lastNeed=0;return"ï¿½"}if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128){e.lastNeed=1;return"ï¿½"}if(e.lastNeed>2&&t.length>2){if((t[2]&192)!==128){e.lastNeed=2;return"ï¿½"}}}}function utf8FillLast(e){var t=this.lastTotal-this.lastNeed;var n=utf8CheckExtraBytes(this,e,t);if(n!==undefined)return n;if(this.lastNeed<=e.length){e.copy(this.lastChar,t,0,this.lastNeed);return this.lastChar.toString(this.encoding,0,this.lastTotal)}e.copy(this.lastChar,t,0,e.length);this.lastNeed-=e.length}function utf8Text(e,t){var n=utf8CheckIncomplete(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);e.copy(this.lastChar,0,r);return e.toString("utf8",t,r)}function utf8End(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed)return t+"ï¿½";return t}function utf16Text(e,t){if((e.length-t)%2===0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319){this.lastNeed=2;this.lastTotal=4;this.lastChar[0]=e[e.length-2];this.lastChar[1]=e[e.length-1];return n.slice(0,-1)}}return n}this.lastNeed=1;this.lastTotal=2;this.lastChar[0]=e[e.length-1];return e.toString("utf16le",t,e.length-1)}function utf16End(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function base64Text(e,t){var n=(e.length-t)%3;if(n===0)return e.toString("base64",t);this.lastNeed=3-n;this.lastTotal=3;if(n===1){this.lastChar[0]=e[e.length-1]}else{this.lastChar[0]=e[e.length-2];this.lastChar[1]=e[e.length-1]}return e.toString("base64",t,e.length-n)}function base64End(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed)return t+this.lastChar.toString("base64",0,3-this.lastNeed);return t}function simpleWrite(e){return e.toString(this.encoding)}function simpleEnd(e){return e&&e.length?this.write(e):""}},30395:(e,t,n)=>{"use strict";const r=n(22037);const i=n(76224);const s=n(76738);const{env:o}=process;let a;if(s("no-color")||s("no-colors")||s("color=false")||s("color=never")){a=0}else if(s("color")||s("colors")||s("color=true")||s("color=always")){a=1}if("FORCE_COLOR"in o){if(o.FORCE_COLOR==="true"){a=1}else if(o.FORCE_COLOR==="false"){a=0}else{a=o.FORCE_COLOR.length===0?1:Math.min(parseInt(o.FORCE_COLOR,10),3)}}function translateLevel(e){if(e===0){return false}return{level:e,hasBasic:true,has256:e>=2,has16m:e>=3}}function supportsColor(e,t){if(a===0){return 0}if(s("color=16m")||s("color=full")||s("color=truecolor")){return 3}if(s("color=256")){return 2}if(e&&!t&&a===undefined){return 0}const n=a||0;if(o.TERM==="dumb"){return n}if(process.platform==="win32"){const e=r.release().split(".");if(Number(e[0])>=10&&Number(e[2])>=10586){return Number(e[2])>=14931?3:2}return 1}if("CI"in o){if(["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some((e=>e in o))||o.CI_NAME==="codeship"){return 1}return n}if("TEAMCITY_VERSION"in o){return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(o.TEAMCITY_VERSION)?1:0}if(o.COLORTERM==="truecolor"){return 3}if("TERM_PROGRAM"in o){const e=parseInt((o.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(o.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}if(/-256(color)?$/i.test(o.TERM)){return 2}if(/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(o.TERM)){return 1}if("COLORTERM"in o){return 1}return n}function getSupportLevel(e){const t=supportsColor(e,e&&e.isTTY);return translateLevel(t)}e.exports={supportsColor:getSupportLevel,stdout:translateLevel(supportsColor(true,i.isatty(1))),stderr:translateLevel(supportsColor(true,i.isatty(2)))}},9454:e=>{"use strict";e.exports=function hex(e){for(var t=0,n=0;t<e.length;n=e.charCodeAt(t++)+((n<<5)-n));var r=Math.floor(Math.abs(Math.sin(n)*1e4%1*16777216)).toString(16);return"#"+Array(6-r.length+1).join("0")+r}},94437:(e,t)=>{"use strict";t.levels={error:0,warn:1,help:2,data:3,info:4,debug:5,prompt:6,verbose:7,input:8,silly:9};t.colors={error:"red",warn:"yellow",help:"cyan",data:"grey",info:"green",debug:"blue",prompt:"grey",verbose:"cyan",input:"grey",silly:"magenta"}},35354:(e,t,n)=>{"use strict";Object.defineProperty(t,"cli",{value:n(94437)});Object.defineProperty(t,"npm",{value:n(70431)});Object.defineProperty(t,"syslog",{value:n(24160)})},70431:(e,t)=>{"use strict";t.levels={error:0,warn:1,info:2,http:3,verbose:4,debug:5,silly:6};t.colors={error:"red",warn:"yellow",info:"green",http:"green",verbose:"cyan",debug:"blue",silly:"magenta"}},24160:(e,t)=>{"use strict";t.levels={emerg:0,alert:1,crit:2,error:3,warning:4,notice:5,info:6,debug:7};t.colors={emerg:"red",alert:"yellow",crit:"red",error:"red",warning:"red",notice:"yellow",info:"green",debug:"blue"}},67267:(e,t,n)=>{"use strict";Object.defineProperty(t,"LEVEL",{value:Symbol.for("level")});Object.defineProperty(t,"MESSAGE",{value:Symbol.for("message")});Object.defineProperty(t,"SPLAT",{value:Symbol.for("splat")});Object.defineProperty(t,"configs",{value:n(35354)})},49209:(e,t,n)=>{e.exports=n(73837).deprecate},3301:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TraceFormat=t.TraceValues=t.Trace=t.ProgressType=t.ProgressToken=t.createMessageConnection=t.NullLogger=t.ConnectionOptions=t.ConnectionStrategy=t.WriteableStreamMessageWriter=t.AbstractMessageWriter=t.MessageWriter=t.ReadableStreamMessageReader=t.AbstractMessageReader=t.MessageReader=t.CancellationToken=t.CancellationTokenSource=t.Emitter=t.Event=t.Disposable=t.LRUCache=t.Touch=t.LinkedMap=t.ParameterStructures=t.NotificationType9=t.NotificationType8=t.NotificationType7=t.NotificationType6=t.NotificationType5=t.NotificationType4=t.NotificationType3=t.NotificationType2=t.NotificationType1=t.NotificationType0=t.NotificationType=t.ErrorCodes=t.ResponseError=t.RequestType9=t.RequestType8=t.RequestType7=t.RequestType6=t.RequestType5=t.RequestType4=t.RequestType3=t.RequestType2=t.RequestType1=t.RequestType0=t.RequestType=t.Message=t.RAL=void 0;t.CancellationStrategy=t.CancellationSenderStrategy=t.CancellationReceiverStrategy=t.ConnectionError=t.ConnectionErrors=t.LogTraceNotification=t.SetTraceNotification=void 0;const r=n(6622);Object.defineProperty(t,"Message",{enumerable:true,get:function(){return r.Message}});Object.defineProperty(t,"RequestType",{enumerable:true,get:function(){return r.RequestType}});Object.defineProperty(t,"RequestType0",{enumerable:true,get:function(){return r.RequestType0}});Object.defineProperty(t,"RequestType1",{enumerable:true,get:function(){return r.RequestType1}});Object.defineProperty(t,"RequestType2",{enumerable:true,get:function(){return r.RequestType2}});Object.defineProperty(t,"RequestType3",{enumerable:true,get:function(){return r.RequestType3}});Object.defineProperty(t,"RequestType4",{enumerable:true,get:function(){return r.RequestType4}});Object.defineProperty(t,"RequestType5",{enumerable:true,get:function(){return r.RequestType5}});Object.defineProperty(t,"RequestType6",{enumerable:true,get:function(){return r.RequestType6}});Object.defineProperty(t,"RequestType7",{enumerable:true,get:function(){return r.RequestType7}});Object.defineProperty(t,"RequestType8",{enumerable:true,get:function(){return r.RequestType8}});Object.defineProperty(t,"RequestType9",{enumerable:true,get:function(){return r.RequestType9}});Object.defineProperty(t,"ResponseError",{enumerable:true,get:function(){return r.ResponseError}});Object.defineProperty(t,"ErrorCodes",{enumerable:true,get:function(){return r.ErrorCodes}});Object.defineProperty(t,"NotificationType",{enumerable:true,get:function(){return r.NotificationType}});Object.defineProperty(t,"NotificationType0",{enumerable:true,get:function(){return r.NotificationType0}});Object.defineProperty(t,"NotificationType1",{enumerable:true,get:function(){return r.NotificationType1}});Object.defineProperty(t,"NotificationType2",{enumerable:true,get:function(){return r.NotificationType2}});Object.defineProperty(t,"NotificationType3",{enumerable:true,get:function(){return r.NotificationType3}});Object.defineProperty(t,"NotificationType4",{enumerable:true,get:function(){return r.NotificationType4}});Object.defineProperty(t,"NotificationType5",{enumerable:true,get:function(){return r.NotificationType5}});Object.defineProperty(t,"NotificationType6",{enumerable:true,get:function(){return r.NotificationType6}});Object.defineProperty(t,"NotificationType7",{enumerable:true,get:function(){return r.NotificationType7}});Object.defineProperty(t,"NotificationType8",{enumerable:true,get:function(){return r.NotificationType8}});Object.defineProperty(t,"NotificationType9",{enumerable:true,get:function(){return r.NotificationType9}});Object.defineProperty(t,"ParameterStructures",{enumerable:true,get:function(){return r.ParameterStructures}});const i=n(42514);Object.defineProperty(t,"LinkedMap",{enumerable:true,get:function(){return i.LinkedMap}});Object.defineProperty(t,"LRUCache",{enumerable:true,get:function(){return i.LRUCache}});Object.defineProperty(t,"Touch",{enumerable:true,get:function(){return i.Touch}});const s=n(24788);Object.defineProperty(t,"Disposable",{enumerable:true,get:function(){return s.Disposable}});const o=n(30478);Object.defineProperty(t,"Event",{enumerable:true,get:function(){return o.Event}});Object.defineProperty(t,"Emitter",{enumerable:true,get:function(){return o.Emitter}});const a=n(2648);Object.defineProperty(t,"CancellationTokenSource",{enumerable:true,get:function(){return a.CancellationTokenSource}});Object.defineProperty(t,"CancellationToken",{enumerable:true,get:function(){return a.CancellationToken}});const c=n(1505);Object.defineProperty(t,"MessageReader",{enumerable:true,get:function(){return c.MessageReader}});Object.defineProperty(t,"AbstractMessageReader",{enumerable:true,get:function(){return c.AbstractMessageReader}});Object.defineProperty(t,"ReadableStreamMessageReader",{enumerable:true,get:function(){return c.ReadableStreamMessageReader}});const u=n(27918);Object.defineProperty(t,"MessageWriter",{enumerable:true,get:function(){return u.MessageWriter}});Object.defineProperty(t,"AbstractMessageWriter",{enumerable:true,get:function(){return u.AbstractMessageWriter}});Object.defineProperty(t,"WriteableStreamMessageWriter",{enumerable:true,get:function(){return u.WriteableStreamMessageWriter}});const l=n(23817);Object.defineProperty(t,"ConnectionStrategy",{enumerable:true,get:function(){return l.ConnectionStrategy}});Object.defineProperty(t,"ConnectionOptions",{enumerable:true,get:function(){return l.ConnectionOptions}});Object.defineProperty(t,"NullLogger",{enumerable:true,get:function(){return l.NullLogger}});Object.defineProperty(t,"createMessageConnection",{enumerable:true,get:function(){return l.createMessageConnection}});Object.defineProperty(t,"ProgressToken",{enumerable:true,get:function(){return l.ProgressToken}});Object.defineProperty(t,"ProgressType",{enumerable:true,get:function(){return l.ProgressType}});Object.defineProperty(t,"Trace",{enumerable:true,get:function(){return l.Trace}});Object.defineProperty(t,"TraceValues",{enumerable:true,get:function(){return l.TraceValues}});Object.defineProperty(t,"TraceFormat",{enumerable:true,get:function(){return l.TraceFormat}});Object.defineProperty(t,"SetTraceNotification",{enumerable:true,get:function(){return l.SetTraceNotification}});Object.defineProperty(t,"LogTraceNotification",{enumerable:true,get:function(){return l.LogTraceNotification}});Object.defineProperty(t,"ConnectionErrors",{enumerable:true,get:function(){return l.ConnectionErrors}});Object.defineProperty(t,"ConnectionError",{enumerable:true,get:function(){return l.ConnectionError}});Object.defineProperty(t,"CancellationReceiverStrategy",{enumerable:true,get:function(){return l.CancellationReceiverStrategy}});Object.defineProperty(t,"CancellationSenderStrategy",{enumerable:true,get:function(){return l.CancellationSenderStrategy}});Object.defineProperty(t,"CancellationStrategy",{enumerable:true,get:function(){return l.CancellationStrategy}});const d=n(83996);t.RAL=d.default},2648:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CancellationTokenSource=t.CancellationToken=void 0;const r=n(83996);const i=n(18294);const s=n(30478);var o;(function(e){e.None=Object.freeze({isCancellationRequested:false,onCancellationRequested:s.Event.None});e.Cancelled=Object.freeze({isCancellationRequested:true,onCancellationRequested:s.Event.None});function is(t){const n=t;return n&&(n===e.None||n===e.Cancelled||i.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}e.is=is})(o=t.CancellationToken||(t.CancellationToken={}));const a=Object.freeze((function(e,t){const n=(0,r.default)().timer.setTimeout(e.bind(t),0);return{dispose(){n.dispose()}}}));class MutableToken{constructor(){this._isCancelled=false}cancel(){if(!this._isCancelled){this._isCancelled=true;if(this._emitter){this._emitter.fire(undefined);this.dispose()}}}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){if(this._isCancelled){return a}if(!this._emitter){this._emitter=new s.Emitter}return this._emitter.event}dispose(){if(this._emitter){this._emitter.dispose();this._emitter=undefined}}}class CancellationTokenSource{get token(){if(!this._token){this._token=new MutableToken}return this._token}cancel(){if(!this._token){this._token=o.Cancelled}else{this._token.cancel()}}dispose(){if(!this._token){this._token=o.None}else if(this._token instanceof MutableToken){this._token.dispose()}}}t.CancellationTokenSource=CancellationTokenSource},23817:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.createMessageConnection=t.ConnectionOptions=t.CancellationStrategy=t.CancellationSenderStrategy=t.CancellationReceiverStrategy=t.ConnectionStrategy=t.ConnectionError=t.ConnectionErrors=t.LogTraceNotification=t.SetTraceNotification=t.TraceFormat=t.TraceValues=t.Trace=t.NullLogger=t.ProgressType=t.ProgressToken=void 0;const r=n(83996);const i=n(18294);const s=n(6622);const o=n(42514);const a=n(30478);const c=n(2648);var u;(function(e){e.type=new s.NotificationType("$/cancelRequest")})(u||(u={}));var l;(function(e){function is(e){return typeof e==="string"||typeof e==="number"}e.is=is})(l=t.ProgressToken||(t.ProgressToken={}));var d;(function(e){e.type=new s.NotificationType("$/progress")})(d||(d={}));class ProgressType{constructor(){}}t.ProgressType=ProgressType;var f;(function(e){function is(e){return i.func(e)}e.is=is})(f||(f={}));t.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var p;(function(e){e[e["Off"]=0]="Off";e[e["Messages"]=1]="Messages";e[e["Compact"]=2]="Compact";e[e["Verbose"]=3]="Verbose"})(p=t.Trace||(t.Trace={}));var h;(function(e){e.Off="off";e.Messages="messages";e.Compact="compact";e.Verbose="verbose"})(h=t.TraceValues||(t.TraceValues={}));(function(e){function fromString(t){if(!i.string(t)){return e.Off}t=t.toLowerCase();switch(t){case"off":return e.Off;case"messages":return e.Messages;case"compact":return e.Compact;case"verbose":return e.Verbose;default:return e.Off}}e.fromString=fromString;function toString(t){switch(t){case e.Off:return"off";case e.Messages:return"messages";case e.Compact:return"compact";case e.Verbose:return"verbose";default:return"off"}}e.toString=toString})(p=t.Trace||(t.Trace={}));var m;(function(e){e["Text"]="text";e["JSON"]="json"})(m=t.TraceFormat||(t.TraceFormat={}));(function(e){function fromString(t){if(!i.string(t)){return e.Text}t=t.toLowerCase();if(t==="json"){return e.JSON}else{return e.Text}}e.fromString=fromString})(m=t.TraceFormat||(t.TraceFormat={}));var g;(function(e){e.type=new s.NotificationType("$/setTrace")})(g=t.SetTraceNotification||(t.SetTraceNotification={}));var v;(function(e){e.type=new s.NotificationType("$/logTrace")})(v=t.LogTraceNotification||(t.LogTraceNotification={}));var y;(function(e){e[e["Closed"]=1]="Closed";e[e["Disposed"]=2]="Disposed";e[e["AlreadyListening"]=3]="AlreadyListening"})(y=t.ConnectionErrors||(t.ConnectionErrors={}));class ConnectionError extends Error{constructor(e,t){super(t);this.code=e;Object.setPrototypeOf(this,ConnectionError.prototype)}}t.ConnectionError=ConnectionError;var b;(function(e){function is(e){const t=e;return t&&i.func(t.cancelUndispatched)}e.is=is})(b=t.ConnectionStrategy||(t.ConnectionStrategy={}));var _;(function(e){e.Message=Object.freeze({createCancellationTokenSource(e){return new c.CancellationTokenSource}});function is(e){const t=e;return t&&i.func(t.createCancellationTokenSource)}e.is=is})(_=t.CancellationReceiverStrategy||(t.CancellationReceiverStrategy={}));var S;(function(e){e.Message=Object.freeze({sendCancellation(e,t){return e.sendNotification(u.type,{id:t})},cleanup(e){}});function is(e){const t=e;return t&&i.func(t.sendCancellation)&&i.func(t.cleanup)}e.is=is})(S=t.CancellationSenderStrategy||(t.CancellationSenderStrategy={}));var w;(function(e){e.Message=Object.freeze({receiver:_.Message,sender:S.Message});function is(e){const t=e;return t&&_.is(t.receiver)&&S.is(t.sender)}e.is=is})(w=t.CancellationStrategy||(t.CancellationStrategy={}));var T;(function(e){function is(e){const t=e;return t&&(w.is(t.cancellationStrategy)||b.is(t.connectionStrategy))}e.is=is})(T=t.ConnectionOptions||(t.ConnectionOptions={}));var k;(function(e){e[e["New"]=1]="New";e[e["Listening"]=2]="Listening";e[e["Closed"]=3]="Closed";e[e["Disposed"]=4]="Disposed"})(k||(k={}));function createMessageConnection(e,n,h,b){const _=h!==undefined?h:t.NullLogger;let S=0;let T=0;let C=0;const E="2.0";let R=undefined;const x=new Map;let O=undefined;const D=new Map;const P=new Map;let I;let M=new o.LinkedMap;let N=new Map;let A=new Set;let F=new Map;let L=p.Off;let j=m.Text;let q;let $=k.New;const U=new a.Emitter;const H=new a.Emitter;const W=new a.Emitter;const B=new a.Emitter;const Y=new a.Emitter;const V=b&&b.cancellationStrategy?b.cancellationStrategy:w.Message;function createRequestQueueKey(e){if(e===null){throw new Error(`Can't send requests with id null since the response can't be correlated.`)}return"req-"+e.toString()}function createResponseQueueKey(e){if(e===null){return"res-unknown-"+(++C).toString()}else{return"res-"+e.toString()}}function createNotificationQueueKey(){return"not-"+(++T).toString()}function addMessageToQueue(e,t){if(s.Message.isRequest(t)){e.set(createRequestQueueKey(t.id),t)}else if(s.Message.isResponse(t)){e.set(createResponseQueueKey(t.id),t)}else{e.set(createNotificationQueueKey(),t)}}function cancelUndispatched(e){return undefined}function isListening(){return $===k.Listening}function isClosed(){return $===k.Closed}function isDisposed(){return $===k.Disposed}function closeHandler(){if($===k.New||$===k.Listening){$=k.Closed;H.fire(undefined)}}function readErrorHandler(e){U.fire([e,undefined,undefined])}function writeErrorHandler(e){U.fire(e)}e.onClose(closeHandler);e.onError(readErrorHandler);n.onClose(closeHandler);n.onError(writeErrorHandler);function triggerMessageQueue(){if(I||M.size===0){return}I=(0,r.default)().timer.setImmediate((()=>{I=undefined;processMessageQueue()}))}function processMessageQueue(){if(M.size===0){return}const e=M.shift();try{if(s.Message.isRequest(e)){handleRequest(e)}else if(s.Message.isNotification(e)){handleNotification(e)}else if(s.Message.isResponse(e)){handleResponse(e)}else{handleInvalidMessage(e)}}finally{triggerMessageQueue()}}const callback=e=>{try{if(s.Message.isNotification(e)&&e.method===u.type.method){const t=e.params.id;const r=createRequestQueueKey(t);const i=M.get(r);if(s.Message.isRequest(i)){const s=b?.connectionStrategy;const o=s&&s.cancelUndispatched?s.cancelUndispatched(i,cancelUndispatched):cancelUndispatched(i);if(o&&(o.error!==undefined||o.result!==undefined)){M.delete(r);F.delete(t);o.id=i.id;traceSendingResponse(o,e.method,Date.now());n.write(o).catch((()=>_.error(`Sending response for canceled message failed.`)));return}}const o=F.get(t);if(o!==undefined){o.cancel();traceReceivedNotification(e);return}else{A.add(t)}}addMessageToQueue(M,e)}finally{triggerMessageQueue()}};function handleRequest(e){if(isDisposed()){return}function reply(t,r,i){const o={jsonrpc:E,id:e.id};if(t instanceof s.ResponseError){o.error=t.toJson()}else{o.result=t===undefined?null:t}traceSendingResponse(o,r,i);n.write(o).catch((()=>_.error(`Sending response failed.`)))}function replyError(t,r,i){const s={jsonrpc:E,id:e.id,error:t.toJson()};traceSendingResponse(s,r,i);n.write(s).catch((()=>_.error(`Sending response failed.`)))}function replySuccess(t,r,i){if(t===undefined){t=null}const s={jsonrpc:E,id:e.id,result:t};traceSendingResponse(s,r,i);n.write(s).catch((()=>_.error(`Sending response failed.`)))}traceReceivedRequest(e);const t=x.get(e.method);let r;let o;if(t){r=t.type;o=t.handler}const a=Date.now();if(o||R){const t=e.id??String(Date.now());const n=V.receiver.createCancellationTokenSource(t);if(e.id!==null&&A.has(e.id)){n.cancel()}if(e.id!==null){F.set(t,n)}try{let c;if(o){if(e.params===undefined){if(r!==undefined&&r.numberOfParams!==0){replyError(new s.ResponseError(s.ErrorCodes.InvalidParams,`Request ${e.method} defines ${r.numberOfParams} params but received none.`),e.method,a);return}c=o(n.token)}else if(Array.isArray(e.params)){if(r!==undefined&&r.parameterStructures===s.ParameterStructures.byName){replyError(new s.ResponseError(s.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by name but received parameters by position`),e.method,a);return}c=o(...e.params,n.token)}else{if(r!==undefined&&r.parameterStructures===s.ParameterStructures.byPosition){replyError(new s.ResponseError(s.ErrorCodes.InvalidParams,`Request ${e.method} defines parameters by position but received parameters by name`),e.method,a);return}c=o(e.params,n.token)}}else if(R){c=R(e.method,e.params,n.token)}const u=c;if(!c){F.delete(t);replySuccess(c,e.method,a)}else if(u.then){u.then((n=>{F.delete(t);reply(n,e.method,a)}),(n=>{F.delete(t);if(n instanceof s.ResponseError){replyError(n,e.method,a)}else if(n&&i.string(n.message)){replyError(new s.ResponseError(s.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${n.message}`),e.method,a)}else{replyError(new s.ResponseError(s.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,a)}}))}else{F.delete(t);reply(c,e.method,a)}}catch(n){F.delete(t);if(n instanceof s.ResponseError){reply(n,e.method,a)}else if(n&&i.string(n.message)){replyError(new s.ResponseError(s.ErrorCodes.InternalError,`Request ${e.method} failed with message: ${n.message}`),e.method,a)}else{replyError(new s.ResponseError(s.ErrorCodes.InternalError,`Request ${e.method} failed unexpectedly without providing any details.`),e.method,a)}}}else{replyError(new s.ResponseError(s.ErrorCodes.MethodNotFound,`Unhandled method ${e.method}`),e.method,a)}}function handleResponse(e){if(isDisposed()){return}if(e.id===null){if(e.error){_.error(`Received response message without id: Error is: \n${JSON.stringify(e.error,undefined,4)}`)}else{_.error(`Received response message without id. No further error information provided.`)}}else{const t=e.id;const n=N.get(t);traceReceivedResponse(e,n);if(n!==undefined){N.delete(t);try{if(e.error){const t=e.error;n.reject(new s.ResponseError(t.code,t.message,t.data))}else if(e.result!==undefined){n.resolve(e.result)}else{throw new Error("Should never happen.")}}catch(e){if(e.message){_.error(`Response handler '${n.method}' failed with message: ${e.message}`)}else{_.error(`Response handler '${n.method}' failed unexpectedly.`)}}}}}function handleNotification(e){if(isDisposed()){return}let t=undefined;let n;if(e.method===u.type.method){const t=e.params.id;A.delete(t);traceReceivedNotification(e);return}else{const r=D.get(e.method);if(r){n=r.handler;t=r.type}}if(n||O){try{traceReceivedNotification(e);if(n){if(e.params===undefined){if(t!==undefined){if(t.numberOfParams!==0&&t.parameterStructures!==s.ParameterStructures.byName){_.error(`Notification ${e.method} defines ${t.numberOfParams} params but received none.`)}}n()}else if(Array.isArray(e.params)){const r=e.params;if(e.method===d.type.method&&r.length===2&&l.is(r[0])){n({token:r[0],value:r[1]})}else{if(t!==undefined){if(t.parameterStructures===s.ParameterStructures.byName){_.error(`Notification ${e.method} defines parameters by name but received parameters by position`)}if(t.numberOfParams!==e.params.length){_.error(`Notification ${e.method} defines ${t.numberOfParams} params but received ${r.length} arguments`)}}n(...r)}}else{if(t!==undefined&&t.parameterStructures===s.ParameterStructures.byPosition){_.error(`Notification ${e.method} defines parameters by position but received parameters by name`)}n(e.params)}}else if(O){O(e.method,e.params)}}catch(t){if(t.message){_.error(`Notification handler '${e.method}' failed with message: ${t.message}`)}else{_.error(`Notification handler '${e.method}' failed unexpectedly.`)}}}else{W.fire(e)}}function handleInvalidMessage(e){if(!e){_.error("Received empty message.");return}_.error(`Received message which is neither a response nor a notification message:\n${JSON.stringify(e,null,4)}`);const t=e;if(i.string(t.id)||i.number(t.id)){const e=t.id;const n=N.get(e);if(n){n.reject(new Error("The received response has neither a result nor an error property."))}}}function stringifyTrace(e){if(e===undefined||e===null){return undefined}switch(L){case p.Verbose:return JSON.stringify(e,null,4);case p.Compact:return JSON.stringify(e);default:return undefined}}function traceSendingRequest(e){if(L===p.Off||!q){return}if(j===m.Text){let t=undefined;if((L===p.Verbose||L===p.Compact)&&e.params){t=`Params: ${stringifyTrace(e.params)}\n\n`}q.log(`Sending request '${e.method} - (${e.id})'.`,t)}else{logLSPMessage("send-request",e)}}function traceSendingNotification(e){if(L===p.Off||!q){return}if(j===m.Text){let t=undefined;if(L===p.Verbose||L===p.Compact){if(e.params){t=`Params: ${stringifyTrace(e.params)}\n\n`}else{t="No parameters provided.\n\n"}}q.log(`Sending notification '${e.method}'.`,t)}else{logLSPMessage("send-notification",e)}}function traceSendingResponse(e,t,n){if(L===p.Off||!q){return}if(j===m.Text){let r=undefined;if(L===p.Verbose||L===p.Compact){if(e.error&&e.error.data){r=`Error data: ${stringifyTrace(e.error.data)}\n\n`}else{if(e.result){r=`Result: ${stringifyTrace(e.result)}\n\n`}else if(e.error===undefined){r="No result returned.\n\n"}}}q.log(`Sending response '${t} - (${e.id})'. Processing request took ${Date.now()-n}ms`,r)}else{logLSPMessage("send-response",e)}}function traceReceivedRequest(e){if(L===p.Off||!q){return}if(j===m.Text){let t=undefined;if((L===p.Verbose||L===p.Compact)&&e.params){t=`Params: ${stringifyTrace(e.params)}\n\n`}q.log(`Received request '${e.method} - (${e.id})'.`,t)}else{logLSPMessage("receive-request",e)}}function traceReceivedNotification(e){if(L===p.Off||!q||e.method===v.type.method){return}if(j===m.Text){let t=undefined;if(L===p.Verbose||L===p.Compact){if(e.params){t=`Params: ${stringifyTrace(e.params)}\n\n`}else{t="No parameters provided.\n\n"}}q.log(`Received notification '${e.method}'.`,t)}else{logLSPMessage("receive-notification",e)}}function traceReceivedResponse(e,t){if(L===p.Off||!q){return}if(j===m.Text){let n=undefined;if(L===p.Verbose||L===p.Compact){if(e.error&&e.error.data){n=`Error data: ${stringifyTrace(e.error.data)}\n\n`}else{if(e.result){n=`Result: ${stringifyTrace(e.result)}\n\n`}else if(e.error===undefined){n="No result returned.\n\n"}}}if(t){const r=e.error?` Request failed: ${e.error.message} (${e.error.code}).`:"";q.log(`Received response '${t.method} - (${e.id})' in ${Date.now()-t.timerStart}ms.${r}`,n)}else{q.log(`Received response ${e.id} without active response promise.`,n)}}else{logLSPMessage("receive-response",e)}}function logLSPMessage(e,t){if(!q||L===p.Off){return}const n={isLSPMessage:true,type:e,message:t,timestamp:Date.now()};q.log(n)}function throwIfClosedOrDisposed(){if(isClosed()){throw new ConnectionError(y.Closed,"Connection is closed.")}if(isDisposed()){throw new ConnectionError(y.Disposed,"Connection is disposed.")}}function throwIfListening(){if(isListening()){throw new ConnectionError(y.AlreadyListening,"Connection is already listening")}}function throwIfNotListening(){if(!isListening()){throw new Error("Call listen() first.")}}function undefinedToNull(e){if(e===undefined){return null}else{return e}}function nullToUndefined(e){if(e===null){return undefined}else{return e}}function isNamedParam(e){return e!==undefined&&e!==null&&!Array.isArray(e)&&typeof e==="object"}function computeSingleParam(e,t){switch(e){case s.ParameterStructures.auto:if(isNamedParam(t)){return nullToUndefined(t)}else{return[undefinedToNull(t)]}case s.ParameterStructures.byName:if(!isNamedParam(t)){throw new Error(`Received parameters by name but param is not an object literal.`)}return nullToUndefined(t);case s.ParameterStructures.byPosition:return[undefinedToNull(t)];default:throw new Error(`Unknown parameter structure ${e.toString()}`)}}function computeMessageParams(e,t){let n;const r=e.numberOfParams;switch(r){case 0:n=undefined;break;case 1:n=computeSingleParam(e.parameterStructures,t[0]);break;default:n=[];for(let e=0;e<t.length&&e<r;e++){n.push(undefinedToNull(t[e]))}if(t.length<r){for(let e=t.length;e<r;e++){n.push(null)}}break}return n}const K={sendNotification:(e,...t)=>{throwIfClosedOrDisposed();let r;let o;if(i.string(e)){r=e;const n=t[0];let i=0;let a=s.ParameterStructures.auto;if(s.ParameterStructures.is(n)){i=1;a=n}let c=t.length;const u=c-i;switch(u){case 0:o=undefined;break;case 1:o=computeSingleParam(a,t[i]);break;default:if(a===s.ParameterStructures.byName){throw new Error(`Received ${u} parameters for 'by Name' notification parameter structure.`)}o=t.slice(i,c).map((e=>undefinedToNull(e)));break}}else{const n=t;r=e.method;o=computeMessageParams(e,n)}const a={jsonrpc:E,method:r,params:o};traceSendingNotification(a);return n.write(a).catch((()=>_.error(`Sending notification failed.`)))},onNotification:(e,t)=>{throwIfClosedOrDisposed();let n;if(i.func(e)){O=e}else if(t){if(i.string(e)){n=e;D.set(e,{type:undefined,handler:t})}else{n=e.method;D.set(e.method,{type:e,handler:t})}}return{dispose:()=>{if(n!==undefined){D.delete(n)}else{O=undefined}}}},onProgress:(e,t,n)=>{if(P.has(t)){throw new Error(`Progress handler for token ${t} already registered`)}P.set(t,n);return{dispose:()=>{P.delete(t)}}},sendProgress:(e,t,n)=>K.sendNotification(d.type,{token:t,value:n}),onUnhandledProgress:B.event,sendRequest:(e,...t)=>{throwIfClosedOrDisposed();throwIfNotListening();let r;let o;let a=undefined;if(i.string(e)){r=e;const n=t[0];const i=t[t.length-1];let u=0;let l=s.ParameterStructures.auto;if(s.ParameterStructures.is(n)){u=1;l=n}let d=t.length;if(c.CancellationToken.is(i)){d=d-1;a=i}const f=d-u;switch(f){case 0:o=undefined;break;case 1:o=computeSingleParam(l,t[u]);break;default:if(l===s.ParameterStructures.byName){throw new Error(`Received ${f} parameters for 'by Name' request parameter structure.`)}o=t.slice(u,d).map((e=>undefinedToNull(e)));break}}else{const n=t;r=e.method;o=computeMessageParams(e,n);const i=e.numberOfParams;a=c.CancellationToken.is(n[i])?n[i]:undefined}const u=S++;let l;if(a){l=a.onCancellationRequested((()=>{const e=V.sender.sendCancellation(K,u);if(e===undefined){_.log(`Received no promise from cancellation strategy when cancelling id ${u}`);return Promise.resolve()}else{return e.catch((()=>{_.log(`Sending cancellation messages for id ${u} failed`)}))}}))}const d=new Promise(((e,t)=>{const i={jsonrpc:E,id:u,method:r,params:o};const resolveWithCleanup=t=>{e(t);V.sender.cleanup(u);l?.dispose()};const rejectWithCleanup=e=>{t(e);V.sender.cleanup(u);l?.dispose()};let a={method:r,timerStart:Date.now(),resolve:resolveWithCleanup,reject:rejectWithCleanup};traceSendingRequest(i);try{n.write(i).catch((()=>_.error(`Sending request failed.`)))}catch(e){a.reject(new s.ResponseError(s.ErrorCodes.MessageWriteError,e.message?e.message:"Unknown reason"));a=null}if(a){N.set(u,a)}}));return d},onRequest:(e,t)=>{throwIfClosedOrDisposed();let n=null;if(f.is(e)){n=undefined;R=e}else if(i.string(e)){n=null;if(t!==undefined){n=e;x.set(e,{handler:t,type:undefined})}}else{if(t!==undefined){n=e.method;x.set(e.method,{type:e,handler:t})}}return{dispose:()=>{if(n===null){return}if(n!==undefined){x.delete(n)}else{R=undefined}}}},hasPendingResponse:()=>N.size>0,trace:async(e,t,n)=>{let r=false;let s=m.Text;if(n!==undefined){if(i.boolean(n)){r=n}else{r=n.sendNotification||false;s=n.traceFormat||m.Text}}L=e;j=s;if(L===p.Off){q=undefined}else{q=t}if(r&&!isClosed()&&!isDisposed()){await K.sendNotification(g.type,{value:p.toString(e)})}},onError:U.event,onClose:H.event,onUnhandledNotification:W.event,onDispose:Y.event,end:()=>{n.end()},dispose:()=>{if(isDisposed()){return}$=k.Disposed;Y.fire(undefined);const t=new s.ResponseError(s.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(const e of N.values()){e.reject(t)}N=new Map;F=new Map;A=new Set;M=new o.LinkedMap;if(i.func(n.dispose)){n.dispose()}if(i.func(e.dispose)){e.dispose()}},listen:()=>{throwIfClosedOrDisposed();throwIfListening();$=k.Listening;e.listen(callback)},inspect:()=>{(0,r.default)().console.log("inspect")}};K.onNotification(v.type,(e=>{if(L===p.Off||!q){return}const t=L===p.Verbose||L===p.Compact;q.log(e.message,t?e.verbose:undefined)}));K.onNotification(d.type,(e=>{const t=P.get(e.token);if(t){t(e.value)}else{B.fire(e)}}));return K}t.createMessageConnection=createMessageConnection},24788:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Disposable=void 0;var n;(function(e){function create(e){return{dispose:e}}e.create=create})(n=t.Disposable||(t.Disposable={}))},30478:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Emitter=t.Event=void 0;const r=n(83996);var i;(function(e){const t={dispose(){}};e.None=function(){return t}})(i=t.Event||(t.Event={}));class CallbackList{add(e,t=null,n){if(!this._callbacks){this._callbacks=[];this._contexts=[]}this._callbacks.push(e);this._contexts.push(t);if(Array.isArray(n)){n.push({dispose:()=>this.remove(e,t)})}}remove(e,t=null){if(!this._callbacks){return}let n=false;for(let r=0,i=this._callbacks.length;r<i;r++){if(this._callbacks[r]===e){if(this._contexts[r]===t){this._callbacks.splice(r,1);this._contexts.splice(r,1);return}else{n=true}}}if(n){throw new Error("When adding a listener with a context, you should remove it with the same context")}}invoke(...e){if(!this._callbacks){return[]}const t=[],n=this._callbacks.slice(0),i=this._contexts.slice(0);for(let s=0,o=n.length;s<o;s++){try{t.push(n[s].apply(i[s],e))}catch(e){(0,r.default)().console.error(e)}}return t}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=undefined;this._contexts=undefined}}class Emitter{constructor(e){this._options=e}get event(){if(!this._event){this._event=(e,t,n)=>{if(!this._callbacks){this._callbacks=new CallbackList}if(this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()){this._options.onFirstListenerAdd(this)}this._callbacks.add(e,t);const r={dispose:()=>{if(!this._callbacks){return}this._callbacks.remove(e,t);r.dispose=Emitter._noop;if(this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()){this._options.onLastListenerRemove(this)}}};if(Array.isArray(n)){n.push(r)}return r}}return this._event}fire(e){if(this._callbacks){this._callbacks.invoke.call(this._callbacks,e)}}dispose(){if(this._callbacks){this._callbacks.dispose();this._callbacks=undefined}}}t.Emitter=Emitter;Emitter._noop=function(){}},18294:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.stringArray=t.array=t.func=t.error=t.number=t.string=t.boolean=void 0;function boolean(e){return e===true||e===false}t.boolean=boolean;function string(e){return typeof e==="string"||e instanceof String}t.string=string;function number(e){return typeof e==="number"||e instanceof Number}t.number=number;function error(e){return e instanceof Error}t.error=error;function func(e){return typeof e==="function"}t.func=func;function array(e){return Array.isArray(e)}t.array=array;function stringArray(e){return array(e)&&e.every((e=>string(e)))}t.stringArray=stringArray},42514:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:true});t.LRUCache=t.LinkedMap=t.Touch=void 0;var r;(function(e){e.None=0;e.First=1;e.AsOld=e.First;e.Last=2;e.AsNew=e.Last})(r=t.Touch||(t.Touch={}));class LinkedMap{constructor(){this[n]="LinkedMap";this._map=new Map;this._head=undefined;this._tail=undefined;this._size=0;this._state=0}clear(){this._map.clear();this._head=undefined;this._tail=undefined;this._size=0;this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,t=r.None){const n=this._map.get(e);if(!n){return undefined}if(t!==r.None){this.touch(n,t)}return n.value}set(e,t,n=r.None){let i=this._map.get(e);if(i){i.value=t;if(n!==r.None){this.touch(i,n)}}else{i={key:e,value:t,next:undefined,previous:undefined};switch(n){case r.None:this.addItemLast(i);break;case r.First:this.addItemFirst(i);break;case r.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i);this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(!t){return undefined}this._map.delete(e);this.removeItem(t);this._size--;return t.value}shift(){if(!this._head&&!this._tail){return undefined}if(!this._head||!this._tail){throw new Error("Invalid list")}const e=this._head;this._map.delete(e.key);this.removeItem(e);this._size--;return e.value}forEach(e,t){const n=this._state;let r=this._head;while(r){if(t){e.bind(t)(r.value,r.key,this)}else{e(r.value,r.key,this)}if(this._state!==n){throw new Error(`LinkedMap got modified during iteration.`)}r=r.next}}keys(){const e=this._state;let t=this._head;const n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e){throw new Error(`LinkedMap got modified during iteration.`)}if(t){const e={value:t.key,done:false};t=t.next;return e}else{return{value:undefined,done:true}}}};return n}values(){const e=this._state;let t=this._head;const n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e){throw new Error(`LinkedMap got modified during iteration.`)}if(t){const e={value:t.value,done:false};t=t.next;return e}else{return{value:undefined,done:true}}}};return n}entries(){const e=this._state;let t=this._head;const n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e){throw new Error(`LinkedMap got modified during iteration.`)}if(t){const e={value:[t.key,t.value],done:false};t=t.next;return e}else{return{value:undefined,done:true}}}};return n}[(n=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size){return}if(e===0){this.clear();return}let t=this._head;let n=this.size;while(t&&n>e){this._map.delete(t.key);t=t.next;n--}this._head=t;this._size=n;if(t){t.previous=undefined}this._state++}addItemFirst(e){if(!this._head&&!this._tail){this._tail=e}else if(!this._head){throw new Error("Invalid list")}else{e.next=this._head;this._head.previous=e}this._head=e;this._state++}addItemLast(e){if(!this._head&&!this._tail){this._head=e}else if(!this._tail){throw new Error("Invalid list")}else{e.previous=this._tail;this._tail.next=e}this._tail=e;this._state++}removeItem(e){if(e===this._head&&e===this._tail){this._head=undefined;this._tail=undefined}else if(e===this._head){if(!e.next){throw new Error("Invalid list")}e.next.previous=undefined;this._head=e.next}else if(e===this._tail){if(!e.previous){throw new Error("Invalid list")}e.previous.next=undefined;this._tail=e.previous}else{const t=e.next;const n=e.previous;if(!t||!n){throw new Error("Invalid list")}t.previous=n;n.next=t}e.next=undefined;e.previous=undefined;this._state++}touch(e,t){if(!this._head||!this._tail){throw new Error("Invalid list")}if(t!==r.First&&t!==r.Last){return}if(t===r.First){if(e===this._head){return}const t=e.next;const n=e.previous;if(e===this._tail){n.next=undefined;this._tail=n}else{t.previous=n;n.next=t}e.previous=undefined;e.next=this._head;this._head.previous=e;this._head=e;this._state++}else if(t===r.Last){if(e===this._tail){return}const t=e.next;const n=e.previous;if(e===this._head){t.previous=undefined;this._head=t}else{t.previous=n;n.next=t}e.next=undefined;e.previous=this._tail;this._tail.next=e;this._tail=e;this._state++}}toJSON(){const e=[];this.forEach(((t,n)=>{e.push([n,t])}));return e}fromJSON(e){this.clear();for(const[t,n]of e){this.set(t,n)}}}t.LinkedMap=LinkedMap;class LRUCache extends LinkedMap{constructor(e,t=1){super();this._limit=e;this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e;this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1);this.checkTrim()}get(e,t=r.AsNew){return super.get(e,t)}peek(e){return super.get(e,r.None)}set(e,t){super.set(e,t,r.Last);this.checkTrim();return this}checkTrim(){if(this.size>this._limit){this.trimOld(Math.round(this._limit*this._ratio))}}}t.LRUCache=LRUCache},11228:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.AbstractMessageBuffer=void 0;const n=13;const r=10;const i="\r\n";class AbstractMessageBuffer{constructor(e="utf-8"){this._encoding=e;this._chunks=[];this._totalLength=0}get encoding(){return this._encoding}append(e){const t=typeof e==="string"?this.fromString(e,this._encoding):e;this._chunks.push(t);this._totalLength+=t.byteLength}tryReadHeaders(){if(this._chunks.length===0){return undefined}let e=0;let t=0;let s=0;let o=0;e:while(t<this._chunks.length){const i=this._chunks[t];s=0;t:while(s<i.length){const t=i[s];switch(t){case n:switch(e){case 0:e=1;break;case 2:e=3;break;default:e=0}break;case r:switch(e){case 1:e=2;break;case 3:e=4;s++;break e;default:e=0}break;default:e=0}s++}o+=i.byteLength;t++}if(e!==4){return undefined}const a=this._read(o+s);const c=new Map;const u=this.toString(a,"ascii").split(i);if(u.length<2){return c}for(let e=0;e<u.length-2;e++){const t=u[e];const n=t.indexOf(":");if(n===-1){throw new Error("Message header must separate key and value using :")}const r=t.substr(0,n);const i=t.substr(n+1).trim();c.set(r,i)}return c}tryReadBody(e){if(this._totalLength<e){return undefined}return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0){return this.emptyBuffer()}if(e>this._totalLength){throw new Error(`Cannot read so many bytes!`)}if(this._chunks[0].byteLength===e){const t=this._chunks[0];this._chunks.shift();this._totalLength-=e;return this.asNative(t)}if(this._chunks[0].byteLength>e){const t=this._chunks[0];const n=this.asNative(t,e);this._chunks[0]=t.slice(e);this._totalLength-=e;return n}const t=this.allocNative(e);let n=0;let r=0;while(e>0){const i=this._chunks[r];if(i.byteLength>e){const s=i.slice(0,e);t.set(s,n);n+=e;this._chunks[r]=i.slice(e);this._totalLength-=e;e-=e}else{t.set(i,n);n+=i.byteLength;this._chunks.shift();this._totalLength-=i.byteLength;e-=i.byteLength}}return t}}t.AbstractMessageBuffer=AbstractMessageBuffer},1505:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ReadableStreamMessageReader=t.AbstractMessageReader=t.MessageReader=void 0;const r=n(83996);const i=n(18294);const s=n(30478);var o;(function(e){function is(e){let t=e;return t&&i.func(t.listen)&&i.func(t.dispose)&&i.func(t.onError)&&i.func(t.onClose)&&i.func(t.onPartialMessage)}e.is=is})(o=t.MessageReader||(t.MessageReader={}));class AbstractMessageReader{constructor(){this.errorEmitter=new s.Emitter;this.closeEmitter=new s.Emitter;this.partialMessageEmitter=new s.Emitter}dispose(){this.errorEmitter.dispose();this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(undefined)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){if(e instanceof Error){return e}else{return new Error(`Reader received error. Reason: ${i.string(e.message)?e.message:"unknown"}`)}}}t.AbstractMessageReader=AbstractMessageReader;var a;(function(e){function fromOptions(e){let t;let n;let i;const s=new Map;let o;const a=new Map;if(e===undefined||typeof e==="string"){t=e??"utf-8"}else{t=e.charset??"utf-8";if(e.contentDecoder!==undefined){i=e.contentDecoder;s.set(i.name,i)}if(e.contentDecoders!==undefined){for(const t of e.contentDecoders){s.set(t.name,t)}}if(e.contentTypeDecoder!==undefined){o=e.contentTypeDecoder;a.set(o.name,o)}if(e.contentTypeDecoders!==undefined){for(const t of e.contentTypeDecoders){a.set(t.name,t)}}}if(o===undefined){o=(0,r.default)().applicationJson.decoder;a.set(o.name,o)}return{charset:t,contentDecoder:i,contentDecoders:s,contentTypeDecoder:o,contentTypeDecoders:a}}e.fromOptions=fromOptions})(a||(a={}));class ReadableStreamMessageReader extends AbstractMessageReader{constructor(e,t){super();this.readable=e;this.options=a.fromOptions(t);this.buffer=(0,r.default)().messageBuffer.create(this.options.charset);this._partialMessageTimeout=1e4;this.nextMessageLength=-1;this.messageToken=0}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1;this.messageToken=0;this.partialMessageTimer=undefined;this.callback=e;const t=this.readable.onData((e=>{this.onData(e)}));this.readable.onError((e=>this.fireError(e)));this.readable.onClose((()=>this.fireClose()));return t}onData(e){this.buffer.append(e);while(true){if(this.nextMessageLength===-1){const e=this.buffer.tryReadHeaders();if(!e){return}const t=e.get("Content-Length");if(!t){throw new Error("Header must provide a Content-Length property.")}const n=parseInt(t);if(isNaN(n)){throw new Error("Content-Length value must be a number.")}this.nextMessageLength=n}const e=this.buffer.tryReadBody(this.nextMessageLength);if(e===undefined){this.setPartialMessageTimer();return}this.clearPartialMessageTimer();this.nextMessageLength=-1;let t;if(this.options.contentDecoder!==undefined){t=this.options.contentDecoder.decode(e)}else{t=Promise.resolve(e)}t.then((e=>{this.options.contentTypeDecoder.decode(e,this.options).then((e=>{this.callback(e)}),(e=>{this.fireError(e)}))}),(e=>{this.fireError(e)}))}}clearPartialMessageTimer(){if(this.partialMessageTimer){this.partialMessageTimer.dispose();this.partialMessageTimer=undefined}}setPartialMessageTimer(){this.clearPartialMessageTimer();if(this._partialMessageTimeout<=0){return}this.partialMessageTimer=(0,r.default)().timer.setTimeout(((e,t)=>{this.partialMessageTimer=undefined;if(e===this.messageToken){this.firePartialMessage({messageToken:e,waitingTime:t});this.setPartialMessageTimer()}}),this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout)}}t.ReadableStreamMessageReader=ReadableStreamMessageReader},27918:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.WriteableStreamMessageWriter=t.AbstractMessageWriter=t.MessageWriter=void 0;const r=n(83996);const i=n(18294);const s=n(78264);const o=n(30478);const a="Content-Length: ";const c="\r\n";var u;(function(e){function is(e){let t=e;return t&&i.func(t.dispose)&&i.func(t.onClose)&&i.func(t.onError)&&i.func(t.write)}e.is=is})(u=t.MessageWriter||(t.MessageWriter={}));class AbstractMessageWriter{constructor(){this.errorEmitter=new o.Emitter;this.closeEmitter=new o.Emitter}dispose(){this.errorEmitter.dispose();this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,t,n){this.errorEmitter.fire([this.asError(e),t,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(undefined)}asError(e){if(e instanceof Error){return e}else{return new Error(`Writer received error. Reason: ${i.string(e.message)?e.message:"unknown"}`)}}}t.AbstractMessageWriter=AbstractMessageWriter;var l;(function(e){function fromOptions(e){if(e===undefined||typeof e==="string"){return{charset:e??"utf-8",contentTypeEncoder:(0,r.default)().applicationJson.encoder}}else{return{charset:e.charset??"utf-8",contentEncoder:e.contentEncoder,contentTypeEncoder:e.contentTypeEncoder??(0,r.default)().applicationJson.encoder}}}e.fromOptions=fromOptions})(l||(l={}));class WriteableStreamMessageWriter extends AbstractMessageWriter{constructor(e,t){super();this.writable=e;this.options=l.fromOptions(t);this.errorCount=0;this.writeSemaphore=new s.Semaphore(1);this.writable.onError((e=>this.fireError(e)));this.writable.onClose((()=>this.fireClose()))}async write(e){return this.writeSemaphore.lock((async()=>{const t=this.options.contentTypeEncoder.encode(e,this.options).then((e=>{if(this.options.contentEncoder!==undefined){return this.options.contentEncoder.encode(e)}else{return e}}));return t.then((t=>{const n=[];n.push(a,t.byteLength.toString(),c);n.push(c);return this.doWrite(e,n,t)}),(e=>{this.fireError(e);throw e}))}))}async doWrite(e,t,n){try{await this.writable.write(t.join(""),"ascii");return this.writable.write(n)}catch(t){this.handleError(t,e);return Promise.reject(t)}}handleError(e,t){this.errorCount++;this.fireError(e,t,this.errorCount)}end(){this.writable.end()}}t.WriteableStreamMessageWriter=WriteableStreamMessageWriter},6622:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Message=t.NotificationType9=t.NotificationType8=t.NotificationType7=t.NotificationType6=t.NotificationType5=t.NotificationType4=t.NotificationType3=t.NotificationType2=t.NotificationType1=t.NotificationType0=t.NotificationType=t.RequestType9=t.RequestType8=t.RequestType7=t.RequestType6=t.RequestType5=t.RequestType4=t.RequestType3=t.RequestType2=t.RequestType1=t.RequestType=t.RequestType0=t.AbstractMessageSignature=t.ParameterStructures=t.ResponseError=t.ErrorCodes=void 0;const r=n(18294);var i;(function(e){e.ParseError=-32700;e.InvalidRequest=-32600;e.MethodNotFound=-32601;e.InvalidParams=-32602;e.InternalError=-32603;e.jsonrpcReservedErrorRangeStart=-32099;e.serverErrorStart=-32099;e.MessageWriteError=-32099;e.MessageReadError=-32098;e.PendingResponseRejected=-32097;e.ConnectionInactive=-32096;e.ServerNotInitialized=-32002;e.UnknownErrorCode=-32001;e.jsonrpcReservedErrorRangeEnd=-32e3;e.serverErrorEnd=-32e3})(i=t.ErrorCodes||(t.ErrorCodes={}));class ResponseError extends Error{constructor(e,t,n){super(t);this.code=r.number(e)?e:i.UnknownErrorCode;this.data=n;Object.setPrototypeOf(this,ResponseError.prototype)}toJson(){const e={code:this.code,message:this.message};if(this.data!==undefined){e.data=this.data}return e}}t.ResponseError=ResponseError;class ParameterStructures{constructor(e){this.kind=e}static is(e){return e===ParameterStructures.auto||e===ParameterStructures.byName||e===ParameterStructures.byPosition}toString(){return this.kind}}t.ParameterStructures=ParameterStructures;ParameterStructures.auto=new ParameterStructures("auto");ParameterStructures.byPosition=new ParameterStructures("byPosition");ParameterStructures.byName=new ParameterStructures("byName");class AbstractMessageSignature{constructor(e,t){this.method=e;this.numberOfParams=t}get parameterStructures(){return ParameterStructures.auto}}t.AbstractMessageSignature=AbstractMessageSignature;class RequestType0 extends AbstractMessageSignature{constructor(e){super(e,0)}}t.RequestType0=RequestType0;class RequestType extends AbstractMessageSignature{constructor(e,t=ParameterStructures.auto){super(e,1);this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}}t.RequestType=RequestType;class RequestType1 extends AbstractMessageSignature{constructor(e,t=ParameterStructures.auto){super(e,1);this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}}t.RequestType1=RequestType1;class RequestType2 extends AbstractMessageSignature{constructor(e){super(e,2)}}t.RequestType2=RequestType2;class RequestType3 extends AbstractMessageSignature{constructor(e){super(e,3)}}t.RequestType3=RequestType3;class RequestType4 extends AbstractMessageSignature{constructor(e){super(e,4)}}t.RequestType4=RequestType4;class RequestType5 extends AbstractMessageSignature{constructor(e){super(e,5)}}t.RequestType5=RequestType5;class RequestType6 extends AbstractMessageSignature{constructor(e){super(e,6)}}t.RequestType6=RequestType6;class RequestType7 extends AbstractMessageSignature{constructor(e){super(e,7)}}t.RequestType7=RequestType7;class RequestType8 extends AbstractMessageSignature{constructor(e){super(e,8)}}t.RequestType8=RequestType8;class RequestType9 extends AbstractMessageSignature{constructor(e){super(e,9)}}t.RequestType9=RequestType9;class NotificationType extends AbstractMessageSignature{constructor(e,t=ParameterStructures.auto){super(e,1);this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}}t.NotificationType=NotificationType;class NotificationType0 extends AbstractMessageSignature{constructor(e){super(e,0)}}t.NotificationType0=NotificationType0;class NotificationType1 extends AbstractMessageSignature{constructor(e,t=ParameterStructures.auto){super(e,1);this._parameterStructures=t}get parameterStructures(){return this._parameterStructures}}t.NotificationType1=NotificationType1;class NotificationType2 extends AbstractMessageSignature{constructor(e){super(e,2)}}t.NotificationType2=NotificationType2;class NotificationType3 extends AbstractMessageSignature{constructor(e){super(e,3)}}t.NotificationType3=NotificationType3;class NotificationType4 extends AbstractMessageSignature{constructor(e){super(e,4)}}t.NotificationType4=NotificationType4;class NotificationType5 extends AbstractMessageSignature{constructor(e){super(e,5)}}t.NotificationType5=NotificationType5;class NotificationType6 extends AbstractMessageSignature{constructor(e){super(e,6)}}t.NotificationType6=NotificationType6;class NotificationType7 extends AbstractMessageSignature{constructor(e){super(e,7)}}t.NotificationType7=NotificationType7;class NotificationType8 extends AbstractMessageSignature{constructor(e){super(e,8)}}t.NotificationType8=NotificationType8;class NotificationType9 extends AbstractMessageSignature{constructor(e){super(e,9)}}t.NotificationType9=NotificationType9;var s;(function(e){function isRequest(e){const t=e;return t&&r.string(t.method)&&(r.string(t.id)||r.number(t.id))}e.isRequest=isRequest;function isNotification(e){const t=e;return t&&r.string(t.method)&&e.id===void 0}e.isNotification=isNotification;function isResponse(e){const t=e;return t&&(t.result!==void 0||!!t.error)&&(r.string(t.id)||r.number(t.id)||t.id===null)}e.isResponse=isResponse})(s=t.Message||(t.Message={}))},83996:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});let n;function RAL(){if(n===undefined){throw new Error(`No runtime abstraction layer installed`)}return n}(function(e){function install(e){if(e===undefined){throw new Error(`No runtime abstraction layer provided`)}n=e}e.install=install})(RAL||(RAL={}));t["default"]=RAL},78264:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Semaphore=void 0;const r=n(83996);class Semaphore{constructor(e=1){if(e<=0){throw new Error("Capacity must be greater than 0")}this._capacity=e;this._active=0;this._waiting=[]}lock(e){return new Promise(((t,n)=>{this._waiting.push({thunk:e,resolve:t,reject:n});this.runNext()}))}get active(){return this._active}runNext(){if(this._waiting.length===0||this._active===this._capacity){return}(0,r.default)().timer.setImmediate((()=>this.doRunNext()))}doRunNext(){if(this._waiting.length===0||this._active===this._capacity){return}const e=this._waiting.shift();this._active++;if(this._active>this._capacity){throw new Error(`To many thunks active`)}try{const t=e.thunk();if(t instanceof Promise){t.then((t=>{this._active--;e.resolve(t);this.runNext()}),(t=>{this._active--;e.reject(t);this.runNext()}))}else{this._active--;e.resolve(t);this.runNext()}}catch(t){this._active--;e.reject(t);this.runNext()}}}t.Semaphore=Semaphore},41983:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){if(r===undefined)r=n;var i=Object.getOwnPropertyDescriptor(t,n);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[n]}}}Object.defineProperty(e,r,i)}:function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]});var i=this&&this.__exportStar||function(e,t){for(var n in e)if(n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n))r(t,e,n)};Object.defineProperty(t,"__esModule",{value:true});t.createMessageConnection=t.createServerSocketTransport=t.createClientSocketTransport=t.createServerPipeTransport=t.createClientPipeTransport=t.generateRandomPipeName=t.StreamMessageWriter=t.StreamMessageReader=t.SocketMessageWriter=t.SocketMessageReader=t.IPCMessageWriter=t.IPCMessageReader=void 0;const s=n(20498);s.default.install();const o=n(3301);const a=n(71017);const c=n(22037);const u=n(6113);const l=n(41808);i(n(3301),t);class IPCMessageReader extends o.AbstractMessageReader{constructor(e){super();this.process=e;let t=this.process;t.on("error",(e=>this.fireError(e)));t.on("close",(()=>this.fireClose()))}listen(e){this.process.on("message",e);return o.Disposable.create((()=>this.process.off("message",e)))}}t.IPCMessageReader=IPCMessageReader;class IPCMessageWriter extends o.AbstractMessageWriter{constructor(e){super();this.process=e;this.errorCount=0;let t=this.process;t.on("error",(e=>this.fireError(e)));t.on("close",(()=>this.fireClose))}write(e){try{if(typeof this.process.send==="function"){this.process.send(e,undefined,undefined,(t=>{if(t){this.errorCount++;this.handleError(t,e)}else{this.errorCount=0}}))}return Promise.resolve()}catch(t){this.handleError(t,e);return Promise.reject(t)}}handleError(e,t){this.errorCount++;this.fireError(e,t,this.errorCount)}end(){}}t.IPCMessageWriter=IPCMessageWriter;class SocketMessageReader extends o.ReadableStreamMessageReader{constructor(e,t="utf-8"){super((0,s.default)().stream.asReadableStream(e),t)}}t.SocketMessageReader=SocketMessageReader;class SocketMessageWriter extends o.WriteableStreamMessageWriter{constructor(e,t){super((0,s.default)().stream.asWritableStream(e),t);this.socket=e}dispose(){super.dispose();this.socket.destroy()}}t.SocketMessageWriter=SocketMessageWriter;class StreamMessageReader extends o.ReadableStreamMessageReader{constructor(e,t){super((0,s.default)().stream.asReadableStream(e),t)}}t.StreamMessageReader=StreamMessageReader;class StreamMessageWriter extends o.WriteableStreamMessageWriter{constructor(e,t){super((0,s.default)().stream.asWritableStream(e),t)}}t.StreamMessageWriter=StreamMessageWriter;const d=process.env["XDG_RUNTIME_DIR"];const f=new Map([["linux",107],["darwin",103]]);function generateRandomPipeName(){const e=(0,u.randomBytes)(21).toString("hex");if(process.platform==="win32"){return`\\\\.\\pipe\\vscode-jsonrpc-${e}-sock`}let t;if(d){t=a.join(d,`vscode-ipc-${e}.sock`)}else{t=a.join(c.tmpdir(),`vscode-${e}.sock`)}const n=f.get(process.platform);if(n!==undefined&&t.length>=n){(0,s.default)().console.warn(`WARNING: IPC handle "${t}" is longer than ${n} characters.`)}return t}t.generateRandomPipeName=generateRandomPipeName;function createClientPipeTransport(e,t="utf-8"){let n;const r=new Promise(((e,t)=>{n=e}));return new Promise(((i,s)=>{let o=(0,l.createServer)((e=>{o.close();n([new SocketMessageReader(e,t),new SocketMessageWriter(e,t)])}));o.on("error",s);o.listen(e,(()=>{o.removeListener("error",s);i({onConnected:()=>r})}))}))}t.createClientPipeTransport=createClientPipeTransport;function createServerPipeTransport(e,t="utf-8"){const n=(0,l.createConnection)(e);return[new SocketMessageReader(n,t),new SocketMessageWriter(n,t)]}t.createServerPipeTransport=createServerPipeTransport;function createClientSocketTransport(e,t="utf-8"){let n;const r=new Promise(((e,t)=>{n=e}));return new Promise(((i,s)=>{const o=(0,l.createServer)((e=>{o.close();n([new SocketMessageReader(e,t),new SocketMessageWriter(e,t)])}));o.on("error",s);o.listen(e,"127.0.0.1",(()=>{o.removeListener("error",s);i({onConnected:()=>r})}))}))}t.createClientSocketTransport=createClientSocketTransport;function createServerSocketTransport(e,t="utf-8"){const n=(0,l.createConnection)(e,"127.0.0.1");return[new SocketMessageReader(n,t),new SocketMessageWriter(n,t)]}t.createServerSocketTransport=createServerSocketTransport;function isReadableStream(e){const t=e;return t.read!==undefined&&t.addListener!==undefined}function isWritableStream(e){const t=e;return t.write!==undefined&&t.addListener!==undefined}function createMessageConnection(e,t,n,r){if(!n){n=o.NullLogger}const i=isReadableStream(e)?new StreamMessageReader(e):e;const s=isWritableStream(t)?new StreamMessageWriter(t):t;if(o.ConnectionStrategy.is(r)){r={connectionStrategy:r}}return(0,o.createMessageConnection)(i,s,n,r)}t.createMessageConnection=createMessageConnection},20498:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const r=n(83996);const i=n(73837);const s=n(24788);const o=n(11228);class MessageBuffer extends o.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return MessageBuffer.emptyBuffer}fromString(e,t){return Buffer.from(e,t)}toString(e,t){if(e instanceof Buffer){return e.toString(t)}else{return new i.TextDecoder(t).decode(e)}}asNative(e,t){if(t===undefined){return e instanceof Buffer?e:Buffer.from(e)}else{return e instanceof Buffer?e.slice(0,t):Buffer.from(e,0,t)}}allocNative(e){return Buffer.allocUnsafe(e)}}MessageBuffer.emptyBuffer=Buffer.allocUnsafe(0);class ReadableStreamWrapper{constructor(e){this.stream=e}onClose(e){this.stream.on("close",e);return s.Disposable.create((()=>this.stream.off("close",e)))}onError(e){this.stream.on("error",e);return s.Disposable.create((()=>this.stream.off("error",e)))}onEnd(e){this.stream.on("end",e);return s.Disposable.create((()=>this.stream.off("end",e)))}onData(e){this.stream.on("data",e);return s.Disposable.create((()=>this.stream.off("data",e)))}}class WritableStreamWrapper{constructor(e){this.stream=e}onClose(e){this.stream.on("close",e);return s.Disposable.create((()=>this.stream.off("close",e)))}onError(e){this.stream.on("error",e);return s.Disposable.create((()=>this.stream.off("error",e)))}onEnd(e){this.stream.on("end",e);return s.Disposable.create((()=>this.stream.off("end",e)))}write(e,t){return new Promise(((n,r)=>{const callback=e=>{if(e===undefined||e===null){n()}else{r(e)}};if(typeof e==="string"){this.stream.write(e,t,callback)}else{this.stream.write(e,callback)}}))}end(){this.stream.end()}}const a=Object.freeze({messageBuffer:Object.freeze({create:e=>new MessageBuffer(e)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(e,t)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(e,undefined,0),t.charset))}catch(e){return Promise.reject(e)}}}),decoder:Object.freeze({name:"application/json",decode:(e,t)=>{try{if(e instanceof Buffer){return Promise.resolve(JSON.parse(e.toString(t.charset)))}else{return Promise.resolve(JSON.parse(new i.TextDecoder(t.charset).decode(e)))}}catch(e){return Promise.reject(e)}}})}),stream:Object.freeze({asReadableStream:e=>new ReadableStreamWrapper(e),asWritableStream:e=>new WritableStreamWrapper(e)}),console:console,timer:Object.freeze({setTimeout(e,t,...n){const r=setTimeout(e,t,...n);return{dispose:()=>clearTimeout(r)}},setImmediate(e,...t){const n=setImmediate(e,...t);return{dispose:()=>clearImmediate(n)}},setInterval(e,t,...n){const r=setInterval(e,t,...n);return{dispose:()=>clearInterval(r)}}})});function RIL(){return a}(function(e){function install(){r.default.install(a)}e.install=install})(RIL||(RIL={}));t["default"]=RIL},28186:(e,t,n)=>{"use strict";e.exports=n(41983)},12990:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){if(r===undefined)r=n;var i=Object.getOwnPropertyDescriptor(t,n);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[n]}}}Object.defineProperty(e,r,i)}:function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]});var i=this&&this.__exportStar||function(e,t){for(var n in e)if(n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n))r(t,e,n)};Object.defineProperty(t,"__esModule",{value:true});t.DiagnosticPullMode=t.vsdiag=void 0;i(n(3302),t);i(n(86389),t);var s=n(33646);Object.defineProperty(t,"vsdiag",{enumerable:true,get:function(){return s.vsdiag}});Object.defineProperty(t,"DiagnosticPullMode",{enumerable:true,get:function(){return s.DiagnosticPullMode}});i(n(84829),t)},27271:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CallHierarchyFeature=void 0;const r=n(76062);const i=n(3302);const s=n(86389);class CallHierarchyProvider{constructor(e){this.client=e;this.middleware=e.middleware}prepareCallHierarchy(e,t,n){const r=this.client;const s=this.middleware;const prepareCallHierarchy=(e,t,n)=>{const s=r.code2ProtocolConverter.asTextDocumentPositionParams(e,t);return r.sendRequest(i.CallHierarchyPrepareRequest.type,s,n).then((e=>{if(n.isCancellationRequested){return null}return r.protocol2CodeConverter.asCallHierarchyItems(e,n)}),(e=>r.handleFailedRequest(i.CallHierarchyPrepareRequest.type,n,e,null)))};return s.prepareCallHierarchy?s.prepareCallHierarchy(e,t,n,prepareCallHierarchy):prepareCallHierarchy(e,t,n)}provideCallHierarchyIncomingCalls(e,t){const n=this.client;const r=this.middleware;const provideCallHierarchyIncomingCalls=(e,t)=>{const r={item:n.code2ProtocolConverter.asCallHierarchyItem(e)};return n.sendRequest(i.CallHierarchyIncomingCallsRequest.type,r,t).then((e=>{if(t.isCancellationRequested){return null}return n.protocol2CodeConverter.asCallHierarchyIncomingCalls(e,t)}),(e=>n.handleFailedRequest(i.CallHierarchyIncomingCallsRequest.type,t,e,null)))};return r.provideCallHierarchyIncomingCalls?r.provideCallHierarchyIncomingCalls(e,t,provideCallHierarchyIncomingCalls):provideCallHierarchyIncomingCalls(e,t)}provideCallHierarchyOutgoingCalls(e,t){const n=this.client;const r=this.middleware;const provideCallHierarchyOutgoingCalls=(e,t)=>{const r={item:n.code2ProtocolConverter.asCallHierarchyItem(e)};return n.sendRequest(i.CallHierarchyOutgoingCallsRequest.type,r,t).then((e=>{if(t.isCancellationRequested){return null}return n.protocol2CodeConverter.asCallHierarchyOutgoingCalls(e,t)}),(e=>n.handleFailedRequest(i.CallHierarchyOutgoingCallsRequest.type,t,e,null)))};return r.provideCallHierarchyOutgoingCalls?r.provideCallHierarchyOutgoingCalls(e,t,provideCallHierarchyOutgoingCalls):provideCallHierarchyOutgoingCalls(e,t)}}class CallHierarchyFeature extends s.TextDocumentLanguageFeature{constructor(e){super(e,i.CallHierarchyPrepareRequest.type)}fillClientCapabilities(e){const t=e;const n=(0,s.ensure)((0,s.ensure)(t,"textDocument"),"callHierarchy");n.dynamicRegistration=true}initialize(e,t){const[n,r]=this.getRegistration(t,e.callHierarchyProvider);if(!n||!r){return}this.register({id:n,registerOptions:r})}registerLanguageProvider(e){const t=this._client;const n=new CallHierarchyProvider(t);return[r.languages.registerCallHierarchyProvider(this._client.protocol2CodeConverter.asDocumentSelector(e.documentSelector),n),n]}}t.CallHierarchyFeature=CallHierarchyFeature},84829:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ProposedFeatures=t.BaseLanguageClient=t.MessageTransports=t.SuspendMode=t.State=t.CloseAction=t.ErrorAction=t.RevealOutputChannelOn=void 0;const r=n(76062);const i=n(3302);const s=n(87266);const o=n(45522);const a=n(42173);const c=n(93741);const u=n(56257);const l=n(54653);const d=n(86389);const f=n(33646);const p=n(46999);const h=n(23209);const m=n(97123);const g=n(8814);const v=n(76785);const y=n(68905);const b=n(33043);const _=n(22018);const S=n(19853);const w=n(24428);const T=n(25159);const k=n(66840);const C=n(95548);const E=n(85122);const R=n(8322);const x=n(86009);const O=n(5543);const D=n(52988);const P=n(89260);const I=n(15979);const M=n(20953);const N=n(56949);const A=n(1607);const F=n(7259);const L=n(37262);const j=n(76174);const q=n(27271);const $=n(32957);const U=n(99322);const H=n(91121);const W=n(96433);const B=n(82506);const Y=n(62832);var V;(function(e){e[e["Info"]=1]="Info";e[e["Warn"]=2]="Warn";e[e["Error"]=3]="Error";e[e["Never"]=4]="Never"})(V=t.RevealOutputChannelOn||(t.RevealOutputChannelOn={}));var K;(function(e){e[e["Continue"]=1]="Continue";e[e["Shutdown"]=2]="Shutdown"})(K=t.ErrorAction||(t.ErrorAction={}));var G;(function(e){e[e["DoNotRestart"]=1]="DoNotRestart";e[e["Restart"]=2]="Restart"})(G=t.CloseAction||(t.CloseAction={}));var z;(function(e){e[e["Stopped"]=1]="Stopped";e[e["Starting"]=3]="Starting";e[e["Running"]=2]="Running"})(z=t.State||(t.State={}));var J;(function(e){e["off"]="off";e["on"]="on"})(J=t.SuspendMode||(t.SuspendMode={}));class DefaultErrorHandler{constructor(e,t){this.client=e;this.maxRestartCount=t;this.restarts=[]}error(e,t,n){if(n&&n<=3){return{action:K.Continue}}return{action:K.Shutdown}}closed(){this.restarts.push(Date.now());if(this.restarts.length<=this.maxRestartCount){return{action:G.Restart}}else{let e=this.restarts[this.restarts.length-1]-this.restarts[0];if(e<=3*60*1e3){return{action:G.DoNotRestart,message:`The ${this.client.name} server crashed ${this.maxRestartCount+1} times in the last 3 minutes. The server will not be restarted. See the output for more information.`}}else{this.restarts.shift();return{action:G.Restart}}}}}var X;(function(e){e["Initial"]="initial";e["Starting"]="starting";e["StartFailed"]="startFailed";e["Running"]="running";e["Stopping"]="stopping";e["Stopped"]="stopped"})(X||(X={}));var Q;(function(e){function is(e){let t=e;return t&&i.MessageReader.is(e.reader)&&i.MessageWriter.is(e.writer)}e.is=is})(Q=t.MessageTransports||(t.MessageTransports={}));class BaseLanguageClient{constructor(e,t,n){this._traceFormat=i.TraceFormat.Text;this._diagnosticQueue=new Map;this._diagnosticQueueState={state:"idle"};this._features=[];this._dynamicFeatures=new Map;this.workspaceEditLock=new c.Semaphore(1);this._id=e;this._name=t;n=n||{};const r={isTrusted:false,supportHtml:false};if(n.markdown!==undefined){r.isTrusted=n.markdown.isTrusted===true;r.supportHtml=n.markdown.supportHtml===true}this._clientOptions={documentSelector:n.documentSelector??[],synchronize:n.synchronize??{},diagnosticCollectionName:n.diagnosticCollectionName,outputChannelName:n.outputChannelName??this._name,revealOutputChannelOn:n.revealOutputChannelOn??V.Error,stdioEncoding:n.stdioEncoding??"utf8",initializationOptions:n.initializationOptions,initializationFailedHandler:n.initializationFailedHandler,progressOnInitialization:!!n.progressOnInitialization,errorHandler:n.errorHandler??this.createDefaultErrorHandler(n.connectionOptions?.maxRestartCount),middleware:n.middleware??{},uriConverters:n.uriConverters,workspaceFolder:n.workspaceFolder,connectionOptions:n.connectionOptions,markdown:r,diagnosticPullOptions:n.diagnosticPullOptions??{onChange:true,onSave:false},notebookDocumentOptions:n.notebookDocumentOptions??{}};this._clientOptions.synchronize=this._clientOptions.synchronize||{};this._state=X.Initial;this._ignoredRegistrations=new Set;this._listeners=[];this._notificationHandlers=new Map;this._pendingNotificationHandlers=new Map;this._notificationDisposables=new Map;this._requestHandlers=new Map;this._pendingRequestHandlers=new Map;this._requestDisposables=new Map;this._progressHandlers=new Map;this._pendingProgressHandlers=new Map;this._progressDisposables=new Map;this._connection=undefined;this._initializeResult=undefined;if(n.outputChannel){this._outputChannel=n.outputChannel;this._disposeOutputChannel=false}else{this._outputChannel=undefined;this._disposeOutputChannel=true}this._traceOutputChannel=n.traceOutputChannel;this._diagnostics=undefined;this._fileEvents=[];this._fileEventDelayer=new c.Delayer(250);this._onStop=undefined;this._telemetryEmitter=new i.Emitter;this._stateChangeEmitter=new i.Emitter;this._trace=i.Trace.Off;this._tracer={log:(e,t)=>{if(a.string(e)){this.logTrace(e,t)}else{this.logObjectTrace(e)}}};this._c2p=s.createConverter(n.uriConverters?n.uriConverters.code2Protocol:undefined);this._p2c=o.createConverter(n.uriConverters?n.uriConverters.protocol2Code:undefined,this._clientOptions.markdown.isTrusted,this._clientOptions.markdown.supportHtml);this._syncedDocuments=new Map;this.registerBuiltinFeatures()}get name(){return this._name}get middleware(){return this._clientOptions.middleware??Object.create(null)}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){if(!this._outputChannel){this._outputChannel=r.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)}return this._outputChannel}get traceOutputChannel(){if(this._traceOutputChannel){return this._traceOutputChannel}return this.outputChannel}get diagnostics(){return this._diagnostics}get state(){return this.getPublicState()}get $state(){return this._state}set $state(e){let t=this.getPublicState();this._state=e;let n=this.getPublicState();if(n!==t){this._stateChangeEmitter.fire({oldState:t,newState:n})}}getPublicState(){switch(this.$state){case X.Starting:return z.Starting;case X.Running:return z.Running;default:return z.Stopped}}get initializeResult(){return this._initializeResult}async sendRequest(e,...t){if(this.$state===X.StartFailed||this.$state===X.Stopping||this.$state===X.Stopped){return Promise.reject(new i.ResponseError(i.ErrorCodes.ConnectionInactive,`Client is not running`))}try{const n=await this.$start();await this.forceDocumentSync();return n.sendRequest(e,...t)}catch(t){this.error(`Sending request ${a.string(e)?e:e.method} failed.`,t);throw t}}onRequest(e,t){const n=typeof e==="string"?e:e.method;this._requestHandlers.set(n,t);const r=this.activeConnection();let i;if(r!==undefined){this._requestDisposables.set(n,r.onRequest(e,t));i={dispose:()=>{const e=this._requestDisposables.get(n);if(e!==undefined){e.dispose();this._requestDisposables.delete(n)}}}}else{this._pendingRequestHandlers.set(n,t);i={dispose:()=>{this._pendingRequestHandlers.delete(n);const e=this._requestDisposables.get(n);if(e!==undefined){e.dispose();this._requestDisposables.delete(n)}}}}return{dispose:()=>{this._requestHandlers.delete(n);i.dispose()}}}async sendNotification(e,t){if(this.$state===X.StartFailed||this.$state===X.Stopping||this.$state===X.Stopped){return Promise.reject(new i.ResponseError(i.ErrorCodes.ConnectionInactive,`Client is not running`))}try{const n=await this.$start();await this.forceDocumentSync();return n.sendNotification(e,t)}catch(t){this.error(`Sending notification ${a.string(e)?e:e.method} failed.`,t);throw t}}onNotification(e,t){const n=typeof e==="string"?e:e.method;this._notificationHandlers.set(n,t);const r=this.activeConnection();let i;if(r!==undefined){this._notificationDisposables.set(n,r.onNotification(e,t));i={dispose:()=>{const e=this._notificationDisposables.get(n);if(e!==undefined){e.dispose();this._notificationDisposables.delete(n)}}}}else{this._pendingNotificationHandlers.set(n,t);i={dispose:()=>{this._pendingNotificationHandlers.delete(n);const e=this._notificationDisposables.get(n);if(e!==undefined){e.dispose();this._notificationDisposables.delete(n)}}}}return{dispose:()=>{this._notificationHandlers.delete(n);i.dispose()}}}async sendProgress(e,t,n){if(this.$state===X.StartFailed||this.$state===X.Stopping||this.$state===X.Stopped){return Promise.reject(new i.ResponseError(i.ErrorCodes.ConnectionInactive,`Client is not running`))}try{const r=await this.$start();return r.sendProgress(e,t,n)}catch(e){this.error(`Sending progress for token ${t} failed.`,e);throw e}}onProgress(e,t,n){this._progressHandlers.set(t,{type:e,handler:n});const r=this.activeConnection();let s;const o=this._clientOptions.middleware?.handleWorkDoneProgress;const a=i.WorkDoneProgress.is(e)&&o!==undefined?e=>{o(t,e,(()=>n(e)))}:n;if(r!==undefined){this._progressDisposables.set(t,r.onProgress(e,t,a));s={dispose:()=>{const e=this._progressDisposables.get(t);if(e!==undefined){e.dispose();this._progressDisposables.delete(t)}}}}else{this._pendingProgressHandlers.set(t,{type:e,handler:n});s={dispose:()=>{this._pendingProgressHandlers.delete(t);const e=this._progressDisposables.get(t);if(e!==undefined){e.dispose();this._progressDisposables.delete(t)}}}}return{dispose:()=>{this._progressHandlers.delete(t);s.dispose()}}}createDefaultErrorHandler(e){if(e!==undefined&&e<0){throw new Error(`Invalid maxRestartCount: ${e}`)}return new DefaultErrorHandler(this,e??4)}async setTrace(e){this._trace=e;const t=this.activeConnection();if(t!==undefined){await t.trace(this._trace,this._tracer,{sendNotification:false,traceFormat:this._traceFormat})}}data2String(e){if(e instanceof i.ResponseError){const t=e;return`  Message: ${t.message}\n  Code: ${t.code} ${t.data?"\n"+t.data.toString():""}`}if(e instanceof Error){if(a.string(e.stack)){return e.stack}return e.message}if(a.string(e)){return e}return e.toString()}info(e,t,n=true){this.outputChannel.appendLine(`[Info  - ${(new Date).toLocaleTimeString()}] ${e}`);if(t!==null&&t!==undefined){this.outputChannel.appendLine(this.data2String(t))}if(n&&this._clientOptions.revealOutputChannelOn<=V.Info){this.showNotificationMessage(i.MessageType.Info,e)}}warn(e,t,n=true){this.outputChannel.appendLine(`[Warn  - ${(new Date).toLocaleTimeString()}] ${e}`);if(t!==null&&t!==undefined){this.outputChannel.appendLine(this.data2String(t))}if(n&&this._clientOptions.revealOutputChannelOn<=V.Warn){this.showNotificationMessage(i.MessageType.Warning,e)}}error(e,t,n=true){this.outputChannel.appendLine(`[Error - ${(new Date).toLocaleTimeString()}] ${e}`);if(t!==null&&t!==undefined){this.outputChannel.appendLine(this.data2String(t))}if(n==="force"||n&&this._clientOptions.revealOutputChannelOn<=V.Error){this.showNotificationMessage(i.MessageType.Error,e)}}showNotificationMessage(e,t){t=t??"A request has failed. See the output for more information.";const n=e===i.MessageType.Error?r.window.showErrorMessage:e===i.MessageType.Warning?r.window.showWarningMessage:r.window.showInformationMessage;void n(t,"Go to output").then((e=>{if(e!==undefined){this.outputChannel.show(true)}}))}logTrace(e,t){this.traceOutputChannel.appendLine(`[Trace - ${(new Date).toLocaleTimeString()}] ${e}`);if(t){this.traceOutputChannel.appendLine(this.data2String(t))}}logObjectTrace(e){if(e.isLSPMessage&&e.type){this.traceOutputChannel.append(`[LSP   - ${(new Date).toLocaleTimeString()}] `)}else{this.traceOutputChannel.append(`[Trace - ${(new Date).toLocaleTimeString()}] `)}if(e){this.traceOutputChannel.appendLine(`${JSON.stringify(e)}`)}}needsStart(){return this.$state===X.Initial||this.$state===X.Stopping||this.$state===X.Stopped}needsStop(){return this.$state===X.Starting||this.$state===X.Running}activeConnection(){return this.$state===X.Running&&this._connection!==undefined?this._connection:undefined}isRunning(){return this.$state===X.Running}async start(){if(this._disposed==="disposing"||this._disposed==="disposed"){throw new Error(`Client got disposed and can't be restarted.`)}if(this.$state===X.Stopping){throw new Error(`Client is currently stopping. Can only restart a full stopped client`)}if(this._onStart!==undefined){return this._onStart}const[e,t,n]=this.createOnStartPromise();this._onStart=e;if(this._diagnostics===undefined){this._diagnostics=this._clientOptions.diagnosticCollectionName?r.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):r.languages.createDiagnosticCollection()}for(const[e,t]of this._notificationHandlers){if(!this._pendingNotificationHandlers.has(e)){this._pendingNotificationHandlers.set(e,t)}}for(const[e,t]of this._requestHandlers){if(!this._pendingRequestHandlers.has(e)){this._pendingRequestHandlers.set(e,t)}}for(const[e,t]of this._progressHandlers){if(!this._pendingProgressHandlers.has(e)){this._pendingProgressHandlers.set(e,t)}}this.$state=X.Starting;try{const e=await this.createConnection();e.onNotification(i.LogMessageNotification.type,(e=>{switch(e.type){case i.MessageType.Error:this.error(e.message,undefined,false);break;case i.MessageType.Warning:this.warn(e.message,undefined,false);break;case i.MessageType.Info:this.info(e.message,undefined,false);break;default:this.outputChannel.appendLine(e.message)}}));e.onNotification(i.ShowMessageNotification.type,(e=>{switch(e.type){case i.MessageType.Error:void r.window.showErrorMessage(e.message);break;case i.MessageType.Warning:void r.window.showWarningMessage(e.message);break;case i.MessageType.Info:void r.window.showInformationMessage(e.message);break;default:void r.window.showInformationMessage(e.message)}}));e.onRequest(i.ShowMessageRequest.type,(e=>{let t;switch(e.type){case i.MessageType.Error:t=r.window.showErrorMessage;break;case i.MessageType.Warning:t=r.window.showWarningMessage;break;case i.MessageType.Info:t=r.window.showInformationMessage;break;default:t=r.window.showInformationMessage}let n=e.actions||[];return t(e.message,...n)}));e.onNotification(i.TelemetryEventNotification.type,(e=>{this._telemetryEmitter.fire(e)}));e.onRequest(i.ShowDocumentRequest.type,(async e=>{const showDocument=async e=>{const t=this.protocol2CodeConverter.asUri(e.uri);try{if(e.external===true){const e=await r.env.openExternal(t);return{success:e}}else{const n={};if(e.selection!==undefined){n.selection=this.protocol2CodeConverter.asRange(e.selection)}if(e.takeFocus===undefined||e.takeFocus===false){n.preserveFocus=true}else if(e.takeFocus===true){n.preserveFocus=false}await r.window.showTextDocument(t,n);return{success:true}}}catch(e){return{success:false}}};const t=this._clientOptions.middleware.window?.showDocument;if(t!==undefined){return t(e,showDocument)}else{return showDocument(e)}}));e.listen();await this.initialize(e);t()}catch(e){this.$state=X.StartFailed;this.error(`${this._name} client: couldn't create connection to server.`,e,"force");n(e)}return this._onStart}createOnStartPromise(){let e;let t;const n=new Promise(((n,r)=>{e=n;t=r}));return[n,e,t]}async initialize(e){this.refreshTrace(e,false);const t=this._clientOptions.initializationOptions;const[n,s]=this._clientOptions.workspaceFolder!==undefined?[this._clientOptions.workspaceFolder.uri.fsPath,[{uri:this._c2p.asUri(this._clientOptions.workspaceFolder.uri),name:this._clientOptions.workspaceFolder.name}]]:[this._clientGetRootPath(),null];const o={processId:null,clientInfo:{name:r.env.appName,version:r.version},locale:this.getLocale(),rootPath:n?n:null,rootUri:n?this._c2p.asUri(r.Uri.file(n)):null,capabilities:this.computeClientCapabilities(),initializationOptions:a.func(t)?t():t,trace:i.Trace.toString(this._trace),workspaceFolders:s};this.fillInitializeParams(o);if(this._clientOptions.progressOnInitialization){const t=u.generateUuid();const n=new l.ProgressPart(e,t);o.workDoneToken=t;try{const t=await this.doInitialize(e,o);n.done();return t}catch(e){n.cancel();throw e}}else{return this.doInitialize(e,o)}}async doInitialize(e,t){try{const n=await e.initialize(t);if(n.capabilities.positionEncoding!==undefined&&n.capabilities.positionEncoding!==i.PositionEncodingKind.UTF16){throw new Error(`Unsupported position encoding (${n.capabilities.positionEncoding}) received from server ${this.name}`)}this._initializeResult=n;this.$state=X.Running;let r=undefined;if(a.number(n.capabilities.textDocumentSync)){if(n.capabilities.textDocumentSync===i.TextDocumentSyncKind.None){r={openClose:false,change:i.TextDocumentSyncKind.None,save:undefined}}else{r={openClose:true,change:n.capabilities.textDocumentSync,save:{includeText:false}}}}else if(n.capabilities.textDocumentSync!==undefined&&n.capabilities.textDocumentSync!==null){r=n.capabilities.textDocumentSync}this._capabilities=Object.assign({},n.capabilities,{resolvedTextDocumentSync:r});e.onNotification(i.PublishDiagnosticsNotification.type,(e=>this.handleDiagnostics(e)));e.onRequest(i.RegistrationRequest.type,(e=>this.handleRegistrationRequest(e)));e.onRequest("client/registerFeature",(e=>this.handleRegistrationRequest(e)));e.onRequest(i.UnregistrationRequest.type,(e=>this.handleUnregistrationRequest(e)));e.onRequest("client/unregisterFeature",(e=>this.handleUnregistrationRequest(e)));e.onRequest(i.ApplyWorkspaceEditRequest.type,(e=>this.handleApplyWorkspaceEdit(e)));for(const[t,n]of this._pendingNotificationHandlers){this._notificationDisposables.set(t,e.onNotification(t,n))}this._pendingNotificationHandlers.clear();for(const[t,n]of this._pendingRequestHandlers){this._requestDisposables.set(t,e.onRequest(t,n))}this._pendingRequestHandlers.clear();for(const[t,n]of this._pendingProgressHandlers){this._progressDisposables.set(t,e.onProgress(n.type,t,n.handler))}this._pendingProgressHandlers.clear();await e.sendNotification(i.InitializedNotification.type,{});this.hookFileEvents(e);this.hookConfigurationChanged(e);this.initializeFeatures(e);return n}catch(t){if(this._clientOptions.initializationFailedHandler){if(this._clientOptions.initializationFailedHandler(t)){void this.initialize(e)}else{void this.stop()}}else if(t instanceof i.ResponseError&&t.data&&t.data.retry){void r.window.showErrorMessage(t.message,{title:"Retry",id:"retry"}).then((t=>{if(t&&t.id==="retry"){void this.initialize(e)}else{void this.stop()}}))}else{if(t&&t.message){void r.window.showErrorMessage(t.message)}this.error("Server initialization failed.",t);void this.stop()}throw t}}_clientGetRootPath(){let e=r.workspace.workspaceFolders;if(!e||e.length===0){return undefined}let t=e[0];if(t.uri.scheme==="file"){return t.uri.fsPath}return undefined}stop(e=2e3){return this.shutdown("stop",e)}dispose(e=2e3){try{this._disposed="disposing";return this.stop(e)}finally{this._disposed="disposed"}}async shutdown(e,t){if(this.$state===X.Stopped||this.$state===X.Initial){return}if(this.$state===X.Stopping){if(this._onStop!==undefined){return this._onStop}else{throw new Error(`Client is stopping but no stop promise available.`)}}const n=this.activeConnection();if(n===undefined||this.$state!==X.Running){throw new Error(`Client is not running and can't be stopped. It's current state is: ${this.$state}`)}this._initializeResult=undefined;this.$state=X.Stopping;this.cleanUp(e);const r=new Promise((e=>{(0,i.RAL)().timer.setTimeout(e,t)}));const s=(async e=>{await e.shutdown();await e.exit();return e})(n);return this._onStop=Promise.race([r,s]).then((e=>{if(e!==undefined){e.end();e.dispose()}else{this.error(`Stopping server timed out`,undefined,false);throw new Error(`Stopping the server timed out`)}}),(e=>{this.error(`Stopping server failed`,e,false);throw e})).finally((()=>{this.$state=X.Stopped;e==="stop"&&this.cleanUpChannel();this._onStart=undefined;this._onStop=undefined;this._connection=undefined;this._ignoredRegistrations.clear()}))}cleanUp(e){this._fileEvents=[];this._fileEventDelayer.cancel();const t=this._listeners.splice(0,this._listeners.length);for(const e of t){e.dispose()}if(this._syncedDocuments){this._syncedDocuments.clear()}for(const e of Array.from(this._features.entries()).map((e=>e[1])).reverse()){e.dispose()}if(e==="stop"&&this._diagnostics!==undefined){this._diagnostics.dispose();this._diagnostics=undefined}if(this._idleInterval!==undefined){this._idleInterval.dispose();this._idleInterval=undefined}}cleanUpChannel(){if(this._outputChannel!==undefined&&this._disposeOutputChannel){this._outputChannel.dispose();this._outputChannel=undefined}}notifyFileEvent(e){const t=this;async function didChangeWatchedFile(e){t._fileEvents.push(e);return t._fileEventDelayer.trigger((async()=>{const e=await t.$start();await t.forceDocumentSync();const n=e.sendNotification(i.DidChangeWatchedFilesNotification.type,{changes:t._fileEvents});t._fileEvents=[];return n}))}const n=this.clientOptions.middleware?.workspace;(n?.didChangeWatchedFile?n.didChangeWatchedFile(e,didChangeWatchedFile):didChangeWatchedFile(e)).catch((e=>{t.error(`Notify file events failed.`,e)}))}async forceDocumentSync(){if(this._didChangeTextDocumentFeature===undefined){this._didChangeTextDocumentFeature=this._dynamicFeatures.get(i.DidChangeTextDocumentNotification.type.method)}return this._didChangeTextDocumentFeature.forceDelivery()}handleDiagnostics(e){if(!this._diagnostics){return}const t=e.uri;if(this._diagnosticQueueState.state==="busy"&&this._diagnosticQueueState.document===t){this._diagnosticQueueState.tokenSource.cancel()}this._diagnosticQueue.set(e.uri,e.diagnostics);this.triggerDiagnosticQueue()}triggerDiagnosticQueue(){(0,i.RAL)().timer.setImmediate((()=>{this.workDiagnosticQueue()}))}workDiagnosticQueue(){if(this._diagnosticQueueState.state==="busy"){return}const e=this._diagnosticQueue.entries().next();if(e.done===true){return}const[t,n]=e.value;this._diagnosticQueue.delete(t);const i=new r.CancellationTokenSource;this._diagnosticQueueState={state:"busy",document:t,tokenSource:i};this._p2c.asDiagnostics(n,i.token).then((e=>{if(!i.token.isCancellationRequested){const n=this._p2c.asUri(t);const r=this.clientOptions.middleware;if(r.handleDiagnostics){r.handleDiagnostics(n,e,((e,t)=>this.setDiagnostics(e,t)))}else{this.setDiagnostics(n,e)}}})).finally((()=>{this._diagnosticQueueState={state:"idle"};this.triggerDiagnosticQueue()}))}setDiagnostics(e,t){if(!this._diagnostics){return}this._diagnostics.set(e,t)}async $start(){if(this.$state===X.StartFailed){throw new Error(`Previous start failed. Can't restart server.`)}await this.start();const e=this.activeConnection();if(e===undefined){throw new Error(`Starting server failed`)}return e}async createConnection(){let errorHandler=(e,t,n)=>{this.handleConnectionError(e,t,n)};let closeHandler=()=>{this.handleConnectionClosed()};const e=await this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8");this._connection=createConnection(e.reader,e.writer,errorHandler,closeHandler,this._clientOptions.connectionOptions);return this._connection}handleConnectionClosed(){if(this.$state===X.Stopped){return}try{if(this._connection!==undefined){this._connection.dispose()}}catch(e){}let e={action:G.DoNotRestart};if(this.$state!==X.Stopping){try{e=this._clientOptions.errorHandler.closed()}catch(e){}}this._connection=undefined;if(e.action===G.DoNotRestart){this.error(e.message??"Connection to server got closed. Server will not be restarted.",undefined,"force");this.cleanUp("stop");if(this.$state===X.Starting){this.$state=X.StartFailed}else{this.$state=X.Stopped}this._onStop=Promise.resolve();this._onStart=undefined}else if(e.action===G.Restart){this.info(e.message??"Connection to server got closed. Server will restart.");this.cleanUp("restart");this.$state=X.Initial;this._onStop=Promise.resolve();this._onStart=undefined;this.start().catch((e=>this.error(`Restarting server failed`,e,"force")))}}handleConnectionError(e,t,n){const r=this._clientOptions.errorHandler.error(e,t,n);if(r.action===K.Shutdown){this.error(r.message??`Client ${this._name}: connection to server is erroring. Shutting down server.`,undefined,"force");this.stop().catch((e=>{this.error(`Stopping server failed`,e,false)}))}}hookConfigurationChanged(e){this._listeners.push(r.workspace.onDidChangeConfiguration((()=>{this.refreshTrace(e,true)})))}refreshTrace(e,t=false){const n=r.workspace.getConfiguration(this._id);let s=i.Trace.Off;let o=i.TraceFormat.Text;if(n){const e=n.get("trace.server","off");if(typeof e==="string"){s=i.Trace.fromString(e)}else{s=i.Trace.fromString(n.get("trace.server.verbosity","off"));o=i.TraceFormat.fromString(n.get("trace.server.format","text"))}}this._trace=s;this._traceFormat=o;e.trace(this._trace,this._tracer,{sendNotification:t,traceFormat:this._traceFormat}).catch((e=>{this.error(`Updating trace failed with error`,e,false)}))}hookFileEvents(e){let t=this._clientOptions.synchronize.fileEvents;if(!t){return}let n;if(a.array(t)){n=t}else{n=[t]}if(!n){return}this._dynamicFeatures.get(i.DidChangeWatchedFilesNotification.type.method).registerRaw(u.generateUuid(),n)}registerFeatures(e){for(let t of e){this.registerFeature(t)}}registerFeature(e){this._features.push(e);if(d.DynamicFeature.is(e)){const t=e.registrationType;this._dynamicFeatures.set(t.method,e)}}getFeature(e){return this._dynamicFeatures.get(e)}hasDedicatedTextSynchronizationFeature(e){const t=this.getFeature(i.NotebookDocumentSyncRegistrationType.method);if(t===undefined||!(t instanceof p.NotebookDocumentSyncFeature)){return false}return t.handles(e)}registerBuiltinFeatures(){this.registerFeature(new h.ConfigurationFeature(this));this.registerFeature(new m.DidOpenTextDocumentFeature(this,this._syncedDocuments));this.registerFeature(new m.DidChangeTextDocumentFeature(this));this.registerFeature(new m.WillSaveFeature(this));this.registerFeature(new m.WillSaveWaitUntilFeature(this));this.registerFeature(new m.DidSaveTextDocumentFeature(this));this.registerFeature(new m.DidCloseTextDocumentFeature(this,this._syncedDocuments));this.registerFeature(new D.FileSystemWatcherFeature(this,(e=>this.notifyFileEvent(e))));this.registerFeature(new g.CompletionItemFeature(this));this.registerFeature(new v.HoverFeature(this));this.registerFeature(new b.SignatureHelpFeature(this));this.registerFeature(new y.DefinitionFeature(this));this.registerFeature(new T.ReferencesFeature(this));this.registerFeature(new _.DocumentHighlightFeature(this));this.registerFeature(new S.DocumentSymbolFeature(this));this.registerFeature(new w.WorkspaceSymbolFeature(this));this.registerFeature(new k.CodeActionFeature(this));this.registerFeature(new C.CodeLensFeature(this));this.registerFeature(new E.DocumentFormattingFeature(this));this.registerFeature(new E.DocumentRangeFormattingFeature(this));this.registerFeature(new E.DocumentOnTypeFormattingFeature(this));this.registerFeature(new R.RenameFeature(this));this.registerFeature(new x.DocumentLinkFeature(this));this.registerFeature(new O.ExecuteCommandFeature(this));this.registerFeature(new h.SyncConfigurationFeature(this));this.registerFeature(new M.TypeDefinitionFeature(this));this.registerFeature(new I.ImplementationFeature(this));this.registerFeature(new P.ColorProviderFeature(this));if(this.clientOptions.workspaceFolder===undefined){this.registerFeature(new N.WorkspaceFoldersFeature(this))}this.registerFeature(new A.FoldingRangeFeature(this));this.registerFeature(new F.DeclarationFeature(this));this.registerFeature(new L.SelectionRangeFeature(this));this.registerFeature(new j.ProgressFeature(this));this.registerFeature(new q.CallHierarchyFeature(this));this.registerFeature(new $.SemanticTokensFeature(this));this.registerFeature(new H.LinkedEditingFeature(this));this.registerFeature(new U.DidCreateFilesFeature(this));this.registerFeature(new U.DidRenameFilesFeature(this));this.registerFeature(new U.DidDeleteFilesFeature(this));this.registerFeature(new U.WillCreateFilesFeature(this));this.registerFeature(new U.WillRenameFilesFeature(this));this.registerFeature(new U.WillDeleteFilesFeature(this));this.registerFeature(new W.TypeHierarchyFeature(this));this.registerFeature(new B.InlineValueFeature(this));this.registerFeature(new Y.InlayHintsFeature(this));this.registerFeature(new f.DiagnosticFeature(this));this.registerFeature(new p.NotebookDocumentSyncFeature(this))}registerProposedFeatures(){this.registerFeatures(Z.createAll(this))}fillInitializeParams(e){for(let t of this._features){if(a.func(t.fillInitializeParams)){t.fillInitializeParams(e)}}}computeClientCapabilities(){const e={};(0,d.ensure)(e,"workspace").applyEdit=true;const t=(0,d.ensure)((0,d.ensure)(e,"workspace"),"workspaceEdit");t.documentChanges=true;t.resourceOperations=[i.ResourceOperationKind.Create,i.ResourceOperationKind.Rename,i.ResourceOperationKind.Delete];t.failureHandling=i.FailureHandlingKind.TextOnlyTransactional;t.normalizesLineEndings=true;t.changeAnnotationSupport={groupsOnLabel:true};const n=(0,d.ensure)((0,d.ensure)(e,"textDocument"),"publishDiagnostics");n.relatedInformation=true;n.versionSupport=false;n.tagSupport={valueSet:[i.DiagnosticTag.Unnecessary,i.DiagnosticTag.Deprecated]};n.codeDescriptionSupport=true;n.dataSupport=true;const r=(0,d.ensure)(e,"window");const s=(0,d.ensure)(r,"showMessage");s.messageActionItem={additionalPropertiesSupport:true};const o=(0,d.ensure)(r,"showDocument");o.support=true;const a=(0,d.ensure)(e,"general");a.staleRequestSupport={cancel:true,retryOnContentModified:Array.from(BaseLanguageClient.RequestsToCancelOnContentModified)};a.regularExpressions={engine:"ECMAScript",version:"ES2020"};a.markdown={parser:"marked",version:"1.1.0"};a.positionEncodings=["utf-16"];if(this._clientOptions.markdown.supportHtml){a.markdown.allowedTags=["ul","li","p","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"]}for(let t of this._features){t.fillClientCapabilities(e)}return e}initializeFeatures(e){const t=this._clientOptions.documentSelector;for(const e of this._features){if(a.func(e.preInitialize)){e.preInitialize(this._capabilities,t)}}for(const e of this._features){e.initialize(this._capabilities,t)}}async handleRegistrationRequest(e){if(!this.isRunning()){for(const t of e.registrations){this._ignoredRegistrations.add(t.id)}return}for(const t of e.registrations){const e=this._dynamicFeatures.get(t.method);if(e===undefined){return Promise.reject(new Error(`No feature implementation for ${t.method} found. Registration failed.`))}const n=t.registerOptions??{};n.documentSelector=n.documentSelector??this._clientOptions.documentSelector;const r={id:t.id,registerOptions:n};try{e.register(r)}catch(e){return Promise.reject(e)}}}async handleUnregistrationRequest(e){for(let t of e.unregisterations){if(this._ignoredRegistrations.has(t.id)){continue}const e=this._dynamicFeatures.get(t.method);if(!e){return Promise.reject(new Error(`No feature implementation for ${t.method} found. Unregistration failed.`))}e.unregister(t.id)}}async handleApplyWorkspaceEdit(e){const t=e.edit;const n=await this.workspaceEditLock.lock((()=>this._p2c.asWorkspaceEdit(t)));const s=new Map;r.workspace.textDocuments.forEach((e=>s.set(e.uri.toString(),e)));let o=false;if(t.documentChanges){for(const e of t.documentChanges){if(i.TextDocumentEdit.is(e)&&e.textDocument.version&&e.textDocument.version>=0){const t=s.get(e.textDocument.uri);if(t&&t.version!==e.textDocument.version){o=true;break}}}}if(o){return Promise.resolve({applied:false})}return a.asPromise(r.workspace.applyEdit(n).then((e=>({applied:e}))))}handleFailedRequest(e,t,n,s,o=true){if(n instanceof i.ResponseError){if(n.code===i.ErrorCodes.PendingResponseRejected||n.code===i.ErrorCodes.ConnectionInactive){return s}if(n.code===i.LSPErrorCodes.RequestCancelled||n.code===i.LSPErrorCodes.ServerCancelled){if(t!==undefined&&t.isCancellationRequested){return s}else{if(n.data!==undefined){throw new d.LSPCancellationError(n.data)}else{throw new r.CancellationError}}}else if(n.code===i.LSPErrorCodes.ContentModified){if(BaseLanguageClient.RequestsToCancelOnContentModified.has(e.method)){throw new r.CancellationError}else{return s}}}this.error(`Request ${e.method} failed.`,n,o);throw n}}t.BaseLanguageClient=BaseLanguageClient;BaseLanguageClient.RequestsToCancelOnContentModified=new Set([i.SemanticTokensRequest.method,i.SemanticTokensRangeRequest.method,i.SemanticTokensDeltaRequest.method]);class ConsoleLogger{error(e){(0,i.RAL)().console.error(e)}warn(e){(0,i.RAL)().console.warn(e)}info(e){(0,i.RAL)().console.info(e)}log(e){(0,i.RAL)().console.log(e)}}function createConnection(e,t,n,r,s){let o=-1;const c=new ConsoleLogger;const u=(0,i.createProtocolConnection)(e,t,c,s);u.onError((e=>{n(e[0],e[1],e[2])}));u.onClose(r);const l={get lastUsed(){return o},resetLastUsed:()=>{o=-1},listen:()=>u.listen(),sendRequest:(e,...t)=>{o=Date.now();return u.sendRequest(e,...t)},onRequest:(e,t)=>u.onRequest(e,t),hasPendingResponse:()=>u.hasPendingResponse(),sendNotification:(e,t)=>{o=Date.now();return u.sendNotification(e,t)},onNotification:(e,t)=>u.onNotification(e,t),onProgress:u.onProgress,sendProgress:u.sendProgress,trace:(e,t,n)=>{const r={sendNotification:false,traceFormat:i.TraceFormat.Text};if(n===undefined){return u.trace(e,t,r)}else if(a.boolean(n)){return u.trace(e,t,n)}else{return u.trace(e,t,n)}},initialize:e=>{o=Date.now();return u.sendRequest(i.InitializeRequest.type,e)},shutdown:()=>{o=Date.now();return u.sendRequest(i.ShutdownRequest.type,undefined)},exit:()=>{o=Date.now();return u.sendNotification(i.ExitNotification.type)},end:()=>u.end(),dispose:()=>u.dispose()};return l}var Z;(function(e){function createAll(e){let t=[];return t}e.createAll=createAll})(Z=t.ProposedFeatures||(t.ProposedFeatures={}))},66840:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CodeActionFeature=void 0;const r=n(76062);const i=n(3302);const s=n(56257);const o=n(86389);class CodeActionFeature extends o.TextDocumentLanguageFeature{constructor(e){super(e,i.CodeActionRequest.type)}fillClientCapabilities(e){const t=(0,o.ensure)((0,o.ensure)(e,"textDocument"),"codeAction");t.dynamicRegistration=true;t.isPreferredSupport=true;t.disabledSupport=true;t.dataSupport=true;t.resolveSupport={properties:["edit"]};t.codeActionLiteralSupport={codeActionKind:{valueSet:[i.CodeActionKind.Empty,i.CodeActionKind.QuickFix,i.CodeActionKind.Refactor,i.CodeActionKind.RefactorExtract,i.CodeActionKind.RefactorInline,i.CodeActionKind.RefactorRewrite,i.CodeActionKind.Source,i.CodeActionKind.SourceOrganizeImports]}};t.honorsChangeAnnotations=false}initialize(e,t){const n=this.getRegistrationOptions(t,e.codeActionProvider);if(!n){return}this.register({id:s.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector;const n={provideCodeActions:(e,t,n,r)=>{const s=this._client;const _provideCodeActions=async(e,t,n,r)=>{const o={textDocument:s.code2ProtocolConverter.asTextDocumentIdentifier(e),range:s.code2ProtocolConverter.asRange(t),context:await s.code2ProtocolConverter.asCodeActionContext(n,r)};return s.sendRequest(i.CodeActionRequest.type,o,r).then((e=>{if(r.isCancellationRequested||e===null||e===undefined){return null}return s.protocol2CodeConverter.asCodeActionResult(e,r)}),(e=>s.handleFailedRequest(i.CodeActionRequest.type,r,e,null)))};const o=s.middleware;return o.provideCodeActions?o.provideCodeActions(e,t,n,r,_provideCodeActions):_provideCodeActions(e,t,n,r)},resolveCodeAction:e.resolveProvider?(e,t)=>{const n=this._client;const r=this._client.middleware;const resolveCodeAction=async(e,t)=>n.sendRequest(i.CodeActionResolveRequest.type,await n.code2ProtocolConverter.asCodeAction(e,t),t).then((r=>{if(t.isCancellationRequested){return e}return n.protocol2CodeConverter.asCodeAction(r,t)}),(r=>n.handleFailedRequest(i.CodeActionResolveRequest.type,t,r,e)));return r.resolveCodeAction?r.resolveCodeAction(e,t,resolveCodeAction):resolveCodeAction(e,t)}:undefined};return[r.languages.registerCodeActionsProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n,e.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:undefined),n]}}t.CodeActionFeature=CodeActionFeature},87266:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.createConverter=void 0;const r=n(76062);const i=n(3302);const s=n(42173);const o=n(93741);const a=n(33741);const c=n(83111);const u=n(89189);const l=n(35596);const d=n(84282);const f=n(50014);const p=n(32349);const h=n(32757);const m=n(45140);var g;(function(e){function is(e){const t=e;return t&&!!t.inserting&&!!t.replacing}e.is=is})(g||(g={}));function createConverter(e){const nullConverter=e=>e.toString();const t=e||nullConverter;function asUri(e){return t(e)}function asTextDocumentIdentifier(e){return{uri:t(e.uri)}}function asTextDocumentItem(e){return{uri:t(e.uri),languageId:e.languageId,version:e.version,text:e.getText()}}function asVersionedTextDocumentIdentifier(e){return{uri:t(e.uri),version:e.version}}function asOpenTextDocumentParams(e){return{textDocument:asTextDocumentItem(e)}}function isTextDocumentChangeEvent(e){let t=e;return!!t.document&&!!t.contentChanges}function isTextDocument(e){let t=e;return!!t.uri&&!!t.version}function asChangeTextDocumentParams(e){if(isTextDocument(e)){let n={textDocument:{uri:t(e.uri),version:e.version},contentChanges:[{text:e.getText()}]};return n}else if(isTextDocumentChangeEvent(e)){let n=e.document;let r={textDocument:{uri:t(n.uri),version:n.version},contentChanges:e.contentChanges.map((e=>{let t=e.range;return{range:{start:{line:t.start.line,character:t.start.character},end:{line:t.end.line,character:t.end.character}},rangeLength:e.rangeLength,text:e.text}}))};return r}else{throw Error("Unsupported text document change parameter")}}function asCloseTextDocumentParams(e){return{textDocument:asTextDocumentIdentifier(e)}}function asSaveTextDocumentParams(e,t=false){let n={textDocument:asTextDocumentIdentifier(e)};if(t){n.text=e.getText()}return n}function asTextDocumentSaveReason(e){switch(e){case r.TextDocumentSaveReason.Manual:return i.TextDocumentSaveReason.Manual;case r.TextDocumentSaveReason.AfterDelay:return i.TextDocumentSaveReason.AfterDelay;case r.TextDocumentSaveReason.FocusOut:return i.TextDocumentSaveReason.FocusOut}return i.TextDocumentSaveReason.Manual}function asWillSaveTextDocumentParams(e){return{textDocument:asTextDocumentIdentifier(e.document),reason:asTextDocumentSaveReason(e.reason)}}function asDidCreateFilesParams(e){return{files:e.files.map((e=>({uri:t(e)})))}}function asDidRenameFilesParams(e){return{files:e.files.map((e=>({oldUri:t(e.oldUri),newUri:t(e.newUri)})))}}function asDidDeleteFilesParams(e){return{files:e.files.map((e=>({uri:t(e)})))}}function asWillCreateFilesParams(e){return{files:e.files.map((e=>({uri:t(e)})))}}function asWillRenameFilesParams(e){return{files:e.files.map((e=>({oldUri:t(e.oldUri),newUri:t(e.newUri)})))}}function asWillDeleteFilesParams(e){return{files:e.files.map((e=>({uri:t(e)})))}}function asTextDocumentPositionParams(e,t){return{textDocument:asTextDocumentIdentifier(e),position:asWorkerPosition(t)}}function asCompletionTriggerKind(e){switch(e){case r.CompletionTriggerKind.TriggerCharacter:return i.CompletionTriggerKind.TriggerCharacter;case r.CompletionTriggerKind.TriggerForIncompleteCompletions:return i.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return i.CompletionTriggerKind.Invoked}}function asCompletionParams(e,t,n){return{textDocument:asTextDocumentIdentifier(e),position:asWorkerPosition(t),context:{triggerKind:asCompletionTriggerKind(n.triggerKind),triggerCharacter:n.triggerCharacter}}}function asSignatureHelpTriggerKind(e){switch(e){case r.SignatureHelpTriggerKind.Invoke:return i.SignatureHelpTriggerKind.Invoked;case r.SignatureHelpTriggerKind.TriggerCharacter:return i.SignatureHelpTriggerKind.TriggerCharacter;case r.SignatureHelpTriggerKind.ContentChange:return i.SignatureHelpTriggerKind.ContentChange}}function asParameterInformation(e){return{label:e.label}}function asParameterInformations(e){return e.map(asParameterInformation)}function asSignatureInformation(e){return{label:e.label,parameters:asParameterInformations(e.parameters)}}function asSignatureInformations(e){return e.map(asSignatureInformation)}function asSignatureHelp(e){if(e===undefined){return e}return{signatures:asSignatureInformations(e.signatures),activeSignature:e.activeSignature,activeParameter:e.activeParameter}}function asSignatureHelpParams(e,t,n){return{textDocument:asTextDocumentIdentifier(e),position:asWorkerPosition(t),context:{isRetrigger:n.isRetrigger,triggerCharacter:n.triggerCharacter,triggerKind:asSignatureHelpTriggerKind(n.triggerKind),activeSignatureHelp:asSignatureHelp(n.activeSignatureHelp)}}}function asWorkerPosition(e){return{line:e.line,character:e.character}}function asPosition(e){if(e===undefined||e===null){return e}return{line:e.line>i.uinteger.MAX_VALUE?i.uinteger.MAX_VALUE:e.line,character:e.character>i.uinteger.MAX_VALUE?i.uinteger.MAX_VALUE:e.character}}function asPositions(e,t){return o.map(e,asPosition,t)}function asRange(e){if(e===undefined||e===null){return e}return{start:asPosition(e.start),end:asPosition(e.end)}}function asLocation(e){if(e===undefined||e===null){return e}return i.Location.create(asUri(e.uri),asRange(e.range))}function asDiagnosticSeverity(e){switch(e){case r.DiagnosticSeverity.Error:return i.DiagnosticSeverity.Error;case r.DiagnosticSeverity.Warning:return i.DiagnosticSeverity.Warning;case r.DiagnosticSeverity.Information:return i.DiagnosticSeverity.Information;case r.DiagnosticSeverity.Hint:return i.DiagnosticSeverity.Hint}}function asDiagnosticTags(e){if(!e){return undefined}let t=[];for(let n of e){let e=asDiagnosticTag(n);if(e!==undefined){t.push(e)}}return t.length>0?t:undefined}function asDiagnosticTag(e){switch(e){case r.DiagnosticTag.Unnecessary:return i.DiagnosticTag.Unnecessary;case r.DiagnosticTag.Deprecated:return i.DiagnosticTag.Deprecated;default:return undefined}}function asRelatedInformation(e){return{message:e.message,location:asLocation(e.location)}}function asRelatedInformations(e){return e.map(asRelatedInformation)}function asDiagnosticCode(e){if(e===undefined||e===null){return undefined}if(s.number(e)||s.string(e)){return e}return{value:e.value,target:asUri(e.target)}}function asDiagnostic(e){const t=i.Diagnostic.create(asRange(e.range),e.message);const n=e instanceof d.ProtocolDiagnostic?e:undefined;if(n!==undefined&&n.data!==undefined){t.data=n.data}const r=asDiagnosticCode(e.code);if(d.DiagnosticCode.is(r)){if(n!==undefined&&n.hasDiagnosticCode){t.code=r}else{t.code=r.value;t.codeDescription={href:r.target}}}else{t.code=r}if(s.number(e.severity)){t.severity=asDiagnosticSeverity(e.severity)}if(Array.isArray(e.tags)){t.tags=asDiagnosticTags(e.tags)}if(e.relatedInformation){t.relatedInformation=asRelatedInformations(e.relatedInformation)}if(e.source){t.source=e.source}return t}function asDiagnostics(e,t){if(e===undefined||e===null){return e}return o.map(e,asDiagnostic,t)}function asDocumentation(e,t){switch(e){case"$string":return t;case i.MarkupKind.PlainText:return{kind:e,value:t};case i.MarkupKind.Markdown:return{kind:e,value:t.value};default:return`Unsupported Markup content received. Kind is: ${e}`}}function asCompletionItemTag(e){switch(e){case r.CompletionItemTag.Deprecated:return i.CompletionItemTag.Deprecated}return undefined}function asCompletionItemTags(e){if(e===undefined){return e}const t=[];for(let n of e){const e=asCompletionItemTag(n);if(e!==undefined){t.push(e)}}return t}function asCompletionItemKind(e,t){if(t!==undefined){return t}return e+1}function asCompletionItem(e,t=false){let n;let o;if(s.string(e.label)){n=e.label}else{n=e.label.label;if(t&&(e.label.detail!==undefined||e.label.description!==undefined)){o={detail:e.label.detail,description:e.label.description}}}let c={label:n};if(o!==undefined){c.labelDetails=o}let u=e instanceof a.default?e:undefined;if(e.detail){c.detail=e.detail}if(e.documentation){if(!u||u.documentationFormat==="$string"){c.documentation=e.documentation}else{c.documentation=asDocumentation(u.documentationFormat,e.documentation)}}if(e.filterText){c.filterText=e.filterText}fillPrimaryInsertText(c,e);if(s.number(e.kind)){c.kind=asCompletionItemKind(e.kind,u&&u.originalItemKind)}if(e.sortText){c.sortText=e.sortText}if(e.additionalTextEdits){c.additionalTextEdits=asTextEdits(e.additionalTextEdits)}if(e.commitCharacters){c.commitCharacters=e.commitCharacters.slice()}if(e.command){c.command=asCommand(e.command)}if(e.preselect===true||e.preselect===false){c.preselect=e.preselect}const l=asCompletionItemTags(e.tags);if(u){if(u.data!==undefined){c.data=u.data}if(u.deprecated===true||u.deprecated===false){if(u.deprecated===true&&l!==undefined&&l.length>0){const e=l.indexOf(r.CompletionItemTag.Deprecated);if(e!==-1){l.splice(e,1)}}c.deprecated=u.deprecated}if(u.insertTextMode!==undefined){c.insertTextMode=u.insertTextMode}}if(l!==undefined&&l.length>0){c.tags=l}if(c.insertTextMode===undefined&&e.keepWhitespace===true){c.insertTextMode=i.InsertTextMode.adjustIndentation}return c}function fillPrimaryInsertText(e,t){let n=i.InsertTextFormat.PlainText;let s=undefined;let o=undefined;if(t.textEdit){s=t.textEdit.newText;o=t.textEdit.range}else if(t.insertText instanceof r.SnippetString){n=i.InsertTextFormat.Snippet;s=t.insertText.value}else{s=t.insertText}if(t.range){o=t.range}e.insertTextFormat=n;if(t.fromEdit&&s!==undefined&&o!==undefined){e.textEdit=asCompletionTextEdit(s,o)}else{e.insertText=s}}function asCompletionTextEdit(e,t){if(g.is(t)){return i.InsertReplaceEdit.create(e,asRange(t.inserting),asRange(t.replacing))}else{return{newText:e,range:asRange(t)}}}function asTextEdit(e){return{range:asRange(e.range),newText:e.newText}}function asTextEdits(e){if(e===undefined||e===null){return e}return e.map(asTextEdit)}function asSymbolKind(e){if(e<=r.SymbolKind.TypeParameter){return e+1}return i.SymbolKind.Property}function asSymbolTag(e){return e}function asSymbolTags(e){return e.map(asSymbolTag)}function asReferenceParams(e,t,n){return{textDocument:asTextDocumentIdentifier(e),position:asWorkerPosition(t),context:{includeDeclaration:n.includeDeclaration}}}async function asCodeAction(e,t){let n=i.CodeAction.create(e.title);if(e instanceof l.default&&e.data!==undefined){n.data=e.data}if(e.kind!==undefined){n.kind=asCodeActionKind(e.kind)}if(e.diagnostics!==undefined){n.diagnostics=await asDiagnostics(e.diagnostics,t)}if(e.edit!==undefined){throw new Error(`VS Code code actions can only be converted to a protocol code action without an edit.`)}if(e.command!==undefined){n.command=asCommand(e.command)}if(e.isPreferred!==undefined){n.isPreferred=e.isPreferred}if(e.disabled!==undefined){n.disabled={reason:e.disabled.reason}}return n}async function asCodeActionContext(e,t){if(e===undefined||e===null){return e}let n;if(e.only&&s.string(e.only.value)){n=[e.only.value]}return i.CodeActionContext.create(await asDiagnostics(e.diagnostics,t),n,asCodeActionTriggerKind(e.triggerKind))}function asCodeActionTriggerKind(e){switch(e){case r.CodeActionTriggerKind.Invoke:return i.CodeActionTriggerKind.Invoked;case r.CodeActionTriggerKind.Automatic:return i.CodeActionTriggerKind.Automatic;default:return undefined}}function asCodeActionKind(e){if(e===undefined||e===null){return undefined}return e.value}function asInlineValueContext(e){if(e===undefined||e===null){return e}return i.InlineValueContext.create(e.frameId,asRange(e.stoppedLocation))}function asCommand(e){let t=i.Command.create(e.title,e.command);if(e.arguments){t.arguments=e.arguments}return t}function asCodeLens(e){let t=i.CodeLens.create(asRange(e.range));if(e.command){t.command=asCommand(e.command)}if(e instanceof c.default){if(e.data){t.data=e.data}}return t}function asFormattingOptions(e,t){const n={tabSize:e.tabSize,insertSpaces:e.insertSpaces};if(t.trimTrailingWhitespace){n.trimTrailingWhitespace=true}if(t.trimFinalNewlines){n.trimFinalNewlines=true}if(t.insertFinalNewline){n.insertFinalNewline=true}return n}function asDocumentSymbolParams(e){return{textDocument:asTextDocumentIdentifier(e)}}function asCodeLensParams(e){return{textDocument:asTextDocumentIdentifier(e)}}function asDocumentLink(e){let t=i.DocumentLink.create(asRange(e.range));if(e.target){t.target=asUri(e.target)}if(e.tooltip!==undefined){t.tooltip=e.tooltip}let n=e instanceof u.default?e:undefined;if(n&&n.data){t.data=n.data}return t}function asDocumentLinkParams(e){return{textDocument:asTextDocumentIdentifier(e)}}function asCallHierarchyItem(e){const t={name:e.name,kind:asSymbolKind(e.kind),uri:asUri(e.uri),range:asRange(e.range),selectionRange:asRange(e.selectionRange)};if(e.detail!==undefined&&e.detail.length>0){t.detail=e.detail}if(e.tags!==undefined){t.tags=asSymbolTags(e.tags)}if(e instanceof f.default&&e.data!==undefined){t.data=e.data}return t}function asTypeHierarchyItem(e){const t={name:e.name,kind:asSymbolKind(e.kind),uri:asUri(e.uri),range:asRange(e.range),selectionRange:asRange(e.selectionRange)};if(e.detail!==undefined&&e.detail.length>0){t.detail=e.detail}if(e.tags!==undefined){t.tags=asSymbolTags(e.tags)}if(e instanceof p.default&&e.data!==undefined){t.data=e.data}return t}function asWorkspaceSymbol(e){const n=e instanceof h.default?{name:e.name,kind:asSymbolKind(e.kind),location:e.hasRange?asLocation(e.location):{uri:t(e.location.uri)},data:e.data}:{name:e.name,kind:asSymbolKind(e.kind),location:asLocation(e.location)};if(e.tags!==undefined){n.tags=asSymbolTags(e.tags)}if(e.containerName!==""){n.containerName=e.containerName}return n}function asInlayHint(e){const t=typeof e.label==="string"?e.label:e.label.map(asInlayHintLabelPart);const n=i.InlayHint.create(asPosition(e.position),t);if(e.kind!==undefined){n.kind=e.kind}if(e.textEdits!==undefined){n.textEdits=asTextEdits(e.textEdits)}if(e.tooltip!==undefined){n.tooltip=asTooltip(e.tooltip)}if(e.paddingLeft!==undefined){n.paddingLeft=e.paddingLeft}if(e.paddingRight!==undefined){n.paddingRight=e.paddingRight}if(e instanceof m.default&&e.data!==undefined){n.data=e.data}return n}function asInlayHintLabelPart(e){const t=i.InlayHintLabelPart.create(e.value);if(e.location!==undefined){t.location=asLocation(e.location)}if(e.command!==undefined){t.command=asCommand(e.command)}if(e.tooltip!==undefined){t.tooltip=asTooltip(e.tooltip)}return t}function asTooltip(e){if(typeof e==="string"){return e}const t={kind:i.MarkupKind.Markdown,value:e.value};return t}return{asUri:asUri,asTextDocumentIdentifier:asTextDocumentIdentifier,asTextDocumentItem:asTextDocumentItem,asVersionedTextDocumentIdentifier:asVersionedTextDocumentIdentifier,asOpenTextDocumentParams:asOpenTextDocumentParams,asChangeTextDocumentParams:asChangeTextDocumentParams,asCloseTextDocumentParams:asCloseTextDocumentParams,asSaveTextDocumentParams:asSaveTextDocumentParams,asWillSaveTextDocumentParams:asWillSaveTextDocumentParams,asDidCreateFilesParams:asDidCreateFilesParams,asDidRenameFilesParams:asDidRenameFilesParams,asDidDeleteFilesParams:asDidDeleteFilesParams,asWillCreateFilesParams:asWillCreateFilesParams,asWillRenameFilesParams:asWillRenameFilesParams,asWillDeleteFilesParams:asWillDeleteFilesParams,asTextDocumentPositionParams:asTextDocumentPositionParams,asCompletionParams:asCompletionParams,asSignatureHelpParams:asSignatureHelpParams,asWorkerPosition:asWorkerPosition,asRange:asRange,asPosition:asPosition,asPositions:asPositions,asLocation:asLocation,asDiagnosticSeverity:asDiagnosticSeverity,asDiagnosticTag:asDiagnosticTag,asDiagnostic:asDiagnostic,asDiagnostics:asDiagnostics,asCompletionItem:asCompletionItem,asTextEdit:asTextEdit,asSymbolKind:asSymbolKind,asSymbolTag:asSymbolTag,asSymbolTags:asSymbolTags,asReferenceParams:asReferenceParams,asCodeAction:asCodeAction,asCodeActionContext:asCodeActionContext,asInlineValueContext:asInlineValueContext,asCommand:asCommand,asCodeLens:asCodeLens,asFormattingOptions:asFormattingOptions,asDocumentSymbolParams:asDocumentSymbolParams,asCodeLensParams:asCodeLensParams,asDocumentLink:asDocumentLink,asDocumentLinkParams:asDocumentLinkParams,asCallHierarchyItem:asCallHierarchyItem,asTypeHierarchyItem:asTypeHierarchyItem,asInlayHint:asInlayHint,asWorkspaceSymbol:asWorkspaceSymbol}}t.createConverter=createConverter},95548:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CodeLensFeature=void 0;const r=n(76062);const i=n(3302);const s=n(56257);const o=n(86389);class CodeLensFeature extends o.TextDocumentLanguageFeature{constructor(e){super(e,i.CodeLensRequest.type)}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"textDocument"),"codeLens").dynamicRegistration=true;(0,o.ensure)((0,o.ensure)(e,"workspace"),"codeLens").refreshSupport=true}initialize(e,t){const n=this._client;n.onRequest(i.CodeLensRefreshRequest.type,(async()=>{for(const e of this.getAllProviders()){e.onDidChangeCodeLensEmitter.fire()}}));const r=this.getRegistrationOptions(t,e.codeLensProvider);if(!r){return}this.register({id:s.generateUuid(),registerOptions:r})}registerLanguageProvider(e){const t=e.documentSelector;const n=new r.EventEmitter;const s={onDidChangeCodeLenses:n.event,provideCodeLenses:(e,t)=>{const n=this._client;const provideCodeLenses=(e,t)=>n.sendRequest(i.CodeLensRequest.type,n.code2ProtocolConverter.asCodeLensParams(e),t).then((e=>{if(t.isCancellationRequested){return null}return n.protocol2CodeConverter.asCodeLenses(e,t)}),(e=>n.handleFailedRequest(i.CodeLensRequest.type,t,e,null)));const r=n.middleware;return r.provideCodeLenses?r.provideCodeLenses(e,t,provideCodeLenses):provideCodeLenses(e,t)},resolveCodeLens:e.resolveProvider?(e,t)=>{const n=this._client;const resolveCodeLens=(e,t)=>n.sendRequest(i.CodeLensResolveRequest.type,n.code2ProtocolConverter.asCodeLens(e),t).then((r=>{if(t.isCancellationRequested){return e}return n.protocol2CodeConverter.asCodeLens(r)}),(r=>n.handleFailedRequest(i.CodeLensResolveRequest.type,t,r,e)));const r=n.middleware;return r.resolveCodeLens?r.resolveCodeLens(e,t,resolveCodeLens):resolveCodeLens(e,t)}:undefined};return[r.languages.registerCodeLensProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),s),{provider:s,onDidChangeCodeLensEmitter:n}]}}t.CodeLensFeature=CodeLensFeature},89260:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ColorProviderFeature=void 0;const r=n(76062);const i=n(3302);const s=n(86389);class ColorProviderFeature extends s.TextDocumentLanguageFeature{constructor(e){super(e,i.DocumentColorRequest.type)}fillClientCapabilities(e){(0,s.ensure)((0,s.ensure)(e,"textDocument"),"colorProvider").dynamicRegistration=true}initialize(e,t){let[n,r]=this.getRegistration(t,e.colorProvider);if(!n||!r){return}this.register({id:n,registerOptions:r})}registerLanguageProvider(e){const t=e.documentSelector;const n={provideColorPresentations:(e,t,n)=>{const r=this._client;const provideColorPresentations=(e,t,n)=>{const s={color:e,textDocument:r.code2ProtocolConverter.asTextDocumentIdentifier(t.document),range:r.code2ProtocolConverter.asRange(t.range)};return r.sendRequest(i.ColorPresentationRequest.type,s,n).then((e=>{if(n.isCancellationRequested){return null}return this._client.protocol2CodeConverter.asColorPresentations(e,n)}),(e=>r.handleFailedRequest(i.ColorPresentationRequest.type,n,e,null)))};const s=r.middleware;return s.provideColorPresentations?s.provideColorPresentations(e,t,n,provideColorPresentations):provideColorPresentations(e,t,n)},provideDocumentColors:(e,t)=>{const n=this._client;const provideDocumentColors=(e,t)=>{const r={textDocument:n.code2ProtocolConverter.asTextDocumentIdentifier(e)};return n.sendRequest(i.DocumentColorRequest.type,r,t).then((e=>{if(t.isCancellationRequested){return null}return this._client.protocol2CodeConverter.asColorInformations(e,t)}),(e=>n.handleFailedRequest(i.DocumentColorRequest.type,t,e,null)))};const r=n.middleware;return r.provideDocumentColors?r.provideDocumentColors(e,t,provideDocumentColors):provideDocumentColors(e,t)}};return[r.languages.registerColorProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n),n]}}t.ColorProviderFeature=ColorProviderFeature},8814:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CompletionItemFeature=void 0;const r=n(76062);const i=n(3302);const s=n(86389);const o=n(56257);const a=[i.CompletionItemKind.Text,i.CompletionItemKind.Method,i.CompletionItemKind.Function,i.CompletionItemKind.Constructor,i.CompletionItemKind.Field,i.CompletionItemKind.Variable,i.CompletionItemKind.Class,i.CompletionItemKind.Interface,i.CompletionItemKind.Module,i.CompletionItemKind.Property,i.CompletionItemKind.Unit,i.CompletionItemKind.Value,i.CompletionItemKind.Enum,i.CompletionItemKind.Keyword,i.CompletionItemKind.Snippet,i.CompletionItemKind.Color,i.CompletionItemKind.File,i.CompletionItemKind.Reference,i.CompletionItemKind.Folder,i.CompletionItemKind.EnumMember,i.CompletionItemKind.Constant,i.CompletionItemKind.Struct,i.CompletionItemKind.Event,i.CompletionItemKind.Operator,i.CompletionItemKind.TypeParameter];class CompletionItemFeature extends s.TextDocumentLanguageFeature{constructor(e){super(e,i.CompletionRequest.type);this.labelDetailsSupport=new Map}fillClientCapabilities(e){let t=(0,s.ensure)((0,s.ensure)(e,"textDocument"),"completion");t.dynamicRegistration=true;t.contextSupport=true;t.completionItem={snippetSupport:true,commitCharactersSupport:true,documentationFormat:[i.MarkupKind.Markdown,i.MarkupKind.PlainText],deprecatedSupport:true,preselectSupport:true,tagSupport:{valueSet:[i.CompletionItemTag.Deprecated]},insertReplaceSupport:true,resolveSupport:{properties:["documentation","detail","additionalTextEdits"]},insertTextModeSupport:{valueSet:[i.InsertTextMode.asIs,i.InsertTextMode.adjustIndentation]},labelDetailsSupport:true};t.insertTextMode=i.InsertTextMode.adjustIndentation;t.completionItemKind={valueSet:a};t.completionList={itemDefaults:["commitCharacters","editRange","insertTextFormat","insertTextMode"]}}initialize(e,t){const n=this.getRegistrationOptions(t,e.completionProvider);if(!n){return}this.register({id:o.generateUuid(),registerOptions:n})}registerLanguageProvider(e,t){this.labelDetailsSupport.set(t,!!e.completionItem?.labelDetailsSupport);const n=e.triggerCharacters??[];const s=e.allCommitCharacters;const o=e.documentSelector;const a={provideCompletionItems:(e,t,n,r)=>{const o=this._client;const a=this._client.middleware;const provideCompletionItems=(e,t,n,r)=>o.sendRequest(i.CompletionRequest.type,o.code2ProtocolConverter.asCompletionParams(e,t,n),r).then((e=>{if(r.isCancellationRequested){return null}return o.protocol2CodeConverter.asCompletionResult(e,s,r)}),(e=>o.handleFailedRequest(i.CompletionRequest.type,r,e,null)));return a.provideCompletionItem?a.provideCompletionItem(e,t,r,n,provideCompletionItems):provideCompletionItems(e,t,r,n)},resolveCompletionItem:e.resolveProvider?(e,n)=>{const r=this._client;const s=this._client.middleware;const resolveCompletionItem=(e,n)=>r.sendRequest(i.CompletionResolveRequest.type,r.code2ProtocolConverter.asCompletionItem(e,!!this.labelDetailsSupport.get(t)),n).then((e=>{if(n.isCancellationRequested){return null}return r.protocol2CodeConverter.asCompletionItem(e)}),(t=>r.handleFailedRequest(i.CompletionResolveRequest.type,n,t,e)));return s.resolveCompletionItem?s.resolveCompletionItem(e,n,resolveCompletionItem):resolveCompletionItem(e,n)}:undefined};return[r.languages.registerCompletionItemProvider(this._client.protocol2CodeConverter.asDocumentSelector(o),a,...n),a]}}t.CompletionItemFeature=CompletionItemFeature},23209:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SyncConfigurationFeature=t.toJSONObject=t.ConfigurationFeature=void 0;const r=n(76062);const i=n(3302);const s=n(42173);const o=n(56257);const a=n(86389);class ConfigurationFeature{constructor(e){this._client=e}getState(){return{kind:"static"}}fillClientCapabilities(e){e.workspace=e.workspace||{};e.workspace.configuration=true}initialize(){let e=this._client;e.onRequest(i.ConfigurationRequest.type,((t,n)=>{let configuration=e=>{let t=[];for(let n of e.items){let e=n.scopeUri!==void 0&&n.scopeUri!==null?this._client.protocol2CodeConverter.asUri(n.scopeUri):undefined;t.push(this.getConfiguration(e,n.section!==null?n.section:undefined))}return t};let r=e.middleware.workspace;return r&&r.configuration?r.configuration(t,n,configuration):configuration(t,n)}))}getConfiguration(e,t){let n=null;if(t){let i=t.lastIndexOf(".");if(i===-1){n=toJSONObject(r.workspace.getConfiguration(undefined,e).get(t))}else{let s=r.workspace.getConfiguration(t.substr(0,i),e);if(s){n=toJSONObject(s.get(t.substr(i+1)))}}}else{let t=r.workspace.getConfiguration(undefined,e);n={};for(let e of Object.keys(t)){if(t.has(e)){n[e]=toJSONObject(t.get(e))}}}if(n===undefined){n=null}return n}dispose(){}}t.ConfigurationFeature=ConfigurationFeature;function toJSONObject(e){if(e){if(Array.isArray(e)){return e.map(toJSONObject)}else if(typeof e==="object"){const t=Object.create(null);for(const n in e){if(Object.prototype.hasOwnProperty.call(e,n)){t[n]=toJSONObject(e[n])}}return t}}return e}t.toJSONObject=toJSONObject;class SyncConfigurationFeature{constructor(e){this._client=e;this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return i.DidChangeConfigurationNotification.type}fillClientCapabilities(e){(0,a.ensure)((0,a.ensure)(e,"workspace"),"didChangeConfiguration").dynamicRegistration=true}initialize(){let e=this._client.clientOptions.synchronize?.configurationSection;if(e!==undefined){this.register({id:o.generateUuid(),registerOptions:{section:e}})}}register(e){let t=r.workspace.onDidChangeConfiguration((t=>{this.onDidChangeConfiguration(e.registerOptions.section,t)}));this._listeners.set(e.id,t);if(e.registerOptions.section!==undefined){this.onDidChangeConfiguration(e.registerOptions.section,undefined)}}unregister(e){let t=this._listeners.get(e);if(t){this._listeners.delete(e);t.dispose()}}dispose(){for(const e of this._listeners.values()){e.dispose()}this._listeners.clear()}onDidChangeConfiguration(e,t){let n;if(s.string(e)){n=[e]}else{n=e}if(n!==undefined&&t!==undefined){let e=n.some((e=>t.affectsConfiguration(e)));if(!e){return}}const didChangeConfiguration=async e=>{if(e===undefined){return this._client.sendNotification(i.DidChangeConfigurationNotification.type,{settings:null})}else{return this._client.sendNotification(i.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(e)})}};let r=this._client.middleware.workspace?.didChangeConfiguration;(r?r(n,didChangeConfiguration):didChangeConfiguration(n)).catch((e=>{this._client.error(`Sending notification ${i.DidChangeConfigurationNotification.type.method} failed`,e)}))}extractSettingsInformation(e){function ensurePath(e,t){let n=e;for(let e=0;e<t.length-1;e++){let r=n[t[e]];if(!r){r=Object.create(null);n[t[e]]=r}n=r}return n}let t=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:undefined;let n=Object.create(null);for(let i=0;i<e.length;i++){let s=e[i];let o=s.indexOf(".");let a=null;if(o>=0){a=r.workspace.getConfiguration(s.substr(0,o),t).get(s.substr(o+1))}else{a=r.workspace.getConfiguration(undefined,t).get(s)}if(a){let t=e[i].split(".");ensurePath(n,t)[t[t.length-1]]=toJSONObject(a)}}return n}}t.SyncConfigurationFeature=SyncConfigurationFeature},7259:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DeclarationFeature=void 0;const r=n(76062);const i=n(3302);const s=n(86389);class DeclarationFeature extends s.TextDocumentLanguageFeature{constructor(e){super(e,i.DeclarationRequest.type)}fillClientCapabilities(e){const t=(0,s.ensure)((0,s.ensure)(e,"textDocument"),"declaration");t.dynamicRegistration=true;t.linkSupport=true}initialize(e,t){const[n,r]=this.getRegistration(t,e.declarationProvider);if(!n||!r){return}this.register({id:n,registerOptions:r})}registerLanguageProvider(e){const t=e.documentSelector;const n={provideDeclaration:(e,t,n)=>{const r=this._client;const provideDeclaration=(e,t,n)=>r.sendRequest(i.DeclarationRequest.type,r.code2ProtocolConverter.asTextDocumentPositionParams(e,t),n).then((e=>{if(n.isCancellationRequested){return null}return r.protocol2CodeConverter.asDeclarationResult(e,n)}),(e=>r.handleFailedRequest(i.DeclarationRequest.type,n,e,null)));const s=r.middleware;return s.provideDeclaration?s.provideDeclaration(e,t,n,provideDeclaration):provideDeclaration(e,t,n)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return r.languages.registerDeclarationProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}t.DeclarationFeature=DeclarationFeature},68905:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DefinitionFeature=void 0;const r=n(76062);const i=n(3302);const s=n(86389);const o=n(56257);class DefinitionFeature extends s.TextDocumentLanguageFeature{constructor(e){super(e,i.DefinitionRequest.type)}fillClientCapabilities(e){let t=(0,s.ensure)((0,s.ensure)(e,"textDocument"),"definition");t.dynamicRegistration=true;t.linkSupport=true}initialize(e,t){const n=this.getRegistrationOptions(t,e.definitionProvider);if(!n){return}this.register({id:o.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector;const n={provideDefinition:(e,t,n)=>{const r=this._client;const provideDefinition=(e,t,n)=>r.sendRequest(i.DefinitionRequest.type,r.code2ProtocolConverter.asTextDocumentPositionParams(e,t),n).then((e=>{if(n.isCancellationRequested){return null}return r.protocol2CodeConverter.asDefinitionResult(e,n)}),(e=>r.handleFailedRequest(i.DefinitionRequest.type,n,e,null)));const s=r.middleware;return s.provideDefinition?s.provideDefinition(e,t,n,provideDefinition):provideDefinition(e,t,n)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return r.languages.registerDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}t.DefinitionFeature=DefinitionFeature},33646:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DiagnosticFeature=t.DiagnosticPullMode=t.vsdiag=void 0;const r=n(99566);const i=n(76062);const s=n(3302);const o=n(56257);const a=n(86389);function ensure(e,t){if(e[t]===void 0){e[t]={}}return e[t]}var c;(function(e){let t;(function(e){e["full"]="full";e["unChanged"]="unChanged"})(t=e.DocumentDiagnosticReportKind||(e.DocumentDiagnosticReportKind={}))})(c=t.vsdiag||(t.vsdiag={}));var u;(function(e){e["onType"]="onType";e["onSave"]="onSave"})(u=t.DiagnosticPullMode||(t.DiagnosticPullMode={}));var l;(function(e){e["active"]="open";e["reschedule"]="reschedule";e["outDated"]="drop"})(l||(l={}));class Tabs{constructor(){this.open=new Set;this._onOpen=new i.EventEmitter;this._onClose=new i.EventEmitter;Tabs.fillTabResources(this.open);const openTabsHandler=e=>{if(e.closed.length===0&&e.opened.length===0){return}const t=this.open;const n=new Set;Tabs.fillTabResources(n);const r=new Set;const s=new Set(n);for(const e of t.values()){if(n.has(e)){s.delete(e)}else{r.add(e)}}this.open=n;if(r.size>0){const e=new Set;for(const t of r){e.add(i.Uri.parse(t))}this._onClose.fire(e)}if(s.size>0){const e=new Set;for(const t of s){e.add(i.Uri.parse(t))}this._onOpen.fire(e)}};if(i.window.tabGroups.onDidChangeTabs!==undefined){this.disposable=i.window.tabGroups.onDidChangeTabs(openTabsHandler)}else{this.disposable={dispose:()=>{}}}}get onClose(){return this._onClose.event}get onOpen(){return this._onOpen.event}dispose(){this.disposable.dispose()}isActive(e){return e instanceof i.Uri?i.window.activeTextEditor?.document.uri===e:i.window.activeTextEditor?.document===e}isVisible(e){const t=e instanceof i.Uri?e:e.uri;return this.open.has(t.toString())}getTabResources(){const e=new Set;Tabs.fillTabResources(new Set,e);return e}static fillTabResources(e,t){const n=e??new Set;for(const e of i.window.tabGroups.all){for(const r of e.tabs){const e=r.input;let s;if(e instanceof i.TabInputText){s=e.uri}else if(e instanceof i.TabInputTextDiff){s=e.modified}if(s!==undefined&&!n.has(s.toString())){n.add(s.toString());t!==undefined&&t.add(s)}}}}}var d;(function(e){e[e["document"]=1]="document";e[e["workspace"]=2]="workspace"})(d||(d={}));class DocumentPullStateTracker{constructor(){this.documentPullStates=new Map;this.workspacePullStates=new Map}track(e,t,n){const r=e===d.document?this.documentPullStates:this.workspacePullStates;const[s,o,a]=t instanceof i.Uri?[t.toString(),t,n]:[t.uri.toString(),t.uri,t.version];let c=r.get(s);if(c===undefined){c={document:o,pulledVersion:a,resultId:undefined};r.set(s,c)}return c}update(e,t,n,r){const s=e===d.document?this.documentPullStates:this.workspacePullStates;const[o,a,c,u]=t instanceof i.Uri?[t.toString(),t,n,r]:[t.uri.toString(),t.uri,t.version,n];let l=s.get(o);if(l===undefined){l={document:a,pulledVersion:c,resultId:u};s.set(o,l)}else{l.pulledVersion=c;l.resultId=u}}unTrack(e,t){const n=t instanceof i.Uri?t.toString():t.uri.toString();const r=e===d.document?this.documentPullStates:this.workspacePullStates;r.delete(n)}tracks(e,t){const n=t instanceof i.Uri?t.toString():t.uri.toString();const r=e===d.document?this.documentPullStates:this.workspacePullStates;return r.has(n)}getResultId(e,t){const n=t instanceof i.Uri?t.toString():t.uri.toString();const r=e===d.document?this.documentPullStates:this.workspacePullStates;return r.get(n)?.resultId}getAllResultIds(){const e=[];for(let[t,n]of this.workspacePullStates){if(this.documentPullStates.has(t)){n=this.documentPullStates.get(t)}if(n.resultId!==undefined){e.push({uri:t,value:n.resultId})}}return e}}class DiagnosticRequestor{constructor(e,t,n){this.client=e;this.tabs=t;this.options=n;this.isDisposed=false;this.onDidChangeDiagnosticsEmitter=new i.EventEmitter;this.provider=this.createProvider();this.diagnostics=i.languages.createDiagnosticCollection(n.identifier);this.openRequests=new Map;this.documentStates=new DocumentPullStateTracker;this.workspaceErrorCounter=0}knows(e,t){return this.documentStates.tracks(e,t)}forget(e,t){this.documentStates.unTrack(e,t)}pull(e,t){if(this.isDisposed){return}const n=e instanceof i.Uri?e:e.uri;this.pullAsync(e).then((()=>{if(t){t()}}),(e=>{this.client.error(`Document pull failed for text document ${n.toString()}`,e,false)}))}async pullAsync(e,t){if(this.isDisposed){return}const n=e instanceof i.Uri;const r=n?e:e.uri;const o=r.toString();t=n?t:e.version;const u=this.openRequests.get(o);const f=n?this.documentStates.track(d.document,e,t):this.documentStates.track(d.document,e);if(u===undefined){const n=new i.CancellationTokenSource;this.openRequests.set(o,{state:l.active,document:e,version:t,tokenSource:n});let u;let p;try{u=await this.provider.provideDiagnostics(e,f.resultId,n.token)??{kind:c.DocumentDiagnosticReportKind.full,items:[]}}catch(t){if(t instanceof a.LSPCancellationError&&s.DiagnosticServerCancellationData.is(t.data)&&t.data.retriggerRequest===false){p={state:l.outDated,document:e}}if(p===undefined&&t instanceof i.CancellationError){p={state:l.reschedule,document:e}}else{throw t}}p=p??this.openRequests.get(o);if(p===undefined){this.client.error(`Lost request state in diagnostic pull model. Clearing diagnostics for ${o}`);this.diagnostics.delete(r);return}this.openRequests.delete(o);if(!this.tabs.isVisible(e)){this.documentStates.unTrack(d.document,e);return}if(p.state===l.outDated){return}if(u!==undefined){if(u.kind===c.DocumentDiagnosticReportKind.full){this.diagnostics.set(r,u.items)}f.pulledVersion=t;f.resultId=u.resultId}if(p.state===l.reschedule){this.pull(e)}}else{if(u.state===l.active){u.tokenSource.cancel();this.openRequests.set(o,{state:l.reschedule,document:u.document})}else if(u.state===l.outDated){this.openRequests.set(o,{state:l.reschedule,document:u.document})}}}forgetDocument(e){const t=e instanceof i.Uri?e:e.uri;const n=t.toString();const r=this.openRequests.get(n);if(this.options.workspaceDiagnostics){if(r!==undefined){this.openRequests.set(n,{state:l.reschedule,document:e})}else{this.pull(e,(()=>{this.forget(d.document,e)}))}}else{if(r!==undefined){if(r.state===l.active){r.tokenSource.cancel()}this.openRequests.set(n,{state:l.outDated,document:e})}this.diagnostics.delete(t);this.forget(d.document,e)}}pullWorkspace(){if(this.isDisposed){return}this.pullWorkspaceAsync().then((()=>{this.workspaceTimeout=(0,s.RAL)().timer.setTimeout((()=>{this.pullWorkspace()}),2e3)}),(e=>{if(!(e instanceof a.LSPCancellationError)&&!s.DiagnosticServerCancellationData.is(e.data)){this.client.error(`Workspace diagnostic pull failed.`,e,false);this.workspaceErrorCounter++}if(this.workspaceErrorCounter<=5){this.workspaceTimeout=(0,s.RAL)().timer.setTimeout((()=>{this.pullWorkspace()}),2e3)}}))}async pullWorkspaceAsync(){if(!this.provider.provideWorkspaceDiagnostics||this.isDisposed){return}if(this.workspaceCancellation!==undefined){this.workspaceCancellation.cancel();this.workspaceCancellation=undefined}this.workspaceCancellation=new i.CancellationTokenSource;const e=this.documentStates.getAllResultIds().map((e=>({uri:this.client.protocol2CodeConverter.asUri(e.uri),value:e.value})));await this.provider.provideWorkspaceDiagnostics(e,this.workspaceCancellation.token,(e=>{if(!e||this.isDisposed){return}for(const t of e.items){if(t.kind===c.DocumentDiagnosticReportKind.full){if(!this.documentStates.tracks(d.document,t.uri)){this.diagnostics.set(t.uri,t.items)}}this.documentStates.update(d.workspace,t.uri,t.version??undefined,t.resultId)}}))}createProvider(){const e={onDidChangeDiagnostics:this.onDidChangeDiagnosticsEmitter.event,provideDiagnostics:(e,t,n)=>{const provideDiagnostics=(e,t,n)=>{const r={identifier:this.options.identifier,textDocument:{uri:this.client.code2ProtocolConverter.asUri(e instanceof i.Uri?e:e.uri)},previousResultId:t};if(this.isDisposed===true||!this.client.isRunning()){return{kind:c.DocumentDiagnosticReportKind.full,items:[]}}return this.client.sendRequest(s.DocumentDiagnosticRequest.type,r,n).then((async e=>{if(e===undefined||e===null||this.isDisposed||n.isCancellationRequested){return{kind:c.DocumentDiagnosticReportKind.full,items:[]}}if(e.kind===s.DocumentDiagnosticReportKind.Full){return{kind:c.DocumentDiagnosticReportKind.full,resultId:e.resultId,items:await this.client.protocol2CodeConverter.asDiagnostics(e.items,n)}}else{return{kind:c.DocumentDiagnosticReportKind.unChanged,resultId:e.resultId}}}),(e=>this.client.handleFailedRequest(s.DocumentDiagnosticRequest.type,n,e,{kind:c.DocumentDiagnosticReportKind.full,items:[]})))};const r=this.client.middleware;return r.provideDiagnostics?r.provideDiagnostics(e,t,n,provideDiagnostics):provideDiagnostics(e,t,n)}};if(this.options.workspaceDiagnostics){e.provideWorkspaceDiagnostics=(e,t,n)=>{const convertReport=async e=>{if(e.kind===s.DocumentDiagnosticReportKind.Full){return{kind:c.DocumentDiagnosticReportKind.full,uri:this.client.protocol2CodeConverter.asUri(e.uri),resultId:e.resultId,version:e.version,items:await this.client.protocol2CodeConverter.asDiagnostics(e.items,t)}}else{return{kind:c.DocumentDiagnosticReportKind.unChanged,uri:this.client.protocol2CodeConverter.asUri(e.uri),resultId:e.resultId,version:e.version}}};const convertPreviousResultIds=e=>{const t=[];for(const n of e){t.push({uri:this.client.code2ProtocolConverter.asUri(n.uri),value:n.value})}return t};const provideDiagnostics=(e,t)=>{const r=(0,o.generateUuid)();const i=this.client.onProgress(s.WorkspaceDiagnosticRequest.partialResult,r,(async e=>{if(e===undefined||e===null){n(null);return}const t={items:[]};for(const n of e.items){try{t.items.push(await convertReport(n))}catch(e){this.client.error(`Converting workspace diagnostics failed.`,e)}}n(t)}));const a={identifier:this.options.identifier,previousResultIds:convertPreviousResultIds(e),partialResultToken:r};if(this.isDisposed===true||!this.client.isRunning()){return{items:[]}}return this.client.sendRequest(s.WorkspaceDiagnosticRequest.type,a,t).then((async e=>{if(t.isCancellationRequested){return{items:[]}}const r={items:[]};for(const t of e.items){r.items.push(await convertReport(t))}i.dispose();n(r);return{items:[]}}),(e=>{i.dispose();return this.client.handleFailedRequest(s.DocumentDiagnosticRequest.type,t,e,{items:[]})}))};const r=this.client.middleware;return r.provideWorkspaceDiagnostics?r.provideWorkspaceDiagnostics(e,t,n,provideDiagnostics):provideDiagnostics(e,t,n)}}return e}dispose(){this.isDisposed=true;this.workspaceCancellation?.cancel();this.workspaceTimeout?.dispose();for(const[e,t]of this.openRequests){if(t.state===l.active){t.tokenSource.cancel()}this.openRequests.set(e,{state:l.outDated,document:t.document})}this.diagnostics.dispose()}}class BackgroundScheduler{constructor(e){this.diagnosticRequestor=e;this.documents=new s.LinkedMap;this.isDisposed=false}add(e){if(this.isDisposed===true){return}const t=e instanceof i.Uri?e.toString():e.uri.toString();if(this.documents.has(t)){return}this.documents.set(t,e,s.Touch.Last);this.trigger()}remove(e){const t=e instanceof i.Uri?e.toString():e.uri.toString();if(this.documents.has(t)){this.documents.delete(t);this.diagnosticRequestor.pull(e)}if(this.documents.size===0){this.stop()}else if(e===this.endDocument){this.endDocument=this.documents.last}}trigger(){if(this.isDisposed===true){return}if(this.intervalHandle!==undefined){this.endDocument=this.documents.last;return}this.endDocument=this.documents.last;this.intervalHandle=(0,s.RAL)().timer.setInterval((()=>{const e=this.documents.first;if(e!==undefined){const t=e instanceof i.Uri?e.toString():e.uri.toString();this.diagnosticRequestor.pull(e);this.documents.set(t,e,s.Touch.Last);if(e===this.endDocument){this.stop()}}}),200)}dispose(){this.isDisposed=true;this.stop();this.documents.clear()}stop(){this.intervalHandle?.dispose();this.intervalHandle=undefined;this.endDocument=undefined}}class DiagnosticFeatureProviderImpl{constructor(e,t,n){const o=e.clientOptions.diagnosticPullOptions??{onChange:true,onSave:false};const a=e.protocol2CodeConverter.asDocumentSelector(n.documentSelector);const c=[];const matchResource=e=>{const t=n.documentSelector;if(o.match!==undefined){return o.match(t,e)}for(const n of t){if(!s.TextDocumentFilter.is(n)){continue}if(typeof n==="string"){return false}if(n.language!==undefined&&n.language!=="*"){return false}if(n.scheme!==undefined&&n.scheme!=="*"&&n.scheme!==e.scheme){return false}if(n.pattern!==undefined){const t=new r.Minimatch(n.pattern,{noext:true});if(!t.makeRe()){return false}if(!t.match(e.fsPath)){return false}}}return true};const matches=e=>e instanceof i.Uri?matchResource(e):i.languages.match(a,e)>0&&t.isVisible(e);const isActiveDocument=e=>e instanceof i.Uri?this.activeTextDocument?.uri.toString()===e.toString():this.activeTextDocument===e;this.diagnosticRequestor=new DiagnosticRequestor(e,t,n);this.backgroundScheduler=new BackgroundScheduler(this.diagnosticRequestor);const addToBackgroundIfNeeded=e=>{if(!matches(e)||!n.interFileDependencies||isActiveDocument(e)){return}this.backgroundScheduler.add(e)};this.activeTextDocument=i.window.activeTextEditor?.document;i.window.onDidChangeActiveTextEditor((e=>{const t=this.activeTextDocument;this.activeTextDocument=e?.document;if(t!==undefined){addToBackgroundIfNeeded(t)}if(this.activeTextDocument!==undefined){this.backgroundScheduler.remove(this.activeTextDocument)}}));const l=e.getFeature(s.DidOpenTextDocumentNotification.method);c.push(l.onNotificationSent((e=>{const t=e.original;if(matches(t)){this.diagnosticRequestor.pull(t,(()=>{addToBackgroundIfNeeded(t)}))}})));const f=new Set;for(const e of i.workspace.textDocuments){if(matches(e)){this.diagnosticRequestor.pull(e,(()=>{addToBackgroundIfNeeded(e)}));f.add(e.uri.toString())}}if(o.onTabs===true){for(const e of t.getTabResources()){if(!f.has(e.toString())&&matches(e)){this.diagnosticRequestor.pull(e,(()=>{addToBackgroundIfNeeded(e)}))}}}t.onOpen((e=>{for(const t of e){if(matches(t)&&!this.diagnosticRequestor.knows(d.document,t)){this.diagnosticRequestor.pull(t,(()=>{addToBackgroundIfNeeded(t)}))}}}));if(o.onChange===true){const t=e.getFeature(s.DidChangeTextDocumentNotification.method);c.push(t.onNotificationSent((async e=>{const t=e.original.document;if((o.filter===undefined||!o.filter(t,u.onType))&&this.diagnosticRequestor.knows(d.document,t)&&e.original.contentChanges.length>0){this.diagnosticRequestor.pull(t,(()=>{this.backgroundScheduler.trigger()}))}})))}if(o.onSave===true){const t=e.getFeature(s.DidSaveTextDocumentNotification.method);c.push(t.onNotificationSent((e=>{const t=e.original;if((o.filter===undefined||!o.filter(t,u.onSave))&&this.diagnosticRequestor.knows(d.document,t)){this.diagnosticRequestor.pull(e.original,(()=>{this.backgroundScheduler.trigger()}))}})))}const p=e.getFeature(s.DidCloseTextDocumentNotification.method);c.push(p.onNotificationSent((e=>{this.cleanUpDocument(e.original)})));t.onClose((e=>{for(const t of e){this.cleanUpDocument(t)}}));this.diagnosticRequestor.onDidChangeDiagnosticsEmitter.event((()=>{for(const e of i.workspace.textDocuments){if(matches(e)){this.diagnosticRequestor.pull(e)}}}));if(n.workspaceDiagnostics===true&&n.identifier!=="da348dc5-c30a-4515-9d98-31ff3be38d14"){this.diagnosticRequestor.pullWorkspace()}this.disposable=i.Disposable.from(...c,this.backgroundScheduler,this.diagnosticRequestor)}get onDidChangeDiagnosticsEmitter(){return this.diagnosticRequestor.onDidChangeDiagnosticsEmitter}get diagnostics(){return this.diagnosticRequestor.provider}cleanUpDocument(e){if(this.diagnosticRequestor.knows(d.document,e)){this.diagnosticRequestor.forgetDocument(e);this.backgroundScheduler.remove(e)}}}class DiagnosticFeature extends a.TextDocumentLanguageFeature{constructor(e){super(e,s.DocumentDiagnosticRequest.type)}fillClientCapabilities(e){let t=ensure(ensure(e,"textDocument"),"diagnostic");t.dynamicRegistration=true;t.relatedDocumentSupport=false;ensure(ensure(e,"workspace"),"diagnostics").refreshSupport=true}initialize(e,t){const n=this._client;n.onRequest(s.DiagnosticRefreshRequest.type,(async()=>{for(const e of this.getAllProviders()){e.onDidChangeDiagnosticsEmitter.fire()}}));let[r,i]=this.getRegistration(t,e.diagnosticProvider);if(!r||!i){return}this.register({id:r,registerOptions:i})}dispose(){if(this.tabs!==undefined){this.tabs.dispose();this.tabs=undefined}super.dispose()}registerLanguageProvider(e){if(this.tabs===undefined){this.tabs=new Tabs}const t=new DiagnosticFeatureProviderImpl(this._client,this.tabs,e);return[t.disposable,t]}}t.DiagnosticFeature=DiagnosticFeature},22018:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DocumentHighlightFeature=void 0;const r=n(76062);const i=n(3302);const s=n(86389);const o=n(56257);class DocumentHighlightFeature extends s.TextDocumentLanguageFeature{constructor(e){super(e,i.DocumentHighlightRequest.type)}fillClientCapabilities(e){(0,s.ensure)((0,s.ensure)(e,"textDocument"),"documentHighlight").dynamicRegistration=true}initialize(e,t){const n=this.getRegistrationOptions(t,e.documentHighlightProvider);if(!n){return}this.register({id:o.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector;const n={provideDocumentHighlights:(e,t,n)=>{const r=this._client;const _provideDocumentHighlights=(e,t,n)=>r.sendRequest(i.DocumentHighlightRequest.type,r.code2ProtocolConverter.asTextDocumentPositionParams(e,t),n).then((e=>{if(n.isCancellationRequested){return null}return r.protocol2CodeConverter.asDocumentHighlights(e,n)}),(e=>r.handleFailedRequest(i.DocumentHighlightRequest.type,n,e,null)));const s=r.middleware;return s.provideDocumentHighlights?s.provideDocumentHighlights(e,t,n,_provideDocumentHighlights):_provideDocumentHighlights(e,t,n)}};return[r.languages.registerDocumentHighlightProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n),n]}}t.DocumentHighlightFeature=DocumentHighlightFeature},86009:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DocumentLinkFeature=void 0;const r=n(76062);const i=n(3302);const s=n(86389);const o=n(56257);class DocumentLinkFeature extends s.TextDocumentLanguageFeature{constructor(e){super(e,i.DocumentLinkRequest.type)}fillClientCapabilities(e){const t=(0,s.ensure)((0,s.ensure)(e,"textDocument"),"documentLink");t.dynamicRegistration=true;t.tooltipSupport=true}initialize(e,t){const n=this.getRegistrationOptions(t,e.documentLinkProvider);if(!n){return}this.register({id:o.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector;const n={provideDocumentLinks:(e,t)=>{const n=this._client;const provideDocumentLinks=(e,t)=>n.sendRequest(i.DocumentLinkRequest.type,n.code2ProtocolConverter.asDocumentLinkParams(e),t).then((e=>{if(t.isCancellationRequested){return null}return n.protocol2CodeConverter.asDocumentLinks(e,t)}),(e=>n.handleFailedRequest(i.DocumentLinkRequest.type,t,e,null)));const r=n.middleware;return r.provideDocumentLinks?r.provideDocumentLinks(e,t,provideDocumentLinks):provideDocumentLinks(e,t)},resolveDocumentLink:e.resolveProvider?(e,t)=>{const n=this._client;let resolveDocumentLink=(e,t)=>n.sendRequest(i.DocumentLinkResolveRequest.type,n.code2ProtocolConverter.asDocumentLink(e),t).then((r=>{if(t.isCancellationRequested){return e}return n.protocol2CodeConverter.asDocumentLink(r)}),(r=>n.handleFailedRequest(i.DocumentLinkResolveRequest.type,t,r,e)));const r=n.middleware;return r.resolveDocumentLink?r.resolveDocumentLink(e,t,resolveDocumentLink):resolveDocumentLink(e,t)}:undefined};return[r.languages.registerDocumentLinkProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n),n]}}t.DocumentLinkFeature=DocumentLinkFeature},19853:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DocumentSymbolFeature=t.SupportedSymbolTags=t.SupportedSymbolKinds=void 0;const r=n(76062);const i=n(3302);const s=n(86389);const o=n(56257);t.SupportedSymbolKinds=[i.SymbolKind.File,i.SymbolKind.Module,i.SymbolKind.Namespace,i.SymbolKind.Package,i.SymbolKind.Class,i.SymbolKind.Method,i.SymbolKind.Property,i.SymbolKind.Field,i.SymbolKind.Constructor,i.SymbolKind.Enum,i.SymbolKind.Interface,i.SymbolKind.Function,i.SymbolKind.Variable,i.SymbolKind.Constant,i.SymbolKind.String,i.SymbolKind.Number,i.SymbolKind.Boolean,i.SymbolKind.Array,i.SymbolKind.Object,i.SymbolKind.Key,i.SymbolKind.Null,i.SymbolKind.EnumMember,i.SymbolKind.Struct,i.SymbolKind.Event,i.SymbolKind.Operator,i.SymbolKind.TypeParameter];t.SupportedSymbolTags=[i.SymbolTag.Deprecated];class DocumentSymbolFeature extends s.TextDocumentLanguageFeature{constructor(e){super(e,i.DocumentSymbolRequest.type)}fillClientCapabilities(e){let n=(0,s.ensure)((0,s.ensure)(e,"textDocument"),"documentSymbol");n.dynamicRegistration=true;n.symbolKind={valueSet:t.SupportedSymbolKinds};n.hierarchicalDocumentSymbolSupport=true;n.tagSupport={valueSet:t.SupportedSymbolTags};n.labelSupport=true}initialize(e,t){const n=this.getRegistrationOptions(t,e.documentSymbolProvider);if(!n){return}this.register({id:o.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector;const n={provideDocumentSymbols:(e,t)=>{const n=this._client;const _provideDocumentSymbols=(e,t)=>n.sendRequest(i.DocumentSymbolRequest.type,n.code2ProtocolConverter.asDocumentSymbolParams(e),t).then((async e=>{if(t.isCancellationRequested||e===undefined||e===null){return null}if(e.length===0){return[]}else{const r=e[0];if(i.DocumentSymbol.is(r)){return await n.protocol2CodeConverter.asDocumentSymbols(e,t)}else{return await n.protocol2CodeConverter.asSymbolInformations(e,t)}}}),(e=>n.handleFailedRequest(i.DocumentSymbolRequest.type,t,e,null)));const r=n.middleware;return r.provideDocumentSymbols?r.provideDocumentSymbols(e,t,_provideDocumentSymbols):_provideDocumentSymbols(e,t)}};const s=e.label!==undefined?{label:e.label}:undefined;return[r.languages.registerDocumentSymbolProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n,s),n]}}t.DocumentSymbolFeature=DocumentSymbolFeature},5543:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ExecuteCommandFeature=void 0;const r=n(76062);const i=n(3302);const s=n(56257);const o=n(86389);class ExecuteCommandFeature{constructor(e){this._client=e;this._commands=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._commands.size>0}}get registrationType(){return i.ExecuteCommandRequest.type}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"workspace"),"executeCommand").dynamicRegistration=true}initialize(e){if(!e.executeCommandProvider){return}this.register({id:s.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e){const t=this._client;const n=t.middleware;const executeCommand=(e,n)=>{let r={command:e,arguments:n};return t.sendRequest(i.ExecuteCommandRequest.type,r).then(undefined,(e=>t.handleFailedRequest(i.ExecuteCommandRequest.type,undefined,e,undefined)))};if(e.registerOptions.commands){const t=[];for(const i of e.registerOptions.commands){t.push(r.commands.registerCommand(i,((...e)=>n.executeCommand?n.executeCommand(i,e,executeCommand):executeCommand(i,e))))}this._commands.set(e.id,t)}}unregister(e){let t=this._commands.get(e);if(t){t.forEach((e=>e.dispose()))}}dispose(){this._commands.forEach((e=>{e.forEach((e=>e.dispose()))}));this._commands.clear()}}t.ExecuteCommandFeature=ExecuteCommandFeature},86389:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.WorkspaceFeature=t.TextDocumentLanguageFeature=t.TextDocumentEventFeature=t.DynamicDocumentFeature=t.DynamicFeature=t.StaticFeature=t.ensure=t.LSPCancellationError=void 0;const r=n(76062);const i=n(3302);const s=n(42173);const o=n(56257);class LSPCancellationError extends r.CancellationError{constructor(e){super();this.data=e}}t.LSPCancellationError=LSPCancellationError;function ensure(e,t){if(e[t]===undefined){e[t]={}}return e[t]}t.ensure=ensure;var a;(function(e){function is(e){const t=e;return t!==undefined&&t!==null&&s.func(t.fillClientCapabilities)&&s.func(t.initialize)&&s.func(t.getState)&&s.func(t.dispose)&&(t.fillInitializeParams===undefined||s.func(t.fillInitializeParams))}e.is=is})(a=t.StaticFeature||(t.StaticFeature={}));var c;(function(e){function is(e){const t=e;return t!==undefined&&t!==null&&s.func(t.fillClientCapabilities)&&s.func(t.initialize)&&s.func(t.getState)&&s.func(t.dispose)&&(t.fillInitializeParams===undefined||s.func(t.fillInitializeParams))&&s.func(t.register)&&s.func(t.unregister)&&t.registrationType!==undefined}e.is=is})(c=t.DynamicFeature||(t.DynamicFeature={}));class DynamicDocumentFeature{constructor(e){this._client=e}getState(){const e=this.getDocumentSelectors();let t=0;for(const n of e){t++;for(const e of r.workspace.textDocuments){if(r.languages.match(n,e)>0){return{kind:"document",id:this.registrationType.method,registrations:true,matches:true}}}}const n=t>0;return{kind:"document",id:this.registrationType.method,registrations:n,matches:false}}}t.DynamicDocumentFeature=DynamicDocumentFeature;class TextDocumentEventFeature extends DynamicDocumentFeature{constructor(e,t,n,i,s,o,a){super(e);this._event=t;this._type=n;this._middleware=i;this._createParams=s;this._textDocument=o;this._selectorFilter=a;this._selectors=new Map;this._onNotificationSent=new r.EventEmitter}static textDocumentFilter(e,t){for(const n of e){if(r.languages.match(n,t)>0){return true}}return false}getStateInfo(){return[this._selectors.values(),false]}getDocumentSelectors(){return this._selectors.values()}register(e){if(!e.registerOptions.documentSelector){return}if(!this._listener){this._listener=this._event((e=>{this.callback(e).catch((e=>{this._client.error(`Sending document notification ${this._type.method} failed.`,e)}))}))}this._selectors.set(e.id,this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector))}async callback(e){const doSend=async e=>{const t=this._createParams(e);await this._client.sendNotification(this._type,t).catch();this.notificationSent(e,this._type,t)};if(this.matches(e)){const t=this._middleware();return t?t(e,(e=>doSend(e))):doSend(e)}}matches(e){if(this._client.hasDedicatedTextSynchronizationFeature(this._textDocument(e))){return false}return!this._selectorFilter||this._selectorFilter(this._selectors.values(),e)}get onNotificationSent(){return this._onNotificationSent.event}notificationSent(e,t,n){this._onNotificationSent.fire({original:e,type:t,params:n})}unregister(e){this._selectors.delete(e);if(this._selectors.size===0&&this._listener){this._listener.dispose();this._listener=undefined}}dispose(){this._selectors.clear();this._onNotificationSent.dispose();if(this._listener){this._listener.dispose();this._listener=undefined}}getProvider(e){for(const t of this._selectors.values()){if(r.languages.match(t,e)>0){return{send:e=>this.callback(e)}}}return undefined}}t.TextDocumentEventFeature=TextDocumentEventFeature;class TextDocumentLanguageFeature extends DynamicDocumentFeature{constructor(e,t){super(e);this._registrationType=t;this._registrations=new Map}*getDocumentSelectors(){for(const e of this._registrations.values()){const t=e.data.registerOptions.documentSelector;if(t===null){continue}yield this._client.protocol2CodeConverter.asDocumentSelector(t)}}get registrationType(){return this._registrationType}register(e){if(!e.registerOptions.documentSelector){return}let t=this.registerLanguageProvider(e.registerOptions,e.id);this._registrations.set(e.id,{disposable:t[0],data:e,provider:t[1]})}unregister(e){let t=this._registrations.get(e);if(t!==undefined){t.disposable.dispose()}}dispose(){this._registrations.forEach((e=>{e.disposable.dispose()}));this._registrations.clear()}getRegistration(e,t){if(!t){return[undefined,undefined]}else if(i.TextDocumentRegistrationOptions.is(t)){const n=i.StaticRegistrationOptions.hasId(t)?t.id:o.generateUuid();const r=t.documentSelector||e;if(r){return[n,Object.assign({},t,{documentSelector:r})]}}else if(s.boolean(t)&&t===true||i.WorkDoneProgressOptions.is(t)){if(!e){return[undefined,undefined]}let n=s.boolean(t)&&t===true?{documentSelector:e}:Object.assign({},t,{documentSelector:e});return[o.generateUuid(),n]}return[undefined,undefined]}getRegistrationOptions(e,t){if(!e||!t){return undefined}return s.boolean(t)&&t===true?{documentSelector:e}:Object.assign({},t,{documentSelector:e})}getProvider(e){for(const t of this._registrations.values()){let n=t.data.registerOptions.documentSelector;if(n!==null&&r.languages.match(this._client.protocol2CodeConverter.asDocumentSelector(n),e)>0){return t.provider}}return undefined}getAllProviders(){const e=[];for(const t of this._registrations.values()){e.push(t.provider)}return e}}t.TextDocumentLanguageFeature=TextDocumentLanguageFeature;class WorkspaceFeature{constructor(e,t){this._client=e;this._registrationType=t;this._registrations=new Map}getState(){const e=this._registrations.size>0;return{kind:"workspace",id:this._registrationType.method,registrations:e}}get registrationType(){return this._registrationType}register(e){const t=this.registerLanguageProvider(e.registerOptions);this._registrations.set(e.id,{disposable:t[0],provider:t[1]})}unregister(e){let t=this._registrations.get(e);if(t!==undefined){t.disposable.dispose()}}dispose(){this._registrations.forEach((e=>{e.disposable.dispose()}));this._registrations.clear()}getProviders(){const e=[];for(const t of this._registrations.values()){e.push(t.provider)}return e}}t.WorkspaceFeature=WorkspaceFeature},99322:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.WillDeleteFilesFeature=t.WillRenameFilesFeature=t.WillCreateFilesFeature=t.DidDeleteFilesFeature=t.DidRenameFilesFeature=t.DidCreateFilesFeature=void 0;const r=n(76062);const i=n(99566);const s=n(3302);const o=n(56257);function ensure(e,t){if(e[t]===void 0){e[t]={}}return e[t]}function access(e,t){return e[t]}function assign(e,t,n){e[t]=n}class FileOperationFeature{constructor(e,t,n,r,i){this._client=e;this._event=t;this._registrationType=n;this._clientCapability=r;this._serverCapability=i;this._filters=new Map}getState(){return{kind:"workspace",id:this._registrationType.method,registrations:this._filters.size>0}}filterSize(){return this._filters.size}get registrationType(){return this._registrationType}fillClientCapabilities(e){const t=ensure(ensure(e,"workspace"),"fileOperations");assign(t,"dynamicRegistration",true);assign(t,this._clientCapability,true)}initialize(e){const t=e.workspace?.fileOperations;const n=t!==undefined?access(t,this._serverCapability):undefined;if(n?.filters!==undefined){try{this.register({id:o.generateUuid(),registerOptions:{filters:n.filters}})}catch(e){this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${e}`)}}}register(e){if(!this._listener){this._listener=this._event(this.send,this)}const t=e.registerOptions.filters.map((e=>{const t=new i.Minimatch(e.pattern.glob,FileOperationFeature.asMinimatchOptions(e.pattern.options));if(!t.makeRe()){throw new Error(`Invalid pattern ${e.pattern.glob}!`)}return{scheme:e.scheme,matcher:t,kind:e.pattern.matches}}));this._filters.set(e.id,t)}unregister(e){this._filters.delete(e);if(this._filters.size===0&&this._listener){this._listener.dispose();this._listener=undefined}}dispose(){this._filters.clear();if(this._listener){this._listener.dispose();this._listener=undefined}}getFileType(e){return FileOperationFeature.getFileType(e)}async filter(e,t){const n=await Promise.all(e.files.map((async e=>{const n=t(e);const i=n.fsPath.replace(/\\/g,"/");for(const e of this._filters.values()){for(const t of e){if(t.scheme!==undefined&&t.scheme!==n.scheme){continue}if(t.matcher.match(i)){if(t.kind===undefined){return true}const e=await this.getFileType(n);if(e===undefined){this._client.error(`Failed to determine file type for ${n.toString()}.`);return true}if(e===r.FileType.File&&t.kind===s.FileOperationPatternKind.file||e===r.FileType.Directory&&t.kind===s.FileOperationPatternKind.folder){return true}}else if(t.kind===s.FileOperationPatternKind.folder){const e=await FileOperationFeature.getFileType(n);if(e===r.FileType.Directory&&t.matcher.match(`${i}/`)){return true}}}}return false})));const i=e.files.filter(((e,t)=>n[t]));return{...e,files:i}}static async getFileType(e){try{return(await r.workspace.fs.stat(e)).type}catch(e){return undefined}}static asMinimatchOptions(e){if(e===undefined){return undefined}if(e.ignoreCase===true){return{nocase:true}}return undefined}}class NotificationFileOperationFeature extends FileOperationFeature{constructor(e,t,n,r,i,s,o){super(e,t,n,r,i);this._notificationType=n;this._accessUri=s;this._createParams=o}async send(e){const t=await this.filter(e,this._accessUri);if(t.files.length){const next=async e=>this._client.sendNotification(this._notificationType,this._createParams(e));return this.doSend(t,next)}}}class CachingNotificationFileOperationFeature extends NotificationFileOperationFeature{constructor(){super(...arguments);this._fsPathFileTypes=new Map}async getFileType(e){const t=e.fsPath;if(this._fsPathFileTypes.has(t)){return this._fsPathFileTypes.get(t)}const n=await FileOperationFeature.getFileType(e);if(n){this._fsPathFileTypes.set(t,n)}return n}async cacheFileTypes(e,t){await this.filter(e,t)}clearFileTypeCache(){this._fsPathFileTypes.clear()}unregister(e){super.unregister(e);if(this.filterSize()===0&&this._willListener){this._willListener.dispose();this._willListener=undefined}}dispose(){super.dispose();if(this._willListener){this._willListener.dispose();this._willListener=undefined}}}class DidCreateFilesFeature extends NotificationFileOperationFeature{constructor(e){super(e,r.workspace.onDidCreateFiles,s.DidCreateFilesNotification.type,"didCreate","didCreate",(e=>e),e.code2ProtocolConverter.asDidCreateFilesParams)}doSend(e,t){const n=this._client.middleware.workspace;return n?.didCreateFiles?n.didCreateFiles(e,t):t(e)}}t.DidCreateFilesFeature=DidCreateFilesFeature;class DidRenameFilesFeature extends CachingNotificationFileOperationFeature{constructor(e){super(e,r.workspace.onDidRenameFiles,s.DidRenameFilesNotification.type,"didRename","didRename",(e=>e.oldUri),e.code2ProtocolConverter.asDidRenameFilesParams)}register(e){if(!this._willListener){this._willListener=r.workspace.onWillRenameFiles(this.willRename,this)}super.register(e)}willRename(e){e.waitUntil(this.cacheFileTypes(e,(e=>e.oldUri)))}doSend(e,t){this.clearFileTypeCache();const n=this._client.middleware.workspace;return n?.didRenameFiles?n.didRenameFiles(e,t):t(e)}}t.DidRenameFilesFeature=DidRenameFilesFeature;class DidDeleteFilesFeature extends CachingNotificationFileOperationFeature{constructor(e){super(e,r.workspace.onDidDeleteFiles,s.DidDeleteFilesNotification.type,"didDelete","didDelete",(e=>e),e.code2ProtocolConverter.asDidDeleteFilesParams)}register(e){if(!this._willListener){this._willListener=r.workspace.onWillDeleteFiles(this.willDelete,this)}super.register(e)}willDelete(e){e.waitUntil(this.cacheFileTypes(e,(e=>e)))}doSend(e,t){this.clearFileTypeCache();const n=this._client.middleware.workspace;return n?.didDeleteFiles?n.didDeleteFiles(e,t):t(e)}}t.DidDeleteFilesFeature=DidDeleteFilesFeature;class RequestFileOperationFeature extends FileOperationFeature{constructor(e,t,n,r,i,s,o){super(e,t,n,r,i);this._requestType=n;this._accessUri=s;this._createParams=o}async send(e){const t=this.waitUntil(e);e.waitUntil(t)}async waitUntil(e){const t=await this.filter(e,this._accessUri);if(t.files.length){const next=e=>this._client.sendRequest(this._requestType,this._createParams(e),e.token).then(this._client.protocol2CodeConverter.asWorkspaceEdit);return this.doSend(t,next)}else{return undefined}}}class WillCreateFilesFeature extends RequestFileOperationFeature{constructor(e){super(e,r.workspace.onWillCreateFiles,s.WillCreateFilesRequest.type,"willCreate","willCreate",(e=>e),e.code2ProtocolConverter.asWillCreateFilesParams)}doSend(e,t){const n=this._client.middleware.workspace;return n?.willCreateFiles?n.willCreateFiles(e,t):t(e)}}t.WillCreateFilesFeature=WillCreateFilesFeature;class WillRenameFilesFeature extends RequestFileOperationFeature{constructor(e){super(e,r.workspace.onWillRenameFiles,s.WillRenameFilesRequest.type,"willRename","willRename",(e=>e.oldUri),e.code2ProtocolConverter.asWillRenameFilesParams)}doSend(e,t){const n=this._client.middleware.workspace;return n?.willRenameFiles?n.willRenameFiles(e,t):t(e)}}t.WillRenameFilesFeature=WillRenameFilesFeature;class WillDeleteFilesFeature extends RequestFileOperationFeature{constructor(e){super(e,r.workspace.onWillDeleteFiles,s.WillDeleteFilesRequest.type,"willDelete","willDelete",(e=>e),e.code2ProtocolConverter.asWillDeleteFilesParams)}doSend(e,t){const n=this._client.middleware.workspace;return n?.willDeleteFiles?n.willDeleteFiles(e,t):t(e)}}t.WillDeleteFilesFeature=WillDeleteFilesFeature},52988:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FileSystemWatcherFeature=void 0;const r=n(76062);const i=n(3302);const s=n(86389);class FileSystemWatcherFeature{constructor(e,t){this._client=e;this._notifyFileEvent=t;this._watchers=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._watchers.size>0}}get registrationType(){return i.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){(0,s.ensure)((0,s.ensure)(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=true;(0,s.ensure)((0,s.ensure)(e,"workspace"),"didChangeWatchedFiles").relativePatternSupport=true}initialize(e,t){}register(e){if(!Array.isArray(e.registerOptions.watchers)){return}const t=[];for(const n of e.registerOptions.watchers){const e=this._client.protocol2CodeConverter.asGlobPattern(n.globPattern);if(e===undefined){continue}let s=true,o=true,a=true;if(n.kind!==undefined&&n.kind!==null){s=(n.kind&i.WatchKind.Create)!==0;o=(n.kind&i.WatchKind.Change)!==0;a=(n.kind&i.WatchKind.Delete)!==0}const c=r.workspace.createFileSystemWatcher(e,!s,!o,!a);this.hookListeners(c,s,o,a,t);t.push(c)}this._watchers.set(e.id,t)}registerRaw(e,t){let n=[];for(let e of t){this.hookListeners(e,true,true,true,n)}this._watchers.set(e,n)}hookListeners(e,t,n,r,s){if(t){e.onDidCreate((e=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(e),type:i.FileChangeType.Created})),null,s)}if(n){e.onDidChange((e=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(e),type:i.FileChangeType.Changed})),null,s)}if(r){e.onDidDelete((e=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(e),type:i.FileChangeType.Deleted})),null,s)}}unregister(e){let t=this._watchers.get(e);if(t){for(let e of t){e.dispose()}}}dispose(){this._watchers.forEach((e=>{for(let t of e){t.dispose()}}));this._watchers.clear()}}t.FileSystemWatcherFeature=FileSystemWatcherFeature},1607:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FoldingRangeFeature=void 0;const r=n(76062);const i=n(3302);const s=n(86389);class FoldingRangeFeature extends s.TextDocumentLanguageFeature{constructor(e){super(e,i.FoldingRangeRequest.type)}fillClientCapabilities(e){let t=(0,s.ensure)((0,s.ensure)(e,"textDocument"),"foldingRange");t.dynamicRegistration=true;t.rangeLimit=5e3;t.lineFoldingOnly=true;t.foldingRangeKind={valueSet:[i.FoldingRangeKind.Comment,i.FoldingRangeKind.Imports,i.FoldingRangeKind.Region]};t.foldingRange={collapsedText:false}}initialize(e,t){let[n,r]=this.getRegistration(t,e.foldingRangeProvider);if(!n||!r){return}this.register({id:n,registerOptions:r})}registerLanguageProvider(e){const t=e.documentSelector;const n={provideFoldingRanges:(e,t,n)=>{const r=this._client;const provideFoldingRanges=(e,t,n)=>{const s={textDocument:r.code2ProtocolConverter.asTextDocumentIdentifier(e)};return r.sendRequest(i.FoldingRangeRequest.type,s,n).then((e=>{if(n.isCancellationRequested){return null}return r.protocol2CodeConverter.asFoldingRanges(e,n)}),(e=>r.handleFailedRequest(i.FoldingRangeRequest.type,n,e,null)))};const s=r.middleware;return s.provideFoldingRanges?s.provideFoldingRanges(e,t,n,provideFoldingRanges):provideFoldingRanges(e,t,n)}};return[r.languages.registerFoldingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n),n]}}t.FoldingRangeFeature=FoldingRangeFeature},85122:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DocumentOnTypeFormattingFeature=t.DocumentRangeFormattingFeature=t.DocumentFormattingFeature=void 0;const r=n(76062);const i=n(3302);const s=n(56257);const o=n(86389);var a;(function(e){function fromConfiguration(e){const t=r.workspace.getConfiguration("files",e);return{trimTrailingWhitespace:t.get("trimTrailingWhitespace"),trimFinalNewlines:t.get("trimFinalNewlines"),insertFinalNewline:t.get("insertFinalNewline")}}e.fromConfiguration=fromConfiguration})(a||(a={}));class DocumentFormattingFeature extends o.TextDocumentLanguageFeature{constructor(e){super(e,i.DocumentFormattingRequest.type)}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"textDocument"),"formatting").dynamicRegistration=true}initialize(e,t){const n=this.getRegistrationOptions(t,e.documentFormattingProvider);if(!n){return}this.register({id:s.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector;const n={provideDocumentFormattingEdits:(e,t,n)=>{const r=this._client;const provideDocumentFormattingEdits=(e,t,n)=>{const s={textDocument:r.code2ProtocolConverter.asTextDocumentIdentifier(e),options:r.code2ProtocolConverter.asFormattingOptions(t,a.fromConfiguration(e))};return r.sendRequest(i.DocumentFormattingRequest.type,s,n).then((e=>{if(n.isCancellationRequested){return null}return r.protocol2CodeConverter.asTextEdits(e,n)}),(e=>r.handleFailedRequest(i.DocumentFormattingRequest.type,n,e,null)))};const s=r.middleware;return s.provideDocumentFormattingEdits?s.provideDocumentFormattingEdits(e,t,n,provideDocumentFormattingEdits):provideDocumentFormattingEdits(e,t,n)}};return[r.languages.registerDocumentFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n),n]}}t.DocumentFormattingFeature=DocumentFormattingFeature;class DocumentRangeFormattingFeature extends o.TextDocumentLanguageFeature{constructor(e){super(e,i.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"textDocument"),"rangeFormatting").dynamicRegistration=true}initialize(e,t){const n=this.getRegistrationOptions(t,e.documentRangeFormattingProvider);if(!n){return}this.register({id:s.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector;const n={provideDocumentRangeFormattingEdits:(e,t,n,r)=>{const s=this._client;const provideDocumentRangeFormattingEdits=(e,t,n,r)=>{const o={textDocument:s.code2ProtocolConverter.asTextDocumentIdentifier(e),range:s.code2ProtocolConverter.asRange(t),options:s.code2ProtocolConverter.asFormattingOptions(n,a.fromConfiguration(e))};return s.sendRequest(i.DocumentRangeFormattingRequest.type,o,r).then((e=>{if(r.isCancellationRequested){return null}return s.protocol2CodeConverter.asTextEdits(e,r)}),(e=>s.handleFailedRequest(i.DocumentRangeFormattingRequest.type,r,e,null)))};const o=s.middleware;return o.provideDocumentRangeFormattingEdits?o.provideDocumentRangeFormattingEdits(e,t,n,r,provideDocumentRangeFormattingEdits):provideDocumentRangeFormattingEdits(e,t,n,r)}};return[r.languages.registerDocumentRangeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n),n]}}t.DocumentRangeFormattingFeature=DocumentRangeFormattingFeature;class DocumentOnTypeFormattingFeature extends o.TextDocumentLanguageFeature{constructor(e){super(e,i.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){(0,o.ensure)((0,o.ensure)(e,"textDocument"),"onTypeFormatting").dynamicRegistration=true}initialize(e,t){const n=this.getRegistrationOptions(t,e.documentOnTypeFormattingProvider);if(!n){return}this.register({id:s.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector;const n={provideOnTypeFormattingEdits:(e,t,n,r,s)=>{const o=this._client;const provideOnTypeFormattingEdits=(e,t,n,r,s)=>{let c={textDocument:o.code2ProtocolConverter.asTextDocumentIdentifier(e),position:o.code2ProtocolConverter.asPosition(t),ch:n,options:o.code2ProtocolConverter.asFormattingOptions(r,a.fromConfiguration(e))};return o.sendRequest(i.DocumentOnTypeFormattingRequest.type,c,s).then((e=>{if(s.isCancellationRequested){return null}return o.protocol2CodeConverter.asTextEdits(e,s)}),(e=>o.handleFailedRequest(i.DocumentOnTypeFormattingRequest.type,s,e,null)))};const c=o.middleware;return c.provideOnTypeFormattingEdits?c.provideOnTypeFormattingEdits(e,t,n,r,s,provideOnTypeFormattingEdits):provideOnTypeFormattingEdits(e,t,n,r,s)}};const s=e.moreTriggerCharacter||[];return[r.languages.registerOnTypeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n,e.firstTriggerCharacter,...s),n]}}t.DocumentOnTypeFormattingFeature=DocumentOnTypeFormattingFeature},76785:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.HoverFeature=void 0;const r=n(76062);const i=n(3302);const s=n(86389);const o=n(56257);class HoverFeature extends s.TextDocumentLanguageFeature{constructor(e){super(e,i.HoverRequest.type)}fillClientCapabilities(e){const t=(0,s.ensure)((0,s.ensure)(e,"textDocument"),"hover");t.dynamicRegistration=true;t.contentFormat=[i.MarkupKind.Markdown,i.MarkupKind.PlainText]}initialize(e,t){const n=this.getRegistrationOptions(t,e.hoverProvider);if(!n){return}this.register({id:o.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector;const n={provideHover:(e,t,n)=>{const r=this._client;const provideHover=(e,t,n)=>r.sendRequest(i.HoverRequest.type,r.code2ProtocolConverter.asTextDocumentPositionParams(e,t),n).then((e=>{if(n.isCancellationRequested){return null}return r.protocol2CodeConverter.asHover(e)}),(e=>r.handleFailedRequest(i.HoverRequest.type,n,e,null)));const s=r.middleware;return s.provideHover?s.provideHover(e,t,n,provideHover):provideHover(e,t,n)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return r.languages.registerHoverProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}t.HoverFeature=HoverFeature},15979:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ImplementationFeature=void 0;const r=n(76062);const i=n(3302);const s=n(86389);class ImplementationFeature extends s.TextDocumentLanguageFeature{constructor(e){super(e,i.ImplementationRequest.type)}fillClientCapabilities(e){let t=(0,s.ensure)((0,s.ensure)(e,"textDocument"),"implementation");t.dynamicRegistration=true;t.linkSupport=true}initialize(e,t){let[n,r]=this.getRegistration(t,e.implementationProvider);if(!n||!r){return}this.register({id:n,registerOptions:r})}registerLanguageProvider(e){const t=e.documentSelector;const n={provideImplementation:(e,t,n)=>{const r=this._client;const provideImplementation=(e,t,n)=>r.sendRequest(i.ImplementationRequest.type,r.code2ProtocolConverter.asTextDocumentPositionParams(e,t),n).then((e=>{if(n.isCancellationRequested){return null}return r.protocol2CodeConverter.asDefinitionResult(e,n)}),(e=>r.handleFailedRequest(i.ImplementationRequest.type,n,e,null)));const s=r.middleware;return s.provideImplementation?s.provideImplementation(e,t,n,provideImplementation):provideImplementation(e,t,n)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return r.languages.registerImplementationProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}t.ImplementationFeature=ImplementationFeature},62832:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.InlayHintsFeature=void 0;const r=n(76062);const i=n(3302);const s=n(86389);class InlayHintsFeature extends s.TextDocumentLanguageFeature{constructor(e){super(e,i.InlayHintRequest.type)}fillClientCapabilities(e){const t=(0,s.ensure)((0,s.ensure)(e,"textDocument"),"inlayHint");t.dynamicRegistration=true;t.resolveSupport={properties:["tooltip","textEdits","label.tooltip","label.location","label.command"]};(0,s.ensure)((0,s.ensure)(e,"workspace"),"inlayHint").refreshSupport=true}initialize(e,t){this._client.onRequest(i.InlayHintRefreshRequest.type,(async()=>{for(const e of this.getAllProviders()){e.onDidChangeInlayHints.fire()}}));const[n,r]=this.getRegistration(t,e.inlayHintProvider);if(!n||!r){return}this.register({id:n,registerOptions:r})}registerLanguageProvider(e){const t=e.documentSelector;const n=new r.EventEmitter;const s={onDidChangeInlayHints:n.event,provideInlayHints:(e,t,n)=>{const r=this._client;const provideInlayHints=async(e,t,n)=>{const s={textDocument:r.code2ProtocolConverter.asTextDocumentIdentifier(e),range:r.code2ProtocolConverter.asRange(t)};try{const e=await r.sendRequest(i.InlayHintRequest.type,s,n);if(n.isCancellationRequested){return null}return r.protocol2CodeConverter.asInlayHints(e,n)}catch(e){return r.handleFailedRequest(i.InlayHintRequest.type,n,e,null)}};const s=r.middleware;return s.provideInlayHints?s.provideInlayHints(e,t,n,provideInlayHints):provideInlayHints(e,t,n)}};s.resolveInlayHint=e.resolveProvider===true?(e,t)=>{const n=this._client;const resolveInlayHint=async(e,t)=>{try{const r=await n.sendRequest(i.InlayHintResolveRequest.type,n.code2ProtocolConverter.asInlayHint(e),t);if(t.isCancellationRequested){return null}const s=n.protocol2CodeConverter.asInlayHint(r,t);return t.isCancellationRequested?null:s}catch(e){return n.handleFailedRequest(i.InlayHintResolveRequest.type,t,e,null)}};const r=n.middleware;return r.resolveInlayHint?r.resolveInlayHint(e,t,resolveInlayHint):resolveInlayHint(e,t)}:undefined;return[this.registerProvider(t,s),{provider:s,onDidChangeInlayHints:n}]}registerProvider(e,t){return r.languages.registerInlayHintsProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}t.InlayHintsFeature=InlayHintsFeature},82506:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.InlineValueFeature=void 0;const r=n(76062);const i=n(3302);const s=n(86389);class InlineValueFeature extends s.TextDocumentLanguageFeature{constructor(e){super(e,i.InlineValueRequest.type)}fillClientCapabilities(e){(0,s.ensure)((0,s.ensure)(e,"textDocument"),"inlineValue").dynamicRegistration=true;(0,s.ensure)((0,s.ensure)(e,"workspace"),"inlineValue").refreshSupport=true}initialize(e,t){this._client.onRequest(i.InlineValueRefreshRequest.type,(async()=>{for(const e of this.getAllProviders()){e.onDidChangeInlineValues.fire()}}));const[n,r]=this.getRegistration(t,e.inlineValueProvider);if(!n||!r){return}this.register({id:n,registerOptions:r})}registerLanguageProvider(e){const t=e.documentSelector;const n=new r.EventEmitter;const s={onDidChangeInlineValues:n.event,provideInlineValues:(e,t,n,r)=>{const s=this._client;const provideInlineValues=(e,t,n,r)=>{const o={textDocument:s.code2ProtocolConverter.asTextDocumentIdentifier(e),range:s.code2ProtocolConverter.asRange(t),context:s.code2ProtocolConverter.asInlineValueContext(n)};return s.sendRequest(i.InlineValueRequest.type,o,r).then((e=>{if(r.isCancellationRequested){return null}return s.protocol2CodeConverter.asInlineValues(e,r)}),(e=>s.handleFailedRequest(i.InlineValueRequest.type,r,e,null)))};const o=s.middleware;return o.provideInlineValues?o.provideInlineValues(e,t,n,r,provideInlineValues):provideInlineValues(e,t,n,r)}};return[this.registerProvider(t,s),{provider:s,onDidChangeInlineValues:n}]}registerProvider(e,t){return r.languages.registerInlineValuesProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}t.InlineValueFeature=InlineValueFeature},91121:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.LinkedEditingFeature=void 0;const r=n(76062);const i=n(3302);const s=n(86389);class LinkedEditingFeature extends s.TextDocumentLanguageFeature{constructor(e){super(e,i.LinkedEditingRangeRequest.type)}fillClientCapabilities(e){const t=(0,s.ensure)((0,s.ensure)(e,"textDocument"),"linkedEditingRange");t.dynamicRegistration=true}initialize(e,t){let[n,r]=this.getRegistration(t,e.linkedEditingRangeProvider);if(!n||!r){return}this.register({id:n,registerOptions:r})}registerLanguageProvider(e){const t=e.documentSelector;const n={provideLinkedEditingRanges:(e,t,n)=>{const r=this._client;const provideLinkedEditing=(e,t,n)=>r.sendRequest(i.LinkedEditingRangeRequest.type,r.code2ProtocolConverter.asTextDocumentPositionParams(e,t),n).then((e=>{if(n.isCancellationRequested){return null}return r.protocol2CodeConverter.asLinkedEditingRanges(e,n)}),(e=>r.handleFailedRequest(i.LinkedEditingRangeRequest.type,n,e,null)));const s=r.middleware;return s.provideLinkedEditingRange?s.provideLinkedEditingRange(e,t,n,provideLinkedEditing):provideLinkedEditing(e,t,n)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return r.languages.registerLinkedEditingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}t.LinkedEditingFeature=LinkedEditingFeature},46999:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.NotebookDocumentSyncFeature=void 0;const r=n(76062);const i=n(99566);const s=n(3302);const o=n(56257);const a=n(42173);function ensure(e,t){if(e[t]===void 0){e[t]={}}return e[t]}var c;(function(e){let t;(function(t){function asVersionedNotebookDocumentIdentifier(e,t){return{version:e.version,uri:t.asUri(e.uri)}}t.asVersionedNotebookDocumentIdentifier=asVersionedNotebookDocumentIdentifier;function asNotebookDocument(e,t,n){const r=s.NotebookDocument.create(n.asUri(e.uri),e.notebookType,e.version,asNotebookCells(t,n));if(Object.keys(e.metadata).length>0){r.metadata=asMetadata(e.metadata)}return r}t.asNotebookDocument=asNotebookDocument;function asNotebookCells(e,t){return e.map((e=>asNotebookCell(e,t)))}t.asNotebookCells=asNotebookCells;function asMetadata(e){const t=new Set;return deepCopy(t,e)}t.asMetadata=asMetadata;function asNotebookCell(e,t){const n=s.NotebookCell.create(asNotebookCellKind(e.kind),t.asUri(e.document.uri));if(Object.keys(e.metadata).length>0){n.metadata=asMetadata(e.metadata)}if(e.executionSummary!==undefined&&(a.number(e.executionSummary.executionOrder)&&a.boolean(e.executionSummary.success))){n.executionSummary={executionOrder:e.executionSummary.executionOrder,success:e.executionSummary.success}}return n}t.asNotebookCell=asNotebookCell;function asNotebookCellKind(e){switch(e){case r.NotebookCellKind.Markup:return s.NotebookCellKind.Markup;case r.NotebookCellKind.Code:return s.NotebookCellKind.Code}}function deepCopy(e,t){if(e.has(t)){throw new Error(`Can't deep copy cyclic structures.`)}if(Array.isArray(t)){const n=[];for(const r of t){if(r!==null&&typeof r==="object"||Array.isArray(r)){n.push(deepCopy(e,r))}else{if(r instanceof RegExp){throw new Error(`Can't transfer regular expressions to the server`)}n.push(r)}}return n}else{const n=Object.keys(t);const r=Object.create(null);for(const i of n){const n=t[i];if(n!==null&&typeof n==="object"||Array.isArray(n)){r[i]=deepCopy(e,n)}else{if(n instanceof RegExp){throw new Error(`Can't transfer regular expressions to the server`)}r[i]=n}}return r}}function asTextContentChange(e,t){const n=t.asChangeTextDocumentParams(e);return{document:n.textDocument,changes:n.contentChanges}}t.asTextContentChange=asTextContentChange;function asNotebookDocumentChangeEvent(t,n){const r=Object.create(null);if(t.metadata){r.metadata=e.c2p.asMetadata(t.metadata)}if(t.cells!==undefined){const i=Object.create(null);const s=t.cells;if(s.structure){i.structure={array:{start:s.structure.array.start,deleteCount:s.structure.array.deleteCount,cells:s.structure.array.cells!==undefined?s.structure.array.cells.map((t=>e.c2p.asNotebookCell(t,n))):undefined},didOpen:s.structure.didOpen!==undefined?s.structure.didOpen.map((e=>n.asOpenTextDocumentParams(e.document).textDocument)):undefined,didClose:s.structure.didClose!==undefined?s.structure.didClose.map((e=>n.asCloseTextDocumentParams(e.document).textDocument)):undefined}}if(s.data!==undefined){i.data=s.data.map((t=>e.c2p.asNotebookCell(t,n)))}if(s.textContent!==undefined){i.textContent=s.textContent.map((t=>e.c2p.asTextContentChange(t,n)))}if(Object.keys(i).length>0){r.cells=i}}return r}t.asNotebookDocumentChangeEvent=asNotebookDocumentChangeEvent})(t=e.c2p||(e.c2p={}))})(c||(c={}));var u;(function(e){function computeDiff(e,t,n){const r=e.length;const i=t.length;let s=0;while(s<i&&s<r&&equals(e[s],t[s],n)){s++}if(s<i&&s<r){let o=r-1;let a=i-1;while(o>=0&&a>=0&&equals(e[o],t[a],n)){o--;a--}const c=o+1-s;const u=s===a+1?undefined:t.slice(s,a+1);return u!==undefined?{start:s,deleteCount:c,cells:u}:{start:s,deleteCount:c}}else if(s<i){return{start:s,deleteCount:0,cells:t.slice(s)}}else if(s<r){return{start:s,deleteCount:r-s}}else{return undefined}}e.computeDiff=computeDiff;function equals(e,t,n=true){if(e.kind!==t.kind||e.document.uri.toString()!==t.document.uri.toString()||e.document.languageId!==t.document.languageId||!equalsExecution(e.executionSummary,t.executionSummary)){return false}return!n||n&&equalsMetadata(e.metadata,t.metadata)}function equalsExecution(e,t){if(e===t){return true}if(e===undefined||t===undefined){return false}return e.executionOrder===t.executionOrder&&e.success===t.success&&equalsTiming(e.timing,t.timing)}function equalsTiming(e,t){if(e===t){return true}if(e===undefined||t===undefined){return false}return e.startTime===t.startTime&&e.endTime===t.endTime}function equalsMetadata(e,t){if(e===t){return true}if(e===null||e===undefined||t===null||t===undefined){return false}if(typeof e!==typeof t){return false}if(typeof e!=="object"){return false}const n=Array.isArray(e);const r=Array.isArray(t);if(n!==r){return false}if(n&&r){if(e.length!==t.length){return false}for(let n=0;n<e.length;n++){if(!equalsMetadata(e[n],t[n])){return false}}}if(isObjectLiteral(e)&&isObjectLiteral(t)){const n=Object.keys(e);const r=Object.keys(t);if(n.length!==r.length){return false}n.sort();r.sort();if(!equalsMetadata(n,r)){return false}for(let r=0;r<n.length;r++){const i=n[r];if(!equalsMetadata(e[i],t[i])){return false}}return true}return false}function isObjectLiteral(e){return e!==null&&typeof e==="object"}e.isObjectLiteral=isObjectLiteral})(u||(u={}));var l;(function(e){function matchNotebook(e,t){if(typeof e==="string"){return e==="*"||t.notebookType===e}if(e.notebookType!==undefined&&e.notebookType!=="*"&&t.notebookType!==e.notebookType){return false}const n=t.uri;if(e.scheme!==undefined&&e.scheme!=="*"&&n.scheme!==e.scheme){return false}if(e.pattern!==undefined){const t=new i.Minimatch(e.pattern,{noext:true});if(!t.makeRe()){return false}if(!t.match(n.fsPath)){return false}}return true}e.matchNotebook=matchNotebook})(l||(l={}));var d;(function(e){function asDocumentSelector(e){const t=e.notebookSelector;const n=[];for(const e of t){const t=(typeof e.notebook==="string"?e.notebook:e.notebook?.notebookType)??"*";const r=typeof e.notebook==="string"?undefined:e.notebook?.scheme;const i=typeof e.notebook==="string"?undefined:e.notebook?.pattern;if(e.cells!==undefined){for(const s of e.cells){n.push(asDocumentFilter(t,r,i,s.language))}}else{n.push(asDocumentFilter(t,r,i,undefined))}}return n}e.asDocumentSelector=asDocumentSelector;function asDocumentFilter(e,t,n,r){return t===undefined&&n===undefined?{notebook:e,language:r}:{notebook:{notebookType:e,scheme:t,pattern:n},language:r}}})(d||(d={}));var f;(function(e){function create(e){return{cells:e,uris:new Set(e.map((e=>e.document.uri.toString())))}}e.create=create})(f||(f={}));class NotebookDocumentSyncFeatureProvider{constructor(e,t){this.client=e;this.options=t;this.notebookSyncInfo=new Map;this.notebookDidOpen=new Set;this.disposables=[];this.selector=e.protocol2CodeConverter.asDocumentSelector(d.asDocumentSelector(t));r.workspace.onDidOpenNotebookDocument((e=>{this.notebookDidOpen.add(e.uri.toString());this.didOpen(e)}),undefined,this.disposables);for(const e of r.workspace.notebookDocuments){this.notebookDidOpen.add(e.uri.toString());this.didOpen(e)}r.workspace.onDidChangeNotebookDocument((e=>this.didChangeNotebookDocument(e)),undefined,this.disposables);if(this.options.save===true){r.workspace.onDidSaveNotebookDocument((e=>this.didSave(e)),undefined,this.disposables)}r.workspace.onDidCloseNotebookDocument((e=>{this.didClose(e);this.notebookDidOpen.delete(e.uri.toString())}),undefined,this.disposables)}getState(){for(const e of r.workspace.notebookDocuments){const t=this.getMatchingCells(e);if(t!==undefined){return{kind:"document",id:"$internal",registrations:true,matches:true}}}return{kind:"document",id:"$internal",registrations:true,matches:false}}get mode(){return"notebook"}handles(e){return r.languages.match(this.selector,e)>0}didOpenNotebookCellTextDocument(e,t){if(r.languages.match(this.selector,t.document)===0){return}if(!this.notebookDidOpen.has(e.uri.toString())){return}const n=this.notebookSyncInfo.get(e.uri.toString());const i=this.cellMatches(e,t);if(n!==undefined){const r=n.uris.has(t.document.uri.toString());if(i&&r||!i&&!r){return}if(i){const t=this.getMatchingCells(e);if(t!==undefined){const r=this.asNotebookDocumentChangeEvent(e,undefined,n,t);if(r!==undefined){this.doSendChange(r,t).catch((()=>{}))}}}}else{if(i){this.doSendOpen(e,[t]).catch((()=>{}))}}}didChangeNotebookCellTextDocument(e,t){if(r.languages.match(this.selector,t.document)===0){return}this.doSendChange({notebook:e,cells:{textContent:[t]}},undefined).catch((()=>{}))}didCloseNotebookCellTextDocument(e,t){const n=this.notebookSyncInfo.get(e.uri.toString());if(n===undefined){return}const r=t.document.uri;const i=n.cells.findIndex((e=>e.document.uri.toString()===r.toString()));if(i===-1){return}if(i===0&&n.cells.length===1){this.doSendClose(e,n.cells).catch((()=>{}))}else{const t=n.cells.slice();const r=t.splice(i,1);this.doSendChange({notebook:e,cells:{structure:{array:{start:i,deleteCount:1},didClose:r}}},t).catch((()=>{}))}}dispose(){for(const e of this.disposables){e.dispose()}}didOpen(e,t=this.getMatchingCells(e),n=this.notebookSyncInfo.get(e.uri.toString())){if(n!==undefined){if(t!==undefined){const r=this.asNotebookDocumentChangeEvent(e,undefined,n,t);if(r!==undefined){this.doSendChange(r,t).catch((()=>{}))}}else{this.doSendClose(e,[]).catch((()=>{}))}}else{if(t===undefined){return}this.doSendOpen(e,t).catch((()=>{}))}}didChangeNotebookDocument(e){const t=e.notebook;const n=this.notebookSyncInfo.get(t.uri.toString());if(n===undefined){if(e.contentChanges.length===0){return}const r=this.getMatchingCells(t);if(r===undefined){return}this.didOpen(t,r,n)}else{const r=this.getMatchingCells(t);if(r===undefined){this.didClose(t,n);return}const i=this.asNotebookDocumentChangeEvent(e.notebook,e,n,r);if(i!==undefined){this.doSendChange(i,r).catch((()=>{}))}}}didSave(e){const t=this.notebookSyncInfo.get(e.uri.toString());if(t===undefined){return}this.doSendSave(e).catch((()=>{}))}didClose(e,t=this.notebookSyncInfo.get(e.uri.toString())){if(t===undefined){return}const n=e.getCells().filter((e=>t.uris.has(e.document.uri.toString())));this.doSendClose(e,n).catch((()=>{}))}async sendDidOpenNotebookDocument(e){const t=this.getMatchingCells(e);if(t===undefined){return}return this.doSendOpen(e,t)}async doSendOpen(e,t){const send=async(e,t)=>{const n=c.c2p.asNotebookDocument(e,t,this.client.code2ProtocolConverter);const r=t.map((e=>this.client.code2ProtocolConverter.asTextDocumentItem(e.document)));try{await this.client.sendNotification(s.DidOpenNotebookDocumentNotification.type,{notebookDocument:n,cellTextDocuments:r})}catch(e){this.client.error("Sending DidOpenNotebookDocumentNotification failed",e);throw e}};const n=this.client.middleware?.notebooks;this.notebookSyncInfo.set(e.uri.toString(),f.create(t));return n?.didOpen!==undefined?n.didOpen(e,t,send):send(e,t)}async sendDidChangeNotebookDocument(e){return this.doSendChange(e,undefined)}async doSendChange(e,t=this.getMatchingCells(e.notebook)){const send=async e=>{try{await this.client.sendNotification(s.DidChangeNotebookDocumentNotification.type,{notebookDocument:c.c2p.asVersionedNotebookDocumentIdentifier(e.notebook,this.client.code2ProtocolConverter),change:c.c2p.asNotebookDocumentChangeEvent(e,this.client.code2ProtocolConverter)})}catch(e){this.client.error("Sending DidChangeNotebookDocumentNotification failed",e);throw e}};const n=this.client.middleware?.notebooks;if(e.cells?.structure!==undefined){this.notebookSyncInfo.set(e.notebook.uri.toString(),f.create(t??[]))}return n?.didChange!==undefined?n?.didChange(e,send):send(e)}async sendDidSaveNotebookDocument(e){return this.doSendSave(e)}async doSendSave(e){const send=async e=>{try{await this.client.sendNotification(s.DidSaveNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(e.uri)}})}catch(e){this.client.error("Sending DidSaveNotebookDocumentNotification failed",e);throw e}};const t=this.client.middleware?.notebooks;return t?.didSave!==undefined?t.didSave(e,send):send(e)}async sendDidCloseNotebookDocument(e){return this.doSendClose(e,this.getMatchingCells(e)??[])}async doSendClose(e,t){const send=async(e,t)=>{try{await this.client.sendNotification(s.DidCloseNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(e.uri)},cellTextDocuments:t.map((e=>this.client.code2ProtocolConverter.asTextDocumentIdentifier(e.document)))})}catch(e){this.client.error("Sending DidCloseNotebookDocumentNotification failed",e);throw e}};const n=this.client.middleware?.notebooks;this.notebookSyncInfo.delete(e.uri.toString());return n?.didClose!==undefined?n.didClose(e,t,send):send(e,t)}asNotebookDocumentChangeEvent(e,t,n,r){if(t!==undefined&&t.notebook!==e){throw new Error("Notebook must be identical")}const i={notebook:e};if(t?.metadata!==undefined){i.metadata=c.c2p.asMetadata(t.metadata)}let s;if(t?.cellChanges!==undefined&&t.cellChanges.length>0){const e=[];s=new Set(r.map((e=>e.document.uri.toString())));for(const n of t.cellChanges){if(s.has(n.cell.document.uri.toString())&&(n.executionSummary!==undefined||n.metadata!==undefined)){e.push(n.cell)}}if(e.length>0){i.cells=i.cells??{};i.cells.data=e}}if((t?.contentChanges!==undefined&&t.contentChanges.length>0||t===undefined)&&n!==undefined&&r!==undefined){const e=n.cells;const t=r;const s=u.computeDiff(e,t,false);let o;let a;if(s!==undefined){o=s.cells===undefined?new Map:new Map(s.cells.map((e=>[e.document.uri.toString(),e])));a=s.deleteCount===0?new Map:new Map(e.slice(s.start,s.start+s.deleteCount).map((e=>[e.document.uri.toString(),e])));for(const e of Array.from(a.keys())){if(o.has(e)){a.delete(e);o.delete(e)}}i.cells=i.cells??{};const t=[];const n=[];if(o.size>0||a.size>0){for(const e of o.values()){t.push(e)}for(const e of a.values()){n.push(e)}}i.cells.structure={array:s,didOpen:t,didClose:n}}}return Object.keys(i).length>1?i:undefined}getMatchingCells(e,t=e.getCells()){if(this.options.notebookSelector===undefined){return undefined}for(const n of this.options.notebookSelector){if(n.notebook===undefined||l.matchNotebook(n.notebook,e)){const r=this.filterCells(e,t,n.cells);return r.length===0?undefined:r}}return undefined}cellMatches(e,t){const n=this.getMatchingCells(e,[t]);return n!==undefined&&n[0]===t}filterCells(e,t,n){const r=n!==undefined?t.filter((e=>{const t=e.document.languageId;return n.some((e=>e.language==="*"||t===e.language))})):t;return typeof this.client.clientOptions.notebookDocumentOptions?.filterCells==="function"?this.client.clientOptions.notebookDocumentOptions.filterCells(e,r):r}}class NotebookDocumentSyncFeature{constructor(e){this.client=e;this.registrations=new Map;this.registrationType=s.NotebookDocumentSyncRegistrationType.type;r.workspace.onDidOpenTextDocument((e=>{if(e.uri.scheme!==NotebookDocumentSyncFeature.CellScheme){return}const[t,n]=this.findNotebookDocumentAndCell(e);if(t===undefined||n===undefined){return}for(const e of this.registrations.values()){if(e instanceof NotebookDocumentSyncFeatureProvider){e.didOpenNotebookCellTextDocument(t,n)}}}));r.workspace.onDidChangeTextDocument((e=>{if(e.contentChanges.length===0){return}const t=e.document;if(t.uri.scheme!==NotebookDocumentSyncFeature.CellScheme){return}const[n]=this.findNotebookDocumentAndCell(t);if(n===undefined){return}for(const t of this.registrations.values()){if(t instanceof NotebookDocumentSyncFeatureProvider){t.didChangeNotebookCellTextDocument(n,e)}}}));r.workspace.onDidCloseTextDocument((e=>{if(e.uri.scheme!==NotebookDocumentSyncFeature.CellScheme){return}const[t,n]=this.findNotebookDocumentAndCell(e);if(t===undefined||n===undefined){return}for(const e of this.registrations.values()){if(e instanceof NotebookDocumentSyncFeatureProvider){e.didCloseNotebookCellTextDocument(t,n)}}}))}getState(){if(this.registrations.size===0){return{kind:"document",id:this.registrationType.method,registrations:false,matches:false}}for(const e of this.registrations.values()){const t=e.getState();if(t.kind==="document"&&t.registrations===true&&t.matches===true){return{kind:"document",id:this.registrationType.method,registrations:true,matches:true}}}return{kind:"document",id:this.registrationType.method,registrations:true,matches:false}}fillClientCapabilities(e){const t=ensure(ensure(e,"notebookDocument"),"synchronization");t.dynamicRegistration=true;t.executionSummarySupport=true}preInitialize(e){const t=e.notebookDocumentSync;if(t===undefined){return}this.dedicatedChannel=this.client.protocol2CodeConverter.asDocumentSelector(d.asDocumentSelector(t))}initialize(e){const t=e.notebookDocumentSync;if(t===undefined){return}const n=t.id??o.generateUuid();this.register({id:n,registerOptions:t})}register(e){const t=new NotebookDocumentSyncFeatureProvider(this.client,e.registerOptions);this.registrations.set(e.id,t)}unregister(e){const t=this.registrations.get(e);t&&t.dispose()}dispose(){for(const e of this.registrations.values()){e.dispose()}this.registrations.clear()}handles(e){if(e.uri.scheme!==NotebookDocumentSyncFeature.CellScheme){return false}if(this.dedicatedChannel!==undefined&&r.languages.match(this.dedicatedChannel,e)>0){return true}for(const t of this.registrations.values()){if(t.handles(e)){return true}}return false}getProvider(e){for(const t of this.registrations.values()){if(t.handles(e.document)){return t}}return undefined}findNotebookDocumentAndCell(e){const t=e.uri.toString();for(const e of r.workspace.notebookDocuments){for(const n of e.getCells()){if(n.document.uri.toString()===t){return[e,n]}}}return[undefined,undefined]}}t.NotebookDocumentSyncFeature=NotebookDocumentSyncFeature;NotebookDocumentSyncFeature.CellScheme="vscode-notebook-cell"},76174:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ProgressFeature=void 0;const r=n(3302);const i=n(54653);function ensure(e,t){if(e[t]===void 0){e[t]=Object.create(null)}return e[t]}class ProgressFeature{constructor(e){this._client=e;this.activeParts=new Set}getState(){return{kind:"window",id:r.WorkDoneProgressCreateRequest.method,registrations:this.activeParts.size>0}}fillClientCapabilities(e){ensure(e,"window").workDoneProgress=true}initialize(){const e=this._client;const deleteHandler=e=>{this.activeParts.delete(e)};const createHandler=e=>{this.activeParts.add(new i.ProgressPart(this._client,e.token,deleteHandler))};e.onRequest(r.WorkDoneProgressCreateRequest.type,createHandler)}dispose(){for(const e of this.activeParts){e.done()}this.activeParts.clear()}}t.ProgressFeature=ProgressFeature},54653:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ProgressPart=void 0;const r=n(76062);const i=n(3302);const s=n(42173);class ProgressPart{constructor(e,t,n){this._client=e;this._token=t;this._reported=0;this._infinite=false;this._lspProgressDisposable=this._client.onProgress(i.WorkDoneProgress.type,this._token,(e=>{switch(e.kind){case"begin":this.begin(e);break;case"report":this.report(e);break;case"end":this.done();n&&n(this);break}}))}begin(e){this._infinite=e.percentage===undefined;if(this._lspProgressDisposable===undefined){return}void r.window.withProgress({location:r.ProgressLocation.Window,cancellable:e.cancellable,title:e.title},(async(t,n)=>{if(this._lspProgressDisposable===undefined){return}this._progress=t;this._cancellationToken=n;this._tokenDisposable=this._cancellationToken.onCancellationRequested((()=>{this._client.sendNotification(i.WorkDoneProgressCancelNotification.type,{token:this._token})}));this.report(e);return new Promise(((e,t)=>{this._resolve=e;this._reject=t}))}))}report(e){if(this._infinite&&s.string(e.message)){this._progress!==undefined&&this._progress.report({message:e.message})}else if(s.number(e.percentage)){const t=Math.max(0,Math.min(e.percentage,100));const n=Math.max(0,t-this._reported);this._reported+=n;this._progress!==undefined&&this._progress.report({message:e.message,increment:n})}}cancel(){this.cleanup();if(this._reject!==undefined){this._reject();this._resolve=undefined;this._reject=undefined}}done(){this.cleanup();if(this._resolve!==undefined){this._resolve();this._resolve=undefined;this._reject=undefined}}cleanup(){if(this._lspProgressDisposable!==undefined){this._lspProgressDisposable.dispose();this._lspProgressDisposable=undefined}if(this._tokenDisposable!==undefined){this._tokenDisposable.dispose();this._tokenDisposable=undefined}this._progress=undefined;this._cancellationToken=undefined}}t.ProgressPart=ProgressPart},50014:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const r=n(76062);class ProtocolCallHierarchyItem extends r.CallHierarchyItem{constructor(e,t,n,r,i,s,o){super(e,t,n,r,i,s);if(o!==undefined){this.data=o}}}t["default"]=ProtocolCallHierarchyItem},35596:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const r=n(76062);class ProtocolCodeAction extends r.CodeAction{constructor(e,t){super(e);this.data=t}}t["default"]=ProtocolCodeAction},83111:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const r=n(76062);class ProtocolCodeLens extends r.CodeLens{constructor(e){super(e)}}t["default"]=ProtocolCodeLens},33741:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const r=n(76062);class ProtocolCompletionItem extends r.CompletionItem{constructor(e){super(e)}}t["default"]=ProtocolCompletionItem},45522:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.createConverter=void 0;const r=n(76062);const i=n(3302);const s=n(42173);const o=n(93741);const a=n(33741);const c=n(83111);const u=n(89189);const l=n(35596);const d=n(84282);const f=n(50014);const p=n(32349);const h=n(32757);const m=n(45140);const g=n(3302);var v;(function(e){function is(e){let t=e;return t&&s.string(t.language)&&s.string(t.value)}e.is=is})(v||(v={}));function createConverter(e,t,n){const nullConverter=e=>r.Uri.parse(e);const y=e||nullConverter;function asUri(e){return y(e)}function asDocumentSelector(e){const t=[];for(const n of e){if(typeof n==="string"){t.push(n)}else if(g.NotebookCellTextDocumentFilter.is(n)){if(typeof n.notebook==="string"){t.push({notebookType:n.notebook,language:n.language})}else{const e=n.notebook.notebookType??"*";t.push({notebookType:e,scheme:n.notebook.scheme,pattern:n.notebook.pattern,language:n.language})}}else if(g.TextDocumentFilter.is(n)){t.push({language:n.language,scheme:n.scheme,pattern:n.pattern})}}return t}async function asDiagnostics(e,t){return o.map(e,asDiagnostic,t)}function asDiagnosticsSync(e){const t=new Array(e.length);for(let n=0;n<e.length;n++){t[n]=asDiagnostic(e[n])}return t}function asDiagnostic(e){let t=new d.ProtocolDiagnostic(asRange(e.range),e.message,asDiagnosticSeverity(e.severity),e.data);if(e.code!==undefined){if(typeof e.code==="string"||typeof e.code==="number"){if(i.CodeDescription.is(e.codeDescription)){t.code={value:e.code,target:asUri(e.codeDescription.href)}}else{t.code=e.code}}else if(d.DiagnosticCode.is(e.code)){t.hasDiagnosticCode=true;const n=e.code;t.code={value:n.value,target:asUri(n.target)}}}if(e.source){t.source=e.source}if(e.relatedInformation){t.relatedInformation=asRelatedInformation(e.relatedInformation)}if(Array.isArray(e.tags)){t.tags=asDiagnosticTags(e.tags)}return t}function asRelatedInformation(e){const t=new Array(e.length);for(let n=0;n<e.length;n++){const i=e[n];t[n]=new r.DiagnosticRelatedInformation(asLocation(i.location),i.message)}return t}function asDiagnosticTags(e){if(!e){return undefined}let t=[];for(let n of e){let e=asDiagnosticTag(n);if(e!==undefined){t.push(e)}}return t.length>0?t:undefined}function asDiagnosticTag(e){switch(e){case i.DiagnosticTag.Unnecessary:return r.DiagnosticTag.Unnecessary;case i.DiagnosticTag.Deprecated:return r.DiagnosticTag.Deprecated;default:return undefined}}function asPosition(e){return e?new r.Position(e.line,e.character):undefined}function asRange(e){return e?new r.Range(e.start.line,e.start.character,e.end.line,e.end.character):undefined}async function asRanges(e,t){return o.map(e,(e=>new r.Range(e.start.line,e.start.character,e.end.line,e.end.character)),t)}function asDiagnosticSeverity(e){if(e===undefined||e===null){return r.DiagnosticSeverity.Error}switch(e){case i.DiagnosticSeverity.Error:return r.DiagnosticSeverity.Error;case i.DiagnosticSeverity.Warning:return r.DiagnosticSeverity.Warning;case i.DiagnosticSeverity.Information:return r.DiagnosticSeverity.Information;case i.DiagnosticSeverity.Hint:return r.DiagnosticSeverity.Hint}return r.DiagnosticSeverity.Error}function asHoverContent(e){if(s.string(e)){return asMarkdownString(e)}else if(v.is(e)){let t=asMarkdownString();return t.appendCodeblock(e.value,e.language)}else if(Array.isArray(e)){let t=[];for(let n of e){let e=asMarkdownString();if(v.is(n)){e.appendCodeblock(n.value,n.language)}else{e.appendMarkdown(n)}t.push(e)}return t}else{return asMarkdownString(e)}}function asDocumentation(e){if(s.string(e)){return e}else{switch(e.kind){case i.MarkupKind.Markdown:return asMarkdownString(e.value);case i.MarkupKind.PlainText:return e.value;default:return`Unsupported Markup content received. Kind is: ${e.kind}`}}}function asMarkdownString(e){let s;if(e===undefined||typeof e==="string"){s=new r.MarkdownString(e)}else{switch(e.kind){case i.MarkupKind.Markdown:s=new r.MarkdownString(e.value);break;case i.MarkupKind.PlainText:s=new r.MarkdownString;s.appendText(e.value);break;default:s=new r.MarkdownString;s.appendText(`Unsupported Markup content received. Kind is: ${e.kind}`);break}}s.isTrusted=t;s.supportHtml=n;return s}function asHover(e){if(!e){return undefined}return new r.Hover(asHoverContent(e.contents),asRange(e.range))}async function asCompletionResult(e,t,n){if(!e){return undefined}if(Array.isArray(e)){return o.map(e,(e=>asCompletionItem(e,t)),n)}const i=e;const{defaultRange:s,commitCharacters:a}=getCompletionItemDefaults(i,t);const c=await o.map(i.items,(e=>asCompletionItem(e,a,s,i.itemDefaults?.insertTextMode,i.itemDefaults?.insertTextFormat,i.itemDefaults?.data)),n);return new r.CompletionList(c,i.isIncomplete)}function getCompletionItemDefaults(e,t){const n=e.itemDefaults?.editRange;const r=e.itemDefaults?.commitCharacters??t;return i.Range.is(n)?{defaultRange:asRange(n),commitCharacters:r}:n!==undefined?{defaultRange:{inserting:asRange(n.insert),replacing:asRange(n.replace)},commitCharacters:r}:{defaultRange:undefined,commitCharacters:r}}function asCompletionItemKind(e){if(i.CompletionItemKind.Text<=e&&e<=i.CompletionItemKind.TypeParameter){return[e-1,undefined]}return[r.CompletionItemKind.Text,e]}function asCompletionItemTag(e){switch(e){case i.CompletionItemTag.Deprecated:return r.CompletionItemTag.Deprecated}return undefined}function asCompletionItemTags(e){if(e===undefined||e===null){return[]}const t=[];for(const n of e){const e=asCompletionItemTag(n);if(e!==undefined){t.push(e)}}return t}function asCompletionItem(e,t,n,o,c,u){const l=asCompletionItemTags(e.tags);const d=asCompletionItemLabel(e);const f=new a.default(d);if(e.detail){f.detail=e.detail}if(e.documentation){f.documentation=asDocumentation(e.documentation);f.documentationFormat=s.string(e.documentation)?"$string":e.documentation.kind}if(e.filterText){f.filterText=e.filterText}const p=asCompletionInsertText(e,n,c);if(p){f.insertText=p.text;f.range=p.range;f.fromEdit=p.fromEdit}if(s.number(e.kind)){let[t,n]=asCompletionItemKind(e.kind);f.kind=t;if(n){f.originalItemKind=n}}if(e.sortText){f.sortText=e.sortText}if(e.additionalTextEdits){f.additionalTextEdits=asTextEditsSync(e.additionalTextEdits)}const h=e.commitCharacters!==undefined?s.stringArray(e.commitCharacters)?e.commitCharacters:undefined:t;if(h){f.commitCharacters=h.slice()}if(e.command){f.command=asCommand(e.command)}if(e.deprecated===true||e.deprecated===false){f.deprecated=e.deprecated;if(e.deprecated===true){l.push(r.CompletionItemTag.Deprecated)}}if(e.preselect===true||e.preselect===false){f.preselect=e.preselect}const m=e.data??u;if(m!==undefined){f.data=m}if(l.length>0){f.tags=l}const g=e.insertTextMode??o;if(g!==undefined){f.insertTextMode=g;if(g===i.InsertTextMode.asIs){f.keepWhitespace=true}}return f}function asCompletionItemLabel(e){if(i.CompletionItemLabelDetails.is(e.labelDetails)){return{label:e.label,detail:e.labelDetails.detail,description:e.labelDetails.description}}else{return e.label}}function asCompletionInsertText(e,t,n){const s=e.insertTextFormat??n;if(e.textEdit!==undefined||t!==undefined){const[n,o]=e.textEdit!==undefined?getCompletionRangeAndText(e.textEdit):[t,e.textEditText??e.label];if(s===i.InsertTextFormat.Snippet){return{text:new r.SnippetString(o),range:n,fromEdit:true}}else{return{text:o,range:n,fromEdit:true}}}else if(e.insertText){if(s===i.InsertTextFormat.Snippet){return{text:new r.SnippetString(e.insertText),fromEdit:false}}else{return{text:e.insertText,fromEdit:false}}}else{return undefined}}function getCompletionRangeAndText(e){if(i.InsertReplaceEdit.is(e)){return[{inserting:asRange(e.insert),replacing:asRange(e.replace)},e.newText]}else{return[asRange(e.range),e.newText]}}function asTextEdit(e){if(!e){return undefined}return new r.TextEdit(asRange(e.range),e.newText)}async function asTextEdits(e,t){if(!e){return undefined}return o.map(e,asTextEdit,t)}function asTextEditsSync(e){if(!e){return undefined}const t=new Array(e.length);for(let n=0;n<e.length;n++){t[n]=asTextEdit(e[n])}return t}async function asSignatureHelp(e,t){if(!e){return undefined}let n=new r.SignatureHelp;if(s.number(e.activeSignature)){n.activeSignature=e.activeSignature}else{n.activeSignature=0}if(s.number(e.activeParameter)){n.activeParameter=e.activeParameter}else{n.activeParameter=0}if(e.signatures){n.signatures=await asSignatureInformations(e.signatures,t)}return n}async function asSignatureInformations(e,t){return o.mapAsync(e,asSignatureInformation,t)}async function asSignatureInformation(e,t){let n=new r.SignatureInformation(e.label);if(e.documentation!==undefined){n.documentation=asDocumentation(e.documentation)}if(e.parameters!==undefined){n.parameters=await asParameterInformations(e.parameters,t)}if(e.activeParameter!==undefined){n.activeParameter=e.activeParameter}{return n}}function asParameterInformations(e,t){return o.map(e,asParameterInformation,t)}function asParameterInformation(e){let t=new r.ParameterInformation(e.label);if(e.documentation){t.documentation=asDocumentation(e.documentation)}return t}function asLocation(e){return e?new r.Location(y(e.uri),asRange(e.range)):undefined}async function asDeclarationResult(e,t){if(!e){return undefined}return asLocationResult(e,t)}async function asDefinitionResult(e,t){if(!e){return undefined}return asLocationResult(e,t)}function asLocationLink(e){if(!e){return undefined}let t={targetUri:y(e.targetUri),targetRange:asRange(e.targetRange),originSelectionRange:asRange(e.originSelectionRange),targetSelectionRange:asRange(e.targetSelectionRange)};if(!t.targetSelectionRange){throw new Error(`targetSelectionRange must not be undefined or null`)}return t}async function asLocationResult(e,t){if(!e){return undefined}if(s.array(e)){if(e.length===0){return[]}else if(i.LocationLink.is(e[0])){const n=e;return o.map(n,asLocationLink,t)}else{const n=e;return o.map(n,asLocation,t)}}else if(i.LocationLink.is(e)){return[asLocationLink(e)]}else{return asLocation(e)}}async function asReferences(e,t){if(!e){return undefined}return o.map(e,asLocation,t)}async function asDocumentHighlights(e,t){if(!e){return undefined}return o.map(e,asDocumentHighlight,t)}function asDocumentHighlight(e){let t=new r.DocumentHighlight(asRange(e.range));if(s.number(e.kind)){t.kind=asDocumentHighlightKind(e.kind)}return t}function asDocumentHighlightKind(e){switch(e){case i.DocumentHighlightKind.Text:return r.DocumentHighlightKind.Text;case i.DocumentHighlightKind.Read:return r.DocumentHighlightKind.Read;case i.DocumentHighlightKind.Write:return r.DocumentHighlightKind.Write}return r.DocumentHighlightKind.Text}async function asSymbolInformations(e,t){if(!e){return undefined}return o.map(e,asSymbolInformation,t)}function asSymbolKind(e){if(e<=i.SymbolKind.TypeParameter){return e-1}return r.SymbolKind.Property}function asSymbolTag(e){switch(e){case i.SymbolTag.Deprecated:return r.SymbolTag.Deprecated;default:return undefined}}function asSymbolTags(e){if(e===undefined||e===null){return undefined}const t=[];for(const n of e){const e=asSymbolTag(n);if(e!==undefined){t.push(e)}}return t.length===0?undefined:t}function asSymbolInformation(e){const t=e.data;const n=e.location;const i=n.range===undefined||t!==undefined?new h.default(e.name,asSymbolKind(e.kind),e.containerName??"",n.range===undefined?y(n.uri):new r.Location(y(e.location.uri),asRange(n.range)),t):new r.SymbolInformation(e.name,asSymbolKind(e.kind),e.containerName??"",new r.Location(y(e.location.uri),asRange(n.range)));fillTags(i,e);return i}async function asDocumentSymbols(e,t){if(e===undefined||e===null){return undefined}return o.map(e,asDocumentSymbol,t)}function asDocumentSymbol(e){let t=new r.DocumentSymbol(e.name,e.detail||"",asSymbolKind(e.kind),asRange(e.range),asRange(e.selectionRange));fillTags(t,e);if(e.children!==undefined&&e.children.length>0){let n=[];for(let t of e.children){n.push(asDocumentSymbol(t))}t.children=n}return t}function fillTags(e,t){e.tags=asSymbolTags(t.tags);if(t.deprecated){if(!e.tags){e.tags=[r.SymbolTag.Deprecated]}else{if(!e.tags.includes(r.SymbolTag.Deprecated)){e.tags=e.tags.concat(r.SymbolTag.Deprecated)}}}}function asCommand(e){let t={title:e.title,command:e.command};if(e.arguments){t.arguments=e.arguments}return t}async function asCommands(e,t){if(!e){return undefined}return o.map(e,asCommand,t)}const b=new Map;b.set(i.CodeActionKind.Empty,r.CodeActionKind.Empty);b.set(i.CodeActionKind.QuickFix,r.CodeActionKind.QuickFix);b.set(i.CodeActionKind.Refactor,r.CodeActionKind.Refactor);b.set(i.CodeActionKind.RefactorExtract,r.CodeActionKind.RefactorExtract);b.set(i.CodeActionKind.RefactorInline,r.CodeActionKind.RefactorInline);b.set(i.CodeActionKind.RefactorRewrite,r.CodeActionKind.RefactorRewrite);b.set(i.CodeActionKind.Source,r.CodeActionKind.Source);b.set(i.CodeActionKind.SourceOrganizeImports,r.CodeActionKind.SourceOrganizeImports);function asCodeActionKind(e){if(e===undefined||e===null){return undefined}let t=b.get(e);if(t){return t}let n=e.split(".");t=r.CodeActionKind.Empty;for(let e of n){t=t.append(e)}return t}function asCodeActionKinds(e){if(e===undefined||e===null){return undefined}return e.map((e=>asCodeActionKind(e)))}async function asCodeAction(e,t){if(e===undefined||e===null){return undefined}let n=new l.default(e.title,e.data);if(e.kind!==undefined){n.kind=asCodeActionKind(e.kind)}if(e.diagnostics!==undefined){n.diagnostics=asDiagnosticsSync(e.diagnostics)}if(e.edit!==undefined){n.edit=await asWorkspaceEdit(e.edit,t)}if(e.command!==undefined){n.command=asCommand(e.command)}if(e.isPreferred!==undefined){n.isPreferred=e.isPreferred}if(e.disabled!==undefined){n.disabled={reason:e.disabled.reason}}return n}function asCodeActionResult(e,t){return o.mapAsync(e,(async e=>{if(i.Command.is(e)){return asCommand(e)}else{return asCodeAction(e,t)}}),t)}function asCodeLens(e){if(!e){return undefined}let t=new c.default(asRange(e.range));if(e.command){t.command=asCommand(e.command)}if(e.data!==undefined&&e.data!==null){t.data=e.data}return t}async function asCodeLenses(e,t){if(!e){return undefined}return o.map(e,asCodeLens,t)}async function asWorkspaceEdit(e,t){if(!e){return undefined}const n=new Map;if(e.changeAnnotations!==undefined){const r=e.changeAnnotations;await o.forEach(Object.keys(r),(e=>{const t=asWorkspaceEditEntryMetadata(r[e]);n.set(e,t)}),t)}const asMetadata=e=>{if(e===undefined){return undefined}else{return n.get(e)}};const s=new r.WorkspaceEdit;if(e.documentChanges){const n=e.documentChanges;await o.forEach(n,(e=>{if(i.CreateFile.is(e)){s.createFile(y(e.uri),e.options,asMetadata(e.annotationId))}else if(i.RenameFile.is(e)){s.renameFile(y(e.oldUri),y(e.newUri),e.options,asMetadata(e.annotationId))}else if(i.DeleteFile.is(e)){s.deleteFile(y(e.uri),e.options,asMetadata(e.annotationId))}else if(i.TextDocumentEdit.is(e)){const t=y(e.textDocument.uri);for(const n of e.edits){if(i.AnnotatedTextEdit.is(n)){s.replace(t,asRange(n.range),n.newText,asMetadata(n.annotationId))}else{s.replace(t,asRange(n.range),n.newText)}}}else{throw new Error(`Unknown workspace edit change received:\n${JSON.stringify(e,undefined,4)}`)}}),t)}else if(e.changes){const n=e.changes;await o.forEach(Object.keys(n),(e=>{s.set(y(e),asTextEditsSync(n[e]))}),t)}return s}function asWorkspaceEditEntryMetadata(e){if(e===undefined){return undefined}return{label:e.label,needsConfirmation:!!e.needsConfirmation,description:e.description}}function asDocumentLink(e){let t=asRange(e.range);let n=e.target?asUri(e.target):undefined;let r=new u.default(t,n);if(e.tooltip!==undefined){r.tooltip=e.tooltip}if(e.data!==undefined&&e.data!==null){r.data=e.data}return r}async function asDocumentLinks(e,t){if(!e){return undefined}return o.map(e,asDocumentLink,t)}function asColor(e){return new r.Color(e.red,e.green,e.blue,e.alpha)}function asColorInformation(e){return new r.ColorInformation(asRange(e.range),asColor(e.color))}async function asColorInformations(e,t){if(!e){return undefined}return o.map(e,asColorInformation,t)}function asColorPresentation(e){let t=new r.ColorPresentation(e.label);t.additionalTextEdits=asTextEditsSync(e.additionalTextEdits);if(e.textEdit){t.textEdit=asTextEdit(e.textEdit)}return t}async function asColorPresentations(e,t){if(!e){return undefined}return o.map(e,asColorPresentation,t)}function asFoldingRangeKind(e){if(e){switch(e){case i.FoldingRangeKind.Comment:return r.FoldingRangeKind.Comment;case i.FoldingRangeKind.Imports:return r.FoldingRangeKind.Imports;case i.FoldingRangeKind.Region:return r.FoldingRangeKind.Region}}return undefined}function asFoldingRange(e){return new r.FoldingRange(e.startLine,e.endLine,asFoldingRangeKind(e.kind))}async function asFoldingRanges(e,t){if(!e){return undefined}return o.map(e,asFoldingRange,t)}function asSelectionRange(e){return new r.SelectionRange(asRange(e.range),e.parent?asSelectionRange(e.parent):undefined)}async function asSelectionRanges(e,t){if(!Array.isArray(e)){return[]}return o.map(e,asSelectionRange,t)}function asInlineValue(e){if(i.InlineValueText.is(e)){return new r.InlineValueText(asRange(e.range),e.text)}else if(i.InlineValueVariableLookup.is(e)){return new r.InlineValueVariableLookup(asRange(e.range),e.variableName,e.caseSensitiveLookup)}else{return new r.InlineValueEvaluatableExpression(asRange(e.range),e.expression)}}async function asInlineValues(e,t){if(!Array.isArray(e)){return[]}return o.map(e,asInlineValue,t)}async function asInlayHint(e,t){const n=typeof e.label==="string"?e.label:await o.map(e.label,asInlayHintLabelPart,t);const r=new m.default(asPosition(e.position),n);if(e.kind!==undefined){r.kind=e.kind}if(e.textEdits!==undefined){r.textEdits=await asTextEdits(e.textEdits,t)}if(e.tooltip!==undefined){r.tooltip=asTooltip(e.tooltip)}if(e.paddingLeft!==undefined){r.paddingLeft=e.paddingLeft}if(e.paddingRight!==undefined){r.paddingRight=e.paddingRight}if(e.data!==undefined){r.data=e.data}return r}function asInlayHintLabelPart(e){const t=new r.InlayHintLabelPart(e.value);if(e.location!==undefined){t.location=asLocation(e.location)}if(e.tooltip!==undefined){t.tooltip=asTooltip(e.tooltip)}if(e.command!==undefined){t.command=asCommand(e.command)}return t}function asTooltip(e){if(typeof e==="string"){return e}return asMarkdownString(e)}async function asInlayHints(e,t){if(!Array.isArray(e)){return undefined}return o.mapAsync(e,asInlayHint,t)}function asCallHierarchyItem(e){if(e===null){return undefined}const t=new f.default(asSymbolKind(e.kind),e.name,e.detail||"",asUri(e.uri),asRange(e.range),asRange(e.selectionRange),e.data);if(e.tags!==undefined){t.tags=asSymbolTags(e.tags)}return t}async function asCallHierarchyItems(e,t){if(e===null){return undefined}return o.map(e,asCallHierarchyItem,t)}async function asCallHierarchyIncomingCall(e,t){return new r.CallHierarchyIncomingCall(asCallHierarchyItem(e.from),await asRanges(e.fromRanges,t))}async function asCallHierarchyIncomingCalls(e,t){if(e===null){return undefined}return o.mapAsync(e,asCallHierarchyIncomingCall,t)}async function asCallHierarchyOutgoingCall(e,t){return new r.CallHierarchyOutgoingCall(asCallHierarchyItem(e.to),await asRanges(e.fromRanges,t))}async function asCallHierarchyOutgoingCalls(e,t){if(e===null){return undefined}return o.mapAsync(e,asCallHierarchyOutgoingCall,t)}async function asSemanticTokens(e,t){if(e===undefined||e===null){return undefined}return new r.SemanticTokens(new Uint32Array(e.data),e.resultId)}function asSemanticTokensEdit(e){return new r.SemanticTokensEdit(e.start,e.deleteCount,e.data!==undefined?new Uint32Array(e.data):undefined)}async function asSemanticTokensEdits(e,t){if(e===undefined||e===null){return undefined}return new r.SemanticTokensEdits(e.edits.map(asSemanticTokensEdit),e.resultId)}function asSemanticTokensLegend(e){return e}async function asLinkedEditingRanges(e,t){if(e===null||e===undefined){return undefined}return new r.LinkedEditingRanges(await asRanges(e.ranges,t),asRegularExpression(e.wordPattern))}function asRegularExpression(e){if(e===null||e===undefined){return undefined}return new RegExp(e)}function asTypeHierarchyItem(e){if(e===null){return undefined}let t=new p.default(asSymbolKind(e.kind),e.name,e.detail||"",asUri(e.uri),asRange(e.range),asRange(e.selectionRange),e.data);if(e.tags!==undefined){t.tags=asSymbolTags(e.tags)}return t}async function asTypeHierarchyItems(e,t){if(e===null){return undefined}return o.map(e,asTypeHierarchyItem,t)}function asGlobPattern(e){if(s.string(e)){return e}if(i.RelativePattern.is(e)){if(i.URI.is(e.baseUri)){return new r.RelativePattern(asUri(e.baseUri),e.pattern)}else if(i.WorkspaceFolder.is(e.baseUri)){const t=r.workspace.getWorkspaceFolder(asUri(e.baseUri.uri));return t!==undefined?new r.RelativePattern(t,e.pattern):undefined}}return undefined}return{asUri:asUri,asDocumentSelector:asDocumentSelector,asDiagnostics:asDiagnostics,asDiagnostic:asDiagnostic,asRange:asRange,asRanges:asRanges,asPosition:asPosition,asDiagnosticSeverity:asDiagnosticSeverity,asDiagnosticTag:asDiagnosticTag,asHover:asHover,asCompletionResult:asCompletionResult,asCompletionItem:asCompletionItem,asTextEdit:asTextEdit,asTextEdits:asTextEdits,asSignatureHelp:asSignatureHelp,asSignatureInformations:asSignatureInformations,asSignatureInformation:asSignatureInformation,asParameterInformations:asParameterInformations,asParameterInformation:asParameterInformation,asDeclarationResult:asDeclarationResult,asDefinitionResult:asDefinitionResult,asLocation:asLocation,asReferences:asReferences,asDocumentHighlights:asDocumentHighlights,asDocumentHighlight:asDocumentHighlight,asDocumentHighlightKind:asDocumentHighlightKind,asSymbolKind:asSymbolKind,asSymbolTag:asSymbolTag,asSymbolTags:asSymbolTags,asSymbolInformations:asSymbolInformations,asSymbolInformation:asSymbolInformation,asDocumentSymbols:asDocumentSymbols,asDocumentSymbol:asDocumentSymbol,asCommand:asCommand,asCommands:asCommands,asCodeAction:asCodeAction,asCodeActionKind:asCodeActionKind,asCodeActionKinds:asCodeActionKinds,asCodeActionResult:asCodeActionResult,asCodeLens:asCodeLens,asCodeLenses:asCodeLenses,asWorkspaceEdit:asWorkspaceEdit,asDocumentLink:asDocumentLink,asDocumentLinks:asDocumentLinks,asFoldingRangeKind:asFoldingRangeKind,asFoldingRange:asFoldingRange,asFoldingRanges:asFoldingRanges,asColor:asColor,asColorInformation:asColorInformation,asColorInformations:asColorInformations,asColorPresentation:asColorPresentation,asColorPresentations:asColorPresentations,asSelectionRange:asSelectionRange,asSelectionRanges:asSelectionRanges,asInlineValue:asInlineValue,asInlineValues:asInlineValues,asInlayHint:asInlayHint,asInlayHints:asInlayHints,asSemanticTokensLegend:asSemanticTokensLegend,asSemanticTokens:asSemanticTokens,asSemanticTokensEdit:asSemanticTokensEdit,asSemanticTokensEdits:asSemanticTokensEdits,asCallHierarchyItem:asCallHierarchyItem,asCallHierarchyItems:asCallHierarchyItems,asCallHierarchyIncomingCall:asCallHierarchyIncomingCall,asCallHierarchyIncomingCalls:asCallHierarchyIncomingCalls,asCallHierarchyOutgoingCall:asCallHierarchyOutgoingCall,asCallHierarchyOutgoingCalls:asCallHierarchyOutgoingCalls,asLinkedEditingRanges:asLinkedEditingRanges,asTypeHierarchyItem:asTypeHierarchyItem,asTypeHierarchyItems:asTypeHierarchyItems,asGlobPattern:asGlobPattern}}t.createConverter=createConverter},84282:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ProtocolDiagnostic=t.DiagnosticCode=void 0;const r=n(76062);const i=n(42173);var s;(function(e){function is(e){const t=e;return t!==undefined&&t!==null&&(i.number(t.value)||i.string(t.value))&&i.string(t.target)}e.is=is})(s=t.DiagnosticCode||(t.DiagnosticCode={}));class ProtocolDiagnostic extends r.Diagnostic{constructor(e,t,n,r){super(e,t,n);this.data=r;this.hasDiagnosticCode=false}}t.ProtocolDiagnostic=ProtocolDiagnostic},89189:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const r=n(76062);class ProtocolDocumentLink extends r.DocumentLink{constructor(e,t){super(e,t)}}t["default"]=ProtocolDocumentLink},45140:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const r=n(76062);class ProtocolInlayHint extends r.InlayHint{constructor(e,t,n){super(e,t,n)}}t["default"]=ProtocolInlayHint},32349:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const r=n(76062);class ProtocolTypeHierarchyItem extends r.TypeHierarchyItem{constructor(e,t,n,r,i,s,o){super(e,t,n,r,i,s);if(o!==undefined){this.data=o}}}t["default"]=ProtocolTypeHierarchyItem},32757:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const r=n(76062);class WorkspaceSymbol extends r.SymbolInformation{constructor(e,t,n,i,s){const o=!(i instanceof r.Uri);super(e,t,n,o?i:new r.Location(i,new r.Range(0,0,0,0)));this.hasRange=o;if(s!==undefined){this.data=s}}}t["default"]=WorkspaceSymbol},25159:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ReferencesFeature=void 0;const r=n(76062);const i=n(3302);const s=n(86389);const o=n(56257);class ReferencesFeature extends s.TextDocumentLanguageFeature{constructor(e){super(e,i.ReferencesRequest.type)}fillClientCapabilities(e){(0,s.ensure)((0,s.ensure)(e,"textDocument"),"references").dynamicRegistration=true}initialize(e,t){const n=this.getRegistrationOptions(t,e.referencesProvider);if(!n){return}this.register({id:o.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector;const n={provideReferences:(e,t,n,r)=>{const s=this._client;const _providerReferences=(e,t,n,r)=>s.sendRequest(i.ReferencesRequest.type,s.code2ProtocolConverter.asReferenceParams(e,t,n),r).then((e=>{if(r.isCancellationRequested){return null}return s.protocol2CodeConverter.asReferences(e,r)}),(e=>s.handleFailedRequest(i.ReferencesRequest.type,r,e,null)));const o=s.middleware;return o.provideReferences?o.provideReferences(e,t,n,r,_providerReferences):_providerReferences(e,t,n,r)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return r.languages.registerReferenceProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}t.ReferencesFeature=ReferencesFeature},8322:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.RenameFeature=void 0;const r=n(76062);const i=n(3302);const s=n(56257);const o=n(42173);const a=n(86389);class RenameFeature extends a.TextDocumentLanguageFeature{constructor(e){super(e,i.RenameRequest.type)}fillClientCapabilities(e){let t=(0,a.ensure)((0,a.ensure)(e,"textDocument"),"rename");t.dynamicRegistration=true;t.prepareSupport=true;t.prepareSupportDefaultBehavior=i.PrepareSupportDefaultBehavior.Identifier;t.honorsChangeAnnotations=true}initialize(e,t){const n=this.getRegistrationOptions(t,e.renameProvider);if(!n){return}if(o.boolean(e.renameProvider)){n.prepareProvider=false}this.register({id:s.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t=e.documentSelector;const n={provideRenameEdits:(e,t,n,r)=>{const s=this._client;const provideRenameEdits=(e,t,n,r)=>{let o={textDocument:s.code2ProtocolConverter.asTextDocumentIdentifier(e),position:s.code2ProtocolConverter.asPosition(t),newName:n};return s.sendRequest(i.RenameRequest.type,o,r).then((e=>{if(r.isCancellationRequested){return null}return s.protocol2CodeConverter.asWorkspaceEdit(e,r)}),(e=>s.handleFailedRequest(i.RenameRequest.type,r,e,null,false)))};const o=s.middleware;return o.provideRenameEdits?o.provideRenameEdits(e,t,n,r,provideRenameEdits):provideRenameEdits(e,t,n,r)},prepareRename:e.prepareProvider?(e,t,n)=>{const r=this._client;const prepareRename=(e,t,n)=>{let s={textDocument:r.code2ProtocolConverter.asTextDocumentIdentifier(e),position:r.code2ProtocolConverter.asPosition(t)};return r.sendRequest(i.PrepareRenameRequest.type,s,n).then((e=>{if(n.isCancellationRequested){return null}if(i.Range.is(e)){return r.protocol2CodeConverter.asRange(e)}else if(this.isDefaultBehavior(e)){return e.defaultBehavior===true?null:Promise.reject(new Error(`The element can't be renamed.`))}else if(e&&i.Range.is(e.range)){return{range:r.protocol2CodeConverter.asRange(e.range),placeholder:e.placeholder}}return Promise.reject(new Error(`The element can't be renamed.`))}),(e=>{if(typeof e.message==="string"){throw new Error(e.message)}else{throw new Error(`The element can't be renamed.`)}}))};const s=r.middleware;return s.prepareRename?s.prepareRename(e,t,n,prepareRename):prepareRename(e,t,n)}:undefined};return[this.registerProvider(t,n),n]}registerProvider(e,t){return r.languages.registerRenameProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}isDefaultBehavior(e){const t=e;return t&&o.boolean(t.defaultBehavior)}}t.RenameFeature=RenameFeature},37262:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SelectionRangeFeature=void 0;const r=n(76062);const i=n(3302);const s=n(86389);class SelectionRangeFeature extends s.TextDocumentLanguageFeature{constructor(e){super(e,i.SelectionRangeRequest.type)}fillClientCapabilities(e){const t=(0,s.ensure)((0,s.ensure)(e,"textDocument"),"selectionRange");t.dynamicRegistration=true}initialize(e,t){const[n,r]=this.getRegistration(t,e.selectionRangeProvider);if(!n||!r){return}this.register({id:n,registerOptions:r})}registerLanguageProvider(e){const t=e.documentSelector;const n={provideSelectionRanges:(e,t,n)=>{const r=this._client;const provideSelectionRanges=async(e,t,n)=>{const s={textDocument:r.code2ProtocolConverter.asTextDocumentIdentifier(e),positions:await r.code2ProtocolConverter.asPositions(t,n)};return r.sendRequest(i.SelectionRangeRequest.type,s,n).then((e=>{if(n.isCancellationRequested){return null}return r.protocol2CodeConverter.asSelectionRanges(e,n)}),(e=>r.handleFailedRequest(i.SelectionRangeRequest.type,n,e,null)))};const s=r.middleware;return s.provideSelectionRanges?s.provideSelectionRanges(e,t,n,provideSelectionRanges):provideSelectionRanges(e,t,n)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return r.languages.registerSelectionRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}t.SelectionRangeFeature=SelectionRangeFeature},32957:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SemanticTokensFeature=void 0;const r=n(76062);const i=n(3302);const s=n(86389);const o=n(42173);class SemanticTokensFeature extends s.TextDocumentLanguageFeature{constructor(e){super(e,i.SemanticTokensRegistrationType.type)}fillClientCapabilities(e){const t=(0,s.ensure)((0,s.ensure)(e,"textDocument"),"semanticTokens");t.dynamicRegistration=true;t.tokenTypes=[i.SemanticTokenTypes.namespace,i.SemanticTokenTypes.type,i.SemanticTokenTypes.class,i.SemanticTokenTypes.enum,i.SemanticTokenTypes.interface,i.SemanticTokenTypes.struct,i.SemanticTokenTypes.typeParameter,i.SemanticTokenTypes.parameter,i.SemanticTokenTypes.variable,i.SemanticTokenTypes.property,i.SemanticTokenTypes.enumMember,i.SemanticTokenTypes.event,i.SemanticTokenTypes.function,i.SemanticTokenTypes.method,i.SemanticTokenTypes.macro,i.SemanticTokenTypes.keyword,i.SemanticTokenTypes.modifier,i.SemanticTokenTypes.comment,i.SemanticTokenTypes.string,i.SemanticTokenTypes.number,i.SemanticTokenTypes.regexp,i.SemanticTokenTypes.operator,i.SemanticTokenTypes.decorator];t.tokenModifiers=[i.SemanticTokenModifiers.declaration,i.SemanticTokenModifiers.definition,i.SemanticTokenModifiers.readonly,i.SemanticTokenModifiers.static,i.SemanticTokenModifiers.deprecated,i.SemanticTokenModifiers.abstract,i.SemanticTokenModifiers.async,i.SemanticTokenModifiers.modification,i.SemanticTokenModifiers.documentation,i.SemanticTokenModifiers.defaultLibrary];t.formats=[i.TokenFormat.Relative];t.requests={range:true,full:{delta:true}};t.multilineTokenSupport=false;t.overlappingTokenSupport=false;t.serverCancelSupport=true;t.augmentsSyntaxTokens=true;(0,s.ensure)((0,s.ensure)(e,"workspace"),"semanticTokens").refreshSupport=true}initialize(e,t){const n=this._client;n.onRequest(i.SemanticTokensRefreshRequest.type,(async()=>{for(const e of this.getAllProviders()){e.onDidChangeSemanticTokensEmitter.fire()}}));const[r,s]=this.getRegistration(t,e.semanticTokensProvider);if(!r||!s){return}this.register({id:r,registerOptions:s})}registerLanguageProvider(e){const t=e.documentSelector;const n=o.boolean(e.full)?e.full:e.full!==undefined;const s=e.full!==undefined&&typeof e.full!=="boolean"&&e.full.delta===true;const a=new r.EventEmitter;const c=n?{onDidChangeSemanticTokens:a.event,provideDocumentSemanticTokens:(e,t)=>{const n=this._client;const r=n.middleware;const provideDocumentSemanticTokens=(e,t)=>{const r={textDocument:n.code2ProtocolConverter.asTextDocumentIdentifier(e)};return n.sendRequest(i.SemanticTokensRequest.type,r,t).then((e=>{if(t.isCancellationRequested){return null}return n.protocol2CodeConverter.asSemanticTokens(e,t)}),(e=>n.handleFailedRequest(i.SemanticTokensRequest.type,t,e,null)))};return r.provideDocumentSemanticTokens?r.provideDocumentSemanticTokens(e,t,provideDocumentSemanticTokens):provideDocumentSemanticTokens(e,t)},provideDocumentSemanticTokensEdits:s?(e,t,n)=>{const r=this._client;const s=r.middleware;const provideDocumentSemanticTokensEdits=(e,t,n)=>{const s={textDocument:r.code2ProtocolConverter.asTextDocumentIdentifier(e),previousResultId:t};return r.sendRequest(i.SemanticTokensDeltaRequest.type,s,n).then((async e=>{if(n.isCancellationRequested){return null}if(i.SemanticTokens.is(e)){return await r.protocol2CodeConverter.asSemanticTokens(e,n)}else{return await r.protocol2CodeConverter.asSemanticTokensEdits(e,n)}}),(e=>r.handleFailedRequest(i.SemanticTokensDeltaRequest.type,n,e,null)))};return s.provideDocumentSemanticTokensEdits?s.provideDocumentSemanticTokensEdits(e,t,n,provideDocumentSemanticTokensEdits):provideDocumentSemanticTokensEdits(e,t,n)}:undefined}:undefined;const u=e.range===true;const l=u?{provideDocumentRangeSemanticTokens:(e,t,n)=>{const r=this._client;const s=r.middleware;const provideDocumentRangeSemanticTokens=(e,t,n)=>{const s={textDocument:r.code2ProtocolConverter.asTextDocumentIdentifier(e),range:r.code2ProtocolConverter.asRange(t)};return r.sendRequest(i.SemanticTokensRangeRequest.type,s,n).then((e=>{if(n.isCancellationRequested){return null}return r.protocol2CodeConverter.asSemanticTokens(e,n)}),(e=>r.handleFailedRequest(i.SemanticTokensRangeRequest.type,n,e,null)))};return s.provideDocumentRangeSemanticTokens?s.provideDocumentRangeSemanticTokens(e,t,n,provideDocumentRangeSemanticTokens):provideDocumentRangeSemanticTokens(e,t,n)}}:undefined;const d=[];const f=this._client;const p=f.protocol2CodeConverter.asSemanticTokensLegend(e.legend);const h=f.protocol2CodeConverter.asDocumentSelector(t);if(c!==undefined){d.push(r.languages.registerDocumentSemanticTokensProvider(h,c,p))}if(l!==undefined){d.push(r.languages.registerDocumentRangeSemanticTokensProvider(h,l,p))}return[new r.Disposable((()=>d.forEach((e=>e.dispose())))),{range:l,full:c,onDidChangeSemanticTokensEmitter:a}]}}t.SemanticTokensFeature=SemanticTokensFeature},33043:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SignatureHelpFeature=void 0;const r=n(76062);const i=n(3302);const s=n(86389);const o=n(56257);class SignatureHelpFeature extends s.TextDocumentLanguageFeature{constructor(e){super(e,i.SignatureHelpRequest.type)}fillClientCapabilities(e){let t=(0,s.ensure)((0,s.ensure)(e,"textDocument"),"signatureHelp");t.dynamicRegistration=true;t.signatureInformation={documentationFormat:[i.MarkupKind.Markdown,i.MarkupKind.PlainText]};t.signatureInformation.parameterInformation={labelOffsetSupport:true};t.signatureInformation.activeParameterSupport=true;t.contextSupport=true}initialize(e,t){const n=this.getRegistrationOptions(t,e.signatureHelpProvider);if(!n){return}this.register({id:o.generateUuid(),registerOptions:n})}registerLanguageProvider(e){const t={provideSignatureHelp:(e,t,n,r)=>{const s=this._client;const providerSignatureHelp=(e,t,n,r)=>s.sendRequest(i.SignatureHelpRequest.type,s.code2ProtocolConverter.asSignatureHelpParams(e,t,n),r).then((e=>{if(r.isCancellationRequested){return null}return s.protocol2CodeConverter.asSignatureHelp(e,r)}),(e=>s.handleFailedRequest(i.SignatureHelpRequest.type,r,e,null)));const o=s.middleware;return o.provideSignatureHelp?o.provideSignatureHelp(e,t,r,n,providerSignatureHelp):providerSignatureHelp(e,t,r,n)}};return[this.registerProvider(e,t),t]}registerProvider(e,t){const n=this._client.protocol2CodeConverter.asDocumentSelector(e.documentSelector);if(e.retriggerCharacters===undefined){const i=e.triggerCharacters||[];return r.languages.registerSignatureHelpProvider(n,t,...i)}else{const i={triggerCharacters:e.triggerCharacters||[],retriggerCharacters:e.retriggerCharacters||[]};return r.languages.registerSignatureHelpProvider(n,t,i)}}}t.SignatureHelpFeature=SignatureHelpFeature},97123:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DidSaveTextDocumentFeature=t.WillSaveWaitUntilFeature=t.WillSaveFeature=t.DidChangeTextDocumentFeature=t.DidCloseTextDocumentFeature=t.DidOpenTextDocumentFeature=void 0;const r=n(76062);const i=n(3302);const s=n(86389);const o=n(93741);const a=n(56257);class DidOpenTextDocumentFeature extends s.TextDocumentEventFeature{constructor(e,t){super(e,r.workspace.onDidOpenTextDocument,i.DidOpenTextDocumentNotification.type,(()=>e.middleware.didOpen),(t=>e.code2ProtocolConverter.asOpenTextDocumentParams(t)),(e=>e),s.TextDocumentEventFeature.textDocumentFilter);this._syncedDocuments=t}get openDocuments(){return this._syncedDocuments.values()}fillClientCapabilities(e){(0,s.ensure)((0,s.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=true}initialize(e,t){const n=e.resolvedTextDocumentSync;if(t&&n&&n.openClose){this.register({id:a.generateUuid(),registerOptions:{documentSelector:t}})}}get registrationType(){return i.DidOpenTextDocumentNotification.type}register(e){super.register(e);if(!e.registerOptions.documentSelector){return}const t=this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector);r.workspace.textDocuments.forEach((e=>{const n=e.uri.toString();if(this._syncedDocuments.has(n)){return}if(r.languages.match(t,e)>0&&!this._client.hasDedicatedTextSynchronizationFeature(e)){const t=this._client.middleware;const didOpen=e=>this._client.sendNotification(this._type,this._createParams(e));(t.didOpen?t.didOpen(e,didOpen):didOpen(e)).catch((e=>{this._client.error(`Sending document notification ${this._type.method} failed`,e)}));this._syncedDocuments.set(n,e)}}))}notificationSent(e,t,n){super.notificationSent(e,t,n);this._syncedDocuments.set(e.uri.toString(),e)}}t.DidOpenTextDocumentFeature=DidOpenTextDocumentFeature;class DidCloseTextDocumentFeature extends s.TextDocumentEventFeature{constructor(e,t){super(e,r.workspace.onDidCloseTextDocument,i.DidCloseTextDocumentNotification.type,(()=>e.middleware.didClose),(t=>e.code2ProtocolConverter.asCloseTextDocumentParams(t)),(e=>e),s.TextDocumentEventFeature.textDocumentFilter);this._syncedDocuments=t}get registrationType(){return i.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){(0,s.ensure)((0,s.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=true}initialize(e,t){let n=e.resolvedTextDocumentSync;if(t&&n&&n.openClose){this.register({id:a.generateUuid(),registerOptions:{documentSelector:t}})}}notificationSent(e,t,n){super.notificationSent(e,t,n);this._syncedDocuments.delete(e.uri.toString())}unregister(e){const t=this._selectors.get(e);super.unregister(e);const n=this._selectors.values();this._syncedDocuments.forEach((e=>{if(r.languages.match(t,e)>0&&!this._selectorFilter(n,e)&&!this._client.hasDedicatedTextSynchronizationFeature(e)){let t=this._client.middleware;let didClose=e=>this._client.sendNotification(this._type,this._createParams(e));this._syncedDocuments.delete(e.uri.toString());(t.didClose?t.didClose(e,didClose):didClose(e)).catch((e=>{this._client.error(`Sending document notification ${this._type.method} failed`,e)}))}}))}}t.DidCloseTextDocumentFeature=DidCloseTextDocumentFeature;class DidChangeTextDocumentFeature extends s.DynamicDocumentFeature{constructor(e){super(e);this._forcingDelivery=false;this._changeData=new Map;this._onNotificationSent=new r.EventEmitter}get registrationType(){return i.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){(0,s.ensure)((0,s.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=true}initialize(e,t){let n=e.resolvedTextDocumentSync;if(t&&n&&n.change!==undefined&&n.change!==i.TextDocumentSyncKind.None){this.register({id:a.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},{syncKind:n.change})})}}register(e){if(!e.registerOptions.documentSelector){return}if(!this._listener){this._listener=r.workspace.onDidChangeTextDocument(this.callback,this)}this._changeData.set(e.id,{syncKind:e.registerOptions.syncKind,documentSelector:this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)})}*getDocumentSelectors(){for(const e of this._changeData.values()){yield e.documentSelector}}async callback(e){if(e.contentChanges.length===0){return}const t=[];for(const n of this._changeData.values()){if(r.languages.match(n.documentSelector,e.document)>0&&!this._client.hasDedicatedTextSynchronizationFeature(e.document)){const r=this._client.middleware;if(n.syncKind===i.TextDocumentSyncKind.Incremental){const didChange=async e=>{const t=this._client.code2ProtocolConverter.asChangeTextDocumentParams(e);await this._client.sendNotification(i.DidChangeTextDocumentNotification.type,t);this.notificationSent(e,i.DidChangeTextDocumentNotification.type,t)};t.push(r.didChange?r.didChange(e,(e=>didChange(e))):didChange(e))}else if(n.syncKind===i.TextDocumentSyncKind.Full){const didChange=async e=>{const doSend=async e=>{const t=this._client.code2ProtocolConverter.asChangeTextDocumentParams(e.document);await this._client.sendNotification(i.DidChangeTextDocumentNotification.type,t);this.notificationSent(e,i.DidChangeTextDocumentNotification.type,t)};if(this._changeDelayer){if(this._changeDelayer.uri!==e.document.uri.toString()){await this.forceDelivery();this._changeDelayer.uri=e.document.uri.toString()}return this._changeDelayer.delayer.trigger((()=>doSend(e)))}else{this._changeDelayer={uri:e.document.uri.toString(),delayer:new o.Delayer(200)};return this._changeDelayer.delayer.trigger((()=>doSend(e)),-1)}};t.push(r.didChange?r.didChange(e,(e=>didChange(e))):didChange(e))}}}return Promise.all(t).then(undefined,(e=>{this._client.error(`Sending document notification ${i.DidChangeTextDocumentNotification.type.method} failed`,e);throw e}))}get onNotificationSent(){return this._onNotificationSent.event}notificationSent(e,t,n){this._onNotificationSent.fire({original:e,type:t,params:n})}unregister(e){this._changeData.delete(e);if(this._changeData.size===0&&this._listener){this._listener.dispose();this._listener=undefined}}dispose(){if(this._changeDelayer!==undefined){this._changeDelayer.delayer.cancel()}this._changeDelayer=undefined;this._forcingDelivery=false;this._changeData.clear();if(this._listener){this._listener.dispose();this._listener=undefined}}async forceDelivery(){if(this._forcingDelivery||!this._changeDelayer){return}try{this._forcingDelivery=true;return this._changeDelayer.delayer.forceDelivery()}finally{this._forcingDelivery=false}}getProvider(e){for(const t of this._changeData.values()){if(r.languages.match(t.documentSelector,e)>0){return{send:e=>this.callback(e)}}}return undefined}}t.DidChangeTextDocumentFeature=DidChangeTextDocumentFeature;class WillSaveFeature extends s.TextDocumentEventFeature{constructor(e){super(e,r.workspace.onWillSaveTextDocument,i.WillSaveTextDocumentNotification.type,(()=>e.middleware.willSave),(t=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(t)),(e=>e.document),((e,t)=>s.TextDocumentEventFeature.textDocumentFilter(e,t.document)))}get registrationType(){return i.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){let t=(0,s.ensure)((0,s.ensure)(e,"textDocument"),"synchronization");t.willSave=true}initialize(e,t){let n=e.resolvedTextDocumentSync;if(t&&n&&n.willSave){this.register({id:a.generateUuid(),registerOptions:{documentSelector:t}})}}}t.WillSaveFeature=WillSaveFeature;class WillSaveWaitUntilFeature extends s.DynamicDocumentFeature{constructor(e){super(e);this._selectors=new Map}getDocumentSelectors(){return this._selectors.values()}get registrationType(){return i.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){let t=(0,s.ensure)((0,s.ensure)(e,"textDocument"),"synchronization");t.willSaveWaitUntil=true}initialize(e,t){let n=e.resolvedTextDocumentSync;if(t&&n&&n.willSaveWaitUntil){this.register({id:a.generateUuid(),registerOptions:{documentSelector:t}})}}register(e){if(!e.registerOptions.documentSelector){return}if(!this._listener){this._listener=r.workspace.onWillSaveTextDocument(this.callback,this)}this._selectors.set(e.id,this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector))}callback(e){if(s.TextDocumentEventFeature.textDocumentFilter(this._selectors.values(),e.document)&&!this._client.hasDedicatedTextSynchronizationFeature(e.document)){let t=this._client.middleware;let willSaveWaitUntil=e=>this._client.sendRequest(i.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(e)).then((async e=>{let t=await this._client.protocol2CodeConverter.asTextEdits(e);return t===undefined?[]:t}));e.waitUntil(t.willSaveWaitUntil?t.willSaveWaitUntil(e,willSaveWaitUntil):willSaveWaitUntil(e))}}unregister(e){this._selectors.delete(e);if(this._selectors.size===0&&this._listener){this._listener.dispose();this._listener=undefined}}dispose(){this._selectors.clear();if(this._listener){this._listener.dispose();this._listener=undefined}}}t.WillSaveWaitUntilFeature=WillSaveWaitUntilFeature;class DidSaveTextDocumentFeature extends s.TextDocumentEventFeature{constructor(e){super(e,r.workspace.onDidSaveTextDocument,i.DidSaveTextDocumentNotification.type,(()=>e.middleware.didSave),(t=>e.code2ProtocolConverter.asSaveTextDocumentParams(t,this._includeText)),(e=>e),s.TextDocumentEventFeature.textDocumentFilter);this._includeText=false}get registrationType(){return i.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){(0,s.ensure)((0,s.ensure)(e,"textDocument"),"synchronization").didSave=true}initialize(e,t){const n=e.resolvedTextDocumentSync;if(t&&n&&n.save){const e=typeof n.save==="boolean"?{includeText:false}:{includeText:!!n.save.includeText};this.register({id:a.generateUuid(),registerOptions:Object.assign({},{documentSelector:t},e)})}}register(e){this._includeText=!!e.registerOptions.includeText;super.register(e)}}t.DidSaveTextDocumentFeature=DidSaveTextDocumentFeature},20953:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TypeDefinitionFeature=void 0;const r=n(76062);const i=n(3302);const s=n(86389);class TypeDefinitionFeature extends s.TextDocumentLanguageFeature{constructor(e){super(e,i.TypeDefinitionRequest.type)}fillClientCapabilities(e){(0,s.ensure)((0,s.ensure)(e,"textDocument"),"typeDefinition").dynamicRegistration=true;let t=(0,s.ensure)((0,s.ensure)(e,"textDocument"),"typeDefinition");t.dynamicRegistration=true;t.linkSupport=true}initialize(e,t){let[n,r]=this.getRegistration(t,e.typeDefinitionProvider);if(!n||!r){return}this.register({id:n,registerOptions:r})}registerLanguageProvider(e){const t=e.documentSelector;const n={provideTypeDefinition:(e,t,n)=>{const r=this._client;const provideTypeDefinition=(e,t,n)=>r.sendRequest(i.TypeDefinitionRequest.type,r.code2ProtocolConverter.asTextDocumentPositionParams(e,t),n).then((e=>{if(n.isCancellationRequested){return null}return r.protocol2CodeConverter.asDefinitionResult(e,n)}),(e=>r.handleFailedRequest(i.TypeDefinitionRequest.type,n,e,null)));const s=r.middleware;return s.provideTypeDefinition?s.provideTypeDefinition(e,t,n,provideTypeDefinition):provideTypeDefinition(e,t,n)}};return[this.registerProvider(t,n),n]}registerProvider(e,t){return r.languages.registerTypeDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),t)}}t.TypeDefinitionFeature=TypeDefinitionFeature},96433:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TypeHierarchyFeature=void 0;const r=n(76062);const i=n(3302);const s=n(86389);class TypeHierarchyProvider{constructor(e){this.client=e;this.middleware=e.middleware}prepareTypeHierarchy(e,t,n){const r=this.client;const s=this.middleware;const prepareTypeHierarchy=(e,t,n)=>{const s=r.code2ProtocolConverter.asTextDocumentPositionParams(e,t);return r.sendRequest(i.TypeHierarchyPrepareRequest.type,s,n).then((e=>{if(n.isCancellationRequested){return null}return r.protocol2CodeConverter.asTypeHierarchyItems(e,n)}),(e=>r.handleFailedRequest(i.TypeHierarchyPrepareRequest.type,n,e,null)))};return s.prepareTypeHierarchy?s.prepareTypeHierarchy(e,t,n,prepareTypeHierarchy):prepareTypeHierarchy(e,t,n)}provideTypeHierarchySupertypes(e,t){const n=this.client;const r=this.middleware;const provideTypeHierarchySupertypes=(e,t)=>{const r={item:n.code2ProtocolConverter.asTypeHierarchyItem(e)};return n.sendRequest(i.TypeHierarchySupertypesRequest.type,r,t).then((e=>{if(t.isCancellationRequested){return null}return n.protocol2CodeConverter.asTypeHierarchyItems(e,t)}),(e=>n.handleFailedRequest(i.TypeHierarchySupertypesRequest.type,t,e,null)))};return r.provideTypeHierarchySupertypes?r.provideTypeHierarchySupertypes(e,t,provideTypeHierarchySupertypes):provideTypeHierarchySupertypes(e,t)}provideTypeHierarchySubtypes(e,t){const n=this.client;const r=this.middleware;const provideTypeHierarchySubtypes=(e,t)=>{const r={item:n.code2ProtocolConverter.asTypeHierarchyItem(e)};return n.sendRequest(i.TypeHierarchySubtypesRequest.type,r,t).then((e=>{if(t.isCancellationRequested){return null}return n.protocol2CodeConverter.asTypeHierarchyItems(e,t)}),(e=>n.handleFailedRequest(i.TypeHierarchySubtypesRequest.type,t,e,null)))};return r.provideTypeHierarchySubtypes?r.provideTypeHierarchySubtypes(e,t,provideTypeHierarchySubtypes):provideTypeHierarchySubtypes(e,t)}}class TypeHierarchyFeature extends s.TextDocumentLanguageFeature{constructor(e){super(e,i.TypeHierarchyPrepareRequest.type)}fillClientCapabilities(e){const t=(0,s.ensure)((0,s.ensure)(e,"textDocument"),"typeHierarchy");t.dynamicRegistration=true}initialize(e,t){const[n,r]=this.getRegistration(t,e.typeHierarchyProvider);if(!n||!r){return}this.register({id:n,registerOptions:r})}registerLanguageProvider(e){const t=this._client;const n=new TypeHierarchyProvider(t);return[r.languages.registerTypeHierarchyProvider(t.protocol2CodeConverter.asDocumentSelector(e.documentSelector),n),n]}}t.TypeHierarchyFeature=TypeHierarchyFeature},93741:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.forEach=t.mapAsync=t.map=t.clearTestMode=t.setTestMode=t.Semaphore=t.Delayer=void 0;const r=n(3302);class Delayer{constructor(e){this.defaultDelay=e;this.timeout=undefined;this.completionPromise=undefined;this.onSuccess=undefined;this.task=undefined}trigger(e,t=this.defaultDelay){this.task=e;if(t>=0){this.cancelTimeout()}if(!this.completionPromise){this.completionPromise=new Promise((e=>{this.onSuccess=e})).then((()=>{this.completionPromise=undefined;this.onSuccess=undefined;var e=this.task();this.task=undefined;return e}))}if(t>=0||this.timeout===void 0){this.timeout=(0,r.RAL)().timer.setTimeout((()=>{this.timeout=undefined;this.onSuccess(undefined)}),t>=0?t:this.defaultDelay)}return this.completionPromise}forceDelivery(){if(!this.completionPromise){return undefined}this.cancelTimeout();let e=this.task();this.completionPromise=undefined;this.onSuccess=undefined;this.task=undefined;return e}isTriggered(){return this.timeout!==undefined}cancel(){this.cancelTimeout();this.completionPromise=undefined}cancelTimeout(){if(this.timeout!==undefined){this.timeout.dispose();this.timeout=undefined}}}t.Delayer=Delayer;class Semaphore{constructor(e=1){if(e<=0){throw new Error("Capacity must be greater than 0")}this._capacity=e;this._active=0;this._waiting=[]}lock(e){return new Promise(((t,n)=>{this._waiting.push({thunk:e,resolve:t,reject:n});this.runNext()}))}get active(){return this._active}runNext(){if(this._waiting.length===0||this._active===this._capacity){return}(0,r.RAL)().timer.setImmediate((()=>this.doRunNext()))}doRunNext(){if(this._waiting.length===0||this._active===this._capacity){return}const e=this._waiting.shift();this._active++;if(this._active>this._capacity){throw new Error(`To many thunks active`)}try{const t=e.thunk();if(t instanceof Promise){t.then((t=>{this._active--;e.resolve(t);this.runNext()}),(t=>{this._active--;e.reject(t);this.runNext()}))}else{this._active--;e.resolve(t);this.runNext()}}catch(t){this._active--;e.reject(t);this.runNext()}}}t.Semaphore=Semaphore;let i=false;function setTestMode(){i=true}t.setTestMode=setTestMode;function clearTestMode(){i=false}t.clearTestMode=clearTestMode;const s=15;class Timer{constructor(e=s){this.yieldAfter=i===true?Math.max(e,2):Math.max(e,s);this.startTime=Date.now();this.counter=0;this.total=0;this.counterInterval=1}start(){this.counter=0;this.total=0;this.counterInterval=1;this.startTime=Date.now()}shouldYield(){if(++this.counter>=this.counterInterval){const e=Date.now()-this.startTime;const t=Math.max(0,this.yieldAfter-e);this.total+=this.counter;this.counter=0;if(e>=this.yieldAfter||t<=1){this.counterInterval=1;this.total=0;return true}else{switch(e){case 0:case 1:this.counterInterval=this.total*2;break}}}return false}}async function map(e,t,n,i){if(e.length===0){return[]}const s=new Array(e.length);const o=new Timer(i?.yieldAfter);function convertBatch(n){o.start();for(let r=n;r<e.length;r++){s[r]=t(e[r]);if(o.shouldYield()){i?.yieldCallback&&i.yieldCallback();return r+1}}return-1}let a=convertBatch(0);while(a!==-1){if(n!==undefined&&n.isCancellationRequested){break}a=await new Promise((e=>{(0,r.RAL)().timer.setImmediate((()=>{e(convertBatch(a))}))}))}return s}t.map=map;async function mapAsync(e,t,n,i){if(e.length===0){return[]}const s=new Array(e.length);const o=new Timer(i?.yieldAfter);async function convertBatch(r){o.start();for(let a=r;a<e.length;a++){s[a]=await t(e[a],n);if(o.shouldYield()){i?.yieldCallback&&i.yieldCallback();return a+1}}return-1}let a=await convertBatch(0);while(a!==-1){if(n!==undefined&&n.isCancellationRequested){break}a=await new Promise((e=>{(0,r.RAL)().timer.setImmediate((()=>{e(convertBatch(a))}))}))}return s}t.mapAsync=mapAsync;async function forEach(e,t,n,i){if(e.length===0){return}const s=new Timer(i?.yieldAfter);function runBatch(n){s.start();for(let r=n;r<e.length;r++){t(e[r]);if(s.shouldYield()){i?.yieldCallback&&i.yieldCallback();return r+1}}return-1}let o=runBatch(0);while(o!==-1){if(n!==undefined&&n.isCancellationRequested){break}o=await new Promise((e=>{(0,r.RAL)().timer.setImmediate((()=>{e(runBatch(o))}))}))}}t.forEach=forEach},42173:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.asPromise=t.thenable=t.typedArray=t.stringArray=t.array=t.func=t.error=t.number=t.string=t.boolean=void 0;function boolean(e){return e===true||e===false}t.boolean=boolean;function string(e){return typeof e==="string"||e instanceof String}t.string=string;function number(e){return typeof e==="number"||e instanceof Number}t.number=number;function error(e){return e instanceof Error}t.error=error;function func(e){return typeof e==="function"}t.func=func;function array(e){return Array.isArray(e)}t.array=array;function stringArray(e){return array(e)&&e.every((e=>string(e)))}t.stringArray=stringArray;function typedArray(e,t){return Array.isArray(e)&&e.every(t)}t.typedArray=typedArray;function thenable(e){return e&&func(e.then)}t.thenable=thenable;function asPromise(e){if(e instanceof Promise){return e}else if(thenable(e)){return new Promise(((t,n)=>{e.then((e=>t(e)),(e=>n(e)))}))}else{return Promise.resolve(e)}}t.asPromise=asPromise},56257:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.generateUuid=t.parse=t.isUUID=t.v4=t.empty=void 0;class ValueUUID{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}}class V4UUID extends ValueUUID{constructor(){super([V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),"-",V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),"-","4",V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),"-",V4UUID._oneOf(V4UUID._timeHighBits),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),"-",V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex(),V4UUID._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return V4UUID._oneOf(V4UUID._chars)}}V4UUID._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];V4UUID._timeHighBits=["8","9","a","b"];t.empty=new ValueUUID("00000000-0000-0000-0000-000000000000");function v4(){return new V4UUID}t.v4=v4;const n=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function isUUID(e){return n.test(e)}t.isUUID=isUUID;function parse(e){if(!isUUID(e)){throw new Error("invalid uuid")}return new ValueUUID(e)}t.parse=parse;function generateUuid(){return v4().asHex()}t.generateUuid=generateUuid},56949:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.WorkspaceFoldersFeature=t.arrayDiff=void 0;const r=n(56257);const i=n(76062);const s=n(3302);function access(e,t){if(e===void 0){return undefined}return e[t]}function arrayDiff(e,t){return e.filter((e=>t.indexOf(e)<0))}t.arrayDiff=arrayDiff;class WorkspaceFoldersFeature{constructor(e){this._client=e;this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return s.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){const t=i.workspace.workspaceFolders;this.initializeWithFolders(t);if(t===void 0){e.workspaceFolders=null}else{e.workspaceFolders=t.map((e=>this.asProtocol(e)))}}initializeWithFolders(e){this._initialFolders=e}fillClientCapabilities(e){e.workspace=e.workspace||{};e.workspace.workspaceFolders=true}initialize(e){const t=this._client;t.onRequest(s.WorkspaceFoldersRequest.type,(e=>{const workspaceFolders=()=>{const e=i.workspace.workspaceFolders;if(e===undefined){return null}const t=e.map((e=>this.asProtocol(e)));return t};const n=t.middleware.workspace;return n&&n.workspaceFolders?n.workspaceFolders(e,workspaceFolders):workspaceFolders(e)}));const n=access(access(access(e,"workspace"),"workspaceFolders"),"changeNotifications");let o;if(typeof n==="string"){o=n}else if(n===true){o=r.generateUuid()}if(o){this.register({id:o,registerOptions:undefined})}}sendInitialEvent(e){let t;if(this._initialFolders&&e){const n=arrayDiff(this._initialFolders,e);const r=arrayDiff(e,this._initialFolders);if(r.length>0||n.length>0){t=this.doSendEvent(r,n)}}else if(this._initialFolders){t=this.doSendEvent([],this._initialFolders)}else if(e){t=this.doSendEvent(e,[])}if(t!==undefined){t.catch((e=>{this._client.error(`Sending notification ${s.DidChangeWorkspaceFoldersNotification.type.method} failed`,e)}))}}doSendEvent(e,t){let n={event:{added:e.map((e=>this.asProtocol(e))),removed:t.map((e=>this.asProtocol(e)))}};return this._client.sendNotification(s.DidChangeWorkspaceFoldersNotification.type,n)}register(e){let t=e.id;let n=this._client;let r=i.workspace.onDidChangeWorkspaceFolders((e=>{let didChangeWorkspaceFolders=e=>this.doSendEvent(e.added,e.removed);let t=n.middleware.workspace;const r=t&&t.didChangeWorkspaceFolders?t.didChangeWorkspaceFolders(e,didChangeWorkspaceFolders):didChangeWorkspaceFolders(e);r.catch((e=>{this._client.error(`Sending notification ${s.DidChangeWorkspaceFoldersNotification.type.method} failed`,e)}))}));this._listeners.set(t,r);this.sendInitialEvent(i.workspace.workspaceFolders)}unregister(e){let t=this._listeners.get(e);if(t===void 0){return}this._listeners.delete(e);t.dispose()}dispose(){for(let e of this._listeners.values()){e.dispose()}this._listeners.clear()}asProtocol(e){if(e===void 0){return null}return{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}}t.WorkspaceFoldersFeature=WorkspaceFoldersFeature},24428:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.WorkspaceSymbolFeature=void 0;const r=n(76062);const i=n(3302);const s=n(86389);const o=n(19853);const a=n(56257);class WorkspaceSymbolFeature extends s.WorkspaceFeature{constructor(e){super(e,i.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let t=(0,s.ensure)((0,s.ensure)(e,"workspace"),"symbol");t.dynamicRegistration=true;t.symbolKind={valueSet:o.SupportedSymbolKinds};t.tagSupport={valueSet:o.SupportedSymbolTags};t.resolveSupport={properties:["location.range"]}}initialize(e){if(!e.workspaceSymbolProvider){return}this.register({id:a.generateUuid(),registerOptions:e.workspaceSymbolProvider===true?{workDoneProgress:false}:e.workspaceSymbolProvider})}registerLanguageProvider(e){const t={provideWorkspaceSymbols:(e,t)=>{const n=this._client;const provideWorkspaceSymbols=(e,t)=>n.sendRequest(i.WorkspaceSymbolRequest.type,{query:e},t).then((e=>{if(t.isCancellationRequested){return null}return n.protocol2CodeConverter.asSymbolInformations(e,t)}),(e=>n.handleFailedRequest(i.WorkspaceSymbolRequest.type,t,e,null)));const r=n.middleware;return r.provideWorkspaceSymbols?r.provideWorkspaceSymbols(e,t,provideWorkspaceSymbols):provideWorkspaceSymbols(e,t)},resolveWorkspaceSymbol:e.resolveProvider===true?(e,t)=>{const n=this._client;const resolveWorkspaceSymbol=(e,t)=>n.sendRequest(i.WorkspaceSymbolResolveRequest.type,n.code2ProtocolConverter.asWorkspaceSymbol(e),t).then((e=>{if(t.isCancellationRequested){return null}return n.protocol2CodeConverter.asSymbolInformation(e)}),(e=>n.handleFailedRequest(i.WorkspaceSymbolResolveRequest.type,t,e,null)));const r=n.middleware;return r.resolveWorkspaceSymbol?r.resolveWorkspaceSymbol(e,t,resolveWorkspaceSymbol):resolveWorkspaceSymbol(e,t)}:undefined};return[r.languages.registerWorkspaceSymbolProvider(t),t]}}t.WorkspaceSymbolFeature=WorkspaceSymbolFeature},98144:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){if(r===undefined)r=n;var i=Object.getOwnPropertyDescriptor(t,n);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[n]}}}Object.defineProperty(e,r,i)}:function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]});var i=this&&this.__exportStar||function(e,t){for(var n in e)if(n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n))r(t,e,n)};Object.defineProperty(t,"__esModule",{value:true});t.SettingMonitor=t.LanguageClient=t.TransportKind=void 0;const s=n(32081);const o=n(57147);const a=n(71017);const c=n(76062);const u=n(42173);const l=n(84829);const d=n(28695);const f=n(77798);const p=n(58257);const h=n(81495);i(n(77798),t);i(n(12990),t);const m="^1.67.0";var g;(function(e){e[e["stdio"]=0]="stdio";e[e["ipc"]=1]="ipc";e[e["pipe"]=2]="pipe";e[e["socket"]=3]="socket"})(g=t.TransportKind||(t.TransportKind={}));var v;(function(e){function isSocket(e){const t=e;return t&&t.kind===g.socket&&u.number(t.port)}e.isSocket=isSocket})(v||(v={}));var y;(function(e){function is(e){return u.string(e.command)}e.is=is})(y||(y={}));var b;(function(e){function is(e){return u.string(e.module)}e.is=is})(b||(b={}));var _;(function(e){function is(e){let t=e;return t&&t.writer!==undefined&&t.reader!==undefined}e.is=is})(_||(_={}));var S;(function(e){function is(e){let t=e;return t&&t.process!==undefined&&typeof t.detached==="boolean"}e.is=is})(S||(S={}));class LanguageClient extends l.BaseLanguageClient{constructor(e,t,n,r,i){let s;let o;let a;let c;let l;if(u.string(t)){s=e;o=t;a=n;c=r;l=!!i}else{s=e.toLowerCase();o=e;a=t;c=n;l=r}if(l===undefined){l=false}super(s,o,c);this._serverOptions=a;this._forceDebug=l;this._isInDebugMode=l;try{this.checkVersion()}catch(e){if(u.string(e.message)){this.outputChannel.appendLine(e.message)}throw e}}checkVersion(){const e=p(c.version);if(!e){throw new Error(`No valid VS Code version detected. Version string is: ${c.version}`)}if(e.prerelease&&e.prerelease.length>0){e.prerelease=[]}if(!h(e,m)){throw new Error(`The language client requires VS Code version ${m} but received version ${c.version}`)}}get isInDebugMode(){return this._isInDebugMode}async restart(){await this.stop();if(this.isInDebugMode){await new Promise((e=>setTimeout(e,1e3)));await this.start()}else{await this.start()}}stop(e=2e3){return super.stop(e).finally((()=>{if(this._serverProcess){const e=this._serverProcess;this._serverProcess=undefined;if(this._isDetached===undefined||!this._isDetached){this.checkProcessDied(e)}this._isDetached=undefined}}))}checkProcessDied(e){if(!e||e.pid===undefined){return}setTimeout((()=>{try{if(e.pid!==undefined){process.kill(e.pid,0);(0,d.terminate)(e)}}catch(e){}}),2e3)}handleConnectionClosed(){this._serverProcess=undefined;super.handleConnectionClosed()}fillInitializeParams(e){super.fillInitializeParams(e);if(e.processId===null){e.processId=process.pid}}createMessageTransports(e){function getEnvironment(e,t){if(!e&&!t){return undefined}const n=Object.create(null);Object.keys(process.env).forEach((e=>n[e]=process.env[e]));if(t){n["ELECTRON_RUN_AS_NODE"]="1";n["ELECTRON_NO_ASAR"]="1"}if(e){Object.keys(e).forEach((t=>n[t]=e[t]))}return n}const t=["--debug=","--debug-brk=","--inspect=","--inspect-brk="];const n=["--debug","--debug-brk","--inspect","--inspect-brk"];function startedInDebugMode(){let e=process.execArgv;if(e){return e.some((e=>t.some((t=>e.startsWith(t)))||n.some((t=>e===t))))}return false}function assertStdio(e){if(e.stdin===null||e.stdout===null||e.stderr===null){throw new Error("Process created without stdio streams")}}const r=this._serverOptions;if(u.func(r)){return r().then((t=>{if(l.MessageTransports.is(t)){this._isDetached=!!t.detached;return t}else if(_.is(t)){this._isDetached=!!t.detached;return{reader:new f.StreamMessageReader(t.reader),writer:new f.StreamMessageWriter(t.writer)}}else{let n;if(S.is(t)){n=t.process;this._isDetached=t.detached}else{n=t;this._isDetached=false}n.stderr.on("data",(t=>this.outputChannel.append(u.string(t)?t:t.toString(e))));return{reader:new f.StreamMessageReader(n.stdout),writer:new f.StreamMessageWriter(n.stdin)}}}))}let i;let o=r;if(o.run||o.debug){if(this._forceDebug||startedInDebugMode()){i=o.debug;this._isInDebugMode=true}else{i=o.run;this._isInDebugMode=false}}else{i=r}return this._getServerWorkingDir(i.options).then((t=>{if(b.is(i)&&i.module){let n=i;let r=n.transport||g.stdio;if(n.runtime){const i=[];const o=n.options??Object.create(null);if(o.execArgv){o.execArgv.forEach((e=>i.push(e)))}i.push(n.module);if(n.args){n.args.forEach((e=>i.push(e)))}const a=Object.create(null);a.cwd=t;a.env=getEnvironment(o.env,false);const c=this._getRuntimePath(n.runtime,t);let l=undefined;if(r===g.ipc){a.stdio=[null,null,null,"ipc"];i.push("--node-ipc")}else if(r===g.stdio){i.push("--stdio")}else if(r===g.pipe){l=(0,f.generateRandomPipeName)();i.push(`--pipe=${l}`)}else if(v.isSocket(r)){i.push(`--socket=${r.port}`)}i.push(`--clientProcessId=${process.pid.toString()}`);if(r===g.ipc||r===g.stdio){const t=s.spawn(c,i,a);if(!t||!t.pid){return handleChildProcessStartError(t,`Launching server using runtime ${c} failed.`)}this._serverProcess=t;t.stderr.on("data",(t=>this.outputChannel.append(u.string(t)?t:t.toString(e))));if(r===g.ipc){t.stdout.on("data",(t=>this.outputChannel.append(u.string(t)?t:t.toString(e))));return Promise.resolve({reader:new f.IPCMessageReader(t),writer:new f.IPCMessageWriter(t)})}else{return Promise.resolve({reader:new f.StreamMessageReader(t.stdout),writer:new f.StreamMessageWriter(t.stdin)})}}else if(r===g.pipe){return(0,f.createClientPipeTransport)(l).then((t=>{const n=s.spawn(c,i,a);if(!n||!n.pid){return handleChildProcessStartError(n,`Launching server using runtime ${c} failed.`)}this._serverProcess=n;n.stderr.on("data",(t=>this.outputChannel.append(u.string(t)?t:t.toString(e))));n.stdout.on("data",(t=>this.outputChannel.append(u.string(t)?t:t.toString(e))));return t.onConnected().then((e=>({reader:e[0],writer:e[1]})))}))}else if(v.isSocket(r)){return(0,f.createClientSocketTransport)(r.port).then((t=>{const n=s.spawn(c,i,a);if(!n||!n.pid){return handleChildProcessStartError(n,`Launching server using runtime ${c} failed.`)}this._serverProcess=n;n.stderr.on("data",(t=>this.outputChannel.append(u.string(t)?t:t.toString(e))));n.stdout.on("data",(t=>this.outputChannel.append(u.string(t)?t:t.toString(e))));return t.onConnected().then((e=>({reader:e[0],writer:e[1]})))}))}}else{let i=undefined;return new Promise(((o,a)=>{const c=(n.args&&n.args.slice())??[];if(r===g.ipc){c.push("--node-ipc")}else if(r===g.stdio){c.push("--stdio")}else if(r===g.pipe){i=(0,f.generateRandomPipeName)();c.push(`--pipe=${i}`)}else if(v.isSocket(r)){c.push(`--socket=${r.port}`)}c.push(`--clientProcessId=${process.pid.toString()}`);const l=n.options??Object.create(null);l.env=getEnvironment(l.env,true);l.execArgv=l.execArgv||[];l.cwd=t;l.silent=true;if(r===g.ipc||r===g.stdio){const t=s.fork(n.module,c||[],l);assertStdio(t);this._serverProcess=t;t.stderr.on("data",(t=>this.outputChannel.append(u.string(t)?t:t.toString(e))));if(r===g.ipc){t.stdout.on("data",(t=>this.outputChannel.append(u.string(t)?t:t.toString(e))));o({reader:new f.IPCMessageReader(this._serverProcess),writer:new f.IPCMessageWriter(this._serverProcess)})}else{o({reader:new f.StreamMessageReader(t.stdout),writer:new f.StreamMessageWriter(t.stdin)})}}else if(r===g.pipe){(0,f.createClientPipeTransport)(i).then((t=>{const r=s.fork(n.module,c||[],l);assertStdio(r);this._serverProcess=r;r.stderr.on("data",(t=>this.outputChannel.append(u.string(t)?t:t.toString(e))));r.stdout.on("data",(t=>this.outputChannel.append(u.string(t)?t:t.toString(e))));t.onConnected().then((e=>{o({reader:e[0],writer:e[1]})}),a)}),a)}else if(v.isSocket(r)){(0,f.createClientSocketTransport)(r.port).then((t=>{const r=s.fork(n.module,c||[],l);assertStdio(r);this._serverProcess=r;r.stderr.on("data",(t=>this.outputChannel.append(u.string(t)?t:t.toString(e))));r.stdout.on("data",(t=>this.outputChannel.append(u.string(t)?t:t.toString(e))));t.onConnected().then((e=>{o({reader:e[0],writer:e[1]})}),a)}),a)}}))}}else if(y.is(i)&&i.command){const n=i;const r=i.args!==undefined?i.args.slice(0):[];let o=undefined;const a=i.transport;if(a===g.stdio){r.push("--stdio")}else if(a===g.pipe){o=(0,f.generateRandomPipeName)();r.push(`--pipe=${o}`)}else if(v.isSocket(a)){r.push(`--socket=${a.port}`)}else if(a===g.ipc){throw new Error(`Transport kind ipc is not support for command executable`)}const c=Object.assign({},n.options);c.cwd=c.cwd||t;if(a===undefined||a===g.stdio){const t=s.spawn(n.command,r,c);if(!t||!t.pid){return handleChildProcessStartError(t,`Launching server using command ${n.command} failed.`)}t.stderr.on("data",(t=>this.outputChannel.append(u.string(t)?t:t.toString(e))));this._serverProcess=t;this._isDetached=!!c.detached;return Promise.resolve({reader:new f.StreamMessageReader(t.stdout),writer:new f.StreamMessageWriter(t.stdin)})}else if(a===g.pipe){return(0,f.createClientPipeTransport)(o).then((t=>{const i=s.spawn(n.command,r,c);if(!i||!i.pid){return handleChildProcessStartError(i,`Launching server using command ${n.command} failed.`)}this._serverProcess=i;this._isDetached=!!c.detached;i.stderr.on("data",(t=>this.outputChannel.append(u.string(t)?t:t.toString(e))));i.stdout.on("data",(t=>this.outputChannel.append(u.string(t)?t:t.toString(e))));return t.onConnected().then((e=>({reader:e[0],writer:e[1]})))}))}else if(v.isSocket(a)){return(0,f.createClientSocketTransport)(a.port).then((t=>{const i=s.spawn(n.command,r,c);if(!i||!i.pid){return handleChildProcessStartError(i,`Launching server using command ${n.command} failed.`)}this._serverProcess=i;this._isDetached=!!c.detached;i.stderr.on("data",(t=>this.outputChannel.append(u.string(t)?t:t.toString(e))));i.stdout.on("data",(t=>this.outputChannel.append(u.string(t)?t:t.toString(e))));return t.onConnected().then((e=>({reader:e[0],writer:e[1]})))}))}}return Promise.reject(new Error(`Unsupported server configuration `+JSON.stringify(r,null,4)))}))}_getRuntimePath(e,t){if(a.isAbsolute(e)){return e}const n=this._mainGetRootPath();if(n!==undefined){const t=a.join(n,e);if(o.existsSync(t)){return t}}if(t!==undefined){const n=a.join(t,e);if(o.existsSync(n)){return n}}return e}_mainGetRootPath(){let e=c.workspace.workspaceFolders;if(!e||e.length===0){return undefined}let t=e[0];if(t.uri.scheme==="file"){return t.uri.fsPath}return undefined}_getServerWorkingDir(e){let t=e&&e.cwd;if(!t){t=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()}if(t){return new Promise((e=>{o.lstat(t,((n,r)=>{e(!n&&r.isDirectory()?t:undefined)}))}))}return Promise.resolve(undefined)}getLocale(){const e=process.env["VSCODE_NLS_CONFIG"];if(e===undefined){return"en"}let t=undefined;try{t=JSON.parse(e)}catch(e){}if(t===undefined||typeof t.locale!=="string"){return"en"}return t.locale}}t.LanguageClient=LanguageClient;class SettingMonitor{constructor(e,t){this._client=e;this._setting=t;this._listeners=[]}start(){c.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners);this.onDidChangeConfiguration();return new c.Disposable((()=>{if(this._client.needsStop()){void this._client.stop()}}))}onDidChangeConfiguration(){let e=this._setting.indexOf(".");let t=e>=0?this._setting.substr(0,e):this._setting;let n=e>=0?this._setting.substr(e+1):undefined;let r=n?c.workspace.getConfiguration(t).get(n,false):c.workspace.getConfiguration(t);if(r&&this._client.needsStart()){this._client.start().catch((e=>this._client.error("Start failed after configuration change",e,"force")))}else if(!r&&this._client.needsStop()){void this._client.stop().catch((e=>this._client.error("Stop failed after configuration change",e,"force")))}}}t.SettingMonitor=SettingMonitor;function handleChildProcessStartError(e,t){if(e===null){return Promise.reject(t)}return new Promise(((n,r)=>{e.on("error",(e=>{r(`${t} ${e}`)}));setImmediate((()=>r(t)))}))}},28695:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.terminate=void 0;const r=n(32081);const i=n(71017);const s=process.platform==="win32";const o=process.platform==="darwin";const a=process.platform==="linux";function terminate(e,t){if(s){try{let n={stdio:["pipe","pipe","ignore"]};if(t){n.cwd=t}r.execFileSync("taskkill",["/T","/F","/PID",e.pid.toString()],n);return true}catch(e){return false}}else if(a||o){try{var n=(0,i.join)(__dirname,"terminateProcess.sh");var c=r.spawnSync(n,[e.pid.toString()]);return c.error?false:true}catch(e){return false}}else{e.kill("SIGKILL");return true}}t.terminate=terminate},89074:(e,t,n)=>{"use strict";e.exports=n(98144)},76474:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){if(r===undefined)r=n;var i=Object.getOwnPropertyDescriptor(t,n);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[n]}}}Object.defineProperty(e,r,i)}:function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]});var i=this&&this.__exportStar||function(e,t){for(var n in e)if(n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n))r(t,e,n)};Object.defineProperty(t,"__esModule",{value:true});t.LSPErrorCodes=t.createProtocolConnection=void 0;i(n(41983),t);i(n(64726),t);i(n(38126),t);i(n(13550),t);var s=n(53546);Object.defineProperty(t,"createProtocolConnection",{enumerable:true,get:function(){return s.createProtocolConnection}});var o;(function(e){e.lspReservedErrorRangeStart=-32899;e.RequestFailed=-32803;e.ServerCancelled=-32802;e.ContentModified=-32801;e.RequestCancelled=-32800;e.lspReservedErrorRangeEnd=-32800})(o=t.LSPErrorCodes||(t.LSPErrorCodes={}))},53546:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.createProtocolConnection=void 0;const r=n(41983);function createProtocolConnection(e,t,n,i){if(r.ConnectionStrategy.is(i)){i={connectionStrategy:i}}return(0,r.createMessageConnection)(e,t,n,i)}t.createProtocolConnection=createProtocolConnection},38126:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ProtocolNotificationType=t.ProtocolNotificationType0=t.ProtocolRequestType=t.ProtocolRequestType0=t.RegistrationType=t.MessageDirection=void 0;const r=n(41983);var i;(function(e){e["clientToServer"]="clientToServer";e["serverToClient"]="serverToClient";e["both"]="both"})(i=t.MessageDirection||(t.MessageDirection={}));class RegistrationType{constructor(e){this.method=e}}t.RegistrationType=RegistrationType;class ProtocolRequestType0 extends r.RequestType0{constructor(e){super(e)}}t.ProtocolRequestType0=ProtocolRequestType0;class ProtocolRequestType extends r.RequestType{constructor(e){super(e,r.ParameterStructures.byName)}}t.ProtocolRequestType=ProtocolRequestType;class ProtocolNotificationType0 extends r.NotificationType0{constructor(e){super(e)}}t.ProtocolNotificationType0=ProtocolNotificationType0;class ProtocolNotificationType extends r.NotificationType{constructor(e){super(e,r.ParameterStructures.byName)}}t.ProtocolNotificationType=ProtocolNotificationType},4638:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.CallHierarchyOutgoingCallsRequest=t.CallHierarchyIncomingCallsRequest=t.CallHierarchyPrepareRequest=void 0;const r=n(38126);var i;(function(e){e.method="textDocument/prepareCallHierarchy";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method)})(i=t.CallHierarchyPrepareRequest||(t.CallHierarchyPrepareRequest={}));var s;(function(e){e.method="callHierarchy/incomingCalls";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method)})(s=t.CallHierarchyIncomingCallsRequest||(t.CallHierarchyIncomingCallsRequest={}));var o;(function(e){e.method="callHierarchy/outgoingCalls";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method)})(o=t.CallHierarchyOutgoingCallsRequest||(t.CallHierarchyOutgoingCallsRequest={}))},56125:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ColorPresentationRequest=t.DocumentColorRequest=void 0;const r=n(38126);var i;(function(e){e.method="textDocument/documentColor";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method)})(i=t.DocumentColorRequest||(t.DocumentColorRequest={}));var s;(function(e){e.method="textDocument/colorPresentation";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method)})(s=t.ColorPresentationRequest||(t.ColorPresentationRequest={}))},24127:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ConfigurationRequest=void 0;const r=n(38126);var i;(function(e){e.method="workspace/configuration";e.messageDirection=r.MessageDirection.serverToClient;e.type=new r.ProtocolRequestType(e.method)})(i=t.ConfigurationRequest||(t.ConfigurationRequest={}))},5765:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DeclarationRequest=void 0;const r=n(38126);let i;var s;(function(e){e.method="textDocument/declaration";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method)})(s=t.DeclarationRequest||(t.DeclarationRequest={}))},27357:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DiagnosticRefreshRequest=t.WorkspaceDiagnosticRequest=t.DocumentDiagnosticRequest=t.DocumentDiagnosticReportKind=t.DiagnosticServerCancellationData=void 0;const r=n(41983);const i=n(24065);const s=n(38126);var o;(function(e){function is(e){const t=e;return t&&i.boolean(t.retriggerRequest)}e.is=is})(o=t.DiagnosticServerCancellationData||(t.DiagnosticServerCancellationData={}));var a;(function(e){e.Full="full";e.Unchanged="unchanged"})(a=t.DocumentDiagnosticReportKind||(t.DocumentDiagnosticReportKind={}));var c;(function(e){e.method="textDocument/diagnostic";e.messageDirection=s.MessageDirection.clientToServer;e.type=new s.ProtocolRequestType(e.method);e.partialResult=new r.ProgressType})(c=t.DocumentDiagnosticRequest||(t.DocumentDiagnosticRequest={}));var u;(function(e){e.method="workspace/diagnostic";e.messageDirection=s.MessageDirection.clientToServer;e.type=new s.ProtocolRequestType(e.method);e.partialResult=new r.ProgressType})(u=t.WorkspaceDiagnosticRequest||(t.WorkspaceDiagnosticRequest={}));var l;(function(e){e.method=`workspace/diagnostic/refresh`;e.messageDirection=s.MessageDirection.clientToServer;e.type=new s.ProtocolRequestType0(e.method)})(l=t.DiagnosticRefreshRequest||(t.DiagnosticRefreshRequest={}))},56243:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.WillDeleteFilesRequest=t.DidDeleteFilesNotification=t.DidRenameFilesNotification=t.WillRenameFilesRequest=t.DidCreateFilesNotification=t.WillCreateFilesRequest=t.FileOperationPatternKind=void 0;const r=n(38126);var i;(function(e){e.file="file";e.folder="folder"})(i=t.FileOperationPatternKind||(t.FileOperationPatternKind={}));var s;(function(e){e.method="workspace/willCreateFiles";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method)})(s=t.WillCreateFilesRequest||(t.WillCreateFilesRequest={}));var o;(function(e){e.method="workspace/didCreateFiles";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolNotificationType(e.method)})(o=t.DidCreateFilesNotification||(t.DidCreateFilesNotification={}));var a;(function(e){e.method="workspace/willRenameFiles";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method)})(a=t.WillRenameFilesRequest||(t.WillRenameFilesRequest={}));var c;(function(e){e.method="workspace/didRenameFiles";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolNotificationType(e.method)})(c=t.DidRenameFilesNotification||(t.DidRenameFilesNotification={}));var u;(function(e){e.method="workspace/didDeleteFiles";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolNotificationType(e.method)})(u=t.DidDeleteFilesNotification||(t.DidDeleteFilesNotification={}));var l;(function(e){e.method="workspace/willDeleteFiles";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method)})(l=t.WillDeleteFilesRequest||(t.WillDeleteFilesRequest={}))},16823:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FoldingRangeRequest=void 0;const r=n(38126);var i;(function(e){e.method="textDocument/foldingRange";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method)})(i=t.FoldingRangeRequest||(t.FoldingRangeRequest={}))},30441:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ImplementationRequest=void 0;const r=n(38126);let i;var s;(function(e){e.method="textDocument/implementation";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method)})(s=t.ImplementationRequest||(t.ImplementationRequest={}))},11591:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.InlayHintRefreshRequest=t.InlayHintResolveRequest=t.InlayHintRequest=void 0;const r=n(38126);var i;(function(e){e.method="textDocument/inlayHint";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method)})(i=t.InlayHintRequest||(t.InlayHintRequest={}));var s;(function(e){e.method="inlayHint/resolve";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method)})(s=t.InlayHintResolveRequest||(t.InlayHintResolveRequest={}));var o;(function(e){e.method=`workspace/inlayHint/refresh`;e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType0(e.method)})(o=t.InlayHintRefreshRequest||(t.InlayHintRefreshRequest={}))},34232:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.InlineValueRefreshRequest=t.InlineValueRequest=void 0;const r=n(38126);var i;(function(e){e.method="textDocument/inlineValue";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method)})(i=t.InlineValueRequest||(t.InlineValueRequest={}));var s;(function(e){e.method=`workspace/inlineValue/refresh`;e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType0(e.method)})(s=t.InlineValueRefreshRequest||(t.InlineValueRefreshRequest={}))},13550:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.WorkspaceSymbolRequest=t.CodeActionResolveRequest=t.CodeActionRequest=t.DocumentSymbolRequest=t.DocumentHighlightRequest=t.ReferencesRequest=t.DefinitionRequest=t.SignatureHelpRequest=t.SignatureHelpTriggerKind=t.HoverRequest=t.CompletionResolveRequest=t.CompletionRequest=t.CompletionTriggerKind=t.PublishDiagnosticsNotification=t.WatchKind=t.RelativePattern=t.FileChangeType=t.DidChangeWatchedFilesNotification=t.WillSaveTextDocumentWaitUntilRequest=t.WillSaveTextDocumentNotification=t.TextDocumentSaveReason=t.DidSaveTextDocumentNotification=t.DidCloseTextDocumentNotification=t.DidChangeTextDocumentNotification=t.TextDocumentContentChangeEvent=t.DidOpenTextDocumentNotification=t.TextDocumentSyncKind=t.TelemetryEventNotification=t.LogMessageNotification=t.ShowMessageRequest=t.ShowMessageNotification=t.MessageType=t.DidChangeConfigurationNotification=t.ExitNotification=t.ShutdownRequest=t.InitializedNotification=t.InitializeErrorCodes=t.InitializeRequest=t.WorkDoneProgressOptions=t.TextDocumentRegistrationOptions=t.StaticRegistrationOptions=t.PositionEncodingKind=t.FailureHandlingKind=t.ResourceOperationKind=t.UnregistrationRequest=t.RegistrationRequest=t.DocumentSelector=t.NotebookCellTextDocumentFilter=t.NotebookDocumentFilter=t.TextDocumentFilter=void 0;t.TypeHierarchySubtypesRequest=t.TypeHierarchyPrepareRequest=t.MonikerRequest=t.MonikerKind=t.UniquenessLevel=t.WillDeleteFilesRequest=t.DidDeleteFilesNotification=t.WillRenameFilesRequest=t.DidRenameFilesNotification=t.WillCreateFilesRequest=t.DidCreateFilesNotification=t.FileOperationPatternKind=t.LinkedEditingRangeRequest=t.ShowDocumentRequest=t.SemanticTokensRegistrationType=t.SemanticTokensRefreshRequest=t.SemanticTokensRangeRequest=t.SemanticTokensDeltaRequest=t.SemanticTokensRequest=t.TokenFormat=t.CallHierarchyPrepareRequest=t.CallHierarchyOutgoingCallsRequest=t.CallHierarchyIncomingCallsRequest=t.WorkDoneProgressCancelNotification=t.WorkDoneProgressCreateRequest=t.WorkDoneProgress=t.SelectionRangeRequest=t.DeclarationRequest=t.FoldingRangeRequest=t.ColorPresentationRequest=t.DocumentColorRequest=t.ConfigurationRequest=t.DidChangeWorkspaceFoldersNotification=t.WorkspaceFoldersRequest=t.TypeDefinitionRequest=t.ImplementationRequest=t.ApplyWorkspaceEditRequest=t.ExecuteCommandRequest=t.PrepareRenameRequest=t.RenameRequest=t.PrepareSupportDefaultBehavior=t.DocumentOnTypeFormattingRequest=t.DocumentRangeFormattingRequest=t.DocumentFormattingRequest=t.DocumentLinkResolveRequest=t.DocumentLinkRequest=t.CodeLensRefreshRequest=t.CodeLensResolveRequest=t.CodeLensRequest=t.WorkspaceSymbolResolveRequest=void 0;t.DidCloseNotebookDocumentNotification=t.DidSaveNotebookDocumentNotification=t.DidChangeNotebookDocumentNotification=t.NotebookCellArrayChange=t.DidOpenNotebookDocumentNotification=t.NotebookDocumentSyncRegistrationType=t.NotebookDocument=t.NotebookCell=t.ExecutionSummary=t.NotebookCellKind=t.DiagnosticRefreshRequest=t.WorkspaceDiagnosticRequest=t.DocumentDiagnosticRequest=t.DocumentDiagnosticReportKind=t.DiagnosticServerCancellationData=t.InlayHintRefreshRequest=t.InlayHintResolveRequest=t.InlayHintRequest=t.InlineValueRefreshRequest=t.InlineValueRequest=t.TypeHierarchySupertypesRequest=void 0;const r=n(38126);const i=n(64726);const s=n(24065);const o=n(30441);Object.defineProperty(t,"ImplementationRequest",{enumerable:true,get:function(){return o.ImplementationRequest}});const a=n(79895);Object.defineProperty(t,"TypeDefinitionRequest",{enumerable:true,get:function(){return a.TypeDefinitionRequest}});const c=n(99172);Object.defineProperty(t,"WorkspaceFoldersRequest",{enumerable:true,get:function(){return c.WorkspaceFoldersRequest}});Object.defineProperty(t,"DidChangeWorkspaceFoldersNotification",{enumerable:true,get:function(){return c.DidChangeWorkspaceFoldersNotification}});const u=n(24127);Object.defineProperty(t,"ConfigurationRequest",{enumerable:true,get:function(){return u.ConfigurationRequest}});const l=n(56125);Object.defineProperty(t,"DocumentColorRequest",{enumerable:true,get:function(){return l.DocumentColorRequest}});Object.defineProperty(t,"ColorPresentationRequest",{enumerable:true,get:function(){return l.ColorPresentationRequest}});const d=n(16823);Object.defineProperty(t,"FoldingRangeRequest",{enumerable:true,get:function(){return d.FoldingRangeRequest}});const f=n(5765);Object.defineProperty(t,"DeclarationRequest",{enumerable:true,get:function(){return f.DeclarationRequest}});const p=n(27424);Object.defineProperty(t,"SelectionRangeRequest",{enumerable:true,get:function(){return p.SelectionRangeRequest}});const h=n(95431);Object.defineProperty(t,"WorkDoneProgress",{enumerable:true,get:function(){return h.WorkDoneProgress}});Object.defineProperty(t,"WorkDoneProgressCreateRequest",{enumerable:true,get:function(){return h.WorkDoneProgressCreateRequest}});Object.defineProperty(t,"WorkDoneProgressCancelNotification",{enumerable:true,get:function(){return h.WorkDoneProgressCancelNotification}});const m=n(4638);Object.defineProperty(t,"CallHierarchyIncomingCallsRequest",{enumerable:true,get:function(){return m.CallHierarchyIncomingCallsRequest}});Object.defineProperty(t,"CallHierarchyOutgoingCallsRequest",{enumerable:true,get:function(){return m.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(t,"CallHierarchyPrepareRequest",{enumerable:true,get:function(){return m.CallHierarchyPrepareRequest}});const g=n(34918);Object.defineProperty(t,"TokenFormat",{enumerable:true,get:function(){return g.TokenFormat}});Object.defineProperty(t,"SemanticTokensRequest",{enumerable:true,get:function(){return g.SemanticTokensRequest}});Object.defineProperty(t,"SemanticTokensDeltaRequest",{enumerable:true,get:function(){return g.SemanticTokensDeltaRequest}});Object.defineProperty(t,"SemanticTokensRangeRequest",{enumerable:true,get:function(){return g.SemanticTokensRangeRequest}});Object.defineProperty(t,"SemanticTokensRefreshRequest",{enumerable:true,get:function(){return g.SemanticTokensRefreshRequest}});Object.defineProperty(t,"SemanticTokensRegistrationType",{enumerable:true,get:function(){return g.SemanticTokensRegistrationType}});const v=n(99806);Object.defineProperty(t,"ShowDocumentRequest",{enumerable:true,get:function(){return v.ShowDocumentRequest}});const y=n(18727);Object.defineProperty(t,"LinkedEditingRangeRequest",{enumerable:true,get:function(){return y.LinkedEditingRangeRequest}});const b=n(56243);Object.defineProperty(t,"FileOperationPatternKind",{enumerable:true,get:function(){return b.FileOperationPatternKind}});Object.defineProperty(t,"DidCreateFilesNotification",{enumerable:true,get:function(){return b.DidCreateFilesNotification}});Object.defineProperty(t,"WillCreateFilesRequest",{enumerable:true,get:function(){return b.WillCreateFilesRequest}});Object.defineProperty(t,"DidRenameFilesNotification",{enumerable:true,get:function(){return b.DidRenameFilesNotification}});Object.defineProperty(t,"WillRenameFilesRequest",{enumerable:true,get:function(){return b.WillRenameFilesRequest}});Object.defineProperty(t,"DidDeleteFilesNotification",{enumerable:true,get:function(){return b.DidDeleteFilesNotification}});Object.defineProperty(t,"WillDeleteFilesRequest",{enumerable:true,get:function(){return b.WillDeleteFilesRequest}});const _=n(40608);Object.defineProperty(t,"UniquenessLevel",{enumerable:true,get:function(){return _.UniquenessLevel}});Object.defineProperty(t,"MonikerKind",{enumerable:true,get:function(){return _.MonikerKind}});Object.defineProperty(t,"MonikerRequest",{enumerable:true,get:function(){return _.MonikerRequest}});const S=n(99444);Object.defineProperty(t,"TypeHierarchyPrepareRequest",{enumerable:true,get:function(){return S.TypeHierarchyPrepareRequest}});Object.defineProperty(t,"TypeHierarchySubtypesRequest",{enumerable:true,get:function(){return S.TypeHierarchySubtypesRequest}});Object.defineProperty(t,"TypeHierarchySupertypesRequest",{enumerable:true,get:function(){return S.TypeHierarchySupertypesRequest}});const w=n(34232);Object.defineProperty(t,"InlineValueRequest",{enumerable:true,get:function(){return w.InlineValueRequest}});Object.defineProperty(t,"InlineValueRefreshRequest",{enumerable:true,get:function(){return w.InlineValueRefreshRequest}});const T=n(11591);Object.defineProperty(t,"InlayHintRequest",{enumerable:true,get:function(){return T.InlayHintRequest}});Object.defineProperty(t,"InlayHintResolveRequest",{enumerable:true,get:function(){return T.InlayHintResolveRequest}});Object.defineProperty(t,"InlayHintRefreshRequest",{enumerable:true,get:function(){return T.InlayHintRefreshRequest}});const k=n(27357);Object.defineProperty(t,"DiagnosticServerCancellationData",{enumerable:true,get:function(){return k.DiagnosticServerCancellationData}});Object.defineProperty(t,"DocumentDiagnosticReportKind",{enumerable:true,get:function(){return k.DocumentDiagnosticReportKind}});Object.defineProperty(t,"DocumentDiagnosticRequest",{enumerable:true,get:function(){return k.DocumentDiagnosticRequest}});Object.defineProperty(t,"WorkspaceDiagnosticRequest",{enumerable:true,get:function(){return k.WorkspaceDiagnosticRequest}});Object.defineProperty(t,"DiagnosticRefreshRequest",{enumerable:true,get:function(){return k.DiagnosticRefreshRequest}});const C=n(83077);Object.defineProperty(t,"NotebookCellKind",{enumerable:true,get:function(){return C.NotebookCellKind}});Object.defineProperty(t,"ExecutionSummary",{enumerable:true,get:function(){return C.ExecutionSummary}});Object.defineProperty(t,"NotebookCell",{enumerable:true,get:function(){return C.NotebookCell}});Object.defineProperty(t,"NotebookDocument",{enumerable:true,get:function(){return C.NotebookDocument}});Object.defineProperty(t,"NotebookDocumentSyncRegistrationType",{enumerable:true,get:function(){return C.NotebookDocumentSyncRegistrationType}});Object.defineProperty(t,"DidOpenNotebookDocumentNotification",{enumerable:true,get:function(){return C.DidOpenNotebookDocumentNotification}});Object.defineProperty(t,"NotebookCellArrayChange",{enumerable:true,get:function(){return C.NotebookCellArrayChange}});Object.defineProperty(t,"DidChangeNotebookDocumentNotification",{enumerable:true,get:function(){return C.DidChangeNotebookDocumentNotification}});Object.defineProperty(t,"DidSaveNotebookDocumentNotification",{enumerable:true,get:function(){return C.DidSaveNotebookDocumentNotification}});Object.defineProperty(t,"DidCloseNotebookDocumentNotification",{enumerable:true,get:function(){return C.DidCloseNotebookDocumentNotification}});let E;var R;(function(e){function is(e){const t=e;return s.string(t.language)||s.string(t.scheme)||s.string(t.pattern)}e.is=is})(R=t.TextDocumentFilter||(t.TextDocumentFilter={}));var x;(function(e){function is(e){const t=e;return s.objectLiteral(t)&&(s.string(t.notebookType)||s.string(t.scheme)||s.string(t.pattern))}e.is=is})(x=t.NotebookDocumentFilter||(t.NotebookDocumentFilter={}));var O;(function(e){function is(e){const t=e;return s.objectLiteral(t)&&(s.string(t.notebook)||x.is(t.notebook))&&(t.language===undefined||s.string(t.language))}e.is=is})(O=t.NotebookCellTextDocumentFilter||(t.NotebookCellTextDocumentFilter={}));var D;(function(e){function is(e){if(!Array.isArray(e)){return false}for(let t of e){if(!s.string(t)&&!R.is(t)&&!O.is(t)){return false}}return true}e.is=is})(D=t.DocumentSelector||(t.DocumentSelector={}));var P;(function(e){e.method="client/registerCapability";e.messageDirection=r.MessageDirection.serverToClient;e.type=new r.ProtocolRequestType(e.method)})(P=t.RegistrationRequest||(t.RegistrationRequest={}));var I;(function(e){e.method="client/unregisterCapability";e.messageDirection=r.MessageDirection.serverToClient;e.type=new r.ProtocolRequestType(e.method)})(I=t.UnregistrationRequest||(t.UnregistrationRequest={}));var M;(function(e){e.Create="create";e.Rename="rename";e.Delete="delete"})(M=t.ResourceOperationKind||(t.ResourceOperationKind={}));var N;(function(e){e.Abort="abort";e.Transactional="transactional";e.TextOnlyTransactional="textOnlyTransactional";e.Undo="undo"})(N=t.FailureHandlingKind||(t.FailureHandlingKind={}));var A;(function(e){e.UTF8="utf-8";e.UTF16="utf-16";e.UTF32="utf-32"})(A=t.PositionEncodingKind||(t.PositionEncodingKind={}));var F;(function(e){function hasId(e){const t=e;return t&&s.string(t.id)&&t.id.length>0}e.hasId=hasId})(F=t.StaticRegistrationOptions||(t.StaticRegistrationOptions={}));var L;(function(e){function is(e){const t=e;return t&&(t.documentSelector===null||D.is(t.documentSelector))}e.is=is})(L=t.TextDocumentRegistrationOptions||(t.TextDocumentRegistrationOptions={}));var j;(function(e){function is(e){const t=e;return s.objectLiteral(t)&&(t.workDoneProgress===undefined||s.boolean(t.workDoneProgress))}e.is=is;function hasWorkDoneProgress(e){const t=e;return t&&s.boolean(t.workDoneProgress)}e.hasWorkDoneProgress=hasWorkDoneProgress})(j=t.WorkDoneProgressOptions||(t.WorkDoneProgressOptions={}));var q;(function(e){e.method="initialize";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method)})(q=t.InitializeRequest||(t.InitializeRequest={}));var $;(function(e){e.unknownProtocolVersion=1})($=t.InitializeErrorCodes||(t.InitializeErrorCodes={}));var U;(function(e){e.method="initialized";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolNotificationType(e.method)})(U=t.InitializedNotification||(t.InitializedNotification={}));var H;(function(e){e.method="shutdown";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType0(e.method)})(H=t.ShutdownRequest||(t.ShutdownRequest={}));var W;(function(e){e.method="exit";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolNotificationType0(e.method)})(W=t.ExitNotification||(t.ExitNotification={}));var B;(function(e){e.method="workspace/didChangeConfiguration";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolNotificationType(e.method)})(B=t.DidChangeConfigurationNotification||(t.DidChangeConfigurationNotification={}));var Y;(function(e){e.Error=1;e.Warning=2;e.Info=3;e.Log=4})(Y=t.MessageType||(t.MessageType={}));var V;(function(e){e.method="window/showMessage";e.messageDirection=r.MessageDirection.serverToClient;e.type=new r.ProtocolNotificationType(e.method)})(V=t.ShowMessageNotification||(t.ShowMessageNotification={}));var K;(function(e){e.method="window/showMessageRequest";e.messageDirection=r.MessageDirection.serverToClient;e.type=new r.ProtocolRequestType(e.method)})(K=t.ShowMessageRequest||(t.ShowMessageRequest={}));var G;(function(e){e.method="window/logMessage";e.messageDirection=r.MessageDirection.serverToClient;e.type=new r.ProtocolNotificationType(e.method)})(G=t.LogMessageNotification||(t.LogMessageNotification={}));var z;(function(e){e.method="telemetry/event";e.messageDirection=r.MessageDirection.serverToClient;e.type=new r.ProtocolNotificationType(e.method)})(z=t.TelemetryEventNotification||(t.TelemetryEventNotification={}));var J;(function(e){e.None=0;e.Full=1;e.Incremental=2})(J=t.TextDocumentSyncKind||(t.TextDocumentSyncKind={}));var X;(function(e){e.method="textDocument/didOpen";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolNotificationType(e.method)})(X=t.DidOpenTextDocumentNotification||(t.DidOpenTextDocumentNotification={}));var Q;(function(e){function isIncremental(e){let t=e;return t!==undefined&&t!==null&&typeof t.text==="string"&&t.range!==undefined&&(t.rangeLength===undefined||typeof t.rangeLength==="number")}e.isIncremental=isIncremental;function isFull(e){let t=e;return t!==undefined&&t!==null&&typeof t.text==="string"&&t.range===undefined&&t.rangeLength===undefined}e.isFull=isFull})(Q=t.TextDocumentContentChangeEvent||(t.TextDocumentContentChangeEvent={}));var Z;(function(e){e.method="textDocument/didChange";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolNotificationType(e.method)})(Z=t.DidChangeTextDocumentNotification||(t.DidChangeTextDocumentNotification={}));var ee;(function(e){e.method="textDocument/didClose";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolNotificationType(e.method)})(ee=t.DidCloseTextDocumentNotification||(t.DidCloseTextDocumentNotification={}));var te;(function(e){e.method="textDocument/didSave";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolNotificationType(e.method)})(te=t.DidSaveTextDocumentNotification||(t.DidSaveTextDocumentNotification={}));var ne;(function(e){e.Manual=1;e.AfterDelay=2;e.FocusOut=3})(ne=t.TextDocumentSaveReason||(t.TextDocumentSaveReason={}));var re;(function(e){e.method="textDocument/willSave";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolNotificationType(e.method)})(re=t.WillSaveTextDocumentNotification||(t.WillSaveTextDocumentNotification={}));var ie;(function(e){e.method="textDocument/willSaveWaitUntil";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method)})(ie=t.WillSaveTextDocumentWaitUntilRequest||(t.WillSaveTextDocumentWaitUntilRequest={}));var se;(function(e){e.method="workspace/didChangeWatchedFiles";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolNotificationType(e.method)})(se=t.DidChangeWatchedFilesNotification||(t.DidChangeWatchedFilesNotification={}));var oe;(function(e){e.Created=1;e.Changed=2;e.Deleted=3})(oe=t.FileChangeType||(t.FileChangeType={}));var ae;(function(e){function is(e){const t=e;return s.objectLiteral(t)&&(i.URI.is(t.baseUri)||i.WorkspaceFolder.is(t.baseUri))&&s.string(t.pattern)}e.is=is})(ae=t.RelativePattern||(t.RelativePattern={}));var ce;(function(e){e.Create=1;e.Change=2;e.Delete=4})(ce=t.WatchKind||(t.WatchKind={}));var ue;(function(e){e.method="textDocument/publishDiagnostics";e.messageDirection=r.MessageDirection.serverToClient;e.type=new r.ProtocolNotificationType(e.method)})(ue=t.PublishDiagnosticsNotification||(t.PublishDiagnosticsNotification={}));var le;(function(e){e.Invoked=1;e.TriggerCharacter=2;e.TriggerForIncompleteCompletions=3})(le=t.CompletionTriggerKind||(t.CompletionTriggerKind={}));var de;(function(e){e.method="textDocument/completion";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method)})(de=t.CompletionRequest||(t.CompletionRequest={}));var fe;(function(e){e.method="completionItem/resolve";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method)})(fe=t.CompletionResolveRequest||(t.CompletionResolveRequest={}));var pe;(function(e){e.method="textDocument/hover";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method)})(pe=t.HoverRequest||(t.HoverRequest={}));var he;(function(e){e.Invoked=1;e.TriggerCharacter=2;e.ContentChange=3})(he=t.SignatureHelpTriggerKind||(t.SignatureHelpTriggerKind={}));var me;(function(e){e.method="textDocument/signatureHelp";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method)})(me=t.SignatureHelpRequest||(t.SignatureHelpRequest={}));var ge;(function(e){e.method="textDocument/definition";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method)})(ge=t.DefinitionRequest||(t.DefinitionRequest={}));var ve;(function(e){e.method="textDocument/references";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method)})(ve=t.ReferencesRequest||(t.ReferencesRequest={}));var ye;(function(e){e.method="textDocument/documentHighlight";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method)})(ye=t.DocumentHighlightRequest||(t.DocumentHighlightRequest={}));var be;(function(e){e.method="textDocument/documentSymbol";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method)})(be=t.DocumentSymbolRequest||(t.DocumentSymbolRequest={}));var _e;(function(e){e.method="textDocument/codeAction";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method)})(_e=t.CodeActionRequest||(t.CodeActionRequest={}));var Se;(function(e){e.method="codeAction/resolve";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method)})(Se=t.CodeActionResolveRequest||(t.CodeActionResolveRequest={}));var we;(function(e){e.method="workspace/symbol";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method)})(we=t.WorkspaceSymbolRequest||(t.WorkspaceSymbolRequest={}));var Te;(function(e){e.method="workspaceSymbol/resolve";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method)})(Te=t.WorkspaceSymbolResolveRequest||(t.WorkspaceSymbolResolveRequest={}));var ke;(function(e){e.method="textDocument/codeLens";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method)})(ke=t.CodeLensRequest||(t.CodeLensRequest={}));var Ce;(function(e){e.method="codeLens/resolve";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method)})(Ce=t.CodeLensResolveRequest||(t.CodeLensResolveRequest={}));var Ee;(function(e){e.method=`workspace/codeLens/refresh`;e.messageDirection=r.MessageDirection.serverToClient;e.type=new r.ProtocolRequestType0(e.method)})(Ee=t.CodeLensRefreshRequest||(t.CodeLensRefreshRequest={}));var Re;(function(e){e.method="textDocument/documentLink";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method)})(Re=t.DocumentLinkRequest||(t.DocumentLinkRequest={}));var xe;(function(e){e.method="documentLink/resolve";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method)})(xe=t.DocumentLinkResolveRequest||(t.DocumentLinkResolveRequest={}));var Oe;(function(e){e.method="textDocument/formatting";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method)})(Oe=t.DocumentFormattingRequest||(t.DocumentFormattingRequest={}));var De;(function(e){e.method="textDocument/rangeFormatting";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method)})(De=t.DocumentRangeFormattingRequest||(t.DocumentRangeFormattingRequest={}));var Pe;(function(e){e.method="textDocument/onTypeFormatting";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method)})(Pe=t.DocumentOnTypeFormattingRequest||(t.DocumentOnTypeFormattingRequest={}));var Ie;(function(e){e.Identifier=1})(Ie=t.PrepareSupportDefaultBehavior||(t.PrepareSupportDefaultBehavior={}));var Me;(function(e){e.method="textDocument/rename";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method)})(Me=t.RenameRequest||(t.RenameRequest={}));var Ne;(function(e){e.method="textDocument/prepareRename";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method)})(Ne=t.PrepareRenameRequest||(t.PrepareRenameRequest={}));var Ae;(function(e){e.method="workspace/executeCommand";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method)})(Ae=t.ExecuteCommandRequest||(t.ExecuteCommandRequest={}));var Fe;(function(e){e.method="workspace/applyEdit";e.messageDirection=r.MessageDirection.serverToClient;e.type=new r.ProtocolRequestType("workspace/applyEdit")})(Fe=t.ApplyWorkspaceEditRequest||(t.ApplyWorkspaceEditRequest={}))},18727:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.LinkedEditingRangeRequest=void 0;const r=n(38126);var i;(function(e){e.method="textDocument/linkedEditingRange";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method)})(i=t.LinkedEditingRangeRequest||(t.LinkedEditingRangeRequest={}))},40608:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MonikerRequest=t.MonikerKind=t.UniquenessLevel=void 0;const r=n(38126);var i;(function(e){e.document="document";e.project="project";e.group="group";e.scheme="scheme";e.global="global"})(i=t.UniquenessLevel||(t.UniquenessLevel={}));var s;(function(e){e.$import="import";e.$export="export";e.local="local"})(s=t.MonikerKind||(t.MonikerKind={}));var o;(function(e){e.method="textDocument/moniker";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method)})(o=t.MonikerRequest||(t.MonikerRequest={}))},83077:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DidCloseNotebookDocumentNotification=t.DidSaveNotebookDocumentNotification=t.DidChangeNotebookDocumentNotification=t.NotebookCellArrayChange=t.DidOpenNotebookDocumentNotification=t.NotebookDocumentSyncRegistrationType=t.NotebookDocument=t.NotebookCell=t.ExecutionSummary=t.NotebookCellKind=void 0;const r=n(64726);const i=n(24065);const s=n(38126);var o;(function(e){e.Markup=1;e.Code=2;function is(e){return e===1||e===2}e.is=is})(o=t.NotebookCellKind||(t.NotebookCellKind={}));var a;(function(e){function create(e,t){const n={executionOrder:e};if(t===true||t===false){n.success=t}return n}e.create=create;function is(e){const t=e;return i.objectLiteral(t)&&r.uinteger.is(t.executionOrder)&&(t.success===undefined||i.boolean(t.success))}e.is=is;function equals(e,t){if(e===t){return true}if(e===null||e===undefined||t===null||t===undefined){return false}return e.executionOrder===t.executionOrder&&e.success===t.success}e.equals=equals})(a=t.ExecutionSummary||(t.ExecutionSummary={}));var c;(function(e){function create(e,t){return{kind:e,document:t}}e.create=create;function is(e){const t=e;return i.objectLiteral(t)&&o.is(t.kind)&&r.DocumentUri.is(t.document)&&(t.metadata===undefined||i.objectLiteral(t.metadata))}e.is=is;function diff(e,t){const n=new Set;if(e.document!==t.document){n.add("document")}if(e.kind!==t.kind){n.add("kind")}if(e.executionSummary!==t.executionSummary){n.add("executionSummary")}if((e.metadata!==undefined||t.metadata!==undefined)&&!equalsMetadata(e.metadata,t.metadata)){n.add("metadata")}if((e.executionSummary!==undefined||t.executionSummary!==undefined)&&!a.equals(e.executionSummary,t.executionSummary)){n.add("executionSummary")}return n}e.diff=diff;function equalsMetadata(e,t){if(e===t){return true}if(e===null||e===undefined||t===null||t===undefined){return false}if(typeof e!==typeof t){return false}if(typeof e!=="object"){return false}const n=Array.isArray(e);const r=Array.isArray(t);if(n!==r){return false}if(n&&r){if(e.length!==t.length){return false}for(let n=0;n<e.length;n++){if(!equalsMetadata(e[n],t[n])){return false}}}if(i.objectLiteral(e)&&i.objectLiteral(t)){const n=Object.keys(e);const r=Object.keys(t);if(n.length!==r.length){return false}n.sort();r.sort();if(!equalsMetadata(n,r)){return false}for(let r=0;r<n.length;r++){const i=n[r];if(!equalsMetadata(e[i],t[i])){return false}}}return true}})(c=t.NotebookCell||(t.NotebookCell={}));var u;(function(e){function create(e,t,n,r){return{uri:e,notebookType:t,version:n,cells:r}}e.create=create;function is(e){const t=e;return i.objectLiteral(t)&&i.string(t.uri)&&r.integer.is(t.version)&&i.typedArray(t.cells,c.is)}e.is=is})(u=t.NotebookDocument||(t.NotebookDocument={}));var l;(function(e){e.method="notebookDocument/sync";e.messageDirection=s.MessageDirection.clientToServer;e.type=new s.RegistrationType(e.method)})(l=t.NotebookDocumentSyncRegistrationType||(t.NotebookDocumentSyncRegistrationType={}));var d;(function(e){e.method="notebookDocument/didOpen";e.messageDirection=s.MessageDirection.clientToServer;e.type=new s.ProtocolNotificationType(e.method);e.registrationMethod=l.method})(d=t.DidOpenNotebookDocumentNotification||(t.DidOpenNotebookDocumentNotification={}));var f;(function(e){function is(e){const t=e;return i.objectLiteral(t)&&r.uinteger.is(t.start)&&r.uinteger.is(t.deleteCount)&&(t.cells===undefined||i.typedArray(t.cells,c.is))}e.is=is;function create(e,t,n){const r={start:e,deleteCount:t};if(n!==undefined){r.cells=n}return r}e.create=create})(f=t.NotebookCellArrayChange||(t.NotebookCellArrayChange={}));var p;(function(e){e.method="notebookDocument/didChange";e.messageDirection=s.MessageDirection.clientToServer;e.type=new s.ProtocolNotificationType(e.method);e.registrationMethod=l.method})(p=t.DidChangeNotebookDocumentNotification||(t.DidChangeNotebookDocumentNotification={}));var h;(function(e){e.method="notebookDocument/didSave";e.messageDirection=s.MessageDirection.clientToServer;e.type=new s.ProtocolNotificationType(e.method);e.registrationMethod=l.method})(h=t.DidSaveNotebookDocumentNotification||(t.DidSaveNotebookDocumentNotification={}));var m;(function(e){e.method="notebookDocument/didClose";e.messageDirection=s.MessageDirection.clientToServer;e.type=new s.ProtocolNotificationType(e.method);e.registrationMethod=l.method})(m=t.DidCloseNotebookDocumentNotification||(t.DidCloseNotebookDocumentNotification={}))},95431:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.WorkDoneProgressCancelNotification=t.WorkDoneProgressCreateRequest=t.WorkDoneProgress=void 0;const r=n(41983);const i=n(38126);var s;(function(e){e.type=new r.ProgressType;function is(t){return t===e.type}e.is=is})(s=t.WorkDoneProgress||(t.WorkDoneProgress={}));var o;(function(e){e.method="window/workDoneProgress/create";e.messageDirection=i.MessageDirection.serverToClient;e.type=new i.ProtocolRequestType(e.method)})(o=t.WorkDoneProgressCreateRequest||(t.WorkDoneProgressCreateRequest={}));var a;(function(e){e.method="window/workDoneProgress/cancel";e.messageDirection=i.MessageDirection.clientToServer;e.type=new i.ProtocolNotificationType(e.method)})(a=t.WorkDoneProgressCancelNotification||(t.WorkDoneProgressCancelNotification={}))},27424:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SelectionRangeRequest=void 0;const r=n(38126);var i;(function(e){e.method="textDocument/selectionRange";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method)})(i=t.SelectionRangeRequest||(t.SelectionRangeRequest={}))},34918:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SemanticTokensRefreshRequest=t.SemanticTokensRangeRequest=t.SemanticTokensDeltaRequest=t.SemanticTokensRequest=t.SemanticTokensRegistrationType=t.TokenFormat=void 0;const r=n(38126);var i;(function(e){e.Relative="relative"})(i=t.TokenFormat||(t.TokenFormat={}));var s;(function(e){e.method="textDocument/semanticTokens";e.type=new r.RegistrationType(e.method)})(s=t.SemanticTokensRegistrationType||(t.SemanticTokensRegistrationType={}));var o;(function(e){e.method="textDocument/semanticTokens/full";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method);e.registrationMethod=s.method})(o=t.SemanticTokensRequest||(t.SemanticTokensRequest={}));var a;(function(e){e.method="textDocument/semanticTokens/full/delta";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method);e.registrationMethod=s.method})(a=t.SemanticTokensDeltaRequest||(t.SemanticTokensDeltaRequest={}));var c;(function(e){e.method="textDocument/semanticTokens/range";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method);e.registrationMethod=s.method})(c=t.SemanticTokensRangeRequest||(t.SemanticTokensRangeRequest={}));var u;(function(e){e.method=`workspace/semanticTokens/refresh`;e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType0(e.method)})(u=t.SemanticTokensRefreshRequest||(t.SemanticTokensRefreshRequest={}))},99806:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ShowDocumentRequest=void 0;const r=n(38126);var i;(function(e){e.method="window/showDocument";e.messageDirection=r.MessageDirection.serverToClient;e.type=new r.ProtocolRequestType(e.method)})(i=t.ShowDocumentRequest||(t.ShowDocumentRequest={}))},79895:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TypeDefinitionRequest=void 0;const r=n(38126);let i;var s;(function(e){e.method="textDocument/typeDefinition";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method)})(s=t.TypeDefinitionRequest||(t.TypeDefinitionRequest={}))},99444:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TypeHierarchySubtypesRequest=t.TypeHierarchySupertypesRequest=t.TypeHierarchyPrepareRequest=void 0;const r=n(38126);var i;(function(e){e.method="textDocument/prepareTypeHierarchy";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method)})(i=t.TypeHierarchyPrepareRequest||(t.TypeHierarchyPrepareRequest={}));var s;(function(e){e.method="typeHierarchy/supertypes";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method)})(s=t.TypeHierarchySupertypesRequest||(t.TypeHierarchySupertypesRequest={}));var o;(function(e){e.method="typeHierarchy/subtypes";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolRequestType(e.method)})(o=t.TypeHierarchySubtypesRequest||(t.TypeHierarchySubtypesRequest={}))},99172:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.DidChangeWorkspaceFoldersNotification=t.WorkspaceFoldersRequest=void 0;const r=n(38126);var i;(function(e){e.method="workspace/workspaceFolders";e.messageDirection=r.MessageDirection.serverToClient;e.type=new r.ProtocolRequestType0(e.method)})(i=t.WorkspaceFoldersRequest||(t.WorkspaceFoldersRequest={}));var s;(function(e){e.method="workspace/didChangeWorkspaceFolders";e.messageDirection=r.MessageDirection.clientToServer;e.type=new r.ProtocolNotificationType(e.method)})(s=t.DidChangeWorkspaceFoldersNotification||(t.DidChangeWorkspaceFoldersNotification={}))},24065:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.objectLiteral=t.typedArray=t.stringArray=t.array=t.func=t.error=t.number=t.string=t.boolean=void 0;function boolean(e){return e===true||e===false}t.boolean=boolean;function string(e){return typeof e==="string"||e instanceof String}t.string=string;function number(e){return typeof e==="number"||e instanceof Number}t.number=number;function error(e){return e instanceof Error}t.error=error;function func(e){return typeof e==="function"}t.func=func;function array(e){return Array.isArray(e)}t.array=array;function stringArray(e){return array(e)&&e.every((e=>string(e)))}t.stringArray=stringArray;function typedArray(e,t){return Array.isArray(e)&&e.every(t)}t.typedArray=typedArray;function objectLiteral(e){return e!==null&&typeof e==="object"}t.objectLiteral=objectLiteral},3302:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){if(r===undefined)r=n;var i=Object.getOwnPropertyDescriptor(t,n);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[n]}}}Object.defineProperty(e,r,i)}:function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]});var i=this&&this.__exportStar||function(e,t){for(var n in e)if(n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n))r(t,e,n)};Object.defineProperty(t,"__esModule",{value:true});t.createProtocolConnection=void 0;const s=n(28186);i(n(28186),t);i(n(76474),t);function createProtocolConnection(e,t,n,r){return(0,s.createMessageConnection)(e,t,n,r)}t.createProtocolConnection=createProtocolConnection},77798:(e,t,n)=>{"use strict";e.exports=n(3302)},64726:(e,t)=>{(function(n){if(true&&typeof e.exports==="object"){var r=n(require,t);if(r!==undefined)e.exports=r}else if(typeof define==="function"&&define.amd){define(["require","exports"],n)}})((function(){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TextDocument=t.EOL=t.WorkspaceFolder=t.InlayHint=t.InlayHintLabelPart=t.InlayHintKind=t.InlineValueContext=t.InlineValueEvaluatableExpression=t.InlineValueVariableLookup=t.InlineValueText=t.SemanticTokens=t.SemanticTokenModifiers=t.SemanticTokenTypes=t.SelectionRange=t.DocumentLink=t.FormattingOptions=t.CodeLens=t.CodeAction=t.CodeActionContext=t.CodeActionTriggerKind=t.CodeActionKind=t.DocumentSymbol=t.WorkspaceSymbol=t.SymbolInformation=t.SymbolTag=t.SymbolKind=t.DocumentHighlight=t.DocumentHighlightKind=t.SignatureInformation=t.ParameterInformation=t.Hover=t.MarkedString=t.CompletionList=t.CompletionItem=t.CompletionItemLabelDetails=t.InsertTextMode=t.InsertReplaceEdit=t.CompletionItemTag=t.InsertTextFormat=t.CompletionItemKind=t.MarkupContent=t.MarkupKind=t.TextDocumentItem=t.OptionalVersionedTextDocumentIdentifier=t.VersionedTextDocumentIdentifier=t.TextDocumentIdentifier=t.WorkspaceChange=t.WorkspaceEdit=t.DeleteFile=t.RenameFile=t.CreateFile=t.TextDocumentEdit=t.AnnotatedTextEdit=t.ChangeAnnotationIdentifier=t.ChangeAnnotation=t.TextEdit=t.Command=t.Diagnostic=t.CodeDescription=t.DiagnosticTag=t.DiagnosticSeverity=t.DiagnosticRelatedInformation=t.FoldingRange=t.FoldingRangeKind=t.ColorPresentation=t.ColorInformation=t.Color=t.LocationLink=t.Location=t.Range=t.Position=t.uinteger=t.integer=t.URI=t.DocumentUri=void 0;var e;(function(e){function is(e){return typeof e==="string"}e.is=is})(e=t.DocumentUri||(t.DocumentUri={}));var n;(function(e){function is(e){return typeof e==="string"}e.is=is})(n=t.URI||(t.URI={}));var r;(function(e){e.MIN_VALUE=-2147483648;e.MAX_VALUE=2147483647;function is(t){return typeof t==="number"&&e.MIN_VALUE<=t&&t<=e.MAX_VALUE}e.is=is})(r=t.integer||(t.integer={}));var i;(function(e){e.MIN_VALUE=0;e.MAX_VALUE=2147483647;function is(t){return typeof t==="number"&&e.MIN_VALUE<=t&&t<=e.MAX_VALUE}e.is=is})(i=t.uinteger||(t.uinteger={}));var s;(function(e){function create(e,t){if(e===Number.MAX_VALUE){e=i.MAX_VALUE}if(t===Number.MAX_VALUE){t=i.MAX_VALUE}return{line:e,character:t}}e.create=create;function is(e){var t=e;return ke.objectLiteral(t)&&ke.uinteger(t.line)&&ke.uinteger(t.character)}e.is=is})(s=t.Position||(t.Position={}));var o;(function(e){function create(e,t,n,r){if(ke.uinteger(e)&&ke.uinteger(t)&&ke.uinteger(n)&&ke.uinteger(r)){return{start:s.create(e,t),end:s.create(n,r)}}else if(s.is(e)&&s.is(t)){return{start:e,end:t}}else{throw new Error("Range#create called with invalid arguments[".concat(e,", ").concat(t,", ").concat(n,", ").concat(r,"]"))}}e.create=create;function is(e){var t=e;return ke.objectLiteral(t)&&s.is(t.start)&&s.is(t.end)}e.is=is})(o=t.Range||(t.Range={}));var a;(function(e){function create(e,t){return{uri:e,range:t}}e.create=create;function is(e){var t=e;return ke.objectLiteral(t)&&o.is(t.range)&&(ke.string(t.uri)||ke.undefined(t.uri))}e.is=is})(a=t.Location||(t.Location={}));var c;(function(e){function create(e,t,n,r){return{targetUri:e,targetRange:t,targetSelectionRange:n,originSelectionRange:r}}e.create=create;function is(e){var t=e;return ke.objectLiteral(t)&&o.is(t.targetRange)&&ke.string(t.targetUri)&&o.is(t.targetSelectionRange)&&(o.is(t.originSelectionRange)||ke.undefined(t.originSelectionRange))}e.is=is})(c=t.LocationLink||(t.LocationLink={}));var u;(function(e){function create(e,t,n,r){return{red:e,green:t,blue:n,alpha:r}}e.create=create;function is(e){var t=e;return ke.objectLiteral(t)&&ke.numberRange(t.red,0,1)&&ke.numberRange(t.green,0,1)&&ke.numberRange(t.blue,0,1)&&ke.numberRange(t.alpha,0,1)}e.is=is})(u=t.Color||(t.Color={}));var l;(function(e){function create(e,t){return{range:e,color:t}}e.create=create;function is(e){var t=e;return ke.objectLiteral(t)&&o.is(t.range)&&u.is(t.color)}e.is=is})(l=t.ColorInformation||(t.ColorInformation={}));var d;(function(e){function create(e,t,n){return{label:e,textEdit:t,additionalTextEdits:n}}e.create=create;function is(e){var t=e;return ke.objectLiteral(t)&&ke.string(t.label)&&(ke.undefined(t.textEdit)||_.is(t))&&(ke.undefined(t.additionalTextEdits)||ke.typedArray(t.additionalTextEdits,_.is))}e.is=is})(d=t.ColorPresentation||(t.ColorPresentation={}));var f;(function(e){e.Comment="comment";e.Imports="imports";e.Region="region"})(f=t.FoldingRangeKind||(t.FoldingRangeKind={}));var p;(function(e){function create(e,t,n,r,i,s){var o={startLine:e,endLine:t};if(ke.defined(n)){o.startCharacter=n}if(ke.defined(r)){o.endCharacter=r}if(ke.defined(i)){o.kind=i}if(ke.defined(s)){o.collapsedText=s}return o}e.create=create;function is(e){var t=e;return ke.objectLiteral(t)&&ke.uinteger(t.startLine)&&ke.uinteger(t.startLine)&&(ke.undefined(t.startCharacter)||ke.uinteger(t.startCharacter))&&(ke.undefined(t.endCharacter)||ke.uinteger(t.endCharacter))&&(ke.undefined(t.kind)||ke.string(t.kind))}e.is=is})(p=t.FoldingRange||(t.FoldingRange={}));var h;(function(e){function create(e,t){return{location:e,message:t}}e.create=create;function is(e){var t=e;return ke.defined(t)&&a.is(t.location)&&ke.string(t.message)}e.is=is})(h=t.DiagnosticRelatedInformation||(t.DiagnosticRelatedInformation={}));var m;(function(e){e.Error=1;e.Warning=2;e.Information=3;e.Hint=4})(m=t.DiagnosticSeverity||(t.DiagnosticSeverity={}));var g;(function(e){e.Unnecessary=1;e.Deprecated=2})(g=t.DiagnosticTag||(t.DiagnosticTag={}));var v;(function(e){function is(e){var t=e;return ke.objectLiteral(t)&&ke.string(t.href)}e.is=is})(v=t.CodeDescription||(t.CodeDescription={}));var y;(function(e){function create(e,t,n,r,i,s){var o={range:e,message:t};if(ke.defined(n)){o.severity=n}if(ke.defined(r)){o.code=r}if(ke.defined(i)){o.source=i}if(ke.defined(s)){o.relatedInformation=s}return o}e.create=create;function is(e){var t;var n=e;return ke.defined(n)&&o.is(n.range)&&ke.string(n.message)&&(ke.number(n.severity)||ke.undefined(n.severity))&&(ke.integer(n.code)||ke.string(n.code)||ke.undefined(n.code))&&(ke.undefined(n.codeDescription)||ke.string((t=n.codeDescription)===null||t===void 0?void 0:t.href))&&(ke.string(n.source)||ke.undefined(n.source))&&(ke.undefined(n.relatedInformation)||ke.typedArray(n.relatedInformation,h.is))}e.is=is})(y=t.Diagnostic||(t.Diagnostic={}));var b;(function(e){function create(e,t){var n=[];for(var r=2;r<arguments.length;r++){n[r-2]=arguments[r]}var i={title:e,command:t};if(ke.defined(n)&&n.length>0){i.arguments=n}return i}e.create=create;function is(e){var t=e;return ke.defined(t)&&ke.string(t.title)&&ke.string(t.command)}e.is=is})(b=t.Command||(t.Command={}));var _;(function(e){function replace(e,t){return{range:e,newText:t}}e.replace=replace;function insert(e,t){return{range:{start:e,end:e},newText:t}}e.insert=insert;function del(e){return{range:e,newText:""}}e.del=del;function is(e){var t=e;return ke.objectLiteral(t)&&ke.string(t.newText)&&o.is(t.range)}e.is=is})(_=t.TextEdit||(t.TextEdit={}));var S;(function(e){function create(e,t,n){var r={label:e};if(t!==undefined){r.needsConfirmation=t}if(n!==undefined){r.description=n}return r}e.create=create;function is(e){var t=e;return ke.objectLiteral(t)&&ke.string(t.label)&&(ke.boolean(t.needsConfirmation)||t.needsConfirmation===undefined)&&(ke.string(t.description)||t.description===undefined)}e.is=is})(S=t.ChangeAnnotation||(t.ChangeAnnotation={}));var w;(function(e){function is(e){var t=e;return ke.string(t)}e.is=is})(w=t.ChangeAnnotationIdentifier||(t.ChangeAnnotationIdentifier={}));var T;(function(e){function replace(e,t,n){return{range:e,newText:t,annotationId:n}}e.replace=replace;function insert(e,t,n){return{range:{start:e,end:e},newText:t,annotationId:n}}e.insert=insert;function del(e,t){return{range:e,newText:"",annotationId:t}}e.del=del;function is(e){var t=e;return _.is(t)&&(S.is(t.annotationId)||w.is(t.annotationId))}e.is=is})(T=t.AnnotatedTextEdit||(t.AnnotatedTextEdit={}));var k;(function(e){function create(e,t){return{textDocument:e,edits:t}}e.create=create;function is(e){var t=e;return ke.defined(t)&&N.is(t.textDocument)&&Array.isArray(t.edits)}e.is=is})(k=t.TextDocumentEdit||(t.TextDocumentEdit={}));var C;(function(e){function create(e,t,n){var r={kind:"create",uri:e};if(t!==undefined&&(t.overwrite!==undefined||t.ignoreIfExists!==undefined)){r.options=t}if(n!==undefined){r.annotationId=n}return r}e.create=create;function is(e){var t=e;return t&&t.kind==="create"&&ke.string(t.uri)&&(t.options===undefined||(t.options.overwrite===undefined||ke.boolean(t.options.overwrite))&&(t.options.ignoreIfExists===undefined||ke.boolean(t.options.ignoreIfExists)))&&(t.annotationId===undefined||w.is(t.annotationId))}e.is=is})(C=t.CreateFile||(t.CreateFile={}));var E;(function(e){function create(e,t,n,r){var i={kind:"rename",oldUri:e,newUri:t};if(n!==undefined&&(n.overwrite!==undefined||n.ignoreIfExists!==undefined)){i.options=n}if(r!==undefined){i.annotationId=r}return i}e.create=create;function is(e){var t=e;return t&&t.kind==="rename"&&ke.string(t.oldUri)&&ke.string(t.newUri)&&(t.options===undefined||(t.options.overwrite===undefined||ke.boolean(t.options.overwrite))&&(t.options.ignoreIfExists===undefined||ke.boolean(t.options.ignoreIfExists)))&&(t.annotationId===undefined||w.is(t.annotationId))}e.is=is})(E=t.RenameFile||(t.RenameFile={}));var R;(function(e){function create(e,t,n){var r={kind:"delete",uri:e};if(t!==undefined&&(t.recursive!==undefined||t.ignoreIfNotExists!==undefined)){r.options=t}if(n!==undefined){r.annotationId=n}return r}e.create=create;function is(e){var t=e;return t&&t.kind==="delete"&&ke.string(t.uri)&&(t.options===undefined||(t.options.recursive===undefined||ke.boolean(t.options.recursive))&&(t.options.ignoreIfNotExists===undefined||ke.boolean(t.options.ignoreIfNotExists)))&&(t.annotationId===undefined||w.is(t.annotationId))}e.is=is})(R=t.DeleteFile||(t.DeleteFile={}));var x;(function(e){function is(e){var t=e;return t&&(t.changes!==undefined||t.documentChanges!==undefined)&&(t.documentChanges===undefined||t.documentChanges.every((function(e){if(ke.string(e.kind)){return C.is(e)||E.is(e)||R.is(e)}else{return k.is(e)}})))}e.is=is})(x=t.WorkspaceEdit||(t.WorkspaceEdit={}));var O=function(){function TextEditChangeImpl(e,t){this.edits=e;this.changeAnnotations=t}TextEditChangeImpl.prototype.insert=function(e,t,n){var r;var i;if(n===undefined){r=_.insert(e,t)}else if(w.is(n)){i=n;r=T.insert(e,t,n)}else{this.assertChangeAnnotations(this.changeAnnotations);i=this.changeAnnotations.manage(n);r=T.insert(e,t,i)}this.edits.push(r);if(i!==undefined){return i}};TextEditChangeImpl.prototype.replace=function(e,t,n){var r;var i;if(n===undefined){r=_.replace(e,t)}else if(w.is(n)){i=n;r=T.replace(e,t,n)}else{this.assertChangeAnnotations(this.changeAnnotations);i=this.changeAnnotations.manage(n);r=T.replace(e,t,i)}this.edits.push(r);if(i!==undefined){return i}};TextEditChangeImpl.prototype.delete=function(e,t){var n;var r;if(t===undefined){n=_.del(e)}else if(w.is(t)){r=t;n=T.del(e,t)}else{this.assertChangeAnnotations(this.changeAnnotations);r=this.changeAnnotations.manage(t);n=T.del(e,r)}this.edits.push(n);if(r!==undefined){return r}};TextEditChangeImpl.prototype.add=function(e){this.edits.push(e)};TextEditChangeImpl.prototype.all=function(){return this.edits};TextEditChangeImpl.prototype.clear=function(){this.edits.splice(0,this.edits.length)};TextEditChangeImpl.prototype.assertChangeAnnotations=function(e){if(e===undefined){throw new Error("Text edit change is not configured to manage change annotations.")}};return TextEditChangeImpl}();var D=function(){function ChangeAnnotations(e){this._annotations=e===undefined?Object.create(null):e;this._counter=0;this._size=0}ChangeAnnotations.prototype.all=function(){return this._annotations};Object.defineProperty(ChangeAnnotations.prototype,"size",{get:function(){return this._size},enumerable:false,configurable:true});ChangeAnnotations.prototype.manage=function(e,t){var n;if(w.is(e)){n=e}else{n=this.nextId();t=e}if(this._annotations[n]!==undefined){throw new Error("Id ".concat(n," is already in use."))}if(t===undefined){throw new Error("No annotation provided for id ".concat(n))}this._annotations[n]=t;this._size++;return n};ChangeAnnotations.prototype.nextId=function(){this._counter++;return this._counter.toString()};return ChangeAnnotations}();var P=function(){function WorkspaceChange(e){var t=this;this._textEditChanges=Object.create(null);if(e!==undefined){this._workspaceEdit=e;if(e.documentChanges){this._changeAnnotations=new D(e.changeAnnotations);e.changeAnnotations=this._changeAnnotations.all();e.documentChanges.forEach((function(e){if(k.is(e)){var n=new O(e.edits,t._changeAnnotations);t._textEditChanges[e.textDocument.uri]=n}}))}else if(e.changes){Object.keys(e.changes).forEach((function(n){var r=new O(e.changes[n]);t._textEditChanges[n]=r}))}}else{this._workspaceEdit={}}}Object.defineProperty(WorkspaceChange.prototype,"edit",{get:function(){this.initDocumentChanges();if(this._changeAnnotations!==undefined){if(this._changeAnnotations.size===0){this._workspaceEdit.changeAnnotations=undefined}else{this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()}}return this._workspaceEdit},enumerable:false,configurable:true});WorkspaceChange.prototype.getTextEditChange=function(e){if(N.is(e)){this.initDocumentChanges();if(this._workspaceEdit.documentChanges===undefined){throw new Error("Workspace edit is not configured for document changes.")}var t={uri:e.uri,version:e.version};var n=this._textEditChanges[t.uri];if(!n){var r=[];var i={textDocument:t,edits:r};this._workspaceEdit.documentChanges.push(i);n=new O(r,this._changeAnnotations);this._textEditChanges[t.uri]=n}return n}else{this.initChanges();if(this._workspaceEdit.changes===undefined){throw new Error("Workspace edit is not configured for normal text edit changes.")}var n=this._textEditChanges[e];if(!n){var r=[];this._workspaceEdit.changes[e]=r;n=new O(r);this._textEditChanges[e]=n}return n}};WorkspaceChange.prototype.initDocumentChanges=function(){if(this._workspaceEdit.documentChanges===undefined&&this._workspaceEdit.changes===undefined){this._changeAnnotations=new D;this._workspaceEdit.documentChanges=[];this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()}};WorkspaceChange.prototype.initChanges=function(){if(this._workspaceEdit.documentChanges===undefined&&this._workspaceEdit.changes===undefined){this._workspaceEdit.changes=Object.create(null)}};WorkspaceChange.prototype.createFile=function(e,t,n){this.initDocumentChanges();if(this._workspaceEdit.documentChanges===undefined){throw new Error("Workspace edit is not configured for document changes.")}var r;if(S.is(t)||w.is(t)){r=t}else{n=t}var i;var s;if(r===undefined){i=C.create(e,n)}else{s=w.is(r)?r:this._changeAnnotations.manage(r);i=C.create(e,n,s)}this._workspaceEdit.documentChanges.push(i);if(s!==undefined){return s}};WorkspaceChange.prototype.renameFile=function(e,t,n,r){this.initDocumentChanges();if(this._workspaceEdit.documentChanges===undefined){throw new Error("Workspace edit is not configured for document changes.")}var i;if(S.is(n)||w.is(n)){i=n}else{r=n}var s;var o;if(i===undefined){s=E.create(e,t,r)}else{o=w.is(i)?i:this._changeAnnotations.manage(i);s=E.create(e,t,r,o)}this._workspaceEdit.documentChanges.push(s);if(o!==undefined){return o}};WorkspaceChange.prototype.deleteFile=function(e,t,n){this.initDocumentChanges();if(this._workspaceEdit.documentChanges===undefined){throw new Error("Workspace edit is not configured for document changes.")}var r;if(S.is(t)||w.is(t)){r=t}else{n=t}var i;var s;if(r===undefined){i=R.create(e,n)}else{s=w.is(r)?r:this._changeAnnotations.manage(r);i=R.create(e,n,s)}this._workspaceEdit.documentChanges.push(i);if(s!==undefined){return s}};return WorkspaceChange}();t.WorkspaceChange=P;var I;(function(e){function create(e){return{uri:e}}e.create=create;function is(e){var t=e;return ke.defined(t)&&ke.string(t.uri)}e.is=is})(I=t.TextDocumentIdentifier||(t.TextDocumentIdentifier={}));var M;(function(e){function create(e,t){return{uri:e,version:t}}e.create=create;function is(e){var t=e;return ke.defined(t)&&ke.string(t.uri)&&ke.integer(t.version)}e.is=is})(M=t.VersionedTextDocumentIdentifier||(t.VersionedTextDocumentIdentifier={}));var N;(function(e){function create(e,t){return{uri:e,version:t}}e.create=create;function is(e){var t=e;return ke.defined(t)&&ke.string(t.uri)&&(t.version===null||ke.integer(t.version))}e.is=is})(N=t.OptionalVersionedTextDocumentIdentifier||(t.OptionalVersionedTextDocumentIdentifier={}));var A;(function(e){function create(e,t,n,r){return{uri:e,languageId:t,version:n,text:r}}e.create=create;function is(e){var t=e;return ke.defined(t)&&ke.string(t.uri)&&ke.string(t.languageId)&&ke.integer(t.version)&&ke.string(t.text)}e.is=is})(A=t.TextDocumentItem||(t.TextDocumentItem={}));var F;(function(e){e.PlainText="plaintext";e.Markdown="markdown";function is(t){var n=t;return n===e.PlainText||n===e.Markdown}e.is=is})(F=t.MarkupKind||(t.MarkupKind={}));var L;(function(e){function is(e){var t=e;return ke.objectLiteral(e)&&F.is(t.kind)&&ke.string(t.value)}e.is=is})(L=t.MarkupContent||(t.MarkupContent={}));var j;(function(e){e.Text=1;e.Method=2;e.Function=3;e.Constructor=4;e.Field=5;e.Variable=6;e.Class=7;e.Interface=8;e.Module=9;e.Property=10;e.Unit=11;e.Value=12;e.Enum=13;e.Keyword=14;e.Snippet=15;e.Color=16;e.File=17;e.Reference=18;e.Folder=19;e.EnumMember=20;e.Constant=21;e.Struct=22;e.Event=23;e.Operator=24;e.TypeParameter=25})(j=t.CompletionItemKind||(t.CompletionItemKind={}));var q;(function(e){e.PlainText=1;e.Snippet=2})(q=t.InsertTextFormat||(t.InsertTextFormat={}));var $;(function(e){e.Deprecated=1})($=t.CompletionItemTag||(t.CompletionItemTag={}));var U;(function(e){function create(e,t,n){return{newText:e,insert:t,replace:n}}e.create=create;function is(e){var t=e;return t&&ke.string(t.newText)&&o.is(t.insert)&&o.is(t.replace)}e.is=is})(U=t.InsertReplaceEdit||(t.InsertReplaceEdit={}));var H;(function(e){e.asIs=1;e.adjustIndentation=2})(H=t.InsertTextMode||(t.InsertTextMode={}));var W;(function(e){function is(e){var t=e;return t&&(ke.string(t.detail)||t.detail===undefined)&&(ke.string(t.description)||t.description===undefined)}e.is=is})(W=t.CompletionItemLabelDetails||(t.CompletionItemLabelDetails={}));var B;(function(e){function create(e){return{label:e}}e.create=create})(B=t.CompletionItem||(t.CompletionItem={}));var Y;(function(e){function create(e,t){return{items:e?e:[],isIncomplete:!!t}}e.create=create})(Y=t.CompletionList||(t.CompletionList={}));var V;(function(e){function fromPlainText(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}e.fromPlainText=fromPlainText;function is(e){var t=e;return ke.string(t)||ke.objectLiteral(t)&&ke.string(t.language)&&ke.string(t.value)}e.is=is})(V=t.MarkedString||(t.MarkedString={}));var K;(function(e){function is(e){var t=e;return!!t&&ke.objectLiteral(t)&&(L.is(t.contents)||V.is(t.contents)||ke.typedArray(t.contents,V.is))&&(e.range===undefined||o.is(e.range))}e.is=is})(K=t.Hover||(t.Hover={}));var G;(function(e){function create(e,t){return t?{label:e,documentation:t}:{label:e}}e.create=create})(G=t.ParameterInformation||(t.ParameterInformation={}));var z;(function(e){function create(e,t){var n=[];for(var r=2;r<arguments.length;r++){n[r-2]=arguments[r]}var i={label:e};if(ke.defined(t)){i.documentation=t}if(ke.defined(n)){i.parameters=n}else{i.parameters=[]}return i}e.create=create})(z=t.SignatureInformation||(t.SignatureInformation={}));var J;(function(e){e.Text=1;e.Read=2;e.Write=3})(J=t.DocumentHighlightKind||(t.DocumentHighlightKind={}));var X;(function(e){function create(e,t){var n={range:e};if(ke.number(t)){n.kind=t}return n}e.create=create})(X=t.DocumentHighlight||(t.DocumentHighlight={}));var Q;(function(e){e.File=1;e.Module=2;e.Namespace=3;e.Package=4;e.Class=5;e.Method=6;e.Property=7;e.Field=8;e.Constructor=9;e.Enum=10;e.Interface=11;e.Function=12;e.Variable=13;e.Constant=14;e.String=15;e.Number=16;e.Boolean=17;e.Array=18;e.Object=19;e.Key=20;e.Null=21;e.EnumMember=22;e.Struct=23;e.Event=24;e.Operator=25;e.TypeParameter=26})(Q=t.SymbolKind||(t.SymbolKind={}));var Z;(function(e){e.Deprecated=1})(Z=t.SymbolTag||(t.SymbolTag={}));var ee;(function(e){function create(e,t,n,r,i){var s={name:e,kind:t,location:{uri:r,range:n}};if(i){s.containerName=i}return s}e.create=create})(ee=t.SymbolInformation||(t.SymbolInformation={}));var te;(function(e){function create(e,t,n,r){return r!==undefined?{name:e,kind:t,location:{uri:n,range:r}}:{name:e,kind:t,location:{uri:n}}}e.create=create})(te=t.WorkspaceSymbol||(t.WorkspaceSymbol={}));var ne;(function(e){function create(e,t,n,r,i,s){var o={name:e,detail:t,kind:n,range:r,selectionRange:i};if(s!==undefined){o.children=s}return o}e.create=create;function is(e){var t=e;return t&&ke.string(t.name)&&ke.number(t.kind)&&o.is(t.range)&&o.is(t.selectionRange)&&(t.detail===undefined||ke.string(t.detail))&&(t.deprecated===undefined||ke.boolean(t.deprecated))&&(t.children===undefined||Array.isArray(t.children))&&(t.tags===undefined||Array.isArray(t.tags))}e.is=is})(ne=t.DocumentSymbol||(t.DocumentSymbol={}));var re;(function(e){e.Empty="";e.QuickFix="quickfix";e.Refactor="refactor";e.RefactorExtract="refactor.extract";e.RefactorInline="refactor.inline";e.RefactorRewrite="refactor.rewrite";e.Source="source";e.SourceOrganizeImports="source.organizeImports";e.SourceFixAll="source.fixAll"})(re=t.CodeActionKind||(t.CodeActionKind={}));var ie;(function(e){e.Invoked=1;e.Automatic=2})(ie=t.CodeActionTriggerKind||(t.CodeActionTriggerKind={}));var se;(function(e){function create(e,t,n){var r={diagnostics:e};if(t!==undefined&&t!==null){r.only=t}if(n!==undefined&&n!==null){r.triggerKind=n}return r}e.create=create;function is(e){var t=e;return ke.defined(t)&&ke.typedArray(t.diagnostics,y.is)&&(t.only===undefined||ke.typedArray(t.only,ke.string))&&(t.triggerKind===undefined||t.triggerKind===ie.Invoked||t.triggerKind===ie.Automatic)}e.is=is})(se=t.CodeActionContext||(t.CodeActionContext={}));var oe;(function(e){function create(e,t,n){var r={title:e};var i=true;if(typeof t==="string"){i=false;r.kind=t}else if(b.is(t)){r.command=t}else{r.edit=t}if(i&&n!==undefined){r.kind=n}return r}e.create=create;function is(e){var t=e;return t&&ke.string(t.title)&&(t.diagnostics===undefined||ke.typedArray(t.diagnostics,y.is))&&(t.kind===undefined||ke.string(t.kind))&&(t.edit!==undefined||t.command!==undefined)&&(t.command===undefined||b.is(t.command))&&(t.isPreferred===undefined||ke.boolean(t.isPreferred))&&(t.edit===undefined||x.is(t.edit))}e.is=is})(oe=t.CodeAction||(t.CodeAction={}));var ae;(function(e){function create(e,t){var n={range:e};if(ke.defined(t)){n.data=t}return n}e.create=create;function is(e){var t=e;return ke.defined(t)&&o.is(t.range)&&(ke.undefined(t.command)||b.is(t.command))}e.is=is})(ae=t.CodeLens||(t.CodeLens={}));var ce;(function(e){function create(e,t){return{tabSize:e,insertSpaces:t}}e.create=create;function is(e){var t=e;return ke.defined(t)&&ke.uinteger(t.tabSize)&&ke.boolean(t.insertSpaces)}e.is=is})(ce=t.FormattingOptions||(t.FormattingOptions={}));var ue;(function(e){function create(e,t,n){return{range:e,target:t,data:n}}e.create=create;function is(e){var t=e;return ke.defined(t)&&o.is(t.range)&&(ke.undefined(t.target)||ke.string(t.target))}e.is=is})(ue=t.DocumentLink||(t.DocumentLink={}));var le;(function(e){function create(e,t){return{range:e,parent:t}}e.create=create;function is(t){var n=t;return ke.objectLiteral(n)&&o.is(n.range)&&(n.parent===undefined||e.is(n.parent))}e.is=is})(le=t.SelectionRange||(t.SelectionRange={}));var de;(function(e){e["namespace"]="namespace";e["type"]="type";e["class"]="class";e["enum"]="enum";e["interface"]="interface";e["struct"]="struct";e["typeParameter"]="typeParameter";e["parameter"]="parameter";e["variable"]="variable";e["property"]="property";e["enumMember"]="enumMember";e["event"]="event";e["function"]="function";e["method"]="method";e["macro"]="macro";e["keyword"]="keyword";e["modifier"]="modifier";e["comment"]="comment";e["string"]="string";e["number"]="number";e["regexp"]="regexp";e["operator"]="operator";e["decorator"]="decorator"})(de=t.SemanticTokenTypes||(t.SemanticTokenTypes={}));var fe;(function(e){e["declaration"]="declaration";e["definition"]="definition";e["readonly"]="readonly";e["static"]="static";e["deprecated"]="deprecated";e["abstract"]="abstract";e["async"]="async";e["modification"]="modification";e["documentation"]="documentation";e["defaultLibrary"]="defaultLibrary"})(fe=t.SemanticTokenModifiers||(t.SemanticTokenModifiers={}));var pe;(function(e){function is(e){var t=e;return ke.objectLiteral(t)&&(t.resultId===undefined||typeof t.resultId==="string")&&Array.isArray(t.data)&&(t.data.length===0||typeof t.data[0]==="number")}e.is=is})(pe=t.SemanticTokens||(t.SemanticTokens={}));var he;(function(e){function create(e,t){return{range:e,text:t}}e.create=create;function is(e){var t=e;return t!==undefined&&t!==null&&o.is(t.range)&&ke.string(t.text)}e.is=is})(he=t.InlineValueText||(t.InlineValueText={}));var me;(function(e){function create(e,t,n){return{range:e,variableName:t,caseSensitiveLookup:n}}e.create=create;function is(e){var t=e;return t!==undefined&&t!==null&&o.is(t.range)&&ke.boolean(t.caseSensitiveLookup)&&(ke.string(t.variableName)||t.variableName===undefined)}e.is=is})(me=t.InlineValueVariableLookup||(t.InlineValueVariableLookup={}));var ge;(function(e){function create(e,t){return{range:e,expression:t}}e.create=create;function is(e){var t=e;return t!==undefined&&t!==null&&o.is(t.range)&&(ke.string(t.expression)||t.expression===undefined)}e.is=is})(ge=t.InlineValueEvaluatableExpression||(t.InlineValueEvaluatableExpression={}));var ve;(function(e){function create(e,t){return{frameId:e,stoppedLocation:t}}e.create=create;function is(e){var t=e;return ke.defined(t)&&o.is(e.stoppedLocation)}e.is=is})(ve=t.InlineValueContext||(t.InlineValueContext={}));var ye;(function(e){e.Type=1;e.Parameter=2;function is(e){return e===1||e===2}e.is=is})(ye=t.InlayHintKind||(t.InlayHintKind={}));var be;(function(e){function create(e){return{value:e}}e.create=create;function is(e){var t=e;return ke.objectLiteral(t)&&(t.tooltip===undefined||ke.string(t.tooltip)||L.is(t.tooltip))&&(t.location===undefined||a.is(t.location))&&(t.command===undefined||b.is(t.command))}e.is=is})(be=t.InlayHintLabelPart||(t.InlayHintLabelPart={}));var _e;(function(e){function create(e,t,n){var r={position:e,label:t};if(n!==undefined){r.kind=n}return r}e.create=create;function is(e){var t=e;return ke.objectLiteral(t)&&s.is(t.position)&&(ke.string(t.label)||ke.typedArray(t.label,be.is))&&(t.kind===undefined||ye.is(t.kind))&&t.textEdits===undefined||ke.typedArray(t.textEdits,_.is)&&(t.tooltip===undefined||ke.string(t.tooltip)||L.is(t.tooltip))&&(t.paddingLeft===undefined||ke.boolean(t.paddingLeft))&&(t.paddingRight===undefined||ke.boolean(t.paddingRight))}e.is=is})(_e=t.InlayHint||(t.InlayHint={}));var Se;(function(e){function is(e){var t=e;return ke.objectLiteral(t)&&n.is(t.uri)&&ke.string(t.name)}e.is=is})(Se=t.WorkspaceFolder||(t.WorkspaceFolder={}));t.EOL=["\n","\r\n","\r"];var we;(function(e){function create(e,t,n,r){return new Te(e,t,n,r)}e.create=create;function is(e){var t=e;return ke.defined(t)&&ke.string(t.uri)&&(ke.undefined(t.languageId)||ke.string(t.languageId))&&ke.uinteger(t.lineCount)&&ke.func(t.getText)&&ke.func(t.positionAt)&&ke.func(t.offsetAt)?true:false}e.is=is;function applyEdits(e,t){var n=e.getText();var r=mergeSort(t,(function(e,t){var n=e.range.start.line-t.range.start.line;if(n===0){return e.range.start.character-t.range.start.character}return n}));var i=n.length;for(var s=r.length-1;s>=0;s--){var o=r[s];var a=e.offsetAt(o.range.start);var c=e.offsetAt(o.range.end);if(c<=i){n=n.substring(0,a)+o.newText+n.substring(c,n.length)}else{throw new Error("Overlapping edit")}i=a}return n}e.applyEdits=applyEdits;function mergeSort(e,t){if(e.length<=1){return e}var n=e.length/2|0;var r=e.slice(0,n);var i=e.slice(n);mergeSort(r,t);mergeSort(i,t);var s=0;var o=0;var a=0;while(s<r.length&&o<i.length){var c=t(r[s],i[o]);if(c<=0){e[a++]=r[s++]}else{e[a++]=i[o++]}}while(s<r.length){e[a++]=r[s++]}while(o<i.length){e[a++]=i[o++]}return e}})(we=t.TextDocument||(t.TextDocument={}));var Te=function(){function FullTextDocument(e,t,n,r){this._uri=e;this._languageId=t;this._version=n;this._content=r;this._lineOffsets=undefined}Object.defineProperty(FullTextDocument.prototype,"uri",{get:function(){return this._uri},enumerable:false,configurable:true});Object.defineProperty(FullTextDocument.prototype,"languageId",{get:function(){return this._languageId},enumerable:false,configurable:true});Object.defineProperty(FullTextDocument.prototype,"version",{get:function(){return this._version},enumerable:false,configurable:true});FullTextDocument.prototype.getText=function(e){if(e){var t=this.offsetAt(e.start);var n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content};FullTextDocument.prototype.update=function(e,t){this._content=e.text;this._version=t;this._lineOffsets=undefined};FullTextDocument.prototype.getLineOffsets=function(){if(this._lineOffsets===undefined){var e=[];var t=this._content;var n=true;for(var r=0;r<t.length;r++){if(n){e.push(r);n=false}var i=t.charAt(r);n=i==="\r"||i==="\n";if(i==="\r"&&r+1<t.length&&t.charAt(r+1)==="\n"){r++}}if(n&&t.length>0){e.push(t.length)}this._lineOffsets=e}return this._lineOffsets};FullTextDocument.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var t=this.getLineOffsets();var n=0,r=t.length;if(r===0){return s.create(0,e)}while(n<r){var i=Math.floor((n+r)/2);if(t[i]>e){r=i}else{n=i+1}}var o=n-1;return s.create(o,e-t[o])};FullTextDocument.prototype.offsetAt=function(e){var t=this.getLineOffsets();if(e.line>=t.length){return this._content.length}else if(e.line<0){return 0}var n=t[e.line];var r=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,r),n)};Object.defineProperty(FullTextDocument.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:false,configurable:true});return FullTextDocument}();var ke;(function(e){var t=Object.prototype.toString;function defined(e){return typeof e!=="undefined"}e.defined=defined;function undefined(e){return typeof e==="undefined"}e.undefined=undefined;function boolean(e){return e===true||e===false}e.boolean=boolean;function string(e){return t.call(e)==="[object String]"}e.string=string;function number(e){return t.call(e)==="[object Number]"}e.number=number;function numberRange(e,n,r){return t.call(e)==="[object Number]"&&n<=e&&e<=r}e.numberRange=numberRange;function integer(e){return t.call(e)==="[object Number]"&&-2147483648<=e&&e<=2147483647}e.integer=integer;function uinteger(e){return t.call(e)==="[object Number]"&&0<=e&&e<=2147483647}e.uinteger=uinteger;function func(e){return t.call(e)==="[object Function]"}e.func=func;function objectLiteral(e){return e!==null&&typeof e==="object"}e.objectLiteral=objectLiteral;function typedArray(e,t){return Array.isArray(e)&&e.every(t)}e.typedArray=typedArray})(ke||(ke={}))}))},37726:(e,t,n)=>{"use strict";const r=n(73837);const i=n(36100);const{LEVEL:s}=n(67267);const o=e.exports=function TransportStream(e={}){i.call(this,{objectMode:true,highWaterMark:e.highWaterMark});this.format=e.format;this.level=e.level;this.handleExceptions=e.handleExceptions;this.handleRejections=e.handleRejections;this.silent=e.silent;if(e.log)this.log=e.log;if(e.logv)this.logv=e.logv;if(e.close)this.close=e.close;this.once("pipe",(e=>{this.levels=e.levels;this.parent=e}));this.once("unpipe",(e=>{if(e===this.parent){this.parent=null;if(this.close){this.close()}}}))};r.inherits(o,i);o.prototype._write=function _write(e,t,n){if(this.silent||e.exception===true&&!this.handleExceptions){return n(null)}const r=this.level||this.parent&&this.parent.level;if(!r||this.levels[r]>=this.levels[e[s]]){if(e&&!this.format){return this.log(e,n)}let t;let r;try{r=this.format.transform(Object.assign({},e),this.format.options)}catch(e){t=e}if(t||!r){n();if(t)throw t;return}return this.log(r,n)}this._writableState.sync=false;return n(null)};o.prototype._writev=function _writev(e,t){if(this.logv){const n=e.filter(this._accept,this);if(!n.length){return t(null)}return this.logv(n,t)}for(let n=0;n<e.length;n++){if(!this._accept(e[n]))continue;if(e[n].chunk&&!this.format){this.log(e[n].chunk,e[n].callback);continue}let r;let i;try{i=this.format.transform(Object.assign({},e[n].chunk),this.format.options)}catch(e){r=e}if(r||!i){e[n].callback();if(r){t(null);throw r}}else{this.log(i,e[n].callback)}}return t(null)};o.prototype._accept=function _accept(e){const t=e.chunk;if(this.silent){return false}const n=this.level||this.parent&&this.parent.level;if(t.exception===true||!n||this.levels[n]>=this.levels[t[s]]){if(this.handleExceptions||t.exception!==true){return true}}return false};o.prototype._nop=function _nop(){return void undefined};e.exports.LegacyTransportStream=n(60157)},60157:(e,t,n)=>{"use strict";const r=n(73837);const{LEVEL:i}=n(67267);const s=n(37726);const o=e.exports=function LegacyTransportStream(e={}){s.call(this,e);if(!e.transport||typeof e.transport.log!=="function"){throw new Error("Invalid transport, must be an object with a log method.")}this.transport=e.transport;this.level=this.level||e.transport.level;this.handleExceptions=this.handleExceptions||e.transport.handleExceptions;this._deprecated();function transportError(e){this.emit("error",e,this.transport)}if(!this.transport.__winstonError){this.transport.__winstonError=transportError.bind(this);this.transport.on("error",this.transport.__winstonError)}};r.inherits(o,s);o.prototype._write=function _write(e,t,n){if(this.silent||e.exception===true&&!this.handleExceptions){return n(null)}if(!this.level||this.levels[this.level]>=this.levels[e[i]]){this.transport.log(e[i],e.message,e,this._nop)}n(null)};o.prototype._writev=function _writev(e,t){for(let t=0;t<e.length;t++){if(this._accept(e[t])){this.transport.log(e[t].chunk[i],e[t].chunk.message,e[t].chunk,this._nop);e[t].callback()}}return t(null)};o.prototype._deprecated=function _deprecated(){console.error([`${this.transport.name} is a legacy winston transport. Consider upgrading: `,"- Upgrade docs: https://github.com/winstonjs/winston/blob/master/UPGRADE-3.0.md"].join("\n"))};o.prototype.close=function close(){if(this.transport.close){this.transport.close()}if(this.transport.__winstonError){this.transport.removeListener("error",this.transport.__winstonError);this.transport.__winstonError=null}}},61389:e=>{"use strict";e.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next){yield e.value}}}},4461:(e,t,n)=>{"use strict";e.exports=Yallist;Yallist.Node=Node;Yallist.create=Yallist;function Yallist(e){var t=this;if(!(t instanceof Yallist)){t=new Yallist}t.tail=null;t.head=null;t.length=0;if(e&&typeof e.forEach==="function"){e.forEach((function(e){t.push(e)}))}else if(arguments.length>0){for(var n=0,r=arguments.length;n<r;n++){t.push(arguments[n])}}return t}Yallist.prototype.removeNode=function(e){if(e.list!==this){throw new Error("removing node which does not belong to this list")}var t=e.next;var n=e.prev;if(t){t.prev=n}if(n){n.next=t}if(e===this.head){this.head=t}if(e===this.tail){this.tail=n}e.list.length--;e.next=null;e.prev=null;e.list=null;return t};Yallist.prototype.unshiftNode=function(e){if(e===this.head){return}if(e.list){e.list.removeNode(e)}var t=this.head;e.list=this;e.next=t;if(t){t.prev=e}this.head=e;if(!this.tail){this.tail=e}this.length++};Yallist.prototype.pushNode=function(e){if(e===this.tail){return}if(e.list){e.list.removeNode(e)}var t=this.tail;e.list=this;e.prev=t;if(t){t.next=e}this.tail=e;if(!this.head){this.head=e}this.length++};Yallist.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++){push(this,arguments[e])}return this.length};Yallist.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++){unshift(this,arguments[e])}return this.length};Yallist.prototype.pop=function(){if(!this.tail){return undefined}var e=this.tail.value;this.tail=this.tail.prev;if(this.tail){this.tail.next=null}else{this.head=null}this.length--;return e};Yallist.prototype.shift=function(){if(!this.head){return undefined}var e=this.head.value;this.head=this.head.next;if(this.head){this.head.prev=null}else{this.tail=null}this.length--;return e};Yallist.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++){e.call(t,n.value,r,this);n=n.next}};Yallist.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--){e.call(t,n.value,r,this);n=n.prev}};Yallist.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++){n=n.next}if(t===e&&n!==null){return n.value}};Yallist.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++){n=n.prev}if(t===e&&n!==null){return n.value}};Yallist.prototype.map=function(e,t){t=t||this;var n=new Yallist;for(var r=this.head;r!==null;){n.push(e.call(t,r.value,this));r=r.next}return n};Yallist.prototype.mapReverse=function(e,t){t=t||this;var n=new Yallist;for(var r=this.tail;r!==null;){n.push(e.call(t,r.value,this));r=r.prev}return n};Yallist.prototype.reduce=function(e,t){var n;var r=this.head;if(arguments.length>1){n=t}else if(this.head){r=this.head.next;n=this.head.value}else{throw new TypeError("Reduce of empty list with no initial value")}for(var i=0;r!==null;i++){n=e(n,r.value,i);r=r.next}return n};Yallist.prototype.reduceReverse=function(e,t){var n;var r=this.tail;if(arguments.length>1){n=t}else if(this.tail){r=this.tail.prev;n=this.tail.value}else{throw new TypeError("Reduce of empty list with no initial value")}for(var i=this.length-1;r!==null;i--){n=e(n,r.value,i);r=r.prev}return n};Yallist.prototype.toArray=function(){var e=new Array(this.length);for(var t=0,n=this.head;n!==null;t++){e[t]=n.value;n=n.next}return e};Yallist.prototype.toArrayReverse=function(){var e=new Array(this.length);for(var t=0,n=this.tail;n!==null;t++){e[t]=n.value;n=n.prev}return e};Yallist.prototype.slice=function(e,t){t=t||this.length;if(t<0){t+=this.length}e=e||0;if(e<0){e+=this.length}var n=new Yallist;if(t<e||t<0){return n}if(e<0){e=0}if(t>this.length){t=this.length}for(var r=0,i=this.head;i!==null&&r<e;r++){i=i.next}for(;i!==null&&r<t;r++,i=i.next){n.push(i.value)}return n};Yallist.prototype.sliceReverse=function(e,t){t=t||this.length;if(t<0){t+=this.length}e=e||0;if(e<0){e+=this.length}var n=new Yallist;if(t<e||t<0){return n}if(e<0){e=0}if(t>this.length){t=this.length}for(var r=this.length,i=this.tail;i!==null&&r>t;r--){i=i.prev}for(;i!==null&&r>e;r--,i=i.prev){n.push(i.value)}return n};Yallist.prototype.splice=function(e,t,...n){if(e>this.length){e=this.length-1}if(e<0){e=this.length+e}for(var r=0,i=this.head;i!==null&&r<e;r++){i=i.next}var s=[];for(var r=0;i&&r<t;r++){s.push(i.value);i=this.removeNode(i)}if(i===null){i=this.tail}if(i!==this.head&&i!==this.tail){i=i.prev}for(var r=0;r<n.length;r++){i=insert(this,i,n[r])}return s};Yallist.prototype.reverse=function(){var e=this.head;var t=this.tail;for(var n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next;n.next=r}this.head=t;this.tail=e;return this};function insert(e,t,n){var r=t===e.head?new Node(n,null,t,e):new Node(n,t,t.next,e);if(r.next===null){e.tail=r}if(r.prev===null){e.head=r}e.length++;return r}function push(e,t){e.tail=new Node(t,e.tail,null,e);if(!e.head){e.head=e.tail}e.length++}function unshift(e,t){e.head=new Node(t,null,e.head,e);if(!e.tail){e.tail=e.head}e.length++}function Node(e,t,n,r){if(!(this instanceof Node)){return new Node(e,t,n,r)}this.list=r;this.value=e;if(t){t.next=this;this.prev=t}else{this.prev=null}if(n){n.prev=this;this.next=n}else{this.next=null}}try{n(61389)(Yallist)}catch(e){}},67434:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(86406);var i="7";var s=function(){function API(e,t,n){if(t===void 0){t={}}this.dsn=e;this._dsnObject=new r.Dsn(e);this.metadata=t;this._tunnel=n}API.prototype.getDsn=function(){return this._dsnObject};API.prototype.forceEnvelope=function(){return!!this._tunnel};API.prototype.getBaseApiEndpoint=function(){var e=this.getDsn();var t=e.protocol?e.protocol+":":"";var n=e.port?":"+e.port:"";return t+"//"+e.host+n+(e.path?"/"+e.path:"")+"/api/"};API.prototype.getStoreEndpoint=function(){return this._getIngestEndpoint("store")};API.prototype.getStoreEndpointWithUrlEncodedAuth=function(){return this.getStoreEndpoint()+"?"+this._encodedAuth()};API.prototype.getEnvelopeEndpointWithUrlEncodedAuth=function(){if(this.forceEnvelope()){return this._tunnel}return this._getEnvelopeEndpoint()+"?"+this._encodedAuth()};API.prototype.getStoreEndpointPath=function(){var e=this.getDsn();return(e.path?"/"+e.path:"")+"/api/"+e.projectId+"/store/"};API.prototype.getRequestHeaders=function(e,t){var n=this.getDsn();var r=["Sentry sentry_version="+i];r.push("sentry_client="+e+"/"+t);r.push("sentry_key="+n.publicKey);if(n.pass){r.push("sentry_secret="+n.pass)}return{"Content-Type":"application/json","X-Sentry-Auth":r.join(", ")}};API.prototype.getReportDialogEndpoint=function(e){if(e===void 0){e={}}var t=this.getDsn();var n=this.getBaseApiEndpoint()+"embed/error-page/";var r=[];r.push("dsn="+t.toString());for(var i in e){if(i==="dsn"){continue}if(i==="user"){if(!e.user){continue}if(e.user.name){r.push("name="+encodeURIComponent(e.user.name))}if(e.user.email){r.push("email="+encodeURIComponent(e.user.email))}}else{r.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]))}}if(r.length){return n+"?"+r.join("&")}return n};API.prototype._getEnvelopeEndpoint=function(){return this._getIngestEndpoint("envelope")};API.prototype._getIngestEndpoint=function(e){if(this._tunnel){return this._tunnel}var t=this.getBaseApiEndpoint();var n=this.getDsn();return""+t+n.projectId+"/"+e+"/"};API.prototype._encodedAuth=function(){var e=this.getDsn();var t={sentry_key:e.publicKey,sentry_version:i};return r.urlEncode(t)};return API}();t.API=s},7706:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(86406);var i=n(10250);var s=function(){function BaseBackend(e){this._options=e;if(!this._options.dsn){r.logger.warn("No DSN provided, backend will not do anything.")}this._transport=this._setupTransport()}BaseBackend.prototype.eventFromException=function(e,t){throw new r.SentryError("Backend has to implement `eventFromException` method")};BaseBackend.prototype.eventFromMessage=function(e,t,n){throw new r.SentryError("Backend has to implement `eventFromMessage` method")};BaseBackend.prototype.sendEvent=function(e){void this._transport.sendEvent(e).then(null,(function(e){r.logger.error("Error while sending event: "+e)}))};BaseBackend.prototype.sendSession=function(e){if(!this._transport.sendSession){r.logger.warn("Dropping session because custom transport doesn't implement sendSession");return}void this._transport.sendSession(e).then(null,(function(e){r.logger.error("Error while sending session: "+e)}))};BaseBackend.prototype.getTransport=function(){return this._transport};BaseBackend.prototype._setupTransport=function(){return new i.NoopTransport};return BaseBackend}();t.BaseBackend=s},21385:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(28379);var i=n(6066);var s=n(28648);var o=n(86406);var a=n(81313);var c="Not capturing exception because it's already been captured.";var u=function(){function BaseClient(e,t){this._integrations={};this._numProcessing=0;this._backend=new e(t);this._options=t;if(t.dsn){this._dsn=new o.Dsn(t.dsn)}}BaseClient.prototype.captureException=function(e,t,n){var r=this;if(o.checkOrSetAlreadyCaught(e)){o.logger.log(c);return}var i=t&&t.event_id;this._process(this._getBackend().eventFromException(e,t).then((function(e){return r._captureEvent(e,t,n)})).then((function(e){i=e})));return i};BaseClient.prototype.captureMessage=function(e,t,n,r){var i=this;var s=n&&n.event_id;var a=o.isPrimitive(e)?this._getBackend().eventFromMessage(String(e),t,n):this._getBackend().eventFromException(e,n);this._process(a.then((function(e){return i._captureEvent(e,n,r)})).then((function(e){s=e})));return s};BaseClient.prototype.captureEvent=function(e,t,n){var r;if(((r=t)===null||r===void 0?void 0:r.originalException)&&o.checkOrSetAlreadyCaught(t.originalException)){o.logger.log(c);return}var i=t&&t.event_id;this._process(this._captureEvent(e,t,n).then((function(e){i=e})));return i};BaseClient.prototype.captureSession=function(e){if(!this._isEnabled()){o.logger.warn("SDK not enabled, will not capture session.");return}if(!(typeof e.release==="string")){o.logger.warn("Discarded session because of missing or non-string release")}else{this._sendSession(e);e.update({init:false})}};BaseClient.prototype.getDsn=function(){return this._dsn};BaseClient.prototype.getOptions=function(){return this._options};BaseClient.prototype.getTransport=function(){return this._getBackend().getTransport()};BaseClient.prototype.flush=function(e){var t=this;return this._isClientDoneProcessing(e).then((function(n){return t.getTransport().close(e).then((function(e){return n&&e}))}))};BaseClient.prototype.close=function(e){var t=this;return this.flush(e).then((function(e){t.getOptions().enabled=false;return e}))};BaseClient.prototype.setupIntegrations=function(){if(this._isEnabled()&&!this._integrations.initialized){this._integrations=a.setupIntegrations(this._options)}};BaseClient.prototype.getIntegration=function(e){try{return this._integrations[e.id]||null}catch(t){o.logger.warn("Cannot retrieve integration "+e.id+" from the current Client");return null}};BaseClient.prototype._updateSessionFromEvent=function(e,t){var n,i;var o=false;var a=false;var c=t.exception&&t.exception.values;if(c){a=true;try{for(var u=r.__values(c),l=u.next();!l.done;l=u.next()){var d=l.value;var f=d.mechanism;if(f&&f.handled===false){o=true;break}}}catch(e){n={error:e}}finally{try{if(l&&!l.done&&(i=u.return))i.call(u)}finally{if(n)throw n.error}}}var p=e.status===s.SessionStatus.Ok;var h=p&&e.errors===0||p&&o;if(h){e.update(r.__assign(r.__assign({},o&&{status:s.SessionStatus.Crashed}),{errors:e.errors||Number(a||o)}));this.captureSession(e)}};BaseClient.prototype._sendSession=function(e){this._getBackend().sendSession(e)};BaseClient.prototype._isClientDoneProcessing=function(e){var t=this;return new o.SyncPromise((function(n){var r=0;var i=1;var s=setInterval((function(){if(t._numProcessing==0){clearInterval(s);n(true)}else{r+=i;if(e&&r>=e){clearInterval(s);n(false)}}}),i)}))};BaseClient.prototype._getBackend=function(){return this._backend};BaseClient.prototype._isEnabled=function(){return this.getOptions().enabled!==false&&this._dsn!==undefined};BaseClient.prototype._prepareEvent=function(e,t,n){var s=this;var a=this.getOptions().normalizeDepth,c=a===void 0?3:a;var u=r.__assign(r.__assign({},e),{event_id:e.event_id||(n&&n.event_id?n.event_id:o.uuid4()),timestamp:e.timestamp||o.dateTimestampInSeconds()});this._applyClientOptions(u);this._applyIntegrationsMetadata(u);var l=t;if(n&&n.captureContext){l=i.Scope.clone(l).update(n.captureContext)}var d=o.SyncPromise.resolve(u);if(l){d=l.applyToEvent(u,n)}return d.then((function(e){if(typeof c==="number"&&c>0){return s._normalizeEvent(e,c)}return e}))};BaseClient.prototype._normalizeEvent=function(e,t){if(!e){return null}var n=r.__assign(r.__assign(r.__assign(r.__assign(r.__assign({},e),e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((function(e){return r.__assign(r.__assign({},e),e.data&&{data:o.normalize(e.data,t)})}))}),e.user&&{user:o.normalize(e.user,t)}),e.contexts&&{contexts:o.normalize(e.contexts,t)}),e.extra&&{extra:o.normalize(e.extra,t)});if(e.contexts&&e.contexts.trace){n.contexts.trace=e.contexts.trace}var i=this.getOptions()._experiments,s=i===void 0?{}:i;if(s.ensureNoCircularStructures){return o.normalize(n)}return n};BaseClient.prototype._applyClientOptions=function(e){var t=this.getOptions();var n=t.environment,r=t.release,i=t.dist,s=t.maxValueLength,a=s===void 0?250:s;if(!("environment"in e)){e.environment="environment"in t?n:"production"}if(e.release===undefined&&r!==undefined){e.release=r}if(e.dist===undefined&&i!==undefined){e.dist=i}if(e.message){e.message=o.truncate(e.message,a)}var c=e.exception&&e.exception.values&&e.exception.values[0];if(c&&c.value){c.value=o.truncate(c.value,a)}var u=e.request;if(u&&u.url){u.url=o.truncate(u.url,a)}};BaseClient.prototype._applyIntegrationsMetadata=function(e){var t=Object.keys(this._integrations);if(t.length>0){e.sdk=e.sdk||{};e.sdk.integrations=r.__spread(e.sdk.integrations||[],t)}};BaseClient.prototype._sendEvent=function(e){this._getBackend().sendEvent(e)};BaseClient.prototype._captureEvent=function(e,t,n){return this._processEvent(e,t,n).then((function(e){return e.event_id}),(function(e){o.logger.error(e);return undefined}))};BaseClient.prototype._processEvent=function(e,t,n){var r=this;var i,a;var c=this.getOptions(),u=c.beforeSend,l=c.sampleRate;var d=this.getTransport();if(!this._isEnabled()){return o.SyncPromise.reject(new o.SentryError("SDK not enabled, will not capture event."))}var f=e.type==="transaction";if(!f&&typeof l==="number"&&Math.random()>l){(a=(i=d).recordLostEvent)===null||a===void 0?void 0:a.call(i,s.Outcome.SampleRate,"event");return o.SyncPromise.reject(new o.SentryError("Discarding event because it's not included in the random sample (sampling rate = "+l+")"))}return this._prepareEvent(e,n,t).then((function(n){var i,a;if(n===null){(a=(i=d).recordLostEvent)===null||a===void 0?void 0:a.call(i,s.Outcome.EventProcessor,e.type||"event");throw new o.SentryError("An event processor returned null, will not send event.")}var c=t&&t.data&&t.data.__sentry__===true;if(c||f||!u){return n}var l=u(n,t);return r._ensureBeforeSendRv(l)})).then((function(t){var i,a;if(t===null){(a=(i=d).recordLostEvent)===null||a===void 0?void 0:a.call(i,s.Outcome.BeforeSend,e.type||"event");throw new o.SentryError("`beforeSend` returned `null`, will not send event.")}var c=n&&n.getSession&&n.getSession();if(!f&&c){r._updateSessionFromEvent(c,t)}r._sendEvent(t);return t})).then(null,(function(e){if(e instanceof o.SentryError){throw e}r.captureException(e,{data:{__sentry__:true},originalException:e});throw new o.SentryError("Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: "+e)}))};BaseClient.prototype._process=function(e){var t=this;this._numProcessing+=1;void e.then((function(e){t._numProcessing-=1;return e}),(function(e){t._numProcessing-=1;return e}))};BaseClient.prototype._ensureBeforeSendRv=function(e){var t="`beforeSend` method has to return `null` or a valid event.";if(o.isThenable(e)){return e.then((function(e){if(!(o.isPlainObject(e)||e===null)){throw new o.SentryError(t)}return e}),(function(e){throw new o.SentryError("beforeSend rejected with "+e)}))}else if(!(o.isPlainObject(e)||e===null)){throw new o.SentryError(t)}return e};return BaseClient}();t.BaseClient=u},76634:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(55413);t.addBreadcrumb=r.addBreadcrumb;t.captureException=r.captureException;t.captureEvent=r.captureEvent;t.captureMessage=r.captureMessage;t.configureScope=r.configureScope;t.startTransaction=r.startTransaction;t.setContext=r.setContext;t.setExtra=r.setExtra;t.setExtras=r.setExtras;t.setTag=r.setTag;t.setTags=r.setTags;t.setUser=r.setUser;t.withScope=r.withScope;var i=n(6066);t.addGlobalEventProcessor=i.addGlobalEventProcessor;t.getCurrentHub=i.getCurrentHub;t.getHubFromCarrier=i.getHubFromCarrier;t.Hub=i.Hub;t.makeMain=i.makeMain;t.Scope=i.Scope;var s=n(67434);t.API=s.API;var o=n(21385);t.BaseClient=o.BaseClient;var a=n(7706);t.BaseBackend=a.BaseBackend;var c=n(68646);t.eventToSentryRequest=c.eventToSentryRequest;t.sessionToSentryRequest=c.sessionToSentryRequest;var u=n(91226);t.initAndBind=u.initAndBind;var l=n(10250);t.NoopTransport=l.NoopTransport;var d=n(40108);t.SDK_VERSION=d.SDK_VERSION;var f=n(11978);t.Integrations=f},81313:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(28379);var i=n(6066);var s=n(86406);t.installedIntegrations=[];function filterDuplicates(e){return e.reduce((function(e,t){if(e.every((function(e){return t.name!==e.name}))){e.push(t)}return e}),[])}function getIntegrationsToSetup(e){var t=e.defaultIntegrations&&r.__spread(e.defaultIntegrations)||[];var n=e.integrations;var i=r.__spread(filterDuplicates(t));if(Array.isArray(n)){i=r.__spread(i.filter((function(e){return n.every((function(t){return t.name!==e.name}))})),filterDuplicates(n))}else if(typeof n==="function"){i=n(i);i=Array.isArray(i)?i:[i]}var s=i.map((function(e){return e.name}));var o="Debug";if(s.indexOf(o)!==-1){i.push.apply(i,r.__spread(i.splice(s.indexOf(o),1)))}return i}t.getIntegrationsToSetup=getIntegrationsToSetup;function setupIntegration(e){if(t.installedIntegrations.indexOf(e.name)!==-1){return}e.setupOnce(i.addGlobalEventProcessor,i.getCurrentHub);t.installedIntegrations.push(e.name);s.logger.log("Integration installed: "+e.name)}t.setupIntegration=setupIntegration;function setupIntegrations(e){var t={};getIntegrationsToSetup(e).forEach((function(e){t[e.name]=e;setupIntegration(e)}));Object.defineProperty(t,"initialized",{value:true});return t}t.setupIntegrations=setupIntegrations},3035:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});var n;var r=function(){function FunctionToString(){this.name=FunctionToString.id}FunctionToString.prototype.setupOnce=function(){n=Function.prototype.toString;Function.prototype.toString=function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var r=this.__sentry_original__||this;return n.apply(r,e)}};FunctionToString.id="FunctionToString";return FunctionToString}();t.FunctionToString=r},97986:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(28379);var i=n(6066);var s=n(86406);var o=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/];var a=function(){function InboundFilters(e){if(e===void 0){e={}}this._options=e;this.name=InboundFilters.id}InboundFilters.prototype.setupOnce=function(){i.addGlobalEventProcessor((function(e){var t=i.getCurrentHub();if(!t){return e}var n=t.getIntegration(InboundFilters);if(n){var r=t.getClient();var s=r?r.getOptions():{};var o=typeof n._mergeOptions==="function"?n._mergeOptions(s):{};if(typeof n._shouldDropEvent!=="function"){return e}return n._shouldDropEvent(e,o)?null:e}return e}))};InboundFilters.prototype._shouldDropEvent=function(e,t){if(this._isSentryError(e,t)){s.logger.warn("Event dropped due to being internal Sentry Error.\nEvent: "+s.getEventDescription(e));return true}if(this._isIgnoredError(e,t)){s.logger.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: "+s.getEventDescription(e));return true}if(this._isDeniedUrl(e,t)){s.logger.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: "+s.getEventDescription(e)+".\nUrl: "+this._getEventFilterUrl(e));return true}if(!this._isAllowedUrl(e,t)){s.logger.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: "+s.getEventDescription(e)+".\nUrl: "+this._getEventFilterUrl(e));return true}return false};InboundFilters.prototype._isSentryError=function(e,t){if(!t.ignoreInternal){return false}try{return e&&e.exception&&e.exception.values&&e.exception.values[0]&&e.exception.values[0].type==="SentryError"||false}catch(e){return false}};InboundFilters.prototype._isIgnoredError=function(e,t){if(!t.ignoreErrors||!t.ignoreErrors.length){return false}return this._getPossibleEventMessages(e).some((function(e){return t.ignoreErrors.some((function(t){return s.isMatchingPattern(e,t)}))}))};InboundFilters.prototype._isDeniedUrl=function(e,t){if(!t.denyUrls||!t.denyUrls.length){return false}var n=this._getEventFilterUrl(e);return!n?false:t.denyUrls.some((function(e){return s.isMatchingPattern(n,e)}))};InboundFilters.prototype._isAllowedUrl=function(e,t){if(!t.allowUrls||!t.allowUrls.length){return true}var n=this._getEventFilterUrl(e);return!n?true:t.allowUrls.some((function(e){return s.isMatchingPattern(n,e)}))};InboundFilters.prototype._mergeOptions=function(e){if(e===void 0){e={}}return{allowUrls:r.__spread(this._options.whitelistUrls||[],this._options.allowUrls||[],e.whitelistUrls||[],e.allowUrls||[]),denyUrls:r.__spread(this._options.blacklistUrls||[],this._options.denyUrls||[],e.blacklistUrls||[],e.denyUrls||[]),ignoreErrors:r.__spread(this._options.ignoreErrors||[],e.ignoreErrors||[],o),ignoreInternal:typeof this._options.ignoreInternal!=="undefined"?this._options.ignoreInternal:true}};InboundFilters.prototype._getPossibleEventMessages=function(e){if(e.message){return[e.message]}if(e.exception){try{var t=e.exception.values&&e.exception.values[0]||{},n=t.type,r=n===void 0?"":n,i=t.value,o=i===void 0?"":i;return[""+o,r+": "+o]}catch(t){s.logger.error("Cannot extract message for event "+s.getEventDescription(e));return[]}}return[]};InboundFilters.prototype._getLastValidUrl=function(e){if(e===void 0){e=[]}var t,n;for(var r=e.length-1;r>=0;r--){var i=e[r];if(((t=i)===null||t===void 0?void 0:t.filename)!=="<anonymous>"&&((n=i)===null||n===void 0?void 0:n.filename)!=="[native code]"){return i.filename||null}}return null};InboundFilters.prototype._getEventFilterUrl=function(e){try{if(e.stacktrace){var t=e.stacktrace.frames;return this._getLastValidUrl(t)}if(e.exception){var n=e.exception.values&&e.exception.values[0].stacktrace&&e.exception.values[0].stacktrace.frames;return this._getLastValidUrl(n)}return null}catch(t){s.logger.error("Cannot extract url for event "+s.getEventDescription(e));return null}};InboundFilters.id="InboundFilters";return InboundFilters}();t.InboundFilters=a},11978:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(3035);t.FunctionToString=r.FunctionToString;var i=n(97986);t.InboundFilters=i.InboundFilters},68646:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(28379);function getSdkMetadataForEnvelopeHeader(e){if(!e.metadata||!e.metadata.sdk){return}var t=e.metadata.sdk,n=t.name,r=t.version;return{name:n,version:r}}function enhanceEventWithSdkInfo(e,t){if(!t){return e}e.sdk=e.sdk||{};e.sdk.name=e.sdk.name||t.name;e.sdk.version=e.sdk.version||t.version;e.sdk.integrations=r.__spread(e.sdk.integrations||[],t.integrations||[]);e.sdk.packages=r.__spread(e.sdk.packages||[],t.packages||[]);return e}function sessionToSentryRequest(e,t){var n=getSdkMetadataForEnvelopeHeader(t);var i=JSON.stringify(r.__assign(r.__assign({sent_at:(new Date).toISOString()},n&&{sdk:n}),t.forceEnvelope()&&{dsn:t.getDsn().toString()}));var s="aggregates"in e?"sessions":"session";var o=JSON.stringify({type:s});return{body:i+"\n"+o+"\n"+JSON.stringify(e),type:s,url:t.getEnvelopeEndpointWithUrlEncodedAuth()}}t.sessionToSentryRequest=sessionToSentryRequest;function eventToSentryRequest(e,t){var n=getSdkMetadataForEnvelopeHeader(t);var i=e.type||"event";var s=i==="transaction"||t.forceEnvelope();var o=e.debug_meta||{},a=o.transactionSampling,c=r.__rest(o,["transactionSampling"]);var u=a||{},l=u.method,d=u.rate;if(Object.keys(c).length===0){delete e.debug_meta}else{e.debug_meta=c}var f={body:JSON.stringify(n?enhanceEventWithSdkInfo(e,t.metadata.sdk):e),type:i,url:s?t.getEnvelopeEndpointWithUrlEncodedAuth():t.getStoreEndpointWithUrlEncodedAuth()};if(s){var p=JSON.stringify(r.__assign(r.__assign({event_id:e.event_id,sent_at:(new Date).toISOString()},n&&{sdk:n}),t.forceEnvelope()&&{dsn:t.getDsn().toString()}));var h=JSON.stringify({type:i,sample_rates:[{id:l,rate:d}]});var m=p+"\n"+h+"\n"+f.body;f.body=m}return f}t.eventToSentryRequest=eventToSentryRequest},91226:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(6066);var i=n(86406);function initAndBind(e,t){var n;if(t.debug===true){i.logger.enable()}var s=r.getCurrentHub();(n=s.getScope())===null||n===void 0?void 0:n.update(t.initialScope);var o=new e(t);s.bindClient(o)}t.initAndBind=initAndBind},10250:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(28648);var i=n(86406);var s=function(){function NoopTransport(){}NoopTransport.prototype.sendEvent=function(e){return i.SyncPromise.resolve({reason:"NoopTransport: Event has been skipped because no Dsn is configured.",status:r.Status.Skipped})};NoopTransport.prototype.close=function(e){return i.SyncPromise.resolve(true)};return NoopTransport}();t.NoopTransport=s},40108:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.SDK_VERSION="6.14.1"},28379:e=>{
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var t;var n;var r;var i;var s;var o;var a;var c;var u;var l;var d;var f;var p;var h;var m;var g;var v;var y;var b;var _;var S;var w;var T;(function(t){var n=typeof global==="object"?global:typeof self==="object"?self:typeof this==="object"?this:{};if(typeof define==="function"&&define.amd){define("tslib",["exports"],(function(e){t(createExporter(n,createExporter(e)))}))}else if(true&&typeof e.exports==="object"){t(createExporter(n,createExporter(e.exports)))}else{t(createExporter(n))}function createExporter(e,t){if(e!==n){if(typeof Object.create==="function"){Object.defineProperty(e,"__esModule",{value:true})}else{e.__esModule=true}}return function(n,r){return e[n]=t?t(n,r):r}}})((function(e){var k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n]};t=function(e,t){k(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)};n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};r=function(e,t){var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0)n[r]=e[r];if(e!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++){if(t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i]))n[r[i]]=e[r[i]]}return n};i=function(e,t,n,r){var i=arguments.length,s=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)if(o=e[a])s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s;return i>3&&s&&Object.defineProperty(t,n,s),s};s=function(e,t){return function(n,r){t(n,r,e)}};o=function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};a=function(e,t,n,r){function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function fulfilled(e){try{step(r.next(e))}catch(e){i(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){i(e)}}function step(e){e.done?n(e.value):adopt(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())}))};c=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function verb(e){return function(t){return step([e,t])}}function step(o){if(r)throw new TypeError("Generator is already executing.");while(n)try{if(r=1,i&&(s=o[0]&2?i["return"]:o[0]?i["throw"]||((s=i["return"])&&s.call(i),0):i.next)&&!(s=s.call(i,o[1])).done)return s;if(i=0,s)o=[o[0]&2,s.value];switch(o[0]){case 0:case 1:s=o;break;case 4:n.label++;return{value:o[1],done:false};case 5:n.label++;i=o[1];o=[0];continue;case 7:o=n.ops.pop();n.trys.pop();continue;default:if(!(s=n.trys,s=s.length>0&&s[s.length-1])&&(o[0]===6||o[0]===2)){n=0;continue}if(o[0]===3&&(!s||o[1]>s[0]&&o[1]<s[3])){n.label=o[1];break}if(o[0]===6&&n.label<s[1]){n.label=s[1];s=o;break}if(s&&n.label<s[2]){n.label=s[2];n.ops.push(o);break}if(s[2])n.ops.pop();n.trys.pop();continue}o=t.call(e,n)}catch(e){o=[6,e];i=0}finally{r=s=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}};T=function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]};u=function(e,t){for(var n in e)if(n!=="default"&&!t.hasOwnProperty(n))t[n]=e[n]};l=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&r>=e.length)e=void 0;return{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};d=function(e,t){var n=typeof Symbol==="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,s=[],o;try{while((t===void 0||t-- >0)&&!(i=r.next()).done)s.push(i.value)}catch(e){o={error:e}}finally{try{if(i&&!i.done&&(n=r["return"]))n.call(r)}finally{if(o)throw o.error}}return s};f=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(d(arguments[t]));return e};p=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r};h=function(e){return this instanceof h?(this.v=e,this):new h(e)};m=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i;function verb(e){if(r[e])i[e]=function(t){return new Promise((function(n,r){s.push([e,t,n,r])>1||resume(e,t)}))}}function resume(e,t){try{step(r[e](t))}catch(e){settle(s[0][3],e)}}function step(e){e.value instanceof h?Promise.resolve(e.value.v).then(fulfill,reject):settle(s[0][2],e)}function fulfill(e){resume("next",e)}function reject(e){resume("throw",e)}function settle(e,t){if(e(t),s.shift(),s.length)resume(s[0][0],s[0][1])}};g=function(e){var t,n;return t={},verb("next"),verb("throw",(function(e){throw e})),verb("return"),t[Symbol.iterator]=function(){return this},t;function verb(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:h(e[r](t)),done:r==="return"}:i?i(t):t}:i}};v=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof l==="function"?l(e):e[Symbol.iterator](),n={},verb("next"),verb("throw"),verb("return"),n[Symbol.asyncIterator]=function(){return this},n);function verb(t){n[t]=e[t]&&function(n){return new Promise((function(r,i){n=e[t](n),settle(r,i,n.done,n.value)}))}}function settle(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}};y=function(e,t){if(Object.defineProperty){Object.defineProperty(e,"raw",{value:t})}else{e.raw=t}return e};b=function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(Object.hasOwnProperty.call(e,n))t[n]=e[n];t["default"]=e;return t};_=function(e){return e&&e.__esModule?e:{default:e}};S=function(e,t){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return t.get(e)};w=function(e,t,n){if(!t.has(e)){throw new TypeError("attempted to set private field on non-instance")}t.set(e,n);return n};e("__extends",t);e("__assign",n);e("__rest",r);e("__decorate",i);e("__param",s);e("__metadata",o);e("__awaiter",a);e("__generator",c);e("__exportStar",u);e("__createBinding",T);e("__values",l);e("__read",d);e("__spread",f);e("__spreadArrays",p);e("__await",h);e("__asyncGenerator",m);e("__asyncDelegator",g);e("__asyncValues",v);e("__makeTemplateObject",y);e("__importStar",b);e("__importDefault",_);e("__classPrivateFieldGet",S);e("__classPrivateFieldSet",w)}))},17421:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(93658);var i=n(28648);var s=n(86406);var o=n(80100);var a=n(24463);t.API_VERSION=4;var c=100;var u=function(){function Hub(e,n,r){if(n===void 0){n=new o.Scope}if(r===void 0){r=t.API_VERSION}this._version=r;this._stack=[{}];this.getStackTop().scope=n;if(e){this.bindClient(e)}}Hub.prototype.isOlderThan=function(e){return this._version<e};Hub.prototype.bindClient=function(e){var t=this.getStackTop();t.client=e;if(e&&e.setupIntegrations){e.setupIntegrations()}};Hub.prototype.pushScope=function(){var e=o.Scope.clone(this.getScope());this.getStack().push({client:this.getClient(),scope:e});return e};Hub.prototype.popScope=function(){if(this.getStack().length<=1)return false;return!!this.getStack().pop()};Hub.prototype.withScope=function(e){var t=this.pushScope();try{e(t)}finally{this.popScope()}};Hub.prototype.getClient=function(){return this.getStackTop().client};Hub.prototype.getScope=function(){return this.getStackTop().scope};Hub.prototype.getStack=function(){return this._stack};Hub.prototype.getStackTop=function(){return this._stack[this._stack.length-1]};Hub.prototype.captureException=function(e,t){var n=this._lastEventId=s.uuid4();var i=t;if(!t){var o=void 0;try{throw new Error("Sentry syntheticException")}catch(e){o=e}i={originalException:e,syntheticException:o}}this._invokeClient("captureException",e,r.__assign(r.__assign({},i),{event_id:n}));return n};Hub.prototype.captureMessage=function(e,t,n){var i=this._lastEventId=s.uuid4();var o=n;if(!n){var a=void 0;try{throw new Error(e)}catch(e){a=e}o={originalException:e,syntheticException:a}}this._invokeClient("captureMessage",e,t,r.__assign(r.__assign({},o),{event_id:i}));return i};Hub.prototype.captureEvent=function(e,t){var n=s.uuid4();if(e.type!=="transaction"){this._lastEventId=n}this._invokeClient("captureEvent",e,r.__assign(r.__assign({},t),{event_id:n}));return n};Hub.prototype.lastEventId=function(){return this._lastEventId};Hub.prototype.addBreadcrumb=function(e,t){var n=this.getStackTop(),i=n.scope,o=n.client;if(!i||!o)return;var a=o.getOptions&&o.getOptions()||{},u=a.beforeBreadcrumb,l=u===void 0?null:u,d=a.maxBreadcrumbs,f=d===void 0?c:d;if(f<=0)return;var p=s.dateTimestampInSeconds();var h=r.__assign({timestamp:p},e);var m=l?s.consoleSandbox((function(){return l(h,t)})):h;if(m===null)return;i.addBreadcrumb(m,f)};Hub.prototype.setUser=function(e){var t=this.getScope();if(t)t.setUser(e)};Hub.prototype.setTags=function(e){var t=this.getScope();if(t)t.setTags(e)};Hub.prototype.setExtras=function(e){var t=this.getScope();if(t)t.setExtras(e)};Hub.prototype.setTag=function(e,t){var n=this.getScope();if(n)n.setTag(e,t)};Hub.prototype.setExtra=function(e,t){var n=this.getScope();if(n)n.setExtra(e,t)};Hub.prototype.setContext=function(e,t){var n=this.getScope();if(n)n.setContext(e,t)};Hub.prototype.configureScope=function(e){var t=this.getStackTop(),n=t.scope,r=t.client;if(n&&r){e(n)}};Hub.prototype.run=function(e){var t=makeMain(this);try{e(this)}finally{makeMain(t)}};Hub.prototype.getIntegration=function(e){var t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){s.logger.warn("Cannot retrieve integration "+e.id+" from the current Hub");return null}};Hub.prototype.startSpan=function(e){return this._callExtensionMethod("startSpan",e)};Hub.prototype.startTransaction=function(e,t){return this._callExtensionMethod("startTransaction",e,t)};Hub.prototype.traceHeaders=function(){return this._callExtensionMethod("traceHeaders")};Hub.prototype.captureSession=function(e){if(e===void 0){e=false}if(e){return this.endSession()}this._sendSessionUpdate()};Hub.prototype.endSession=function(){var e,t,n,r,i;(n=(t=(e=this.getStackTop())===null||e===void 0?void 0:e.scope)===null||t===void 0?void 0:t.getSession())===null||n===void 0?void 0:n.close();this._sendSessionUpdate();(i=(r=this.getStackTop())===null||r===void 0?void 0:r.scope)===null||i===void 0?void 0:i.setSession()};Hub.prototype.startSession=function(e){var t=this.getStackTop(),n=t.scope,o=t.client;var c=o&&o.getOptions()||{},u=c.release,l=c.environment;var d=s.getGlobalObject();var f=(d.navigator||{}).userAgent;var p=new a.Session(r.__assign(r.__assign(r.__assign({release:u,environment:l},n&&{user:n.getUser()}),f&&{userAgent:f}),e));if(n){var h=n.getSession&&n.getSession();if(h&&h.status===i.SessionStatus.Ok){h.update({status:i.SessionStatus.Exited})}this.endSession();n.setSession(p)}return p};Hub.prototype._sendSessionUpdate=function(){var e=this.getStackTop(),t=e.scope,n=e.client;if(!t)return;var r=t.getSession&&t.getSession();if(r){if(n&&n.captureSession){n.captureSession(r)}}};Hub.prototype._invokeClient=function(e){var t;var n=[];for(var i=1;i<arguments.length;i++){n[i-1]=arguments[i]}var s=this.getStackTop(),o=s.scope,a=s.client;if(a&&a[e]){(t=a)[e].apply(t,r.__spread(n,[o]))}};Hub.prototype._callExtensionMethod=function(e){var t=[];for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}var r=getMainCarrier();var i=r.__SENTRY__;if(i&&i.extensions&&typeof i.extensions[e]==="function"){return i.extensions[e].apply(this,t)}s.logger.warn("Extension method "+e+" couldn't be found, doing nothing.")};return Hub}();t.Hub=u;function getMainCarrier(){var e=s.getGlobalObject();e.__SENTRY__=e.__SENTRY__||{extensions:{},hub:undefined};return e}t.getMainCarrier=getMainCarrier;function makeMain(e){var t=getMainCarrier();var n=getHubFromCarrier(t);setHubOnCarrier(t,e);return n}t.makeMain=makeMain;function getCurrentHub(){var e=getMainCarrier();if(!hasHubOnCarrier(e)||getHubFromCarrier(e).isOlderThan(t.API_VERSION)){setHubOnCarrier(e,new u)}if(s.isNodeEnv()){return getHubFromActiveDomain(e)}return getHubFromCarrier(e)}t.getCurrentHub=getCurrentHub;function getActiveDomain(){s.logger.warn("Function `getActiveDomain` is deprecated and will be removed in a future version.");var e=getMainCarrier().__SENTRY__;return e&&e.extensions&&e.extensions.domain&&e.extensions.domain.active}t.getActiveDomain=getActiveDomain;function getHubFromActiveDomain(e){var n,r,i;try{var s=(i=(r=(n=getMainCarrier().__SENTRY__)===null||n===void 0?void 0:n.extensions)===null||r===void 0?void 0:r.domain)===null||i===void 0?void 0:i.active;if(!s){return getHubFromCarrier(e)}if(!hasHubOnCarrier(s)||getHubFromCarrier(s).isOlderThan(t.API_VERSION)){var a=getHubFromCarrier(e).getStackTop();setHubOnCarrier(s,new u(a.client,o.Scope.clone(a.scope)))}return getHubFromCarrier(s)}catch(t){return getHubFromCarrier(e)}}function hasHubOnCarrier(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function getHubFromCarrier(e){if(e&&e.__SENTRY__&&e.__SENTRY__.hub)return e.__SENTRY__.hub;e.__SENTRY__=e.__SENTRY__||{};e.__SENTRY__.hub=new u;return e.__SENTRY__.hub}t.getHubFromCarrier=getHubFromCarrier;function setHubOnCarrier(e,t){if(!e)return false;e.__SENTRY__=e.__SENTRY__||{};e.__SENTRY__.hub=t;return true}t.setHubOnCarrier=setHubOnCarrier},6066:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(80100);t.addGlobalEventProcessor=r.addGlobalEventProcessor;t.Scope=r.Scope;var i=n(24463);t.Session=i.Session;var s=n(52041);t.SessionFlusher=s.SessionFlusher;var o=n(17421);t.getActiveDomain=o.getActiveDomain;t.getCurrentHub=o.getCurrentHub;t.getHubFromCarrier=o.getHubFromCarrier;t.getMainCarrier=o.getMainCarrier;t.Hub=o.Hub;t.makeMain=o.makeMain;t.setHubOnCarrier=o.setHubOnCarrier},80100:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(93658);var i=n(86406);var s=100;var o=function(){function Scope(){this._notifyingListeners=false;this._scopeListeners=[];this._eventProcessors=[];this._breadcrumbs=[];this._user={};this._tags={};this._extra={};this._contexts={}}Scope.clone=function(e){var t=new Scope;if(e){t._breadcrumbs=r.__spread(e._breadcrumbs);t._tags=r.__assign({},e._tags);t._extra=r.__assign({},e._extra);t._contexts=r.__assign({},e._contexts);t._user=e._user;t._level=e._level;t._span=e._span;t._session=e._session;t._transactionName=e._transactionName;t._fingerprint=e._fingerprint;t._eventProcessors=r.__spread(e._eventProcessors);t._requestSession=e._requestSession}return t};Scope.prototype.addScopeListener=function(e){this._scopeListeners.push(e)};Scope.prototype.addEventProcessor=function(e){this._eventProcessors.push(e);return this};Scope.prototype.setUser=function(e){this._user=e||{};if(this._session){this._session.update({user:e})}this._notifyScopeListeners();return this};Scope.prototype.getUser=function(){return this._user};Scope.prototype.getRequestSession=function(){return this._requestSession};Scope.prototype.setRequestSession=function(e){this._requestSession=e;return this};Scope.prototype.setTags=function(e){this._tags=r.__assign(r.__assign({},this._tags),e);this._notifyScopeListeners();return this};Scope.prototype.setTag=function(e,t){var n;this._tags=r.__assign(r.__assign({},this._tags),(n={},n[e]=t,n));this._notifyScopeListeners();return this};Scope.prototype.setExtras=function(e){this._extra=r.__assign(r.__assign({},this._extra),e);this._notifyScopeListeners();return this};Scope.prototype.setExtra=function(e,t){var n;this._extra=r.__assign(r.__assign({},this._extra),(n={},n[e]=t,n));this._notifyScopeListeners();return this};Scope.prototype.setFingerprint=function(e){this._fingerprint=e;this._notifyScopeListeners();return this};Scope.prototype.setLevel=function(e){this._level=e;this._notifyScopeListeners();return this};Scope.prototype.setTransactionName=function(e){this._transactionName=e;this._notifyScopeListeners();return this};Scope.prototype.setTransaction=function(e){return this.setTransactionName(e)};Scope.prototype.setContext=function(e,t){var n;if(t===null){delete this._contexts[e]}else{this._contexts=r.__assign(r.__assign({},this._contexts),(n={},n[e]=t,n))}this._notifyScopeListeners();return this};Scope.prototype.setSpan=function(e){this._span=e;this._notifyScopeListeners();return this};Scope.prototype.getSpan=function(){return this._span};Scope.prototype.getTransaction=function(){var e,t,n,r;var i=this.getSpan();if((e=i)===null||e===void 0?void 0:e.transaction){return(t=i)===null||t===void 0?void 0:t.transaction}if((r=(n=i)===null||n===void 0?void 0:n.spanRecorder)===null||r===void 0?void 0:r.spans[0]){return i.spanRecorder.spans[0]}return undefined};Scope.prototype.setSession=function(e){if(!e){delete this._session}else{this._session=e}this._notifyScopeListeners();return this};Scope.prototype.getSession=function(){return this._session};Scope.prototype.update=function(e){if(!e){return this}if(typeof e==="function"){var t=e(this);return t instanceof Scope?t:this}if(e instanceof Scope){this._tags=r.__assign(r.__assign({},this._tags),e._tags);this._extra=r.__assign(r.__assign({},this._extra),e._extra);this._contexts=r.__assign(r.__assign({},this._contexts),e._contexts);if(e._user&&Object.keys(e._user).length){this._user=e._user}if(e._level){this._level=e._level}if(e._fingerprint){this._fingerprint=e._fingerprint}if(e._requestSession){this._requestSession=e._requestSession}}else if(i.isPlainObject(e)){e=e;this._tags=r.__assign(r.__assign({},this._tags),e.tags);this._extra=r.__assign(r.__assign({},this._extra),e.extra);this._contexts=r.__assign(r.__assign({},this._contexts),e.contexts);if(e.user){this._user=e.user}if(e.level){this._level=e.level}if(e.fingerprint){this._fingerprint=e.fingerprint}if(e.requestSession){this._requestSession=e.requestSession}}return this};Scope.prototype.clear=function(){this._breadcrumbs=[];this._tags={};this._extra={};this._user={};this._contexts={};this._level=undefined;this._transactionName=undefined;this._fingerprint=undefined;this._requestSession=undefined;this._span=undefined;this._session=undefined;this._notifyScopeListeners();return this};Scope.prototype.addBreadcrumb=function(e,t){var n=typeof t==="number"?Math.min(t,s):s;if(n<=0){return this}var o=r.__assign({timestamp:i.dateTimestampInSeconds()},e);this._breadcrumbs=r.__spread(this._breadcrumbs,[o]).slice(-n);this._notifyScopeListeners();return this};Scope.prototype.clearBreadcrumbs=function(){this._breadcrumbs=[];this._notifyScopeListeners();return this};Scope.prototype.applyToEvent=function(e,t){var n;if(this._extra&&Object.keys(this._extra).length){e.extra=r.__assign(r.__assign({},this._extra),e.extra)}if(this._tags&&Object.keys(this._tags).length){e.tags=r.__assign(r.__assign({},this._tags),e.tags)}if(this._user&&Object.keys(this._user).length){e.user=r.__assign(r.__assign({},this._user),e.user)}if(this._contexts&&Object.keys(this._contexts).length){e.contexts=r.__assign(r.__assign({},this._contexts),e.contexts)}if(this._level){e.level=this._level}if(this._transactionName){e.transaction=this._transactionName}if(this._span){e.contexts=r.__assign({trace:this._span.getTraceContext()},e.contexts);var i=(n=this._span.transaction)===null||n===void 0?void 0:n.name;if(i){e.tags=r.__assign({transaction:i},e.tags)}}this._applyFingerprint(e);e.breadcrumbs=r.__spread(e.breadcrumbs||[],this._breadcrumbs);e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:undefined;return this._notifyEventProcessors(r.__spread(getGlobalEventProcessors(),this._eventProcessors),e,t)};Scope.prototype._notifyEventProcessors=function(e,t,n,s){var o=this;if(s===void 0){s=0}return new i.SyncPromise((function(a,c){var u=e[s];if(t===null||typeof u!=="function"){a(t)}else{var l=u(r.__assign({},t),n);if(i.isThenable(l)){void l.then((function(t){return o._notifyEventProcessors(e,t,n,s+1).then(a)})).then(null,c)}else{void o._notifyEventProcessors(e,l,n,s+1).then(a).then(null,c)}}}))};Scope.prototype._notifyScopeListeners=function(){var e=this;if(!this._notifyingListeners){this._notifyingListeners=true;this._scopeListeners.forEach((function(t){t(e)}));this._notifyingListeners=false}};Scope.prototype._applyFingerprint=function(e){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[];if(this._fingerprint){e.fingerprint=e.fingerprint.concat(this._fingerprint)}if(e.fingerprint&&!e.fingerprint.length){delete e.fingerprint}};return Scope}();t.Scope=o;function getGlobalEventProcessors(){var e=i.getGlobalObject();e.__SENTRY__=e.__SENTRY__||{};e.__SENTRY__.globalEventProcessors=e.__SENTRY__.globalEventProcessors||[];return e.__SENTRY__.globalEventProcessors}function addGlobalEventProcessor(e){getGlobalEventProcessors().push(e)}t.addGlobalEventProcessor=addGlobalEventProcessor},24463:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(28648);var i=n(86406);var s=function(){function Session(e){this.errors=0;this.sid=i.uuid4();this.duration=0;this.status=r.SessionStatus.Ok;this.init=true;this.ignoreDuration=false;var t=i.timestampInSeconds();this.timestamp=t;this.started=t;if(e){this.update(e)}}Session.prototype.update=function(e){if(e===void 0){e={}}if(e.user){if(!this.ipAddress&&e.user.ip_address){this.ipAddress=e.user.ip_address}if(!this.did&&!e.did){this.did=e.user.id||e.user.email||e.user.username}}this.timestamp=e.timestamp||i.timestampInSeconds();if(e.ignoreDuration){this.ignoreDuration=e.ignoreDuration}if(e.sid){this.sid=e.sid.length===32?e.sid:i.uuid4()}if(e.init!==undefined){this.init=e.init}if(!this.did&&e.did){this.did=""+e.did}if(typeof e.started==="number"){this.started=e.started}if(this.ignoreDuration){this.duration=undefined}else if(typeof e.duration==="number"){this.duration=e.duration}else{var t=this.timestamp-this.started;this.duration=t>=0?t:0}if(e.release){this.release=e.release}if(e.environment){this.environment=e.environment}if(!this.ipAddress&&e.ipAddress){this.ipAddress=e.ipAddress}if(!this.userAgent&&e.userAgent){this.userAgent=e.userAgent}if(typeof e.errors==="number"){this.errors=e.errors}if(e.status){this.status=e.status}};Session.prototype.close=function(e){if(e){this.update({status:e})}else if(this.status===r.SessionStatus.Ok){this.update({status:r.SessionStatus.Exited})}else{this.update()}};Session.prototype.toJSON=function(){return i.dropUndefinedKeys({sid:""+this.sid,init:this.init,started:new Date(this.started*1e3).toISOString(),timestamp:new Date(this.timestamp*1e3).toISOString(),status:this.status,errors:this.errors,did:typeof this.did==="number"||typeof this.did==="string"?""+this.did:undefined,duration:this.duration,attrs:i.dropUndefinedKeys({release:this.release,environment:this.environment,ip_address:this.ipAddress,user_agent:this.userAgent})})};return Session}();t.Session=s},52041:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(28648);var i=n(86406);var s=n(17421);var o=function(){function SessionFlusher(e,t){var n=this;this.flushTimeout=60;this._pendingAggregates={};this._isEnabled=true;this._transport=e;this._intervalId=setInterval((function(){return n.flush()}),this.flushTimeout*1e3);this._sessionAttrs=t}SessionFlusher.prototype.sendSessionAggregates=function(e){if(!this._transport.sendSession){i.logger.warn("Dropping session because custom transport doesn't implement sendSession");return}void this._transport.sendSession(e).then(null,(function(e){i.logger.error("Error while sending session: "+e)}))};SessionFlusher.prototype.flush=function(){var e=this.getSessionAggregates();if(e.aggregates.length===0){return}this._pendingAggregates={};this.sendSessionAggregates(e)};SessionFlusher.prototype.getSessionAggregates=function(){var e=this;var t=Object.keys(this._pendingAggregates).map((function(t){return e._pendingAggregates[parseInt(t)]}));var n={attrs:this._sessionAttrs,aggregates:t};return i.dropUndefinedKeys(n)};SessionFlusher.prototype.close=function(){clearInterval(this._intervalId);this._isEnabled=false;this.flush()};SessionFlusher.prototype.incrementSessionStatusCount=function(){var e,t;if(!this._isEnabled){return}var n=s.getCurrentHub().getScope();var r=(e=n)===null||e===void 0?void 0:e.getRequestSession();if(r&&r.status){this._incrementSessionStatusCount(r.status,new Date);(t=n)===null||t===void 0?void 0:t.setRequestSession(undefined)}};SessionFlusher.prototype._incrementSessionStatusCount=function(e,t){var n=new Date(t).setSeconds(0,0);this._pendingAggregates[n]=this._pendingAggregates[n]||{};var i=this._pendingAggregates[n];if(!i.started){i.started=new Date(n).toISOString()}switch(e){case r.RequestSessionStatus.Errored:i.errored=(i.errored||0)+1;return i.errored;case r.RequestSessionStatus.Ok:i.exited=(i.exited||0)+1;return i.exited;case r.RequestSessionStatus.Crashed:i.crashed=(i.crashed||0)+1;return i.crashed}};return SessionFlusher}();t.SessionFlusher=o},93658:e=>{
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var t;var n;var r;var i;var s;var o;var a;var c;var u;var l;var d;var f;var p;var h;var m;var g;var v;var y;var b;var _;var S;var w;var T;(function(t){var n=typeof global==="object"?global:typeof self==="object"?self:typeof this==="object"?this:{};if(typeof define==="function"&&define.amd){define("tslib",["exports"],(function(e){t(createExporter(n,createExporter(e)))}))}else if(true&&typeof e.exports==="object"){t(createExporter(n,createExporter(e.exports)))}else{t(createExporter(n))}function createExporter(e,t){if(e!==n){if(typeof Object.create==="function"){Object.defineProperty(e,"__esModule",{value:true})}else{e.__esModule=true}}return function(n,r){return e[n]=t?t(n,r):r}}})((function(e){var k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n]};t=function(e,t){k(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)};n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};r=function(e,t){var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0)n[r]=e[r];if(e!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++){if(t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i]))n[r[i]]=e[r[i]]}return n};i=function(e,t,n,r){var i=arguments.length,s=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)if(o=e[a])s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s;return i>3&&s&&Object.defineProperty(t,n,s),s};s=function(e,t){return function(n,r){t(n,r,e)}};o=function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};a=function(e,t,n,r){function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function fulfilled(e){try{step(r.next(e))}catch(e){i(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){i(e)}}function step(e){e.done?n(e.value):adopt(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())}))};c=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function verb(e){return function(t){return step([e,t])}}function step(o){if(r)throw new TypeError("Generator is already executing.");while(n)try{if(r=1,i&&(s=o[0]&2?i["return"]:o[0]?i["throw"]||((s=i["return"])&&s.call(i),0):i.next)&&!(s=s.call(i,o[1])).done)return s;if(i=0,s)o=[o[0]&2,s.value];switch(o[0]){case 0:case 1:s=o;break;case 4:n.label++;return{value:o[1],done:false};case 5:n.label++;i=o[1];o=[0];continue;case 7:o=n.ops.pop();n.trys.pop();continue;default:if(!(s=n.trys,s=s.length>0&&s[s.length-1])&&(o[0]===6||o[0]===2)){n=0;continue}if(o[0]===3&&(!s||o[1]>s[0]&&o[1]<s[3])){n.label=o[1];break}if(o[0]===6&&n.label<s[1]){n.label=s[1];s=o;break}if(s&&n.label<s[2]){n.label=s[2];n.ops.push(o);break}if(s[2])n.ops.pop();n.trys.pop();continue}o=t.call(e,n)}catch(e){o=[6,e];i=0}finally{r=s=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}};T=function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]};u=function(e,t){for(var n in e)if(n!=="default"&&!t.hasOwnProperty(n))t[n]=e[n]};l=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&r>=e.length)e=void 0;return{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};d=function(e,t){var n=typeof Symbol==="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,s=[],o;try{while((t===void 0||t-- >0)&&!(i=r.next()).done)s.push(i.value)}catch(e){o={error:e}}finally{try{if(i&&!i.done&&(n=r["return"]))n.call(r)}finally{if(o)throw o.error}}return s};f=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(d(arguments[t]));return e};p=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r};h=function(e){return this instanceof h?(this.v=e,this):new h(e)};m=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i;function verb(e){if(r[e])i[e]=function(t){return new Promise((function(n,r){s.push([e,t,n,r])>1||resume(e,t)}))}}function resume(e,t){try{step(r[e](t))}catch(e){settle(s[0][3],e)}}function step(e){e.value instanceof h?Promise.resolve(e.value.v).then(fulfill,reject):settle(s[0][2],e)}function fulfill(e){resume("next",e)}function reject(e){resume("throw",e)}function settle(e,t){if(e(t),s.shift(),s.length)resume(s[0][0],s[0][1])}};g=function(e){var t,n;return t={},verb("next"),verb("throw",(function(e){throw e})),verb("return"),t[Symbol.iterator]=function(){return this},t;function verb(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:h(e[r](t)),done:r==="return"}:i?i(t):t}:i}};v=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof l==="function"?l(e):e[Symbol.iterator](),n={},verb("next"),verb("throw"),verb("return"),n[Symbol.asyncIterator]=function(){return this},n);function verb(t){n[t]=e[t]&&function(n){return new Promise((function(r,i){n=e[t](n),settle(r,i,n.done,n.value)}))}}function settle(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}};y=function(e,t){if(Object.defineProperty){Object.defineProperty(e,"raw",{value:t})}else{e.raw=t}return e};b=function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(Object.hasOwnProperty.call(e,n))t[n]=e[n];t["default"]=e;return t};_=function(e){return e&&e.__esModule?e:{default:e}};S=function(e,t){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return t.get(e)};w=function(e,t,n){if(!t.has(e)){throw new TypeError("attempted to set private field on non-instance")}t.set(e,n);return n};e("__extends",t);e("__assign",n);e("__rest",r);e("__decorate",i);e("__param",s);e("__metadata",o);e("__awaiter",a);e("__generator",c);e("__exportStar",u);e("__createBinding",T);e("__values",l);e("__read",d);e("__spread",f);e("__spreadArrays",p);e("__await",h);e("__asyncGenerator",m);e("__asyncDelegator",g);e("__asyncValues",v);e("__makeTemplateObject",y);e("__importStar",b);e("__importDefault",_);e("__classPrivateFieldGet",S);e("__classPrivateFieldSet",w)}))},55413:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(23130);var i=n(6066);function callOnHub(e){var t=[];for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}var s=i.getCurrentHub();if(s&&s[e]){return s[e].apply(s,r.__spread(t))}throw new Error("No hub defined or "+e+" was not found on the hub, please open a bug report.")}function captureException(e,t){var n;try{throw new Error("Sentry syntheticException")}catch(e){n=e}return callOnHub("captureException",e,{captureContext:t,originalException:e,syntheticException:n})}t.captureException=captureException;function captureMessage(e,t){var n;try{throw new Error(e)}catch(e){n=e}var i=typeof t==="string"?t:undefined;var s=typeof t!=="string"?{captureContext:t}:undefined;return callOnHub("captureMessage",e,i,r.__assign({originalException:e,syntheticException:n},s))}t.captureMessage=captureMessage;function captureEvent(e){return callOnHub("captureEvent",e)}t.captureEvent=captureEvent;function configureScope(e){callOnHub("configureScope",e)}t.configureScope=configureScope;function addBreadcrumb(e){callOnHub("addBreadcrumb",e)}t.addBreadcrumb=addBreadcrumb;function setContext(e,t){callOnHub("setContext",e,t)}t.setContext=setContext;function setExtras(e){callOnHub("setExtras",e)}t.setExtras=setExtras;function setTags(e){callOnHub("setTags",e)}t.setTags=setTags;function setExtra(e,t){callOnHub("setExtra",e,t)}t.setExtra=setExtra;function setTag(e,t){callOnHub("setTag",e,t)}t.setTag=setTag;function setUser(e){callOnHub("setUser",e)}t.setUser=setUser;function withScope(e){callOnHub("withScope",e)}t.withScope=withScope;function _callOnClient(e){var t=[];for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}callOnHub.apply(void 0,r.__spread(["_invokeClient",e],t))}t._callOnClient=_callOnClient;function startTransaction(e,t){return callOnHub("startTransaction",r.__assign({},e),t)}t.startTransaction=startTransaction},23130:e=>{
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var t;var n;var r;var i;var s;var o;var a;var c;var u;var l;var d;var f;var p;var h;var m;var g;var v;var y;var b;var _;var S;var w;var T;(function(t){var n=typeof global==="object"?global:typeof self==="object"?self:typeof this==="object"?this:{};if(typeof define==="function"&&define.amd){define("tslib",["exports"],(function(e){t(createExporter(n,createExporter(e)))}))}else if(true&&typeof e.exports==="object"){t(createExporter(n,createExporter(e.exports)))}else{t(createExporter(n))}function createExporter(e,t){if(e!==n){if(typeof Object.create==="function"){Object.defineProperty(e,"__esModule",{value:true})}else{e.__esModule=true}}return function(n,r){return e[n]=t?t(n,r):r}}})((function(e){var k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n]};t=function(e,t){k(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)};n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};r=function(e,t){var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0)n[r]=e[r];if(e!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++){if(t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i]))n[r[i]]=e[r[i]]}return n};i=function(e,t,n,r){var i=arguments.length,s=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)if(o=e[a])s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s;return i>3&&s&&Object.defineProperty(t,n,s),s};s=function(e,t){return function(n,r){t(n,r,e)}};o=function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};a=function(e,t,n,r){function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function fulfilled(e){try{step(r.next(e))}catch(e){i(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){i(e)}}function step(e){e.done?n(e.value):adopt(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())}))};c=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function verb(e){return function(t){return step([e,t])}}function step(o){if(r)throw new TypeError("Generator is already executing.");while(n)try{if(r=1,i&&(s=o[0]&2?i["return"]:o[0]?i["throw"]||((s=i["return"])&&s.call(i),0):i.next)&&!(s=s.call(i,o[1])).done)return s;if(i=0,s)o=[o[0]&2,s.value];switch(o[0]){case 0:case 1:s=o;break;case 4:n.label++;return{value:o[1],done:false};case 5:n.label++;i=o[1];o=[0];continue;case 7:o=n.ops.pop();n.trys.pop();continue;default:if(!(s=n.trys,s=s.length>0&&s[s.length-1])&&(o[0]===6||o[0]===2)){n=0;continue}if(o[0]===3&&(!s||o[1]>s[0]&&o[1]<s[3])){n.label=o[1];break}if(o[0]===6&&n.label<s[1]){n.label=s[1];s=o;break}if(s&&n.label<s[2]){n.label=s[2];n.ops.push(o);break}if(s[2])n.ops.pop();n.trys.pop();continue}o=t.call(e,n)}catch(e){o=[6,e];i=0}finally{r=s=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}};T=function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]};u=function(e,t){for(var n in e)if(n!=="default"&&!t.hasOwnProperty(n))t[n]=e[n]};l=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&r>=e.length)e=void 0;return{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};d=function(e,t){var n=typeof Symbol==="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,s=[],o;try{while((t===void 0||t-- >0)&&!(i=r.next()).done)s.push(i.value)}catch(e){o={error:e}}finally{try{if(i&&!i.done&&(n=r["return"]))n.call(r)}finally{if(o)throw o.error}}return s};f=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(d(arguments[t]));return e};p=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r};h=function(e){return this instanceof h?(this.v=e,this):new h(e)};m=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i;function verb(e){if(r[e])i[e]=function(t){return new Promise((function(n,r){s.push([e,t,n,r])>1||resume(e,t)}))}}function resume(e,t){try{step(r[e](t))}catch(e){settle(s[0][3],e)}}function step(e){e.value instanceof h?Promise.resolve(e.value.v).then(fulfill,reject):settle(s[0][2],e)}function fulfill(e){resume("next",e)}function reject(e){resume("throw",e)}function settle(e,t){if(e(t),s.shift(),s.length)resume(s[0][0],s[0][1])}};g=function(e){var t,n;return t={},verb("next"),verb("throw",(function(e){throw e})),verb("return"),t[Symbol.iterator]=function(){return this},t;function verb(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:h(e[r](t)),done:r==="return"}:i?i(t):t}:i}};v=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof l==="function"?l(e):e[Symbol.iterator](),n={},verb("next"),verb("throw"),verb("return"),n[Symbol.asyncIterator]=function(){return this},n);function verb(t){n[t]=e[t]&&function(n){return new Promise((function(r,i){n=e[t](n),settle(r,i,n.done,n.value)}))}}function settle(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}};y=function(e,t){if(Object.defineProperty){Object.defineProperty(e,"raw",{value:t})}else{e.raw=t}return e};b=function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(Object.hasOwnProperty.call(e,n))t[n]=e[n];t["default"]=e;return t};_=function(e){return e&&e.__esModule?e:{default:e}};S=function(e,t){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return t.get(e)};w=function(e,t,n){if(!t.has(e)){throw new TypeError("attempted to set private field on non-instance")}t.set(e,n);return n};e("__extends",t);e("__assign",n);e("__rest",r);e("__decorate",i);e("__param",s);e("__metadata",o);e("__awaiter",a);e("__generator",c);e("__exportStar",u);e("__createBinding",T);e("__values",l);e("__read",d);e("__spread",f);e("__spreadArrays",p);e("__await",h);e("__asyncGenerator",m);e("__asyncDelegator",g);e("__asyncValues",v);e("__makeTemplateObject",y);e("__importStar",b);e("__importDefault",_);e("__classPrivateFieldGet",S);e("__classPrivateFieldSet",w)}))},25328:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(2534);var i=n(76634);var s=n(28648);var o=n(86406);var a=n(29877);var c=n(43212);var u=function(e){r.__extends(NodeBackend,e);function NodeBackend(){return e!==null&&e.apply(this,arguments)||this}NodeBackend.prototype.eventFromException=function(e,t){var n=this;var s=e;var c=t&&t.data&&t.data.mechanism;var u=c||{handled:true,type:"generic"};if(!o.isError(e)){if(o.isPlainObject(e)){var l="Non-Error exception captured with keys: "+o.extractExceptionKeysForMessage(e);i.getCurrentHub().configureScope((function(t){t.setExtra("__serialized__",o.normalizeToSize(e))}));s=t&&t.syntheticException||new Error(l);s.message=l}else{s=t&&t.syntheticException||new Error(e);s.message=e}u.synthetic=true}return new o.SyncPromise((function(e,i){return a.parseError(s,n._options).then((function(n){o.addExceptionTypeValue(n,undefined,undefined);o.addExceptionMechanism(n,u);e(r.__assign(r.__assign({},n),{event_id:t&&t.event_id}))})).then(null,i)}))};NodeBackend.prototype.eventFromMessage=function(e,t,n){var r=this;if(t===void 0){t=s.Severity.Info}var i={event_id:n&&n.event_id,level:t,message:e};return new o.SyncPromise((function(e){if(r._options.attachStacktrace&&n&&n.syntheticException){var t=n.syntheticException?a.extractStackFromError(n.syntheticException):[];void a.parseStack(t,r._options).then((function(t){i.stacktrace={frames:a.prepareFramesForEvent(t)};e(i)})).then(null,(function(){e(i)}))}else{e(i)}}))};NodeBackend.prototype._setupTransport=function(){if(!this._options.dsn){return e.prototype._setupTransport.call(this)}var t=new o.Dsn(this._options.dsn);var n=r.__assign(r.__assign(r.__assign(r.__assign(r.__assign({},this._options.transportOptions),this._options.httpProxy&&{httpProxy:this._options.httpProxy}),this._options.httpsProxy&&{httpsProxy:this._options.httpsProxy}),this._options.caCerts&&{caCerts:this._options.caCerts}),{dsn:this._options.dsn,tunnel:this._options.tunnel,_metadata:this._options._metadata});if(this._options.transport){return new this._options.transport(n)}if(t.protocol==="http"){return new c.HTTPTransport(n)}return new c.HTTPSTransport(n)};return NodeBackend}(i.BaseBackend);t.NodeBackend=u},12674:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(2534);var i=n(76634);var s=n(6066);var o=n(28648);var a=n(86406);var c=n(25328);var u=function(e){r.__extends(NodeClient,e);function NodeClient(t){var n=this;t._metadata=t._metadata||{};t._metadata.sdk=t._metadata.sdk||{name:"sentry.javascript.node",packages:[{name:"npm:@sentry/node",version:i.SDK_VERSION}],version:i.SDK_VERSION};n=e.call(this,c.NodeBackend,t)||this;return n}NodeClient.prototype.captureException=function(t,n,r){if(this._options.autoSessionTracking&&this._sessionFlusher&&r){var i=r.getRequestSession();if(i&&i.status===o.RequestSessionStatus.Ok){i.status=o.RequestSessionStatus.Errored}}return e.prototype.captureException.call(this,t,n,r)};NodeClient.prototype.captureEvent=function(t,n,r){if(this._options.autoSessionTracking&&this._sessionFlusher&&r){var i=t.type||"exception";var s=i==="exception"&&t.exception&&t.exception.values&&t.exception.values.length>0;if(s){var a=r.getRequestSession();if(a&&a.status===o.RequestSessionStatus.Ok){a.status=o.RequestSessionStatus.Errored}}}return e.prototype.captureEvent.call(this,t,n,r)};NodeClient.prototype.close=function(t){var n;(n=this._sessionFlusher)===null||n===void 0?void 0:n.close();return e.prototype.close.call(this,t)};NodeClient.prototype.initSessionFlusher=function(){var e=this._options,t=e.release,n=e.environment;if(!t){a.logger.warn("Cannot initialise an instance of SessionFlusher if no release is provided!")}else{this._sessionFlusher=new s.SessionFlusher(this.getTransport(),{release:t,environment:n})}};NodeClient.prototype._prepareEvent=function(t,n,r){t.platform=t.platform||"node";if(this.getOptions().serverName){t.server_name=this.getOptions().serverName}return e.prototype._prepareEvent.call(this,t,n,r)};NodeClient.prototype._captureRequestSession=function(){if(!this._sessionFlusher){a.logger.warn("Discarded request mode session because autoSessionTracking option was disabled")}else{this._sessionFlusher.incrementSessionStatusCount()}};return NodeClient}(i.BaseClient);t.NodeClient=u},51673:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(2534);var i=n(76634);var s=n(91749);var o=n(28648);var a=n(86406);var c=n(8891);var u=n(13639);var l=n(22037);var d=n(57310);var f=n(89087);function tracingHandler(){return function sentryTracingMiddleware(e,t,n){var o;if(e.headers&&a.isString(e.headers["sentry-trace"])){o=s.extractTraceparentData(e.headers["sentry-trace"])}var c=i.startTransaction(r.__assign({name:extractExpressTransactionName(e,{path:true,method:true}),op:"http.server"},o),{request:extractRequestData(e)});i.getCurrentHub().configureScope((function(e){e.setSpan(c)}));t.__sentry_transaction=c;t.once("finish",(function(){setImmediate((function(){addExpressReqToTransaction(c,e);c.setHttpStatus(t.statusCode);c.finish()}))}));n()}}t.tracingHandler=tracingHandler;function addExpressReqToTransaction(e,t){if(!e)return;e.name=extractExpressTransactionName(t,{path:true,method:true});e.setData("url",t.originalUrl);e.setData("baseUrl",t.baseUrl);e.setData("query",t.query)}function extractExpressTransactionName(e,t){if(t===void 0){t={}}var n;var r=(n=e.method)===null||n===void 0?void 0:n.toUpperCase();var i="";if(e.route){i=""+(e.baseUrl||"")+e.route.path}else if(e.originalUrl||e.url){i=a.stripUrlQueryAndFragment(e.originalUrl||e.url||"")}var s="";if(t.method&&r){s+=r}if(t.method&&t.path){s+=" "}if(t.path&&i){s+=i}return s}function extractTransaction(e,t){var n;switch(t){case"path":{return extractExpressTransactionName(e,{path:true})}case"handler":{return((n=e.route)===null||n===void 0?void 0:n.stack[0].name)||"<anonymous>"}case"methodPath":default:{return extractExpressTransactionName(e,{path:true,method:true})}}}var p=["id","username","email"];function extractUserData(e,t){var n={};var r=Array.isArray(t)?t:p;r.forEach((function(t){if(e&&t in e){n[t]=e[t]}}));return n}var h=["cookies","data","headers","method","query_string","url"];function extractRequestData(e,t){if(t===void 0){t=h}var n={};var r=e.headers||e.header||{};var i=e.method;var s=e.hostname||e.host||r.host||"<no host>";var o=e.protocol==="https"||e.secure||(e.socket||{}).encrypted?"https":"http";var u=e.originalUrl||e.url||"";var l=o+"://"+s+u;t.forEach((function(t){switch(t){case"headers":n.headers=r;break;case"method":n.method=i;break;case"url":n.url=l;break;case"cookies":n.cookies=e.cookies||c.parse(r.cookie||"");break;case"query_string":n.query_string=e.query||d.parse(u||"",false).query;break;case"data":if(i==="GET"||i==="HEAD"){break}if(e.body!==undefined){n.data=a.isString(e.body)?e.body:JSON.stringify(a.normalize(e.body))}break;default:if({}.hasOwnProperty.call(e,t)){n[t]=e[t]}}}));return n}t.extractRequestData=extractRequestData;function parseRequest(e,t,n){n=r.__assign({ip:false,request:true,serverName:true,transaction:true,user:true,version:true},n);if(n.version){e.contexts=r.__assign(r.__assign({},e.contexts),{runtime:{name:"node",version:global.process.version}})}if(n.request){var i=Array.isArray(n.request)?extractRequestData(t,n.request):extractRequestData(t);e.request=r.__assign(r.__assign({},e.request),i)}if(n.serverName&&!e.server_name){e.server_name=global.process.env.SENTRY_NAME||l.hostname()}if(n.user){var s=t.user&&a.isPlainObject(t.user)?extractUserData(t.user,n.user):{};if(Object.keys(s)){e.user=r.__assign(r.__assign({},e.user),s)}}if(n.ip){var o=t.ip||t.connection&&t.connection.remoteAddress;if(o){e.user=r.__assign(r.__assign({},e.user),{ip_address:o})}}if(n.transaction&&!e.transaction){e.transaction=extractTransaction(t,n.transaction)}return e}t.parseRequest=parseRequest;function requestHandler(e){var t=i.getCurrentHub();var n=t.getClient();if(n&&f.isAutoSessionTrackingEnabled(n)){n.initSessionFlusher();var r=t.getScope();if(r&&r.getSession()){r.setSession()}}return function sentryRequestMiddleware(t,n,r){if(e&&e.flushTimeout&&e.flushTimeout>0){var s=n.end;n.end=function(t,n,r){var i=this;void f.flush(e.flushTimeout).then((function(){s.call(i,t,n,r)})).then(null,(function(e){a.logger.error(e)}))}}var c=u.create();c.add(t);c.add(n);c.on("error",r);c.run((function(){var s=i.getCurrentHub();s.configureScope((function(n){n.addEventProcessor((function(n){return parseRequest(n,t,e)}));var r=s.getClient();if(f.isAutoSessionTrackingEnabled(r)){var i=s.getScope();if(i){i.setRequestSession({status:o.RequestSessionStatus.Ok})}}}));n.once("finish",(function(){var e=s.getClient();if(f.isAutoSessionTrackingEnabled(e)){setImmediate((function(){if(e&&e._captureRequestSession){e._captureRequestSession()}}))}}));r()}))}}t.requestHandler=requestHandler;function getStatusCodeFromResponse(e){var t=e.status||e.statusCode||e.status_code||e.output&&e.output.statusCode;return t?parseInt(t,10):500}function defaultShouldHandleError(e){var t=getStatusCodeFromResponse(e);return t>=500}function errorHandler(e){return function sentryErrorMiddleware(t,n,r,s){var a=e&&e.shouldHandleError||defaultShouldHandleError;if(a(t)){i.withScope((function(e){var n=r.__sentry_transaction;if(n&&e.getSpan()===undefined){e.setSpan(n)}var a=i.getCurrentHub().getClient();if(a&&f.isAutoSessionTrackingEnabled(a)){var c=a._sessionFlusher!==undefined;if(c){var u=e.getRequestSession();if(u&&u.status!==undefined)u.status=o.RequestSessionStatus.Crashed}}var l=i.captureException(t);r.sentry=l;s(t)}));return}s(t)}}t.errorHandler=errorHandler},61977:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(2534);var i=n(28648);t.Severity=i.Severity;t.Status=i.Status;var s=n(76634);t.addGlobalEventProcessor=s.addGlobalEventProcessor;t.addBreadcrumb=s.addBreadcrumb;t.captureException=s.captureException;t.captureEvent=s.captureEvent;t.captureMessage=s.captureMessage;t.configureScope=s.configureScope;t.getHubFromCarrier=s.getHubFromCarrier;t.getCurrentHub=s.getCurrentHub;t.Hub=s.Hub;t.makeMain=s.makeMain;t.Scope=s.Scope;t.startTransaction=s.startTransaction;t.SDK_VERSION=s.SDK_VERSION;t.setContext=s.setContext;t.setExtra=s.setExtra;t.setExtras=s.setExtras;t.setTag=s.setTag;t.setTags=s.setTags;t.setUser=s.setUser;t.withScope=s.withScope;var o=n(25328);t.NodeBackend=o.NodeBackend;var a=n(12674);t.NodeClient=a.NodeClient;var c=n(89087);t.defaultIntegrations=c.defaultIntegrations;t.init=c.init;t.lastEventId=c.lastEventId;t.flush=c.flush;t.close=c.close;t.getSentryRelease=c.getSentryRelease;var u=n(9939);t.deepReadDirSync=u.deepReadDirSync;var l=n(26086);t.SDK_NAME=l.SDK_NAME;var d=n(76634);var f=n(6066);var p=n(13639);var h=n(51673);t.Handlers=h;var m=n(85564);var g=n(43212);t.Transports=g;var v=r.__assign(r.__assign({},d.Integrations),m);t.Integrations=v;var y=f.getMainCarrier();if(y.__SENTRY__){y.__SENTRY__.extensions=y.__SENTRY__.extensions||{};y.__SENTRY__.extensions.domain=y.__SENTRY__.extensions.domain||p}},62096:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(2534);var i=n(76634);var s=n(28648);var o=n(86406);var a=n(73837);var c=function(){function Console(){this.name=Console.id}Console.prototype.setupOnce=function(){var e,t;try{for(var n=r.__values(["debug","info","warn","error","log"]),i=n.next();!i.done;i=n.next()){var s=i.value;o.fill(console,s,createConsoleWrapper(s))}}catch(t){e={error:t}}finally{try{if(i&&!i.done&&(t=n.return))t.call(n)}finally{if(e)throw e.error}}};Console.id="Console";return Console}();t.Console=c;function createConsoleWrapper(e){return function consoleWrapper(t){var n;switch(e){case"debug":n=s.Severity.Debug;break;case"error":n=s.Severity.Error;break;case"info":n=s.Severity.Info;break;case"warn":n=s.Severity.Warning;break;default:n=s.Severity.Log}return function(){if(i.getCurrentHub().getIntegration(c)){i.getCurrentHub().addBreadcrumb({category:"console",level:n,message:a.format.apply(undefined,arguments)},{input:r.__spread(arguments),level:e})}t.apply(this,arguments)}}}},19194:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(2534);var i=n(76634);var s=n(86406);var o=n(93867);var a=s.parseSemver(process.versions.node);var c=function(){function Http(e){if(e===void 0){e={}}this.name=Http.id;this._breadcrumbs=typeof e.breadcrumbs==="undefined"?true:e.breadcrumbs;this._tracing=typeof e.tracing==="undefined"?false:e.tracing}Http.prototype.setupOnce=function(){if(!this._breadcrumbs&&!this._tracing){return}var e=_createWrappedRequestMethodFactory(this._breadcrumbs,this._tracing);var t=n(13685);s.fill(t,"get",e);s.fill(t,"request",e);if(a.major&&a.major>8){var r=n(95687);s.fill(r,"get",e);s.fill(r,"request",e)}};Http.id="Http";return Http}();t.Http=c;function _createWrappedRequestMethodFactory(e,t){return function wrappedRequestMethodFactory(n){return function wrappedMethod(){var a=[];for(var c=0;c<arguments.length;c++){a[c]=arguments[c]}var u=this;var l=o.normalizeRequestArgs(this,a);var d=l[0];var f=o.extractUrl(d);if(o.isSentryRequest(f)){return n.apply(u,l)}var p;var h;var m=i.getCurrentHub().getScope();if(m&&t){h=m.getSpan();if(h){p=h.startChild({description:(d.method||"GET")+" "+f,op:"request"});var g=p.toTraceparent();s.logger.log("[Tracing] Adding sentry-trace header "+g+" to outgoing request to "+f+": ");d.headers=r.__assign(r.__assign({},d.headers),{"sentry-trace":g})}}return n.apply(u,l).once("response",(function(n){var r=this;if(e){addRequestBreadcrumb("response",f,r,n)}if(t&&p){if(n.statusCode){p.setHttpStatus(n.statusCode)}p.description=o.cleanSpanDescription(p.description,d,r);p.finish()}})).once("error",(function(){var n=this;if(e){addRequestBreadcrumb("error",f,n)}if(t&&p){p.setHttpStatus(500);p.description=o.cleanSpanDescription(p.description,d,n);p.finish()}}))}}}function addRequestBreadcrumb(e,t,n,r){if(!i.getCurrentHub().getIntegration(c)){return}i.getCurrentHub().addBreadcrumb({category:"http",data:{method:n.method,status_code:r&&r.statusCode,url:t},type:"http"},{event:e,request:n,response:r})}},85564:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(62096);t.Console=r.Console;var i=n(19194);t.Http=i.Http;var s=n(34064);t.OnUncaughtException=s.OnUncaughtException;var o=n(55854);t.OnUnhandledRejection=o.OnUnhandledRejection;var a=n(74048);t.LinkedErrors=a.LinkedErrors;var c=n(97125);t.Modules=c.Modules},74048:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(2534);var i=n(76634);var s=n(86406);var o=n(29877);var a="cause";var c=5;var u=function(){function LinkedErrors(e){if(e===void 0){e={}}this.name=LinkedErrors.id;this._key=e.key||a;this._limit=e.limit||c}LinkedErrors.prototype.setupOnce=function(){i.addGlobalEventProcessor((function(e,t){var n=i.getCurrentHub().getIntegration(LinkedErrors);if(n){var r=n._handler&&n._handler.bind(n);return typeof r==="function"?r(e,t):e}return e}))};LinkedErrors.prototype._handler=function(e,t){var n=this;if(!e.exception||!e.exception.values||!t||!s.isInstanceOf(t.originalException,Error)){return s.SyncPromise.resolve(e)}return new s.SyncPromise((function(i){void n._walkErrorTree(t.originalException,n._key).then((function(t){if(e&&e.exception&&e.exception.values){e.exception.values=r.__spread(t,e.exception.values)}i(e)})).then(null,(function(){i(e)}))}))};LinkedErrors.prototype._walkErrorTree=function(e,t,n){var i=this;if(n===void 0){n=[]}if(!s.isInstanceOf(e[t],Error)||n.length+1>=this._limit){return s.SyncPromise.resolve(n)}return new s.SyncPromise((function(s,a){void o.getExceptionFromError(e[t]).then((function(o){void i._walkErrorTree(e[t],t,r.__spread([o],n)).then(s).then(null,(function(){a()}))})).then(null,(function(){a()}))}))};LinkedErrors.id="LinkedErrors";return LinkedErrors}();t.LinkedErrors=u},97125:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(2534);var i=n(57147);var s=n(71017);var o;function getPaths(){try{return require.cache?Object.keys(require.cache):[]}catch(e){return[]}}function collectModules(){var e=require.main&&require.main.paths||[];var t=getPaths();var n={};var r={};t.forEach((function(t){var o=t;var updir=function(){var t=o;o=s.dirname(t);if(!o||t===o||r[t]){return undefined}if(e.indexOf(o)<0){return updir()}var a=s.join(t,"package.json");r[t]=true;if(!i.existsSync(a)){return updir()}try{var c=JSON.parse(i.readFileSync(a,"utf8"));n[c.name]=c.version}catch(e){}};updir()}));return n}var a=function(){function Modules(){this.name=Modules.id}Modules.prototype.setupOnce=function(e,t){var n=this;e((function(e){if(!t().getIntegration(Modules)){return e}return r.__assign(r.__assign({},e),{modules:n._getModules()})}))};Modules.prototype._getModules=function(){if(!o){o=collectModules()}return o};Modules.id="Modules";return Modules}();t.Modules=a},34064:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(76634);var i=n(28648);var s=n(86406);var o=n(41451);var a=function(){function OnUncaughtException(e){if(e===void 0){e={}}this._options=e;this.name=OnUncaughtException.id;this.handler=this._makeErrorHandler()}OnUncaughtException.prototype.setupOnce=function(){global.process.on("uncaughtException",this.handler.bind(this))};OnUncaughtException.prototype._makeErrorHandler=function(){var e=this;var t=2e3;var n=false;var a=false;var c=false;var u;return function(l){var d=o.logAndExitProcess;var f=r.getCurrentHub().getClient();if(e._options.onFatalError){d=e._options.onFatalError}else if(f&&f.getOptions().onFatalError){d=f.getOptions().onFatalError}if(!n){var p=r.getCurrentHub();u=l;n=true;if(p.getIntegration(OnUncaughtException)){p.withScope((function(e){e.setLevel(i.Severity.Fatal);p.captureException(l,{originalException:l,data:{mechanism:{handled:false,type:"onuncaughtexception"}}});if(!c){c=true;d(l)}}))}else{if(!c){c=true;d(l)}}}else if(c){s.logger.warn("uncaught exception after calling fatal error shutdown callback - this is bad! forcing shutdown");o.logAndExitProcess(l)}else if(!a){a=true;setTimeout((function(){if(!c){c=true;d(u,l)}else{}}),t)}}};OnUncaughtException.id="OnUncaughtException";return OnUncaughtException}();t.OnUncaughtException=a},55854:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(76634);var i=n(86406);var s=n(41451);var o=function(){function OnUnhandledRejection(e){if(e===void 0){e={mode:"warn"}}this._options=e;this.name=OnUnhandledRejection.id}OnUnhandledRejection.prototype.setupOnce=function(){global.process.on("unhandledRejection",this.sendUnhandledPromise.bind(this))};OnUnhandledRejection.prototype.sendUnhandledPromise=function(e,t){var n=r.getCurrentHub();if(!n.getIntegration(OnUnhandledRejection)){this._handleRejection(e);return}var i=t.domain&&t.domain.sentryContext||{};n.withScope((function(r){r.setExtra("unhandledPromiseRejection",true);if(i.user){r.setUser(i.user)}if(i.tags){r.setTags(i.tags)}if(i.extra){r.setExtras(i.extra)}n.captureException(e,{originalException:t,data:{mechanism:{handled:false,type:"onunhandledrejection"}}})}));this._handleRejection(e)};OnUnhandledRejection.prototype._handleRejection=function(e){var t="This error originated either by "+"throwing inside of an async function without a catch block, "+"or by rejecting a promise which was not handled with .catch()."+" The promise rejected with the reason:";if(this._options.mode==="warn"){i.consoleSandbox((function(){console.warn(t);console.error(e&&e.stack?e.stack:e)}))}else if(this._options.mode==="strict"){i.consoleSandbox((function(){console.warn(t)}));s.logAndExitProcess(e)}};OnUnhandledRejection.id="OnUnhandledRejection";return OnUnhandledRejection}();t.OnUnhandledRejection=o},41451:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(76634);var i=n(86406);var s=2e3;function logAndExitProcess(e){console.error(e&&e.stack?e.stack:e);var t=r.getCurrentHub().getClient();if(t===undefined){i.logger.warn("No NodeClient was defined, we are exiting the process now.");global.process.exit(1);return}var n=t.getOptions();var o=n&&n.shutdownTimeout&&n.shutdownTimeout>0&&n.shutdownTimeout||s;i.forget(t.close(o).then((function(e){if(!e){i.logger.warn("We reached the timeout for emptying the request buffer, still exiting now!")}global.process.exit(1)})))}t.logAndExitProcess=logAndExitProcess},93867:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(2534);var i=n(76634);var s=n(86406);var o=n(57310);var a=s.parseSemver(process.versions.node);function isSentryRequest(e){var t;var n=(t=i.getCurrentHub().getClient())===null||t===void 0?void 0:t.getDsn();return n?e.includes(n.host):false}t.isSentryRequest=isSentryRequest;function extractUrl(e){var t=e.protocol||"";var n=e.hostname||e.host||"";var r=!e.port||e.port===80||e.port===443?"":":"+e.port;var i=e.path?e.path:"/";return t+"//"+n+r+i}t.extractUrl=extractUrl;function cleanSpanDescription(e,t,n){var i,s,o;if(!e){return e}var a=r.__read(e.split(" "),2),c=a[0],u=a[1];if(t.host&&!t.protocol){t.protocol=(s=(i=n)===null||i===void 0?void 0:i.agent)===null||s===void 0?void 0:s.protocol;u=extractUrl(t)}if((o=u)===null||o===void 0?void 0:o.startsWith("///")){u=u.slice(2)}return c+" "+u}t.cleanSpanDescription=cleanSpanDescription;function urlToOptions(e){var t={protocol:e.protocol,hostname:typeof e.hostname==="string"&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:""+(e.pathname||"")+(e.search||""),href:e.href};if(e.port!==""){t.port=Number(e.port)}if(e.username||e.password){t.auth=e.username+":"+e.password}return t}t.urlToOptions=urlToOptions;function normalizeRequestArgs(e,t){var n,i,s,c,u,l,d,f;var p,h;if(typeof t[t.length-1]==="function"){p=t.pop()}if(typeof t[0]==="string"){h=urlToOptions(new o.URL(t[0]))}else if(t[0]instanceof o.URL){h=urlToOptions(t[0])}else{h=t[0]}if(t.length===2){h=r.__assign(r.__assign({},h),t[1])}if(h.protocol===undefined){if(a.major&&a.major>8){h.protocol=((i=(n=e)===null||n===void 0?void 0:n.globalAgent)===null||i===void 0?void 0:i.protocol)||((s=h.agent)===null||s===void 0?void 0:s.protocol)||((c=h._defaultAgent)===null||c===void 0?void 0:c.protocol)}else{h.protocol=((u=h.agent)===null||u===void 0?void 0:u.protocol)||((l=h._defaultAgent)===null||l===void 0?void 0:l.protocol)||((f=(d=e)===null||d===void 0?void 0:d.globalAgent)===null||f===void 0?void 0:f.protocol)}}if(p){return[h,p]}else{return[h]}}t.normalizeRequestArgs=normalizeRequestArgs},29877:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(86406);var i=n(57147);var s=n(1999);var o=n(51394);var a=7;var c=new s.LRUMap(100);function resetFileContentCache(){c.clear()}t.resetFileContentCache=resetFileContentCache;function getFunction(e){try{return e.functionName||e.typeName+"."+(e.methodName||"<anonymous>")}catch(e){return"<anonymous>"}}var u=(require.main&&require.main.filename&&r.dirname(require.main.filename)||global.process.cwd())+"/";function getModule(e,t){if(!t){t=u}var n=r.basename(e,".js");e=r.dirname(e);var i=e.lastIndexOf("/node_modules/");if(i>-1){return e.substr(i+14).replace(/\//g,".")+":"+n}i=(e+"/").lastIndexOf(t,0);if(i===0){var s=e.substr(t.length).replace(/\//g,".");if(s){s+=":"}s+=n;return s}return n}function readSourceFiles(e){if(e.length===0){return r.SyncPromise.resolve({})}return new r.SyncPromise((function(t){var n={};var r=0;var _loop_1=function(s){var o=e[s];var a=c.get(o);if(a!==undefined){if(a!==null){n[o]=a}r++;if(r===e.length){t(n)}return"continue"}i.readFile(o,(function(i,s){var a=i?null:s.toString();n[o]=a;c.set(o,a);r++;if(r===e.length){t(n)}}))};for(var s=0;s<e.length;s++){_loop_1(s)}}))}function extractStackFromError(e){var t=o.parse(e);if(!t){return[]}return t}t.extractStackFromError=extractStackFromError;function parseStack(e,t){var n=[];var i=t&&t.frameContextLines!==undefined?t.frameContextLines:a;var s=e.map((function(e){var t;var r={colno:e.columnNumber,filename:((t=e.fileName)===null||t===void 0?void 0:t.startsWith("file://"))?e.fileName.substr(7):e.fileName||"",function:getFunction(e),lineno:e.lineNumber};var s=e.native||r.filename&&!r.filename.startsWith("/")&&!r.filename.startsWith(".")&&r.filename.indexOf(":\\")!==1;r.in_app=!s&&r.filename!==undefined&&r.filename.indexOf("node_modules/")===-1;if(r.filename){r.module=getModule(r.filename);if(!s&&i>0&&n.indexOf(r.filename)===-1){n.push(r.filename)}}return r}));if(i<=0){return r.SyncPromise.resolve(s)}try{return addPrePostContext(n,s,i)}catch(e){return r.SyncPromise.resolve(s)}}t.parseStack=parseStack;function addPrePostContext(e,t,n){return new r.SyncPromise((function(i){return readSourceFiles(e).then((function(e){var s=t.map((function(t){if(t.filename&&e[t.filename]){try{var i=e[t.filename].split("\n");r.addContextToFrame(i,t,n)}catch(e){}}return t}));i(s)}))}))}function getExceptionFromError(e,t){var n=e.name||e.constructor.name;var i=extractStackFromError(e);return new r.SyncPromise((function(r){return parseStack(i,t).then((function(t){var i={stacktrace:{frames:prepareFramesForEvent(t)},type:n,value:e.message};r(i)}))}))}t.getExceptionFromError=getExceptionFromError;function parseError(e,t){return new r.SyncPromise((function(n){return getExceptionFromError(e,t).then((function(e){n({exception:{values:[e]}})}))}))}t.parseError=parseError;function prepareFramesForEvent(e){if(!e||!e.length){return[]}var t=e;var n=t[0].function||"";if(n.indexOf("captureMessage")!==-1||n.indexOf("captureException")!==-1){t=t.slice(1)}return t.reverse()}t.prepareFramesForEvent=prepareFramesForEvent},89087:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(2534);var i=n(76634);var s=n(6066);var o=n(28648);var a=n(86406);var c=n(13639);var u=n(12674);var l=n(85564);t.defaultIntegrations=[new i.Integrations.InboundFilters,new i.Integrations.FunctionToString,new l.Console,new l.Http,new l.OnUncaughtException,new l.OnUnhandledRejection,new l.LinkedErrors];function init(e){if(e===void 0){e={}}var n;var o=s.getMainCarrier();var a=((n=o.__SENTRY__)===null||n===void 0?void 0:n.integrations)||[];e.defaultIntegrations=e.defaultIntegrations===false?[]:r.__spread(Array.isArray(e.defaultIntegrations)?e.defaultIntegrations:t.defaultIntegrations,a);if(e.dsn===undefined&&process.env.SENTRY_DSN){e.dsn=process.env.SENTRY_DSN}if(e.tracesSampleRate===undefined&&process.env.SENTRY_TRACES_SAMPLE_RATE){var l=parseFloat(process.env.SENTRY_TRACES_SAMPLE_RATE);if(isFinite(l)){e.tracesSampleRate=l}}if(e.release===undefined){var d=getSentryRelease();if(d!==undefined){e.release=d}else{e.autoSessionTracking=false}}if(e.environment===undefined&&process.env.SENTRY_ENVIRONMENT){e.environment=process.env.SENTRY_ENVIRONMENT}if(e.autoSessionTracking===undefined&&e.dsn!==undefined){e.autoSessionTracking=true}if(c.active){s.setHubOnCarrier(o,i.getCurrentHub())}i.initAndBind(u.NodeClient,e);if(e.autoSessionTracking){startSessionTracking()}}t.init=init;function lastEventId(){return i.getCurrentHub().lastEventId()}t.lastEventId=lastEventId;function flush(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){t=i.getCurrentHub().getClient();if(t){return[2,t.flush(e)]}a.logger.warn("Cannot flush events. No client defined.");return[2,Promise.resolve(false)]}))}))}t.flush=flush;function close(e){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(n){t=i.getCurrentHub().getClient();if(t){return[2,t.close(e)]}a.logger.warn("Cannot flush events and disable SDK. No client defined.");return[2,Promise.resolve(false)]}))}))}t.close=close;function isAutoSessionTrackingEnabled(e){if(e===undefined){return false}var t=e&&e.getOptions();if(t&&t.autoSessionTracking!==undefined){return t.autoSessionTracking}return false}t.isAutoSessionTrackingEnabled=isAutoSessionTrackingEnabled;function getSentryRelease(e){if(process.env.SENTRY_RELEASE){return process.env.SENTRY_RELEASE}var t=a.getGlobalObject();if(t.SENTRY_RELEASE&&t.SENTRY_RELEASE.id){return t.SENTRY_RELEASE.id}return process.env.GITHUB_SHA||process.env.COMMIT_REF||process.env.VERCEL_GIT_COMMIT_SHA||process.env.VERCEL_GITHUB_COMMIT_SHA||process.env.VERCEL_GITLAB_COMMIT_SHA||process.env.VERCEL_BITBUCKET_COMMIT_SHA||process.env.ZEIT_GITHUB_COMMIT_SHA||process.env.ZEIT_GITLAB_COMMIT_SHA||process.env.ZEIT_BITBUCKET_COMMIT_SHA||e}t.getSentryRelease=getSentryRelease;function startSessionTracking(){var e=i.getCurrentHub();e.startSession();process.on("beforeExit",(function(){var t;var n=(t=e.getScope())===null||t===void 0?void 0:t.getSession();var r=[o.SessionStatus.Exited,o.SessionStatus.Crashed];if(n&&!r.includes(n.status))e.endSession()}))}},51394:(e,t)=>{
/**
 * stack-trace - Parses node.js stack traces
 *
 * This was originally forked to fix this issue:
 * https://github.com/felixge/node-stack-trace/issues/31
 *
 * Mar 19,2019 - #4fd379e
 *
 * https://github.com/felixge/node-stack-trace/
 * @license MIT
 */
Object.defineProperty(t,"__esModule",{value:true});function parse(e){if(!e.stack){return[]}var t=e.stack.split("\n").slice(1);return t.map((function(e){if(e.match(/^\s*[-]{4,}$/)){return{columnNumber:null,fileName:e,functionName:null,lineNumber:null,methodName:null,native:null,typeName:null}}var t=e.match(/at (?:(.+?)\s+\()?(?:(.+?):(\d+)(?::(\d+))?|([^)]+))\)?/);if(!t){return undefined}var n=null;var r=null;var i=null;var s=null;var o=null;var a=t[5]==="native";if(t[1]){i=t[1];var c=i.lastIndexOf(".");if(i[c-1]==="."){c--}if(c>0){n=i.substr(0,c);r=i.substr(c+1);var u=n.indexOf(".Module");if(u>0){i=i.substr(u+1);n=n.substr(0,u)}}s=null}if(r){s=n;o=r}if(r==="<anonymous>"){o=null;i=null}var l={columnNumber:parseInt(t[4],10)||null,fileName:t[2]||null,functionName:i,lineNumber:parseInt(t[3],10)||null,methodName:o,native:a,typeName:s};return l})).filter((function(e){return!!e}))}t.parse=parse},65661:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(2534);var i=n(76634);var s=n(28648);var o=n(86406);var a=n(57147);var c=n(57310);var u=n(26086);var l={event:"error",transaction:"transaction",session:"session",attachment:"attachment"};var d=function(){function BaseTransport(e){this.options=e;this._buffer=new o.PromiseBuffer(30);this._rateLimits={};this.urlParser=function(e){return new c.URL(e)};this._api=new i.API(e.dsn,e._metadata,e.tunnel)}BaseTransport.prototype.sendEvent=function(e){throw new o.SentryError("Transport Class has to implement `sendEvent` method.")};BaseTransport.prototype.close=function(e){return this._buffer.drain(e)};BaseTransport.prototype._getProxy=function(e){var t,n;var i=process.env,s=i.no_proxy,o=i.http_proxy,a=i.https_proxy;var c=this.options,u=c.httpProxy,l=c.httpsProxy;var d=e==="http"?u||o:l||u||a||o;if(!s){return d}var f=this._api.getDsn(),p=f.host,h=f.port;try{for(var m=r.__values(s.split(",")),g=m.next();!g.done;g=m.next()){var v=g.value;if(p.endsWith(v)||(p+":"+h).endsWith(v)){return}}}catch(e){t={error:e}}finally{try{if(g&&!g.done&&(n=m.return))n.call(m)}finally{if(t)throw t.error}}return d};BaseTransport.prototype._getRequestOptions=function(e){var t=r.__assign(r.__assign({},this._api.getRequestHeaders(u.SDK_NAME,i.SDK_VERSION)),this.options.headers);var n=e.hostname,s=e.pathname,o=e.port,c=e.protocol;var l=""+s;return r.__assign({agent:this.client,headers:t,hostname:n,method:"POST",path:l,port:o,protocol:c},this.options.caCerts&&{ca:a.readFileSync(this.options.caCerts)})};BaseTransport.prototype._disabledUntil=function(e){var t=l[e];return this._rateLimits[t]||this._rateLimits.all};BaseTransport.prototype._isRateLimited=function(e){return this._disabledUntil(e)>new Date(Date.now())};BaseTransport.prototype._handleRateLimit=function(e){var t,n,i,s;var a=Date.now();var c=e["x-sentry-rate-limits"];var u=e["retry-after"];if(c){try{for(var d=r.__values(c.trim().split(",")),f=d.next();!f.done;f=d.next()){var p=f.value;var h=p.split(":",2);var m=parseInt(h[0],10);var g=(!isNaN(m)?m:60)*1e3;try{for(var v=(i=void 0,r.__values(h[1]&&h[1].split(";")||["all"])),y=v.next();!y.done;y=v.next()){var b=y.value;var _=r.__spread(Object.keys(l).map((function(e){return l[e]})),["all"]);if(_.includes(b))this._rateLimits[b]=new Date(a+g)}}catch(e){i={error:e}}finally{try{if(y&&!y.done&&(s=v.return))s.call(v)}finally{if(i)throw i.error}}}}catch(e){t={error:e}}finally{try{if(f&&!f.done&&(n=d.return))n.call(d)}finally{if(t)throw t.error}}return true}else if(u){this._rateLimits.all=new Date(a+o.parseRetryAfterHeader(a,u));return true}return false};BaseTransport.prototype._send=function(e,t){return r.__awaiter(this,void 0,void 0,(function(){var n=this;return r.__generator(this,(function(r){if(!this.module){throw new o.SentryError("No module available")}if(t&&this._isRateLimited(e.type)){return[2,Promise.reject({payload:t,type:e.type,reason:"Transport for "+e.type+" requests locked till "+this._disabledUntil(e.type)+" due to too many requests.",status:429})]}return[2,this._buffer.add((function(){return new Promise((function(t,r){if(!n.module){throw new o.SentryError("No module available")}var i=n._getRequestOptions(n.urlParser(e.url));var a=n.module.request(i,(function(i){var a=i.statusCode||500;var c=s.Status.fromHttpCode(a);i.setEncoding("utf8");var u=i.headers?i.headers["retry-after"]:"";u=Array.isArray(u)?u[0]:u;var l=i.headers?i.headers["x-sentry-rate-limits"]:"";l=Array.isArray(l)?l[0]:l;var d={"x-sentry-rate-limits":l,"retry-after":u};var f=n._handleRateLimit(d);if(f)o.logger.warn("Too many "+e.type+" requests, backing off until: "+n._disabledUntil(e.type));if(c===s.Status.Success){t({status:c})}else{var p="HTTP Error ("+a+")";if(i.headers&&i.headers["x-sentry-error"]){p+=": "+i.headers["x-sentry-error"]}r(new o.SentryError(p))}i.on("data",(function(){}));i.on("end",(function(){}))}));a.on("error",r);a.end(e.body)}))}))]}))}))};return BaseTransport}();t.BaseTransport=d},35893:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(2534);var i=n(76634);var s=n(13685);var o=n(65661);var a=function(e){r.__extends(HTTPTransport,e);function HTTPTransport(t){var r=e.call(this,t)||this;r.options=t;var i=r._getProxy("http");r.module=s;r.client=i?new(n(54214))(i):new s.Agent({keepAlive:false,maxSockets:30,timeout:2e3});return r}HTTPTransport.prototype.sendEvent=function(e){return this._send(i.eventToSentryRequest(e,this._api),e)};HTTPTransport.prototype.sendSession=function(e){return this._send(i.sessionToSentryRequest(e,this._api),e)};return HTTPTransport}(o.BaseTransport);t.HTTPTransport=a},5944:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(2534);var i=n(76634);var s=n(95687);var o=n(65661);var a=function(e){r.__extends(HTTPSTransport,e);function HTTPSTransport(t){var r=e.call(this,t)||this;r.options=t;var i=r._getProxy("https");r.module=s;r.client=i?new(n(54214))(i):new s.Agent({keepAlive:false,maxSockets:30,timeout:2e3});return r}HTTPSTransport.prototype.sendEvent=function(e){return this._send(i.eventToSentryRequest(e,this._api),e)};HTTPSTransport.prototype.sendSession=function(e){return this._send(i.sessionToSentryRequest(e,this._api),e)};return HTTPSTransport}(o.BaseTransport);t.HTTPSTransport=a},43212:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(65661);t.BaseTransport=r.BaseTransport;var i=n(35893);t.HTTPTransport=i.HTTPTransport;var s=n(5944);t.HTTPSTransport=s.HTTPSTransport},9939:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(2534);var i=n(57147);var s=n(71017);function deepReadDirSync(e){var t=s.resolve(e);if(!i.existsSync(t)){throw new Error("Cannot read contents of "+t+". Directory does not exist.")}if(!i.statSync(t).isDirectory()){throw new Error("Cannot read contents of "+t+", because it is not a directory.")}var deepReadCurrentDir=function(e){return i.readdirSync(e).reduce((function(t,n){var o=s.join(e,n);if(i.statSync(o).isDirectory()){return r.__spread(t,deepReadCurrentDir(o))}return r.__spread(t,[o])}),[])};return deepReadCurrentDir(t).map((function(e){return s.relative(t,e)}))}t.deepReadDirSync=deepReadDirSync},26086:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.SDK_NAME="sentry.javascript.node"},2534:e=>{
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var t;var n;var r;var i;var s;var o;var a;var c;var u;var l;var d;var f;var p;var h;var m;var g;var v;var y;var b;var _;var S;var w;var T;(function(t){var n=typeof global==="object"?global:typeof self==="object"?self:typeof this==="object"?this:{};if(typeof define==="function"&&define.amd){define("tslib",["exports"],(function(e){t(createExporter(n,createExporter(e)))}))}else if(true&&typeof e.exports==="object"){t(createExporter(n,createExporter(e.exports)))}else{t(createExporter(n))}function createExporter(e,t){if(e!==n){if(typeof Object.create==="function"){Object.defineProperty(e,"__esModule",{value:true})}else{e.__esModule=true}}return function(n,r){return e[n]=t?t(n,r):r}}})((function(e){var k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n]};t=function(e,t){k(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)};n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};r=function(e,t){var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0)n[r]=e[r];if(e!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++){if(t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i]))n[r[i]]=e[r[i]]}return n};i=function(e,t,n,r){var i=arguments.length,s=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)if(o=e[a])s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s;return i>3&&s&&Object.defineProperty(t,n,s),s};s=function(e,t){return function(n,r){t(n,r,e)}};o=function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};a=function(e,t,n,r){function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function fulfilled(e){try{step(r.next(e))}catch(e){i(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){i(e)}}function step(e){e.done?n(e.value):adopt(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())}))};c=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function verb(e){return function(t){return step([e,t])}}function step(o){if(r)throw new TypeError("Generator is already executing.");while(n)try{if(r=1,i&&(s=o[0]&2?i["return"]:o[0]?i["throw"]||((s=i["return"])&&s.call(i),0):i.next)&&!(s=s.call(i,o[1])).done)return s;if(i=0,s)o=[o[0]&2,s.value];switch(o[0]){case 0:case 1:s=o;break;case 4:n.label++;return{value:o[1],done:false};case 5:n.label++;i=o[1];o=[0];continue;case 7:o=n.ops.pop();n.trys.pop();continue;default:if(!(s=n.trys,s=s.length>0&&s[s.length-1])&&(o[0]===6||o[0]===2)){n=0;continue}if(o[0]===3&&(!s||o[1]>s[0]&&o[1]<s[3])){n.label=o[1];break}if(o[0]===6&&n.label<s[1]){n.label=s[1];s=o;break}if(s&&n.label<s[2]){n.label=s[2];n.ops.push(o);break}if(s[2])n.ops.pop();n.trys.pop();continue}o=t.call(e,n)}catch(e){o=[6,e];i=0}finally{r=s=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}};T=function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]};u=function(e,t){for(var n in e)if(n!=="default"&&!t.hasOwnProperty(n))t[n]=e[n]};l=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&r>=e.length)e=void 0;return{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};d=function(e,t){var n=typeof Symbol==="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,s=[],o;try{while((t===void 0||t-- >0)&&!(i=r.next()).done)s.push(i.value)}catch(e){o={error:e}}finally{try{if(i&&!i.done&&(n=r["return"]))n.call(r)}finally{if(o)throw o.error}}return s};f=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(d(arguments[t]));return e};p=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r};h=function(e){return this instanceof h?(this.v=e,this):new h(e)};m=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i;function verb(e){if(r[e])i[e]=function(t){return new Promise((function(n,r){s.push([e,t,n,r])>1||resume(e,t)}))}}function resume(e,t){try{step(r[e](t))}catch(e){settle(s[0][3],e)}}function step(e){e.value instanceof h?Promise.resolve(e.value.v).then(fulfill,reject):settle(s[0][2],e)}function fulfill(e){resume("next",e)}function reject(e){resume("throw",e)}function settle(e,t){if(e(t),s.shift(),s.length)resume(s[0][0],s[0][1])}};g=function(e){var t,n;return t={},verb("next"),verb("throw",(function(e){throw e})),verb("return"),t[Symbol.iterator]=function(){return this},t;function verb(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:h(e[r](t)),done:r==="return"}:i?i(t):t}:i}};v=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof l==="function"?l(e):e[Symbol.iterator](),n={},verb("next"),verb("throw"),verb("return"),n[Symbol.asyncIterator]=function(){return this},n);function verb(t){n[t]=e[t]&&function(n){return new Promise((function(r,i){n=e[t](n),settle(r,i,n.done,n.value)}))}}function settle(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}};y=function(e,t){if(Object.defineProperty){Object.defineProperty(e,"raw",{value:t})}else{e.raw=t}return e};b=function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(Object.hasOwnProperty.call(e,n))t[n]=e[n];t["default"]=e;return t};_=function(e){return e&&e.__esModule?e:{default:e}};S=function(e,t){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return t.get(e)};w=function(e,t,n){if(!t.has(e)){throw new TypeError("attempted to set private field on non-instance")}t.set(e,n);return n};e("__extends",t);e("__assign",n);e("__rest",r);e("__decorate",i);e("__param",s);e("__metadata",o);e("__awaiter",a);e("__generator",c);e("__exportStar",u);e("__createBinding",T);e("__values",l);e("__read",d);e("__spread",f);e("__spreadArrays",p);e("__await",h);e("__asyncGenerator",m);e("__asyncDelegator",g);e("__asyncValues",v);e("__makeTemplateObject",y);e("__importStar",b);e("__importDefault",_);e("__classPrivateFieldGet",S);e("__classPrivateFieldSet",w)}))},69411:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(86406);var i=n(32711);var s=n(72058);var o=r.getGlobalObject();function registerBackgroundTabDetection(){if(o&&o.document){o.document.addEventListener("visibilitychange",(function(){var e=s.getActiveTransaction();if(o.document.hidden&&e){r.logger.log("[Tracing] Transaction: "+i.SpanStatus.Cancelled+" -> since tab moved to the background, op: "+e.op);if(!e.status){e.setStatus(i.SpanStatus.Cancelled)}e.setTag("visibilitychange","document.hidden");e.finish()}}))}else{r.logger.warn("[Tracing] Could not set up background tab detection due to lack of global document")}}t.registerBackgroundTabDetection=registerBackgroundTabDetection},69232:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(38314);var i=n(86406);var s=n(21289);var o=n(79345);var a=n(32711);var c=n(72058);var u=n(69411);var l=n(19361);var d=n(28408);var f=n(88906);t.DEFAULT_MAX_TRANSACTION_DURATION_SECONDS=600;var p=r.__assign({idleTimeout:o.DEFAULT_IDLE_TIMEOUT,markBackgroundTransactions:true,maxTransactionDuration:t.DEFAULT_MAX_TRANSACTION_DURATION_SECONDS,routingInstrumentation:f.instrumentRoutingWithDefaults,startTransactionOnLocationChange:true,startTransactionOnPageLoad:true},d.defaultRequestInstrumentationOptions);var h=function(){function BrowserTracing(e){this.name=BrowserTracing.id;this._emitOptionsWarning=false;var t=d.defaultRequestInstrumentationOptions.tracingOrigins;if(e&&e.tracingOrigins&&Array.isArray(e.tracingOrigins)&&e.tracingOrigins.length!==0){t=e.tracingOrigins}else{this._emitOptionsWarning=true}this.options=r.__assign(r.__assign(r.__assign({},p),e),{tracingOrigins:t});this._metrics=new l.MetricsInstrumentation(r.__assign(r.__assign({},l.DEFAULT_METRICS_INSTR_OPTIONS),this.options._metricOptions))}BrowserTracing.prototype.setupOnce=function(e,t){var n=this;this._getCurrentHub=t;if(this._emitOptionsWarning){i.logger.warn("[Tracing] You need to define `tracingOrigins` in the options. Set an array of urls or patterns to trace.");i.logger.warn("[Tracing] We added a reasonable default for you: "+d.defaultRequestInstrumentationOptions.tracingOrigins)}var r=this.options,s=r.routingInstrumentation,o=r.startTransactionOnLocationChange,a=r.startTransactionOnPageLoad,c=r.markBackgroundTransactions,l=r.traceFetch,f=r.traceXHR,p=r.tracingOrigins,h=r.shouldCreateSpanForRequest;s((function(e){return n._createRouteTransaction(e)}),a,o);if(c){u.registerBackgroundTabDetection()}d.instrumentOutgoingRequests({traceFetch:l,traceXHR:f,tracingOrigins:p,shouldCreateSpanForRequest:h})};BrowserTracing.prototype._createRouteTransaction=function(e){var t=this;if(!this._getCurrentHub){i.logger.warn("[Tracing] Did not create "+e.op+" transaction because _getCurrentHub is invalid.");return undefined}var n=this.options,o=n.beforeNavigate,a=n.idleTimeout,u=n.maxTransactionDuration;var l=e.op==="pageload"?getHeaderContext():undefined;var d=r.__assign(r.__assign(r.__assign({},e),l),{trimEnd:true});var f=typeof o==="function"?o(d):d;var p=f===undefined?r.__assign(r.__assign({},d),{sampled:false}):f;if(p.sampled===false){i.logger.log("[Tracing] Will not send "+p.op+" transaction because of beforeNavigate.")}i.logger.log("[Tracing] Starting "+p.op+" transaction on scope");var h=this._getCurrentHub();var m=i.getGlobalObject().location;var g=s.startIdleTransaction(h,p,a,true,{location:m});g.registerBeforeFinishCallback((function(e,n){t._metrics.addPerformanceEntries(e);adjustTransactionDuration(c.secToMs(u),e,n)}));return g};BrowserTracing.id="BrowserTracing";return BrowserTracing}();t.BrowserTracing=h;function getHeaderContext(){var e=getMetaContent("sentry-trace");if(e){return c.extractTraceparentData(e)}return undefined}t.getHeaderContext=getHeaderContext;function getMetaContent(e){var t=i.getGlobalObject().document.querySelector("meta[name="+e+"]");return t?t.getAttribute("content"):null}t.getMetaContent=getMetaContent;function adjustTransactionDuration(e,t,n){var r=n-t.startTimestamp;var i=n&&(r>e||r<0);if(i){t.setStatus(a.SpanStatus.DeadlineExceeded);t.setTag("maxTransactionDurationExceeded","true")}}},20557:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(69232);t.BrowserTracing=r.BrowserTracing;var i=n(28408);t.instrumentOutgoingRequests=i.instrumentOutgoingRequests;t.defaultRequestInstrumentationOptions=i.defaultRequestInstrumentationOptions},19361:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(38314);var i=n(86406);var s=n(72058);var o=n(88884);var a=n(47045);var c=n(78657);var u=n(36919);var l=i.getGlobalObject();t.DEFAULT_METRICS_INSTR_OPTIONS={_reportAllChanges:false};var d=function(){function MetricsInstrumentation(e){var t,n;this._measurements={};this._performanceCursor=0;if(!i.isNodeEnv()&&((t=l)===null||t===void 0?void 0:t.performance)&&((n=l)===null||n===void 0?void 0:n.document)){if(l.performance.mark){l.performance.mark("sentry-tracing-init")}this._trackCLS();this._trackLCP(e._reportAllChanges);this._trackFID()}}MetricsInstrumentation.prototype.addPerformanceEntries=function(e){var t=this;if(!l||!l.performance||!l.performance.getEntries||!i.browserPerformanceTimeOrigin){return}i.logger.log("[Tracing] Adding & adjusting spans using Performance API");var n=s.msToSec(i.browserPerformanceTimeOrigin);var r;if(l.document&&l.document.scripts){for(var o=0;o<l.document.scripts.length;o++){if(l.document.scripts[o].dataset.entry==="true"){r=l.document.scripts[o].src;break}}}var a;var c;var d;var f;l.performance.getEntries().slice(this._performanceCursor).forEach((function(o){var p=s.msToSec(o.startTime);var h=s.msToSec(o.duration);if(e.op==="navigation"&&n+p<e.startTimestamp){return}switch(o.entryType){case"navigation":{addNavigationSpans(e,o,n);d=n+s.msToSec(o.responseStart);f=n+s.msToSec(o.requestStart);break}case"mark":case"paint":case"measure":{var m=addMeasureSpans(e,o,p,h,n);if(c===undefined&&o.name==="sentry-tracing-init"){c=m}var g=u.getVisibilityWatcher();var v=o.startTime<g.firstHiddenTime;if(o.name==="first-paint"&&v){i.logger.log("[Measurements] Adding FP");t._measurements["fp"]={value:o.startTime};t._measurements["mark.fp"]={value:m}}if(o.name==="first-contentful-paint"&&v){i.logger.log("[Measurements] Adding FCP");t._measurements["fcp"]={value:o.startTime};t._measurements["mark.fcp"]={value:m}}break}case"resource":{var y=o.name.replace(l.location.origin,"");var b=addResourceSpans(e,o,y,p,h,n);if(a===undefined&&(r||"").indexOf(y)>-1){a=b}break}default:}}));if(a!==undefined&&c!==undefined){_startChild(e,{description:"evaluation",endTimestamp:c,op:"script",startTimestamp:a})}this._performanceCursor=Math.max(performance.getEntries().length-1,0);this._trackNavigator(e);if(e.op==="pageload"){var p=s.msToSec(i.browserPerformanceTimeOrigin);if(typeof d==="number"){i.logger.log("[Measurements] Adding TTFB");this._measurements["ttfb"]={value:(d-e.startTimestamp)*1e3};if(typeof f==="number"&&f<=d){this._measurements["ttfb.requestTime"]={value:(d-f)*1e3}}}["fcp","fp","lcp"].forEach((function(n){if(!t._measurements[n]||p>=e.startTimestamp){return}var r=t._measurements[n].value;var o=p+s.msToSec(r);var a=Math.abs((o-e.startTimestamp)*1e3);var c=a-r;i.logger.log("[Measurements] Normalized "+n+" from "+r+" to "+a+" ("+c+")");t._measurements[n].value=a}));if(this._measurements["mark.fid"]&&this._measurements["fid"]){_startChild(e,{description:"first input delay",endTimestamp:this._measurements["mark.fid"].value+s.msToSec(this._measurements["fid"].value),op:"web.vitals",startTimestamp:this._measurements["mark.fid"].value})}if(!("fcp"in this._measurements)){delete this._measurements.cls}e.setMeasurements(this._measurements);this._tagMetricInfo(e)}};MetricsInstrumentation.prototype._tagMetricInfo=function(e){if(this._lcpEntry){i.logger.log("[Measurements] Adding LCP Data");if(this._lcpEntry.element){e.setTag("lcp.element",i.htmlTreeAsString(this._lcpEntry.element))}if(this._lcpEntry.id){e.setTag("lcp.id",this._lcpEntry.id)}if(this._lcpEntry.url){e.setTag("lcp.url",this._lcpEntry.url.trim().slice(0,200))}e.setTag("lcp.size",this._lcpEntry.size)}if(this._clsEntry&&this._clsEntry.sources){i.logger.log("[Measurements] Adding CLS Data");this._clsEntry.sources.forEach((function(t,n){return e.setTag("cls.source."+(n+1),i.htmlTreeAsString(t.node))}))}};MetricsInstrumentation.prototype._trackCLS=function(){var e=this;o.getCLS((function(t){var n=t.entries.pop();if(!n){return}i.logger.log("[Measurements] Adding CLS");e._measurements["cls"]={value:t.value};e._clsEntry=n}))};MetricsInstrumentation.prototype._trackNavigator=function(e){var t=l.navigator;if(!t){return}var n=t.connection;if(n){if(n.effectiveType){e.setTag("effectiveConnectionType",n.effectiveType)}if(n.type){e.setTag("connectionType",n.type)}if(isMeasurementValue(n.rtt)){this._measurements["connection.rtt"]={value:n.rtt}}if(isMeasurementValue(n.downlink)){this._measurements["connection.downlink"]={value:n.downlink}}}if(isMeasurementValue(t.deviceMemory)){e.setTag("deviceMemory",String(t.deviceMemory))}if(isMeasurementValue(t.hardwareConcurrency)){e.setTag("hardwareConcurrency",String(t.hardwareConcurrency))}};MetricsInstrumentation.prototype._trackLCP=function(e){var t=this;c.getLCP((function(e){var n=e.entries.pop();if(!n){return}var r=s.msToSec(i.browserPerformanceTimeOrigin);var o=s.msToSec(n.startTime);i.logger.log("[Measurements] Adding LCP");t._measurements["lcp"]={value:e.value};t._measurements["mark.lcp"]={value:r+o};t._lcpEntry=n}),e)};MetricsInstrumentation.prototype._trackFID=function(){var e=this;a.getFID((function(t){var n=t.entries.pop();if(!n){return}var r=s.msToSec(i.browserPerformanceTimeOrigin);var o=s.msToSec(n.startTime);i.logger.log("[Measurements] Adding FID");e._measurements["fid"]={value:t.value};e._measurements["mark.fid"]={value:r+o}}))};return MetricsInstrumentation}();t.MetricsInstrumentation=d;function addNavigationSpans(e,t,n){addPerformanceNavigationTiming({transaction:e,entry:t,event:"unloadEvent",timeOrigin:n});addPerformanceNavigationTiming({transaction:e,entry:t,event:"redirect",timeOrigin:n});addPerformanceNavigationTiming({transaction:e,entry:t,event:"domContentLoadedEvent",timeOrigin:n});addPerformanceNavigationTiming({transaction:e,entry:t,event:"loadEvent",timeOrigin:n});addPerformanceNavigationTiming({transaction:e,entry:t,event:"connect",timeOrigin:n});addPerformanceNavigationTiming({transaction:e,entry:t,event:"secureConnection",timeOrigin:n,eventEnd:"connectEnd",description:"TLS/SSL"});addPerformanceNavigationTiming({transaction:e,entry:t,event:"fetch",timeOrigin:n,eventEnd:"domainLookupStart",description:"cache"});addPerformanceNavigationTiming({transaction:e,entry:t,event:"domainLookup",timeOrigin:n,description:"DNS"});addRequest(e,t,n)}function addMeasureSpans(e,t,n,r,i){var s=i+n;var o=s+r;_startChild(e,{description:t.name,endTimestamp:o,op:t.entryType,startTimestamp:s});return s}function addResourceSpans(e,t,n,r,i,s){if(t.initiatorType==="xmlhttprequest"||t.initiatorType==="fetch"){return undefined}var o={};if("transferSize"in t){o["Transfer Size"]=t.transferSize}if("encodedBodySize"in t){o["Encoded Body Size"]=t.encodedBodySize}if("decodedBodySize"in t){o["Decoded Body Size"]=t.decodedBodySize}var a=s+r;var c=a+i;_startChild(e,{description:n,endTimestamp:c,op:t.initiatorType?"resource."+t.initiatorType:"resource",startTimestamp:a,data:o});return c}t.addResourceSpans=addResourceSpans;function addPerformanceNavigationTiming(e){var t=e.transaction,n=e.entry,r=e.event,i=e.timeOrigin,o=e.eventEnd,a=e.description;var c=o?n[o]:n[r+"End"];var u=n[r+"Start"];if(!u||!c){return}_startChild(t,{op:"browser",description:a!==null&&a!==void 0?a:r,startTimestamp:i+s.msToSec(u),endTimestamp:i+s.msToSec(c)})}function addRequest(e,t,n){_startChild(e,{op:"browser",description:"request",startTimestamp:n+s.msToSec(t.requestStart),endTimestamp:n+s.msToSec(t.responseEnd)});_startChild(e,{op:"browser",description:"response",startTimestamp:n+s.msToSec(t.responseStart),endTimestamp:n+s.msToSec(t.responseEnd)})}function _startChild(e,t){var n=t.startTimestamp,i=r.__rest(t,["startTimestamp"]);if(n&&e.startTimestamp>n){e.startTimestamp=n}return e.startChild(r.__assign({startTimestamp:n},i))}t._startChild=_startChild;function isMeasurementValue(e){return typeof e==="number"&&isFinite(e)}},28408:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(38314);var i=n(86406);var s=n(32711);var o=n(72058);t.DEFAULT_TRACING_ORIGINS=["localhost",/^\//];t.defaultRequestInstrumentationOptions={traceFetch:true,traceXHR:true,tracingOrigins:t.DEFAULT_TRACING_ORIGINS};function instrumentOutgoingRequests(e){var n=r.__assign(r.__assign({},t.defaultRequestInstrumentationOptions),e),s=n.traceFetch,o=n.traceXHR,a=n.tracingOrigins,c=n.shouldCreateSpanForRequest;var u={};var defaultShouldCreateSpan=function(e){if(u[e]){return u[e]}var t=a;u[e]=t.some((function(t){return i.isMatchingPattern(e,t)}))&&!i.isMatchingPattern(e,"sentry_key");return u[e]};var l=defaultShouldCreateSpan;if(typeof c==="function"){l=function(e){return defaultShouldCreateSpan(e)&&c(e)}}var d={};if(s){i.addInstrumentationHandler({callback:function(e){fetchCallback(e,l,d)},type:"fetch"})}if(o){i.addInstrumentationHandler({callback:function(e){xhrCallback(e,l,d)},type:"xhr"})}}t.instrumentOutgoingRequests=instrumentOutgoingRequests;function fetchCallback(e,t,n){if(!o.hasTracingEnabled()||!(e.fetchData&&t(e.fetchData.url))){return}if(e.endTimestamp&&e.fetchData.__span){var a=n[e.fetchData.__span];if(a){if(e.response){a.setHttpStatus(e.response.status)}else if(e.error){a.setStatus(s.SpanStatus.InternalError)}a.finish();delete n[e.fetchData.__span]}return}var c=o.getActiveTransaction();if(c){var a=c.startChild({data:r.__assign(r.__assign({},e.fetchData),{type:"fetch"}),description:e.fetchData.method+" "+e.fetchData.url,op:"http.client"});e.fetchData.__span=a.spanId;n[a.spanId]=a;var u=e.args[0]=e.args[0];var l=e.args[1]=e.args[1]||{};var d=l.headers;if(i.isInstanceOf(u,Request)){d=u.headers}if(d){if(typeof d.append==="function"){d.append("sentry-trace",a.toTraceparent())}else if(Array.isArray(d)){d=r.__spread(d,[["sentry-trace",a.toTraceparent()]])}else{d=r.__assign(r.__assign({},d),{"sentry-trace":a.toTraceparent()})}}else{d={"sentry-trace":a.toTraceparent()}}l.headers=d}}t.fetchCallback=fetchCallback;function xhrCallback(e,t,n){var i,s;if(!o.hasTracingEnabled()||((i=e.xhr)===null||i===void 0?void 0:i.__sentry_own_request__)||!(((s=e.xhr)===null||s===void 0?void 0:s.__sentry_xhr__)&&t(e.xhr.__sentry_xhr__.url))){return}var a=e.xhr.__sentry_xhr__;if(e.endTimestamp&&e.xhr.__sentry_xhr_span_id__){var c=n[e.xhr.__sentry_xhr_span_id__];if(c){c.setHttpStatus(a.status_code);c.finish();delete n[e.xhr.__sentry_xhr_span_id__]}return}var u=o.getActiveTransaction();if(u){var c=u.startChild({data:r.__assign(r.__assign({},a.data),{type:"xhr",method:a.method,url:a.url}),description:a.method+" "+a.url,op:"http.client"});e.xhr.__sentry_xhr_span_id__=c.spanId;n[e.xhr.__sentry_xhr_span_id__]=c;if(e.xhr.setRequestHeader){try{e.xhr.setRequestHeader("sentry-trace",c.toTraceparent())}catch(e){}}}}t.xhrCallback=xhrCallback},88906:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(86406);var i=r.getGlobalObject();function instrumentRoutingWithDefaults(e,t,n){if(t===void 0){t=true}if(n===void 0){n=true}if(!i||!i.location){r.logger.warn("Could not initialize routing instrumentation due to invalid location");return}var s=i.location.href;var o;if(t){o=e({name:i.location.pathname,op:"pageload"})}if(n){r.addInstrumentationHandler({callback:function(t){var n=t.to,a=t.from;if(a===undefined&&s&&s.indexOf(n)!==-1){s=undefined;return}if(a!==n){s=undefined;if(o){r.logger.log("[Tracing] Finishing current transaction with op: "+o.op);o.finish()}o=e({name:i.location.pathname,op:"navigation"})}},type:"history"})}}t.instrumentRoutingWithDefaults=instrumentRoutingWithDefaults},88884:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(14682);var i=n(80170);var s=n(46127);var o=n(37805);t.getCLS=function(e,t){var n=i.initMetric("CLS",0);var a;var c=0;var u=[];var entryHandler=function(e){if(e&&!e.hadRecentInput){var t=u[0];var r=u[u.length-1];if(c&&u.length!==0&&e.startTime-r.startTime<1e3&&e.startTime-t.startTime<5e3){c+=e.value;u.push(e)}else{c=e.value;u=[e]}if(c>n.value){n.value=c;n.entries=u;if(a){a()}}}};var l=s.observe("layout-shift",entryHandler);if(l){a=r.bindReporter(e,n,t);o.onHidden((function(){l.takeRecords().map(entryHandler);a(true)}))}}},47045:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(14682);var i=n(36919);var s=n(80170);var o=n(46127);var a=n(37805);t.getFID=function(e,t){var n=i.getVisibilityWatcher();var c=s.initMetric("FID");var u;var entryHandler=function(e){if(u&&e.startTime<n.firstHiddenTime){c.value=e.processingStart-e.startTime;c.entries.push(e);u(true)}};var l=o.observe("first-input",entryHandler);if(l){u=r.bindReporter(e,c,t);a.onHidden((function(){l.takeRecords().map(entryHandler);l.disconnect()}),true)}}},78657:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(14682);var i=n(36919);var s=n(80170);var o=n(46127);var a=n(37805);var c={};t.getLCP=function(e,t){var n=i.getVisibilityWatcher();var u=s.initMetric("LCP");var l;var entryHandler=function(e){var t=e.startTime;if(t<n.firstHiddenTime){u.value=t;u.entries.push(e)}if(l){l()}};var d=o.observe("largest-contentful-paint",entryHandler);if(d){l=r.bindReporter(e,u,t);var stopListening_1=function(){if(!c[u.id]){d.takeRecords().map(entryHandler);d.disconnect();c[u.id]=true;l(true)}};["keydown","click"].forEach((function(e){addEventListener(e,stopListening_1,{once:true,capture:true})}));a.onHidden(stopListening_1,true)}}},14682:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.bindReporter=function(e,t,n){var r;return function(i){if(t.value>=0){if(i||n){t.delta=t.value-(r||0);if(t.delta||r===undefined){r=t.value;e(t)}}}}}},69136:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.generateUniqueID=function(){return"v2-"+Date.now()+"-"+(Math.floor(Math.random()*(9e12-1))+1e12)}},36919:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(86406);var i=n(37805);var s=-1;var initHiddenTime=function(){return r.getGlobalObject().document.visibilityState==="hidden"?0:Infinity};var trackChanges=function(){i.onHidden((function(e){var t=e.timeStamp;s=t}),true)};t.getVisibilityWatcher=function(){if(s<0){s=initHiddenTime();trackChanges()}return{get firstHiddenTime(){return s}}}},80170:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(69136);t.initMetric=function(e,t){return{name:e,value:t!==null&&t!==void 0?t:-1,delta:0,entries:[],id:r.generateUniqueID()}}},46127:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.observe=function(e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){if(e==="first-input"&&!("PerformanceEventTiming"in self)){return}var n=new PerformanceObserver((function(e){return e.getEntries().map(t)}));n.observe({type:e,buffered:true});return n}}catch(e){}return}},37805:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(86406);t.onHidden=function(e,t){var onHiddenOrPageHide=function(n){if(n.type==="pagehide"||r.getGlobalObject().document.visibilityState==="hidden"){e(n);if(t){removeEventListener("visibilitychange",onHiddenOrPageHide,true);removeEventListener("pagehide",onHiddenOrPageHide,true)}}};addEventListener("visibilitychange",onHiddenOrPageHide,true);addEventListener("pagehide",onHiddenOrPageHide,true)}},62059:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(86406);var i=n(32711);var s=n(72058);function registerErrorInstrumentation(){r.addInstrumentationHandler({callback:errorCallback,type:"error"});r.addInstrumentationHandler({callback:errorCallback,type:"unhandledrejection"})}t.registerErrorInstrumentation=registerErrorInstrumentation;function errorCallback(){var e=s.getActiveTransaction();if(e){r.logger.log("[Tracing] Transaction: "+i.SpanStatus.InternalError+" -> Global error occured");e.setStatus(i.SpanStatus.InternalError)}}},21289:(e,t,n)=>{e=n.nmd(e);Object.defineProperty(t,"__esModule",{value:true});var r=n(38314);var i=n(6066);var s=n(28648);var o=n(86406);var a=n(62059);var c=n(79345);var u=n(1730);var l=n(72058);function traceHeaders(){var e=this.getScope();if(e){var t=e.getSpan();if(t){return{"sentry-trace":t.toTraceparent()}}}return{}}function sample(e,t,n){if(!l.hasTracingEnabled(t)){e.sampled=false;return e}if(e.sampled!==undefined){e.setMetadata({transactionSampling:{method:s.TransactionSamplingMethod.Explicit}});return e}var r;if(typeof t.tracesSampler==="function"){r=t.tracesSampler(n);e.setMetadata({transactionSampling:{method:s.TransactionSamplingMethod.Sampler,rate:Number(r)}})}else if(n.parentSampled!==undefined){r=n.parentSampled;e.setMetadata({transactionSampling:{method:s.TransactionSamplingMethod.Inheritance}})}else{r=t.tracesSampleRate;e.setMetadata({transactionSampling:{method:s.TransactionSamplingMethod.Rate,rate:Number(r)}})}if(!isValidSampleRate(r)){o.logger.warn("[Tracing] Discarding transaction because of invalid sample rate.");e.sampled=false;return e}if(!r){o.logger.log("[Tracing] Discarding transaction because "+(typeof t.tracesSampler==="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"));e.sampled=false;return e}e.sampled=Math.random()<r;if(!e.sampled){o.logger.log("[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = "+Number(r)+")");return e}o.logger.log("[Tracing] starting "+e.op+" transaction - "+e.name);return e}function isValidSampleRate(e){if(isNaN(e)||!(typeof e==="number"||typeof e==="boolean")){o.logger.warn("[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got "+JSON.stringify(e)+" of type "+JSON.stringify(typeof e)+".");return false}if(e<0||e>1){o.logger.warn("[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got "+e+".");return false}return true}function _startTransaction(e,t){var n,i;var s=((n=this.getClient())===null||n===void 0?void 0:n.getOptions())||{};var o=new u.Transaction(e,this);o=sample(o,s,r.__assign({parentSampled:e.parentSampled,transactionContext:e},t));if(o.sampled){o.initSpanRecorder((i=s._experiments)===null||i===void 0?void 0:i.maxSpans)}return o}function startIdleTransaction(e,t,n,i,s){var o,a;var u=((o=e.getClient())===null||o===void 0?void 0:o.getOptions())||{};var l=new c.IdleTransaction(t,e,n,i);l=sample(l,u,r.__assign({parentSampled:t.parentSampled,transactionContext:t},s));if(l.sampled){l.initSpanRecorder((a=u._experiments)===null||a===void 0?void 0:a.maxSpans)}return l}t.startIdleTransaction=startIdleTransaction;function _addTracingExtensions(){var e=i.getMainCarrier();if(!e.__SENTRY__){return}e.__SENTRY__.extensions=e.__SENTRY__.extensions||{};if(!e.__SENTRY__.extensions.startTransaction){e.__SENTRY__.extensions.startTransaction=_startTransaction}if(!e.__SENTRY__.extensions.traceHeaders){e.__SENTRY__.extensions.traceHeaders=traceHeaders}}t._addTracingExtensions=_addTracingExtensions;function _autoloadDatabaseIntegrations(){var t=i.getMainCarrier();if(!t.__SENTRY__){return}var n={mongodb:function(){var t=o.dynamicRequire(e,"./integrations/node/mongo");return new t.Mongo},mongoose:function(){var t=o.dynamicRequire(e,"./integrations/node/mongo");return new t.Mongo({mongoose:true})},mysql:function(){var t=o.dynamicRequire(e,"./integrations/node/mysql");return new t.Mysql},pg:function(){var t=o.dynamicRequire(e,"./integrations/node/postgres");return new t.Postgres}};var s=Object.keys(n).filter((function(e){return!!o.loadModule(e)})).map((function(e){try{return n[e]()}catch(e){return undefined}})).filter((function(e){return e}));if(s.length>0){t.__SENTRY__.integrations=r.__spread(t.__SENTRY__.integrations||[],s)}}function addExtensionMethods(){_addTracingExtensions();if(o.isNodeEnv()){_autoloadDatabaseIntegrations()}a.registerErrorInstrumentation()}t.addExtensionMethods=addExtensionMethods},79345:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(38314);var i=n(86406);var s=n(62226);var o=n(32711);var a=n(1730);t.DEFAULT_IDLE_TIMEOUT=1e3;t.HEARTBEAT_INTERVAL=5e3;var c=function(e){r.__extends(IdleTransactionSpanRecorder,e);function IdleTransactionSpanRecorder(t,n,r,i){if(r===void 0){r=""}var s=e.call(this,i)||this;s._pushActivity=t;s._popActivity=n;s.transactionSpanId=r;return s}IdleTransactionSpanRecorder.prototype.add=function(t){var n=this;if(t.spanId!==this.transactionSpanId){t.finish=function(e){t.endTimestamp=typeof e==="number"?e:i.timestampWithMs();n._popActivity(t.spanId)};if(t.endTimestamp===undefined){this._pushActivity(t.spanId)}}e.prototype.add.call(this,t)};return IdleTransactionSpanRecorder}(s.SpanRecorder);t.IdleTransactionSpanRecorder=c;var u=function(e){r.__extends(IdleTransaction,e);function IdleTransaction(n,r,s,o){if(s===void 0){s=t.DEFAULT_IDLE_TIMEOUT}if(o===void 0){o=false}var a=e.call(this,n,r)||this;a._idleHub=r;a._idleTimeout=s;a._onScope=o;a.activities={};a._heartbeatCounter=0;a._finished=false;a._beforeFinishCallbacks=[];if(r&&o){clearActiveTransaction(r);i.logger.log("Setting idle transaction on scope. Span ID: "+a.spanId);r.configureScope((function(e){return e.setSpan(a)}))}a._initTimeout=setTimeout((function(){if(!a._finished){a.finish()}}),a._idleTimeout);return a}IdleTransaction.prototype.finish=function(t){var n,s;var a=this;if(t===void 0){t=i.timestampWithMs()}this._finished=true;this.activities={};if(this.spanRecorder){i.logger.log("[Tracing] finishing IdleTransaction",new Date(t*1e3).toISOString(),this.op);try{for(var c=r.__values(this._beforeFinishCallbacks),u=c.next();!u.done;u=c.next()){var l=u.value;l(this,t)}}catch(e){n={error:e}}finally{try{if(u&&!u.done&&(s=c.return))s.call(c)}finally{if(n)throw n.error}}this.spanRecorder.spans=this.spanRecorder.spans.filter((function(e){if(e.spanId===a.spanId){return true}if(!e.endTimestamp){e.endTimestamp=t;e.setStatus(o.SpanStatus.Cancelled);i.logger.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(e,undefined,2))}var n=e.startTimestamp<t;if(!n){i.logger.log("[Tracing] discarding Span since it happened after Transaction was finished",JSON.stringify(e,undefined,2))}return n}));i.logger.log("[Tracing] flushing IdleTransaction")}else{i.logger.log("[Tracing] No active IdleTransaction")}if(this._onScope){clearActiveTransaction(this._idleHub)}return e.prototype.finish.call(this,t)};IdleTransaction.prototype.registerBeforeFinishCallback=function(e){this._beforeFinishCallbacks.push(e)};IdleTransaction.prototype.initSpanRecorder=function(e){var t=this;if(!this.spanRecorder){var pushActivity=function(e){if(t._finished){return}t._pushActivity(e)};var popActivity=function(e){if(t._finished){return}t._popActivity(e)};this.spanRecorder=new c(pushActivity,popActivity,this.spanId,e);i.logger.log("Starting heartbeat");this._pingHeartbeat()}this.spanRecorder.add(this)};IdleTransaction.prototype._pushActivity=function(e){if(this._initTimeout){clearTimeout(this._initTimeout);this._initTimeout=undefined}i.logger.log("[Tracing] pushActivity: "+e);this.activities[e]=true;i.logger.log("[Tracing] new activities count",Object.keys(this.activities).length)};IdleTransaction.prototype._popActivity=function(e){var t=this;if(this.activities[e]){i.logger.log("[Tracing] popActivity "+e);delete this.activities[e];i.logger.log("[Tracing] new activities count",Object.keys(this.activities).length)}if(Object.keys(this.activities).length===0){var n=this._idleTimeout;var r=i.timestampWithMs()+n/1e3;setTimeout((function(){if(!t._finished){t.finish(r)}}),n)}};IdleTransaction.prototype._beat=function(){if(this._finished){return}var e=Object.keys(this.activities).join("");if(e===this._prevHeartbeatString){this._heartbeatCounter+=1}else{this._heartbeatCounter=1}this._prevHeartbeatString=e;if(this._heartbeatCounter>=3){i.logger.log("[Tracing] Transaction finished because of no change for 3 heart beats");this.setStatus(o.SpanStatus.DeadlineExceeded);this.setTag("heartbeat","failed");this.finish()}else{this._pingHeartbeat()}};IdleTransaction.prototype._pingHeartbeat=function(){var e=this;i.logger.log("pinging Heartbeat -> current counter: "+this._heartbeatCounter);setTimeout((function(){e._beat()}),t.HEARTBEAT_INTERVAL)};return IdleTransaction}(a.Transaction);t.IdleTransaction=u;function clearActiveTransaction(e){if(e){var t=e.getScope();if(t){var n=t.getTransaction();if(n){t.setSpan(undefined)}}}}},91749:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(38314);var i=n(20557);var s=n(21289);t.addExtensionMethods=s.addExtensionMethods;var o=n(4830);var a=r.__assign(r.__assign({},o),{BrowserTracing:i.BrowserTracing});t.Integrations=a;var c=n(62226);t.Span=c.Span;var u=n(1730);t.Transaction=u.Transaction;var l=n(20557);t.registerRequestInstrumentation=l.instrumentOutgoingRequests;t.defaultRequestInstrumentationOptions=l.defaultRequestInstrumentationOptions;var d=n(32711);t.SpanStatus=d.SpanStatus;var f=n(79345);t.IdleTransaction=f.IdleTransaction;var p=n(21289);t.startIdleTransaction=p.startIdleTransaction;s.addExtensionMethods();var h=n(72058);t.extractTraceparentData=h.extractTraceparentData;t.getActiveTransaction=h.getActiveTransaction;t.hasTracingEnabled=h.hasTracingEnabled;t.stripUrlQueryAndFragment=h.stripUrlQueryAndFragment;t.TRACEPARENT_REGEXP=h.TRACEPARENT_REGEXP},4830:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(23543);t.Express=r.Express;var i=n(35427);t.Postgres=i.Postgres;var s=n(85526);t.Mysql=s.Mysql;var o=n(94736);t.Mongo=o.Mongo},23543:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(38314);var i=n(86406);var s=function(){function Express(e){if(e===void 0){e={}}this.name=Express.id;this._router=e.router||e.app;this._methods=(Array.isArray(e.methods)?e.methods:[]).concat("use")}Express.prototype.setupOnce=function(){if(!this._router){i.logger.error("ExpressIntegration is missing an Express instance");return}instrumentMiddlewares(this._router,this._methods)};Express.id="Express";return Express}();t.Express=s;function wrap(e,t){var n=e.length;switch(n){case 2:{return function(n,r){var i=r.__sentry_transaction;if(i){var s=i.startChild({description:e.name,op:"middleware."+t});r.once("finish",(function(){s.finish()}))}return e.call(this,n,r)}}case 3:{return function(n,i,s){var o;var a=i.__sentry_transaction;var c=(o=a)===null||o===void 0?void 0:o.startChild({description:e.name,op:"middleware."+t});e.call(this,n,i,(function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var n;(n=c)===null||n===void 0?void 0:n.finish();s.call.apply(s,r.__spread([this],e))}))}}case 4:{return function(n,i,s,o){var a;var c=s.__sentry_transaction;var u=(a=c)===null||a===void 0?void 0:a.startChild({description:e.name,op:"middleware."+t});e.call(this,n,i,s,(function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var n;(n=u)===null||n===void 0?void 0:n.finish();o.call.apply(o,r.__spread([this],e))}))}}default:{throw new Error("Express middleware takes 2-4 arguments. Got: "+n)}}}function wrapMiddlewareArgs(e,t){return e.map((function(e){if(typeof e==="function"){return wrap(e,t)}if(Array.isArray(e)){return e.map((function(e){if(typeof e==="function"){return wrap(e,t)}return e}))}return e}))}function patchMiddleware(e,t){var n=e[t];e[t]=function(){var e=[];for(var i=0;i<arguments.length;i++){e[i]=arguments[i]}return n.call.apply(n,r.__spread([this],wrapMiddlewareArgs(e,t)))};return e}function instrumentMiddlewares(e,t){if(t===void 0){t=[]}t.forEach((function(t){return patchMiddleware(e,t)}))}},94736:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(38314);var i=n(86406);var s=["aggregate","bulkWrite","countDocuments","createIndex","createIndexes","deleteMany","deleteOne","distinct","drop","dropIndex","dropIndexes","estimatedDocumentCount","find","findOne","findOneAndDelete","findOneAndReplace","findOneAndUpdate","indexes","indexExists","indexInformation","initializeOrderedBulkOp","insertMany","insertOne","isCapped","mapReduce","options","parallelCollectionScan","rename","replaceOne","stats","updateMany","updateOne"];var o={bulkWrite:["operations"],countDocuments:["query"],createIndex:["fieldOrSpec"],createIndexes:["indexSpecs"],deleteMany:["filter"],deleteOne:["filter"],distinct:["key","query"],dropIndex:["indexName"],find:["query"],findOne:["query"],findOneAndDelete:["filter"],findOneAndReplace:["filter","replacement"],findOneAndUpdate:["filter","update"],indexExists:["indexes"],insertMany:["docs"],insertOne:["doc"],mapReduce:["map","reduce"],rename:["newName"],replaceOne:["filter","doc"],updateMany:["filter","update"],updateOne:["filter","update"]};var a=function(){function Mongo(e){if(e===void 0){e={}}this.name=Mongo.id;this._operations=Array.isArray(e.operations)?e.operations:s;this._describeOperations="describeOperations"in e?e.describeOperations:true;this._useMongoose=!!e.useMongoose}Mongo.prototype.setupOnce=function(e,t){var n=this._useMongoose?"mongoose":"mongodb";var r=i.loadModule(n);if(!r){i.logger.error("Mongo Integration was unable to require `"+n+"` package.");return}this._instrumentOperations(r.Collection,this._operations,t)};Mongo.prototype._instrumentOperations=function(e,t,n){var r=this;t.forEach((function(t){return r._patchOperation(e,t,n)}))};Mongo.prototype._patchOperation=function(e,t,n){if(!(t in e.prototype))return;var s=this._getSpanContextFromOperationArguments.bind(this);i.fill(e.prototype,t,(function(e){return function(){var o=[];for(var a=0;a<arguments.length;a++){o[a]=arguments[a]}var c,u,l,d;var f=o[o.length-1];var p=n().getScope();var h=(c=p)===null||c===void 0?void 0:c.getSpan();if(typeof f!=="function"||t==="mapReduce"&&o.length===2){var m=(u=h)===null||u===void 0?void 0:u.startChild(s(this,t,o));var g=e.call.apply(e,r.__spread([this],o));if(i.isThenable(g)){return g.then((function(e){var t;(t=m)===null||t===void 0?void 0:t.finish();return e}))}else{(l=m)===null||l===void 0?void 0:l.finish();return g}}var v=(d=h)===null||d===void 0?void 0:d.startChild(s(this,t,o.slice(0,-1)));return e.call.apply(e,r.__spread([this],o.slice(0,-1),[function(e,t){var n;(n=v)===null||n===void 0?void 0:n.finish();f(e,t)}]))}}))};Mongo.prototype._getSpanContextFromOperationArguments=function(e,t,n){var i={collectionName:e.collectionName,dbName:e.dbName,namespace:e.namespace};var s={op:"db",description:t,data:i};var a=o[t];var c=Array.isArray(this._describeOperations)?this._describeOperations.includes(t):this._describeOperations;if(!a||!c){return s}try{if(t==="mapReduce"){var u=r.__read(n,2),l=u[0],d=u[1];i[a[0]]=typeof l==="string"?l:l.name||"<anonymous>";i[a[1]]=typeof d==="string"?d:d.name||"<anonymous>"}else{for(var f=0;f<a.length;f++){i[a[f]]=JSON.stringify(n[f])}}}catch(e){}return s};Mongo.id="Mongo";return Mongo}();t.Mongo=a},85526:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(86406);var i=function(){function Mysql(){this.name=Mysql.id}Mysql.prototype.setupOnce=function(e,t){var n=r.loadModule("mysql/lib/Connection.js");if(!n){r.logger.error("Mysql Integration was unable to require `mysql` package.");return}r.fill(n,"createQuery",(function(e){return function(n,r,i){var s,o;var a=t().getScope();var c=(s=a)===null||s===void 0?void 0:s.getSpan();var u=(o=c)===null||o===void 0?void 0:o.startChild({description:typeof n==="string"?n:n.sql,op:"db"});if(typeof i==="function"){return e.call(this,n,r,(function(e,t,n){var r;(r=u)===null||r===void 0?void 0:r.finish();i(e,t,n)}))}if(typeof r==="function"){return e.call(this,n,(function(e,t,n){var i;(i=u)===null||i===void 0?void 0:i.finish();r(e,t,n)}))}return e.call(this,n,r,i)}}))};Mysql.id="Mysql";return Mysql}();t.Mysql=i},35427:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(86406);var i=function(){function Postgres(e){if(e===void 0){e={}}this.name=Postgres.id;this._usePgNative=!!e.usePgNative}Postgres.prototype.setupOnce=function(e,t){var n;var i=r.loadModule("pg");if(!i){r.logger.error("Postgres Integration was unable to require `pg` package.");return}if(this._usePgNative&&!((n=i.native)===null||n===void 0?void 0:n.Client)){r.logger.error("Postgres Integration was unable to access 'pg-native' bindings.");return}var s=(this._usePgNative?i.native:i).Client;r.fill(s.prototype,"query",(function(e){return function(n,i,s){var o,a,c;var u=t().getScope();var l=(o=u)===null||o===void 0?void 0:o.getSpan();var d=(a=l)===null||a===void 0?void 0:a.startChild({description:typeof n==="string"?n:n.text,op:"db"});if(typeof s==="function"){return e.call(this,n,i,(function(e,t){var n;(n=d)===null||n===void 0?void 0:n.finish();s(e,t)}))}if(typeof i==="function"){return e.call(this,n,(function(e,t){var n;(n=d)===null||n===void 0?void 0:n.finish();i(e,t)}))}var f=typeof i!=="undefined"?e.call(this,n,i):e.call(this,n);if(r.isThenable(f)){return f.then((function(e){var t;(t=d)===null||t===void 0?void 0:t.finish();return e}))}(c=d)===null||c===void 0?void 0:c.finish();return f}}))};Postgres.id="Postgres";return Postgres}();t.Postgres=i},62226:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(38314);var i=n(86406);var s=n(32711);var o=function(){function SpanRecorder(e){if(e===void 0){e=1e3}this.spans=[];this._maxlen=e}SpanRecorder.prototype.add=function(e){if(this.spans.length>this._maxlen){e.spanRecorder=undefined}else{this.spans.push(e)}};return SpanRecorder}();t.SpanRecorder=o;var a=function(){function Span(e){this.traceId=i.uuid4();this.spanId=i.uuid4().substring(16);this.startTimestamp=i.timestampWithMs();this.tags={};this.data={};if(!e){return this}if(e.traceId){this.traceId=e.traceId}if(e.spanId){this.spanId=e.spanId}if(e.parentSpanId){this.parentSpanId=e.parentSpanId}if("sampled"in e){this.sampled=e.sampled}if(e.op){this.op=e.op}if(e.description){this.description=e.description}if(e.data){this.data=e.data}if(e.tags){this.tags=e.tags}if(e.status){this.status=e.status}if(e.startTimestamp){this.startTimestamp=e.startTimestamp}if(e.endTimestamp){this.endTimestamp=e.endTimestamp}}Span.prototype.child=function(e){return this.startChild(e)};Span.prototype.startChild=function(e){var t=new Span(r.__assign(r.__assign({},e),{parentSpanId:this.spanId,sampled:this.sampled,traceId:this.traceId}));t.spanRecorder=this.spanRecorder;if(t.spanRecorder){t.spanRecorder.add(t)}t.transaction=this.transaction;return t};Span.prototype.setTag=function(e,t){var n;this.tags=r.__assign(r.__assign({},this.tags),(n={},n[e]=t,n));return this};Span.prototype.setData=function(e,t){var n;this.data=r.__assign(r.__assign({},this.data),(n={},n[e]=t,n));return this};Span.prototype.setStatus=function(e){this.status=e;return this};Span.prototype.setHttpStatus=function(e){this.setTag("http.status_code",String(e));var t=s.SpanStatus.fromHttpCode(e);if(t!==s.SpanStatus.UnknownError){this.setStatus(t)}return this};Span.prototype.isSuccess=function(){return this.status===s.SpanStatus.Ok};Span.prototype.finish=function(e){this.endTimestamp=typeof e==="number"?e:i.timestampWithMs()};Span.prototype.toTraceparent=function(){var e="";if(this.sampled!==undefined){e=this.sampled?"-1":"-0"}return this.traceId+"-"+this.spanId+e};Span.prototype.toContext=function(){return i.dropUndefinedKeys({data:this.data,description:this.description,endTimestamp:this.endTimestamp,op:this.op,parentSpanId:this.parentSpanId,sampled:this.sampled,spanId:this.spanId,startTimestamp:this.startTimestamp,status:this.status,tags:this.tags,traceId:this.traceId})};Span.prototype.updateWithContext=function(e){var t,n,r,i,s;this.data=(t=e.data,t!==null&&t!==void 0?t:{});this.description=e.description;this.endTimestamp=e.endTimestamp;this.op=e.op;this.parentSpanId=e.parentSpanId;this.sampled=e.sampled;this.spanId=(n=e.spanId,n!==null&&n!==void 0?n:this.spanId);this.startTimestamp=(r=e.startTimestamp,r!==null&&r!==void 0?r:this.startTimestamp);this.status=e.status;this.tags=(i=e.tags,i!==null&&i!==void 0?i:{});this.traceId=(s=e.traceId,s!==null&&s!==void 0?s:this.traceId);return this};Span.prototype.getTraceContext=function(){return i.dropUndefinedKeys({data:Object.keys(this.data).length>0?this.data:undefined,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:undefined,trace_id:this.traceId})};Span.prototype.toJSON=function(){return i.dropUndefinedKeys({data:Object.keys(this.data).length>0?this.data:undefined,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,start_timestamp:this.startTimestamp,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:undefined,timestamp:this.endTimestamp,trace_id:this.traceId})};return Span}();t.Span=a},32711:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});var n;(function(e){e["Ok"]="ok";e["DeadlineExceeded"]="deadline_exceeded";e["Unauthenticated"]="unauthenticated";e["PermissionDenied"]="permission_denied";e["NotFound"]="not_found";e["ResourceExhausted"]="resource_exhausted";e["InvalidArgument"]="invalid_argument";e["Unimplemented"]="unimplemented";e["Unavailable"]="unavailable";e["InternalError"]="internal_error";e["UnknownError"]="unknown_error";e["Cancelled"]="cancelled";e["AlreadyExists"]="already_exists";e["FailedPrecondition"]="failed_precondition";e["Aborted"]="aborted";e["OutOfRange"]="out_of_range";e["DataLoss"]="data_loss"})(n=t.SpanStatus||(t.SpanStatus={}));(function(e){function fromHttpCode(t){if(t<400){return e.Ok}if(t>=400&&t<500){switch(t){case 401:return e.Unauthenticated;case 403:return e.PermissionDenied;case 404:return e.NotFound;case 409:return e.AlreadyExists;case 413:return e.FailedPrecondition;case 429:return e.ResourceExhausted;default:return e.InvalidArgument}}if(t>=500&&t<600){switch(t){case 501:return e.Unimplemented;case 503:return e.Unavailable;case 504:return e.DeadlineExceeded;default:return e.InternalError}}return e.UnknownError}e.fromHttpCode=fromHttpCode})(n=t.SpanStatus||(t.SpanStatus={}))},1730:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(38314);var i=n(6066);var s=n(28648);var o=n(86406);var a=n(62226);var c=function(e){r.__extends(Transaction,e);function Transaction(t,n){var r=e.call(this,t)||this;r._measurements={};r._hub=i.getCurrentHub();if(o.isInstanceOf(n,i.Hub)){r._hub=n}r.name=t.name||"";r.metadata=t.metadata||{};r._trimEnd=t.trimEnd;r.transaction=r;return r}Transaction.prototype.setName=function(e){this.name=e};Transaction.prototype.initSpanRecorder=function(e){if(e===void 0){e=1e3}if(!this.spanRecorder){this.spanRecorder=new a.SpanRecorder(e)}this.spanRecorder.add(this)};Transaction.prototype.setMeasurements=function(e){this._measurements=r.__assign({},e)};Transaction.prototype.setMetadata=function(e){this.metadata=r.__assign(r.__assign({},this.metadata),e)};Transaction.prototype.finish=function(t){var n=this;var r,i,a,c,u;if(this.endTimestamp!==undefined){return undefined}if(!this.name){o.logger.warn("Transaction has no name, falling back to `<unlabeled transaction>`.");this.name="<unlabeled transaction>"}e.prototype.finish.call(this,t);if(this.sampled!==true){o.logger.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled.");(u=(a=(r=this._hub.getClient())===null||r===void 0?void 0:(i=r).getTransport)===null||a===void 0?void 0:(c=a.call(i)).recordLostEvent)===null||u===void 0?void 0:u.call(c,s.Outcome.SampleRate,"transaction");return undefined}var l=this.spanRecorder?this.spanRecorder.spans.filter((function(e){return e!==n&&e.endTimestamp})):[];if(this._trimEnd&&l.length>0){this.endTimestamp=l.reduce((function(e,t){if(e.endTimestamp&&t.endTimestamp){return e.endTimestamp>t.endTimestamp?e:t}return e})).endTimestamp}var d={contexts:{trace:this.getTraceContext()},spans:l,start_timestamp:this.startTimestamp,tags:this.tags,timestamp:this.endTimestamp,transaction:this.name,type:"transaction",debug_meta:this.metadata};var f=Object.keys(this._measurements).length>0;if(f){o.logger.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,undefined,2));d.measurements=this._measurements}o.logger.log("[Tracing] Finishing "+this.op+" transaction: "+this.name+".");return this._hub.captureEvent(d)};Transaction.prototype.toContext=function(){var t=e.prototype.toContext.call(this);return o.dropUndefinedKeys(r.__assign(r.__assign({},t),{name:this.name,trimEnd:this._trimEnd}))};Transaction.prototype.updateWithContext=function(t){var n;e.prototype.updateWithContext.call(this,t);this.name=(n=t.name,n!==null&&n!==void 0?n:"");this._trimEnd=t.trimEnd;return this};return Transaction}(a.Span);t.Transaction=c},72058:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(6066);t.TRACEPARENT_REGEXP=new RegExp("^[ \\t]*"+"([0-9a-f]{32})?"+"-?([0-9a-f]{16})?"+"-?([01])?"+"[ \\t]*$");function hasTracingEnabled(e){if(e===void 0){e=(t=r.getCurrentHub().getClient())===null||t===void 0?void 0:t.getOptions()}var t;if(!e){return false}return"tracesSampleRate"in e||"tracesSampler"in e}t.hasTracingEnabled=hasTracingEnabled;function extractTraceparentData(e){var n=e.match(t.TRACEPARENT_REGEXP);if(n){var r=void 0;if(n[3]==="1"){r=true}else if(n[3]==="0"){r=false}return{traceId:n[1],parentSampled:r,parentSpanId:n[2]}}return undefined}t.extractTraceparentData=extractTraceparentData;function getActiveTransaction(e){if(e===void 0){e=r.getCurrentHub()}var t,n;return(n=(t=e)===null||t===void 0?void 0:t.getScope())===null||n===void 0?void 0:n.getTransaction()}t.getActiveTransaction=getActiveTransaction;function msToSec(e){return e/1e3}t.msToSec=msToSec;function secToMs(e){return e*1e3}t.secToMs=secToMs;var i=n(86406);t.stripUrlQueryAndFragment=i.stripUrlQueryAndFragment},38314:e=>{
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var t;var n;var r;var i;var s;var o;var a;var c;var u;var l;var d;var f;var p;var h;var m;var g;var v;var y;var b;var _;var S;var w;var T;(function(t){var n=typeof global==="object"?global:typeof self==="object"?self:typeof this==="object"?this:{};if(typeof define==="function"&&define.amd){define("tslib",["exports"],(function(e){t(createExporter(n,createExporter(e)))}))}else if(true&&typeof e.exports==="object"){t(createExporter(n,createExporter(e.exports)))}else{t(createExporter(n))}function createExporter(e,t){if(e!==n){if(typeof Object.create==="function"){Object.defineProperty(e,"__esModule",{value:true})}else{e.__esModule=true}}return function(n,r){return e[n]=t?t(n,r):r}}})((function(e){var k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n]};t=function(e,t){k(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)};n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};r=function(e,t){var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0)n[r]=e[r];if(e!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++){if(t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i]))n[r[i]]=e[r[i]]}return n};i=function(e,t,n,r){var i=arguments.length,s=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)if(o=e[a])s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s;return i>3&&s&&Object.defineProperty(t,n,s),s};s=function(e,t){return function(n,r){t(n,r,e)}};o=function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};a=function(e,t,n,r){function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function fulfilled(e){try{step(r.next(e))}catch(e){i(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){i(e)}}function step(e){e.done?n(e.value):adopt(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())}))};c=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function verb(e){return function(t){return step([e,t])}}function step(o){if(r)throw new TypeError("Generator is already executing.");while(n)try{if(r=1,i&&(s=o[0]&2?i["return"]:o[0]?i["throw"]||((s=i["return"])&&s.call(i),0):i.next)&&!(s=s.call(i,o[1])).done)return s;if(i=0,s)o=[o[0]&2,s.value];switch(o[0]){case 0:case 1:s=o;break;case 4:n.label++;return{value:o[1],done:false};case 5:n.label++;i=o[1];o=[0];continue;case 7:o=n.ops.pop();n.trys.pop();continue;default:if(!(s=n.trys,s=s.length>0&&s[s.length-1])&&(o[0]===6||o[0]===2)){n=0;continue}if(o[0]===3&&(!s||o[1]>s[0]&&o[1]<s[3])){n.label=o[1];break}if(o[0]===6&&n.label<s[1]){n.label=s[1];s=o;break}if(s&&n.label<s[2]){n.label=s[2];n.ops.push(o);break}if(s[2])n.ops.pop();n.trys.pop();continue}o=t.call(e,n)}catch(e){o=[6,e];i=0}finally{r=s=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}};T=function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]};u=function(e,t){for(var n in e)if(n!=="default"&&!t.hasOwnProperty(n))t[n]=e[n]};l=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&r>=e.length)e=void 0;return{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};d=function(e,t){var n=typeof Symbol==="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,s=[],o;try{while((t===void 0||t-- >0)&&!(i=r.next()).done)s.push(i.value)}catch(e){o={error:e}}finally{try{if(i&&!i.done&&(n=r["return"]))n.call(r)}finally{if(o)throw o.error}}return s};f=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(d(arguments[t]));return e};p=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r};h=function(e){return this instanceof h?(this.v=e,this):new h(e)};m=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i;function verb(e){if(r[e])i[e]=function(t){return new Promise((function(n,r){s.push([e,t,n,r])>1||resume(e,t)}))}}function resume(e,t){try{step(r[e](t))}catch(e){settle(s[0][3],e)}}function step(e){e.value instanceof h?Promise.resolve(e.value.v).then(fulfill,reject):settle(s[0][2],e)}function fulfill(e){resume("next",e)}function reject(e){resume("throw",e)}function settle(e,t){if(e(t),s.shift(),s.length)resume(s[0][0],s[0][1])}};g=function(e){var t,n;return t={},verb("next"),verb("throw",(function(e){throw e})),verb("return"),t[Symbol.iterator]=function(){return this},t;function verb(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:h(e[r](t)),done:r==="return"}:i?i(t):t}:i}};v=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof l==="function"?l(e):e[Symbol.iterator](),n={},verb("next"),verb("throw"),verb("return"),n[Symbol.asyncIterator]=function(){return this},n);function verb(t){n[t]=e[t]&&function(n){return new Promise((function(r,i){n=e[t](n),settle(r,i,n.done,n.value)}))}}function settle(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}};y=function(e,t){if(Object.defineProperty){Object.defineProperty(e,"raw",{value:t})}else{e.raw=t}return e};b=function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(Object.hasOwnProperty.call(e,n))t[n]=e[n];t["default"]=e;return t};_=function(e){return e&&e.__esModule?e:{default:e}};S=function(e,t){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return t.get(e)};w=function(e,t,n){if(!t.has(e)){throw new TypeError("attempted to set private field on non-instance")}t.set(e,n);return n};e("__extends",t);e("__assign",n);e("__rest",r);e("__decorate",i);e("__param",s);e("__metadata",o);e("__awaiter",a);e("__generator",c);e("__exportStar",u);e("__createBinding",T);e("__values",l);e("__read",d);e("__spread",f);e("__spreadArrays",p);e("__await",h);e("__asyncGenerator",m);e("__asyncDelegator",g);e("__asyncValues",v);e("__makeTemplateObject",y);e("__importStar",b);e("__importDefault",_);e("__classPrivateFieldGet",S);e("__classPrivateFieldSet",w)}))},28648:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(70879);t.LogLevel=r.LogLevel;var i=n(7925);t.SessionStatus=i.SessionStatus;t.RequestSessionStatus=i.RequestSessionStatus;var s=n(88498);t.Severity=s.Severity;var o=n(40296);t.Status=o.Status;var a=n(32625);t.TransactionSamplingMethod=a.TransactionSamplingMethod;var c=n(16528);t.Outcome=c.Outcome},70879:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});var n;(function(e){e[e["None"]=0]="None";e[e["Error"]=1]="Error";e[e["Debug"]=2]="Debug";e[e["Verbose"]=3]="Verbose"})(n=t.LogLevel||(t.LogLevel={}))},7925:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});var n;(function(e){e["Ok"]="ok";e["Exited"]="exited";e["Crashed"]="crashed";e["Abnormal"]="abnormal"})(n=t.SessionStatus||(t.SessionStatus={}));var r;(function(e){e["Ok"]="ok";e["Errored"]="errored";e["Crashed"]="crashed"})(r=t.RequestSessionStatus||(t.RequestSessionStatus={}))},88498:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});var n;(function(e){e["Fatal"]="fatal";e["Error"]="error";e["Warning"]="warning";e["Log"]="log";e["Info"]="info";e["Debug"]="debug";e["Critical"]="critical"})(n=t.Severity||(t.Severity={}));(function(e){function fromString(t){switch(t){case"debug":return e.Debug;case"info":return e.Info;case"warn":case"warning":return e.Warning;case"error":return e.Error;case"fatal":return e.Fatal;case"critical":return e.Critical;case"log":default:return e.Log}}e.fromString=fromString})(n=t.Severity||(t.Severity={}))},40296:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});var n;(function(e){e["Unknown"]="unknown";e["Skipped"]="skipped";e["Success"]="success";e["RateLimit"]="rate_limit";e["Invalid"]="invalid";e["Failed"]="failed"})(n=t.Status||(t.Status={}));(function(e){function fromHttpCode(t){if(t>=200&&t<300){return e.Success}if(t===429){return e.RateLimit}if(t>=400&&t<500){return e.Invalid}if(t>=500){return e.Failed}return e.Unknown}e.fromHttpCode=fromHttpCode})(n=t.Status||(t.Status={}))},32625:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});var n;(function(e){e["Explicit"]="explicitly_set";e["Sampler"]="client_sampler";e["Rate"]="client_rate";e["Inheritance"]="inheritance"})(n=t.TransactionSamplingMethod||(t.TransactionSamplingMethod={}))},16528:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});var n;(function(e){e["BeforeSend"]="before_send";e["EventProcessor"]="event_processor";e["NetworkError"]="network_error";e["QueueOverflow"]="queue_overflow";e["RateLimitBackoff"]="ratelimit_backoff";e["SampleRate"]="sample_rate"})(n=t.Outcome||(t.Outcome={}))},61452:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});function forget(e){void e.then(null,(function(e){console.error(e)}))}t.forget=forget},16591:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(11874);var i=n(55870);function htmlTreeAsString(e,t){try{var n=e;var r=5;var i=80;var s=[];var o=0;var a=0;var c=" > ";var u=c.length;var l=void 0;while(n&&o++<r){l=_htmlElementAsString(n,t);if(l==="html"||o>1&&a+s.length*u+l.length>=i){break}s.push(l);a+=l.length;n=n.parentNode}return s.reverse().join(c)}catch(e){return"<unknown>"}}t.htmlTreeAsString=htmlTreeAsString;function _htmlElementAsString(e,t){var n,r;var s=e;var o=[];var a;var c;var u;var l;var d;if(!s||!s.tagName){return""}o.push(s.tagName.toLowerCase());var f=((n=t)===null||n===void 0?void 0:n.length)?t.filter((function(e){return s.getAttribute(e)})).map((function(e){return[e,s.getAttribute(e)]})):null;if((r=f)===null||r===void 0?void 0:r.length){f.forEach((function(e){o.push("["+e[0]+'="'+e[1]+'"]')}))}else{if(s.id){o.push("#"+s.id)}a=s.className;if(a&&i.isString(a)){c=a.split(/\s+/);for(d=0;d<c.length;d++){o.push("."+c[d])}}}var p=["type","name","title","alt"];for(d=0;d<p.length;d++){u=p[d];l=s.getAttribute(u);if(l){o.push("["+u+'="'+l+'"]')}}return o.join("")}function getLocationHref(){var e=r.getGlobalObject();try{return e.document.location.href}catch(e){return""}}t.getLocationHref=getLocationHref},44878:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(69958);var i=n(69327);var s=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/;var o="Invalid Dsn";var a=function(){function Dsn(e){if(typeof e==="string"){this._fromString(e)}else{this._fromComponents(e)}this._validate()}Dsn.prototype.toString=function(e){if(e===void 0){e=false}var t=this,n=t.host,r=t.path,i=t.pass,s=t.port,o=t.projectId,a=t.protocol,c=t.publicKey;return a+"://"+c+(e&&i?":"+i:"")+("@"+n+(s?":"+s:"")+"/"+(r?r+"/":r)+o)};Dsn.prototype._fromString=function(e){var t=s.exec(e);if(!t){throw new i.SentryError(o)}var n=r.__read(t.slice(1),6),a=n[0],c=n[1],u=n[2],l=u===void 0?"":u,d=n[3],f=n[4],p=f===void 0?"":f,h=n[5];var m="";var g=h;var v=g.split("/");if(v.length>1){m=v.slice(0,-1).join("/");g=v.pop()}if(g){var y=g.match(/^\d+/);if(y){g=y[0]}}this._fromComponents({host:d,pass:l,path:m,projectId:g,port:p,protocol:a,publicKey:c})};Dsn.prototype._fromComponents=function(e){if("user"in e&&!("publicKey"in e)){e.publicKey=e.user}this.user=e.publicKey||"";this.protocol=e.protocol;this.publicKey=e.publicKey||"";this.pass=e.pass||"";this.host=e.host;this.port=e.port||"";this.path=e.path||"";this.projectId=e.projectId};Dsn.prototype._validate=function(){var e=this;["protocol","publicKey","host","projectId"].forEach((function(t){if(!e[t]){throw new i.SentryError(o+": "+t+" missing")}}));if(!this.projectId.match(/^\d+$/)){throw new i.SentryError(o+": Invalid projectId "+this.projectId)}if(this.protocol!=="http"&&this.protocol!=="https"){throw new i.SentryError(o+": Invalid protocol "+this.protocol)}if(this.port&&isNaN(parseInt(this.port,10))){throw new i.SentryError(o+": Invalid port "+this.port)}};return Dsn}();t.Dsn=a},69327:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(69958);var i=n(76752);var s=function(e){r.__extends(SentryError,e);function SentryError(t){var n=this.constructor;var r=e.call(this,t)||this;r.message=t;r.name=n.prototype.constructor.name;i.setPrototypeOf(r,n.prototype);return r}return SentryError}(Error);t.SentryError=s},11874:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(8774);var i={};function getGlobalObject(){return r.isNodeEnv()?global:typeof window!=="undefined"?window:typeof self!=="undefined"?self:i}t.getGlobalObject=getGlobalObject},86406:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(69958);r.__exportStar(n(61452),t);r.__exportStar(n(16591),t);r.__exportStar(n(44878),t);r.__exportStar(n(69327),t);r.__exportStar(n(11874),t);r.__exportStar(n(87810),t);r.__exportStar(n(55870),t);r.__exportStar(n(25497),t);r.__exportStar(n(71333),t);r.__exportStar(n(63007),t);r.__exportStar(n(8774),t);r.__exportStar(n(4091),t);r.__exportStar(n(24380),t);r.__exportStar(n(54788),t);r.__exportStar(n(62403),t);r.__exportStar(n(18013),t);r.__exportStar(n(37747),t);r.__exportStar(n(25764),t);r.__exportStar(n(51310),t)},87810:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(69958);var i=n(11874);var s=n(55870);var o=n(25497);var a=n(4091);var c=n(62403);var u=n(37747);var l=i.getGlobalObject();var d={};var f={};function instrument(e){if(f[e]){return}f[e]=true;switch(e){case"console":instrumentConsole();break;case"dom":instrumentDOM();break;case"xhr":instrumentXHR();break;case"fetch":instrumentFetch();break;case"history":instrumentHistory();break;case"error":instrumentError();break;case"unhandledrejection":instrumentUnhandledRejection();break;default:o.logger.warn("unknown instrumentation type:",e)}}function addInstrumentationHandler(e){if(!e||typeof e.type!=="string"||typeof e.callback!=="function"){return}d[e.type]=d[e.type]||[];d[e.type].push(e.callback);instrument(e.type)}t.addInstrumentationHandler=addInstrumentationHandler;function triggerHandlers(e,t){var n,i;if(!e||!d[e]){return}try{for(var s=r.__values(d[e]||[]),a=s.next();!a.done;a=s.next()){var u=a.value;try{u(t)}catch(t){o.logger.error("Error while triggering instrumentation handler.\nType: "+e+"\nName: "+c.getFunctionName(u)+"\nError: "+t)}}}catch(e){n={error:e}}finally{try{if(a&&!a.done&&(i=s.return))i.call(s)}finally{if(n)throw n.error}}}function instrumentConsole(){if(!("console"in l)){return}["debug","info","warn","error","log","assert"].forEach((function(e){if(!(e in l.console)){return}a.fill(l.console,e,(function(t){return function(){var n=[];for(var r=0;r<arguments.length;r++){n[r]=arguments[r]}triggerHandlers("console",{args:n,level:e});if(t){Function.prototype.apply.call(t,l.console,n)}}}))}))}function instrumentFetch(){if(!u.supportsNativeFetch()){return}a.fill(l,"fetch",(function(e){return function(){var t=[];for(var n=0;n<arguments.length;n++){t[n]=arguments[n]}var i={args:t,fetchData:{method:getFetchMethod(t),url:getFetchUrl(t)},startTimestamp:Date.now()};triggerHandlers("fetch",r.__assign({},i));return e.apply(l,t).then((function(e){triggerHandlers("fetch",r.__assign(r.__assign({},i),{endTimestamp:Date.now(),response:e}));return e}),(function(e){triggerHandlers("fetch",r.__assign(r.__assign({},i),{endTimestamp:Date.now(),error:e}));throw e}))}}))}function getFetchMethod(e){if(e===void 0){e=[]}if("Request"in l&&s.isInstanceOf(e[0],Request)&&e[0].method){return String(e[0].method).toUpperCase()}if(e[1]&&e[1].method){return String(e[1].method).toUpperCase()}return"GET"}function getFetchUrl(e){if(e===void 0){e=[]}if(typeof e[0]==="string"){return e[0]}if("Request"in l&&s.isInstanceOf(e[0],Request)){return e[0].url}return String(e[0])}function instrumentXHR(){if(!("XMLHttpRequest"in l)){return}var e=[];var t=[];var n=XMLHttpRequest.prototype;a.fill(n,"open",(function(n){return function(){var r=[];for(var i=0;i<arguments.length;i++){r[i]=arguments[i]}var o=this;var c=r[1];o.__sentry_xhr__={method:s.isString(r[0])?r[0].toUpperCase():r[0],url:r[1]};if(s.isString(c)&&o.__sentry_xhr__.method==="POST"&&c.match(/sentry_key/)){o.__sentry_own_request__=true}var onreadystatechangeHandler=function(){if(o.readyState===4){try{if(o.__sentry_xhr__){o.__sentry_xhr__.status_code=o.status}}catch(e){}try{var n=e.indexOf(o);if(n!==-1){e.splice(n);var i=t.splice(n)[0];if(o.__sentry_xhr__&&i[0]!==undefined){o.__sentry_xhr__.body=i[0]}}}catch(e){}triggerHandlers("xhr",{args:r,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:o})}};if("onreadystatechange"in o&&typeof o.onreadystatechange==="function"){a.fill(o,"onreadystatechange",(function(e){return function(){var t=[];for(var n=0;n<arguments.length;n++){t[n]=arguments[n]}onreadystatechangeHandler();return e.apply(o,t)}}))}else{o.addEventListener("readystatechange",onreadystatechangeHandler)}return n.apply(o,r)}}));a.fill(n,"send",(function(n){return function(){var r=[];for(var i=0;i<arguments.length;i++){r[i]=arguments[i]}e.push(this);t.push(r);triggerHandlers("xhr",{args:r,startTimestamp:Date.now(),xhr:this});return n.apply(this,r)}}))}var p;function instrumentHistory(){if(!u.supportsHistory()){return}var e=l.onpopstate;l.onpopstate=function(){var t=[];for(var n=0;n<arguments.length;n++){t[n]=arguments[n]}var r=l.location.href;var i=p;p=r;triggerHandlers("history",{from:i,to:r});if(e){try{return e.apply(this,t)}catch(e){}}};function historyReplacementFunction(e){return function(){var t=[];for(var n=0;n<arguments.length;n++){t[n]=arguments[n]}var r=t.length>2?t[2]:undefined;if(r){var i=p;var s=String(r);p=s;triggerHandlers("history",{from:i,to:s})}return e.apply(this,t)}}a.fill(l.history,"pushState",historyReplacementFunction);a.fill(l.history,"replaceState",historyReplacementFunction)}var h=1e3;var m;var g;function shouldShortcircuitPreviousDebounce(e,t){if(!e){return true}if(e.type!==t.type){return true}try{if(e.target!==t.target){return true}}catch(e){}return false}function shouldSkipDOMEvent(e){if(e.type!=="keypress"){return false}try{var t=e.target;if(!t||!t.tagName){return true}if(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable){return false}}catch(e){}return true}function makeDOMEventHandler(e,t){if(t===void 0){t=false}return function(n){if(!n||g===n){return}if(shouldSkipDOMEvent(n)){return}var r=n.type==="keypress"?"input":n.type;if(m===undefined){e({event:n,name:r,global:t});g=n}else if(shouldShortcircuitPreviousDebounce(g,n)){e({event:n,name:r,global:t});g=n}clearTimeout(m);m=l.setTimeout((function(){m=undefined}),h)}}function instrumentDOM(){if(!("document"in l)){return}var e=triggerHandlers.bind(null,"dom");var t=makeDOMEventHandler(e,true);l.document.addEventListener("click",t,false);l.document.addEventListener("keypress",t,false);["EventTarget","Node"].forEach((function(t){var n=l[t]&&l[t].prototype;if(!n||!n.hasOwnProperty||!n.hasOwnProperty("addEventListener")){return}a.fill(n,"addEventListener",(function(t){return function(n,r,i){if(n==="click"||n=="keypress"){try{var s=this;var o=s.__sentry_instrumentation_handlers__=s.__sentry_instrumentation_handlers__||{};var a=o[n]=o[n]||{refCount:0};if(!a.handler){var c=makeDOMEventHandler(e);a.handler=c;t.call(this,n,c,i)}a.refCount+=1}catch(e){}}return t.call(this,n,r,i)}}));a.fill(n,"removeEventListener",(function(e){return function(t,n,r){if(t==="click"||t=="keypress"){try{var i=this;var s=i.__sentry_instrumentation_handlers__||{};var o=s[t];if(o){o.refCount-=1;if(o.refCount<=0){e.call(this,t,o.handler,r);o.handler=undefined;delete s[t]}if(Object.keys(s).length===0){delete i.__sentry_instrumentation_handlers__}}}catch(e){}}return e.call(this,t,n,r)}}))}))}var v=null;function instrumentError(){v=l.onerror;l.onerror=function(e,t,n,r,i){triggerHandlers("error",{column:r,error:i,line:n,msg:e,url:t});if(v){return v.apply(this,arguments)}return false}}var y=null;function instrumentUnhandledRejection(){y=l.onunhandledrejection;l.onunhandledrejection=function(e){triggerHandlers("unhandledrejection",e);if(y){return y.apply(this,arguments)}return true}}},55870:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});function isError(e){switch(Object.prototype.toString.call(e)){case"[object Error]":return true;case"[object Exception]":return true;case"[object DOMException]":return true;default:return isInstanceOf(e,Error)}}t.isError=isError;function isErrorEvent(e){return Object.prototype.toString.call(e)==="[object ErrorEvent]"}t.isErrorEvent=isErrorEvent;function isDOMError(e){return Object.prototype.toString.call(e)==="[object DOMError]"}t.isDOMError=isDOMError;function isDOMException(e){return Object.prototype.toString.call(e)==="[object DOMException]"}t.isDOMException=isDOMException;function isString(e){return Object.prototype.toString.call(e)==="[object String]"}t.isString=isString;function isPrimitive(e){return e===null||typeof e!=="object"&&typeof e!=="function"}t.isPrimitive=isPrimitive;function isPlainObject(e){return Object.prototype.toString.call(e)==="[object Object]"}t.isPlainObject=isPlainObject;function isEvent(e){return typeof Event!=="undefined"&&isInstanceOf(e,Event)}t.isEvent=isEvent;function isElement(e){return typeof Element!=="undefined"&&isInstanceOf(e,Element)}t.isElement=isElement;function isRegExp(e){return Object.prototype.toString.call(e)==="[object RegExp]"}t.isRegExp=isRegExp;function isThenable(e){return Boolean(e&&e.then&&typeof e.then==="function")}t.isThenable=isThenable;function isSyntheticEvent(e){return isPlainObject(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}t.isSyntheticEvent=isSyntheticEvent;function isInstanceOf(e,t){try{return e instanceof t}catch(e){return false}}t.isInstanceOf=isInstanceOf},25497:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(11874);var i=r.getGlobalObject();var s="Sentry Logger ";function consoleSandbox(e){var t=r.getGlobalObject();var n=["debug","info","warn","error","log","assert"];if(!("console"in t)){return e()}var i=t.console;var s={};n.forEach((function(e){if(e in t.console&&i[e].__sentry_original__){s[e]=i[e];i[e]=i[e].__sentry_original__}}));var o=e();Object.keys(s).forEach((function(e){i[e]=s[e]}));return o}t.consoleSandbox=consoleSandbox;var o=function(){function Logger(){this._enabled=false}Logger.prototype.disable=function(){this._enabled=false};Logger.prototype.enable=function(){this._enabled=true};Logger.prototype.log=function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}if(!this._enabled){return}consoleSandbox((function(){i.console.log(s+"[Log]: "+e.join(" "))}))};Logger.prototype.warn=function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}if(!this._enabled){return}consoleSandbox((function(){i.console.warn(s+"[Warn]: "+e.join(" "))}))};Logger.prototype.error=function(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}if(!this._enabled){return}consoleSandbox((function(){i.console.error(s+"[Error]: "+e.join(" "))}))};return Logger}();i.__SENTRY__=i.__SENTRY__||{};var a=i.__SENTRY__.logger||(i.__SENTRY__.logger=new o);t.logger=a},71333:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});var n=function(){function Memo(){this._hasWeakSet=typeof WeakSet==="function";this._inner=this._hasWeakSet?new WeakSet:[]}Memo.prototype.memoize=function(e){if(this._hasWeakSet){if(this._inner.has(e)){return true}this._inner.add(e);return false}for(var t=0;t<this._inner.length;t++){var n=this._inner[t];if(n===e){return true}}this._inner.push(e);return false};Memo.prototype.unmemoize=function(e){if(this._hasWeakSet){this._inner.delete(e)}else{for(var t=0;t<this._inner.length;t++){if(this._inner[t]===e){this._inner.splice(t,1);break}}}};return Memo}();t.Memo=n},63007:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(69958);var i=n(11874);var s=n(18013);function uuid4(){var e=i.getGlobalObject();var t=e.crypto||e.msCrypto;if(!(t===void 0)&&t.getRandomValues){var n=new Uint16Array(8);t.getRandomValues(n);n[3]=n[3]&4095|16384;n[4]=n[4]&16383|32768;var pad=function(e){var t=e.toString(16);while(t.length<4){t="0"+t}return t};return pad(n[0])+pad(n[1])+pad(n[2])+pad(n[3])+pad(n[4])+pad(n[5])+pad(n[6])+pad(n[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=Math.random()*16|0;var n=e==="x"?t:t&3|8;return n.toString(16)}))}t.uuid4=uuid4;function parseUrl(e){if(!e){return{}}var t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t){return{}}var n=t[6]||"";var r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],relative:t[5]+n+r}}t.parseUrl=parseUrl;function getEventDescription(e){if(e.message){return e.message}if(e.exception&&e.exception.values&&e.exception.values[0]){var t=e.exception.values[0];if(t.type&&t.value){return t.type+": "+t.value}return t.type||t.value||e.event_id||"<unknown>"}return e.event_id||"<unknown>"}t.getEventDescription=getEventDescription;function addExceptionTypeValue(e,t,n){e.exception=e.exception||{};e.exception.values=e.exception.values||[];e.exception.values[0]=e.exception.values[0]||{};e.exception.values[0].value=e.exception.values[0].value||t||"";e.exception.values[0].type=e.exception.values[0].type||n||"Error"}t.addExceptionTypeValue=addExceptionTypeValue;function addExceptionMechanism(e,t){var n;if(!e.exception||!e.exception.values){return}var i=e.exception.values[0];var s={type:"generic",handled:true};var o=i.mechanism;i.mechanism=r.__assign(r.__assign(r.__assign({},s),o),t);if(t&&"data"in t){var a=r.__assign(r.__assign({},(n=o)===null||n===void 0?void 0:n.data),t.data);i.mechanism.data=a}}t.addExceptionMechanism=addExceptionMechanism;var o=/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/;function parseSemver(e){var t=e.match(o)||[];var n=parseInt(t[1],10);var r=parseInt(t[2],10);var i=parseInt(t[3],10);return{buildmetadata:t[5],major:isNaN(n)?undefined:n,minor:isNaN(r)?undefined:r,patch:isNaN(i)?undefined:i,prerelease:t[4]}}t.parseSemver=parseSemver;var a=60*1e3;function parseRetryAfterHeader(e,t){if(!t){return a}var n=parseInt(""+t,10);if(!isNaN(n)){return n*1e3}var r=Date.parse(""+t);if(!isNaN(r)){return r-e}return a}t.parseRetryAfterHeader=parseRetryAfterHeader;function addContextToFrame(e,t,n){if(n===void 0){n=5}var r=t.lineno||0;var i=e.length;var o=Math.max(Math.min(i,r-1),0);t.pre_context=e.slice(Math.max(0,o-n),o).map((function(e){return s.snipLine(e,0)}));t.context_line=s.snipLine(e[Math.min(i-1,o)],t.colno||0);t.post_context=e.slice(Math.min(o+1,i),o+1+n).map((function(e){return s.snipLine(e,0)}))}t.addContextToFrame=addContextToFrame;function stripUrlQueryAndFragment(e){return e.split(/[\?#]/,1)[0]}t.stripUrlQueryAndFragment=stripUrlQueryAndFragment;function checkOrSetAlreadyCaught(e){var t;if((t=e)===null||t===void 0?void 0:t.__sentry_captured__){return true}try{Object.defineProperty(e,"__sentry_captured__",{value:true})}catch(e){}return false}t.checkOrSetAlreadyCaught=checkOrSetAlreadyCaught},8774:(e,t,n)=>{e=n.nmd(e);Object.defineProperty(t,"__esModule",{value:true});function isNodeEnv(){return Object.prototype.toString.call(typeof process!=="undefined"?process:0)==="[object process]"}t.isNodeEnv=isNodeEnv;function dynamicRequire(e,t){return e.require(t)}t.dynamicRequire=dynamicRequire;function loadModule(t){var n;try{n=dynamicRequire(e,t)}catch(e){}try{var r=dynamicRequire(e,"process").cwd;n=dynamicRequire(e,r()+"/node_modules/"+t)}catch(e){}return n}t.loadModule=loadModule},4091:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(69958);var i=n(16591);var s=n(55870);var o=n(71333);var a=n(62403);var c=n(18013);function fill(e,t,n){if(!(t in e)){return}var r=e[t];var i=n(r);if(typeof i==="function"){try{i.prototype=i.prototype||{};Object.defineProperties(i,{__sentry_original__:{enumerable:false,value:r}})}catch(e){}}e[t]=i}t.fill=fill;function urlEncode(e){return Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&")}t.urlEncode=urlEncode;function getWalkSource(e){if(s.isError(e)){var t=e;var n={message:t.message,name:t.name,stack:t.stack};for(var r in t){if(Object.prototype.hasOwnProperty.call(t,r)){n[r]=t[r]}}return n}if(s.isEvent(e)){var o=e;var a={};a.type=o.type;try{a.target=s.isElement(o.target)?i.htmlTreeAsString(o.target):Object.prototype.toString.call(o.target)}catch(e){a.target="<unknown>"}try{a.currentTarget=s.isElement(o.currentTarget)?i.htmlTreeAsString(o.currentTarget):Object.prototype.toString.call(o.currentTarget)}catch(e){a.currentTarget="<unknown>"}if(typeof CustomEvent!=="undefined"&&s.isInstanceOf(e,CustomEvent)){a.detail=o.detail}for(var c in o){if(Object.prototype.hasOwnProperty.call(o,c)){a[c]=o[c]}}return a}return e}function utf8Length(e){return~-encodeURI(e).split(/%..|./).length}function jsonSize(e){return utf8Length(JSON.stringify(e))}function normalizeToSize(e,t,n){if(t===void 0){t=3}if(n===void 0){n=100*1024}var r=normalize(e,t);if(jsonSize(r)>n){return normalizeToSize(e,t-1,n)}return r}t.normalizeToSize=normalizeToSize;function serializeValue(e){var t=Object.prototype.toString.call(e);if(typeof e==="string"){return e}if(t==="[object Object]"){return"[Object]"}if(t==="[object Array]"){return"[Array]"}var n=normalizeValue(e);return s.isPrimitive(n)?n:t}function normalizeValue(e,t){if(t==="domain"&&e&&typeof e==="object"&&e._events){return"[Domain]"}if(t==="domainEmitter"){return"[DomainEmitter]"}if(typeof global!=="undefined"&&e===global){return"[Global]"}if(typeof window!=="undefined"&&e===window){return"[Window]"}if(typeof document!=="undefined"&&e===document){return"[Document]"}if(s.isSyntheticEvent(e)){return"[SyntheticEvent]"}if(typeof e==="number"&&e!==e){return"[NaN]"}if(e===void 0){return"[undefined]"}if(typeof e==="function"){return"[Function: "+a.getFunctionName(e)+"]"}if(typeof e==="symbol"){return"["+String(e)+"]"}if(typeof e==="bigint"){return"[BigInt: "+String(e)+"]"}return e}function walk(e,t,n,r){if(n===void 0){n=+Infinity}if(r===void 0){r=new o.Memo}if(n===0){return serializeValue(t)}if(t!==null&&t!==undefined&&typeof t.toJSON==="function"){return t.toJSON()}var i=normalizeValue(t,e);if(s.isPrimitive(i)){return i}var a=getWalkSource(t);var c=Array.isArray(t)?[]:{};if(r.memoize(t)){return"[Circular ~]"}for(var u in a){if(!Object.prototype.hasOwnProperty.call(a,u)){continue}c[u]=walk(u,a[u],n-1,r)}r.unmemoize(t);return c}t.walk=walk;function normalize(e,t){try{return JSON.parse(JSON.stringify(e,(function(e,n){return walk(e,n,t)})))}catch(e){return"**non-serializable**"}}t.normalize=normalize;function extractExceptionKeysForMessage(e,t){if(t===void 0){t=40}var n=Object.keys(getWalkSource(e));n.sort();if(!n.length){return"[object has no keys]"}if(n[0].length>=t){return c.truncate(n[0],t)}for(var r=n.length;r>0;r--){var i=n.slice(0,r).join(", ");if(i.length>t){continue}if(r===n.length){return i}return c.truncate(i,t)}return""}t.extractExceptionKeysForMessage=extractExceptionKeysForMessage;function dropUndefinedKeys(e){var t,n;if(s.isPlainObject(e)){var i=e;var o={};try{for(var a=r.__values(Object.keys(i)),c=a.next();!c.done;c=a.next()){var u=c.value;if(typeof i[u]!=="undefined"){o[u]=dropUndefinedKeys(i[u])}}}catch(e){t={error:e}}finally{try{if(c&&!c.done&&(n=a.return))n.call(a)}finally{if(t)throw t.error}}return o}if(Array.isArray(e)){return e.map(dropUndefinedKeys)}return e}t.dropUndefinedKeys=dropUndefinedKeys;function objectify(e){var t;switch(true){case e===undefined||e===null:t=new String(e);break;case typeof e==="symbol"||typeof e==="bigint":t=Object(e);break;case s.isPrimitive(e):t=new e.constructor(e);break;default:t=e;break}return t}t.objectify=objectify},24380:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});function normalizeArray(e,t){var n=0;for(var r=e.length-1;r>=0;r--){var i=e[r];if(i==="."){e.splice(r,1)}else if(i===".."){e.splice(r,1);n++}else if(n){e.splice(r,1);n--}}if(t){for(;n--;n){e.unshift("..")}}return e}var n=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^/]+?|)(\.[^./]*|))(?:[/]*)$/;function splitPath(e){var t=n.exec(e);return t?t.slice(1):[]}function resolve(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var n="";var r=false;for(var i=e.length-1;i>=-1&&!r;i--){var s=i>=0?e[i]:"/";if(!s){continue}n=s+"/"+n;r=s.charAt(0)==="/"}n=normalizeArray(n.split("/").filter((function(e){return!!e})),!r).join("/");return(r?"/":"")+n||"."}t.resolve=resolve;function trim(e){var t=0;for(;t<e.length;t++){if(e[t]!==""){break}}var n=e.length-1;for(;n>=0;n--){if(e[n]!==""){break}}if(t>n){return[]}return e.slice(t,n-t+1)}function relative(e,t){e=resolve(e).substr(1);t=resolve(t).substr(1);var n=trim(e.split("/"));var r=trim(t.split("/"));var i=Math.min(n.length,r.length);var s=i;for(var o=0;o<i;o++){if(n[o]!==r[o]){s=o;break}}var a=[];for(var o=s;o<n.length;o++){a.push("..")}a=a.concat(r.slice(s));return a.join("/")}t.relative=relative;function normalizePath(e){var t=isAbsolute(e);var n=e.substr(-1)==="/";var r=normalizeArray(e.split("/").filter((function(e){return!!e})),!t).join("/");if(!r&&!t){r="."}if(r&&n){r+="/"}return(t?"/":"")+r}t.normalizePath=normalizePath;function isAbsolute(e){return e.charAt(0)==="/"}t.isAbsolute=isAbsolute;function join(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}return normalizePath(e.join("/"))}t.join=join;function dirname(e){var t=splitPath(e);var n=t[0];var r=t[1];if(!n&&!r){return"."}if(r){r=r.substr(0,r.length-1)}return n+r}t.dirname=dirname;function basename(e,t){var n=splitPath(e)[2];if(t&&n.substr(t.length*-1)===t){n=n.substr(0,n.length-t.length)}return n}t.basename=basename},76752:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});t.setPrototypeOf=Object.setPrototypeOf||({__proto__:[]}instanceof Array?setProtoOf:mixinProperties);function setProtoOf(e,t){e.__proto__=t;return e}function mixinProperties(e,t){for(var n in t){if(!Object.prototype.hasOwnProperty.call(e,n)){e[n]=t[n]}}return e}},54788:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(69327);var i=n(25764);var s=function(){function PromiseBuffer(e){this._limit=e;this._buffer=[]}PromiseBuffer.prototype.isReady=function(){return this._limit===undefined||this.length()<this._limit};PromiseBuffer.prototype.add=function(e){var t=this;if(!this.isReady()){return i.SyncPromise.reject(new r.SentryError("Not adding Promise due to buffer limit reached."))}var n=e();if(this._buffer.indexOf(n)===-1){this._buffer.push(n)}void n.then((function(){return t.remove(n)})).then(null,(function(){return t.remove(n).then(null,(function(){}))}));return n};PromiseBuffer.prototype.remove=function(e){var t=this._buffer.splice(this._buffer.indexOf(e),1)[0];return t};PromiseBuffer.prototype.length=function(){return this._buffer.length};PromiseBuffer.prototype.drain=function(e){var t=this;return new i.SyncPromise((function(n){var r=setTimeout((function(){if(e&&e>0){n(false)}}),e);void i.SyncPromise.all(t._buffer).then((function(){clearTimeout(r);n(true)})).then(null,(function(){n(true)}))}))};return PromiseBuffer}();t.PromiseBuffer=s},62403:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});var n="<anonymous>";function getFunctionName(e){try{if(!e||typeof e!=="function"){return n}return e.name||n}catch(e){return n}}t.getFunctionName=getFunctionName},18013:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(55870);function truncate(e,t){if(t===void 0){t=0}if(typeof e!=="string"||t===0){return e}return e.length<=t?e:e.substr(0,t)+"..."}t.truncate=truncate;function snipLine(e,t){var n=e;var r=n.length;if(r<=150){return n}if(t>r){t=r}var i=Math.max(t-60,0);if(i<5){i=0}var s=Math.min(i+140,r);if(s>r-5){s=r}if(s===r){i=Math.max(s-140,0)}n=n.slice(i,s);if(i>0){n="'{snip} "+n}if(s<r){n+=" {snip}"}return n}t.snipLine=snipLine;function safeJoin(e,t){if(!Array.isArray(e)){return""}var n=[];for(var r=0;r<e.length;r++){var i=e[r];try{n.push(String(i))}catch(e){n.push("[value cannot be serialized]")}}return n.join(t)}t.safeJoin=safeJoin;function isMatchingPattern(e,t){if(!r.isString(e)){return false}if(r.isRegExp(t)){return t.test(e)}if(typeof t==="string"){return e.indexOf(t)!==-1}return false}t.isMatchingPattern=isMatchingPattern;function escapeStringForRegex(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}t.escapeStringForRegex=escapeStringForRegex},37747:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(11874);var i=n(25497);function supportsErrorEvent(){try{new ErrorEvent("");return true}catch(e){return false}}t.supportsErrorEvent=supportsErrorEvent;function supportsDOMError(){try{new DOMError("");return true}catch(e){return false}}t.supportsDOMError=supportsDOMError;function supportsDOMException(){try{new DOMException("");return true}catch(e){return false}}t.supportsDOMException=supportsDOMException;function supportsFetch(){if(!("fetch"in r.getGlobalObject())){return false}try{new Headers;new Request("");new Response;return true}catch(e){return false}}t.supportsFetch=supportsFetch;function isNativeFetch(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}t.isNativeFetch=isNativeFetch;function supportsNativeFetch(){if(!supportsFetch()){return false}var e=r.getGlobalObject();if(isNativeFetch(e.fetch)){return true}var t=false;var n=e.document;if(n&&typeof n.createElement==="function"){try{var s=n.createElement("iframe");s.hidden=true;n.head.appendChild(s);if(s.contentWindow&&s.contentWindow.fetch){t=isNativeFetch(s.contentWindow.fetch)}n.head.removeChild(s)}catch(e){i.logger.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}}return t}t.supportsNativeFetch=supportsNativeFetch;function supportsReportingObserver(){return"ReportingObserver"in r.getGlobalObject()}t.supportsReportingObserver=supportsReportingObserver;function supportsReferrerPolicy(){if(!supportsFetch()){return false}try{new Request("_",{referrerPolicy:"origin"});return true}catch(e){return false}}t.supportsReferrerPolicy=supportsReferrerPolicy;function supportsHistory(){var e=r.getGlobalObject();var t=e.chrome;var n=t&&t.app&&t.app.runtime;var i="history"in e&&!!e.history.pushState&&!!e.history.replaceState;return!n&&i}t.supportsHistory=supportsHistory},25764:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:true});var r=n(55870);var i;(function(e){e["PENDING"]="PENDING";e["RESOLVED"]="RESOLVED";e["REJECTED"]="REJECTED"})(i||(i={}));var s=function(){function SyncPromise(e){var t=this;this._state=i.PENDING;this._handlers=[];this._resolve=function(e){t._setResult(i.RESOLVED,e)};this._reject=function(e){t._setResult(i.REJECTED,e)};this._setResult=function(e,n){if(t._state!==i.PENDING){return}if(r.isThenable(n)){void n.then(t._resolve,t._reject);return}t._state=e;t._value=n;t._executeHandlers()};this._attachHandler=function(e){t._handlers=t._handlers.concat(e);t._executeHandlers()};this._executeHandlers=function(){if(t._state===i.PENDING){return}var e=t._handlers.slice();t._handlers=[];e.forEach((function(e){if(e.done){return}if(t._state===i.RESOLVED){if(e.onfulfilled){e.onfulfilled(t._value)}}if(t._state===i.REJECTED){if(e.onrejected){e.onrejected(t._value)}}e.done=true}))};try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}SyncPromise.resolve=function(e){return new SyncPromise((function(t){t(e)}))};SyncPromise.reject=function(e){return new SyncPromise((function(t,n){n(e)}))};SyncPromise.all=function(e){return new SyncPromise((function(t,n){if(!Array.isArray(e)){n(new TypeError("Promise.all requires an array as input."));return}if(e.length===0){t([]);return}var r=e.length;var i=[];e.forEach((function(e,s){void SyncPromise.resolve(e).then((function(e){i[s]=e;r-=1;if(r!==0){return}t(i)})).then(null,n)}))}))};SyncPromise.prototype.then=function(e,t){var n=this;return new SyncPromise((function(r,i){n._attachHandler({done:false,onfulfilled:function(t){if(!e){r(t);return}try{r(e(t));return}catch(e){i(e);return}},onrejected:function(e){if(!t){i(e);return}try{r(t(e));return}catch(e){i(e);return}}})}))};SyncPromise.prototype.catch=function(e){return this.then((function(e){return e}),e)};SyncPromise.prototype.finally=function(e){var t=this;return new SyncPromise((function(n,r){var i;var s;return t.then((function(t){s=false;i=t;if(e){e()}}),(function(t){s=true;i=t;if(e){e()}})).then((function(){if(s){r(i);return}n(i)}))}))};SyncPromise.prototype.toString=function(){return"[object SyncPromise]"};return SyncPromise}();t.SyncPromise=s},51310:(e,t,n)=>{e=n.nmd(e);Object.defineProperty(t,"__esModule",{value:true});var r=n(11874);var i=n(8774);var s={nowSeconds:function(){return Date.now()/1e3}};function getBrowserPerformance(){var e=r.getGlobalObject().performance;if(!e||!e.now){return undefined}var t=Date.now()-e.now();return{now:function(){return e.now()},timeOrigin:t}}function getNodePerformance(){try{var t=i.dynamicRequire(e,"perf_hooks");return t.performance}catch(e){return undefined}}var o=i.isNodeEnv()?getNodePerformance():getBrowserPerformance();var a=o===undefined?s:{nowSeconds:function(){return(o.timeOrigin+o.now())/1e3}};t.dateTimestampInSeconds=s.nowSeconds.bind(s);t.timestampInSeconds=a.nowSeconds.bind(a);t.timestampWithMs=t.timestampInSeconds;t.usingPerformanceAPI=o!==undefined;t.browserPerformanceTimeOrigin=function(){var e=r.getGlobalObject().performance;if(!e||!e.now){t._browserPerformanceTimeOriginMode="none";return undefined}var n=3600*1e3;var i=e.now();var s=Date.now();var o=e.timeOrigin?Math.abs(e.timeOrigin+i-s):n;var a=o<n;var c=e.timing&&e.timing.navigationStart;var u=typeof c==="number";var l=u?Math.abs(c+i-s):n;var d=l<n;if(a||d){if(o<=l){t._browserPerformanceTimeOriginMode="timeOrigin";return e.timeOrigin}else{t._browserPerformanceTimeOriginMode="navigationStart";return c}}t._browserPerformanceTimeOriginMode="dateNow";return s}()},69958:e=>{
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var t;var n;var r;var i;var s;var o;var a;var c;var u;var l;var d;var f;var p;var h;var m;var g;var v;var y;var b;var _;var S;var w;var T;(function(t){var n=typeof global==="object"?global:typeof self==="object"?self:typeof this==="object"?this:{};if(typeof define==="function"&&define.amd){define("tslib",["exports"],(function(e){t(createExporter(n,createExporter(e)))}))}else if(true&&typeof e.exports==="object"){t(createExporter(n,createExporter(e.exports)))}else{t(createExporter(n))}function createExporter(e,t){if(e!==n){if(typeof Object.create==="function"){Object.defineProperty(e,"__esModule",{value:true})}else{e.__esModule=true}}return function(n,r){return e[n]=t?t(n,r):r}}})((function(e){var k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n]};t=function(e,t){k(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)};n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};r=function(e,t){var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0)n[r]=e[r];if(e!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++){if(t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i]))n[r[i]]=e[r[i]]}return n};i=function(e,t,n,r){var i=arguments.length,s=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)if(o=e[a])s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s;return i>3&&s&&Object.defineProperty(t,n,s),s};s=function(e,t){return function(n,r){t(n,r,e)}};o=function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};a=function(e,t,n,r){function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function fulfilled(e){try{step(r.next(e))}catch(e){i(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){i(e)}}function step(e){e.done?n(e.value):adopt(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())}))};c=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function verb(e){return function(t){return step([e,t])}}function step(o){if(r)throw new TypeError("Generator is already executing.");while(n)try{if(r=1,i&&(s=o[0]&2?i["return"]:o[0]?i["throw"]||((s=i["return"])&&s.call(i),0):i.next)&&!(s=s.call(i,o[1])).done)return s;if(i=0,s)o=[o[0]&2,s.value];switch(o[0]){case 0:case 1:s=o;break;case 4:n.label++;return{value:o[1],done:false};case 5:n.label++;i=o[1];o=[0];continue;case 7:o=n.ops.pop();n.trys.pop();continue;default:if(!(s=n.trys,s=s.length>0&&s[s.length-1])&&(o[0]===6||o[0]===2)){n=0;continue}if(o[0]===3&&(!s||o[1]>s[0]&&o[1]<s[3])){n.label=o[1];break}if(o[0]===6&&n.label<s[1]){n.label=s[1];s=o;break}if(s&&n.label<s[2]){n.label=s[2];n.ops.push(o);break}if(s[2])n.ops.pop();n.trys.pop();continue}o=t.call(e,n)}catch(e){o=[6,e];i=0}finally{r=s=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}};T=function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]};u=function(e,t){for(var n in e)if(n!=="default"&&!t.hasOwnProperty(n))t[n]=e[n]};l=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&r>=e.length)e=void 0;return{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};d=function(e,t){var n=typeof Symbol==="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,s=[],o;try{while((t===void 0||t-- >0)&&!(i=r.next()).done)s.push(i.value)}catch(e){o={error:e}}finally{try{if(i&&!i.done&&(n=r["return"]))n.call(r)}finally{if(o)throw o.error}}return s};f=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(d(arguments[t]));return e};p=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r};h=function(e){return this instanceof h?(this.v=e,this):new h(e)};m=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i;function verb(e){if(r[e])i[e]=function(t){return new Promise((function(n,r){s.push([e,t,n,r])>1||resume(e,t)}))}}function resume(e,t){try{step(r[e](t))}catch(e){settle(s[0][3],e)}}function step(e){e.value instanceof h?Promise.resolve(e.value.v).then(fulfill,reject):settle(s[0][2],e)}function fulfill(e){resume("next",e)}function reject(e){resume("throw",e)}function settle(e,t){if(e(t),s.shift(),s.length)resume(s[0][0],s[0][1])}};g=function(e){var t,n;return t={},verb("next"),verb("throw",(function(e){throw e})),verb("return"),t[Symbol.iterator]=function(){return this},t;function verb(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:h(e[r](t)),done:r==="return"}:i?i(t):t}:i}};v=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof l==="function"?l(e):e[Symbol.iterator](),n={},verb("next"),verb("throw"),verb("return"),n[Symbol.asyncIterator]=function(){return this},n);function verb(t){n[t]=e[t]&&function(n){return new Promise((function(r,i){n=e[t](n),settle(r,i,n.done,n.value)}))}}function settle(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}};y=function(e,t){if(Object.defineProperty){Object.defineProperty(e,"raw",{value:t})}else{e.raw=t}return e};b=function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(Object.hasOwnProperty.call(e,n))t[n]=e[n];t["default"]=e;return t};_=function(e){return e&&e.__esModule?e:{default:e}};S=function(e,t){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return t.get(e)};w=function(e,t,n){if(!t.has(e)){throw new TypeError("attempted to set private field on non-instance")}t.set(e,n);return n};e("__extends",t);e("__assign",n);e("__rest",r);e("__decorate",i);e("__param",s);e("__metadata",o);e("__awaiter",a);e("__generator",c);e("__exportStar",u);e("__createBinding",T);e("__values",l);e("__read",d);e("__spread",f);e("__spreadArrays",p);e("__await",h);e("__asyncGenerator",m);e("__asyncDelegator",g);e("__asyncValues",v);e("__makeTemplateObject",y);e("__importStar",b);e("__importDefault",_);e("__classPrivateFieldGet",S);e("__classPrivateFieldSet",w)}))},7423:(e,t,n)=>{"use strict";const r=n(58225);e.exports=r((e=>{e.message=`\t${e.message}`;return e}))},4774:(e,t,n)=>{"use strict";const{Colorizer:r}=n(31518);const{Padder:i}=n(3775);const{configs:s,MESSAGE:o}=n(67267);class CliFormat{constructor(e={}){if(!e.levels){e.levels=s.cli.levels}this.colorizer=new r(e);this.padder=new i(e);this.options=e}transform(e,t){this.colorizer.transform(this.padder.transform(e,t),t);e[o]=`${e.level}:${e.message}`;return e}}e.exports=e=>new CliFormat(e);e.exports.Format=CliFormat},31518:(e,t,n)=>{"use strict";const r=n(16358);const{LEVEL:i,MESSAGE:s}=n(67267);r.enabled=true;const o=/\s+/;class Colorizer{constructor(e={}){if(e.colors){this.addColors(e.colors)}this.options=e}static addColors(e){const t=Object.keys(e).reduce(((t,n)=>{t[n]=o.test(e[n])?e[n].split(o):e[n];return t}),{});Colorizer.allColors=Object.assign({},Colorizer.allColors||{},t);return Colorizer.allColors}addColors(e){return Colorizer.addColors(e)}colorize(e,t,n){if(typeof n==="undefined"){n=t}if(!Array.isArray(Colorizer.allColors[e])){return r[Colorizer.allColors[e]](n)}for(let t=0,i=Colorizer.allColors[e].length;t<i;t++){n=r[Colorizer.allColors[e][t]](n)}return n}transform(e,t){if(t.all&&typeof e[s]==="string"){e[s]=this.colorize(e[i],e.level,e[s])}if(t.level||t.all||!t.message){e.level=this.colorize(e[i],e.level)}if(t.all||t.message){e.message=this.colorize(e[i],e.level,e.message)}return e}}e.exports=e=>new Colorizer(e);e.exports.Colorizer=e.exports.Format=Colorizer},85426:(e,t,n)=>{"use strict";const r=n(58225);function cascade(e){if(!e.every(isValidFormat)){return}return t=>{let n=t;for(let t=0;t<e.length;t++){n=e[t].transform(n,e[t].options);if(!n){return false}}return n}}function isValidFormat(e){if(typeof e.transform!=="function"){throw new Error(["No transform function found on format. Did you create a format instance?","const myFormat = format(formatFn);","const instance = myFormat();"].join("\n"))}return true}e.exports=(...e)=>{const t=r(cascade(e));const n=t();n.Format=t.Format;return n};e.exports.cascade=cascade},13489:(e,t,n)=>{"use strict";const r=n(58225);const{LEVEL:i,MESSAGE:s}=n(67267);e.exports=r(((e,{stack:t})=>{if(e instanceof Error){const n=Object.assign({},e,{level:e.level,[i]:e[i]||e.level,message:e.message,[s]:e[s]||e.message});if(t)n.stack=e.stack;return n}if(!(e.message instanceof Error))return e;const n=e.message;Object.assign(e,n);e.message=n.message;e[s]=n.message;if(t)e.stack=n.stack;return e}))},58225:e=>{"use strict";class InvalidFormatError extends Error{constructor(e){super(`Format functions must be synchronous taking a two arguments: (info, opts)\nFound: ${e.toString().split("\n")[0]}\n`);Error.captureStackTrace(this,InvalidFormatError)}}e.exports=e=>{if(e.length>2){throw new InvalidFormatError(e)}function Format(e={}){this.options=e}Format.prototype.transform=e;function createFormatWrap(e){return new Format(e)}createFormatWrap.Format=Format;return createFormatWrap}},90041:(e,t,n)=>{"use strict";const r=t.format=n(58225);t.levels=n(52732);function exposeFormat(e,t){Object.defineProperty(r,e,{get(){return t()},configurable:true})}exposeFormat("align",(function(){return n(7423)}));exposeFormat("errors",(function(){return n(13489)}));exposeFormat("cli",(function(){return n(4774)}));exposeFormat("combine",(function(){return n(85426)}));exposeFormat("colorize",(function(){return n(31518)}));exposeFormat("json",(function(){return n(64075)}));exposeFormat("label",(function(){return n(11502)}));exposeFormat("logstash",(function(){return n(90817)}));exposeFormat("metadata",(function(){return n(72672)}));exposeFormat("ms",(function(){return n(69171)}));exposeFormat("padLevels",(function(){return n(3775)}));exposeFormat("prettyPrint",(function(){return n(76485)}));exposeFormat("printf",(function(){return n(38544)}));exposeFormat("simple",(function(){return n(4556)}));exposeFormat("splat",(function(){return n(63575)}));exposeFormat("timestamp",(function(){return n(69722)}));exposeFormat("uncolorize",(function(){return n(94214)}))},64075:(e,t,n)=>{"use strict";const r=n(58225);const{MESSAGE:i}=n(67267);const s=n(5693);function replacer(e,t){if(typeof t==="bigint")return t.toString();return t}e.exports=r(((e,t)=>{const n=s.configure(t);e[i]=n(e,t.replacer||replacer,t.space);return e}))},11502:(e,t,n)=>{"use strict";const r=n(58225);e.exports=r(((e,t)=>{if(t.message){e.message=`[${t.label}] ${e.message}`;return e}e.label=t.label;return e}))},52732:(e,t,n)=>{"use strict";const{Colorizer:r}=n(31518);e.exports=e=>{r.addColors(e.colors||e);return e}},90817:(e,t,n)=>{"use strict";const r=n(58225);const{MESSAGE:i}=n(67267);const s=n(5693);e.exports=r((e=>{const t={};if(e.message){t["@message"]=e.message;delete e.message}if(e.timestamp){t["@timestamp"]=e.timestamp;delete e.timestamp}t["@fields"]=e;e[i]=s(t);return e}))},72672:(e,t,n)=>{"use strict";const r=n(58225);function fillExcept(e,t,n){const r=t.reduce(((t,n)=>{t[n]=e[n];delete e[n];return t}),{});const i=Object.keys(e).reduce(((t,n)=>{t[n]=e[n];delete e[n];return t}),{});Object.assign(e,r,{[n]:i});return e}function fillWith(e,t,n){e[n]=t.reduce(((t,n)=>{t[n]=e[n];delete e[n];return t}),{});return e}e.exports=r(((e,t={})=>{let n="metadata";if(t.key){n=t.key}let r=[];if(!t.fillExcept&&!t.fillWith){r.push("level");r.push("message")}if(t.fillExcept){r=t.fillExcept}if(r.length>0){return fillExcept(e,r,n)}if(t.fillWith){return fillWith(e,t.fillWith,n)}return e}))},69171:function(e,t,n){"use strict";const r=n(58225);const i=n(80040);e.exports=r((e=>{const t=+new Date;this.diff=t-(this.prevTime||t);this.prevTime=t;e.ms=`+${i(this.diff)}`;return e}))},3775:(e,t,n)=>{"use strict";const{configs:r,LEVEL:i,MESSAGE:s}=n(67267);class Padder{constructor(e={levels:r.npm.levels}){this.paddings=Padder.paddingForLevels(e.levels,e.filler);this.options=e}static getLongestLevel(e){const t=Object.keys(e).map((e=>e.length));return Math.max(...t)}static paddingForLevel(e,t,n){const r=n+1-e.length;const i=Math.floor(r/t.length);const s=`${t}${t.repeat(i)}`;return s.slice(0,r)}static paddingForLevels(e,t=" "){const n=Padder.getLongestLevel(e);return Object.keys(e).reduce(((e,r)=>{e[r]=Padder.paddingForLevel(r,t,n);return e}),{})}transform(e,t){e.message=`${this.paddings[e[i]]}${e.message}`;if(e[s]){e[s]=`${this.paddings[e[i]]}${e[s]}`}return e}}e.exports=e=>new Padder(e);e.exports.Padder=e.exports.Format=Padder},76485:(e,t,n)=>{"use strict";const r=n(73837).inspect;const i=n(58225);const{LEVEL:s,MESSAGE:o,SPLAT:a}=n(67267);e.exports=i(((e,t={})=>{const n=Object.assign({},e);delete n[s];delete n[o];delete n[a];e[o]=r(n,false,t.depth||null,t.colorize);return e}))},38544:(e,t,n)=>{"use strict";const{MESSAGE:r}=n(67267);class Printf{constructor(e){this.template=e}transform(e){e[r]=this.template(e);return e}}e.exports=e=>new Printf(e);e.exports.Printf=e.exports.Format=Printf},4556:(e,t,n)=>{"use strict";const r=n(58225);const{MESSAGE:i}=n(67267);const s=n(5693);e.exports=r((e=>{const t=s(Object.assign({},e,{level:undefined,message:undefined,splat:undefined}));const n=e.padding&&e.padding[e.level]||"";if(t!=="{}"){e[i]=`${e.level}:${n} ${e.message} ${t}`}else{e[i]=`${e.level}:${n} ${e.message}`}return e}))},63575:(e,t,n)=>{"use strict";const r=n(73837);const{SPLAT:i}=n(67267);const s=/%[scdjifoO%]/g;const o=/%%/g;class Splatter{constructor(e){this.options=e}_splat(e,t){const n=e.message;const s=e[i]||e.splat||[];const a=n.match(o);const c=a&&a.length||0;const u=t.length-c;const l=u-s.length;const d=l<0?s.splice(l,-1*l):[];const f=d.length;if(f){for(let t=0;t<f;t++){Object.assign(e,d[t])}}e.message=r.format(n,...s);return e}transform(e){const t=e.message;const n=e[i]||e.splat;if(!n||!n.length){return e}const r=t&&t.match&&t.match(s);if(!r&&(n||n.length)){const t=n.length>1?n.splice(0):n;const r=t.length;if(r){for(let n=0;n<r;n++){Object.assign(e,t[n])}}return e}if(r){return this._splat(e,r)}return e}}e.exports=e=>new Splatter(e)},69722:(e,t,n)=>{"use strict";const r=n(64852);const i=n(58225);e.exports=i(((e,t={})=>{if(t.format){e.timestamp=typeof t.format==="function"?t.format():r.format(new Date,t.format)}if(!e.timestamp){e.timestamp=(new Date).toISOString()}if(t.alias){e[t.alias]=e.timestamp}return e}))},94214:(e,t,n)=>{"use strict";const r=n(16358);const i=n(58225);const{MESSAGE:s}=n(67267);e.exports=i(((e,t)=>{if(t.level!==false){e.level=r.strip(e.level)}if(t.message!==false){e.message=r.strip(e.message)}if(t.raw!==false&&e[s]){e[s]=r.strip(e[s])}return e}))},27393:function(e,t,n){e=n.nmd(e);
//! moment.js
//! version : 2.29.3
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
(function(t,n){true?e.exports=n():0})(this,(function(){"use strict";var t;function hooks(){return t.apply(null,arguments)}function setHookCallback(e){t=e}function isArray(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function isObject(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function hasOwnProp(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function isObjectEmpty(e){if(Object.getOwnPropertyNames){return Object.getOwnPropertyNames(e).length===0}else{var t;for(t in e){if(hasOwnProp(e,t)){return false}}return true}}function isUndefined(e){return e===void 0}function isNumber(e){return typeof e==="number"||Object.prototype.toString.call(e)==="[object Number]"}function isDate(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function map(e,t){var n=[],r,i=e.length;for(r=0;r<i;++r){n.push(t(e[r],r))}return n}function extend(e,t){for(var n in t){if(hasOwnProp(t,n)){e[n]=t[n]}}if(hasOwnProp(t,"toString")){e.toString=t.toString}if(hasOwnProp(t,"valueOf")){e.valueOf=t.valueOf}return e}function createUTC(e,t,n,r){return createLocalOrUTC(e,t,n,r,true).utc()}function defaultParsingFlags(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidEra:null,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false,parsedDateParts:[],era:null,meridiem:null,rfc2822:false,weekdayMismatch:false}}function getParsingFlags(e){if(e._pf==null){e._pf=defaultParsingFlags()}return e._pf}var n;if(Array.prototype.some){n=Array.prototype.some}else{n=function(e){var t=Object(this),n=t.length>>>0,r;for(r=0;r<n;r++){if(r in t&&e.call(this,t[r],r,t)){return true}}return false}}function isValid(e){if(e._isValid==null){var t=getParsingFlags(e),r=n.call(t.parsedDateParts,(function(e){return e!=null})),i=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&r);if(e._strict){i=i&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===undefined}if(Object.isFrozen==null||!Object.isFrozen(e)){e._isValid=i}else{return i}}return e._isValid}function createInvalid(e){var t=createUTC(NaN);if(e!=null){extend(getParsingFlags(t),e)}else{getParsingFlags(t).userInvalidated=true}return t}var r=hooks.momentProperties=[],i=false;function copyConfig(e,t){var n,i,s,o=r.length;if(!isUndefined(t._isAMomentObject)){e._isAMomentObject=t._isAMomentObject}if(!isUndefined(t._i)){e._i=t._i}if(!isUndefined(t._f)){e._f=t._f}if(!isUndefined(t._l)){e._l=t._l}if(!isUndefined(t._strict)){e._strict=t._strict}if(!isUndefined(t._tzm)){e._tzm=t._tzm}if(!isUndefined(t._isUTC)){e._isUTC=t._isUTC}if(!isUndefined(t._offset)){e._offset=t._offset}if(!isUndefined(t._pf)){e._pf=getParsingFlags(t)}if(!isUndefined(t._locale)){e._locale=t._locale}if(o>0){for(n=0;n<o;n++){i=r[n];s=t[i];if(!isUndefined(s)){e[i]=s}}}return e}function Moment(e){copyConfig(this,e);this._d=new Date(e._d!=null?e._d.getTime():NaN);if(!this.isValid()){this._d=new Date(NaN)}if(i===false){i=true;hooks.updateOffset(this);i=false}}function isMoment(e){return e instanceof Moment||e!=null&&e._isAMomentObject!=null}function warn(e){if(hooks.suppressDeprecationWarnings===false&&typeof console!=="undefined"&&console.warn){console.warn("Deprecation warning: "+e)}}function deprecate(e,t){var n=true;return extend((function(){if(hooks.deprecationHandler!=null){hooks.deprecationHandler(null,e)}if(n){var r=[],i,s,o,a=arguments.length;for(s=0;s<a;s++){i="";if(typeof arguments[s]==="object"){i+="\n["+s+"] ";for(o in arguments[0]){if(hasOwnProp(arguments[0],o)){i+=o+": "+arguments[0][o]+", "}}i=i.slice(0,-2)}else{i=arguments[s]}r.push(i)}warn(e+"\nArguments: "+Array.prototype.slice.call(r).join("")+"\n"+(new Error).stack);n=false}return t.apply(this,arguments)}),t)}var s={};function deprecateSimple(e,t){if(hooks.deprecationHandler!=null){hooks.deprecationHandler(e,t)}if(!s[e]){warn(t);s[e]=true}}hooks.suppressDeprecationWarnings=false;hooks.deprecationHandler=null;function isFunction(e){return typeof Function!=="undefined"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function set(e){var t,n;for(n in e){if(hasOwnProp(e,n)){t=e[n];if(isFunction(t)){this[n]=t}else{this["_"+n]=t}}}this._config=e;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function mergeConfigs(e,t){var n=extend({},e),r;for(r in t){if(hasOwnProp(t,r)){if(isObject(e[r])&&isObject(t[r])){n[r]={};extend(n[r],e[r]);extend(n[r],t[r])}else if(t[r]!=null){n[r]=t[r]}else{delete n[r]}}}for(r in e){if(hasOwnProp(e,r)&&!hasOwnProp(t,r)&&isObject(e[r])){n[r]=extend({},n[r])}}return n}function Locale(e){if(e!=null){this.set(e)}}var o;if(Object.keys){o=Object.keys}else{o=function(e){var t,n=[];for(t in e){if(hasOwnProp(e,t)){n.push(t)}}return n}}var a={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function calendar(e,t,n){var r=this._calendar[e]||this._calendar["sameElse"];return isFunction(r)?r.call(t,n):r}function zeroFill(e,t,n){var r=""+Math.abs(e),i=t-r.length,s=e>=0;return(s?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}var c=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,u=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,l={},d={};function addFormatToken(e,t,n,r){var i=r;if(typeof r==="string"){i=function(){return this[r]()}}if(e){d[e]=i}if(t){d[t[0]]=function(){return zeroFill(i.apply(this,arguments),t[1],t[2])}}if(n){d[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)}}}function removeFormattingTokens(e){if(e.match(/\[[\s\S]/)){return e.replace(/^\[|\]$/g,"")}return e.replace(/\\/g,"")}function makeFormatFunction(e){var t=e.match(c),n,r;for(n=0,r=t.length;n<r;n++){if(d[t[n]]){t[n]=d[t[n]]}else{t[n]=removeFormattingTokens(t[n])}}return function(n){var i="",s;for(s=0;s<r;s++){i+=isFunction(t[s])?t[s].call(n,e):t[s]}return i}}function formatMoment(e,t){if(!e.isValid()){return e.localeData().invalidDate()}t=expandFormat(t,e.localeData());l[t]=l[t]||makeFormatFunction(t);return l[t](e)}function expandFormat(e,t){var n=5;function replaceLongDateFormatTokens(e){return t.longDateFormat(e)||e}u.lastIndex=0;while(n>=0&&u.test(e)){e=e.replace(u,replaceLongDateFormatTokens);u.lastIndex=0;n-=1}return e}var f={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function longDateFormat(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];if(t||!n){return t}this._longDateFormat[e]=n.match(c).map((function(e){if(e==="MMMM"||e==="MM"||e==="DD"||e==="dddd"){return e.slice(1)}return e})).join("");return this._longDateFormat[e]}var p="Invalid date";function invalidDate(){return this._invalidDate}var h="%d",m=/\d{1,2}/;function ordinal(e){return this._ordinal.replace("%d",e)}var g={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function relativeTime(e,t,n,r){var i=this._relativeTime[n];return isFunction(i)?i(e,t,n,r):i.replace(/%d/i,e)}function pastFuture(e,t){var n=this._relativeTime[e>0?"future":"past"];return isFunction(n)?n(t):n.replace(/%s/i,t)}var v={};function addUnitAlias(e,t){var n=e.toLowerCase();v[n]=v[n+"s"]=v[t]=e}function normalizeUnits(e){return typeof e==="string"?v[e]||v[e.toLowerCase()]:undefined}function normalizeObjectUnits(e){var t={},n,r;for(r in e){if(hasOwnProp(e,r)){n=normalizeUnits(r);if(n){t[n]=e[r]}}}return t}var y={};function addUnitPriority(e,t){y[e]=t}function getPrioritizedUnits(e){var t=[],n;for(n in e){if(hasOwnProp(e,n)){t.push({unit:n,priority:y[n]})}}t.sort((function(e,t){return e.priority-t.priority}));return t}function isLeapYear(e){return e%4===0&&e%100!==0||e%400===0}function absFloor(e){if(e<0){return Math.ceil(e)||0}else{return Math.floor(e)}}function toInt(e){var t=+e,n=0;if(t!==0&&isFinite(t)){n=absFloor(t)}return n}function makeGetSet(e,t){return function(n){if(n!=null){set$1(this,e,n);hooks.updateOffset(this,t);return this}else{return get(this,e)}}}function get(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function set$1(e,t,n){if(e.isValid()&&!isNaN(n)){if(t==="FullYear"&&isLeapYear(e.year())&&e.month()===1&&e.date()===29){n=toInt(n);e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),daysInMonth(n,e.month()))}else{e._d["set"+(e._isUTC?"UTC":"")+t](n)}}}function stringGet(e){e=normalizeUnits(e);if(isFunction(this[e])){return this[e]()}return this}function stringSet(e,t){if(typeof e==="object"){e=normalizeObjectUnits(e);var n=getPrioritizedUnits(e),r,i=n.length;for(r=0;r<i;r++){this[n[r].unit](e[n[r].unit])}}else{e=normalizeUnits(e);if(isFunction(this[e])){return this[e](t)}}return this}var b=/\d/,_=/\d\d/,S=/\d{3}/,w=/\d{4}/,T=/[+-]?\d{6}/,k=/\d\d?/,C=/\d\d\d\d?/,E=/\d\d\d\d\d\d?/,R=/\d{1,3}/,x=/\d{1,4}/,O=/[+-]?\d{1,6}/,D=/\d+/,P=/[+-]?\d+/,I=/Z|[+-]\d\d:?\d\d/gi,M=/Z|[+-]\d\d(?::?\d\d)?/gi,N=/[+-]?\d+(\.\d{1,3})?/,A=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,F;F={};function addRegexToken(e,t,n){F[e]=isFunction(t)?t:function(e,r){return e&&n?n:t}}function getParseRegexForToken(e,t){if(!hasOwnProp(F,e)){return new RegExp(unescapeFormat(e))}return F[e](t._strict,t._locale)}function unescapeFormat(e){return regexEscape(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,n,r,i){return t||n||r||i})))}function regexEscape(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var L={};function addParseToken(e,t){var n,r=t,i;if(typeof e==="string"){e=[e]}if(isNumber(t)){r=function(e,n){n[t]=toInt(e)}}i=e.length;for(n=0;n<i;n++){L[e[n]]=r}}function addWeekParseToken(e,t){addParseToken(e,(function(e,n,r,i){r._w=r._w||{};t(e,r._w,r,i)}))}function addTimeToArrayFromToken(e,t,n){if(t!=null&&hasOwnProp(L,e)){L[e](t,n._a,n,e)}}var j=0,q=1,$=2,U=3,H=4,W=5,B=6,Y=7,V=8;function mod(e,t){return(e%t+t)%t}var K;if(Array.prototype.indexOf){K=Array.prototype.indexOf}else{K=function(e){var t;for(t=0;t<this.length;++t){if(this[t]===e){return t}}return-1}}function daysInMonth(e,t){if(isNaN(e)||isNaN(t)){return NaN}var n=mod(t,12);e+=(t-n)/12;return n===1?isLeapYear(e)?29:28:31-n%7%2}addFormatToken("M",["MM",2],"Mo",(function(){return this.month()+1}));addFormatToken("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)}));addFormatToken("MMMM",0,0,(function(e){return this.localeData().months(this,e)}));addUnitAlias("month","M");addUnitPriority("month",8);addRegexToken("M",k);addRegexToken("MM",k,_);addRegexToken("MMM",(function(e,t){return t.monthsShortRegex(e)}));addRegexToken("MMMM",(function(e,t){return t.monthsRegex(e)}));addParseToken(["M","MM"],(function(e,t){t[q]=toInt(e)-1}));addParseToken(["MMM","MMMM"],(function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);if(i!=null){t[q]=i}else{getParsingFlags(n).invalidMonth=e}}));var G="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),z="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),J=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,X=A,Q=A;function localeMonths(e,t){if(!e){return isArray(this._months)?this._months:this._months["standalone"]}return isArray(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||J).test(t)?"format":"standalone"][e.month()]}function localeMonthsShort(e,t){if(!e){return isArray(this._monthsShort)?this._monthsShort:this._monthsShort["standalone"]}return isArray(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[J.test(t)?"format":"standalone"][e.month()]}function handleStrictParse(e,t,n){var r,i,s,o=e.toLocaleLowerCase();if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[];for(r=0;r<12;++r){s=createUTC([2e3,r]);this._shortMonthsParse[r]=this.monthsShort(s,"").toLocaleLowerCase();this._longMonthsParse[r]=this.months(s,"").toLocaleLowerCase()}}if(n){if(t==="MMM"){i=K.call(this._shortMonthsParse,o);return i!==-1?i:null}else{i=K.call(this._longMonthsParse,o);return i!==-1?i:null}}else{if(t==="MMM"){i=K.call(this._shortMonthsParse,o);if(i!==-1){return i}i=K.call(this._longMonthsParse,o);return i!==-1?i:null}else{i=K.call(this._longMonthsParse,o);if(i!==-1){return i}i=K.call(this._shortMonthsParse,o);return i!==-1?i:null}}}function localeMonthsParse(e,t,n){var r,i,s;if(this._monthsParseExact){return handleStrictParse.call(this,e,t,n)}if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[]}for(r=0;r<12;r++){i=createUTC([2e3,r]);if(n&&!this._longMonthsParse[r]){this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i");this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")}if(!n&&!this._monthsParse[r]){s="^"+this.months(i,"")+"|^"+this.monthsShort(i,"");this._monthsParse[r]=new RegExp(s.replace(".",""),"i")}if(n&&t==="MMMM"&&this._longMonthsParse[r].test(e)){return r}else if(n&&t==="MMM"&&this._shortMonthsParse[r].test(e)){return r}else if(!n&&this._monthsParse[r].test(e)){return r}}}function setMonth(e,t){var n;if(!e.isValid()){return e}if(typeof t==="string"){if(/^\d+$/.test(t)){t=toInt(t)}else{t=e.localeData().monthsParse(t);if(!isNumber(t)){return e}}}n=Math.min(e.date(),daysInMonth(e.year(),t));e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n);return e}function getSetMonth(e){if(e!=null){setMonth(this,e);hooks.updateOffset(this,true);return this}else{return get(this,"Month")}}function getDaysInMonth(){return daysInMonth(this.year(),this.month())}function monthsShortRegex(e){if(this._monthsParseExact){if(!hasOwnProp(this,"_monthsRegex")){computeMonthsParse.call(this)}if(e){return this._monthsShortStrictRegex}else{return this._monthsShortRegex}}else{if(!hasOwnProp(this,"_monthsShortRegex")){this._monthsShortRegex=X}return this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex}}function monthsRegex(e){if(this._monthsParseExact){if(!hasOwnProp(this,"_monthsRegex")){computeMonthsParse.call(this)}if(e){return this._monthsStrictRegex}else{return this._monthsRegex}}else{if(!hasOwnProp(this,"_monthsRegex")){this._monthsRegex=Q}return this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex}}function computeMonthsParse(){function cmpLenRev(e,t){return t.length-e.length}var e=[],t=[],n=[],r,i;for(r=0;r<12;r++){i=createUTC([2e3,r]);e.push(this.monthsShort(i,""));t.push(this.months(i,""));n.push(this.months(i,""));n.push(this.monthsShort(i,""))}e.sort(cmpLenRev);t.sort(cmpLenRev);n.sort(cmpLenRev);for(r=0;r<12;r++){e[r]=regexEscape(e[r]);t[r]=regexEscape(t[r])}for(r=0;r<24;r++){n[r]=regexEscape(n[r])}this._monthsRegex=new RegExp("^("+n.join("|")+")","i");this._monthsShortRegex=this._monthsRegex;this._monthsStrictRegex=new RegExp("^("+t.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}addFormatToken("Y",0,0,(function(){var e=this.year();return e<=9999?zeroFill(e,4):"+"+e}));addFormatToken(0,["YY",2],0,(function(){return this.year()%100}));addFormatToken(0,["YYYY",4],0,"year");addFormatToken(0,["YYYYY",5],0,"year");addFormatToken(0,["YYYYYY",6,true],0,"year");addUnitAlias("year","y");addUnitPriority("year",1);addRegexToken("Y",P);addRegexToken("YY",k,_);addRegexToken("YYYY",x,w);addRegexToken("YYYYY",O,T);addRegexToken("YYYYYY",O,T);addParseToken(["YYYYY","YYYYYY"],j);addParseToken("YYYY",(function(e,t){t[j]=e.length===2?hooks.parseTwoDigitYear(e):toInt(e)}));addParseToken("YY",(function(e,t){t[j]=hooks.parseTwoDigitYear(e)}));addParseToken("Y",(function(e,t){t[j]=parseInt(e,10)}));function daysInYear(e){return isLeapYear(e)?366:365}hooks.parseTwoDigitYear=function(e){return toInt(e)+(toInt(e)>68?1900:2e3)};var Z=makeGetSet("FullYear",true);function getIsLeapYear(){return isLeapYear(this.year())}function createDate(e,t,n,r,i,s,o){var a;if(e<100&&e>=0){a=new Date(e+400,t,n,r,i,s,o);if(isFinite(a.getFullYear())){a.setFullYear(e)}}else{a=new Date(e,t,n,r,i,s,o)}return a}function createUTCDate(e){var t,n;if(e<100&&e>=0){n=Array.prototype.slice.call(arguments);n[0]=e+400;t=new Date(Date.UTC.apply(null,n));if(isFinite(t.getUTCFullYear())){t.setUTCFullYear(e)}}else{t=new Date(Date.UTC.apply(null,arguments))}return t}function firstWeekOffset(e,t,n){var r=7+t-n,i=(7+createUTCDate(e,0,r).getUTCDay()-t)%7;return-i+r-1}function dayOfYearFromWeeks(e,t,n,r,i){var s=(7+n-r)%7,o=firstWeekOffset(e,r,i),a=1+7*(t-1)+s+o,c,u;if(a<=0){c=e-1;u=daysInYear(c)+a}else if(a>daysInYear(e)){c=e+1;u=a-daysInYear(e)}else{c=e;u=a}return{year:c,dayOfYear:u}}function weekOfYear(e,t,n){var r=firstWeekOffset(e.year(),t,n),i=Math.floor((e.dayOfYear()-r-1)/7)+1,s,o;if(i<1){o=e.year()-1;s=i+weeksInYear(o,t,n)}else if(i>weeksInYear(e.year(),t,n)){s=i-weeksInYear(e.year(),t,n);o=e.year()+1}else{o=e.year();s=i}return{week:s,year:o}}function weeksInYear(e,t,n){var r=firstWeekOffset(e,t,n),i=firstWeekOffset(e+1,t,n);return(daysInYear(e)-r+i)/7}addFormatToken("w",["ww",2],"wo","week");addFormatToken("W",["WW",2],"Wo","isoWeek");addUnitAlias("week","w");addUnitAlias("isoWeek","W");addUnitPriority("week",5);addUnitPriority("isoWeek",5);addRegexToken("w",k);addRegexToken("ww",k,_);addRegexToken("W",k);addRegexToken("WW",k,_);addWeekParseToken(["w","ww","W","WW"],(function(e,t,n,r){t[r.substr(0,1)]=toInt(e)}));function localeWeek(e){return weekOfYear(e,this._week.dow,this._week.doy).week}var ee={dow:0,doy:6};function localeFirstDayOfWeek(){return this._week.dow}function localeFirstDayOfYear(){return this._week.doy}function getSetWeek(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function getSetISOWeek(e){var t=weekOfYear(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}addFormatToken("d",0,"do","day");addFormatToken("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)}));addFormatToken("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)}));addFormatToken("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)}));addFormatToken("e",0,0,"weekday");addFormatToken("E",0,0,"isoWeekday");addUnitAlias("day","d");addUnitAlias("weekday","e");addUnitAlias("isoWeekday","E");addUnitPriority("day",11);addUnitPriority("weekday",11);addUnitPriority("isoWeekday",11);addRegexToken("d",k);addRegexToken("e",k);addRegexToken("E",k);addRegexToken("dd",(function(e,t){return t.weekdaysMinRegex(e)}));addRegexToken("ddd",(function(e,t){return t.weekdaysShortRegex(e)}));addRegexToken("dddd",(function(e,t){return t.weekdaysRegex(e)}));addWeekParseToken(["dd","ddd","dddd"],(function(e,t,n,r){var i=n._locale.weekdaysParse(e,r,n._strict);if(i!=null){t.d=i}else{getParsingFlags(n).invalidWeekday=e}}));addWeekParseToken(["d","e","E"],(function(e,t,n,r){t[r]=toInt(e)}));function parseWeekday(e,t){if(typeof e!=="string"){return e}if(!isNaN(e)){return parseInt(e,10)}e=t.weekdaysParse(e);if(typeof e==="number"){return e}return null}function parseIsoWeekday(e,t){if(typeof e==="string"){return t.weekdaysParse(e)%7||7}return isNaN(e)?null:e}function shiftWeekdays(e,t){return e.slice(t,7).concat(e.slice(0,t))}var te="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),ne="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),re="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),ie=A,se=A,oe=A;function localeWeekdays(e,t){var n=isArray(this._weekdays)?this._weekdays:this._weekdays[e&&e!==true&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===true?shiftWeekdays(n,this._week.dow):e?n[e.day()]:n}function localeWeekdaysShort(e){return e===true?shiftWeekdays(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function localeWeekdaysMin(e){return e===true?shiftWeekdays(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function handleStrictParse$1(e,t,n){var r,i,s,o=e.toLocaleLowerCase();if(!this._weekdaysParse){this._weekdaysParse=[];this._shortWeekdaysParse=[];this._minWeekdaysParse=[];for(r=0;r<7;++r){s=createUTC([2e3,1]).day(r);this._minWeekdaysParse[r]=this.weekdaysMin(s,"").toLocaleLowerCase();this._shortWeekdaysParse[r]=this.weekdaysShort(s,"").toLocaleLowerCase();this._weekdaysParse[r]=this.weekdays(s,"").toLocaleLowerCase()}}if(n){if(t==="dddd"){i=K.call(this._weekdaysParse,o);return i!==-1?i:null}else if(t==="ddd"){i=K.call(this._shortWeekdaysParse,o);return i!==-1?i:null}else{i=K.call(this._minWeekdaysParse,o);return i!==-1?i:null}}else{if(t==="dddd"){i=K.call(this._weekdaysParse,o);if(i!==-1){return i}i=K.call(this._shortWeekdaysParse,o);if(i!==-1){return i}i=K.call(this._minWeekdaysParse,o);return i!==-1?i:null}else if(t==="ddd"){i=K.call(this._shortWeekdaysParse,o);if(i!==-1){return i}i=K.call(this._weekdaysParse,o);if(i!==-1){return i}i=K.call(this._minWeekdaysParse,o);return i!==-1?i:null}else{i=K.call(this._minWeekdaysParse,o);if(i!==-1){return i}i=K.call(this._weekdaysParse,o);if(i!==-1){return i}i=K.call(this._shortWeekdaysParse,o);return i!==-1?i:null}}}function localeWeekdaysParse(e,t,n){var r,i,s;if(this._weekdaysParseExact){return handleStrictParse$1.call(this,e,t,n)}if(!this._weekdaysParse){this._weekdaysParse=[];this._minWeekdaysParse=[];this._shortWeekdaysParse=[];this._fullWeekdaysParse=[]}for(r=0;r<7;r++){i=createUTC([2e3,1]).day(r);if(n&&!this._fullWeekdaysParse[r]){this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i");this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i");this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")}if(!this._weekdaysParse[r]){s="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,"");this._weekdaysParse[r]=new RegExp(s.replace(".",""),"i")}if(n&&t==="dddd"&&this._fullWeekdaysParse[r].test(e)){return r}else if(n&&t==="ddd"&&this._shortWeekdaysParse[r].test(e)){return r}else if(n&&t==="dd"&&this._minWeekdaysParse[r].test(e)){return r}else if(!n&&this._weekdaysParse[r].test(e)){return r}}}function getSetDayOfWeek(e){if(!this.isValid()){return e!=null?this:NaN}var t=this._isUTC?this._d.getUTCDay():this._d.getDay();if(e!=null){e=parseWeekday(e,this.localeData());return this.add(e-t,"d")}else{return t}}function getSetLocaleDayOfWeek(e){if(!this.isValid()){return e!=null?this:NaN}var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function getSetISODayOfWeek(e){if(!this.isValid()){return e!=null?this:NaN}if(e!=null){var t=parseIsoWeekday(e,this.localeData());return this.day(this.day()%7?t:t-7)}else{return this.day()||7}}function weekdaysRegex(e){if(this._weekdaysParseExact){if(!hasOwnProp(this,"_weekdaysRegex")){computeWeekdaysParse.call(this)}if(e){return this._weekdaysStrictRegex}else{return this._weekdaysRegex}}else{if(!hasOwnProp(this,"_weekdaysRegex")){this._weekdaysRegex=ie}return this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex}}function weekdaysShortRegex(e){if(this._weekdaysParseExact){if(!hasOwnProp(this,"_weekdaysRegex")){computeWeekdaysParse.call(this)}if(e){return this._weekdaysShortStrictRegex}else{return this._weekdaysShortRegex}}else{if(!hasOwnProp(this,"_weekdaysShortRegex")){this._weekdaysShortRegex=se}return this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex}}function weekdaysMinRegex(e){if(this._weekdaysParseExact){if(!hasOwnProp(this,"_weekdaysRegex")){computeWeekdaysParse.call(this)}if(e){return this._weekdaysMinStrictRegex}else{return this._weekdaysMinRegex}}else{if(!hasOwnProp(this,"_weekdaysMinRegex")){this._weekdaysMinRegex=oe}return this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex}}function computeWeekdaysParse(){function cmpLenRev(e,t){return t.length-e.length}var e=[],t=[],n=[],r=[],i,s,o,a,c;for(i=0;i<7;i++){s=createUTC([2e3,1]).day(i);o=regexEscape(this.weekdaysMin(s,""));a=regexEscape(this.weekdaysShort(s,""));c=regexEscape(this.weekdays(s,""));e.push(o);t.push(a);n.push(c);r.push(o);r.push(a);r.push(c)}e.sort(cmpLenRev);t.sort(cmpLenRev);n.sort(cmpLenRev);r.sort(cmpLenRev);this._weekdaysRegex=new RegExp("^("+r.join("|")+")","i");this._weekdaysShortRegex=this._weekdaysRegex;this._weekdaysMinRegex=this._weekdaysRegex;this._weekdaysStrictRegex=new RegExp("^("+n.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+t.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function hFormat(){return this.hours()%12||12}function kFormat(){return this.hours()||24}addFormatToken("H",["HH",2],0,"hour");addFormatToken("h",["hh",2],0,hFormat);addFormatToken("k",["kk",2],0,kFormat);addFormatToken("hmm",0,0,(function(){return""+hFormat.apply(this)+zeroFill(this.minutes(),2)}));addFormatToken("hmmss",0,0,(function(){return""+hFormat.apply(this)+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2)}));addFormatToken("Hmm",0,0,(function(){return""+this.hours()+zeroFill(this.minutes(),2)}));addFormatToken("Hmmss",0,0,(function(){return""+this.hours()+zeroFill(this.minutes(),2)+zeroFill(this.seconds(),2)}));function meridiem(e,t){addFormatToken(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}meridiem("a",true);meridiem("A",false);addUnitAlias("hour","h");addUnitPriority("hour",13);function matchMeridiem(e,t){return t._meridiemParse}addRegexToken("a",matchMeridiem);addRegexToken("A",matchMeridiem);addRegexToken("H",k);addRegexToken("h",k);addRegexToken("k",k);addRegexToken("HH",k,_);addRegexToken("hh",k,_);addRegexToken("kk",k,_);addRegexToken("hmm",C);addRegexToken("hmmss",E);addRegexToken("Hmm",C);addRegexToken("Hmmss",E);addParseToken(["H","HH"],U);addParseToken(["k","kk"],(function(e,t,n){var r=toInt(e);t[U]=r===24?0:r}));addParseToken(["a","A"],(function(e,t,n){n._isPm=n._locale.isPM(e);n._meridiem=e}));addParseToken(["h","hh"],(function(e,t,n){t[U]=toInt(e);getParsingFlags(n).bigHour=true}));addParseToken("hmm",(function(e,t,n){var r=e.length-2;t[U]=toInt(e.substr(0,r));t[H]=toInt(e.substr(r));getParsingFlags(n).bigHour=true}));addParseToken("hmmss",(function(e,t,n){var r=e.length-4,i=e.length-2;t[U]=toInt(e.substr(0,r));t[H]=toInt(e.substr(r,2));t[W]=toInt(e.substr(i));getParsingFlags(n).bigHour=true}));addParseToken("Hmm",(function(e,t,n){var r=e.length-2;t[U]=toInt(e.substr(0,r));t[H]=toInt(e.substr(r))}));addParseToken("Hmmss",(function(e,t,n){var r=e.length-4,i=e.length-2;t[U]=toInt(e.substr(0,r));t[H]=toInt(e.substr(r,2));t[W]=toInt(e.substr(i))}));function localeIsPM(e){return(e+"").toLowerCase().charAt(0)==="p"}var ae=/[ap]\.?m?\.?/i,ce=makeGetSet("Hours",true);function localeMeridiem(e,t,n){if(e>11){return n?"pm":"PM"}else{return n?"am":"AM"}}var ue={calendar:a,longDateFormat:f,invalidDate:p,ordinal:h,dayOfMonthOrdinalParse:m,relativeTime:g,months:G,monthsShort:z,week:ee,weekdays:te,weekdaysMin:re,weekdaysShort:ne,meridiemParse:ae};var le={},de={},fe;function commonPrefix(e,t){var n,r=Math.min(e.length,t.length);for(n=0;n<r;n+=1){if(e[n]!==t[n]){return n}}return r}function normalizeLocale(e){return e?e.toLowerCase().replace("_","-"):e}function chooseLocale(e){var t=0,n,r,i,s;while(t<e.length){s=normalizeLocale(e[t]).split("-");n=s.length;r=normalizeLocale(e[t+1]);r=r?r.split("-"):null;while(n>0){i=loadLocale(s.slice(0,n).join("-"));if(i){return i}if(r&&r.length>=n&&commonPrefix(s,r)>=n-1){break}n--}t++}return fe}function isLocaleNameSane(e){return e.match("^[^/\\\\]*$")!=null}function loadLocale(t){var n=null,r;if(le[t]===undefined&&"object"!=="undefined"&&e&&e.exports&&isLocaleNameSane(t)){try{n=fe._abbr;r=require;r("./locale/"+t);getSetGlobalLocale(n)}catch(e){le[t]=null}}return le[t]}function getSetGlobalLocale(e,t){var n;if(e){if(isUndefined(t)){n=getLocale(e)}else{n=defineLocale(e,t)}if(n){fe=n}else{if(typeof console!=="undefined"&&console.warn){console.warn("Locale "+e+" not found. Did you forget to load it?")}}}return fe._abbr}function defineLocale(e,t){if(t!==null){var n,r=ue;t.abbr=e;if(le[e]!=null){deprecateSimple("defineLocaleOverride","use moment.updateLocale(localeName, config) to change "+"an existing locale. moment.defineLocale(localeName, "+"config) should only be used for creating a new locale "+"See http://momentjs.com/guides/#/warnings/define-locale/ for more info.");r=le[e]._config}else if(t.parentLocale!=null){if(le[t.parentLocale]!=null){r=le[t.parentLocale]._config}else{n=loadLocale(t.parentLocale);if(n!=null){r=n._config}else{if(!de[t.parentLocale]){de[t.parentLocale]=[]}de[t.parentLocale].push({name:e,config:t});return null}}}le[e]=new Locale(mergeConfigs(r,t));if(de[e]){de[e].forEach((function(e){defineLocale(e.name,e.config)}))}getSetGlobalLocale(e);return le[e]}else{delete le[e];return null}}function updateLocale(e,t){if(t!=null){var n,r,i=ue;if(le[e]!=null&&le[e].parentLocale!=null){le[e].set(mergeConfigs(le[e]._config,t))}else{r=loadLocale(e);if(r!=null){i=r._config}t=mergeConfigs(i,t);if(r==null){t.abbr=e}n=new Locale(t);n.parentLocale=le[e];le[e]=n}getSetGlobalLocale(e)}else{if(le[e]!=null){if(le[e].parentLocale!=null){le[e]=le[e].parentLocale;if(e===getSetGlobalLocale()){getSetGlobalLocale(e)}}else if(le[e]!=null){delete le[e]}}}return le[e]}function getLocale(e){var t;if(e&&e._locale&&e._locale._abbr){e=e._locale._abbr}if(!e){return fe}if(!isArray(e)){t=loadLocale(e);if(t){return t}e=[e]}return chooseLocale(e)}function listLocales(){return o(le)}function checkOverflow(e){var t,n=e._a;if(n&&getParsingFlags(e).overflow===-2){t=n[q]<0||n[q]>11?q:n[$]<1||n[$]>daysInMonth(n[j],n[q])?$:n[U]<0||n[U]>24||n[U]===24&&(n[H]!==0||n[W]!==0||n[B]!==0)?U:n[H]<0||n[H]>59?H:n[W]<0||n[W]>59?W:n[B]<0||n[B]>999?B:-1;if(getParsingFlags(e)._overflowDayOfYear&&(t<j||t>$)){t=$}if(getParsingFlags(e)._overflowWeeks&&t===-1){t=Y}if(getParsingFlags(e)._overflowWeekday&&t===-1){t=V}getParsingFlags(e).overflow=t}return e}var pe=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,he=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,me=/Z|[+-]\d\d(?::?\d\d)?/,ge=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,false],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,false],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,false],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,false],["YYYY",/\d{4}/,false]],ve=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],ye=/^\/?Date\((-?\d+)/i,be=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,_e={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function configFromISO(e){var t,n,r=e._i,i=pe.exec(r)||he.exec(r),s,o,a,c,u=ge.length,l=ve.length;if(i){getParsingFlags(e).iso=true;for(t=0,n=u;t<n;t++){if(ge[t][1].exec(i[1])){o=ge[t][0];s=ge[t][2]!==false;break}}if(o==null){e._isValid=false;return}if(i[3]){for(t=0,n=l;t<n;t++){if(ve[t][1].exec(i[3])){a=(i[2]||" ")+ve[t][0];break}}if(a==null){e._isValid=false;return}}if(!s&&a!=null){e._isValid=false;return}if(i[4]){if(me.exec(i[4])){c="Z"}else{e._isValid=false;return}}e._f=o+(a||"")+(c||"");configFromStringAndFormat(e)}else{e._isValid=false}}function extractFromRFC2822Strings(e,t,n,r,i,s){var o=[untruncateYear(e),z.indexOf(t),parseInt(n,10),parseInt(r,10),parseInt(i,10)];if(s){o.push(parseInt(s,10))}return o}function untruncateYear(e){var t=parseInt(e,10);if(t<=49){return 2e3+t}else if(t<=999){return 1900+t}return t}function preprocessRFC2822(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function checkWeekday(e,t,n){if(e){var r=ne.indexOf(e),i=new Date(t[0],t[1],t[2]).getDay();if(r!==i){getParsingFlags(n).weekdayMismatch=true;n._isValid=false;return false}}return true}function calculateOffset(e,t,n){if(e){return _e[e]}else if(t){return 0}else{var r=parseInt(n,10),i=r%100,s=(r-i)/100;return s*60+i}}function configFromRFC2822(e){var t=be.exec(preprocessRFC2822(e._i)),n;if(t){n=extractFromRFC2822Strings(t[4],t[3],t[2],t[5],t[6],t[7]);if(!checkWeekday(t[1],n,e)){return}e._a=n;e._tzm=calculateOffset(t[8],t[9],t[10]);e._d=createUTCDate.apply(null,e._a);e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm);getParsingFlags(e).rfc2822=true}else{e._isValid=false}}function configFromString(e){var t=ye.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}configFromISO(e);if(e._isValid===false){delete e._isValid}else{return}configFromRFC2822(e);if(e._isValid===false){delete e._isValid}else{return}if(e._strict){e._isValid=false}else{hooks.createFromInputFallback(e)}}hooks.createFromInputFallback=deprecate("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), "+"which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are "+"discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}));function defaults(e,t,n){if(e!=null){return e}if(t!=null){return t}return n}function currentDateArray(e){var t=new Date(hooks.now());if(e._useUTC){return[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]}return[t.getFullYear(),t.getMonth(),t.getDate()]}function configFromArray(e){var t,n,r=[],i,s,o;if(e._d){return}i=currentDateArray(e);if(e._w&&e._a[$]==null&&e._a[q]==null){dayOfYearFromWeekInfo(e)}if(e._dayOfYear!=null){o=defaults(e._a[j],i[j]);if(e._dayOfYear>daysInYear(o)||e._dayOfYear===0){getParsingFlags(e)._overflowDayOfYear=true}n=createUTCDate(o,0,e._dayOfYear);e._a[q]=n.getUTCMonth();e._a[$]=n.getUTCDate()}for(t=0;t<3&&e._a[t]==null;++t){e._a[t]=r[t]=i[t]}for(;t<7;t++){e._a[t]=r[t]=e._a[t]==null?t===2?1:0:e._a[t]}if(e._a[U]===24&&e._a[H]===0&&e._a[W]===0&&e._a[B]===0){e._nextDay=true;e._a[U]=0}e._d=(e._useUTC?createUTCDate:createDate).apply(null,r);s=e._useUTC?e._d.getUTCDay():e._d.getDay();if(e._tzm!=null){e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm)}if(e._nextDay){e._a[U]=24}if(e._w&&typeof e._w.d!=="undefined"&&e._w.d!==s){getParsingFlags(e).weekdayMismatch=true}}function dayOfYearFromWeekInfo(e){var t,n,r,i,s,o,a,c,u;t=e._w;if(t.GG!=null||t.W!=null||t.E!=null){s=1;o=4;n=defaults(t.GG,e._a[j],weekOfYear(createLocal(),1,4).year);r=defaults(t.W,1);i=defaults(t.E,1);if(i<1||i>7){c=true}}else{s=e._locale._week.dow;o=e._locale._week.doy;u=weekOfYear(createLocal(),s,o);n=defaults(t.gg,e._a[j],u.year);r=defaults(t.w,u.week);if(t.d!=null){i=t.d;if(i<0||i>6){c=true}}else if(t.e!=null){i=t.e+s;if(t.e<0||t.e>6){c=true}}else{i=s}}if(r<1||r>weeksInYear(n,s,o)){getParsingFlags(e)._overflowWeeks=true}else if(c!=null){getParsingFlags(e)._overflowWeekday=true}else{a=dayOfYearFromWeeks(n,r,i,s,o);e._a[j]=a.year;e._dayOfYear=a.dayOfYear}}hooks.ISO_8601=function(){};hooks.RFC_2822=function(){};function configFromStringAndFormat(e){if(e._f===hooks.ISO_8601){configFromISO(e);return}if(e._f===hooks.RFC_2822){configFromRFC2822(e);return}e._a=[];getParsingFlags(e).empty=true;var t=""+e._i,n,r,i,s,o,a=t.length,u=0,l,f;i=expandFormat(e._f,e._locale).match(c)||[];f=i.length;for(n=0;n<f;n++){s=i[n];r=(t.match(getParseRegexForToken(s,e))||[])[0];if(r){o=t.substr(0,t.indexOf(r));if(o.length>0){getParsingFlags(e).unusedInput.push(o)}t=t.slice(t.indexOf(r)+r.length);u+=r.length}if(d[s]){if(r){getParsingFlags(e).empty=false}else{getParsingFlags(e).unusedTokens.push(s)}addTimeToArrayFromToken(s,r,e)}else if(e._strict&&!r){getParsingFlags(e).unusedTokens.push(s)}}getParsingFlags(e).charsLeftOver=a-u;if(t.length>0){getParsingFlags(e).unusedInput.push(t)}if(e._a[U]<=12&&getParsingFlags(e).bigHour===true&&e._a[U]>0){getParsingFlags(e).bigHour=undefined}getParsingFlags(e).parsedDateParts=e._a.slice(0);getParsingFlags(e).meridiem=e._meridiem;e._a[U]=meridiemFixWrap(e._locale,e._a[U],e._meridiem);l=getParsingFlags(e).era;if(l!==null){e._a[j]=e._locale.erasConvertYear(l,e._a[j])}configFromArray(e);checkOverflow(e)}function meridiemFixWrap(e,t,n){var r;if(n==null){return t}if(e.meridiemHour!=null){return e.meridiemHour(t,n)}else if(e.isPM!=null){r=e.isPM(n);if(r&&t<12){t+=12}if(!r&&t===12){t=0}return t}else{return t}}function configFromStringAndArray(e){var t,n,r,i,s,o,a=false,c=e._f.length;if(c===0){getParsingFlags(e).invalidFormat=true;e._d=new Date(NaN);return}for(i=0;i<c;i++){s=0;o=false;t=copyConfig({},e);if(e._useUTC!=null){t._useUTC=e._useUTC}t._f=e._f[i];configFromStringAndFormat(t);if(isValid(t)){o=true}s+=getParsingFlags(t).charsLeftOver;s+=getParsingFlags(t).unusedTokens.length*10;getParsingFlags(t).score=s;if(!a){if(r==null||s<r||o){r=s;n=t;if(o){a=true}}}else{if(s<r){r=s;n=t}}}extend(e,n||t)}function configFromObject(e){if(e._d){return}var t=normalizeObjectUnits(e._i),n=t.day===undefined?t.date:t.day;e._a=map([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)}));configFromArray(e)}function createFromConfig(e){var t=new Moment(checkOverflow(prepareConfig(e)));if(t._nextDay){t.add(1,"d");t._nextDay=undefined}return t}function prepareConfig(e){var t=e._i,n=e._f;e._locale=e._locale||getLocale(e._l);if(t===null||n===undefined&&t===""){return createInvalid({nullInput:true})}if(typeof t==="string"){e._i=t=e._locale.preparse(t)}if(isMoment(t)){return new Moment(checkOverflow(t))}else if(isDate(t)){e._d=t}else if(isArray(n)){configFromStringAndArray(e)}else if(n){configFromStringAndFormat(e)}else{configFromInput(e)}if(!isValid(e)){e._d=null}return e}function configFromInput(e){var t=e._i;if(isUndefined(t)){e._d=new Date(hooks.now())}else if(isDate(t)){e._d=new Date(t.valueOf())}else if(typeof t==="string"){configFromString(e)}else if(isArray(t)){e._a=map(t.slice(0),(function(e){return parseInt(e,10)}));configFromArray(e)}else if(isObject(t)){configFromObject(e)}else if(isNumber(t)){e._d=new Date(t)}else{hooks.createFromInputFallback(e)}}function createLocalOrUTC(e,t,n,r,i){var s={};if(t===true||t===false){r=t;t=undefined}if(n===true||n===false){r=n;n=undefined}if(isObject(e)&&isObjectEmpty(e)||isArray(e)&&e.length===0){e=undefined}s._isAMomentObject=true;s._useUTC=s._isUTC=i;s._l=n;s._i=e;s._f=t;s._strict=r;return createFromConfig(s)}function createLocal(e,t,n,r){return createLocalOrUTC(e,t,n,r,false)}var Se=deprecate("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=createLocal.apply(null,arguments);if(this.isValid()&&e.isValid()){return e<this?this:e}else{return createInvalid()}})),we=deprecate("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=createLocal.apply(null,arguments);if(this.isValid()&&e.isValid()){return e>this?this:e}else{return createInvalid()}}));function pickBy(e,t){var n,r;if(t.length===1&&isArray(t[0])){t=t[0]}if(!t.length){return createLocal()}n=t[0];for(r=1;r<t.length;++r){if(!t[r].isValid()||t[r][e](n)){n=t[r]}}return n}function min(){var e=[].slice.call(arguments,0);return pickBy("isBefore",e)}function max(){var e=[].slice.call(arguments,0);return pickBy("isAfter",e)}var now=function(){return Date.now?Date.now():+new Date};var Te=["year","quarter","month","week","day","hour","minute","second","millisecond"];function isDurationValid(e){var t,n=false,r,i=Te.length;for(t in e){if(hasOwnProp(e,t)&&!(K.call(Te,t)!==-1&&(e[t]==null||!isNaN(e[t])))){return false}}for(r=0;r<i;++r){if(e[Te[r]]){if(n){return false}if(parseFloat(e[Te[r]])!==toInt(e[Te[r]])){n=true}}}return true}function isValid$1(){return this._isValid}function createInvalid$1(){return createDuration(NaN)}function Duration(e){var t=normalizeObjectUnits(e),n=t.year||0,r=t.quarter||0,i=t.month||0,s=t.week||t.isoWeek||0,o=t.day||0,a=t.hour||0,c=t.minute||0,u=t.second||0,l=t.millisecond||0;this._isValid=isDurationValid(t);this._milliseconds=+l+u*1e3+c*6e4+a*1e3*60*60;this._days=+o+s*7;this._months=+i+r*3+n*12;this._data={};this._locale=getLocale();this._bubble()}function isDuration(e){return e instanceof Duration}function absRound(e){if(e<0){return Math.round(-1*e)*-1}else{return Math.round(e)}}function compareArrays(e,t,n){var r=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),s=0,o;for(o=0;o<r;o++){if(n&&e[o]!==t[o]||!n&&toInt(e[o])!==toInt(t[o])){s++}}return s+i}function offset(e,t){addFormatToken(e,0,0,(function(){var e=this.utcOffset(),n="+";if(e<0){e=-e;n="-"}return n+zeroFill(~~(e/60),2)+t+zeroFill(~~e%60,2)}))}offset("Z",":");offset("ZZ","");addRegexToken("Z",M);addRegexToken("ZZ",M);addParseToken(["Z","ZZ"],(function(e,t,n){n._useUTC=true;n._tzm=offsetFromString(M,e)}));var ke=/([\+\-]|\d\d)/gi;function offsetFromString(e,t){var n=(t||"").match(e),r,i,s;if(n===null){return null}r=n[n.length-1]||[];i=(r+"").match(ke)||["-",0,0];s=+(i[1]*60)+toInt(i[2]);return s===0?0:i[0]==="+"?s:-s}function cloneWithOffset(e,t){var n,r;if(t._isUTC){n=t.clone();r=(isMoment(e)||isDate(e)?e.valueOf():createLocal(e).valueOf())-n.valueOf();n._d.setTime(n._d.valueOf()+r);hooks.updateOffset(n,false);return n}else{return createLocal(e).local()}}function getDateOffset(e){return-Math.round(e._d.getTimezoneOffset())}hooks.updateOffset=function(){};function getSetOffset(e,t,n){var r=this._offset||0,i;if(!this.isValid()){return e!=null?this:NaN}if(e!=null){if(typeof e==="string"){e=offsetFromString(M,e);if(e===null){return this}}else if(Math.abs(e)<16&&!n){e=e*60}if(!this._isUTC&&t){i=getDateOffset(this)}this._offset=e;this._isUTC=true;if(i!=null){this.add(i,"m")}if(r!==e){if(!t||this._changeInProgress){addSubtract(this,createDuration(e-r,"m"),1,false)}else if(!this._changeInProgress){this._changeInProgress=true;hooks.updateOffset(this,true);this._changeInProgress=null}}return this}else{return this._isUTC?r:getDateOffset(this)}}function getSetZone(e,t){if(e!=null){if(typeof e!=="string"){e=-e}this.utcOffset(e,t);return this}else{return-this.utcOffset()}}function setOffsetToUTC(e){return this.utcOffset(0,e)}function setOffsetToLocal(e){if(this._isUTC){this.utcOffset(0,e);this._isUTC=false;if(e){this.subtract(getDateOffset(this),"m")}}return this}function setOffsetToParsedOffset(){if(this._tzm!=null){this.utcOffset(this._tzm,false,true)}else if(typeof this._i==="string"){var e=offsetFromString(I,this._i);if(e!=null){this.utcOffset(e)}else{this.utcOffset(0,true)}}return this}function hasAlignedHourOffset(e){if(!this.isValid()){return false}e=e?createLocal(e).utcOffset():0;return(this.utcOffset()-e)%60===0}function isDaylightSavingTime(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function isDaylightSavingTimeShifted(){if(!isUndefined(this._isDSTShifted)){return this._isDSTShifted}var e={},t;copyConfig(e,this);e=prepareConfig(e);if(e._a){t=e._isUTC?createUTC(e._a):createLocal(e._a);this._isDSTShifted=this.isValid()&&compareArrays(e._a,t.toArray())>0}else{this._isDSTShifted=false}return this._isDSTShifted}function isLocal(){return this.isValid()?!this._isUTC:false}function isUtcOffset(){return this.isValid()?this._isUTC:false}function isUtc(){return this.isValid()?this._isUTC&&this._offset===0:false}var Ce=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Ee=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function createDuration(e,t){var n=e,r=null,i,s,o;if(isDuration(e)){n={ms:e._milliseconds,d:e._days,M:e._months}}else if(isNumber(e)||!isNaN(+e)){n={};if(t){n[t]=+e}else{n.milliseconds=+e}}else if(r=Ce.exec(e)){i=r[1]==="-"?-1:1;n={y:0,d:toInt(r[$])*i,h:toInt(r[U])*i,m:toInt(r[H])*i,s:toInt(r[W])*i,ms:toInt(absRound(r[B]*1e3))*i}}else if(r=Ee.exec(e)){i=r[1]==="-"?-1:1;n={y:parseIso(r[2],i),M:parseIso(r[3],i),w:parseIso(r[4],i),d:parseIso(r[5],i),h:parseIso(r[6],i),m:parseIso(r[7],i),s:parseIso(r[8],i)}}else if(n==null){n={}}else if(typeof n==="object"&&("from"in n||"to"in n)){o=momentsDifference(createLocal(n.from),createLocal(n.to));n={};n.ms=o.milliseconds;n.M=o.months}s=new Duration(n);if(isDuration(e)&&hasOwnProp(e,"_locale")){s._locale=e._locale}if(isDuration(e)&&hasOwnProp(e,"_isValid")){s._isValid=e._isValid}return s}createDuration.fn=Duration.prototype;createDuration.invalid=createInvalid$1;function parseIso(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function positiveMomentsDifference(e,t){var n={};n.months=t.month()-e.month()+(t.year()-e.year())*12;if(e.clone().add(n.months,"M").isAfter(t)){--n.months}n.milliseconds=+t-+e.clone().add(n.months,"M");return n}function momentsDifference(e,t){var n;if(!(e.isValid()&&t.isValid())){return{milliseconds:0,months:0}}t=cloneWithOffset(t,e);if(e.isBefore(t)){n=positiveMomentsDifference(e,t)}else{n=positiveMomentsDifference(t,e);n.milliseconds=-n.milliseconds;n.months=-n.months}return n}function createAdder(e,t){return function(n,r){var i,s;if(r!==null&&!isNaN(+r)){deprecateSimple(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). "+"See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.");s=n;n=r;r=s}i=createDuration(n,r);addSubtract(this,i,e);return this}}function addSubtract(e,t,n,r){var i=t._milliseconds,s=absRound(t._days),o=absRound(t._months);if(!e.isValid()){return}r=r==null?true:r;if(o){setMonth(e,get(e,"Month")+o*n)}if(s){set$1(e,"Date",get(e,"Date")+s*n)}if(i){e._d.setTime(e._d.valueOf()+i*n)}if(r){hooks.updateOffset(e,s||o)}}var Re=createAdder(1,"add"),xe=createAdder(-1,"subtract");function isString(e){return typeof e==="string"||e instanceof String}function isMomentInput(e){return isMoment(e)||isDate(e)||isString(e)||isNumber(e)||isNumberOrStringArray(e)||isMomentInputObject(e)||e===null||e===undefined}function isMomentInputObject(e){var t=isObject(e)&&!isObjectEmpty(e),n=false,r=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],i,s,o=r.length;for(i=0;i<o;i+=1){s=r[i];n=n||hasOwnProp(e,s)}return t&&n}function isNumberOrStringArray(e){var t=isArray(e),n=false;if(t){n=e.filter((function(t){return!isNumber(t)&&isString(e)})).length===0}return t&&n}function isCalendarSpec(e){var t=isObject(e)&&!isObjectEmpty(e),n=false,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],i,s;for(i=0;i<r.length;i+=1){s=r[i];n=n||hasOwnProp(e,s)}return t&&n}function getCalendarFormat(e,t){var n=e.diff(t,"days",true);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function calendar$1(e,t){if(arguments.length===1){if(!arguments[0]){e=undefined;t=undefined}else if(isMomentInput(arguments[0])){e=arguments[0];t=undefined}else if(isCalendarSpec(arguments[0])){t=arguments[0];e=undefined}}var n=e||createLocal(),r=cloneWithOffset(n,this).startOf("day"),i=hooks.calendarFormat(this,r)||"sameElse",s=t&&(isFunction(t[i])?t[i].call(this,n):t[i]);return this.format(s||this.localeData().calendar(i,this,createLocal(n)))}function clone(){return new Moment(this)}function isAfter(e,t){var n=isMoment(e)?e:createLocal(e);if(!(this.isValid()&&n.isValid())){return false}t=normalizeUnits(t)||"millisecond";if(t==="millisecond"){return this.valueOf()>n.valueOf()}else{return n.valueOf()<this.clone().startOf(t).valueOf()}}function isBefore(e,t){var n=isMoment(e)?e:createLocal(e);if(!(this.isValid()&&n.isValid())){return false}t=normalizeUnits(t)||"millisecond";if(t==="millisecond"){return this.valueOf()<n.valueOf()}else{return this.clone().endOf(t).valueOf()<n.valueOf()}}function isBetween(e,t,n,r){var i=isMoment(e)?e:createLocal(e),s=isMoment(t)?t:createLocal(t);if(!(this.isValid()&&i.isValid()&&s.isValid())){return false}r=r||"()";return(r[0]==="("?this.isAfter(i,n):!this.isBefore(i,n))&&(r[1]===")"?this.isBefore(s,n):!this.isAfter(s,n))}function isSame(e,t){var n=isMoment(e)?e:createLocal(e),r;if(!(this.isValid()&&n.isValid())){return false}t=normalizeUnits(t)||"millisecond";if(t==="millisecond"){return this.valueOf()===n.valueOf()}else{r=n.valueOf();return this.clone().startOf(t).valueOf()<=r&&r<=this.clone().endOf(t).valueOf()}}function isSameOrAfter(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function isSameOrBefore(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function diff(e,t,n){var r,i,s;if(!this.isValid()){return NaN}r=cloneWithOffset(e,this);if(!r.isValid()){return NaN}i=(r.utcOffset()-this.utcOffset())*6e4;t=normalizeUnits(t);switch(t){case"year":s=monthDiff(this,r)/12;break;case"month":s=monthDiff(this,r);break;case"quarter":s=monthDiff(this,r)/3;break;case"second":s=(this-r)/1e3;break;case"minute":s=(this-r)/6e4;break;case"hour":s=(this-r)/36e5;break;case"day":s=(this-r-i)/864e5;break;case"week":s=(this-r-i)/6048e5;break;default:s=this-r}return n?s:absFloor(s)}function monthDiff(e,t){if(e.date()<t.date()){return-monthDiff(t,e)}var n=(t.year()-e.year())*12+(t.month()-e.month()),r=e.clone().add(n,"months"),i,s;if(t-r<0){i=e.clone().add(n-1,"months");s=(t-r)/(r-i)}else{i=e.clone().add(n+1,"months");s=(t-r)/(i-r)}return-(n+s)||0}hooks.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";hooks.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function toString(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function toISOString(e){if(!this.isValid()){return null}var t=e!==true,n=t?this.clone().utc():this;if(n.year()<0||n.year()>9999){return formatMoment(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ")}if(isFunction(Date.prototype.toISOString)){if(t){return this.toDate().toISOString()}else{return new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",formatMoment(n,"Z"))}}return formatMoment(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function inspect(){if(!this.isValid()){return"moment.invalid(/* "+this._i+" */)"}var e="moment",t="",n,r,i,s;if(!this.isLocal()){e=this.utcOffset()===0?"moment.utc":"moment.parseZone";t="Z"}n="["+e+'("]';r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY";i="-MM-DD[T]HH:mm:ss.SSS";s=t+'[")]';return this.format(n+r+i+s)}function format(e){if(!e){e=this.isUtc()?hooks.defaultFormatUtc:hooks.defaultFormat}var t=formatMoment(this,e);return this.localeData().postformat(t)}function from(e,t){if(this.isValid()&&(isMoment(e)&&e.isValid()||createLocal(e).isValid())){return createDuration({to:this,from:e}).locale(this.locale()).humanize(!t)}else{return this.localeData().invalidDate()}}function fromNow(e){return this.from(createLocal(),e)}function to(e,t){if(this.isValid()&&(isMoment(e)&&e.isValid()||createLocal(e).isValid())){return createDuration({from:this,to:e}).locale(this.locale()).humanize(!t)}else{return this.localeData().invalidDate()}}function toNow(e){return this.to(createLocal(),e)}function locale(e){var t;if(e===undefined){return this._locale._abbr}else{t=getLocale(e);if(t!=null){this._locale=t}return this}}var Oe=deprecate("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){if(e===undefined){return this.localeData()}else{return this.locale(e)}}));function localeData(){return this._locale}var De=1e3,Pe=60*De,Ie=60*Pe,Me=(365*400+97)*24*Ie;function mod$1(e,t){return(e%t+t)%t}function localStartOfDate(e,t,n){if(e<100&&e>=0){return new Date(e+400,t,n)-Me}else{return new Date(e,t,n).valueOf()}}function utcStartOfDate(e,t,n){if(e<100&&e>=0){return Date.UTC(e+400,t,n)-Me}else{return Date.UTC(e,t,n)}}function startOf(e){var t,n;e=normalizeUnits(e);if(e===undefined||e==="millisecond"||!this.isValid()){return this}n=this._isUTC?utcStartOfDate:localStartOfDate;switch(e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf();t-=mod$1(t+(this._isUTC?0:this.utcOffset()*Pe),Ie);break;case"minute":t=this._d.valueOf();t-=mod$1(t,Pe);break;case"second":t=this._d.valueOf();t-=mod$1(t,De);break}this._d.setTime(t);hooks.updateOffset(this,true);return this}function endOf(e){var t,n;e=normalizeUnits(e);if(e===undefined||e==="millisecond"||!this.isValid()){return this}n=this._isUTC?utcStartOfDate:localStartOfDate;switch(e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf();t+=Ie-mod$1(t+(this._isUTC?0:this.utcOffset()*Pe),Ie)-1;break;case"minute":t=this._d.valueOf();t+=Pe-mod$1(t,Pe)-1;break;case"second":t=this._d.valueOf();t+=De-mod$1(t,De)-1;break}this._d.setTime(t);hooks.updateOffset(this,true);return this}function valueOf(){return this._d.valueOf()-(this._offset||0)*6e4}function unix(){return Math.floor(this.valueOf()/1e3)}function toDate(){return new Date(this.valueOf())}function toArray(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function toObject(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function toJSON(){return this.isValid()?this.toISOString():null}function isValid$2(){return isValid(this)}function parsingFlags(){return extend({},getParsingFlags(this))}function invalidAt(){return getParsingFlags(this).overflow}function creationData(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}addFormatToken("N",0,0,"eraAbbr");addFormatToken("NN",0,0,"eraAbbr");addFormatToken("NNN",0,0,"eraAbbr");addFormatToken("NNNN",0,0,"eraName");addFormatToken("NNNNN",0,0,"eraNarrow");addFormatToken("y",["y",1],"yo","eraYear");addFormatToken("y",["yy",2],0,"eraYear");addFormatToken("y",["yyy",3],0,"eraYear");addFormatToken("y",["yyyy",4],0,"eraYear");addRegexToken("N",matchEraAbbr);addRegexToken("NN",matchEraAbbr);addRegexToken("NNN",matchEraAbbr);addRegexToken("NNNN",matchEraName);addRegexToken("NNNNN",matchEraNarrow);addParseToken(["N","NN","NNN","NNNN","NNNNN"],(function(e,t,n,r){var i=n._locale.erasParse(e,r,n._strict);if(i){getParsingFlags(n).era=i}else{getParsingFlags(n).invalidEra=e}}));addRegexToken("y",D);addRegexToken("yy",D);addRegexToken("yyy",D);addRegexToken("yyyy",D);addRegexToken("yo",matchEraYearOrdinal);addParseToken(["y","yy","yyy","yyyy"],j);addParseToken(["yo"],(function(e,t,n,r){var i;if(n._locale._eraYearOrdinalRegex){i=e.match(n._locale._eraYearOrdinalRegex)}if(n._locale.eraYearOrdinalParse){t[j]=n._locale.eraYearOrdinalParse(e,i)}else{t[j]=parseInt(e,10)}}));function localeEras(e,t){var n,r,i,s=this._eras||getLocale("en")._eras;for(n=0,r=s.length;n<r;++n){switch(typeof s[n].since){case"string":i=hooks(s[n].since).startOf("day");s[n].since=i.valueOf();break}switch(typeof s[n].until){case"undefined":s[n].until=+Infinity;break;case"string":i=hooks(s[n].until).startOf("day").valueOf();s[n].until=i.valueOf();break}}return s}function localeErasParse(e,t,n){var r,i,s=this.eras(),o,a,c;e=e.toUpperCase();for(r=0,i=s.length;r<i;++r){o=s[r].name.toUpperCase();a=s[r].abbr.toUpperCase();c=s[r].narrow.toUpperCase();if(n){switch(t){case"N":case"NN":case"NNN":if(a===e){return s[r]}break;case"NNNN":if(o===e){return s[r]}break;case"NNNNN":if(c===e){return s[r]}break}}else if([o,a,c].indexOf(e)>=0){return s[r]}}}function localeErasConvertYear(e,t){var n=e.since<=e.until?+1:-1;if(t===undefined){return hooks(e.since).year()}else{return hooks(e.since).year()+(t-e.offset)*n}}function getEraName(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){n=this.clone().startOf("day").valueOf();if(r[e].since<=n&&n<=r[e].until){return r[e].name}if(r[e].until<=n&&n<=r[e].since){return r[e].name}}return""}function getEraNarrow(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){n=this.clone().startOf("day").valueOf();if(r[e].since<=n&&n<=r[e].until){return r[e].narrow}if(r[e].until<=n&&n<=r[e].since){return r[e].narrow}}return""}function getEraAbbr(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){n=this.clone().startOf("day").valueOf();if(r[e].since<=n&&n<=r[e].until){return r[e].abbr}if(r[e].until<=n&&n<=r[e].since){return r[e].abbr}}return""}function getEraYear(){var e,t,n,r,i=this.localeData().eras();for(e=0,t=i.length;e<t;++e){n=i[e].since<=i[e].until?+1:-1;r=this.clone().startOf("day").valueOf();if(i[e].since<=r&&r<=i[e].until||i[e].until<=r&&r<=i[e].since){return(this.year()-hooks(i[e].since).year())*n+i[e].offset}}return this.year()}function erasNameRegex(e){if(!hasOwnProp(this,"_erasNameRegex")){computeErasParse.call(this)}return e?this._erasNameRegex:this._erasRegex}function erasAbbrRegex(e){if(!hasOwnProp(this,"_erasAbbrRegex")){computeErasParse.call(this)}return e?this._erasAbbrRegex:this._erasRegex}function erasNarrowRegex(e){if(!hasOwnProp(this,"_erasNarrowRegex")){computeErasParse.call(this)}return e?this._erasNarrowRegex:this._erasRegex}function matchEraAbbr(e,t){return t.erasAbbrRegex(e)}function matchEraName(e,t){return t.erasNameRegex(e)}function matchEraNarrow(e,t){return t.erasNarrowRegex(e)}function matchEraYearOrdinal(e,t){return t._eraYearOrdinalRegex||D}function computeErasParse(){var e=[],t=[],n=[],r=[],i,s,o=this.eras();for(i=0,s=o.length;i<s;++i){t.push(regexEscape(o[i].name));e.push(regexEscape(o[i].abbr));n.push(regexEscape(o[i].narrow));r.push(regexEscape(o[i].name));r.push(regexEscape(o[i].abbr));r.push(regexEscape(o[i].narrow))}this._erasRegex=new RegExp("^("+r.join("|")+")","i");this._erasNameRegex=new RegExp("^("+t.join("|")+")","i");this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i");this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}addFormatToken(0,["gg",2],0,(function(){return this.weekYear()%100}));addFormatToken(0,["GG",2],0,(function(){return this.isoWeekYear()%100}));function addWeekYearFormatToken(e,t){addFormatToken(0,[e,e.length],0,t)}addWeekYearFormatToken("gggg","weekYear");addWeekYearFormatToken("ggggg","weekYear");addWeekYearFormatToken("GGGG","isoWeekYear");addWeekYearFormatToken("GGGGG","isoWeekYear");addUnitAlias("weekYear","gg");addUnitAlias("isoWeekYear","GG");addUnitPriority("weekYear",1);addUnitPriority("isoWeekYear",1);addRegexToken("G",P);addRegexToken("g",P);addRegexToken("GG",k,_);addRegexToken("gg",k,_);addRegexToken("GGGG",x,w);addRegexToken("gggg",x,w);addRegexToken("GGGGG",O,T);addRegexToken("ggggg",O,T);addWeekParseToken(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,n,r){t[r.substr(0,2)]=toInt(e)}));addWeekParseToken(["gg","GG"],(function(e,t,n,r){t[r]=hooks.parseTwoDigitYear(e)}));function getSetWeekYear(e){return getSetWeekYearHelper.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function getSetISOWeekYear(e){return getSetWeekYearHelper.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function getISOWeeksInYear(){return weeksInYear(this.year(),1,4)}function getISOWeeksInISOWeekYear(){return weeksInYear(this.isoWeekYear(),1,4)}function getWeeksInYear(){var e=this.localeData()._week;return weeksInYear(this.year(),e.dow,e.doy)}function getWeeksInWeekYear(){var e=this.localeData()._week;return weeksInYear(this.weekYear(),e.dow,e.doy)}function getSetWeekYearHelper(e,t,n,r,i){var s;if(e==null){return weekOfYear(this,r,i).year}else{s=weeksInYear(e,r,i);if(t>s){t=s}return setWeekAll.call(this,e,t,n,r,i)}}function setWeekAll(e,t,n,r,i){var s=dayOfYearFromWeeks(e,t,n,r,i),o=createUTCDate(s.year,0,s.dayOfYear);this.year(o.getUTCFullYear());this.month(o.getUTCMonth());this.date(o.getUTCDate());return this}addFormatToken("Q",0,"Qo","quarter");addUnitAlias("quarter","Q");addUnitPriority("quarter",7);addRegexToken("Q",b);addParseToken("Q",(function(e,t){t[q]=(toInt(e)-1)*3}));function getSetQuarter(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}addFormatToken("D",["DD",2],"Do","date");addUnitAlias("date","D");addUnitPriority("date",9);addRegexToken("D",k);addRegexToken("DD",k,_);addRegexToken("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}));addParseToken(["D","DD"],$);addParseToken("Do",(function(e,t){t[$]=toInt(e.match(k)[0])}));var Ne=makeGetSet("Date",true);addFormatToken("DDD",["DDDD",3],"DDDo","dayOfYear");addUnitAlias("dayOfYear","DDD");addUnitPriority("dayOfYear",4);addRegexToken("DDD",R);addRegexToken("DDDD",S);addParseToken(["DDD","DDDD"],(function(e,t,n){n._dayOfYear=toInt(e)}));function getSetDayOfYear(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}addFormatToken("m",["mm",2],0,"minute");addUnitAlias("minute","m");addUnitPriority("minute",14);addRegexToken("m",k);addRegexToken("mm",k,_);addParseToken(["m","mm"],H);var Ae=makeGetSet("Minutes",false);addFormatToken("s",["ss",2],0,"second");addUnitAlias("second","s");addUnitPriority("second",15);addRegexToken("s",k);addRegexToken("ss",k,_);addParseToken(["s","ss"],W);var Fe=makeGetSet("Seconds",false);addFormatToken("S",0,0,(function(){return~~(this.millisecond()/100)}));addFormatToken(0,["SS",2],0,(function(){return~~(this.millisecond()/10)}));addFormatToken(0,["SSS",3],0,"millisecond");addFormatToken(0,["SSSS",4],0,(function(){return this.millisecond()*10}));addFormatToken(0,["SSSSS",5],0,(function(){return this.millisecond()*100}));addFormatToken(0,["SSSSSS",6],0,(function(){return this.millisecond()*1e3}));addFormatToken(0,["SSSSSSS",7],0,(function(){return this.millisecond()*1e4}));addFormatToken(0,["SSSSSSSS",8],0,(function(){return this.millisecond()*1e5}));addFormatToken(0,["SSSSSSSSS",9],0,(function(){return this.millisecond()*1e6}));addUnitAlias("millisecond","ms");addUnitPriority("millisecond",16);addRegexToken("S",R,b);addRegexToken("SS",R,_);addRegexToken("SSS",R,S);var Le,je;for(Le="SSSS";Le.length<=9;Le+="S"){addRegexToken(Le,D)}function parseMs(e,t){t[B]=toInt(("0."+e)*1e3)}for(Le="S";Le.length<=9;Le+="S"){addParseToken(Le,parseMs)}je=makeGetSet("Milliseconds",false);addFormatToken("z",0,0,"zoneAbbr");addFormatToken("zz",0,0,"zoneName");function getZoneAbbr(){return this._isUTC?"UTC":""}function getZoneName(){return this._isUTC?"Coordinated Universal Time":""}var qe=Moment.prototype;qe.add=Re;qe.calendar=calendar$1;qe.clone=clone;qe.diff=diff;qe.endOf=endOf;qe.format=format;qe.from=from;qe.fromNow=fromNow;qe.to=to;qe.toNow=toNow;qe.get=stringGet;qe.invalidAt=invalidAt;qe.isAfter=isAfter;qe.isBefore=isBefore;qe.isBetween=isBetween;qe.isSame=isSame;qe.isSameOrAfter=isSameOrAfter;qe.isSameOrBefore=isSameOrBefore;qe.isValid=isValid$2;qe.lang=Oe;qe.locale=locale;qe.localeData=localeData;qe.max=we;qe.min=Se;qe.parsingFlags=parsingFlags;qe.set=stringSet;qe.startOf=startOf;qe.subtract=xe;qe.toArray=toArray;qe.toObject=toObject;qe.toDate=toDate;qe.toISOString=toISOString;qe.inspect=inspect;if(typeof Symbol!=="undefined"&&Symbol.for!=null){qe[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}}qe.toJSON=toJSON;qe.toString=toString;qe.unix=unix;qe.valueOf=valueOf;qe.creationData=creationData;qe.eraName=getEraName;qe.eraNarrow=getEraNarrow;qe.eraAbbr=getEraAbbr;qe.eraYear=getEraYear;qe.year=Z;qe.isLeapYear=getIsLeapYear;qe.weekYear=getSetWeekYear;qe.isoWeekYear=getSetISOWeekYear;qe.quarter=qe.quarters=getSetQuarter;qe.month=getSetMonth;qe.daysInMonth=getDaysInMonth;qe.week=qe.weeks=getSetWeek;qe.isoWeek=qe.isoWeeks=getSetISOWeek;qe.weeksInYear=getWeeksInYear;qe.weeksInWeekYear=getWeeksInWeekYear;qe.isoWeeksInYear=getISOWeeksInYear;qe.isoWeeksInISOWeekYear=getISOWeeksInISOWeekYear;qe.date=Ne;qe.day=qe.days=getSetDayOfWeek;qe.weekday=getSetLocaleDayOfWeek;qe.isoWeekday=getSetISODayOfWeek;qe.dayOfYear=getSetDayOfYear;qe.hour=qe.hours=ce;qe.minute=qe.minutes=Ae;qe.second=qe.seconds=Fe;qe.millisecond=qe.milliseconds=je;qe.utcOffset=getSetOffset;qe.utc=setOffsetToUTC;qe.local=setOffsetToLocal;qe.parseZone=setOffsetToParsedOffset;qe.hasAlignedHourOffset=hasAlignedHourOffset;qe.isDST=isDaylightSavingTime;qe.isLocal=isLocal;qe.isUtcOffset=isUtcOffset;qe.isUtc=isUtc;qe.isUTC=isUtc;qe.zoneAbbr=getZoneAbbr;qe.zoneName=getZoneName;qe.dates=deprecate("dates accessor is deprecated. Use date instead.",Ne);qe.months=deprecate("months accessor is deprecated. Use month instead",getSetMonth);qe.years=deprecate("years accessor is deprecated. Use year instead",Z);qe.zone=deprecate("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",getSetZone);qe.isDSTShifted=deprecate("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",isDaylightSavingTimeShifted);function createUnix(e){return createLocal(e*1e3)}function createInZone(){return createLocal.apply(null,arguments).parseZone()}function preParsePostFormat(e){return e}var $e=Locale.prototype;$e.calendar=calendar;$e.longDateFormat=longDateFormat;$e.invalidDate=invalidDate;$e.ordinal=ordinal;$e.preparse=preParsePostFormat;$e.postformat=preParsePostFormat;$e.relativeTime=relativeTime;$e.pastFuture=pastFuture;$e.set=set;$e.eras=localeEras;$e.erasParse=localeErasParse;$e.erasConvertYear=localeErasConvertYear;$e.erasAbbrRegex=erasAbbrRegex;$e.erasNameRegex=erasNameRegex;$e.erasNarrowRegex=erasNarrowRegex;$e.months=localeMonths;$e.monthsShort=localeMonthsShort;$e.monthsParse=localeMonthsParse;$e.monthsRegex=monthsRegex;$e.monthsShortRegex=monthsShortRegex;$e.week=localeWeek;$e.firstDayOfYear=localeFirstDayOfYear;$e.firstDayOfWeek=localeFirstDayOfWeek;$e.weekdays=localeWeekdays;$e.weekdaysMin=localeWeekdaysMin;$e.weekdaysShort=localeWeekdaysShort;$e.weekdaysParse=localeWeekdaysParse;$e.weekdaysRegex=weekdaysRegex;$e.weekdaysShortRegex=weekdaysShortRegex;$e.weekdaysMinRegex=weekdaysMinRegex;$e.isPM=localeIsPM;$e.meridiem=localeMeridiem;function get$1(e,t,n,r){var i=getLocale(),s=createUTC().set(r,t);return i[n](s,e)}function listMonthsImpl(e,t,n){if(isNumber(e)){t=e;e=undefined}e=e||"";if(t!=null){return get$1(e,t,n,"month")}var r,i=[];for(r=0;r<12;r++){i[r]=get$1(e,r,n,"month")}return i}function listWeekdaysImpl(e,t,n,r){if(typeof e==="boolean"){if(isNumber(t)){n=t;t=undefined}t=t||""}else{t=e;n=t;e=false;if(isNumber(t)){n=t;t=undefined}t=t||""}var i=getLocale(),s=e?i._week.dow:0,o,a=[];if(n!=null){return get$1(t,(n+s)%7,r,"day")}for(o=0;o<7;o++){a[o]=get$1(t,(o+s)%7,r,"day")}return a}function listMonths(e,t){return listMonthsImpl(e,t,"months")}function listMonthsShort(e,t){return listMonthsImpl(e,t,"monthsShort")}function listWeekdays(e,t,n){return listWeekdaysImpl(e,t,n,"weekdays")}function listWeekdaysShort(e,t,n){return listWeekdaysImpl(e,t,n,"weekdaysShort")}function listWeekdaysMin(e,t,n){return listWeekdaysImpl(e,t,n,"weekdaysMin")}getSetGlobalLocale("en",{eras:[{since:"0001-01-01",until:+Infinity,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-Infinity,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=toInt(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}});hooks.lang=deprecate("moment.lang is deprecated. Use moment.locale instead.",getSetGlobalLocale);hooks.langData=deprecate("moment.langData is deprecated. Use moment.localeData instead.",getLocale);var Ue=Math.abs;function abs(){var e=this._data;this._milliseconds=Ue(this._milliseconds);this._days=Ue(this._days);this._months=Ue(this._months);e.milliseconds=Ue(e.milliseconds);e.seconds=Ue(e.seconds);e.minutes=Ue(e.minutes);e.hours=Ue(e.hours);e.months=Ue(e.months);e.years=Ue(e.years);return this}function addSubtract$1(e,t,n,r){var i=createDuration(t,n);e._milliseconds+=r*i._milliseconds;e._days+=r*i._days;e._months+=r*i._months;return e._bubble()}function add$1(e,t){return addSubtract$1(this,e,t,1)}function subtract$1(e,t){return addSubtract$1(this,e,t,-1)}function absCeil(e){if(e<0){return Math.floor(e)}else{return Math.ceil(e)}}function bubble(){var e=this._milliseconds,t=this._days,n=this._months,r=this._data,i,s,o,a,c;if(!(e>=0&&t>=0&&n>=0||e<=0&&t<=0&&n<=0)){e+=absCeil(monthsToDays(n)+t)*864e5;t=0;n=0}r.milliseconds=e%1e3;i=absFloor(e/1e3);r.seconds=i%60;s=absFloor(i/60);r.minutes=s%60;o=absFloor(s/60);r.hours=o%24;t+=absFloor(o/24);c=absFloor(daysToMonths(t));n+=c;t-=absCeil(monthsToDays(c));a=absFloor(n/12);n%=12;r.days=t;r.months=n;r.years=a;return this}function daysToMonths(e){return e*4800/146097}function monthsToDays(e){return e*146097/4800}function as(e){if(!this.isValid()){return NaN}var t,n,r=this._milliseconds;e=normalizeUnits(e);if(e==="month"||e==="quarter"||e==="year"){t=this._days+r/864e5;n=this._months+daysToMonths(t);switch(e){case"month":return n;case"quarter":return n/3;case"year":return n/12}}else{t=this._days+Math.round(monthsToDays(this._months));switch(e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return t*24+r/36e5;case"minute":return t*1440+r/6e4;case"second":return t*86400+r/1e3;case"millisecond":return Math.floor(t*864e5)+r;default:throw new Error("Unknown unit "+e)}}}function valueOf$1(){if(!this.isValid()){return NaN}return this._milliseconds+this._days*864e5+this._months%12*2592e6+toInt(this._months/12)*31536e6}function makeAs(e){return function(){return this.as(e)}}var He=makeAs("ms"),We=makeAs("s"),Be=makeAs("m"),Ye=makeAs("h"),Ve=makeAs("d"),Ke=makeAs("w"),Ge=makeAs("M"),ze=makeAs("Q"),Je=makeAs("y");function clone$1(){return createDuration(this)}function get$2(e){e=normalizeUnits(e);return this.isValid()?this[e+"s"]():NaN}function makeGetter(e){return function(){return this.isValid()?this._data[e]:NaN}}var Xe=makeGetter("milliseconds"),Qe=makeGetter("seconds"),Ze=makeGetter("minutes"),et=makeGetter("hours"),tt=makeGetter("days"),nt=makeGetter("months"),rt=makeGetter("years");function weeks(){return absFloor(this.days()/7)}var it=Math.round,st={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function substituteTimeAgo(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function relativeTime$1(e,t,n,r){var i=createDuration(e).abs(),s=it(i.as("s")),o=it(i.as("m")),a=it(i.as("h")),c=it(i.as("d")),u=it(i.as("M")),l=it(i.as("w")),d=it(i.as("y")),f=s<=n.ss&&["s",s]||s<n.s&&["ss",s]||o<=1&&["m"]||o<n.m&&["mm",o]||a<=1&&["h"]||a<n.h&&["hh",a]||c<=1&&["d"]||c<n.d&&["dd",c];if(n.w!=null){f=f||l<=1&&["w"]||l<n.w&&["ww",l]}f=f||u<=1&&["M"]||u<n.M&&["MM",u]||d<=1&&["y"]||["yy",d];f[2]=t;f[3]=+e>0;f[4]=r;return substituteTimeAgo.apply(null,f)}function getSetRelativeTimeRounding(e){if(e===undefined){return it}if(typeof e==="function"){it=e;return true}return false}function getSetRelativeTimeThreshold(e,t){if(st[e]===undefined){return false}if(t===undefined){return st[e]}st[e]=t;if(e==="s"){st.ss=t-1}return true}function humanize(e,t){if(!this.isValid()){return this.localeData().invalidDate()}var n=false,r=st,i,s;if(typeof e==="object"){t=e;e=false}if(typeof e==="boolean"){n=e}if(typeof t==="object"){r=Object.assign({},st,t);if(t.s!=null&&t.ss==null){r.ss=t.s-1}}i=this.localeData();s=relativeTime$1(this,!n,r,i);if(n){s=i.pastFuture(+this,s)}return i.postformat(s)}var ot=Math.abs;function sign(e){return(e>0)-(e<0)||+e}function toISOString$1(){if(!this.isValid()){return this.localeData().invalidDate()}var e=ot(this._milliseconds)/1e3,t=ot(this._days),n=ot(this._months),r,i,s,o,a=this.asSeconds(),c,u,l,d;if(!a){return"P0D"}r=absFloor(e/60);i=absFloor(r/60);e%=60;r%=60;s=absFloor(n/12);n%=12;o=e?e.toFixed(3).replace(/\.?0+$/,""):"";c=a<0?"-":"";u=sign(this._months)!==sign(a)?"-":"";l=sign(this._days)!==sign(a)?"-":"";d=sign(this._milliseconds)!==sign(a)?"-":"";return c+"P"+(s?u+s+"Y":"")+(n?u+n+"M":"")+(t?l+t+"D":"")+(i||r||e?"T":"")+(i?d+i+"H":"")+(r?d+r+"M":"")+(e?d+o+"S":"")}var at=Duration.prototype;at.isValid=isValid$1;at.abs=abs;at.add=add$1;at.subtract=subtract$1;at.as=as;at.asMilliseconds=He;at.asSeconds=We;at.asMinutes=Be;at.asHours=Ye;at.asDays=Ve;at.asWeeks=Ke;at.asMonths=Ge;at.asQuarters=ze;at.asYears=Je;at.valueOf=valueOf$1;at._bubble=bubble;at.clone=clone$1;at.get=get$2;at.milliseconds=Xe;at.seconds=Qe;at.minutes=Ze;at.hours=et;at.days=tt;at.weeks=weeks;at.months=nt;at.years=rt;at.humanize=humanize;at.toISOString=toISOString$1;at.toString=toISOString$1;at.toJSON=toISOString$1;at.locale=locale;at.localeData=localeData;at.toIsoString=deprecate("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",toISOString$1);at.lang=Oe;addFormatToken("X",0,0,"unix");addFormatToken("x",0,0,"valueOf");addRegexToken("x",P);addRegexToken("X",N);addParseToken("X",(function(e,t,n){n._d=new Date(parseFloat(e)*1e3)}));addParseToken("x",(function(e,t,n){n._d=new Date(toInt(e))}));
//! moment.js
hooks.version="2.29.3";setHookCallback(createLocal);hooks.fn=qe;hooks.min=min;hooks.max=max;hooks.now=now;hooks.utc=createUTC;hooks.unix=createUnix;hooks.months=listMonths;hooks.isDate=isDate;hooks.locale=getSetGlobalLocale;hooks.invalid=createInvalid;hooks.duration=createDuration;hooks.isMoment=isMoment;hooks.weekdays=listWeekdays;hooks.parseZone=createInZone;hooks.localeData=getLocale;hooks.isDuration=isDuration;hooks.monthsShort=listMonthsShort;hooks.weekdaysMin=listWeekdaysMin;hooks.defineLocale=defineLocale;hooks.updateLocale=updateLocale;hooks.locales=listLocales;hooks.weekdaysShort=listWeekdaysShort;hooks.normalizeUnits=normalizeUnits;hooks.relativeTimeRounding=getSetRelativeTimeRounding;hooks.relativeTimeThreshold=getSetRelativeTimeThreshold;hooks.calendarFormat=getCalendarFormat;hooks.prototype=qe;hooks.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};return hooks}))},15942:(e,t,n)=>{var r=Object.create;var i=Object.defineProperty;var s=Object.defineProperties;var o=Object.getOwnPropertyDescriptor;var a=Object.getOwnPropertyDescriptors;var c=Object.getOwnPropertyNames;var u=Object.getOwnPropertySymbols;var l=Object.getPrototypeOf;var d=Object.prototype.hasOwnProperty;var f=Object.prototype.propertyIsEnumerable;var __defNormalProp=(e,t,n)=>t in e?i(e,t,{enumerable:true,configurable:true,writable:true,value:n}):e[t]=n;var __spreadValues=(e,t)=>{for(var n in t||(t={}))if(d.call(t,n))__defNormalProp(e,n,t[n]);if(u)for(var n of u(t)){if(f.call(t,n))__defNormalProp(e,n,t[n])}return e};var __spreadProps=(e,t)=>s(e,a(t));var __markAsModule=e=>i(e,"__esModule",{value:true});var __esm=(e,t)=>function __init(){return e&&(t=(0,e[c(e)[0]])(e=0)),t};var __commonJS=(e,t)=>function __require(){return t||(0,e[c(e)[0]])((t={exports:{}}).exports,t),t.exports};var __export=(e,t)=>{for(var n in t)i(e,n,{get:t[n],enumerable:true})};var __reExport=(e,t,n,r)=>{if(t&&typeof t==="object"||typeof t==="function"){for(let s of c(t))if(!d.call(e,s)&&(n||s!=="default"))i(e,s,{get:()=>t[s],enumerable:!(r=o(t,s))||r.enumerable})}return e};var __toESM=(e,t)=>__reExport(__markAsModule(i(e!=null?r(l(e)):{},"default",!t&&e&&e.__esModule?{get:()=>e.default,enumerable:true}:{value:e,enumerable:true})),e);var p=(e=>(t,n)=>e&&e.get(t)||(n=__reExport(__markAsModule({}),t,1),e&&e.set(t,n),n))(typeof WeakMap!=="undefined"?new WeakMap:0);var __async=(e,t,n)=>new Promise(((r,i)=>{var fulfilled=e=>{try{step(n.next(e))}catch(e){i(e)}};var rejected=e=>{try{step(n.throw(e))}catch(e){i(e)}};var step=e=>e.done?r(e.value):Promise.resolve(e.value).then(fulfilled,rejected);step((n=n.apply(e,t)).next())}));var h;var m=__esm({"src/lib/errors/git-error.ts"(){h=class extends Error{constructor(e,t){super(t);this.task=e;Object.setPrototypeOf(this,new.target.prototype)}}}});var g;var v=__esm({"src/lib/errors/git-response-error.ts"(){m();g=class extends h{constructor(e,t){super(void 0,t||String(e));this.git=e}}}});var y;var b=__esm({"src/lib/errors/git-construct-error.ts"(){m();y=class extends h{constructor(e,t){super(void 0,t);this.config=e}}}});var _;var S=__esm({"src/lib/errors/git-plugin-error.ts"(){m();_=class extends h{constructor(e,t,n){super(e,n);this.task=e;this.plugin=t;Object.setPrototypeOf(this,new.target.prototype)}}}});var w;var T=__esm({"src/lib/errors/task-configuration-error.ts"(){m();w=class extends h{constructor(e){super(void 0,e)}}}});function asFunction(e){return typeof e==="function"?e:E}function isUserFunction(e){return typeof e==="function"&&e!==E}function splitOn(e,t){const n=e.indexOf(t);if(n<=0){return[e,""]}return[e.substr(0,n),e.substr(n+1)]}function first(e,t=0){return isArrayLike(e)&&e.length>t?e[t]:void 0}function last(e,t=0){if(isArrayLike(e)&&e.length>t){return e[e.length-1-t]}}function isArrayLike(e){return!!(e&&typeof e.length==="number")}function toLinesWithContent(e="",t=true,n="\n"){return e.split(n).reduce(((e,n)=>{const r=t?n.trim():n;if(r){e.push(r)}return e}),[])}function forEachLineWithContent(e,t){return toLinesWithContent(e,true).map((e=>t(e)))}function folderExists(e){return(0,k.exists)(e,k.FOLDER)}function append(e,t){if(Array.isArray(e)){if(!e.includes(t)){e.push(t)}}else{e.add(t)}return t}function including(e,t){if(Array.isArray(e)&&!e.includes(t)){e.push(t)}return e}function remove(e,t){if(Array.isArray(e)){const n=e.indexOf(t);if(n>=0){e.splice(n,1)}}else{e.delete(t)}return t}function asArray(e){return Array.isArray(e)?e:[e]}function asStringArray(e){return asArray(e).map(String)}function asNumber(e,t=0){if(e==null){return t}const n=parseInt(e,10);return isNaN(n)?t:n}function prefixedArray(e,t){const n=[];for(let r=0,i=e.length;r<i;r++){n.push(t,e[r])}return n}function bufferToString(e){return(Array.isArray(e)?Buffer.concat(e):e).toString("utf-8")}function pick(e,t){return Object.assign({},...t.map((t=>t in e?{[t]:e[t]}:{})))}function delay(e=0){return new Promise((t=>setTimeout(t,e)))}var k,C,E,R;var x=__esm({"src/lib/utils/util.ts"(){k=n(27729);C="\0";E=()=>{};R=Object.prototype.toString.call.bind(Object.prototype.toString)}});function filterType(e,t,n){if(t(e)){return e}return arguments.length>2?n:void 0}function filterPrimitives(e,t){return/number|string|boolean/.test(typeof e)&&(!t||!t.includes(typeof e))}function filterPlainObject(e){return!!e&&R(e)==="[object Object]"}function filterFunction(e){return typeof e==="function"}var O,D,P,I,M;var N=__esm({"src/lib/utils/argument-filters.ts"(){x();O=e=>Array.isArray(e);D=e=>typeof e==="string";P=e=>Array.isArray(e)&&e.every(D);I=e=>D(e)||Array.isArray(e)&&e.every(D);M=e=>{if(e==null||"number|boolean|function".includes(typeof e)){return false}return Array.isArray(e)||typeof e==="string"||typeof e.length==="number"}}});var A;var F=__esm({"src/lib/utils/exit-codes.ts"(){A=(e=>{e[e["SUCCESS"]=0]="SUCCESS";e[e["ERROR"]=1]="ERROR";e[e["UNCLEAN"]=128]="UNCLEAN";return e})(A||{})}});var L;var j=__esm({"src/lib/utils/git-output-streams.ts"(){L=class{constructor(e,t){this.stdOut=e;this.stdErr=t}asStrings(){return new L(this.stdOut.toString("utf8"),this.stdErr.toString("utf8"))}}}});var q,$;var U=__esm({"src/lib/utils/line-parser.ts"(){q=class{constructor(e,t){this.matches=[];this.parse=(e,t)=>{this.resetMatches();if(!this._regExp.every(((t,n)=>this.addMatch(t,n,e(n))))){return false}return this.useMatches(t,this.prepareMatches())!==false};this._regExp=Array.isArray(e)?e:[e];if(t){this.useMatches=t}}useMatches(e,t){throw new Error(`LineParser:useMatches not implemented`)}resetMatches(){this.matches.length=0}prepareMatches(){return this.matches}addMatch(e,t,n){const r=n&&e.exec(n);if(r){this.pushMatch(t,r)}return!!r}pushMatch(e,t){this.matches.push(...t.slice(1))}};$=class extends q{addMatch(e,t,n){return/^remote:\s/.test(String(n))&&super.addMatch(e,t,n)}pushMatch(e,t){if(e>0||t.length>1){super.pushMatch(e,t)}}}}});function createInstanceConfig(...e){const t=process.cwd();const n=Object.assign(__spreadValues({baseDir:t},H),...e.filter((e=>typeof e==="object"&&e)));n.baseDir=n.baseDir||t;return n}var H;var W=__esm({"src/lib/utils/simple-git-options.ts"(){H={binary:"git",maxConcurrentProcesses:5,config:[]}}});function appendTaskOptions(e,t=[]){if(!filterPlainObject(e)){return t}return Object.keys(e).reduce(((t,n)=>{const r=e[n];if(filterPrimitives(r,["boolean"])){t.push(n+"="+r)}else{t.push(n)}return t}),t)}function getTrailingOptions(e,t=0,n=false){const r=[];for(let n=0,i=t<0?e.length:t;n<i;n++){if("string|number".includes(typeof e[n])){r.push(String(e[n]))}}appendTaskOptions(trailingOptionsArgument(e),r);if(!n){r.push(...trailingArrayArgument(e))}return r}function trailingArrayArgument(e){const t=typeof last(e)==="function";return filterType(last(e,t?1:0),O,[])}function trailingOptionsArgument(e){const t=filterFunction(last(e));return filterType(last(e,t?1:0),filterPlainObject)}function trailingFunctionArgument(e,t=true){const n=asFunction(last(e));return t||isUserFunction(n)?n:void 0}var B=__esm({"src/lib/utils/task-options.ts"(){N();x()}});function callTaskParser(e,t){return e(t.stdOut,t.stdErr)}function parseStringResponse(e,t,n,r=true){asArray(n).forEach((n=>{for(let i=toLinesWithContent(n,r),s=0,o=i.length;s<o;s++){const line=(e=0)=>{if(s+e>=o){return}return i[s+e]};t.some((({parse:t})=>t(line,e)))}}));return e}var Y=__esm({"src/lib/utils/task-parser.ts"(){x()}});var V={};__export(V,{ExitCodes:()=>A,GitOutputStreams:()=>L,LineParser:()=>q,NOOP:()=>E,NULL:()=>C,RemoteLineParser:()=>$,append:()=>append,appendTaskOptions:()=>appendTaskOptions,asArray:()=>asArray,asFunction:()=>asFunction,asNumber:()=>asNumber,asStringArray:()=>asStringArray,bufferToString:()=>bufferToString,callTaskParser:()=>callTaskParser,createInstanceConfig:()=>createInstanceConfig,delay:()=>delay,filterArray:()=>O,filterFunction:()=>filterFunction,filterHasLength:()=>M,filterPlainObject:()=>filterPlainObject,filterPrimitives:()=>filterPrimitives,filterString:()=>D,filterStringArray:()=>P,filterStringOrStringArray:()=>I,filterType:()=>filterType,first:()=>first,folderExists:()=>folderExists,forEachLineWithContent:()=>forEachLineWithContent,getTrailingOptions:()=>getTrailingOptions,including:()=>including,isUserFunction:()=>isUserFunction,last:()=>last,objectToString:()=>R,parseStringResponse:()=>parseStringResponse,pick:()=>pick,prefixedArray:()=>prefixedArray,remove:()=>remove,splitOn:()=>splitOn,toLinesWithContent:()=>toLinesWithContent,trailingFunctionArgument:()=>trailingFunctionArgument,trailingOptionsArgument:()=>trailingOptionsArgument});var K=__esm({"src/lib/utils/index.ts"(){N();F();j();U();W();B();Y();x()}});var G={};__export(G,{CheckRepoActions:()=>z,checkIsBareRepoTask:()=>checkIsBareRepoTask,checkIsRepoRootTask:()=>checkIsRepoRootTask,checkIsRepoTask:()=>checkIsRepoTask});function checkIsRepoTask(e){switch(e){case"bare":return checkIsBareRepoTask();case"root":return checkIsRepoRootTask()}const t=["rev-parse","--is-inside-work-tree"];return{commands:t,format:"utf-8",onError:J,parser:X}}function checkIsRepoRootTask(){const e=["rev-parse","--git-dir"];return{commands:e,format:"utf-8",onError:J,parser(e){return/^\.(git)?$/.test(e.trim())}}}function checkIsBareRepoTask(){const e=["rev-parse","--is-bare-repository"];return{commands:e,format:"utf-8",onError:J,parser:X}}function isNotRepoMessage(e){return/(Not a git repository|Kein Git-Repository)/i.test(String(e))}var z,J,X;var Q=__esm({"src/lib/tasks/check-is-repo.ts"(){K();z=(e=>{e["BARE"]="bare";e["IN_TREE"]="tree";e["IS_REPO_ROOT"]="root";return e})(z||{});J=({exitCode:e},t,n,r)=>{if(e===128&&isNotRepoMessage(t)){return n(Buffer.from("false"))}r(t)};X=e=>e.trim()==="true"}});function cleanSummaryParser(e,t){const n=new Z(e);const r=e?te:ee;toLinesWithContent(t).forEach((e=>{const t=e.replace(r,"");n.paths.push(t);(ne.test(t)?n.folders:n.files).push(t)}));return n}var Z,ee,te,ne;var re=__esm({"src/lib/responses/CleanSummary.ts"(){K();Z=class{constructor(e){this.dryRun=e;this.paths=[];this.files=[];this.folders=[]}};ee=/^[a-z]+\s*/i;te=/^[a-z]+\s+[a-z]+\s*/i;ne=/\/$/}});var ie={};__export(ie,{EMPTY_COMMANDS:()=>se,adhocExecTask:()=>adhocExecTask,configurationErrorTask:()=>configurationErrorTask,isBufferTask:()=>isBufferTask,isEmptyTask:()=>isEmptyTask,straightThroughBufferTask:()=>straightThroughBufferTask,straightThroughStringTask:()=>straightThroughStringTask});function adhocExecTask(e){return{commands:se,format:"empty",parser:e}}function configurationErrorTask(e){return{commands:se,format:"empty",parser(){throw typeof e==="string"?new w(e):e}}}function straightThroughStringTask(e,t=false){return{commands:e,format:"utf-8",parser(e){return t?String(e).trim():e}}}function straightThroughBufferTask(e){return{commands:e,format:"buffer",parser(e){return e}}}function isBufferTask(e){return e.format==="buffer"}function isEmptyTask(e){return e.format==="empty"||!e.commands.length}var se;var oe=__esm({"src/lib/tasks/task.ts"(){T();se=[]}});var ae={};__export(ae,{CONFIG_ERROR_INTERACTIVE_MODE:()=>ce,CONFIG_ERROR_MODE_REQUIRED:()=>ue,CONFIG_ERROR_UNKNOWN_OPTION:()=>le,CleanOptions:()=>de,cleanTask:()=>cleanTask,cleanWithOptionsTask:()=>cleanWithOptionsTask,isCleanOptionsArray:()=>isCleanOptionsArray});function cleanWithOptionsTask(e,t){const{cleanMode:n,options:r,valid:i}=getCleanOptions(e);if(!n){return configurationErrorTask(ue)}if(!i.options){return configurationErrorTask(le+JSON.stringify(e))}r.push(...t);if(r.some(isInteractiveMode)){return configurationErrorTask(ce)}return cleanTask(n,r)}function cleanTask(e,t){const n=["clean",`-${e}`,...t];return{commands:n,format:"utf-8",parser(t){return cleanSummaryParser(e==="n",t)}}}function isCleanOptionsArray(e){return Array.isArray(e)&&e.every((e=>fe.has(e)))}function getCleanOptions(e){let t;let n=[];let r={cleanMode:false,options:true};e.replace(/[^a-z]i/g,"").split("").forEach((e=>{if(isCleanMode(e)){t=e;r.cleanMode=true}else{r.options=r.options&&isKnownOption(n[n.length]=`-${e}`)}}));return{cleanMode:t,options:n,valid:r}}function isCleanMode(e){return e==="f"||e==="n"}function isKnownOption(e){return/^-[a-z]$/i.test(e)&&fe.has(e.charAt(1))}function isInteractiveMode(e){if(/^-[^\-]/.test(e)){return e.indexOf("i")>0}return e==="--interactive"}var ce,ue,le,de,fe;var pe=__esm({"src/lib/tasks/clean.ts"(){re();K();oe();ce="Git clean interactive mode is not supported";ue='Git clean mode parameter ("n" or "f") is required';le="Git clean unknown option found in: ";de=(e=>{e["DRY_RUN"]="n";e["FORCE"]="f";e["IGNORED_INCLUDED"]="x";e["IGNORED_ONLY"]="X";e["EXCLUDING"]="e";e["QUIET"]="q";e["RECURSIVE"]="d";return e})(de||{});fe=new Set(["i",...asStringArray(Object.values(de))])}});function configListParser(e){const t=new he;for(const n of configParser(e)){t.addValue(n.file,String(n.key),n.value)}return t}function configGetParser(e,t){let n=null;const r=[];const i=new Map;for(const s of configParser(e,t)){if(s.key!==t){continue}r.push(n=s.value);if(!i.has(s.file)){i.set(s.file,[])}i.get(s.file).push(n)}return{key:t,paths:Array.from(i.keys()),scopes:i,value:n,values:r}}function configFilePath(e){return e.replace(/^(file):/,"")}function*configParser(e,t=null){const n=e.split("\0");for(let e=0,r=n.length-1;e<r;){const r=configFilePath(n[e++]);let i=n[e++];let s=t;if(i.includes("\n")){const e=splitOn(i,"\n");s=e[0];i=e[1]}yield{file:r,key:s,value:i}}}var he;var me=__esm({"src/lib/responses/ConfigList.ts"(){K();he=class{constructor(){this.files=[];this.values=Object.create(null)}get all(){if(!this._all){this._all=this.files.reduce(((e,t)=>Object.assign(e,this.values[t])),{})}return this._all}addFile(e){if(!(e in this.values)){const t=last(this.files);this.values[e]=t?Object.create(this.values[t]):{};this.files.push(e)}return this.values[e]}addValue(e,t,n){const r=this.addFile(e);if(!r.hasOwnProperty(t)){r[t]=n}else if(Array.isArray(r[t])){r[t].push(n)}else{r[t]=[r[t],n]}this._all=void 0}}}});function asConfigScope(e,t){if(typeof e==="string"&&ge.hasOwnProperty(e)){return e}return t}function addConfigTask(e,t,n,r){const i=["config",`--${r}`];if(n){i.push("--add")}i.push(e,t);return{commands:i,format:"utf-8",parser(e){return e}}}function getConfigTask(e,t){const n=["config","--null","--show-origin","--get-all",e];if(t){n.splice(1,0,`--${t}`)}return{commands:n,format:"utf-8",parser(t){return configGetParser(t,e)}}}function listConfigTask(e){const t=["config","--list","--show-origin","--null"];if(e){t.push(`--${e}`)}return{commands:t,format:"utf-8",parser(e){return configListParser(e)}}}function config_default(){return{addConfig(e,t,...n){return this._runTask(addConfigTask(e,t,n[0]===true,asConfigScope(n[1],"local")),trailingFunctionArgument(arguments))},getConfig(e,t){return this._runTask(getConfigTask(e,asConfigScope(t,void 0)),trailingFunctionArgument(arguments))},listConfig(...e){return this._runTask(listConfigTask(asConfigScope(e[0],void 0)),trailingFunctionArgument(arguments))}}}var ge;var ve=__esm({"src/lib/tasks/config.ts"(){me();K();ge=(e=>{e["system"]="system";e["global"]="global";e["local"]="local";e["worktree"]="worktree";return e})(ge||{})}});function grepQueryBuilder(...e){return(new Se).param(...e)}function parseGrep(e){const t=new Set;const n={};forEachLineWithContent(e,(e=>{const[r,i,s]=e.split(C);t.add(r);(n[r]=n[r]||[]).push({line:asNumber(i),path:r,preview:s})}));return{paths:t,results:n}}function grep_default(){return{grep(e){const t=trailingFunctionArgument(arguments);const n=getTrailingOptions(arguments);for(const e of ye){if(n.includes(e)){return this._runTask(configurationErrorTask(`git.grep: use of "${e}" is not supported.`),t)}}if(typeof e==="string"){e=grepQueryBuilder().param(e)}const r=["grep","--null","-n","--full-name",...n,...e];return this._runTask({commands:r,format:"utf-8",parser(e){return parseGrep(e)}},t)}}}var ye,be,_e,Se;var we=__esm({"src/lib/tasks/grep.ts"(){K();oe();ye=["-h"];be=Symbol("grepQuery");Se=class{constructor(){this[_e]=[]}*[(_e=be,Symbol.iterator)](){for(const e of this[be]){yield e}}and(...e){e.length&&this[be].push("--and","(",...prefixedArray(e,"-e"),")");return this}param(...e){this[be].push(...prefixedArray(e,"-e"));return this}}}});var Te={};__export(Te,{ResetMode:()=>ke,getResetMode:()=>getResetMode,resetTask:()=>resetTask});function resetTask(e,t){const n=["reset"];if(isValidResetMode(e)){n.push(`--${e}`)}n.push(...t);return straightThroughStringTask(n)}function getResetMode(e){if(isValidResetMode(e)){return e}switch(typeof e){case"string":case"undefined":return"soft"}return}function isValidResetMode(e){return Ce.includes(e)}var ke,Ce;var Ee=__esm({"src/lib/tasks/reset.ts"(){oe();ke=(e=>{e["MIXED"]="mixed";e["SOFT"]="soft";e["HARD"]="hard";e["MERGE"]="merge";e["KEEP"]="keep";return e})(ke||{});Ce=Array.from(Object.values(ke))}});var Re={};__export(Re,{CheckRepoActions:()=>z,CleanOptions:()=>de,GitConfigScope:()=>ge,GitConstructError:()=>y,GitError:()=>h,GitPluginError:()=>_,GitResponseError:()=>g,ResetMode:()=>ke,TaskConfigurationError:()=>w,grepQueryBuilder:()=>grepQueryBuilder});var xe=__esm({"src/lib/api.ts"(){b();m();S();v();T();Q();pe();ve();we();Ee()}});function commandConfigPrefixingPlugin(e){const t=prefixedArray(e,"-c");return{type:"spawn.args",action(e){return[...t,...e]}}}var Oe=__esm({"src/lib/plugins/command-config-prefixing-plugin.ts"(){K()}});function completionDetectionPlugin({onClose:e=true,onExit:t=50}={}){function createEvents(){let n=-1;const r={close:(0,De.deferred)(),closeTimeout:(0,De.deferred)(),exit:(0,De.deferred)(),exitTimeout:(0,De.deferred)()};const i=Promise.race([e===false?Pe:r.closeTimeout.promise,t===false?Pe:r.exitTimeout.promise]);configureTimeout(e,r.close,r.closeTimeout);configureTimeout(t,r.exit,r.exitTimeout);return{close(e){n=e;r.close.done()},exit(e){n=e;r.exit.done()},get exitCode(){return n},result:i}}function configureTimeout(e,t,n){if(e===false){return}(e===true?t.promise:t.promise.then((()=>delay(e)))).then(n.done)}return{type:"spawn.after",action(e,t){return __async(this,arguments,(function*(e,{spawned:t,close:n}){var r,i;const s=createEvents();let o=true;let quickClose=()=>void(o=false);(r=t.stdout)==null?void 0:r.on("data",quickClose);(i=t.stderr)==null?void 0:i.on("data",quickClose);t.on("error",quickClose);t.on("close",(e=>s.close(e)));t.on("exit",(e=>s.exit(e)));try{yield s.result;if(o){yield delay(50)}n(s.exitCode)}catch(e){n(s.exitCode,e)}}))}}}var De,Pe;var Ie=__esm({"src/lib/plugins/completion-detection.plugin.ts"(){De=n(42841);K();Pe=(0,De.deferred)().promise}});function isTaskError(e){return!!(e.exitCode&&e.stdErr.length)}function getErrorMessage(e){return Buffer.concat([...e.stdOut,...e.stdErr])}function errorDetectionHandler(e=false,t=isTaskError,n=getErrorMessage){return(r,i)=>{if(!e&&r||!t(i)){return r}return n(i)}}function errorDetectionPlugin(e){return{type:"task.error",action(t,n){const r=e(t.error,{stdErr:n.stdErr,stdOut:n.stdOut,exitCode:n.exitCode});if(Buffer.isBuffer(r)){return{error:new h(void 0,r.toString("utf-8"))}}return{error:r}}}}var Me=__esm({"src/lib/plugins/error-detection.plugin.ts"(){m()}});var Ne;var Ae=__esm({"src/lib/plugins/plugin-store.ts"(){K();Ne=class{constructor(){this.plugins=new Set}add(e){const t=[];asArray(e).forEach((e=>e&&this.plugins.add(append(t,e))));return()=>{t.forEach((e=>this.plugins.delete(e)))}}exec(e,t,n){let r=t;const i=Object.freeze(Object.create(n));for(const t of this.plugins){if(t.type===e){r=t.action(r,i)}}return r}}}});function progressMonitorPlugin(e){const t="--progress";const n=["checkout","clone","fetch","pull","push"];const r={type:"spawn.after",action(n,r){var i;if(!r.commands.includes(t)){return}(i=r.spawned.stderr)==null?void 0:i.on("data",(t=>{const n=/^([\s\S]+?):\s*(\d+)% \((\d+)\/(\d+)\)/.exec(t.toString("utf8"));if(!n){return}e({method:r.method,stage:progressEventStage(n[1]),progress:asNumber(n[2]),processed:asNumber(n[3]),total:asNumber(n[4])})}))}};const i={type:"spawn.args",action(e,r){if(!n.includes(r.method)){return e}return including(e,t)}};return[i,r]}function progressEventStage(e){return String(e.toLowerCase().split(" ",1))||"unknown"}var Fe=__esm({"src/lib/plugins/progress-monitor-plugin.ts"(){K()}});var Le=__esm({"src/lib/plugins/simple-git-plugin.ts"(){}});function spawnOptionsPlugin(e){const t=pick(e,["uid","gid"]);return{type:"spawn.options",action(e){return __spreadValues(__spreadValues({},t),e)}}}var je=__esm({"src/lib/plugins/spawn-options-plugin.ts"(){K()}});function timeoutPlugin({block:e}){if(e>0){return{type:"spawn.after",action(t,n){var r,i;let s;function wait(){s&&clearTimeout(s);s=setTimeout(kill,e)}function stop(){var e,t;(e=n.spawned.stdout)==null?void 0:e.off("data",wait);(t=n.spawned.stderr)==null?void 0:t.off("data",wait);n.spawned.off("exit",stop);n.spawned.off("close",stop);s&&clearTimeout(s)}function kill(){stop();n.kill(new _(void 0,"timeout",`block timeout reached`))}(r=n.spawned.stdout)==null?void 0:r.on("data",wait);(i=n.spawned.stderr)==null?void 0:i.on("data",wait);n.spawned.on("exit",stop);n.spawned.on("close",stop);wait()}}}}var qe=__esm({"src/lib/plugins/timout-plugin.ts"(){S()}});var $e=__esm({"src/lib/plugins/index.ts"(){Oe();Ie();Me();Ae();Fe();Le();je();qe()}});function createLog(){return(0,Ue.default)("simple-git")}function prefixedLogger(e,t,n){if(!t||!String(t).replace(/\s*/,"")){return!n?e:(t,...r)=>{e(t,...r);n(t,...r)}}return(r,...i)=>{e(`%s ${r}`,t,...i);if(n){n(r,...i)}}}function childLoggerName(e,t,{namespace:n}){if(typeof e==="string"){return e}const r=t&&t.namespace||"";if(r.startsWith(n)){return r.substr(n.length+1)}return r||n}function createLogger(e,t,n,r=createLog()){const i=e&&`[${e}]`||"";const s=[];const o=typeof t==="string"?r.extend(t):t;const a=childLoggerName(filterType(t,D),o,r);return step(n);function sibling(t,n){return append(s,createLogger(e,a.replace(/^[^:]+/,t),n,r))}function step(t){const n=t&&`[${t}]`||"";const s=o&&prefixedLogger(o,n)||E;const a=prefixedLogger(r,`${i} ${n}`,s);return Object.assign(o?s:a,{label:e,sibling:sibling,info:a,step:step})}}var Ue;var He=__esm({"src/lib/git-logger.ts"(){Ue=__toESM(n(67984));K();Ue.default.formatters.L=e=>String(M(e)?e.length:"-");Ue.default.formatters.B=e=>{if(Buffer.isBuffer(e)){return e.toString("utf8")}return R(e)}}});var We,Be;var Ye=__esm({"src/lib/runners/tasks-pending-queue.ts"(){m();He();We=class{constructor(e="GitExecutor"){this.logLabel=e;this._queue=new Map}withProgress(e){return this._queue.get(e)}createProgress(e){const t=We.getName(e.commands[0]);const n=createLogger(this.logLabel,t);return{task:e,logger:n,name:t}}push(e){const t=this.createProgress(e);t.logger("Adding task to the queue, commands = %o",e.commands);this._queue.set(e,t);return t}fatal(e){for(const[t,{logger:n}]of Array.from(this._queue.entries())){if(t===e.task){n.info(`Failed %o`,e);n(`Fatal exception, any as-yet un-started tasks run through this executor will not be attempted`)}else{n.info(`A fatal exception occurred in a previous task, the queue has been purged: %o`,e.message)}this.complete(t)}if(this._queue.size!==0){throw new Error(`Queue size should be zero after fatal: ${this._queue.size}`)}}complete(e){const t=this.withProgress(e);if(t){this._queue.delete(e)}}attempt(e){const t=this.withProgress(e);if(!t){throw new h(void 0,"TasksPendingQueue: attempt called for an unknown task")}t.logger("Starting task");return t}static getName(e="empty"){return`task:${e}:${++We.counter}`}};Be=We;Be.counter=0}});function pluginContext(e,t){return{method:first(e.commands)||"",commands:t}}function onErrorReceived(e,t){return n=>{t(`[ERROR] child process exception %o`,n);e.push(Buffer.from(String(n.stack),"ascii"))}}function onDataReceived(e,t,n,r){return i=>{n(`%s received %L bytes`,t,i);r(`%B`,i);e.push(i)}}var Ve,Ke;var Ge=__esm({"src/lib/runners/git-executor-chain.ts"(){Ve=n(32081);m();oe();K();Ye();Ke=class{constructor(e,t,n){this._executor=e;this._scheduler=t;this._plugins=n;this._chain=Promise.resolve();this._queue=new Be}get binary(){return this._executor.binary}get cwd(){return this._cwd||this._executor.cwd}set cwd(e){this._cwd=e}get env(){return this._executor.env}get outputHandler(){return this._executor.outputHandler}chain(){return this}push(e){this._queue.push(e);return this._chain=this._chain.then((()=>this.attemptTask(e)))}attemptTask(e){return __async(this,null,(function*(){const t=yield this._scheduler.next();const onQueueComplete=()=>this._queue.complete(e);try{const{logger:n}=this._queue.attempt(e);return yield isEmptyTask(e)?this.attemptEmptyTask(e,n):this.attemptRemoteTask(e,n)}catch(t){throw this.onFatalException(e,t)}finally{onQueueComplete();t()}}))}onFatalException(e,t){const n=t instanceof h?Object.assign(t,{task:e}):new h(e,t&&String(t));this._chain=Promise.resolve();this._queue.fatal(n);return n}attemptRemoteTask(e,t){return __async(this,null,(function*(){const n=this._plugins.exec("spawn.args",[...e.commands],pluginContext(e,e.commands));const r=yield this.gitResponse(e,this.binary,n,this.outputHandler,t.step("SPAWN"));const i=yield this.handleTaskData(e,n,r,t.step("HANDLE"));t(`passing response to task's parser as a %s`,e.format);if(isBufferTask(e)){return callTaskParser(e.parser,i)}return callTaskParser(e.parser,i.asStrings())}))}attemptEmptyTask(e,t){return __async(this,null,(function*(){t(`empty task bypassing child process to call to task's parser`);return e.parser(this)}))}handleTaskData(e,t,n,r){const{exitCode:i,rejection:s,stdOut:o,stdErr:a}=n;return new Promise(((c,u)=>{r(`Preparing to handle process response exitCode=%d stdOut=`,i);const{error:l}=this._plugins.exec("task.error",{error:s},__spreadValues(__spreadValues({},pluginContext(e,t)),n));if(l&&e.onError){r.info(`exitCode=%s handling with custom error handler`);return e.onError(n,l,(e=>{r.info(`custom error handler treated as success`);r(`custom error returned a %s`,R(e));c(new L(Array.isArray(e)?Buffer.concat(e):e,Buffer.concat(a)))}),u)}if(l){r.info(`handling as error: exitCode=%s stdErr=%s rejection=%o`,i,a.length,s);return u(l)}r.info(`retrieving task output complete`);c(new L(Buffer.concat(o),Buffer.concat(a)))}))}gitResponse(e,t,n,r,i){return __async(this,null,(function*(){const s=i.sibling("output");const o=this._plugins.exec("spawn.options",{cwd:this.cwd,env:this.env,windowsHide:true},pluginContext(e,e.commands));return new Promise((a=>{const c=[];const u=[];let l;i.info(`%s %o`,t,n);i("%O",o);const d=(0,Ve.spawn)(t,n,o);d.stdout.on("data",onDataReceived(c,"stdOut",i,s.step("stdOut")));d.stderr.on("data",onDataReceived(u,"stdErr",i,s.step("stdErr")));d.on("error",onErrorReceived(u,i));if(r){i(`Passing child process stdOut/stdErr to custom outputHandler`);r(t,d.stdout,d.stderr,[...n])}this._plugins.exec("spawn.after",void 0,__spreadProps(__spreadValues({},pluginContext(e,n)),{spawned:d,close(e,t){a({stdOut:c,stdErr:u,exitCode:e,rejection:l||t})},kill(e){if(d.killed){return}l=e;d.kill("SIGINT")}}))}))}))}}}});var ze={};__export(ze,{GitExecutor:()=>Je});var Je;var Xe=__esm({"src/lib/runners/git-executor.ts"(){Ge();Je=class{constructor(e="git",t,n,r){this.binary=e;this.cwd=t;this._scheduler=n;this._plugins=r;this._chain=new Ke(this,this._scheduler,this._plugins)}chain(){return new Ke(this,this._scheduler,this._plugins)}push(e){return this._chain.push(e)}}}});function taskCallback(e,t,n=E){const onSuccess=e=>{n(null,e)};const onError2=t=>{if((t==null?void 0:t.task)===e){n(t instanceof g?addDeprecationNoticeToError(t):t,void 0)}};t.then(onSuccess,onError2)}function addDeprecationNoticeToError(e){let log=e=>{console.warn(`simple-git deprecation notice: accessing GitResponseError.${e} should be GitResponseError.git.${e}, this will no longer be available in version 3`);log=E};return Object.create(e,Object.getOwnPropertyNames(e.git).reduce(descriptorReducer,{}));function descriptorReducer(t,n){if(n in e){return t}t[n]={enumerable:false,configurable:false,get(){log(n);return e.git[n]}};return t}}var Qe=__esm({"src/lib/task-callback.ts"(){v();K()}});function changeWorkingDirectoryTask(e,t){return adhocExecTask((n=>{if(!folderExists(e)){throw new Error(`Git.cwd: cannot change to non-directory "${e}"`)}return(t||n).cwd=e}))}var Ze=__esm({"src/lib/tasks/change-working-directory.ts"(){K();oe()}});function parseCommitResult(e){const t={author:null,branch:"",commit:"",root:false,summary:{changes:0,insertions:0,deletions:0}};return parseStringResponse(t,et,e)}var et;var tt=__esm({"src/lib/parsers/parse-commit.ts"(){K();et=[new q(/^\[([^\s]+)( \([^)]+\))? ([^\]]+)/,((e,[t,n,r])=>{e.branch=t;e.commit=r;e.root=!!n})),new q(/\s*Author:\s(.+)/i,((e,[t])=>{const n=t.split("<");const r=n.pop();if(!r||!r.includes("@")){return}e.author={email:r.substr(0,r.length-1),name:n.join("<").trim()}})),new q(/(\d+)[^,]*(?:,\s*(\d+)[^,]*)(?:,\s*(\d+))/g,((e,[t,n,r])=>{e.summary.changes=parseInt(t,10)||0;e.summary.insertions=parseInt(n,10)||0;e.summary.deletions=parseInt(r,10)||0})),new q(/^(\d+)[^,]*(?:,\s*(\d+)[^(]+\(([+-]))?/,((e,[t,n,r])=>{e.summary.changes=parseInt(t,10)||0;const i=parseInt(n,10)||0;if(r==="-"){e.summary.deletions=i}else if(r==="+"){e.summary.insertions=i}}))]}});var nt={};__export(nt,{commitTask:()=>commitTask,default:()=>commit_default});function commitTask(e,t,n){const r=["-c","core.abbrev=40","commit",...prefixedArray(e,"-m"),...t,...n];return{commands:r,format:"utf-8",parser:parseCommitResult}}function commit_default(){return{commit(e,...t){const n=trailingFunctionArgument(arguments);const r=rejectDeprecatedSignatures(e)||commitTask(asArray(e),asArray(filterType(t[0],I,[])),[...filterType(t[1],O,[]),...getTrailingOptions(arguments,0,true)]);return this._runTask(r,n)}};function rejectDeprecatedSignatures(e){return!I(e)&&configurationErrorTask(`git.commit: requires the commit message to be supplied as a string/string[]`)}}var rt=__esm({"src/lib/tasks/commit.ts"(){tt();K();oe()}});function hashObjectTask(e,t){const n=["hash-object",e];if(t){n.push("-w")}return straightThroughStringTask(n,true)}var it=__esm({"src/lib/tasks/hash-object.ts"(){oe()}});function parseInit(e,t,n){const r=String(n).trim();let i;if(i=ot.exec(r)){return new st(e,t,false,i[1])}if(i=at.exec(r)){return new st(e,t,true,i[1])}let s="";const o=r.split(" ");while(o.length){const e=o.shift();if(e==="in"){s=o.join(" ");break}}return new st(e,t,/^re/i.test(r),s)}var st,ot,at;var ct=__esm({"src/lib/responses/InitSummary.ts"(){st=class{constructor(e,t,n,r){this.bare=e;this.path=t;this.existing=n;this.gitDir=r}};ot=/^Init.+ repository in (.+)$/;at=/^Rein.+ in (.+)$/}});function hasBareCommand(e){return e.includes(ut)}function initTask(e=false,t,n){const r=["init",...n];if(e&&!hasBareCommand(r)){r.splice(1,0,ut)}return{commands:r,format:"utf-8",parser(e){return parseInit(r.includes("--bare"),t,e)}}}var ut;var dt=__esm({"src/lib/tasks/init.ts"(){ct();ut="--bare"}});function logFormatFromCommand(e){for(let t=0;t<e.length;t++){const n=ft.exec(e[t]);if(n){return`--${n[1]}`}}return""}function isLogFormat(e){return ft.test(e)}var ft;var pt=__esm({"src/lib/args/log-format.ts"(){ft=/^--(stat|numstat|name-only|name-status)(=|$)/}});var ht;var mt=__esm({"src/lib/responses/DiffSummary.ts"(){ht=class{constructor(){this.changed=0;this.deletions=0;this.insertions=0;this.files=[]}}}});function getDiffParser(e=""){const t=St[e];return e=>parseStringResponse(new ht,t,e,false)}var vt,yt,bt,_t,St;var wt=__esm({"src/lib/parsers/parse-diff-summary.ts"(){pt();mt();K();vt=[new q(/(.+)\s+\|\s+(\d+)(\s+[+\-]+)?$/,((e,[t,n,r=""])=>{e.files.push({file:t.trim(),changes:asNumber(n),insertions:r.replace(/[^+]/g,"").length,deletions:r.replace(/[^-]/g,"").length,binary:false})})),new q(/(.+) \|\s+Bin ([0-9.]+) -> ([0-9.]+) ([a-z]+)/,((e,[t,n,r])=>{e.files.push({file:t.trim(),before:asNumber(n),after:asNumber(r),binary:true})})),new q(/(\d+) files? changed\s*((?:, \d+ [^,]+){0,2})/,((e,[t,n])=>{const r=/(\d+) i/.exec(n);const i=/(\d+) d/.exec(n);e.changed=asNumber(t);e.insertions=asNumber(r==null?void 0:r[1]);e.deletions=asNumber(i==null?void 0:i[1])}))];yt=[new q(/(\d+)\t(\d+)\t(.+)$/,((e,[t,n,r])=>{const i=asNumber(t);const s=asNumber(n);e.changed++;e.insertions+=i;e.deletions+=s;e.files.push({file:r,changes:i+s,insertions:i,deletions:s,binary:false})})),new q(/-\t-\t(.+)$/,((e,[t])=>{e.changed++;e.files.push({file:t,after:0,before:0,binary:true})}))];bt=[new q(/(.+)$/,((e,[t])=>{e.changed++;e.files.push({file:t,changes:0,insertions:0,deletions:0,binary:false})}))];_t=[new q(/([ACDMRTUXB])\s*(.+)$/,((e,[t,n])=>{e.changed++;e.files.push({file:n,changes:0,insertions:0,deletions:0,binary:false})}))];St={[""]:vt,["--stat"]:vt,["--numstat"]:yt,["--name-status"]:_t,["--name-only"]:bt}}});function lineBuilder(e,t){return t.reduce(((t,n,r)=>{t[n]=e[r]||"";return t}),Object.create({diff:null}))}function createListLogSummaryParser(e=Ct,t=Et,n=""){const r=getDiffParser(n);return function(n){const i=toLinesWithContent(n,true,Tt).map((function(n){const i=n.trim().split(kt);const s=lineBuilder(i[0].trim().split(e),t);if(i.length>1&&!!i[1].trim()){s.diff=r(i[1])}return s}));return{all:i,latest:i.length&&i[0]||null,total:i.length}}}var Tt,kt,Ct,Et;var Rt=__esm({"src/lib/parsers/parse-list-log-summary.ts"(){K();wt();pt();Tt="Ã²Ã²Ã²Ã²Ã²Ã² ";kt=" Ã²Ã²";Ct=" Ã² ";Et=["hash","date","message","refs","author_name","author_email"]}});var xt={};__export(xt,{diffSummaryTask:()=>diffSummaryTask,validateLogFormatConfig:()=>validateLogFormatConfig});function diffSummaryTask(e){let t=logFormatFromCommand(e);const n=["diff"];if(t===""){t="--stat";n.push("--stat=4096")}n.push(...e);return validateLogFormatConfig(n)||{commands:n,format:"utf-8",parser:getDiffParser(t)}}function validateLogFormatConfig(e){const t=e.filter(isLogFormat);if(t.length>1){return configurationErrorTask(`Summary flags are mutually exclusive - pick one of ${t.join(",")}`)}if(t.length&&e.includes("-z")){return configurationErrorTask(`Summary flag ${t} parsing is not compatible with null termination option '-z'`)}}var Ot=__esm({"src/lib/tasks/diff.ts"(){pt();wt();oe()}});function prettyFormat(e,t){const n=[];const r=[];Object.keys(e).forEach((t=>{n.push(t);r.push(String(e[t]))}));return[n,r.join(t)]}function userOptions(e){return Object.keys(e).reduce(((t,n)=>{if(!(n in Dt)){t[n]=e[n]}return t}),{})}function parseLogOptions(e={},t=[]){const n=filterType(e.splitter,D,Ct);const r=!filterPrimitives(e.format)&&e.format?e.format:{hash:"%H",date:e.strictDate===false?"%ai":"%aI",message:"%s",refs:"%D",body:e.multiLine?"%B":"%b",author_name:e.mailMap!==false?"%aN":"%an",author_email:e.mailMap!==false?"%aE":"%ae"};const[i,s]=prettyFormat(r,n);const o=[];const a=[`--pretty=format:${Tt}${s}${kt}`,...t];const c=e.n||e["max-count"]||e.maxCount;if(c){a.push(`--max-count=${c}`)}if(e.from&&e.to){const t=e.symmetric!==false?"...":"..";o.push(`${e.from}${t}${e.to}`)}if(D(e.file)){o.push("--follow",e.file)}appendTaskOptions(userOptions(e),a);return{fields:i,splitter:n,commands:[...a,...o]}}function logTask(e,t,n){const r=createListLogSummaryParser(e,t,logFormatFromCommand(n));return{commands:["log",...n],format:"utf-8",parser:r}}function log_default(){return{log(...e){const t=trailingFunctionArgument(arguments);const n=parseLogOptions(trailingOptionsArgument(arguments),filterType(arguments[0],O));const r=rejectDeprecatedSignatures(...e)||validateLogFormatConfig(n.commands)||createLogTask(n);return this._runTask(r,t)}};function createLogTask(e){return logTask(e.splitter,e.fields,e.commands)}function rejectDeprecatedSignatures(e,t){return D(e)&&D(t)&&configurationErrorTask(`git.log(string, string) should be replaced with git.log({ from: string, to: string })`)}}var Dt;var Pt=__esm({"src/lib/tasks/log.ts"(){pt();Rt();K();oe();Ot();Dt=(e=>{e[e["--pretty"]=0]="--pretty";e[e["max-count"]=1]="max-count";e[e["maxCount"]=2]="maxCount";e[e["n"]=3]="n";e[e["file"]=4]="file";e[e["format"]=5]="format";e[e["from"]=6]="from";e[e["to"]=7]="to";e[e["splitter"]=8]="splitter";e[e["symmetric"]=9]="symmetric";e[e["mailMap"]=10]="mailMap";e[e["multiLine"]=11]="multiLine";e[e["strictDate"]=12]="strictDate";return e})(Dt||{})}});var It,Mt;var Nt=__esm({"src/lib/responses/MergeSummary.ts"(){It=class{constructor(e,t=null,n){this.reason=e;this.file=t;this.meta=n}toString(){return`${this.file}:${this.reason}`}};Mt=class{constructor(){this.conflicts=[];this.merges=[];this.result="success"}get failed(){return this.conflicts.length>0}get reason(){return this.result}toString(){if(this.conflicts.length){return`CONFLICTS: ${this.conflicts.join(", ")}`}return"OK"}}}});var At,Ft;var Lt=__esm({"src/lib/responses/PullSummary.ts"(){At=class{constructor(){this.remoteMessages={all:[]};this.created=[];this.deleted=[];this.files=[];this.deletions={};this.insertions={};this.summary={changes:0,deletions:0,insertions:0}}};Ft=class{constructor(){this.remote="";this.hash={local:"",remote:""};this.branch={local:"",remote:""};this.message=""}toString(){return this.message}}}});function objectEnumerationResult(e){return e.objects=e.objects||{compressing:0,counting:0,enumerating:0,packReused:0,reused:{count:0,delta:0},total:{count:0,delta:0}}}function asObjectCount(e){const t=/^\s*(\d+)/.exec(e);const n=/delta (\d+)/i.exec(e);return{count:asNumber(t&&t[1]||"0"),delta:asNumber(n&&n[1]||"0")}}var jt;var qt=__esm({"src/lib/parsers/parse-remote-objects.ts"(){K();jt=[new $(/^remote:\s*(enumerating|counting|compressing) objects: (\d+),/i,((e,[t,n])=>{const r=t.toLowerCase();const i=objectEnumerationResult(e.remoteMessages);Object.assign(i,{[r]:asNumber(n)})})),new $(/^remote:\s*(enumerating|counting|compressing) objects: \d+% \(\d+\/(\d+)\),/i,((e,[t,n])=>{const r=t.toLowerCase();const i=objectEnumerationResult(e.remoteMessages);Object.assign(i,{[r]:asNumber(n)})})),new $(/total ([^,]+), reused ([^,]+), pack-reused (\d+)/i,((e,[t,n,r])=>{const i=objectEnumerationResult(e.remoteMessages);i.total=asObjectCount(t);i.reused=asObjectCount(n);i.packReused=asNumber(r)}))]}});function parseRemoteMessages(e,t){return parseStringResponse({remoteMessages:new Ut},$t,t)}var $t,Ut;var Ht=__esm({"src/lib/parsers/parse-remote-messages.ts"(){K();qt();$t=[new $(/^remote:\s*(.+)$/,((e,[t])=>{e.remoteMessages.all.push(t.trim());return false})),...jt,new $([/create a (?:pull|merge) request/i,/\s(https?:\/\/\S+)$/],((e,[t])=>{e.remoteMessages.pullRequestUrl=t})),new $([/found (\d+) vulnerabilities.+\(([^)]+)\)/i,/\s(https?:\/\/\S+)$/],((e,[t,n,r])=>{e.remoteMessages.vulnerabilities={count:asNumber(t),summary:n,url:r}}))];Ut=class{constructor(){this.all=[]}}}});function parsePullErrorResult(e,t){const n=parseStringResponse(new Ft,Kt,[e,t]);return n.message&&n}var Wt,Bt,Yt,Vt,Kt,Gt,zt;var Jt=__esm({"src/lib/parsers/parse-pull.ts"(){Lt();K();Ht();Wt=/^\s*(.+?)\s+\|\s+\d+\s*(\+*)(-*)/;Bt=/(\d+)\D+((\d+)\D+\(\+\))?(\D+(\d+)\D+\(-\))?/;Yt=/^(create|delete) mode \d+ (.+)/;Vt=[new q(Wt,((e,[t,n,r])=>{e.files.push(t);if(n){e.insertions[t]=n.length}if(r){e.deletions[t]=r.length}})),new q(Bt,((e,[t,,n,,r])=>{if(n!==void 0||r!==void 0){e.summary.changes=+t||0;e.summary.insertions=+n||0;e.summary.deletions=+r||0;return true}return false})),new q(Yt,((e,[t,n])=>{append(e.files,n);append(t==="create"?e.created:e.deleted,n)}))];Kt=[new q(/^from\s(.+)$/i,((e,[t])=>void(e.remote=t))),new q(/^fatal:\s(.+)$/,((e,[t])=>void(e.message=t))),new q(/([a-z0-9]+)\.\.([a-z0-9]+)\s+(\S+)\s+->\s+(\S+)$/,((e,[t,n,r,i])=>{e.branch.local=r;e.hash.local=t;e.branch.remote=i;e.hash.remote=n}))];Gt=(e,t)=>parseStringResponse(new At,Vt,[e,t]);zt=(e,t)=>Object.assign(new At,Gt(e,t),parseRemoteMessages(e,t))}});var Xt,Qt,Zt;var en=__esm({"src/lib/parsers/parse-merge.ts"(){Nt();K();Jt();Xt=[new q(/^Auto-merging\s+(.+)$/,((e,[t])=>{e.merges.push(t)})),new q(/^CONFLICT\s+\((.+)\): Merge conflict in (.+)$/,((e,[t,n])=>{e.conflicts.push(new It(t,n))})),new q(/^CONFLICT\s+\((.+\/delete)\): (.+) deleted in (.+) and/,((e,[t,n,r])=>{e.conflicts.push(new It(t,n,{deleteRef:r}))})),new q(/^CONFLICT\s+\((.+)\):/,((e,[t])=>{e.conflicts.push(new It(t,null))})),new q(/^Automatic merge failed;\s+(.+)$/,((e,[t])=>{e.result=t}))];Qt=(e,t)=>Object.assign(Zt(e,t),zt(e,t));Zt=e=>parseStringResponse(new Mt,Xt,e)}});function mergeTask(e){if(!e.length){return configurationErrorTask("Git.merge requires at least one option")}return{commands:["merge",...e],format:"utf-8",parser(e,t){const n=Qt(e,t);if(n.failed){throw new g(n)}return n}}}var tn=__esm({"src/lib/tasks/merge.ts"(){v();en();oe()}});function pushResultPushedItem(e,t,n){const r=n.includes("deleted");const i=n.includes("tag")||/^refs\/tags/.test(e);const s=!n.includes("new");return{deleted:r,tag:i,branch:!i,new:!s,alreadyUpdated:s,local:e,remote:t}}var nn,rn,sn;var on=__esm({"src/lib/parsers/parse-push.ts"(){K();Ht();nn=[new q(/^Pushing to (.+)$/,((e,[t])=>{e.repo=t})),new q(/^updating local tracking ref '(.+)'/,((e,[t])=>{e.ref=__spreadProps(__spreadValues({},e.ref||{}),{local:t})})),new q(/^[*-=]\s+([^:]+):(\S+)\s+\[(.+)]$/,((e,[t,n,r])=>{e.pushed.push(pushResultPushedItem(t,n,r))})),new q(/^Branch '([^']+)' set up to track remote branch '([^']+)' from '([^']+)'/,((e,[t,n,r])=>{e.branch=__spreadProps(__spreadValues({},e.branch||{}),{local:t,remote:n,remoteName:r})})),new q(/^([^:]+):(\S+)\s+([a-z0-9]+)\.\.([a-z0-9]+)$/,((e,[t,n,r,i])=>{e.update={head:{local:t,remote:n},hash:{from:r,to:i}}}))];rn=(e,t)=>{const n=sn(e,t);const r=parseRemoteMessages(e,t);return __spreadValues(__spreadValues({},n),r)};sn=(e,t)=>parseStringResponse({pushed:[]},nn,[e,t])}});var an={};__export(an,{pushTagsTask:()=>pushTagsTask,pushTask:()=>pushTask});function pushTagsTask(e={},t){append(t,"--tags");return pushTask(e,t)}function pushTask(e={},t){const n=["push",...t];if(e.branch){n.splice(1,0,e.branch)}if(e.remote){n.splice(1,0,e.remote)}remove(n,"-v");append(n,"--verbose");append(n,"--porcelain");return{commands:n,format:"utf-8",parser:rn}}var cn=__esm({"src/lib/tasks/push.ts"(){on();K()}});var un,ln;var dn=__esm({"src/lib/responses/FileStatusSummary.ts"(){un=/^(.+) -> (.+)$/;ln=class{constructor(e,t,n){this.path=e;this.index=t;this.working_dir=n;if(t+n==="R"){const t=un.exec(e)||[null,e,e];this.from=t[1]||"";this.path=t[2]||""}}}}});function renamedFile(e){const[t,n]=e.split(C);return{from:n||t,to:t}}function parser2(e,t,n){return[`${e}${t}`,n]}function conflicts(e,...t){return t.map((t=>parser2(e,t,((e,t)=>append(e.conflicted,t)))))}function splitLine(e,t){const n=t.trim();switch(" "){case n.charAt(2):return data(n.charAt(0),n.charAt(1),n.substr(3));case n.charAt(1):return data(" ",n.charAt(0),n.substr(2));default:return}function data(t,n,r){const i=`${t}${n}`;const s=pn.get(i);if(s){s(e,r)}if(i!=="##"&&i!=="!!"){e.files.push(new ln(r.replace(/\0.+$/,""),t,n))}}}var fn,pn,hn;var mn=__esm({"src/lib/responses/StatusSummary.ts"(){K();dn();fn=class{constructor(){this.not_added=[];this.conflicted=[];this.created=[];this.deleted=[];this.ignored=void 0;this.modified=[];this.renamed=[];this.files=[];this.staged=[];this.ahead=0;this.behind=0;this.current=null;this.tracking=null;this.detached=false;this.isClean=()=>!this.files.length}};pn=new Map([parser2(" ","A",((e,t)=>append(e.created,t))),parser2(" ","D",((e,t)=>append(e.deleted,t))),parser2(" ","M",((e,t)=>append(e.modified,t))),parser2("A"," ",((e,t)=>append(e.created,t)&&append(e.staged,t))),parser2("A","M",((e,t)=>append(e.created,t)&&append(e.staged,t)&&append(e.modified,t))),parser2("D"," ",((e,t)=>append(e.deleted,t)&&append(e.staged,t))),parser2("M"," ",((e,t)=>append(e.modified,t)&&append(e.staged,t))),parser2("M","M",((e,t)=>append(e.modified,t)&&append(e.staged,t))),parser2("R"," ",((e,t)=>{append(e.renamed,renamedFile(t))})),parser2("R","M",((e,t)=>{const n=renamedFile(t);append(e.renamed,n);append(e.modified,n.to)})),parser2("!","!",((e,t)=>{append(e.ignored=e.ignored||[],t)})),parser2("?","?",((e,t)=>append(e.not_added,t))),...conflicts("A","A","U"),...conflicts("D","D","U"),...conflicts("U","A","D","U"),["##",(e,t)=>{const n=/ahead (\d+)/;const r=/behind (\d+)/;const i=/^(.+?(?=(?:\.{3}|\s|$)))/;const s=/\.{3}(\S*)/;const o=/\son\s([\S]+)$/;let a;a=n.exec(t);e.ahead=a&&+a[1]||0;a=r.exec(t);e.behind=a&&+a[1]||0;a=i.exec(t);e.current=a&&a[1];a=s.exec(t);e.tracking=a&&a[1];a=o.exec(t);e.current=a&&a[1]||e.current;e.detached=/\(no branch\)/.test(t)}]]);hn=function(e){const t=e.split(C);const n=new fn;for(let e=0,r=t.length;e<r;){let r=t[e++].trim();if(!r){continue}if(r.charAt(0)==="R"){r+=C+(t[e++]||"")}splitLine(n,r)}return n}}});function statusTask(e){const t=["status","--porcelain","-b","-u","--null",...e.filter((e=>!gn.includes(e)))];return{format:"utf-8",commands:t,parser(e){return hn(e)}}}var gn;var vn=__esm({"src/lib/tasks/status.ts"(){mn();gn=["--null","-z"]}});var yn={};__export(yn,{SimpleGitApi:()=>bn});var bn;var _n=__esm({"src/lib/simple-git-api.ts"(){Qe();Ze();rt();ve();we();it();dt();Pt();tn();cn();vn();oe();K();bn=class{constructor(e){this._executor=e}_runTask(e,t){const n=this._executor.chain();const r=n.push(e);if(t){taskCallback(e,r,t)}return Object.create(this,{then:{value:r.then.bind(r)},catch:{value:r.catch.bind(r)},_executor:{value:n}})}add(e){return this._runTask(straightThroughStringTask(["add",...asArray(e)]),trailingFunctionArgument(arguments))}cwd(e){const t=trailingFunctionArgument(arguments);if(typeof e==="string"){return this._runTask(changeWorkingDirectoryTask(e,this._executor),t)}if(typeof(e==null?void 0:e.path)==="string"){return this._runTask(changeWorkingDirectoryTask(e.path,e.root&&this._executor||void 0),t)}return this._runTask(configurationErrorTask("Git.cwd: workingDirectory must be supplied as a string"),t)}hashObject(e,t){return this._runTask(hashObjectTask(e,t===true),trailingFunctionArgument(arguments))}init(e){return this._runTask(initTask(e===true,this._executor.cwd,getTrailingOptions(arguments)),trailingFunctionArgument(arguments))}merge(){return this._runTask(mergeTask(getTrailingOptions(arguments)),trailingFunctionArgument(arguments))}mergeFromTo(e,t){if(!(D(e)&&D(t))){return this._runTask(configurationErrorTask(`Git.mergeFromTo requires that the 'remote' and 'branch' arguments are supplied as strings`))}return this._runTask(mergeTask([e,t,...getTrailingOptions(arguments)]),trailingFunctionArgument(arguments,false))}outputHandler(e){this._executor.outputHandler=e;return this}push(){const e=pushTask({remote:filterType(arguments[0],D),branch:filterType(arguments[1],D)},getTrailingOptions(arguments));return this._runTask(e,trailingFunctionArgument(arguments))}stash(){return this._runTask(straightThroughStringTask(["stash",...getTrailingOptions(arguments)]),trailingFunctionArgument(arguments))}status(){return this._runTask(statusTask(getTrailingOptions(arguments)),trailingFunctionArgument(arguments))}};Object.assign(bn.prototype,commit_default(),config_default(),grep_default(),log_default())}});var Sn={};__export(Sn,{Scheduler:()=>kn});var wn,Tn,kn;var Cn=__esm({"src/lib/runners/scheduler.ts"(){K();wn=n(42841);He();Tn=(()=>{let e=0;return()=>{e++;const{promise:t,done:n}=(0,wn.createDeferred)();return{promise:t,done:n,id:e}}})();kn=class{constructor(e=2){this.concurrency=e;this.logger=createLogger("","scheduler");this.pending=[];this.running=[];this.logger(`Constructed, concurrency=%s`,e)}schedule(){if(!this.pending.length||this.running.length>=this.concurrency){this.logger(`Schedule attempt ignored, pending=%s running=%s concurrency=%s`,this.pending.length,this.running.length,this.concurrency);return}const e=append(this.running,this.pending.shift());this.logger(`Attempting id=%s`,e.id);e.done((()=>{this.logger(`Completing id=`,e.id);remove(this.running,e);this.schedule()}))}next(){const{promise:e,id:t}=append(this.pending,Tn());this.logger(`Scheduling id=%s`,t);this.schedule();return e}}}});var En={};__export(En,{applyPatchTask:()=>applyPatchTask});function applyPatchTask(e,t){return straightThroughStringTask(["apply",...t,...e])}var Rn=__esm({"src/lib/tasks/apply-patch.ts"(){oe()}});function branchDeletionSuccess(e,t){return{branch:e,hash:t,success:true}}function branchDeletionFailure(e){return{branch:e,hash:null,success:false}}var xn;var On=__esm({"src/lib/responses/BranchDeleteSummary.ts"(){xn=class{constructor(){this.all=[];this.branches={};this.errors=[]}get success(){return!this.errors.length}}}});function hasBranchDeletionError(e,t){return t===1&&Pn.test(e)}var Dn,Pn,In,Mn;var Nn=__esm({"src/lib/parsers/parse-branch-delete.ts"(){On();K();Dn=/(\S+)\s+\(\S+\s([^)]+)\)/;Pn=/^error[^']+'([^']+)'/m;In=[new q(Dn,((e,[t,n])=>{const r=branchDeletionSuccess(t,n);e.all.push(r);e.branches[t]=r})),new q(Pn,((e,[t])=>{const n=branchDeletionFailure(t);e.errors.push(n);e.all.push(n);e.branches[t]=n}))];Mn=(e,t)=>parseStringResponse(new xn,In,[e,t])}});var An;var Fn=__esm({"src/lib/responses/BranchSummary.ts"(){An=class{constructor(){this.all=[];this.branches={};this.current="";this.detached=false}push(e,t,n,r,i){if(e==="*"){this.detached=t;this.current=n}this.all.push(n);this.branches[n]={current:e==="*",linkedWorkTree:e==="+",name:n,commit:r,label:i}}}}});function branchStatus(e){return e?e.charAt(0):""}function parseBranchSummary(e){return parseStringResponse(new An,Ln,e)}var Ln;var jn=__esm({"src/lib/parsers/parse-branch.ts"(){Fn();K();Ln=[new q(/^([*+]\s)?\((?:HEAD )?detached (?:from|at) (\S+)\)\s+([a-z0-9]+)\s(.*)$/,((e,[t,n,r,i])=>{e.push(branchStatus(t),true,n,r,i)})),new q(/^([*+]\s)?(\S+)\s+([a-z0-9]+)\s?(.*)$/s,((e,[t,n,r,i])=>{e.push(branchStatus(t),false,n,r,i)}))]}});var qn={};__export(qn,{branchLocalTask:()=>branchLocalTask,branchTask:()=>branchTask,containsDeleteBranchCommand:()=>containsDeleteBranchCommand,deleteBranchTask:()=>deleteBranchTask,deleteBranchesTask:()=>deleteBranchesTask});function containsDeleteBranchCommand(e){const t=["-d","-D","--delete"];return e.some((e=>t.includes(e)))}function branchTask(e){const t=containsDeleteBranchCommand(e);const n=["branch",...e];if(n.length===1){n.push("-a")}if(!n.includes("-v")){n.splice(1,0,"-v")}return{format:"utf-8",commands:n,parser(e,n){if(t){return Mn(e,n).all[0]}return parseBranchSummary(e)}}}function branchLocalTask(){const e=parseBranchSummary;return{format:"utf-8",commands:["branch","-v"],parser:e}}function deleteBranchesTask(e,t=false){return{format:"utf-8",commands:["branch","-v",t?"-D":"-d",...e],parser(e,t){return Mn(e,t)},onError({exitCode:e,stdOut:t},n,r,i){if(!hasBranchDeletionError(String(n),e)){return i(n)}r(t)}}}function deleteBranchTask(e,t=false){const n={format:"utf-8",commands:["branch","-v",t?"-D":"-d",e],parser(t,n){return Mn(t,n).branches[e]},onError({exitCode:e,stdErr:t,stdOut:r},i,s,o){if(!hasBranchDeletionError(String(i),e)){return o(i)}throw new g(n.parser(bufferToString(r),bufferToString(t)),String(i))}};return n}var $n=__esm({"src/lib/tasks/branch.ts"(){v();Nn();jn();K()}});var Un;var Hn=__esm({"src/lib/responses/CheckIgnore.ts"(){Un=e=>e.split(/\n/g).map((e=>e.trim())).filter((e=>!!e))}});var Wn={};__export(Wn,{checkIgnoreTask:()=>checkIgnoreTask});function checkIgnoreTask(e){return{commands:["check-ignore",...e],format:"utf-8",parser:Un}}var Bn=__esm({"src/lib/tasks/check-ignore.ts"(){Hn()}});var Yn={};__export(Yn,{cloneMirrorTask:()=>cloneMirrorTask,cloneTask:()=>cloneTask});function disallowedCommand(e){return/^--upload-pack(=|$)/.test(e)}function cloneTask(e,t,n){const r=["clone",...n];D(e)&&r.push(e);D(t)&&r.push(t);const i=r.find(disallowedCommand);if(i){return configurationErrorTask(`git.fetch: potential exploit argument blocked.`)}return straightThroughStringTask(r)}function cloneMirrorTask(e,t,n){append(n,"--mirror");return cloneTask(e,t,n)}var Vn=__esm({"src/lib/tasks/clone.ts"(){oe();K()}});function parseFetchResult(e,t){const n={raw:e,remote:null,branches:[],tags:[]};return parseStringResponse(n,Kn,[e,t])}var Kn;var Gn=__esm({"src/lib/parsers/parse-fetch.ts"(){K();Kn=[new q(/From (.+)$/,((e,[t])=>{e.remote=t})),new q(/\* \[new branch]\s+(\S+)\s*-> (.+)$/,((e,[t,n])=>{e.branches.push({name:t,tracking:n})})),new q(/\* \[new tag]\s+(\S+)\s*-> (.+)$/,((e,[t,n])=>{e.tags.push({name:t,tracking:n})}))]}});var zn={};__export(zn,{fetchTask:()=>fetchTask});function disallowedCommand2(e){return/^--upload-pack(=|$)/.test(e)}function fetchTask(e,t,n){const r=["fetch",...n];if(e&&t){r.push(e,t)}const i=r.find(disallowedCommand2);if(i){return configurationErrorTask(`git.fetch: potential exploit argument blocked.`)}return{commands:r,format:"utf-8",parser:parseFetchResult}}var Jn=__esm({"src/lib/tasks/fetch.ts"(){Gn();oe()}});function parseMoveResult(e){return parseStringResponse({moves:[]},Xn,e)}var Xn;var Qn=__esm({"src/lib/parsers/parse-move.ts"(){K();Xn=[new q(/^Renaming (.+) to (.+)$/,((e,[t,n])=>{e.moves.push({from:t,to:n})}))]}});var Zn={};__export(Zn,{moveTask:()=>moveTask});function moveTask(e,t){return{commands:["mv","-v",...asArray(e),t],format:"utf-8",parser:parseMoveResult}}var er=__esm({"src/lib/tasks/move.ts"(){Qn();K()}});var tr={};__export(tr,{pullTask:()=>pullTask});function pullTask(e,t,n){const r=["pull",...n];if(e&&t){r.splice(1,0,e,t)}return{commands:r,format:"utf-8",parser(e,t){return zt(e,t)},onError(e,t,n,r){const i=parsePullErrorResult(bufferToString(e.stdOut),bufferToString(e.stdErr));if(i){return r(new g(i))}r(t)}}}var nr=__esm({"src/lib/tasks/pull.ts"(){v();Jt();K()}});function parseGetRemotes(e){const t={};forEach(e,(([e])=>t[e]={name:e}));return Object.values(t)}function parseGetRemotesVerbose(e){const t={};forEach(e,(([e,n,r])=>{if(!t.hasOwnProperty(e)){t[e]={name:e,refs:{fetch:"",push:""}}}if(r&&n){t[e].refs[r.replace(/[^a-z]/g,"")]=n}}));return Object.values(t)}function forEach(e,t){forEachLineWithContent(e,(e=>t(e.split(/\s+/))))}var rr=__esm({"src/lib/responses/GetRemoteSummary.ts"(){K()}});var ir={};__export(ir,{addRemoteTask:()=>addRemoteTask,getRemotesTask:()=>getRemotesTask,listRemotesTask:()=>listRemotesTask,remoteTask:()=>remoteTask,removeRemoteTask:()=>removeRemoteTask});function addRemoteTask(e,t,n=[]){return straightThroughStringTask(["remote","add",...n,e,t])}function getRemotesTask(e){const t=["remote"];if(e){t.push("-v")}return{commands:t,format:"utf-8",parser:e?parseGetRemotesVerbose:parseGetRemotes}}function listRemotesTask(e=[]){const t=[...e];if(t[0]!=="ls-remote"){t.unshift("ls-remote")}return straightThroughStringTask(t)}function remoteTask(e=[]){const t=[...e];if(t[0]!=="remote"){t.unshift("remote")}return straightThroughStringTask(t)}function removeRemoteTask(e){return straightThroughStringTask(["remote","remove",e])}var sr=__esm({"src/lib/tasks/remote.ts"(){rr();oe()}});var or={};__export(or,{stashListTask:()=>stashListTask});function stashListTask(e={},t){const n=parseLogOptions(e);const r=["stash","list",...n.commands,...t];const i=createListLogSummaryParser(n.splitter,n.fields,logFormatFromCommand(r));return validateLogFormatConfig(r)||{commands:r,format:"utf-8",parser:i}}var ar=__esm({"src/lib/tasks/stash-list.ts"(){pt();Rt();Ot();Pt()}});var cr={};__export(cr,{addSubModuleTask:()=>addSubModuleTask,initSubModuleTask:()=>initSubModuleTask,subModuleTask:()=>subModuleTask,updateSubModuleTask:()=>updateSubModuleTask});function addSubModuleTask(e,t){return subModuleTask(["add",e,t])}function initSubModuleTask(e){return subModuleTask(["init",...e])}function subModuleTask(e){const t=[...e];if(t[0]!=="submodule"){t.unshift("submodule")}return straightThroughStringTask(t)}function updateSubModuleTask(e){return subModuleTask(["update",...e])}var ur=__esm({"src/lib/tasks/sub-module.ts"(){oe()}});function singleSorted(e,t){const n=isNaN(e);const r=isNaN(t);if(n!==r){return n?1:-1}return n?sorted(e,t):0}function sorted(e,t){return e===t?0:e>t?1:-1}function trimmed(e){return e.trim()}function toNumber(e){if(typeof e==="string"){return parseInt(e.replace(/^\D+/g,""),10)||0}return 0}var lr,dr;var fr=__esm({"src/lib/responses/TagList.ts"(){lr=class{constructor(e,t){this.all=e;this.latest=t}};dr=function(e,t=false){const n=e.split("\n").map(trimmed).filter(Boolean);if(!t){n.sort((function(e,t){const n=e.split(".");const r=t.split(".");if(n.length===1||r.length===1){return singleSorted(toNumber(n[0]),toNumber(r[0]))}for(let e=0,t=Math.max(n.length,r.length);e<t;e++){const t=sorted(toNumber(n[e]),toNumber(r[e]));if(t){return t}}return 0}))}const r=t?n[0]:[...n].reverse().find((e=>e.indexOf(".")>=0));return new lr(n,r)}}});var pr={};__export(pr,{addAnnotatedTagTask:()=>addAnnotatedTagTask,addTagTask:()=>addTagTask,tagListTask:()=>tagListTask});function tagListTask(e=[]){const t=e.some((e=>/^--sort=/.test(e)));return{format:"utf-8",commands:["tag","-l",...e],parser(e){return dr(e,t)}}}function addTagTask(e){return{format:"utf-8",commands:["tag",e],parser(){return{name:e}}}}function addAnnotatedTagTask(e,t){return{format:"utf-8",commands:["tag","-a","-m",t,e],parser(){return{name:e}}}}var hr=__esm({"src/lib/tasks/tag.ts"(){fr()}});var mr=__commonJS({"src/git.js"(e,t){var{GitExecutor:n}=(Xe(),p(ze));var{SimpleGitApi:r}=(_n(),p(yn));var{Scheduler:i}=(Cn(),p(Sn));var{configurationErrorTask:s}=(oe(),p(ie));var{asArray:o,filterArray:a,filterPrimitives:c,filterString:u,filterStringOrStringArray:l,filterType:d,getTrailingOptions:f,trailingFunctionArgument:h,trailingOptionsArgument:m}=(K(),p(V));var{applyPatchTask:g}=(Rn(),p(En));var{branchTask:v,branchLocalTask:y,deleteBranchesTask:b,deleteBranchTask:_}=($n(),p(qn));var{checkIgnoreTask:S}=(Bn(),p(Wn));var{checkIsRepoTask:w}=(Q(),p(G));var{cloneTask:T,cloneMirrorTask:k}=(Vn(),p(Yn));var{cleanWithOptionsTask:C,isCleanOptionsArray:E}=(pe(),p(ae));var{commitTask:R}=(rt(),p(nt));var{diffSummaryTask:x}=(Ot(),p(xt));var{fetchTask:O}=(Jn(),p(zn));var{moveTask:D}=(er(),p(Zn));var{pullTask:P}=(nr(),p(tr));var{pushTagsTask:I}=(cn(),p(an));var{addRemoteTask:M,getRemotesTask:N,listRemotesTask:A,remoteTask:F,removeRemoteTask:L}=(sr(),p(ir));var{getResetMode:j,resetTask:q}=(Ee(),p(Te));var{stashListTask:$}=(ar(),p(or));var{addSubModuleTask:U,initSubModuleTask:H,subModuleTask:W,updateSubModuleTask:B}=(ur(),p(cr));var{addAnnotatedTagTask:Y,addTagTask:z,tagListTask:J}=(hr(),p(pr));var{straightThroughBufferTask:X,straightThroughStringTask:Z}=(oe(),p(ie));function Git2(e,t){this._executor=new n(e.binary,e.baseDir,new i(e.maxConcurrentProcesses),t)}(Git2.prototype=Object.create(r.prototype)).constructor=Git2;Git2.prototype.customBinary=function(e){this._executor.binary=e;return this};Git2.prototype.env=function(e,t){if(arguments.length===1&&typeof e==="object"){this._executor.env=e}else{(this._executor.env=this._executor.env||{})[e]=t}return this};Git2.prototype.stashList=function(e){return this._runTask($(m(arguments)||{},a(e)&&e||[]),h(arguments))};function createCloneTask(e,t,n,r){if(typeof n!=="string"){return s(`git.${e}() requires a string 'repoPath'`)}return t(n,d(r,u),f(arguments))}Git2.prototype.clone=function(){return this._runTask(createCloneTask("clone",T,...arguments),h(arguments))};Git2.prototype.mirror=function(){return this._runTask(createCloneTask("mirror",k,...arguments),h(arguments))};Git2.prototype.mv=function(e,t){return this._runTask(D(e,t),h(arguments))};Git2.prototype.checkoutLatestTag=function(e){var t=this;return this.pull((function(){t.tags((function(n,r){t.checkout(r.latest,e)}))}))};Git2.prototype.pull=function(e,t,n,r){return this._runTask(P(d(e,u),d(t,u),f(arguments)),h(arguments))};Git2.prototype.fetch=function(e,t){return this._runTask(O(d(e,u),d(t,u),f(arguments)),h(arguments))};Git2.prototype.silent=function(e){console.warn("simple-git deprecation notice: git.silent: logging should be configured using the `debug` library / `DEBUG` environment variable, this will be an error in version 3");return this};Git2.prototype.tags=function(e,t){return this._runTask(J(f(arguments)),h(arguments))};Git2.prototype.rebase=function(){return this._runTask(Z(["rebase",...f(arguments)]),h(arguments))};Git2.prototype.reset=function(e){return this._runTask(q(j(e),f(arguments)),h(arguments))};Git2.prototype.revert=function(e){const t=h(arguments);if(typeof e!=="string"){return this._runTask(s("Commit must be a string"),t)}return this._runTask(Z(["revert",...f(arguments,0,true),e]),t)};Git2.prototype.addTag=function(e){const t=typeof e==="string"?z(e):s("Git.addTag requires a tag name");return this._runTask(t,h(arguments))};Git2.prototype.addAnnotatedTag=function(e,t){return this._runTask(Y(e,t),h(arguments))};Git2.prototype.checkout=function(){const e=["checkout",...f(arguments,true)];return this._runTask(Z(e),h(arguments))};Git2.prototype.checkoutBranch=function(e,t,n){return this.checkout(["-b",e,t],h(arguments))};Git2.prototype.checkoutLocalBranch=function(e,t){return this.checkout(["-b",e],h(arguments))};Git2.prototype.deleteLocalBranch=function(e,t,n){return this._runTask(_(e,typeof t==="boolean"?t:false),h(arguments))};Git2.prototype.deleteLocalBranches=function(e,t,n){return this._runTask(b(e,typeof t==="boolean"?t:false),h(arguments))};Git2.prototype.branch=function(e,t){return this._runTask(v(f(arguments)),h(arguments))};Git2.prototype.branchLocal=function(e){return this._runTask(y(),h(arguments))};Git2.prototype.raw=function(e){const t=!Array.isArray(e);const n=[].slice.call(t?arguments:e,0);for(let e=0;e<n.length&&t;e++){if(!c(n[e])){n.splice(e,n.length-e);break}}n.push(...f(arguments,0,true));var r=h(arguments);if(!n.length){return this._runTask(s("Raw: must supply one or more command to execute"),r)}return this._runTask(Z(n),r)};Git2.prototype.submoduleAdd=function(e,t,n){return this._runTask(U(e,t),h(arguments))};Git2.prototype.submoduleUpdate=function(e,t){return this._runTask(B(f(arguments,true)),h(arguments))};Git2.prototype.submoduleInit=function(e,t){return this._runTask(H(f(arguments,true)),h(arguments))};Git2.prototype.subModule=function(e,t){return this._runTask(W(f(arguments)),h(arguments))};Git2.prototype.listRemote=function(){return this._runTask(A(f(arguments)),h(arguments))};Git2.prototype.addRemote=function(e,t,n){return this._runTask(M(e,t,f(arguments)),h(arguments))};Git2.prototype.removeRemote=function(e,t){return this._runTask(L(e),h(arguments))};Git2.prototype.getRemotes=function(e,t){return this._runTask(N(e===true),h(arguments))};Git2.prototype.remote=function(e,t){return this._runTask(F(f(arguments)),h(arguments))};Git2.prototype.tag=function(e,t){const n=f(arguments);if(n[0]!=="tag"){n.unshift("tag")}return this._runTask(Z(n),h(arguments))};Git2.prototype.updateServerInfo=function(e){return this._runTask(Z(["update-server-info"]),h(arguments))};Git2.prototype.pushTags=function(e,t){const n=I({remote:d(e,u)},f(arguments));return this._runTask(n,h(arguments))};Git2.prototype.rm=function(e){return this._runTask(Z(["rm","-f",...o(e)]),h(arguments))};Git2.prototype.rmKeepLocal=function(e){return this._runTask(Z(["rm","--cached",...o(e)]),h(arguments))};Git2.prototype.catFile=function(e,t){return this._catFile("utf-8",arguments)};Git2.prototype.binaryCatFile=function(){return this._catFile("buffer",arguments)};Git2.prototype._catFile=function(e,t){var n=h(t);var r=["cat-file"];var i=t[0];if(typeof i==="string"){return this._runTask(s("Git.catFile: options must be supplied as an array of strings"),n)}if(Array.isArray(i)){r.push.apply(r,i)}const o=e==="buffer"?X(r):Z(r);return this._runTask(o,n)};Git2.prototype.diff=function(e,t){const n=u(e)?s("git.diff: supplying options as a single string is no longer supported, switch to an array of strings"):Z(["diff",...f(arguments)]);return this._runTask(n,h(arguments))};Git2.prototype.diffSummary=function(){return this._runTask(x(f(arguments,1)),h(arguments))};Git2.prototype.applyPatch=function(e){const t=!l(e)?s(`git.applyPatch requires one or more string patches as the first argument`):g(o(e),f([].slice.call(arguments,1)));return this._runTask(t,h(arguments))};Git2.prototype.revparse=function(){const e=["rev-parse",...f(arguments,true)];return this._runTask(Z(e,true),h(arguments))};Git2.prototype.show=function(e,t){return this._runTask(Z(["show",...f(arguments,1)]),h(arguments))};Git2.prototype.clean=function(e,t,n){const r=E(e);const i=r&&e.join("")||d(e,u)||"";const s=f([].slice.call(arguments,r?1:0));return this._runTask(C(i,s),h(arguments))};Git2.prototype.exec=function(e){const t={commands:[],format:"utf-8",parser(){if(typeof e==="function"){e()}}};return this._runTask(t)};Git2.prototype.clearQueue=function(){return this};Git2.prototype.checkIgnore=function(e,t){return this._runTask(S(o(d(e,l,[]))),h(arguments))};Git2.prototype.checkIsRepo=function(e,t){return this._runTask(w(d(e,u)),h(arguments))};t.exports=Git2}});var gr={};__export(gr,{esModuleFactory:()=>esModuleFactory,gitExportFactory:()=>gitExportFactory,gitInstanceFactory:()=>gitInstanceFactory});function esModuleFactory(e){return Object.defineProperties(e,{__esModule:{value:true},default:{value:e}})}function gitExportFactory(e){return Object.assign(e.bind(null),Re)}function gitInstanceFactory(e,t){const n=new Ne;const r=createInstanceConfig(e&&(typeof e==="string"?{baseDir:e}:e)||{},t);if(!folderExists(r.baseDir)){throw new y(r,`Cannot use simple-git on a directory that does not exist`)}if(Array.isArray(r.config)){n.add(commandConfigPrefixingPlugin(r.config))}n.add(completionDetectionPlugin(r.completion));r.progress&&n.add(progressMonitorPlugin(r.progress));r.timeout&&n.add(timeoutPlugin(r.timeout));r.spawnOptions&&n.add(spawnOptionsPlugin(r.spawnOptions));n.add(errorDetectionPlugin(errorDetectionHandler(true)));r.errors&&n.add(errorDetectionPlugin(r.errors));return new vr(r,n)}var vr;var yr=__esm({"src/lib/git-factory.ts"(){xe();$e();K();vr=mr()}});var br={};__export(br,{gitP:()=>gitP});function gitP(...e){let t;let n=Promise.resolve();try{t=gitInstanceFactory(...e)}catch(e){n=Promise.reject(e)}function builderReturn(){return r}function chainReturn(){return n}const r=[..._r,...Sr].reduce(((e,n)=>{const r=Sr.includes(n);const i=r?asyncWrapper(n,t):syncWrapper(n,t,e);const s=r?chainReturn:builderReturn;Object.defineProperty(e,n,{enumerable:false,configurable:false,value:t?i:s});return e}),{});return r;function asyncWrapper(e,t){return function(...r){if(typeof r[r.length]==="function"){throw new TypeError("Promise interface requires that handlers are not supplied inline, trailing function not allowed in call to "+e)}return n.then((function(){return new Promise((function(n,i){const callback=(e,t)=>{if(e){return i(toError(e))}n(t)};r.push(callback);t[e].apply(t,r)}))}))}}function syncWrapper(e,t,n){return(...r)=>{t[e](...r);return n}}}function toError(e){if(e instanceof Error){return e}if(typeof e==="string"){return new Error(e)}return new g(e)}var _r,Sr;var wr=__esm({"src/lib/runners/promise-wrapped.ts"(){v();yr();_r=["customBinary","env","outputHandler","silent"];Sr=["add","addAnnotatedTag","addConfig","addRemote","addTag","applyPatch","binaryCatFile","branch","branchLocal","catFile","checkIgnore","checkIsRepo","checkout","checkoutBranch","checkoutLatestTag","checkoutLocalBranch","clean","clone","commit","cwd","deleteLocalBranch","deleteLocalBranches","diff","diffSummary","exec","fetch","getRemotes","init","listConfig","listRemote","log","merge","mergeFromTo","mirror","mv","pull","push","pushTags","raw","rebase","remote","removeRemote","reset","revert","revparse","rm","rmKeepLocal","show","stash","stashList","status","subModule","submoduleAdd","submoduleInit","submoduleUpdate","tag","tags","updateServerInfo"]}});var{gitP:Tr}=(wr(),p(br));var{esModuleFactory:kr,gitInstanceFactory:Cr,gitExportFactory:Er}=(yr(),p(gr));var Rr=kr(Er(Cr));e.exports=Object.assign(Rr,{gitP:Tr,simpleGit:Rr})},59665:e=>{var t;var n;var r;var i;var s;var o;var a;var c;var u;var l;var d;var f;var p;var h;var m;var g;var v;var y;var b;var _;var S;var w;var T;var k;var C;(function(t){var n=typeof global==="object"?global:typeof self==="object"?self:typeof this==="object"?this:{};if(typeof define==="function"&&define.amd){define("tslib",["exports"],(function(e){t(createExporter(n,createExporter(e)))}))}else if(true&&typeof e.exports==="object"){t(createExporter(n,createExporter(e.exports)))}else{t(createExporter(n))}function createExporter(e,t){if(e!==n){if(typeof Object.create==="function"){Object.defineProperty(e,"__esModule",{value:true})}else{e.__esModule=true}}return function(n,r){return e[n]=t?t(n,r):r}}})((function(e){var E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))e[n]=t[n]};t=function(e,t){if(typeof t!=="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");E(e,t);function __(){this.constructor=e}e.prototype=t===null?Object.create(t):(__.prototype=t.prototype,new __)};n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i))e[i]=t[i]}return e};r=function(e,t){var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0)n[r]=e[r];if(e!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++){if(t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i]))n[r[i]]=e[r[i]]}return n};i=function(e,t,n,r){var i=arguments.length,s=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,o;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)if(o=e[a])s=(i<3?o(s):i>3?o(t,n,s):o(t,n))||s;return i>3&&s&&Object.defineProperty(t,n,s),s};s=function(e,t){return function(n,r){t(n,r,e)}};o=function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};a=function(e,t,n,r){function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function fulfilled(e){try{step(r.next(e))}catch(e){i(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){i(e)}}function step(e){e.done?n(e.value):adopt(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())}))};c=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function verb(e){return function(t){return step([e,t])}}function step(o){if(r)throw new TypeError("Generator is already executing.");while(n)try{if(r=1,i&&(s=o[0]&2?i["return"]:o[0]?i["throw"]||((s=i["return"])&&s.call(i),0):i.next)&&!(s=s.call(i,o[1])).done)return s;if(i=0,s)o=[o[0]&2,s.value];switch(o[0]){case 0:case 1:s=o;break;case 4:n.label++;return{value:o[1],done:false};case 5:n.label++;i=o[1];o=[0];continue;case 7:o=n.ops.pop();n.trys.pop();continue;default:if(!(s=n.trys,s=s.length>0&&s[s.length-1])&&(o[0]===6||o[0]===2)){n=0;continue}if(o[0]===3&&(!s||o[1]>s[0]&&o[1]<s[3])){n.label=o[1];break}if(o[0]===6&&n.label<s[1]){n.label=s[1];s=o;break}if(s&&n.label<s[2]){n.label=s[2];n.ops.push(o);break}if(s[2])n.ops.pop();n.trys.pop();continue}o=t.call(e,n)}catch(e){o=[6,e];i=0}finally{r=s=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}};u=function(e,t){for(var n in e)if(n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n))C(t,e,n)};C=Object.create?function(e,t,n,r){if(r===undefined)r=n;var i=Object.getOwnPropertyDescriptor(t,n);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[n]}}}Object.defineProperty(e,r,i)}:function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]};l=function(e){var t=typeof Symbol==="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length==="number")return{next:function(){if(e&&r>=e.length)e=void 0;return{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};d=function(e,t){var n=typeof Symbol==="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,s=[],o;try{while((t===void 0||t-- >0)&&!(i=r.next()).done)s.push(i.value)}catch(e){o={error:e}}finally{try{if(i&&!i.done&&(n=r["return"]))n.call(r)}finally{if(o)throw o.error}}return s};f=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(d(arguments[t]));return e};p=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r};h=function(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++){if(s||!(r in t)){if(!s)s=Array.prototype.slice.call(t,0,r);s[r]=t[r]}}return e.concat(s||Array.prototype.slice.call(t))};m=function(e){return this instanceof m?(this.v=e,this):new m(e)};g=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i;function verb(e){if(r[e])i[e]=function(t){return new Promise((function(n,r){s.push([e,t,n,r])>1||resume(e,t)}))}}function resume(e,t){try{step(r[e](t))}catch(e){settle(s[0][3],e)}}function step(e){e.value instanceof m?Promise.resolve(e.value.v).then(fulfill,reject):settle(s[0][2],e)}function fulfill(e){resume("next",e)}function reject(e){resume("throw",e)}function settle(e,t){if(e(t),s.shift(),s.length)resume(s[0][0],s[0][1])}};v=function(e){var t,n;return t={},verb("next"),verb("throw",(function(e){throw e})),verb("return"),t[Symbol.iterator]=function(){return this},t;function verb(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:m(e[r](t)),done:r==="return"}:i?i(t):t}:i}};y=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof l==="function"?l(e):e[Symbol.iterator](),n={},verb("next"),verb("throw"),verb("return"),n[Symbol.asyncIterator]=function(){return this},n);function verb(t){n[t]=e[t]&&function(n){return new Promise((function(r,i){n=e[t](n),settle(r,i,n.done,n.value)}))}}function settle(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}};b=function(e,t){if(Object.defineProperty){Object.defineProperty(e,"raw",{value:t})}else{e.raw=t}return e};var R=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t};_=function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(n!=="default"&&Object.prototype.hasOwnProperty.call(e,n))C(t,e,n);R(t,e);return t};S=function(e){return e&&e.__esModule?e:{default:e}};w=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t==="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)};T=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t==="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n};k=function(e,t){if(t===null||typeof t!=="object"&&typeof t!=="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e==="function"?t===e:e.has(t)};e("__extends",t);e("__assign",n);e("__rest",r);e("__decorate",i);e("__param",s);e("__metadata",o);e("__awaiter",a);e("__generator",c);e("__exportStar",u);e("__createBinding",C);e("__values",l);e("__read",d);e("__spread",f);e("__spreadArrays",p);e("__spreadArray",h);e("__await",m);e("__asyncGenerator",g);e("__asyncDelegator",v);e("__asyncValues",y);e("__makeTemplateObject",b);e("__importStar",_);e("__importDefault",S);e("__classPrivateFieldGet",w);e("__classPrivateFieldSet",T);e("__classPrivateFieldIn",k)}))},7098:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});const r=n(59665);const i=(0,r.__importStar)(n(61977));const s=n(37726);const o=n(67267);const a={silly:i.Severity.Debug,verbose:i.Severity.Debug,info:i.Severity.Info,debug:i.Severity.Debug,warn:i.Severity.Warning,error:i.Severity.Error};class ExtendedError extends Error{constructor(e){super(e.message);this.name=e.name||"Error";if(e.stack){this.stack=e.stack}}}class SentryTransport extends s{constructor(e){super(e);this.silent=false;this.levelsMap={};this.setLevelsMap=e=>{if(!e){return a}const t=Object.keys(e).reduce(((t,n)=>{t[n]=i.Severity.fromString(e[n]);return t}),{});return Object.assign(Object.assign({},a),t)};this.levelsMap=this.setLevelsMap(e&&e.levelsMap);this.silent=e&&e.silent||false;if(!e||!e.skipSentryInit){i.init(SentryTransport.withDefaults(e&&e.sentry||{}))}}log(e,t){setImmediate((()=>{this.emit("logged",e)}));if(this.silent)return t();const{message:n,tags:s,user:a}=e,c=(0,r.__rest)(e,["message","tags","user"]);const u=e[o.LEVEL];const l=this.levelsMap[u];i.configureScope((e=>{e.clear();if(s!==undefined&&SentryTransport.isObject(s)){e.setTags(s)}e.setExtras(c);if(a!==undefined&&SentryTransport.isObject(a)){e.setUser(a)}}));if(SentryTransport.shouldLogException(l)){const r=n instanceof Error?n:new ExtendedError(e);i.captureException(r,{tags:s});return t()}i.captureMessage(n,l);return t()}end(...e){i.flush().then((()=>{super.end(...e)}));return this}get sentry(){return i}static withDefaults(e){return Object.assign(Object.assign({},e),{dsn:e&&e.dsn||process.env.SENTRY_DSN||"",serverName:e&&e.serverName||"winston-transport-sentry-node",environment:e&&e.environment||process.env.SENTRY_ENVIRONMENT||process.env.NODE_ENV||"production",debug:e&&e.debug||!!process.env.SENTRY_DEBUG||false,sampleRate:e&&e.sampleRate||1,maxBreadcrumbs:e&&e.maxBreadcrumbs||100})}static isObject(e){const t=typeof e;return t==="function"||t==="object"&&!!e}static shouldLogException(e){return e===i.Severity.Fatal||e===i.Severity.Error}}t["default"]=SentryTransport},96015:(e,t,n)=>{"use strict";const r=n(90041);const{warn:i}=n(46952);t.version=n(12561).version;t.transports=n(31898);t.config=n(65227);t.addColors=r.levels;t.format=r.format;t.createLogger=n(29091);t.ExceptionHandler=n(20096);t.RejectionHandler=n(51376);t.Container=n(33133);t.Transport=n(37726);t.loggers=new t.Container;const s=t.createLogger();Object.keys(t.config.npm.levels).concat(["log","query","stream","add","remove","clear","profile","startTimer","handleExceptions","unhandleExceptions","handleRejections","unhandleRejections","configure","child"]).forEach((e=>t[e]=(...t)=>s[e](...t)));Object.defineProperty(t,"level",{get(){return s.level},set(e){s.level=e}});Object.defineProperty(t,"exceptions",{get(){return s.exceptions}});["exitOnError"].forEach((e=>{Object.defineProperty(t,e,{get(){return s[e]},set(t){s[e]=t}})}));Object.defineProperty(t,"default",{get(){return{exceptionHandlers:s.exceptionHandlers,rejectionHandlers:s.rejectionHandlers,transports:s.transports}}});i.deprecated(t,"setLevels");i.forFunctions(t,"useFormat",["cli"]);i.forProperties(t,"useFormat",["padLevels","stripColors"]);i.forFunctions(t,"deprecated",["addRewriter","addFilter","clone","extend"]);i.forProperties(t,"deprecated",["emitErrs","levelLength"]);i.moved(t,"createLogger","Logger")},46952:(e,t,n)=>{"use strict";const{format:r}=n(73837);t.warn={deprecated(e){return()=>{throw new Error(r("{ %s } was removed in winston@3.0.0.",e))}},useFormat(e){return()=>{throw new Error([r("{ %s } was removed in winston@3.0.0.",e),"Use a custom winston.format = winston.format(function) instead."].join("\n"))}},forFunctions(e,n,r){r.forEach((r=>{e[r]=t.warn[n](r)}))},moved(e,t,n){function movedNotice(){return()=>{throw new Error([r("winston.%s was moved in winston@3.0.0.",n),r("Use a winston.%s instead.",t)].join("\n"))}}Object.defineProperty(e,n,{get:movedNotice,set:movedNotice})},forProperties(e,n,r){r.forEach((r=>{const i=t.warn[n](r);Object.defineProperty(e,r,{get:i,set:i})}))}}},65227:(e,t,n)=>{"use strict";const r=n(90041);const{configs:i}=n(67267);t.cli=r.levels(i.cli);t.npm=r.levels(i.npm);t.syslog=r.levels(i.syslog);t.addColors=r.levels},33133:(e,t,n)=>{"use strict";const r=n(29091);e.exports=class Container{constructor(e={}){this.loggers=new Map;this.options=e}add(e,t){if(!this.loggers.has(e)){t=Object.assign({},t||this.options);const n=t.transports||this.options.transports;t.transports=n?n.slice():[];const i=r(t);i.on("close",(()=>this._delete(e)));this.loggers.set(e,i)}return this.loggers.get(e)}get(e,t){return this.add(e,t)}has(e){return!!this.loggers.has(e)}close(e){if(e){return this._removeLogger(e)}this.loggers.forEach(((e,t)=>this._removeLogger(t)))}_removeLogger(e){if(!this.loggers.has(e)){return}const t=this.loggers.get(e);t.close();this._delete(e)}_delete(e){this.loggers.delete(e)}}},29091:(e,t,n)=>{"use strict";const{LEVEL:r}=n(67267);const i=n(65227);const s=n(77873);const o=n(2039)("winston:create-logger");function isLevelEnabledFunctionName(e){return"is"+e.charAt(0).toUpperCase()+e.slice(1)+"Enabled"}e.exports=function(e={}){e.levels=e.levels||i.npm.levels;class DerivedLogger extends s{constructor(e){super(e)}}const t=new DerivedLogger(e);Object.keys(e.levels).forEach((function(e){o('Define prototype method for "%s"',e);if(e==="log"){console.warn('Level "log" not defined: conflicts with the method "log". Use a different level name.');return}DerivedLogger.prototype[e]=function(...n){const i=this||t;if(n.length===1){const[s]=n;const o=s&&s.message&&s||{message:s};o.level=o[r]=e;i._addDefaultMeta(o);i.write(o);return this||t}if(n.length===0){i.log(e,"");return i}return i.log(e,...n)};DerivedLogger.prototype[isLevelEnabledFunctionName(e)]=function(){return(this||t).isLevelEnabled(e)}}));return t}},20096:(e,t,n)=>{"use strict";const r=n(22037);const i=n(6270);const s=n(2039)("winston:exception");const o=n(56625);const a=n(67921);const c=n(54534);e.exports=class ExceptionHandler{constructor(e){if(!e){throw new Error("Logger is required to handle exceptions")}this.logger=e;this.handlers=new Map}handle(...e){e.forEach((e=>{if(Array.isArray(e)){return e.forEach((e=>this._addHandler(e)))}this._addHandler(e)}));if(!this.catcher){this.catcher=this._uncaughtException.bind(this);process.on("uncaughtException",this.catcher)}}unhandle(){if(this.catcher){process.removeListener("uncaughtException",this.catcher);this.catcher=false;Array.from(this.handlers.values()).forEach((e=>this.logger.unpipe(e)))}}getAllInfo(e){let{message:t}=e;if(!t&&typeof e==="string"){t=e}return{error:e,level:"error",message:[`uncaughtException: ${t||"(no error message)"}`,e.stack||"  No stack trace"].join("\n"),stack:e.stack,exception:true,date:(new Date).toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(e)}}getProcessInfo(){return{pid:process.pid,uid:process.getuid?process.getuid():null,gid:process.getgid?process.getgid():null,cwd:process.cwd(),execPath:process.execPath,version:process.version,argv:process.argv,memoryUsage:process.memoryUsage()}}getOsInfo(){return{loadavg:r.loadavg(),uptime:r.uptime()}}getTrace(e){const t=e?a.parse(e):a.get();return t.map((e=>({column:e.getColumnNumber(),file:e.getFileName(),function:e.getFunctionName(),line:e.getLineNumber(),method:e.getMethodName(),native:e.isNative()})))}_addHandler(e){if(!this.handlers.has(e)){e.handleExceptions=true;const t=new c(e);this.handlers.set(e,t);this.logger.pipe(t)}}_uncaughtException(e){const t=this.getAllInfo(e);const n=this._getExceptionHandlers();let r=typeof this.logger.exitOnError==="function"?this.logger.exitOnError(e):this.logger.exitOnError;let a;if(!n.length&&r){console.warn("winston: exitOnError cannot be true with no exception handlers.");console.warn("winston: not exiting process.");r=false}function gracefulExit(){s("doExit",r);s("process._exiting",process._exiting);if(r&&!process._exiting){if(a){clearTimeout(a)}process.exit(1)}}if(!n||n.length===0){return process.nextTick(gracefulExit)}i(n,((e,t)=>{const n=o(t);const r=e.transport||e;function onDone(e){return()=>{s(e);n()}}r._ending=true;r.once("finish",onDone("finished"));r.once("error",onDone("error"))}),(()=>r&&gracefulExit()));this.logger.log(t);if(r){a=setTimeout(gracefulExit,3e3)}}_getExceptionHandlers(){return this.logger.transports.filter((e=>{const t=e.transport||e;return t.handleExceptions}))}}},54534:(e,t,n)=>{"use strict";const{Writable:r}=n(30675);e.exports=class ExceptionStream extends r{constructor(e){super({objectMode:true});if(!e){throw new Error("ExceptionStream requires a TransportStream instance.")}this.handleExceptions=true;this.transport=e}_write(e,t,n){if(e.exception){return this.transport.log(e,n)}n();return true}}},77873:(e,t,n)=>{"use strict";const{Stream:r,Transform:i}=n(30675);const s=n(6270);const{LEVEL:o,SPLAT:a}=n(67267);const c=n(1381);const u=n(20096);const l=n(51376);const d=n(60157);const f=n(64821);const{warn:p}=n(46952);const h=n(65227);const m=/%[scdjifoO%]/g;class Logger extends i{constructor(e){super({objectMode:true});this.configure(e)}child(e){const t=this;return Object.create(t,{write:{value:function(n){const r=Object.assign({},e,n);if(n instanceof Error){r.stack=n.stack;r.message=n.message}t.write(r)}}})}configure({silent:e,format:t,defaultMeta:r,levels:i,level:s="info",exitOnError:o=true,transports:a,colors:c,emitErrs:d,formatters:f,padLevels:p,rewriters:m,stripColors:g,exceptionHandlers:v,rejectionHandlers:y}={}){if(this.transports.length){this.clear()}this.silent=e;this.format=t||this.format||n(64075)();this.defaultMeta=r||null;this.levels=i||this.levels||h.npm.levels;this.level=s;if(this.exceptions){this.exceptions.unhandle()}if(this.rejections){this.rejections.unhandle()}this.exceptions=new u(this);this.rejections=new l(this);this.profilers={};this.exitOnError=o;if(a){a=Array.isArray(a)?a:[a];a.forEach((e=>this.add(e)))}if(c||d||f||p||m||g){throw new Error(["{ colors, emitErrs, formatters, padLevels, rewriters, stripColors } were removed in winston@3.0.0.","Use a custom winston.format(function) instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join("\n"))}if(v){this.exceptions.handle(v)}if(y){this.rejections.handle(y)}}isLevelEnabled(e){const t=getLevelValue(this.levels,e);if(t===null){return false}const n=getLevelValue(this.levels,this.level);if(n===null){return false}if(!this.transports||this.transports.length===0){return n>=t}const r=this.transports.findIndex((e=>{let r=getLevelValue(this.levels,e.level);if(r===null){r=n}return r>=t}));return r!==-1}log(e,t,...n){if(arguments.length===1){e[o]=e.level;this._addDefaultMeta(e);this.write(e);return this}if(arguments.length===2){if(t&&typeof t==="object"){t[o]=t.level=e;this._addDefaultMeta(t);this.write(t);return this}t={[o]:e,level:e,message:t};this._addDefaultMeta(t);this.write(t);return this}const[r]=n;if(typeof r==="object"&&r!==null){const i=t&&t.match&&t.match(m);if(!i){const i=Object.assign({},this.defaultMeta,r,{[o]:e,[a]:n,level:e,message:t});if(r.message)i.message=`${i.message} ${r.message}`;if(r.stack)i.stack=r.stack;this.write(i);return this}}this.write(Object.assign({},this.defaultMeta,{[o]:e,[a]:n,level:e,message:t}));return this}_transform(e,t,n){if(this.silent){return n()}if(!e[o]){e[o]=e.level}if(!this.levels[e[o]]&&this.levels[e[o]]!==0){console.error("[winston] Unknown logger level: %s",e[o])}if(!this._readableState.pipes){console.error("[winston] Attempt to write logs with no transports, which can increase memory usage: %j",e)}try{this.push(this.format.transform(e,this.format.options))}finally{this._writableState.sync=false;n()}}_final(e){const t=this.transports.slice();s(t,((e,t)=>{if(!e||e.finished)return setImmediate(t);e.once("finish",t);e.end()}),e)}add(e){const t=!c(e)||e.log.length>2?new d({transport:e}):e;if(!t._writableState||!t._writableState.objectMode){throw new Error("Transports must WritableStreams in objectMode. Set { objectMode: true }.")}this._onEvent("error",t);this._onEvent("warn",t);this.pipe(t);if(e.handleExceptions){this.exceptions.handle()}if(e.handleRejections){this.rejections.handle()}return this}remove(e){if(!e)return this;let t=e;if(!c(e)||e.log.length>2){t=this.transports.filter((t=>t.transport===e))[0]}if(t){this.unpipe(t)}return this}clear(){this.unpipe();return this}close(){this.exceptions.unhandle();this.rejections.unhandle();this.clear();this.emit("close");return this}setLevels(){p.deprecated("setLevels")}query(e,t){if(typeof e==="function"){t=e;e={}}e=e||{};const n={};const r=Object.assign({},e.query||{});function queryTransport(t,n){if(e.query&&typeof t.formatQuery==="function"){e.query=t.formatQuery(r)}t.query(e,((r,i)=>{if(r){return n(r)}if(typeof t.formatResults==="function"){i=t.formatResults(i,e.format)}n(null,i)}))}function addResults(e,t){queryTransport(e,((r,i)=>{if(t){i=r||i;if(i){n[e.name]=i}t()}t=null}))}s(this.transports.filter((e=>!!e.query)),addResults,(()=>t(null,n)))}stream(e={}){const t=new r;const n=[];t._streams=n;t.destroy=()=>{let e=n.length;while(e--){n[e].destroy()}};this.transports.filter((e=>!!e.stream)).forEach((r=>{const i=r.stream(e);if(!i){return}n.push(i);i.on("log",(e=>{e.transport=e.transport||[];e.transport.push(r.name);t.emit("log",e)}));i.on("error",(e=>{e.transport=e.transport||[];e.transport.push(r.name);t.emit("error",e)}))}));return t}startTimer(){return new f(this)}profile(e,...t){const n=Date.now();if(this.profilers[e]){const r=this.profilers[e];delete this.profilers[e];if(typeof t[t.length-2]==="function"){console.warn("Callback function no longer supported as of winston@3.0.0");t.pop()}const i=typeof t[t.length-1]==="object"?t.pop():{};i.level=i.level||"info";i.durationMs=n-r;i.message=i.message||e;return this.write(i)}this.profilers[e]=n;return this}handleExceptions(...e){console.warn("Deprecated: .handleExceptions() will be removed in winston@4. Use .exceptions.handle()");this.exceptions.handle(...e)}unhandleExceptions(...e){console.warn("Deprecated: .unhandleExceptions() will be removed in winston@4. Use .exceptions.unhandle()");this.exceptions.unhandle(...e)}cli(){throw new Error(["Logger.cli() was removed in winston@3.0.0","Use a custom winston.formats.cli() instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join("\n"))}_onEvent(e,t){function transportEvent(n){if(e==="error"&&!this.transports.includes(t)){this.add(t)}this.emit(e,n,t)}if(!t["__winston"+e]){t["__winston"+e]=transportEvent.bind(this);t.on(e,t["__winston"+e])}}_addDefaultMeta(e){if(this.defaultMeta){Object.assign(e,this.defaultMeta)}}}function getLevelValue(e,t){const n=e[t];if(!n&&n!==0){return null}return n}Object.defineProperty(Logger.prototype,"transports",{configurable:false,enumerable:true,get(){const{pipes:e}=this._readableState;return!Array.isArray(e)?[e].filter(Boolean):e}});e.exports=Logger},64821:e=>{"use strict";e.exports=class Profiler{constructor(e){if(!e){throw new Error("Logger is required for profiling.")}this.logger=e;this.start=Date.now()}done(...e){if(typeof e[e.length-1]==="function"){console.warn("Callback function no longer supported as of winston@3.0.0");e.pop()}const t=typeof e[e.length-1]==="object"?e.pop():{};t.level=t.level||"info";t.durationMs=Date.now()-this.start;return this.logger.write(t)}}},51376:(e,t,n)=>{"use strict";const r=n(22037);const i=n(6270);const s=n(2039)("winston:rejection");const o=n(56625);const a=n(67921);const c=n(54534);e.exports=class RejectionHandler{constructor(e){if(!e){throw new Error("Logger is required to handle rejections")}this.logger=e;this.handlers=new Map}handle(...e){e.forEach((e=>{if(Array.isArray(e)){return e.forEach((e=>this._addHandler(e)))}this._addHandler(e)}));if(!this.catcher){this.catcher=this._unhandledRejection.bind(this);process.on("unhandledRejection",this.catcher)}}unhandle(){if(this.catcher){process.removeListener("unhandledRejection",this.catcher);this.catcher=false;Array.from(this.handlers.values()).forEach((e=>this.logger.unpipe(e)))}}getAllInfo(e){let t=null;if(e){t=typeof e==="string"?e:e.message}return{error:e,level:"error",message:[`unhandledRejection: ${t||"(no error message)"}`,e&&e.stack||"  No stack trace"].join("\n"),stack:e&&e.stack,exception:true,date:(new Date).toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(e)}}getProcessInfo(){return{pid:process.pid,uid:process.getuid?process.getuid():null,gid:process.getgid?process.getgid():null,cwd:process.cwd(),execPath:process.execPath,version:process.version,argv:process.argv,memoryUsage:process.memoryUsage()}}getOsInfo(){return{loadavg:r.loadavg(),uptime:r.uptime()}}getTrace(e){const t=e?a.parse(e):a.get();return t.map((e=>({column:e.getColumnNumber(),file:e.getFileName(),function:e.getFunctionName(),line:e.getLineNumber(),method:e.getMethodName(),native:e.isNative()})))}_addHandler(e){if(!this.handlers.has(e)){e.handleRejections=true;const t=new c(e);this.handlers.set(e,t);this.logger.pipe(t)}}_unhandledRejection(e){const t=this.getAllInfo(e);const n=this._getRejectionHandlers();let r=typeof this.logger.exitOnError==="function"?this.logger.exitOnError(e):this.logger.exitOnError;let a;if(!n.length&&r){console.warn("winston: exitOnError cannot be true with no rejection handlers.");console.warn("winston: not exiting process.");r=false}function gracefulExit(){s("doExit",r);s("process._exiting",process._exiting);if(r&&!process._exiting){if(a){clearTimeout(a)}process.exit(1)}}if(!n||n.length===0){return process.nextTick(gracefulExit)}i(n,((e,t)=>{const n=o(t);const r=e.transport||e;function onDone(e){return()=>{s(e);n()}}r._ending=true;r.once("finish",onDone("finished"));r.once("error",onDone("error"))}),(()=>r&&gracefulExit()));this.logger.log(t);if(r){a=setTimeout(gracefulExit,3e3)}}_getRejectionHandlers(){return this.logger.transports.filter((e=>{const t=e.transport||e;return t.handleRejections}))}}},33287:(e,t,n)=>{"use strict";const r=n(57147);const{StringDecoder:i}=n(71576);const{Stream:s}=n(30675);function noop(){}e.exports=(e,t)=>{const n=Buffer.alloc(64*1024);const o=new i("utf8");const a=new s;let c="";let u=0;let l=0;if(e.start===-1){delete e.start}a.readable=true;a.destroy=()=>{a.destroyed=true;a.emit("end");a.emit("close")};r.open(e.file,"a+","0644",((i,s)=>{if(i){if(!t){a.emit("error",i)}else{t(i)}a.destroy();return}(function read(){if(a.destroyed){r.close(s,noop);return}return r.read(s,n,0,n.length,u,((r,i)=>{if(r){if(!t){a.emit("error",r)}else{t(r)}a.destroy();return}if(!i){if(c){if(e.start==null||l>e.start){if(!t){a.emit("line",c)}else{t(null,c)}}l++;c=""}return setTimeout(read,1e3)}let s=o.write(n.slice(0,i));if(!t){a.emit("data",s)}s=(c+s).split(/\n+/);const d=s.length-1;let f=0;for(;f<d;f++){if(e.start==null||l>e.start){if(!t){a.emit("line",s[f])}else{t(null,s[f])}}l++}c=s[d];u+=i;return read()}))})()}));if(!t){return a}return a.destroy}},29063:(e,t,n)=>{"use strict";const r=n(22037);const{LEVEL:i,MESSAGE:s}=n(67267);const o=n(37726);e.exports=class Console extends o{constructor(e={}){super(e);this.name=e.name||"console";this.stderrLevels=this._stringArrayToSet(e.stderrLevels);this.consoleWarnLevels=this._stringArrayToSet(e.consoleWarnLevels);this.eol=typeof e.eol==="string"?e.eol:r.EOL;this.setMaxListeners(30)}log(e,t){setImmediate((()=>this.emit("logged",e)));if(this.stderrLevels[e[i]]){if(console._stderr){console._stderr.write(`${e[s]}${this.eol}`)}else{console.error(e[s])}if(t){t()}return}else if(this.consoleWarnLevels[e[i]]){if(console._stderr){console._stderr.write(`${e[s]}${this.eol}`)}else{console.warn(e[s])}if(t){t()}return}if(console._stdout){console._stdout.write(`${e[s]}${this.eol}`)}else{console.log(e[s])}if(t){t()}}_stringArrayToSet(e,t){if(!e)return{};t=t||"Cannot make set from type other than Array of string elements";if(!Array.isArray(e)){throw new Error(t)}return e.reduce(((e,n)=>{if(typeof n!=="string"){throw new Error(t)}e[n]=true;return e}),{})}}},34853:(e,t,n)=>{"use strict";const r=n(57147);const i=n(71017);const s=n(30384);const o=n(59796);const{MESSAGE:a}=n(67267);const{Stream:c,PassThrough:u}=n(30675);const l=n(37726);const d=n(2039)("winston:file");const f=n(22037);const p=n(33287);e.exports=class File extends l{constructor(e={}){super(e);this.name=e.name||"file";function throwIf(t,...n){n.slice(1).forEach((n=>{if(e[n]){throw new Error(`Cannot set ${n} and ${t} together`)}}))}this._stream=new u;this._stream.setMaxListeners(30);this._onError=this._onError.bind(this);if(e.filename||e.dirname){throwIf("filename or dirname","stream");this._basename=this.filename=e.filename?i.basename(e.filename):"winston.log";this.dirname=e.dirname||i.dirname(e.filename);this.options=e.options||{flags:"a"}}else if(e.stream){console.warn("options.stream will be removed in winston@4. Use winston.transports.Stream");throwIf("stream","filename","maxsize");this._dest=this._stream.pipe(this._setupStream(e.stream));this.dirname=i.dirname(this._dest.path)}else{throw new Error("Cannot log to file without filename or stream.")}this.maxsize=e.maxsize||null;this.rotationFormat=e.rotationFormat||false;this.zippedArchive=e.zippedArchive||false;this.maxFiles=e.maxFiles||null;this.eol=typeof e.eol==="string"?e.eol:f.EOL;this.tailable=e.tailable||false;this._size=0;this._pendingSize=0;this._created=0;this._drain=false;this._opening=false;this._ending=false;if(this.dirname)this._createLogDirIfNotExist(this.dirname);this.open()}finishIfEnding(){if(this._ending){if(this._opening){this.once("open",(()=>{this._stream.once("finish",(()=>this.emit("finish")));setImmediate((()=>this._stream.end()))}))}else{this._stream.once("finish",(()=>this.emit("finish")));setImmediate((()=>this._stream.end()))}}}log(e,t=(()=>{})){if(this.silent){t();return true}if(this._drain){this._stream.once("drain",(()=>{this._drain=false;this.log(e,t)}));return}if(this._rotate){this._stream.once("rotate",(()=>{this._rotate=false;this.log(e,t)}));return}const n=`${e[a]}${this.eol}`;const r=Buffer.byteLength(n);function logged(){this._size+=r;this._pendingSize-=r;d("logged %s %s",this._size,n);this.emit("logged",e);if(this._opening){return}if(!this._needsNewFile()){return}this._rotate=true;this._endStream((()=>this._rotateFile()))}this._pendingSize+=r;if(this._opening&&!this.rotatedWhileOpening&&this._needsNewFile(this._size+this._pendingSize)){this.rotatedWhileOpening=true}const i=this._stream.write(n,logged.bind(this));if(!i){this._drain=true;this._stream.once("drain",(()=>{this._drain=false;t()}))}else{t()}d("written",i,this._drain);this.finishIfEnding();return i}query(e,t){if(typeof e==="function"){t=e;e={}}e=normalizeQuery(e);const n=i.join(this.dirname,this.filename);let s="";let o=[];let a=0;const c=r.createReadStream(n,{encoding:"utf8"});c.on("error",(e=>{if(c.readable){c.destroy()}if(!t){return}return e.code!=="ENOENT"?t(e):t(null,o)}));c.on("data",(t=>{t=(s+t).split(/\n+/);const n=t.length-1;let r=0;for(;r<n;r++){if(!e.start||a>=e.start){add(t[r])}a++}s=t[n]}));c.on("close",(()=>{if(s){add(s,true)}if(e.order==="desc"){o=o.reverse()}if(t)t(null,o)}));function add(e,t){try{const t=JSON.parse(e);if(check(t)){push(t)}}catch(e){if(!t){c.emit("error",e)}}}function push(t){if(e.rows&&o.length>=e.rows&&e.order!=="desc"){if(c.readable){c.destroy()}return}if(e.fields){t=e.fields.reduce(((e,n)=>{e[n]=t[n];return e}),{})}if(e.order==="desc"){if(o.length>=e.rows){o.shift()}}o.push(t)}function check(t){if(!t){return}if(typeof t!=="object"){return}const n=new Date(t.timestamp);if(e.from&&n<e.from||e.until&&n>e.until||e.level&&e.level!==t.level){return}return true}function normalizeQuery(e){e=e||{};e.rows=e.rows||e.limit||10;e.start=e.start||0;e.until=e.until||new Date;if(typeof e.until!=="object"){e.until=new Date(e.until)}e.from=e.from||e.until-24*60*60*1e3;if(typeof e.from!=="object"){e.from=new Date(e.from)}e.order=e.order||"desc";return e}}stream(e={}){const t=i.join(this.dirname,this.filename);const n=new c;const r={file:t,start:e.start};n.destroy=p(r,((e,t)=>{if(e){return n.emit("error",e)}try{n.emit("data",t);t=JSON.parse(t);n.emit("log",t)}catch(e){n.emit("error",e)}}));return n}open(){if(!this.filename)return;if(this._opening)return;this._opening=true;this.stat(((e,t)=>{if(e){return this.emit("error",e)}d("stat done: %s { size: %s }",this.filename,t);this._size=t;this._dest=this._createStream(this._stream);this._opening=false;this.once("open",(()=>{if(this._stream.eventNames().includes("rotate")){this._stream.emit("rotate")}else{this._rotate=false}}))}))}stat(e){const t=this._getFile();const n=i.join(this.dirname,t);r.stat(n,((r,i)=>{if(r&&r.code==="ENOENT"){d("ENOENTÂ ok",n);this.filename=t;return e(null,0)}if(r){d(`err ${r.code} ${n}`);return e(r)}if(!i||this._needsNewFile(i.size)){return this._incFile((()=>this.stat(e)))}this.filename=t;e(null,i.size)}))}close(e){if(!this._stream){return}this._stream.end((()=>{if(e){e()}this.emit("flush");this.emit("closed")}))}_needsNewFile(e){e=e||this._size;return this.maxsize&&e>=this.maxsize}_onError(e){this.emit("error",e)}_setupStream(e){e.on("error",this._onError);return e}_cleanupStream(e){e.removeListener("error",this._onError);return e}_rotateFile(){this._incFile((()=>this.open()))}_endStream(e=(()=>{})){if(this._dest){this._stream.unpipe(this._dest);this._dest.end((()=>{this._cleanupStream(this._dest);e()}))}else{e()}}_createStream(e){const t=i.join(this.dirname,this.filename);d("create stream start",t,this.options);const n=r.createWriteStream(t,this.options).on("error",(e=>d(e))).on("close",(()=>d("close",n.path,n.bytesWritten))).on("open",(()=>{d("file open ok",t);this.emit("open",t);e.pipe(n);if(this.rotatedWhileOpening){this._stream=new u;this._stream.setMaxListeners(30);this._rotateFile();this.rotatedWhileOpening=false;this._cleanupStream(n);e.end()}}));d("create stream ok",t);if(this.zippedArchive){const e=o.createGzip();e.pipe(n);return e}return n}_incFile(e){d("_incFile",this.filename);const t=i.extname(this._basename);const n=i.basename(this._basename,t);if(!this.tailable){this._created+=1;this._checkMaxFilesIncrementing(t,n,e)}else{this._checkMaxFilesTailable(t,n,e)}}_getFile(){const e=i.extname(this._basename);const t=i.basename(this._basename,e);const n=this.rotationFormat?this.rotationFormat():this._created;const r=!this.tailable&&this._created?`${t}${n}${e}`:`${t}${e}`;return this.zippedArchive&&!this.tailable?`${r}.gz`:r}_checkMaxFilesIncrementing(e,t,n){if(!this.maxFiles||this._created<this.maxFiles){return setImmediate(n)}const s=this._created-this.maxFiles;const o=s!==0?s:"";const a=this.zippedArchive?".gz":"";const c=`${t}${o}${e}${a}`;const u=i.join(this.dirname,c);r.unlink(u,n)}_checkMaxFilesTailable(e,t,n){const o=[];if(!this.maxFiles){return}const a=this.zippedArchive?".gz":"";for(let n=this.maxFiles-1;n>1;n--){o.push(function(n,s){let o=`${t}${n-1}${e}${a}`;const c=i.join(this.dirname,o);r.exists(c,(u=>{if(!u){return s(null)}o=`${t}${n}${e}${a}`;r.rename(c,i.join(this.dirname,o),s)}))}.bind(this,n))}s(o,(()=>{r.rename(i.join(this.dirname,`${t}${e}`),i.join(this.dirname,`${t}1${e}${a}`),n)}))}_createLogDirIfNotExist(e){if(!r.existsSync(e)){r.mkdirSync(e,{recursive:true})}}}},21918:(e,t,n)=>{"use strict";const r=n(13685);const i=n(95687);const{Stream:s}=n(30675);const o=n(37726);const a=n(5693);e.exports=class Http extends o{constructor(e={}){super(e);this.options=e;this.name=e.name||"http";this.ssl=!!e.ssl;this.host=e.host||"localhost";this.port=e.port;this.auth=e.auth;this.path=e.path||"";this.agent=e.agent;this.headers=e.headers||{};this.headers["content-type"]="application/json";this.batch=e.batch||false;this.batchInterval=e.batchInterval||5e3;this.batchCount=e.batchCount||10;this.batchOptions=[];this.batchTimeoutID=-1;this.batchCallback={};if(!this.port){this.port=this.ssl?443:80}}log(e,t){this._request(e,((t,n)=>{if(n&&n.statusCode!==200){t=new Error(`Invalid HTTP Status Code: ${n.statusCode}`)}if(t){this.emit("warn",t)}else{this.emit("logged",e)}}));if(t){setImmediate(t)}}query(e,t){if(typeof e==="function"){t=e;e={}}e={method:"query",params:this.normalizeQuery(e)};if(e.params.path){e.path=e.params.path;delete e.params.path}if(e.params.auth){e.auth=e.params.auth;delete e.params.auth}this._request(e,((e,n,r)=>{if(n&&n.statusCode!==200){e=new Error(`Invalid HTTP Status Code: ${n.statusCode}`)}if(e){return t(e)}if(typeof r==="string"){try{r=JSON.parse(r)}catch(e){return t(e)}}t(null,r)}))}stream(e={}){const t=new s;e={method:"stream",params:e};if(e.params.path){e.path=e.params.path;delete e.params.path}if(e.params.auth){e.auth=e.params.auth;delete e.params.auth}let n="";const r=this._request(e);t.destroy=()=>r.destroy();r.on("data",(e=>{e=(n+e).split(/\n+/);const r=e.length-1;let i=0;for(;i<r;i++){try{t.emit("log",JSON.parse(e[i]))}catch(e){t.emit("error",e)}}n=e[r]}));r.on("error",(e=>t.emit("error",e)));return t}_request(e,t){e=e||{};const n=e.auth||this.auth;const r=e.path||this.path||"";delete e.auth;delete e.path;if(this.batch){this._doBatch(e,t,n,r)}else{this._doRequest(e,t,n,r)}}_doBatch(e,t,n,r){this.batchOptions.push(e);if(this.batchOptions.length===1){const e=this;this.batchCallback=t;this.batchTimeoutID=setTimeout((function(){e.batchTimeoutID=-1;e._doBatchRequest(e.batchCallback,n,r)}),this.batchInterval)}if(this.batchOptions.length===this.batchCount){this._doBatchRequest(this.batchCallback,n,r)}}_doBatchRequest(e,t,n){if(this.batchTimeoutID>0){clearTimeout(this.batchTimeoutID);this.batchTimeoutID=-1}const r=this.batchOptions.slice();this.batchOptions=[];this._doRequest(r,e,t,n)}_doRequest(e,t,n,s){const o=Object.assign({},this.headers);if(n&&n.bearer){o.Authorization=`Bearer ${n.bearer}`}const c=(this.ssl?i:r).request({...this.options,method:"POST",host:this.host,port:this.port,path:`/${s.replace(/^\//,"")}`,headers:o,auth:n&&n.username&&n.password?`${n.username}:${n.password}`:"",agent:this.agent});c.on("error",t);c.on("response",(e=>e.on("end",(()=>t(null,e))).resume()));c.end(Buffer.from(a(e,this.options.replacer),"utf8"))}}},31898:(e,t,n)=>{"use strict";Object.defineProperty(t,"Console",{configurable:true,enumerable:true,get(){return n(29063)}});Object.defineProperty(t,"File",{configurable:true,enumerable:true,get(){return n(34853)}});Object.defineProperty(t,"Http",{configurable:true,enumerable:true,get(){return n(21918)}});Object.defineProperty(t,"Stream",{configurable:true,enumerable:true,get(){return n(20032)}})},20032:(e,t,n)=>{"use strict";const r=n(1381);const{MESSAGE:i}=n(67267);const s=n(22037);const o=n(37726);e.exports=class Stream extends o{constructor(e={}){super(e);if(!e.stream||!r(e.stream)){throw new Error("options.stream is required.")}this._stream=e.stream;this._stream.setMaxListeners(Infinity);this.isObjectMode=e.stream._writableState.objectMode;this.eol=typeof e.eol==="string"?e.eol:s.EOL}log(e,t){setImmediate((()=>this.emit("logged",e)));if(this.isObjectMode){this._stream.write(e);if(t){t()}return}this._stream.write(`${e[i]}${this.eol}`);if(t){t()}return}}},56393:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ActionRunner=void 0;class ActionRunner{constructor(e){this.trunkDriver=e;this.completedNotificationIds=new Set;this.runningNotifications=new Set}isRunning(e){return this.runningNotifications.has(e)}async runNotificationCommand(e){var t;this.runningNotifications.add(e.id);if(this.onCommandStartedCallback){this.onCommandStartedCallback()}if(e.run){await this.trunkDriver.runShellTask(e.run,(t=e.title)!==null&&t!==void 0?t:"action")}this.runningNotifications.delete(e.id);this.completedNotificationIds.add(e.id);if(this.onCommandCompletedCallback){this.onCommandCompletedCallback()}}clearCompletedNotifications(){this.completedNotificationIds=new Set}getCompletedNotifications(){return this.completedNotificationIds}onCommandStarted(e){this.onCommandStartedCallback=e}onCommandCompleted(e){this.onCommandCompletedCallback=e}}t.ActionRunner=ActionRunner},28967:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){if(r===undefined)r=n;var i=Object.getOwnPropertyDescriptor(t,n);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[n]}}}Object.defineProperty(e,r,i)}:function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(n!=="default"&&Object.prototype.hasOwnProperty.call(e,n))r(t,e,n);i(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.TrunkActionsViewProvider=void 0;const o=s(n(71017));const a=s(n(76062));var c;(function(e){e[e["INITIALIZING"]=0]="INITIALIZING";e[e["STARTING"]=1]="STARTING";e[e["STARTED"]=2]="STARTED";e[e["CLOSED"]=3]="CLOSED"})(c||(c={}));class TrunkActionsViewProvider{constructor(e,t,n,r=undefined,i){this.trunkDriver=e;this.extensionUri=t;this.actionRunner=n;this.view=r;this.onViewSetCallback=i;this.status=c.INITIALIZING;this.notifications=new Map;this.actionRunner.onCommandStarted((()=>this.setActionsAndReRender(undefined)));this.actionRunner.onCommandCompleted((()=>this.setActionsAndReRender(undefined)))}resolveWebviewView(e,t,n){this.view=e;this.view.webview.options={enableScripts:true,enableForms:true,enableCommandUris:true,localResourceRoots:[this.extensionUri]};this.view.title="Actions";this.view.webview.html=this.getHtml(this.view.webview);this.onViewSetCallback(this.view)}setActionsAndReRender(e){this.status=c.STARTED;if(e!==undefined){this.actionRunner.clearCompletedNotifications();this.notifications=new Map(e.map((e=>[e.id,e])))}else{const e=new Map;const t=this.actionRunner.getCompletedNotifications();for(const n of this.notifications){if(t.has(n[0])){continue}e.set(n[0],n[1])}this.notifications=e}if(this.view){this.view.webview.html=this.getHtml(this.view.webview)}}setStatusStarting(){this.status=c.STARTING;if(this.view){this.view.webview.html=this.getHtml(this.view.webview)}}setStatusStarted(){this.status=c.STARTED;if(this.view){this.view.webview.html=this.getHtml(this.view.webview)}}setStatusClosed(){this.status=c.CLOSED;if(this.view){this.view.webview.html=this.getHtml(this.view.webview)}}getHtml(e){switch(this.status){case c.INITIALIZING:return this.getHtmlInitializing(e);case c.STARTING:return this.getHtmlStarting(e);case c.STARTED:return this.getHtmlStarted(e);case c.CLOSED:return this.getHtmlClosed(e);default:throw new Error(`unknown state: ${this.status}`)}}notificationCommands(e){const t=e.commands.map((t=>({id:e.id,title:t.title,run:t.run,runFrom:t.runFrom,deleteAfter:true})));if(t.length>0){t[0].title="Run"}t.push({id:e.id,title:"Dismiss",run:null,runFrom:"",deleteAfter:true});return t}generateOnBlurListenerJs(e){return`\n      document.addEventListener('click', (event) => {\n        const tooltip = document.getElementById('kebab-${e}');\n        if (tooltip && !tooltip.contains(event.target)) {\n          const popup = document.getElementById('popup-${e}');\n          if (popup) {\n            popup.classList.remove('show');\n          }\n        }\n      });`}getHtmlStarted(e){const t=Array.from(this.notifications.values());const n=o.join(this.extensionUri.path,"assets");const r=this.trunkDriver.getRepoRoot().fsPath;const i=a.Uri.file(o.join(n,"sidebar-icon.svg"));const s=a.Uri.file(o.join(n,"file-status-working.svg"));const commandToHTML=e=>{const t="color: inherit;";return`<li class="commandItem">\n        <a\n          title="Run Action"\n          href="command:trunk.runNotificationCommand?${encodeURIComponent(JSON.stringify([e]))}"\n          tabindex="0"\n          role="button"\n          style="${t}"\n        >\n          ${e.title}\n        </a>\n      </li>`};const notificationToHTML=t=>{var n,c,u;let l=i;const d=this.notificationCommands(t);if(((n=t.icon)===null||n===void 0?void 0:n.startsWith("https://"))||((c=t.icon)===null||c===void 0?void 0:c.startsWith("file://"))){l=a.Uri.parse(t.icon)}else if((u=t.icon)===null||u===void 0?void 0:u.startsWith("/")){l=a.Uri.file(t.icon)}else if(t.icon){l=a.Uri.file(o.join(r,t.icon))}const f=d.shift();const p=d.length>0?`<div\n        class="kebab-button"\n        id="kebab-${t.id}"\n        onclick="getElementById('popup-${t.id}').classList.toggle('show')"\n      >\n        <svg\n          xmlns="http://www.w3.org/2000/svg"\n          width="16"\n          height="16"\n          fill="currentColor"\n          class="bi bi-three-dots-vertical"\n          viewBox="0 0 16 16"\n        >\n        <path d="M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/>\n      </svg>\n        <div\n          class="popuptext"\n          id="popup-${t.id}"\n        >\n          <ul>${d.map((e=>commandToHTML(e))).join("\n")}</ul>\n        </div>\n      </div>`:"";const h=d.length>0?"0px":"16px";const m=this.actionRunner.isRunning(t.id);const g="color: rgb(255, 255, 255); background-color: rgb(14, 99, 156)";return`<li class="notificationItem">\n        <div class="row" style="display: flex; padding-bottom:12px;">\n          <div style="max-width:32px;max-height:32px; position: relative; top: 0; bottom: 0;">\n            <img style="width:32px; position: relative; top: 0; left: 0" src="${e.asWebviewUri(l)}"/>\n            <div style="position: absolute; bottom: -8px; right: -8px; height: 16px; width: 16px; border-radius: 50%; background-color: #0E639C;${m?"":"visibility: hidden;"}">\n            <img src="${e.asWebviewUri(s)}" style="display: block; width: 100%; margin: auto;" />\n            </div>\n          </div>\n          <div style="flex: 1;padding-left:16px; display: flex; flex-direction: column;">\n            <div class="buttons-and-title-container" style="display: flex; flex-direction: row">\n              <div style="font-weight:bold;font-size:12px;padding:0;margin-bottom:4px;">${t.title||"Notification"}</div>\n              <div class="buttons-container" style="margin-left: auto;padding-right: ${h};">\n                <div class="button-container">\n                  <a\n                    title="Run Action"\n                    href="command:trunk.runNotificationCommand?${encodeURIComponent(JSON.stringify([f]))}"\n                    class="monaco-button monaco-text-button"\n                    tabindex="0"\n                    role="button"\n                    style="${g}"\n                  >\n                    ${f.title}\n                  </a>\n                </div>\n                ${p}\n              </div>\n            </div>\n            <div class="text-container">${t.message||""}</div>\n          </div>\n        </div>\n      </li>\n      `};return`<!DOCTYPE html>\n\t\t\t<html lang="en">\n\t\t\t<head>\n\t\t\t  <title>Trunk Actions</title>\n        <style>\n          body {\n              height: 100%;\n              width: 100%;\n              margin: 0;\n              padding: 0;\n              overflow: scroll;\n              font-size: 11px;\n              user-select: none;\n              -webkit-user-select: none;\n          }\n\n          .monaco-button {\n            max-width: 300px;\n          }\n\n          .monaco-text-button {\n              box-sizing: border-box;\n              display: flex;\n              width: 100%;\n              height: 100%;\n              padding-top: 4px;\n              padding-bottom: 4px;\n              text-align: center;\n              cursor: pointer;\n              justify-content: center;\n              align-items: center;\n              text-size: 11px;\n          }\n\n          .buttons-container {\n            display: flex;\n            height: 16px;\n          }\n\n          .button-container {\n            width: 50px;\n          }\n\n          .kebab-button {\n            margin: 0 0 0 0;\n            padding: 0 0 0 0;\n            background-color: inherit;\n            border-width: 0;\n            color: white;\n            cursor: pointer;\n            fill: currentColor;\n            position: relative;\n          }\n\n          .kebab-button:hover {\n            background-color: #5C5C5C;\n            border-radius: 2px;\n          }\n\n          a {\n            text-decoration: none;\n            font-size: 11px;\n          }\n\n          .notificationList {\n            list-style-type: none;\n            padding: 0 !important;\n            width: 100% !important;\n          }\n\n          .text-container {\n            white-space: pre-wrap;\n            text-align: left;\n            margin-bottom:3px;\n            font-size:11px;\n          }\n\n          ul {\n            list-style-type: none;\n            padding: 0;\n          }\n\n          li.commandItem {\n            margin-left: 8px;\n            margin-right: 8px;\n          }\n\n          .notificationItem {\n            padding: 0 !important;\n            width: 100% !important;\n          }\n\n          .row {\n            padding-top: 12px !important;\n            padding-right: 4px !important;\n            padding-left: 24px !important;\n            padding-bottom: 12px !important;\n            margin-bottom: 6px !important;\n          }\n\n          .row:hover {\n            background-color: #37373d;\n          }\n\n          .row:after {\n            content: "";\n            display: table;\n            clear: both;\n          }\n\n          /* The actual popup */\n          .popuptext {\n            visibility: hidden;\n            max-width: 160px;\n            background-color: #484848;\n            color: #fff;\n            text-size: 9px;\n            text-align: left;\n            border-radius: 6px;\n            padding: 8px 0;\n            position: absolute;\n            z-index: 1;\n            top: 125%;\n            right: 100%;\n            margin-left: -80px;\n          }\n\n          /* Toggle this class to hide and show the tooltip menu */\n          .popuptext.show {\n            visibility: visible;\n          }\n        </style>\n        <script>\n          ${t.map((e=>this.generateOnBlurListenerJs(e.id))).join("\n")}\n        <\/script>\n\t\t\t</head>\n\t\t\t<body oncontextmenu="return false;" style="padding: 0 !important;">\n\t\t\t\t<ul class="notificationList">\n          ${t.map(notificationToHTML).join("\n")}\n\t\t\t\t</ul>\n\t\t\t</body>\n\t\t\t</html>`}getHtmlInitializing(e){return`<!DOCTYPE html>\n    <html lang="en">\n    <head>\n    </head>\n    <body style="padding: 24px !important;">\n      <div style="font-size:12px">Status: initializing...</div>\n    </body>\n    </html>`}getHtmlStarting(e){return`<!DOCTYPE html>\n    <html lang="en">\n    <head>\n    </head>\n    <body style="padding: 24px !important;">\n      <div style="font-size:12px">Status: starting...</div>\n    </body>\n    </html>`}getHtmlClosed(e){return`<!DOCTYPE html>\n    <html lang="en">\n    <head>\n    </head>\n    <body style="padding: 24px !important;">\n      <div style="font-size:12px">Status: closed</div>\n    </body>\n    </html>`}}t.TrunkActionsViewProvider=TrunkActionsViewProvider},53790:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){if(r===undefined)r=n;var i=Object.getOwnPropertyDescriptor(t,n);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[n]}}}Object.defineProperty(e,r,i)}:function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(n!=="default"&&Object.prototype.hasOwnProperty.call(e,n))r(t,e,n);i(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.TRUNK_DELETE_NOTIFICATION_REQUEST=void 0;const o=s(n(89074));t.TRUNK_DELETE_NOTIFICATION_REQUEST=new o.ProtocolRequestType("$trunk/deleteTrunkNotification")},3580:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.trackUnused=void 0;const i=r(n(27393));const s=n(28749);const trackUnused=async(e,t,n=s.EXTENSION_MAX_UNUSED_DURATION_THRESHOLD_HOURS)=>{const r=await t.getUsage();await t.persistLastActivation();if(!r.firstActivation){await t.persistFirstActivation()}else{const t=(0,i.default)(new Date);if(!r.lastUsage){const s=i.default.duration(t.diff(r.firstActivation));if(s.asHours()>n){await e.trackDaily("extension.unused")}}if(r.lastUsage){const s=i.default.duration(t.diff(r.lastUsage));const o=i.default.duration(t.diff(r.lastActivation));if(s.asHours()>n&&o.asHours()<n){await e.trackDaily("extension.unused")}}}};t.trackUnused=trackUnused},63556:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.PersistentCache=void 0;class PersistentCache{constructor(e){this.memento=e}async get(e){return this.memento.get(e)}async set(e,t){return this.memento.update(e,t)}}t.PersistentCache=PersistentCache},17442:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){if(r===undefined)r=n;var i=Object.getOwnPropertyDescriptor(t,n);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[n]}}}Object.defineProperty(e,r,i)}:function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(n!=="default"&&Object.prototype.hasOwnProperty.call(e,n))r(t,e,n);i(t,e);return t};var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.registerExtensionCommands=void 0;const a=s(n(77546));const c=s(n(76062));const u=n(53790);const l=n(28749);const d=n(57733);const f=n(33071);const p=o(n(86287));const h=n(30335);const m=n(30373);const g=n(81752);const v=n(24019);const y=a.parse("0.6.0-beta");const registerExtensionCommands=(e,t,n)=>{e.subscriptions.push(c.commands.registerCommand("trunk.runNotificationCommand",(async e=>{const{trunkState:t,trunkActionRunner:r}=n();await r.runNotificationCommand(e);if(e.deleteAfter){await t.lspClient.base.sendRequest(u.TRUNK_DELETE_NOTIFICATION_REQUEST,{notification_id:e.id},undefined).catch((e=>p.default.error(e)))}})),c.commands.registerCommand("trunk.deleteTrunkNotification",(async e=>{const{trunkState:t}=n();await t.lspClient.base.sendRequest(u.TRUNK_DELETE_NOTIFICATION_REQUEST,{notification_id:e},undefined).catch((e=>p.default.error(e)))})),c.commands.registerCommand("trunk.pauseTrunk",(async()=>{const{trunkTreeView:e,trunkStatusBar:r,trunkDiagnostics:i,trunkState:s}=n();const o=new f.CliVersion(s.cliVersion);if(o.lt(y)&&!o.isDevOrTest()){await(0,v.showUpgradeDialog)(t,v.NotificationLevel.WARN,`Pausing linter requires Trunk CLI ${y.raw}`);return}await s.lspClient.base.sendRequest(h.TRUNK_PAUSE_REQUEST,{},undefined).catch((e=>{p.default.error(e)}));i.clear();r.setStatusPaused();await e.setStatusPaused();const a=m.TrunkLinterQueueStrategy.OnDemand;await(0,d.setContext)(d.BaseContext.linterQueueStrategy,a).catch((e=>{p.default.error(e)}))})));e.subscriptions.push(c.commands.registerCommand("trunk.continueTrunk",(async()=>{const{trunkTreeView:e,trunkStatusBar:r,trunkState:i}=n();const s=new f.CliVersion(i.cliVersion);if(s.lt(y)&&!s.isDevOrTest()){await(0,v.showUpgradeDialog)(t,v.NotificationLevel.WARN,`Pausing linter requires Trunk CLI ${y.raw}`);return}await i.lspClient.base.sendRequest(h.TRUNK_CONTINUE_REQUEST,{},undefined).catch((e=>{p.default.error(e)}));await e.setStatusStarting();r.setStatusStaring();const o=m.TrunkLinterQueueStrategy.Auto;await(0,d.setContext)(d.BaseContext.linterQueueStrategy,o).catch((e=>{p.default.error(e)}))})));e.subscriptions.push(c.commands.registerCommand("trunk.grayOutNonBlockingIssuesEnable",(async()=>{const{trunkTreeView:e}=n();const t=true;c.workspace.getConfiguration("trunk").update(l.CFG_KEY_GRAY_OUT_NON_BLOCKING_ISSUE,t,c.ConfigurationTarget.Global);await(0,d.setContext)(d.BaseContext.grayOutNonBlockingIssuesEnabled,t).catch((e=>{p.default.error(e)}));e===null||e===void 0?void 0:e.setGrayOutNonBlocking(t)})));e.subscriptions.push(c.commands.registerCommand("trunk.grayOutNonBlockingIssueDisable",(async()=>{const{trunkTreeView:e}=n();const t=false;c.workspace.getConfiguration("trunk").update(l.CFG_KEY_GRAY_OUT_NON_BLOCKING_ISSUE,t,c.ConfigurationTarget.Global);await(0,d.setContext)(d.BaseContext.grayOutNonBlockingIssuesEnabled,t).catch((e=>{p.default.error(e)}));e===null||e===void 0?void 0:e.setGrayOutNonBlocking(t)})));e.subscriptions.push(c.workspace.onDidChangeConfiguration((async()=>{var e,t;const{trunkTreeView:r}=n();const i=(t=(e=c.workspace.getConfiguration("trunk"))===null||e===void 0?void 0:e.get(l.CFG_KEY_GRAY_OUT_NON_BLOCKING_ISSUE))!==null&&t!==void 0?t:false;c.workspace.getConfiguration("trunk").update(l.CFG_KEY_GRAY_OUT_NON_BLOCKING_ISSUE,i,c.ConfigurationTarget.Global);await(0,d.setContext)(d.BaseContext.grayOutNonBlockingIssuesEnabled,i).catch((e=>{p.default.error(e)}));r.setGrayOutNonBlocking(i)})));e.subscriptions.push(c.commands.registerCommand("trunk.restartExtension",(async()=>{const{restartExtension:t}=n();await t(e).catch((e=>{p.default.debug(e)}))})));e.subscriptions.push(c.commands.registerCommand("trunk.printDebugState",(()=>{const{trunkState:e}=n();console.log("Trunk extension state",e)})));e.subscriptions.push(c.commands.registerCommand("trunk.initTrunk",(async()=>{const n=new g.TrunkStatusBarItem(e);n.setStatusInitializing();await t.initWithTerminal();n.dispose()})));e.subscriptions.push(c.commands.registerCommand("trunk.upgradeTrunk",(()=>t.upgradeWithTerminal())));e.subscriptions.push(c.commands.registerCommand("trunk.refreshTreeView",(()=>{const{trunkTreeView:e}=n();e.refresh()})))};t.registerExtensionCommands=registerExtensionCommands},28749:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.TRUNK_PATHS_TO_HIDE=t.EXTENSION_RESTART_RETRY_OPTIONS=t.EXTENSION_MAX_UNUSED_DURATION_THRESHOLD_HOURS=t.EXTENSION_LAST_USAGE_STORAGE_KEY=t.EXTENSION_LAST_ACTIVATION_STORAGE_KEY=t.EXTENSION_FIRST_ACTIVATION_STORAGE_KEY=t.EXTENSION_VERSION=t.EXTENSION_ENVIRONMENT=t.EXTENSION_OS=t.EXTENSION_PLATFORM=t.CLI_LATEST_KNOWN_VERSION=t.CLI_MIN_VERSION=t.CLI_LAUNCHER_DOWNLOAD_URL=t.EXTENSION_DEV_VERSION=t.MIXPANEL_DEV_TOKEN=t.MIXPANEL_PROD_TOKEN=t.MIXPANEL_EXTENSION_SOURCE=t.MIXPANEL_USAGE_TIME_GRANULARITY=t.MILLISECONDS_PER_DAY=t.CFG_KEY_GRAY_OUT_NON_BLOCKING_ISSUE=t.CFG_KEY_LSP_ARGUMENTS=t.CFG_KEY_INLINE_DECORATORS_FOR_ALL_EXTENSIONS=t.CFG_KEY_INLINE_DECORATORS=t.CFG_KEY_LSP_EXECUTABLE_PATH=void 0;const r=n(33071);const getOs=e=>{switch(e){case"linux":return"Linux";case"darwin":return"macOS";default:return e}};t.CFG_KEY_LSP_EXECUTABLE_PATH="trunkPath";t.CFG_KEY_INLINE_DECORATORS="inlineDecorators";t.CFG_KEY_INLINE_DECORATORS_FOR_ALL_EXTENSIONS="inlineDecoratorsForAllExtensions";t.CFG_KEY_LSP_ARGUMENTS="languageServerArguments";t.CFG_KEY_GRAY_OUT_NON_BLOCKING_ISSUE="trunkGrayOutNonBlockingIssues";t.MILLISECONDS_PER_DAY=864e5;t.MIXPANEL_USAGE_TIME_GRANULARITY=Math.round(t.MILLISECONDS_PER_DAY/3);t.MIXPANEL_EXTENSION_SOURCE="vscode-extension";t.MIXPANEL_PROD_TOKEN="9c91505aaf7c709bf35485aac8958796";t.MIXPANEL_DEV_TOKEN="162eba72313b5d76a240a9050e4736e5";t.EXTENSION_DEV_VERSION="0.0.0";t.CLI_LAUNCHER_DOWNLOAD_URL="https://trunk.io/releases/trunk";t.CLI_MIN_VERSION="0.4.3-beta";t.CLI_LATEST_KNOWN_VERSION="0.15.0-beta";t.EXTENSION_PLATFORM=process.platform;t.EXTENSION_OS=getOs(t.EXTENSION_PLATFORM);t.EXTENSION_ENVIRONMENT=(0,r.getNodeEnvironment)();t.EXTENSION_VERSION=t.EXTENSION_ENVIRONMENT===r.RuntimeEnvironment.DEV?t.EXTENSION_DEV_VERSION:n(4147).version;t.EXTENSION_FIRST_ACTIVATION_STORAGE_KEY="trunk.first_activation";t.EXTENSION_LAST_ACTIVATION_STORAGE_KEY="trunk.last_activation";t.EXTENSION_LAST_USAGE_STORAGE_KEY="trunk.last_usage";t.EXTENSION_MAX_UNUSED_DURATION_THRESHOLD_HOURS=24;t.EXTENSION_RESTART_RETRY_OPTIONS={retries:2,factor:2,minTimeout:250};t.TRUNK_PATHS_TO_HIDE=["**/.trunk/*out"]},57733:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){if(r===undefined)r=n;var i=Object.getOwnPropertyDescriptor(t,n);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[n]}}}Object.defineProperty(e,r,i)}:function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(n!=="default"&&Object.prototype.hasOwnProperty.call(e,n))r(t,e,n);i(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.setContext=t.clearContexts=t.clearContext=t.ContextScope=t.UniqueContext=t.BaseContext=void 0;const o=s(n(76062));var a;(function(e){e["unknown"]="unknown";e["statusErred"]="trunk.statusErred";e["grayOutNonBlockingIssuesEnabled"]="trunk.grayOutNonBlockingIssuesEnabled";e["linterQueueStrategy"]="trunk.linterQueueStrategy"})(a=t.BaseContext||(t.BaseContext={}));var c;(function(e){e["invalidInitializationParams"]="trunk.invalidInitializationParams";e["invalidConfig"]="trunk.invalidConfig";e["notRepo"]="trunk.notRepo";e["upgradeRequired"]="trunk.upgradeRequired";e["platform"]="os.platform";e["initRequired"]="trunk.initRequired";e["statusClosed"]="trunk.statusClosed";e["initializing"]="trunk.initializing"})(c=t.UniqueContext||(t.UniqueContext={}));var u;(function(e){e[e["all"]=1]="all";e[e["unique"]=2]="unique"})(u=t.ContextScope||(t.ContextScope={}));const clearContext=async e=>{await o.commands.executeCommand("setContext",e,undefined)};t.clearContext=clearContext;const clearContexts=async(e=u.all)=>{const n=[];switch(e){case u.all:{for(const e in a){n.push((0,t.clearContext)(a[e]))}for(const e in c){n.push((0,t.clearContexts)(c[e]))}break}case u.unique:{for(const e in c){n.push((0,t.clearContext)(c[e]))}break}default:break}await Promise.all(n)};t.clearContexts=clearContexts;const setContext=async(e,n)=>{if(Object.values(c).includes(e)){await(0,t.clearContexts)(u.unique)}await o.commands.executeCommand("setContext",e,n)};t.setContext=setContext},32338:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){if(r===undefined)r=n;var i=Object.getOwnPropertyDescriptor(t,n);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[n]}}}Object.defineProperty(e,r,i)}:function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(n!=="default"&&Object.prototype.hasOwnProperty.call(e,n))r(t,e,n);i(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.ExtensionRestartDialog=void 0;const o=s(n(76062));var a;(function(e){e[e["NOT_PRESENTED"]=0]="NOT_PRESENTED";e[e["PENDING_USER_ACTION"]=1]="PENDING_USER_ACTION";e[e["RESTART_IN_PROGRESS"]=2]="RESTART_IN_PROGRESS"})(a||(a={}));class ExtensionRestartDialog{constructor(){this.status=a.NOT_PRESENTED}show(e,t){if(this.status!==a.NOT_PRESENTED){return}this.status=a.PENDING_USER_ACTION;o.window.showErrorMessage(`${e} ${t!==null&&t!==void 0?t:""}`,{modal:false,detail:t},{title:"Restart Trunk",isCloseAffordance:true,onClick:async()=>{o.commands.executeCommand("trunk.restartExtension")}}).then((async e=>{this.status=a.RESTART_IN_PROGRESS;if(e&&e.onClick){await e.onClick()}this.status=a.NOT_PRESENTED}))}}t.ExtensionRestartDialog=ExtensionRestartDialog},33071:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){if(r===undefined)r=n;var i=Object.getOwnPropertyDescriptor(t,n);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[n]}}}Object.defineProperty(e,r,i)}:function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(n!=="default"&&Object.prototype.hasOwnProperty.call(e,n))r(t,e,n);i(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.CliVersion=t.getNodeEnvironment=t.RuntimeEnvironment=void 0;const o=s(n(77546));var a;(function(e){e["PRODUCTION"]="production";e["STAGING"]="staging";e["DEV"]="dev";e["TEST"]="test"})(a=t.RuntimeEnvironment||(t.RuntimeEnvironment={}));function getNodeEnvironment(){if(/--debug|--inspect/.test(process.execArgv.join(" "))){return a.DEV}if(process.env.NODE_ENV==="development"){return a.DEV}const{version:e}=n(4147);if(o.parse(e).prerelease.length===0){return a.PRODUCTION}return a.STAGING}t.getNodeEnvironment=getNodeEnvironment;const c="0.0.0-rc";const u="0.0.0";class CliVersion{constructor(e){this.rawCliVersion=e;this.cliVersion=o.parse(e)}isDevOrTest(){return this.rawCliVersion===c||this.rawCliVersion===u}toString(){return this.cliVersion.format()}lt(e){return o.lt(this.cliVersion,e)}gte(e){return o.gte(this.cliVersion,e)}}t.CliVersion=CliVersion},36804:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){if(r===undefined)r=n;var i=Object.getOwnPropertyDescriptor(t,n);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[n]}}}Object.defineProperty(e,r,i)}:function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(n!=="default"&&Object.prototype.hasOwnProperty.call(e,n))r(t,e,n);i(t,e);return t};var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.ClientErrorHandler=void 0;const a=s(n(89074));const c=n(57733);const u=o(n(86287));const l=n(33432);class ClientErrorHandler{constructor(e,t){this.error=(e,t,n)=>{if(this.options.state){this.options.state.status=l.Status.CLOSED}this.options.actionsView.setStatusClosed();this.options.statusBarItem.setStatusClosed();this.options.treeView.setStatusClosed(e);u.default.error({error:e,message:t,count:n});return{action:a.ErrorAction.Shutdown,message:e.message}};this.closed=()=>({action:a.CloseAction.DoNotRestart});this.initializationFailedHandler=e=>{try{this.options.actionsView.setStatusClosed();this.options.statusBarItem.setStatusClosed()}catch(e){u.default.error("unable to set status erred:",e)}if(e.code===a.ErrorCodes.InvalidParams){this.options.treeView.setStatusClosed(e,{context:c.UniqueContext.invalidInitializationParams,value:true});this.options.restartDialog.show(e.message);(0,c.setContext)(c.UniqueContext.invalidInitializationParams,true);return false}this.options.restartDialog.show(e.message);this.options.treeView.setStatusClosed(e);u.default.error(e);return false};this.options=e;this.mixpanel=t}}t.ClientErrorHandler=ClientErrorHandler},80035:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){if(r===undefined)r=n;var i=Object.getOwnPropertyDescriptor(t,n);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[n]}}}Object.defineProperty(e,r,i)}:function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(n!=="default"&&Object.prototype.hasOwnProperty.call(e,n))r(t,e,n);i(t,e);return t};var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.restartExtensionWithRetry=t.restartExtension=t.activate=t.deactivate=t.activateExtension=void 0;const a=n(57147);const c=s(n(71017));const u=o(n(96359));const l=s(n(76062));const d=n(89074);const f=o(n(69329));const p=n(28967);const h=n(56393);const m=n(3580);const g=n(63556);const v=n(17442);const y=n(28749);const b=n(57733);const _=n(32338);const S=n(33071);const w=n(36804);const T=n(37315);const k=n(31905);const C=n(82743);const E=n(33703);const R=n(26427);const x=n(30235);const O=n(38744);const D=o(n(86287));const P=n(44693);const I=n(61894);const M=n(99875);const N=n(41755);const A=n(5794);const F=n(30373);const L=n(33432);const j=n(81752);const q=n(82169);const $=n(61947);const U=n(6579);const H=n(24019);const W=n(49795);const B=n(35405);const lspValidateConfigAndStart=async(e,t,n,r,i)=>{if(t.getIsInitializing()){return}const s=await t.config();if(s.exitCode===0){await n.lspClient.start();return}await(0,b.clearContext)(b.UniqueContext.initRequired);await t.configWithTerminal();r.setStatusClosed();await i.setStatusClosed(undefined,{context:b.UniqueContext.invalidConfig,value:true})};const lspScheduleConfigWatcher=(e,n,r,i,s,o,c)=>{const u=new T.FileWatcher([c],(async({isDelete:u})=>{if(n.getIsInitializing()){return}r.status=L.Status.CLOSED;if(u){await r.lspClient.stop({skipWaitingForStop:true});await i.setStatusClosed(undefined,{context:b.UniqueContext.initRequired,value:true});o.setStatusClosed()}else{let u=false;try{const e=(0,a.readFileSync)(c);const t=f.default.parse(e.toString());u=t.cli.version!==r.cliVersion}catch(e){D.default.error(e);u=true}if(!u){return}await r.lspClient.stop();const l=await n.config();if(l.exitCode===0){o.setStatusReloading();await(0,t.restartExtensionWithRetry)(e).catch((e=>{D.default.debug(e)}))}else{await n.configWithTerminal();await i.setStatusClosed(undefined,{context:b.UniqueContext.invalidConfig,value:true});o.setStatusClosed();s.setStatusClosed()}}}));u.start();e.subscriptions.push(new l.Disposable(u.stop))};const lspHandleClientStarted=async(e,t,n,r,i,s,o,a)=>{const validateInitialResponse=async()=>{const s=n.lspClient.getInitializeResult();if(!s){throw Error("Empty initialize response from LSP server")}const o=new S.CliVersion(s.serverInfo.version);n.cliIdentity=s.capabilities.experimental;n.cliVersion=s.serverInfo.version;i.setCliVersion(o);const a=await(0,H.checkCliVersionAndUpgrade)(e,t,n);if(a.cliCompatibility===H.CliVersionCompatibility.CLI_INCOMPATIBLE){await(0,b.clearContext)(b.UniqueContext.invalidConfig);await i.setStatusClosed(undefined,{context:b.UniqueContext.upgradeRequired,value:true});r.setStatusClosed();n.status=L.Status.CLOSED;await n.lspClient.stop()}};const setupReportingAndAnalytics=()=>{const e=n.lspClient.getInitializeResult();const t=new S.CliVersion(e.serverInfo.version);const r=y.EXTENSION_ENVIRONMENT===S.RuntimeEnvironment.TEST||y.EXTENSION_ENVIRONMENT===S.RuntimeEnvironment.DEV||t.isDevOrTest();n.mixpanelClient.setIdentity({identityId:n.cliIdentity.identityId,mixpanelToken:r?y.MIXPANEL_DEV_TOKEN:y.MIXPANEL_PROD_TOKEN},n.cliVersion);D.default.add((0,N.makeSentryTransport)(n.cliIdentity,t.toString()))};await(0,N.sendErrorsToSentry)((async()=>{await validateInitialResponse();setupReportingAndAnalytics();(0,q.registerTreeContextMenuCommands)(e);(0,k.registerFormattingProvider)(e,n.lspClient);(0,A.registerServerCallbacks)(e,t,n,r,i,s,o,a)}))()};const addTrunkToPath=async(e,t)=>{const n=await(0,x.getTrunkPath)(t);const r=c.dirname(n);const i=process.env.PATH;const s=`${i}:${r}`;e.environmentVariableCollection.replace("PATH",s)};const setUpUserConfiguration=async()=>{var e,t;const n=l.workspace.getConfiguration("files");const r=(e=n.inspect("exclude").workspaceValue)!==null&&e!==void 0?e:{};const i=(t=n.inspect("watcherExclude").workspaceValue)!==null&&t!==void 0?t:{};y.TRUNK_PATHS_TO_HIDE.forEach((e=>{r[e]=true;i[e]=true}));await n.update("exclude",r,l.ConfigurationTarget.Global);await n.update("watcherExclude",i,l.ConfigurationTarget.Global)};const getActivationConfig=()=>{var e,t;const n=(t=(e=l.workspace.getConfiguration("trunk"))===null||e===void 0?void 0:e.get(y.CFG_KEY_GRAY_OUT_NON_BLOCKING_ISSUE))!==null&&t!==void 0?t:false;return{grayOutNonBlocking:n}};const setInitialContextKeys=async e=>{await(0,b.setContext)(b.BaseContext.linterQueueStrategy,F.TrunkLinterQueueStrategy.Auto).catch((e=>{D.default.error(e)}));await(0,b.setContext)(b.BaseContext.grayOutNonBlockingIssuesEnabled,e.grayOutNonBlocking).catch((e=>{D.default.error(e)}))};const scheduleExternalInitWatcher=(e,t,n)=>{const r=new T.FileWatcher([n],(async({isCreate:e})=>{if(e){r.stop();if(t.getIsInitializing()){return}await l.commands.executeCommand("trunk.restartExtension")}}));r.start();e.subscriptions.push(new l.Disposable(r.stop))};const registerSidebarViews=(e,t,n,r,i)=>{l.window.createTreeView("helpAndFeedbackView",{treeDataProvider:i,showCollapseAll:true,canSelectMany:false});l.window.createTreeView("explorerHelpAndFeedbackView",{treeDataProvider:i,showCollapseAll:true,canSelectMany:false});e.subscriptions.push(l.window.registerWebviewViewProvider("trunkActionsView",r,{webviewOptions:{retainContextWhenHidden:true}}));e.subscriptions.push(l.window.registerWebviewViewProvider("explorerTrunkActionsView",r));if(t!==undefined){l.window.createTreeView("trunkTreeView",{treeDataProvider:n,showCollapseAll:true,canSelectMany:false});l.window.createTreeView("explorerTrunkTreeView",{treeDataProvider:n,showCollapseAll:true,canSelectMany:false})}};const lspHandleStateTransitions=(e,t,n,r,i,s,o,a)=>{e.subscriptions.push(n.lspClient.base.onDidChangeState((async({newState:c})=>{switch(c){case d.State.Starting:n.status=L.Status.STARTING;r.setStatusStaring();s.setStatusStarting();await i.setStatusStarting();break;case d.State.Running:n.status=L.Status.STARTED;r.setStatusStartedWithIdle();s.setStatusStarted();await i.setStatusStarted();await lspHandleClientStarted(e,t,n,r,i,s,o,a);break;case d.State.Stopped:if(n.status!==L.Status.CLOSED){r.setStatusClosed();s.setStatusClosed();await i.setStatusClosed()}break;default:D.default.error(`Unexpected state of LSP client: ${c}`)}})))};let Y;let V;let K;let G;let z;let J;let X;let Q;let Z=false;let ee;const clearGlobalStateVariables=()=>{Y=undefined;V=undefined;K=undefined;G=undefined;z=undefined;J=undefined;X=undefined;Q=undefined;Z=false};const activateExtension=async e=>{await addTrunkToPath(e,(0,B.tryGetWorkspaceRoot)());const n=new U.TrunkDriver;const r=new h.ActionRunner(n);const i=await getActivationConfig();const s=new g.PersistentCache(e.globalState);const o=new g.PersistentCache(e.workspaceState);const a=new I.MixpanelAPI(o);const u=new W.UsageRegistry(s);const d=new M.PlatformChecker(a);await setInitialContextKeys(i);await(0,m.trackUnused)(a,u);await d.assertSupportedPlatform();K=new j.TrunkStatusBarItem(e);Q=new _.ExtensionRestartDialog;X=new O.InlineDecorator;X.installCallback(e);G=new $.TrunkTreeDataProvider(e,(0,B.getWorkspaceRoot)().fsPath,i);z=new R.HelpAndFeedbackTreeDataProvider;J=new p.TrunkActionsViewProvider(n,e.extensionUri,r,ee,(e=>{ee=e}));V=l.languages.createDiagnosticCollection();e.subscriptions.push(V);(0,v.registerExtensionCommands)(e,n,(()=>({trunkDiagnostics:V,trunkState:Y,trunkStatusBar:K,trunkTreeView:G,restartExtension:t.restartExtensionWithRetry,trunkActionRunner:r})));const f={statusBarItem:K,treeView:G,restartDialog:Q,actionsView:J};const y={};const S=new w.ClientErrorHandler(f,a);const T=new P.ClientMiddleware(y);const k=l.workspace.createFileSystemWatcher("**/.clientrc");e.subscriptions.push(k);Y=await(0,x.initializeTrunkState)(e,{documentSelector:[{scheme:"file",language:"*"}],synchronize:{fileEvents:k},initializationOptions:{version:l.extensions.getExtension("Trunk.io").packageJSON.version},middleware:T,errorHandler:S,initializationFailedHandler:S.initializationFailedHandler},a,s,o,u);registerSidebarViews(e,Y,G,J,z);if(Y===undefined){const t=await(0,E.checkWorkspaceHasGit)();const r=c.join((0,B.getWorkspaceRoot)().fsPath,".trunk/trunk.yaml");scheduleExternalInitWatcher(e,n,r);if(t){await(0,b.setContext)(b.UniqueContext.initRequired,true)}}if(Y!==undefined){K.setState(Y);Q=new _.ExtensionRestartDialog;f.state=Y;y.state=Y;const t=await(0,C.tryFindPath)(l.Uri.file(Y.repoRoot),".trunk",[l.FileType.Directory,l.FileType.SymbolicLink]);const r=c.join(t,"trunk.yaml");await setUpUserConfiguration();await u.persistLastUsage();await(0,b.clearContext)(b.UniqueContext.initRequired);lspHandleStateTransitions(e,n,Y,K,G,J,Q,V);await lspValidateConfigAndStart(e,n,Y,J,G);lspScheduleConfigWatcher(e,n,Y,G,J,K,r)}return{getGlobalState:()=>Y,activateExtension:()=>(0,t.activateExtension)(e)}};t.activateExtension=activateExtension;const deactivate=async e=>{if(Y){Y.status=L.Status.CLOSED;await Y.lspClient.stop()}while(e&&e.subscriptions.length){e.subscriptions.pop().dispose()}clearGlobalStateVariables();await(0,b.clearContexts)()};t.deactivate=deactivate;const activate=e=>{if(!(0,B.tryGetWorkspaceRoot)()){return undefined}return(0,t.activateExtension)(e).catch((async e=>{D.default.crit(e);await(0,N.sendErrorsToSentry)((e=>{throw e}))(e)}))};t.activate=activate;const restartExtension=async e=>{if(Z){return}Z=true;try{await(0,t.deactivate)(e);await(0,t.activate)(e)}finally{Z=false}};t.restartExtension=restartExtension;const restartExtensionWithRetry=(e,n=y.EXTENSION_RESTART_RETRY_OPTIONS)=>(0,u.default)(n,(n=>(0,t.restartExtension)(e).catch(n)));t.restartExtensionWithRetry=restartExtensionWithRetry},37315:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.FileWatcher=void 0;const r=n(57147);let i=0;const s=new Map;const o=new Map;const globalCallback=async(e,t,n)=>{var r;(r=s.get(e))===null||r===void 0?void 0:r.forEach((async r=>{const i=o.get(r);if(i!==undefined){Promise.resolve();await i({filePath:e,currStats:t,prevStats:n,isCreate:t.blocks>0&&n.blocks===0,isDelete:t.blocks===0&&n.blocks>0,isUpdate:t.blocks>0&&n.blocks>0})}}))};class FileWatcher{constructor(e,t){this.pathsToWatch=e;this.started=false;this.start=()=>{if(this.started){throw new Error("file watcher already started")}this.pathsToWatch.forEach((e=>{if(!s.has(e)){s.set(e,new Set);(0,r.watchFile)(e,{interval:1e3},(async(t,n)=>{await globalCallback(e,t,n)}))}const t=s.get(e);t===null||t===void 0?void 0:t.add(this.id)}));this.started=true};this.stop=()=>{if(!this.started){return}this.pathsToWatch.forEach((e=>{const t=s.get(e);t===null||t===void 0?void 0:t.delete(this.id);if(!t||t.size<1){s.delete(e);(0,r.unwatchFile)(e)}}));this.started=false};this.id=i;i+=1;o.set(this.id,t)}}t.FileWatcher=FileWatcher},31905:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){if(r===undefined)r=n;var i=Object.getOwnPropertyDescriptor(t,n);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[n]}}}Object.defineProperty(e,r,i)}:function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(n!=="default"&&Object.prototype.hasOwnProperty.call(e,n))r(t,e,n);i(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.registerFormattingProvider=t.FormattingProvider=void 0;const o=s(n(76062));const a=s(n(89074));const c=s(n(86332));const u=s(n(67473));class FormattingProvider{constructor(e){this.client=e;this.provideDocumentFormattingEdits=async(e,t,n)=>{const r=await this.client.base.sendRequest(a.DocumentFormattingRequest.type,u.toDocumentFormattingParams(e,t),n);return r.map(c.asTextEdit)}}}t.FormattingProvider=FormattingProvider;const registerFormattingProvider=(e,t)=>{e.subscriptions.push(o.languages.registerDocumentFormattingEditProvider("*",new FormattingProvider(t)))};t.registerFormattingProvider=registerFormattingProvider},82743:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){if(r===undefined)r=n;var i=Object.getOwnPropertyDescriptor(t,n);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[n]}}}Object.defineProperty(e,r,i)}:function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(n!=="default"&&Object.prototype.hasOwnProperty.call(e,n))r(t,e,n);i(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.tryFindPath=t.tryResolveRelativePath=t.downloadTrunkLauncher=t.writeExecutable=t.tryCheckPathExists=t.getParentRelativePath=void 0;const o=s(n(57147));const a=s(n(95687));const c=s(n(71017));const u=n(73837);const l=s(n(76062));const d=n(28749);const getParentRelativePath=(e,t)=>{let n=c.dirname(e);if(n.startsWith(t)){n=n.substr(t.length+1)}return n};t.getParentRelativePath=getParentRelativePath;const tryCheckPathExists=async(e,t)=>l.workspace.fs.stat(e).then((e=>{if(t.includes(e.type)){return true}return false}),(()=>false));t.tryCheckPathExists=tryCheckPathExists;const writeExecutable=async(e,t)=>new Promise(((n,r)=>{l.workspace.fs.writeFile(e,(new u.TextEncoder).encode(t)).then((()=>{o.chmod(e.fsPath,509,(e=>{if(e){r(e)}else{n()}}))}))}));t.writeExecutable=writeExecutable;const downloadTrunkLauncher=async(e="trunk",n=d.CLI_LAUNCHER_DOWNLOAD_URL)=>{const r=l.Uri.file(c.resolve(__dirname,e));const i=await(0,t.tryCheckPathExists)(r,[l.FileType.File,l.FileType.SymbolicLink]);if(i){return r}return new Promise(((e,i)=>{a.get(n,(n=>{let s="";n.setEncoding("utf-8");n.on("data",(e=>{s+=e}));n.on("end",(async()=>{(0,t.writeExecutable)(r,s).then((()=>e(r)))}));n.on("error",(e=>i(e)))}))}))};t.downloadTrunkLauncher=downloadTrunkLauncher;const tryResolveRelativePath=async(e,n,r)=>{const i=l.Uri.file(c.join(e.fsPath,n));if(await(0,t.tryCheckPathExists)(i,r)){return i.fsPath}return undefined};t.tryResolveRelativePath=tryResolveRelativePath;const tryFindPath=async(e,n,r)=>{if(!e.path||c.resolve(e.path)===c.resolve("/")){return undefined}const i=await(0,t.tryResolveRelativePath)(e,n,r);if(!i){const i=c.dirname(e.path);return(0,t.tryFindPath)(l.Uri.parse(i),n,r)}return i};t.tryFindPath=tryFindPath},33703:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){if(r===undefined)r=n;var i=Object.getOwnPropertyDescriptor(t,n);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[n]}}}Object.defineProperty(e,r,i)}:function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(n!=="default"&&Object.prototype.hasOwnProperty.call(e,n))r(t,e,n);i(t,e);return t};var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.checkWorkspaceHasGit=t.checkDirectoryHasGit=void 0;const a=o(n(15942));const c=s(n(76062));const u=n(57733);const checkDirectoryHasGit=e=>{const t=(0,a.default)(e);return t.checkIsRepo()};t.checkDirectoryHasGit=checkDirectoryHasGit;const checkWorkspaceHasGit=async()=>{const{workspaceFolders:e}=c.workspace;if(!e||!e.length){return false}const n=await(0,t.checkDirectoryHasGit)(e[0].uri.fsPath);if(!n){await(0,u.setContext)(u.UniqueContext.notRepo,true);return false}await(0,u.clearContext)(u.UniqueContext.notRepo);return true};t.checkWorkspaceHasGit=checkWorkspaceHasGit},28858:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){if(r===undefined)r=n;var i=Object.getOwnPropertyDescriptor(t,n);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[n]}}}Object.defineProperty(e,r,i)}:function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(n!=="default"&&Object.prototype.hasOwnProperty.call(e,n))r(t,e,n);i(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.FEEDBACK_NODES=void 0;const o=s(n(76062));const a=n(29015);t.FEEDBACK_NODES=new a.StaticElementResolver([{title:"Join Trunk Community Slack to get help",icon:new o.ThemeIcon("comments-view-icon"),collapsibleState:o.TreeItemCollapsibleState.None,href:o.Uri.parse("https://slack.trunk.io/",false)},{title:"Visit Trunk documentation to learn more",icon:new o.ThemeIcon("open-editors-view-icon"),collapsibleState:o.TreeItemCollapsibleState.None,href:o.Uri.parse("https://docs.trunk.io/",false)}])},29015:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){if(r===undefined)r=n;var i=Object.getOwnPropertyDescriptor(t,n);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[n]}}}Object.defineProperty(e,r,i)}:function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(n!=="default"&&Object.prototype.hasOwnProperty.call(e,n))r(t,e,n);i(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.StaticElementResolver=void 0;const o=s(n(76062));const a=n(1207);const asItem=(e,t)=>{var n;const r=new a.StaticUIItem(t.title,(n=t.collapsibleState)!==null&&n!==void 0?n:t.children?o.TreeItemCollapsibleState.Expanded:o.TreeItemCollapsibleState.None);r.id=e;r.tooltip=t.title;r.iconPath=t.icon;if(t.href){r.command={command:"vscode.open",title:"Open in Browser",arguments:[t.href]}}return r};class StaticElementResolver{constructor(e){var t;this.resolveChildren=e=>{if(e===undefined){return this.childrenByParentId.get(StaticElementResolver.ROOT_PARENT_ID)}if(!this.childrenByParentId.has(e)){throw Error(`tree item ${e} does not exist`)}return this.childrenByParentId.get(e)};this.childrenByParentId=new Map;const n=e.map((e=>[StaticElementResolver.ROOT_PARENT_ID,e]))||[];let r=0;while(n.length>0){const[e,i]=n.pop();const s=asItem(`${r}`,i);(t=i.children)===null||t===void 0?void 0:t.forEach((e=>{n.push([s.id,e])}));if(this.childrenByParentId.has(e)){this.childrenByParentId.get(e).push(s)}else{this.childrenByParentId.set(e,[s])}r+=1}}}t.StaticElementResolver=StaticElementResolver;StaticElementResolver.ROOT_PARENT_ID="-1"},26427:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.HelpAndFeedbackTreeDataProvider=void 0;const r=n(28858);class HelpAndFeedbackTreeDataProvider{getTreeItem(e){return e}getChildren(e){const t=r.FEEDBACK_NODES.resolveChildren(e===null||e===void 0?void 0:e.id);return Promise.resolve(t)}}t.HelpAndFeedbackTreeDataProvider=HelpAndFeedbackTreeDataProvider},1207:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){if(r===undefined)r=n;var i=Object.getOwnPropertyDescriptor(t,n);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[n]}}}Object.defineProperty(e,r,i)}:function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(n!=="default"&&Object.prototype.hasOwnProperty.call(e,n))r(t,e,n);i(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.StaticUIItem=void 0;const o=s(n(76062));class StaticUIItem extends o.TreeItem{constructor(e,t){super(e,t);this.label=e;this.collapsibleState=t}}t.StaticUIItem=StaticUIItem},30235:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){if(r===undefined)r=n;var i=Object.getOwnPropertyDescriptor(t,n);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[n]}}}Object.defineProperty(e,r,i)}:function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(n!=="default"&&Object.prototype.hasOwnProperty.call(e,n))r(t,e,n);i(t,e);return t};var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.initializeTrunkState=t.getTrunkPath=void 0;const a=s(n(71017));const c=o(n(15942));const u=s(n(76062));const l=n(89074);const d=n(28749);const f=n(82743);const p=o(n(86287));const h=n(45291);const m=n(81755);const g=n(33432);const v=n(35405);const tryCheckFileExists=e=>{if(!e){return false}return(0,f.tryCheckPathExists)(u.Uri.file(e),[u.FileType.File,u.FileType.SymbolicLink])};const findLspExecutable=async()=>{const e=await(0,m.tryRunShell)("which trunk");if(e.exitCode===0&&e.stdout&&e.stdout.trim()){return e.stdout.trim()}return undefined};const tryGetTrunkPathFromConfig=async e=>{const t=u.workspace.getConfiguration("trunk");const n=t.get(d.CFG_KEY_LSP_EXECUTABLE_PATH);if(n){if(await tryCheckFileExists(n)){p.default.info(`using ${n} as requested by config`);return n}const t=a.join(e.fsPath,n);if(await tryCheckFileExists(t)){p.default.info(`using ${t} as requested by config`);return t}}return undefined};const tryGetTrunkPathFromEnvironment=async()=>{if(process.env.TRUNK_LSP_BINARY_PATH){const e=process.env.TRUNK_LSP_BINARY_PATH;p.default.info(`using: ${e} as set by environment variable`);if(await tryCheckFileExists(e)){return e}}return undefined};const tryGetTrunkPathFromProcessEnvironment=async()=>{const e=await findLspExecutable();if(await tryCheckFileExists(e)){return e}return undefined};const tryGetTrunkPathFromExtensionCache=async()=>{try{const e=await(0,f.downloadTrunkLauncher)();const t=e.fsPath;if(await tryCheckFileExists(t)){return t}}catch(e){const t=`Failed to download Trunk launcher: ${e.message}`;p.default.error(t)}return undefined};const getTrunkPath=async e=>{const t=await tryGetTrunkPathFromConfig(e);if(t){return t}const n=await tryGetTrunkPathFromEnvironment();if(n){return n}const r=await tryGetTrunkPathFromProcessEnvironment();if(r){return r}const i=await tryGetTrunkPathFromExtensionCache();if(i){return i}return undefined};t.getTrunkPath=getTrunkPath;const initializeTrunkState=async(e,n,r,i,s,o)=>{const p=(0,v.tryGetWorkspaceRoot)();if(p===undefined){return undefined}if(process.env.HOME===undefined){return undefined}const m=(0,c.default)();if(!m.checkIsRepo()){return undefined}const y=u.Uri.file(process.env.HOME);const b=await(0,f.tryFindPath)(p,".trunk",[u.FileType.Directory,u.FileType.SymbolicLink]);if(b===undefined){return undefined}const _=a.dirname(b);if(_===undefined){return undefined}const S=(0,c.default)(_,{});let w=await(0,t.getTrunkPath)(p);if(w===undefined){return undefined}w=w;const T=u.workspace.getConfiguration("trunk");let k;k=T.get(d.CFG_KEY_LSP_ARGUMENTS);if(!k){k=["lsp-proxy"]}const C={command:w,args:k,options:{cwd:p.fsPath,detached:false,shell:false}};const E={run:C,debug:C};const R=new l.LanguageClient("trunk","Trunk",E,n);e.subscriptions.push(new u.Disposable(R.outputChannel.dispose));R["showNotificationMessage"]=()=>{};return{lspClient:h.LspClient.wrap(R),homeRoot:y.fsPath,workspaceRoot:p.fsPath,repoRoot:_,repo:S,cliExecutablePath:w,cliArguments:k,mixpanelClient:r,status:g.Status.STARTING,environment:d.EXTENSION_ENVIRONMENT,extensionVersion:d.EXTENSION_VERSION,cliVersion:null,userCache:i,workspaceCache:s,usageRegistry:o}};t.initializeTrunkState=initializeTrunkState},38744:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){if(r===undefined)r=n;var i=Object.getOwnPropertyDescriptor(t,n);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[n]}}}Object.defineProperty(e,r,i)}:function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(n!=="default"&&Object.prototype.hasOwnProperty.call(e,n))r(t,e,n);i(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.InlineDecorator=void 0;const o=s(n(76062));const a=n(28749);var c;(function(e){e[e["Red"]=1]="Red";e[e["Orange"]=2]="Orange";e[e["Yellow"]=3]="Yellow"})(c||(c={}));const compareDecorationOptions=(e,t)=>e.severity-t.severity;class InlineDecorator{constructor(){this.installCallback=e=>{e.subscriptions.push(this);e.subscriptions.push(o.languages.onDidChangeDiagnostics((e=>this.update(e))))};this.decorationOptions={};this.decorationTypeHigh=o.window.createTextEditorDecorationType({isWholeLine:true,backgroundColor:InlineDecorator.getColor(c.Red,.05)});this.decorationTypeMedium=o.window.createTextEditorDecorationType({isWholeLine:true,backgroundColor:InlineDecorator.getColor(c.Orange,.05)});this.decorationTypeLow=o.window.createTextEditorDecorationType({isWholeLine:true,backgroundColor:InlineDecorator.getColor(c.Yellow,.05)})}static getConfigOptions(){const e=o.workspace.getConfiguration("trunk");return{enabled:e.get(a.CFG_KEY_INLINE_DECORATORS),showAllExtensions:e.get(a.CFG_KEY_INLINE_DECORATORS_FOR_ALL_EXTENSIONS)}}dispose(){this.decorationOptions={};this.decorationTypeHigh.dispose();this.decorationTypeMedium.dispose();this.decorationTypeLow.dispose()}static getColor(e,t=1){if(t>1||t<0){throw new Error("Opacity must be between 0 and 1.0")}switch(e){case c.Red:return`rgba(255, 52, 0, ${t})`;case c.Orange:return`rgba(255, 122, 0, ${t})`;case c.Yellow:return`rgba(180, 180, 0, ${t})`;default:throw new Error("Invalid color provided")}}static trim(e,t=200){if(e.length>t){return`${e.slice(0,t)}â€¦`}return e}generateDecorationOptions(e,t,n){let r;switch(n){case o.DiagnosticSeverity.Error:r=InlineDecorator.getColor(c.Red,.5);break;case o.DiagnosticSeverity.Warning:r=InlineDecorator.getColor(c.Orange,.5);break;default:r=InlineDecorator.getColor(c.Yellow,.5);break}return{range:e,severity:n,renderOptions:{after:{contentText:InlineDecorator.trim(t),margin:"40px",color:r}}}}update(e){const t=InlineDecorator.getConfigOptions();const{activeTextEditor:n}=o.window;if(!n||!t.enabled){return}e.uris.forEach((e=>{const n=o.languages.getDiagnostics(e).reduce(((e,n)=>{if(n.severity===o.DiagnosticSeverity.Hint||!t.showAllExtensions&&!(n["data"]&&n["data"]["xSource"]==="trunk")){return e}const r=n.range.start.line;const i=this.generateDecorationOptions(n.range,n.message,n.severity);if(e[r]){e[r].push(i)}else{e[r]=[i]}return e}),[]);this.decorationOptions[e.fsPath]=n}));const r=n.document.uri.fsPath;const i=this.decorationOptions[r];if(i){Object.keys(i).forEach((e=>{i[e].sort(compareDecorationOptions)}));const e=Object.keys(i).map((e=>{const t=i[e].length;const n=i[e][0];if(t>1){const e=`${n.renderOptions.after.contentText} (1/${t})`;return this.generateDecorationOptions(n.range,e,n.severity)}return n}));const t=e.reduce(((e,t)=>{switch(t.severity){case o.DiagnosticSeverity.Error:e.high.push(t);return e;case o.DiagnosticSeverity.Warning:e.medium.push(t);return e;default:e.low.push(t);return e}}),{high:[],medium:[],low:[]});n.setDecorations(this.decorationTypeHigh,t.high);n.setDecorations(this.decorationTypeMedium,t.medium);n.setDecorations(this.decorationTypeLow,t.low)}}}t.InlineDecorator=InlineDecorator},86287:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});const i=r(n(96015));const s=n(28749);const o=n(33071);i.default.config.syslog.levels.warn=i.default.config.syslog.levels.warning;const withVSCodeConsole=e=>{e.log=(e,t)=>{const{level:n,message:r}=e;console.log(n,r);t()};return e};const makeLogger=()=>{const e=s.EXTENSION_ENVIRONMENT===o.RuntimeEnvironment.TEST||o.RuntimeEnvironment.DEV;const t=e?"debug":"info";const n=i.default.format.combine(i.default.format.simple(),i.default.format.timestamp(),i.default.format.splat(),i.default.format.errors({stack:true}),e?i.default.format.colorize():i.default.format.uncolorize(),i.default.format.printf((e=>`${e.timestamp} [${e.level}] ${e.message}`)));const r=new i.default.transports.Console({stderrLevels:["emerg","alert","crit","error","warning","warn"]});const a=withVSCodeConsole(new i.default.transports.Console({format:i.default.format.simple()}));const c=[r,a];return i.default.createLogger({levels:i.default.config.syslog.levels,level:t,format:n,transports:c})};t["default"]=makeLogger()},45291:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.LspClient=void 0;const i=r(n(86287));const isRunning=e=>{try{return process.kill(e,0)}catch(e){return e.code==="EPERM"}};class LspClient{constructor(e){this.base=e;this.isStartCalled=false;this.isStopCalled=false;this.start=async()=>{if(this.isStartCalled){throw new Error("lsp client cannot be started more than once")}if(this.base.needsStart()){await this.base.start()}this.isStartCalled=true};this.stop=async e=>{if(this.isStopCalled){return}this.isStopCalled=true;if(!this.isStartCalled){return}const t=this.base._serverProcess;const n=isRunning(t.pid);if(n){const n=!(e===null||e===void 0?void 0:e.skipWaitingForStop);let r=false;if(n&&this.base.needsStop()){r=await this.base.stop().then((()=>true)).catch((e=>{i.default.error(e);return false}))}if(r||!isRunning(t.pid)){return}const s=t.kill(9);if(!s&&isRunning(t.pid)){await new Promise((e=>{t.on("exit",(()=>{e()}))}))}}}}getInitializeResult(){return this.base.initializeResult}}t.LspClient=LspClient;LspClient.wrap=e=>new LspClient(e)},44693:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ClientMiddleware=void 0;class ClientMiddleware{constructor(e){this.options=e;this.didOpen=(e,t)=>{if(!this.checkIfExternal(e.uri)){return t(e,undefined)}return Promise.resolve()};this.didChange=(e,t)=>{if(!this.checkIfExternal(e.document.uri)){return t(e,undefined)}return Promise.resolve()};this.didSave=(e,t)=>{if(!this.checkIfExternal(e.uri)){return t(e,undefined)}return Promise.resolve()};this.didClose=(e,t)=>{if(!this.checkIfExternal(e.uri)){return t(e,undefined)}return Promise.resolve()};this.provideCodeActions=(e,t,n,r,i)=>i(e,t,ClientMiddleware.excludeForeignDiagnostics(n),r);this.workspacePrefix=undefined}checkIfExternal(e){var t;if(((t=this.options.state)===null||t===void 0?void 0:t.repoRoot)&&this.workspacePrefix===undefined){this.workspacePrefix=`${this.options.state.repoRoot}/`}if(this.workspacePrefix===undefined){return true}return!e.fsPath.startsWith(this.workspacePrefix)}static excludeForeignDiagnostics(e){const t=e.diagnostics.filter((e=>{const t=e===null||e===void 0?void 0:e.data;return(t===null||t===void 0?void 0:t.xSource)==="trunk"||(t===null||t===void 0?void 0:t.provideAutoformatFix)!==undefined}));return{triggerKind:e.triggerKind,only:e.only,diagnostics:t}}}t.ClientMiddleware=ClientMiddleware},68248:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.MixpanelBucketsCache=void 0;class MixpanelBucketsCache{constructor(e){this.workspaceCache=e;this.Add=async e=>{if(!e){return false}if(this.internal.has(e)){return false}this.internal.add(e);await this.workspaceCache.set(MixpanelBucketsCache.STORAGE_KEY,Array.from(this.internal.keys()));return true};const t=this.workspaceCache.get(MixpanelBucketsCache.STORAGE_KEY);if(Array.isArray(t)){this.internal=new Set(t)}else{this.internal=new Set}}}t.MixpanelBucketsCache=MixpanelBucketsCache;MixpanelBucketsCache.STORAGE_KEY="trunk.mixpanel_time_buckets"},61894:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){if(r===undefined)r=n;var i=Object.getOwnPropertyDescriptor(t,n);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[n]}}}Object.defineProperty(e,r,i)}:function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(n!=="default"&&Object.prototype.hasOwnProperty.call(e,n))r(t,e,n);i(t,e);return t};var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.MixpanelAPI=t.withDedupeKey=void 0;const a=s(n(36449));const c=s(n(76062));const u=n(28749);const l=o(n(86287));const d=n(68248);const withDedupeKey=(e,t)=>{const n=new Date;const r=Math.round(n.getTime()/u.MIXPANEL_USAGE_TIME_GRANULARITY);t.dedupeKey=`${e}_${r}_${u.EXTENSION_ENVIRONMENT}_${u.EXTENSION_VERSION}`;return t};t.withDedupeKey=withDedupeKey;const getFallbackIdentity=()=>({mixpanelToken:u.MIXPANEL_DEV_TOKEN});const omit=(e,t)=>Object.keys(e).reduce(((n,r)=>{if(r!==t){n[r]=e[r]}return n}),{});class InternalMixpanelAPI{constructor(e,t,n){this.cache=e;this.identity=t;this.Track=async(e,t)=>{const n={...t,...this.superProperties};if(await this.cache.Add(t.dedupeKey)){await this.mixpanel.track(e,omit(n,"dedupeKey"),(e=>{if(e!==undefined){l.default.crit(e)}}))}};this.superProperties={};this.mixpanel=a.init(t.mixpanelToken,{protocol:"https"});this.superProperties={distinct_id:this.identity.identityId,source:u.MIXPANEL_EXTENSION_SOURCE,environment:u.EXTENSION_ENVIRONMENT,extensionVersion:u.EXTENSION_VERSION,cliVersion:n,platform:u.EXTENSION_PLATFORM,os:u.EXTENSION_OS,nodeVersion:process.version,vscodeVersion:c.version}}}class MixpanelAPI{constructor(e){this.setIdentity=(e,t)=>{this.api=new InternalMixpanelAPI(this.timeBucketsCache,e,t)};this.trackDaily=async(e,n)=>this.track(e,(0,t.withDedupeKey)(e,n!==null&&n!==void 0?n:{}));this.track=async(e,t)=>{if(!this.reportingEnabled){return}if(this.api===undefined){await this.fallbackAPI.Track(e,{fallback:true,...t})}else{await this.api.Track(e,{fallback:true,...t})}};const n=getFallbackIdentity();this.reportingEnabled=true;this.timeBucketsCache=new d.MixpanelBucketsCache(e);this.fallbackAPI=new InternalMixpanelAPI(this.timeBucketsCache,n,null)}disableReporting(){this.reportingEnabled=false}}t.MixpanelAPI=MixpanelAPI},30335:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){if(r===undefined)r=n;var i=Object.getOwnPropertyDescriptor(t,n);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[n]}}}Object.defineProperty(e,r,i)}:function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(n!=="default"&&Object.prototype.hasOwnProperty.call(e,n))r(t,e,n);i(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.TRUNK_CONTINUE_REQUEST=t.TRUNK_PAUSE_REQUEST=void 0;const o=s(n(89074));t.TRUNK_PAUSE_REQUEST=new o.ProtocolRequestType("$trunk/pauseLinter");t.TRUNK_CONTINUE_REQUEST=new o.ProtocolRequestType("$trunk/continueLinter")},99875:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){if(r===undefined)r=n;var i=Object.getOwnPropertyDescriptor(t,n);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[n]}}}Object.defineProperty(e,r,i)}:function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(n!=="default"&&Object.prototype.hasOwnProperty.call(e,n))r(t,e,n);i(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.PlatformChecker=void 0;const o=s(n(22037));const a=n(57733);class PlatformChecker{constructor(e){this.mixpanel=e;this.assertSupportedPlatform=async()=>{if(o.platform()==="win32"){await this.mixpanel.trackDaily("platform.windows");await(0,a.setContext)(a.UniqueContext.platform,"win32");throw new Error(`Unsupported platform: ${o.platform()}`)}}}}t.PlatformChecker=PlatformChecker},41755:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.makeSentryTransport=t.sendErrorsToSentry=void 0;const i=r(n(96015));const s=r(n(7098));const o=n(28749);const a=n(33071);const c="https://94522cf7cc8846229e77cb2a8e1b93cd@o681886.ingest.sentry.io/6067305";const u="https://06eedab4ca914493857f93477e5a4669@o681886.ingest.sentry.io/5807358";const l="crit";const getSentryDns=()=>{switch(o.EXTENSION_ENVIRONMENT){case a.RuntimeEnvironment.PRODUCTION:case a.RuntimeEnvironment.STAGING:return u;case a.RuntimeEnvironment.DEV:case a.RuntimeEnvironment.TEST:return c;default:return""}};let d=null;const sendErrorsToSentry=e=>(...t)=>{try{return e(...t)}catch(e){if(d){d.sentry.withScope((t=>{t.setTag("trunk",true);d.sentry.captureException(e)}))}else{console.log("Encountered error inside sentryWrap-d context, but Sentry is not yet configured:\n",e)}return null}};t.sendErrorsToSentry=sendErrorsToSentry;const makeSentryTransport=(e,t)=>{const n=i.default.format((e=>{const{...t}=e;return{...t,tags:{trunk:true}}}));d=new s.default({sentry:{defaultIntegrations:false,integrations:[],dsn:getSentryDns(),serverName:`vscode-${o.EXTENSION_VERSION}`,environment:o.EXTENSION_ENVIRONMENT.toLowerCase(),beforeSend:(n,r)=>{var i,s,o;if(!((i=n.tags)===null||i===void 0?void 0:i.trunk)){return null}delete n.tags.trunk;n.tags.cli=t;n.tags.remoteName=e.telemetryMetadata.remoteName;n.tags.remoteUrl=e.telemetryMetadata.remoteUrl;n.tags.organization=e.telemetryMetadata.organization;n.tags.repository=e.telemetryMetadata.repository;n.user={name:e.telemetryMetadata.userName,email:e.telemetryMetadata.userEmail,id:e.identityId};for(const e of(o=(s=n.exception)===null||s===void 0?void 0:s.values)!==null&&o!==void 0?o:[]){e.mechanism.type="trunkSentryWrap";e.mechanism.handled=false}return n}},level:l,format:n()});return d};t.makeSentryTransport=makeSentryTransport},5794:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){if(r===undefined)r=n;var i=Object.getOwnPropertyDescriptor(t,n);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[n]}}}Object.defineProperty(e,r,i)}:function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(n!=="default"&&Object.prototype.hasOwnProperty.call(e,n))r(t,e,n);i(t,e);return t};var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.registerServerCallbacks=void 0;const a=s(n(76062));const c=o(n(86287));const u=n(41755);const l=n(86332);const d=n(30373);const f=n(33432);const registerServerCallbacks=(e,t,n,r,i,s,o,p)=>{e.subscriptions.push(n.lspClient.base.onNotification("$/progress",(0,u.sendErrorsToSentry)((async e=>{r.setStatusWithProgress(e);await i.setStatusStartedWithProgress(e)}))));e.subscriptions.push(n.lspClient.base.onNotification("$trunk/publishNotification",(e=>{s.setActionsAndReRender(e.notifications)})));e.subscriptions.push(n.lspClient.base.onNotification("$trunk/log.Error",(async e=>{if(n.status===f.Status.CLOSED){return}c.default.error(`Received critical error from lsp proxy: ${e.message}`,e);n.status=f.Status.CLOSED;try{const t=e.code===d.TrunkErrorCode.TrunkUserError?e.message:"";s.setStatusClosed();r.setStatusClosed();await i.setStatusClosed(new Error(t));await n.lspClient.stop()}catch(e){c.default.error(e)}})));e.subscriptions.push(n.lspClient.base.onNotification("textDocument/publishDiagnostics",(0,u.sendErrorsToSentry)((async e=>{await n.mixpanelClient.trackDaily("extension.usage");await n.usageRegistry.persistLastUsage();const t=e.diagnostics.map(l.asDiagnostic);const r=a.Uri.parse(e.uri);if(i.getStatus()!==f.Status.PAUSED){p.set(r,t.filter((e=>{const t=(0,d.tryGetTrunkData)(e);return(t===null||t===void 0?void 0:t.issueClass)!==d.TrunkIssueClass.Unformatted})));await i.setStatusStartedWithDiagnostics(r,t)}}))))};t.registerServerCallbacks=registerServerCallbacks},81755:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.tryRunShell=void 0;const r=n(32081);function tryRunShell(e){const t={shell:"bash",env:process.env};return new Promise((n=>{const i=(0,r.exec)(e,t,((e,t,r)=>{n({exitCode:i.exitCode,error:e,stdout:t,stderr:r})}))}))}t.tryRunShell=tryRunShell},86332:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){if(r===undefined)r=n;var i=Object.getOwnPropertyDescriptor(t,n);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[n]}}}Object.defineProperty(e,r,i)}:function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(n!=="default"&&Object.prototype.hasOwnProperty.call(e,n))r(t,e,n);i(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.extractCodeString=t.asCodeAction=t.asCodeActionKind=t.asDiagnosticWithRange=t.asDiagnostic=t.asCode=t.asSeverity=t.asTextEdit=t.asRange=t.asPosition=void 0;const o=s(n(76062));const a=s(n(89074));const c=new Map([[a.CodeActionKind.Empty,o.CodeActionKind.Empty],[a.CodeActionKind.QuickFix,o.CodeActionKind.QuickFix],[a.CodeActionKind.Refactor,o.CodeActionKind.Refactor],[a.CodeActionKind.RefactorExtract,o.CodeActionKind.RefactorExtract],[a.CodeActionKind.RefactorInline,o.CodeActionKind.RefactorInline],[a.CodeActionKind.RefactorRewrite,o.CodeActionKind.RefactorRewrite],[a.CodeActionKind.Source,o.CodeActionKind.Source],[a.CodeActionKind.SourceFixAll,o.CodeActionKind.SourceFixAll],[a.CodeActionKind.SourceOrganizeImports,o.CodeActionKind.SourceOrganizeImports]]);const u=new Map([[a.DiagnosticSeverity.Error,o.DiagnosticSeverity.Error],[a.DiagnosticSeverity.Warning,o.DiagnosticSeverity.Warning],[a.DiagnosticSeverity.Information,o.DiagnosticSeverity.Information],[a.DiagnosticSeverity.Hint,o.DiagnosticSeverity.Hint]]);const asPosition=e=>new o.Position(e.line,e.character);t.asPosition=asPosition;const asRange=e=>new o.Range((0,t.asPosition)(e.start),(0,t.asPosition)(e.end));t.asRange=asRange;const asTextEdit=e=>({range:(0,t.asRange)(e.range),newText:e.newText});t.asTextEdit=asTextEdit;const asSeverity=e=>u.get(e);t.asSeverity=asSeverity;const asCode=(e,t)=>{if(t){return{value:`${e}`,target:o.Uri.parse(t.href)}}return`${e}`};t.asCode=asCode;const asDiagnostic=e=>{const n={range:(0,t.asRange)(e.range),message:e.message,severity:(0,t.asSeverity)(e.severity),source:e.source,code:(0,t.asCode)(e.code,e.codeDescription)};n["data"]=e.data;n["data"]["xSource"]="trunk";return n};t.asDiagnostic=asDiagnostic;const asDiagnosticWithRange=(e,t)=>({...e,range:t});t.asDiagnosticWithRange=asDiagnosticWithRange;const asCodeActionKind=e=>c.get(e);t.asCodeActionKind=asCodeActionKind;const asCodeAction=e=>({title:e.title,diagnostics:e.diagnostics.map(t.asDiagnostic),kind:(0,t.asCodeActionKind)(e.kind),isPreferred:e.isPreferred});t.asCodeAction=asCodeAction;const extractCodeString=e=>{if(!e.code){return""}if(e.code instanceof String){return e.code||""}return e.code.value};t.extractCodeString=extractCodeString},67473:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){if(r===undefined)r=n;var i=Object.getOwnPropertyDescriptor(t,n);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[n]}}}Object.defineProperty(e,r,i)}:function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(n!=="default"&&Object.prototype.hasOwnProperty.call(e,n))r(t,e,n);i(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.asString=t.toCodeActionsParams=t.asCodeActionContext=t.asDiagnostic=t.asCodeActionKind=t.asRange=t.asPosition=t.toDocumentFormattingParams=t.asTextDocumentIdentifier=t.asFormattingOptions=void 0;const o=s(n(76062));const asFormattingOptions=e=>e;t.asFormattingOptions=asFormattingOptions;const asTextDocumentIdentifier=e=>({uri:e.toString()});t.asTextDocumentIdentifier=asTextDocumentIdentifier;const toDocumentFormattingParams=(e,n)=>({textDocument:(0,t.asTextDocumentIdentifier)(e.uri),options:(0,t.asFormattingOptions)(n)});t.toDocumentFormattingParams=toDocumentFormattingParams;const asPosition=e=>e;t.asPosition=asPosition;const asRange=e=>({start:(0,t.asPosition)(e.start),end:(0,t.asPosition)(e.end)});t.asRange=asRange;const asCodeActionKind=e=>e.value;t.asCodeActionKind=asCodeActionKind;const asDiagnostic=e=>({range:(0,t.asRange)(e.range),message:e.message});t.asDiagnostic=asDiagnostic;const asCodeActionContext=e=>({diagnostics:e.diagnostics.map(t.asDiagnostic),only:e.only?[(0,t.asCodeActionKind)(e.only)]:undefined});t.asCodeActionContext=asCodeActionContext;const toCodeActionsParams=(e,n,r)=>({textDocument:(0,t.asTextDocumentIdentifier)(e.uri),range:(0,t.asRange)(n),context:(0,t.asCodeActionContext)(r)});t.toCodeActionsParams=toCodeActionsParams;const asString=e=>{switch(e){case o.DiagnosticSeverity.Error:return"Error";case o.DiagnosticSeverity.Warning:return"Warning";case o.DiagnosticSeverity.Information:return"Information";case o.DiagnosticSeverity.Hint:return"Hint";default:return"Unknown"}};t.asString=asString},30373:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){if(r===undefined)r=n;var i=Object.getOwnPropertyDescriptor(t,n);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[n]}}}Object.defineProperty(e,r,i)}:function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(n!=="default"&&Object.prototype.hasOwnProperty.call(e,n))r(t,e,n);i(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.isBlocking=t.tryGetTrunkData=t.TrunkIssueClass=t.TrunkJobType=t.TrunkJobStatus=t.TrunkErrorCode=t.TrunkLinterQueueStrategy=t.TrunkProgressStatus=t.isFilePath=void 0;const o=s(n(89074));const isFilePath=e=>typeof e==="string"||e instanceof String;t.isFilePath=isFilePath;var a;(function(e){e["Initializing"]="initializing";e["Idle"]="idle";e["Linting"]="linting"})(a=t.TrunkProgressStatus||(t.TrunkProgressStatus={}));var c;(function(e){e["Auto"]="auto";e["OnDemand"]="onDemand"})(c=t.TrunkLinterQueueStrategy||(t.TrunkLinterQueueStrategy={}));var u;(function(e){e[e["TrunkInternalError"]=o.ErrorCodes.InternalError]="TrunkInternalError";e[e["TrunkUserError"]=5001]="TrunkUserError"})(u=t.TrunkErrorCode||(t.TrunkErrorCode={}));var l;(function(e){e[e["Unspecified"]=0]="Unspecified";e[e["NotStarted"]=1]="NotStarted";e[e["Running"]=2]="Running";e[e["Done"]=3]="Done"})(l=t.TrunkJobStatus||(t.TrunkJobStatus={}));var d;(function(e){e[e["Unspecified"]=0]="Unspecified";e[e["CheckFile"]=1]="CheckFile";e[e["Prepare"]=2]="Prepare"})(d=t.TrunkJobType||(t.TrunkJobType={}));var f;(function(e){e[e["Unspecified"]=0]="Unspecified";e[e["New"]=1]="New";e[e["Existing"]=2]="Existing";e[e["Fixed"]=3]="Fixed";e[e["Unformatted"]=4]="Unformatted";e[e["Failure"]=5]="Failure"})(f=t.TrunkIssueClass||(t.TrunkIssueClass={}));const tryGetTrunkData=e=>{const t=e.data;return t};t.tryGetTrunkData=tryGetTrunkData;const isBlocking=e=>{const n=(0,t.tryGetTrunkData)(e);const r=(n===null||n===void 0?void 0:n.belowThreshold)===true||(n===null||n===void 0?void 0:n.issueClass)===f.Existing||(n===null||n===void 0?void 0:n.issueClass)===f.Fixed;return!r};t.isBlocking=isBlocking},33432:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Status=void 0;var n;(function(e){e["STARTING"]="starting";e["STARTED"]="started";e["CLOSED"]="closed";e["PAUSED"]="paused"})(n=t.Status||(t.Status={}))},81752:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){if(r===undefined)r=n;var i=Object.getOwnPropertyDescriptor(t,n);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[n]}}}Object.defineProperty(e,r,i)}:function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(n!=="default"&&Object.prototype.hasOwnProperty.call(e,n))r(t,e,n);i(t,e);return t};var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.TrunkStatusBarItem=void 0;const a=s(n(76062));const c=o(n(86287));const u=n(30373);class TrunkStatusBarItem{constructor(e){this.dispose=()=>{this.statusBarItem.hide();this.statusBarItem.dispose()};this.statusBarItem=a.window.createStatusBarItem(a.StatusBarAlignment.Right,Number.MIN_SAFE_INTEGER);this.statusBarItem.tooltip=undefined;e.subscriptions.push(this.statusBarItem)}static formatVersionsString(e,t){if(t){return`${e?"\n":""}Trunk: ${t.cliVersion}\nExtension: ${t.extensionVersion}`}return""}setState(e){this.state=e;this.statusBarItem.tooltip=TrunkStatusBarItem.formatVersionsString(false,this.state)}setStatusReloading(e){this.statusBarItem.text="$(sync~spin) Trunk: Reloading";this.statusBarItem.show()}setStatusStaring(e){this.statusBarItem.text="$(sync~spin) Trunk: Connecting";this.statusBarItem.show()}setStatusInitializing(){this.statusBarItem.text="$(sync~spin) Trunk: Initializing";this.statusBarItem.show()}setStatusStartedWithProgress(e){this.statusBarItem.text=`$(sync~spin) Trunk: Linting ${e.finishedLintJobs}/${e.totalLintJobs}`;this.statusBarItem.tooltip=`Linting ${e.finishedLintJobs}/${e.totalLintJobs}`;this.statusBarItem.show()}setStatusStartedWithIdle(e){this.statusBarItem.text="$(check-all) Trunk";this.statusBarItem.tooltip=`Idle${TrunkStatusBarItem.formatVersionsString(true,this.state)}`;this.statusBarItem.show()}setStatusPaused(){this.statusBarItem.text="$(primitive-square) Trunk: Paused";this.statusBarItem.tooltip=`${TrunkStatusBarItem.formatVersionsString(true,this.state)}`;this.statusBarItem.show()}setStatusClosed(){this.statusBarItem.text="$(close) Trunk: Stopped";this.statusBarItem.tooltip=`Reload trunk extension to start${TrunkStatusBarItem.formatVersionsString(true,this.state)}`;this.statusBarItem.show()}setStatusWithProgress(e){switch(e.status){case u.TrunkProgressStatus.Initializing:{this.setStatusStaring(e);break}case u.TrunkProgressStatus.Idle:{this.setStatusStartedWithIdle(e);break}case u.TrunkProgressStatus.Linting:{this.setStatusStartedWithProgress(e);break}default:this.setStatusStartedWithIdle(e);c.default.error(`unexpected progress params value: ${e}`)}}}t.TrunkStatusBarItem=TrunkStatusBarItem},82169:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){if(r===undefined)r=n;var i=Object.getOwnPropertyDescriptor(t,n);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[n]}}}Object.defineProperty(e,r,i)}:function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(n!=="default"&&Object.prototype.hasOwnProperty.call(e,n))r(t,e,n);i(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.registerTreeContextMenuCommands=void 0;const o=s(n(76062));const a=s(n(86332));const applyEdit=async(e,t)=>{if(t){const n=o.window.activeTextEditor;const r=n&&n.document.uri===e?n.document:await o.workspace.openTextDocument(e);const i=await o.window.showTextDocument(r);i.edit((e=>{e.replace(a.asRange(t.range),t.newText)}))}};const openFileAtPositionCommand=(e,t)=>{o.workspace.openTextDocument(e).then((e=>{o.window.showTextDocument(e,1,false).then((()=>{o.window.activeTextEditor.revealRange(t);o.window.activeTextEditor.selection=new o.Selection(t.start.line,t.start.character,t.end.line,t.end.character)}))}))};const openIssueItem=e=>{var t,n;openFileAtPositionCommand((t=e.properties)===null||t===void 0?void 0:t.uri,(n=e.properties)===null||n===void 0?void 0:n.range)};const openFileItem=e=>{var t;openFileAtPositionCommand((t=e.properties)===null||t===void 0?void 0:t.uri,new o.Range(0,0,1,0))};const copyIssueToClipboard=async e=>{var t;const n=`${(t=e.properties)===null||t===void 0?void 0:t.diagnostic.message}`;await o.env.clipboard.writeText(n)};const copyIssueCodeToClipboard=async e=>{var t;const n=`${a.extractCodeString((t=e.properties)===null||t===void 0?void 0:t.diagnostic)}`;await o.env.clipboard.writeText(n)};const ignoreIssue=async e=>{var t,n;applyEdit((t=e.properties)===null||t===void 0?void 0:t.uri,(n=e.properties)===null||n===void 0?void 0:n.diagnosticData.ignoreIssueAutofix)};const applyAutofix=async e=>{var t,n;applyEdit((t=e.properties)===null||t===void 0?void 0:t.uri,(n=e.properties)===null||n===void 0?void 0:n.diagnosticData.formatDocumentAutofix)};const formatFile=async e=>{var t,n;applyEdit((t=e.properties)===null||t===void 0?void 0:t.uri,(n=e.properties)===null||n===void 0?void 0:n.formatDocumentAutofix)};const registerTreeContextMenuCommands=e=>{e.subscriptions.push(o.commands.registerCommand("trunk.openAtPosition",openFileAtPositionCommand));e.subscriptions.push(o.commands.registerCommand("trunk.internal.goToIssue",openIssueItem));e.subscriptions.push(o.commands.registerCommand("trunk.internal.goToFile",openFileItem));e.subscriptions.push(o.commands.registerCommand("trunk.internal.copyIssueToClipboard",copyIssueToClipboard));e.subscriptions.push(o.commands.registerCommand("trunk.internal.copyIssueCodeToClipboard",copyIssueCodeToClipboard));e.subscriptions.push(o.commands.registerCommand("trunk.internal.ignoreIssue",ignoreIssue));e.subscriptions.push(o.commands.registerCommand("trunk.internal.applyAutofix",applyAutofix));e.subscriptions.push(o.commands.registerCommand("trunk.internal.formatFile",formatFile))};t.registerTreeContextMenuCommands=registerTreeContextMenuCommands},3042:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){if(r===undefined)r=n;var i=Object.getOwnPropertyDescriptor(t,n);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[n]}}}Object.defineProperty(e,r,i)}:function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(n!=="default"&&Object.prototype.hasOwnProperty.call(e,n))r(t,e,n);i(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.ISSUE_ICON_FILES=t.ISSUE_ICON_NONBLOCKING=t.ICON_FILE=t.ICON_LOADING=t.ICON_ALERT=t.ICON_PREPARE_JOB=t.ICON_LINTER_NOT_STARTED=t.ICON_LINTER_RUNNING=t.ICON_LINTER_DONE=void 0;const o=s(n(71017));const a=s(n(76062));t.ICON_LINTER_DONE=a.Uri.file(o.join(__filename,"../../assets/file-status-completed.svg"));t.ICON_LINTER_RUNNING=a.Uri.file(o.join(__filename,"../../assets/file-status-working.svg"));t.ICON_LINTER_NOT_STARTED=a.Uri.file(o.join(__filename,"../../assets/file-status-not-started.svg"));t.ICON_PREPARE_JOB=new a.ThemeIcon("arrow-small-right");t.ICON_ALERT=new a.ThemeIcon("alert");t.ICON_LOADING=a.Uri.file(o.join(__filename,"../../assets/file-status-working.svg"));t.ICON_FILE=a.ThemeIcon.File;t.ISSUE_ICON_NONBLOCKING=a.Uri.file(o.join(__filename,"../../assets/gray.svg"));t.ISSUE_ICON_FILES=new Map([[a.DiagnosticSeverity.Hint,"low.svg"],[a.DiagnosticSeverity.Information,"low.svg"],[a.DiagnosticSeverity.Warning,"medium.svg"],[a.DiagnosticSeverity.Error,"high.svg"]].map((e=>{const[t,n]=e;const r=a.Uri.file(o.join(__filename,"../../assets",n));return[t,r]})))},31564:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.prepareJobItemComparator=t.fileJobItemComparator=t.fileItemComparator=t.diagnosticItemComparator=t.rangeComparator=t.positionComparator=t.stringComparator=t.numberComparator=void 0;const numberComparator=(e,t)=>{if(e>t){return 1}if(t>e){return-1}return 0};t.numberComparator=numberComparator;const stringComparator=(e,t)=>{if(e>t){return 1}if(t>e){return-1}return 0};t.stringComparator=stringComparator;const positionComparator=(e,n)=>(0,t.numberComparator)(e.line,n.line)||(0,t.numberComparator)(e.character,n.character);t.positionComparator=positionComparator;const rangeComparator=(e,n)=>(0,t.positionComparator)(e.start,n.start)||(0,t.positionComparator)(e.end,n.end);t.rangeComparator=rangeComparator;const diagnosticItemComparator=(e,n)=>{const r=(0,t.rangeComparator)(e.properties.diagnostic.range,n.properties.diagnostic.range);if(r!==0){return r}return(0,t.stringComparator)(e.label,n.label)};t.diagnosticItemComparator=diagnosticItemComparator;const fileItemComparator=(e,n)=>(0,t.stringComparator)(e.label,n.label);t.fileItemComparator=fileItemComparator;const fileJobItemComparator=(e,n)=>{const r=e.properties;const i=n.properties;return-1*(0,t.numberComparator)(r.job.jobStatus,i.job.jobStatus)||(0,t.stringComparator)(r.linterName,i.linterName)||(0,t.numberComparator)(r.job.jobType,i.job.jobType)};t.fileJobItemComparator=fileJobItemComparator;const prepareJobItemComparator=(e,n)=>(0,t.stringComparator)(e.properties.job.name,n.properties.job.name);t.prepareJobItemComparator=prepareJobItemComparator},61947:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){if(r===undefined)r=n;var i=Object.getOwnPropertyDescriptor(t,n);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[n]}}}Object.defineProperty(e,r,i)}:function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(n!=="default"&&Object.prototype.hasOwnProperty.call(e,n))r(t,e,n);i(t,e);return t};var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.TrunkTreeDataProvider=void 0;const a=o(n(27393));const c=o(n(31974));const u=s(n(77546));const l=s(n(76062));const d=n(57733);const f=o(n(86287));const p=n(30373);const h=n(33432);const m=n(31564);const g=n(63072);const v=n(98418);const y=a.default.duration(3,"seconds");const consolidateJobs=e=>{const t=new Map;e.forEach((e=>{const n=t.get(e.linterName)||[];n.push(e);t.set(e.linterName,n)}));const n=[];t.forEach((e=>{const t=e[0];let r=false;let i=false;let s=false;e.forEach((e=>{if(e.jobStatus===p.TrunkJobStatus.Running){s=true}else if(e.jobStatus===p.TrunkJobStatus.Done){r=true}else if(e.jobStatus===p.TrunkJobStatus.NotStarted||e.jobStatus===p.TrunkJobStatus.Unspecified){i=true}}));if(s||r&&i){t.jobStatus=p.TrunkJobStatus.Running}else if(r){t.jobStatus=p.TrunkJobStatus.Done}else{t.jobStatus=p.TrunkJobStatus.NotStarted}n.push(t)}));return n};const consolidateLinterJobStatuses=e=>{const t=new Map;e.forEach(((e,n)=>{t.set(n,consolidateJobs(e))}));return t};class TrunkTreeDataProvider{constructor(e,t,n){this.workspaceRoot=t;this.options=n;(0,d.clearContext)(d.UniqueContext.statusClosed);this.state={progressStatus:p.TrunkProgressStatus.Initializing,progressSummary:undefined,initializeTime:undefined,lastStateUpdateTime:undefined,lastRenderEventTime:new Date,diagnosticsByUri:new Map,linterJobStatusesByPath:new Map,fileItemByPath:new Map,fileJobItemsByPath:new Map,fileDiagnosticItemsByPath:new Map,fileDiagnosticItemsWithNonBlockingByPath:new Map,prepareJobItems:[]};this.workspaceRoot=t;this.eventEmitter=new l.EventEmitter;this.onDidChangeTreeData=this.eventEmitter.event;this.status=h.Status.STARTING;e.subscriptions.push(this.eventEmitter)}setGrayOutNonBlocking(e){this.options.grayOutNonBlocking=e;this.refresh()}setCliVersion(e){const t=u.parse("0.6.0-beta");this.cliSupportsJobStatus=e.gte(t)||e.isDevOrTest()}getTreeItem(e){return e}getStatus(){return this.status}async setStatusStarting(){await(0,d.clearContext)(d.UniqueContext.statusClosed);this.status=h.Status.STARTING;this.refresh()}async setStatusStarted(){await(0,d.clearContext)(d.UniqueContext.statusClosed);this.status=h.Status.STARTED;this.refresh()}async setStatusPaused(){await(0,d.clearContext)(d.UniqueContext.statusClosed);this.status=h.Status.PAUSED;this.refresh()}async setStatusClosed(e,t=undefined){this.status=h.Status.CLOSED;if(e){this.error=e}await(0,d.setContext)(d.UniqueContext.statusClosed,true);if(t){await(0,d.setContext)(t.context,t.value)}this.refresh()}async setStatusStartedWithDiagnostics(e,t){await(0,d.clearContext)(d.UniqueContext.statusClosed);this.status=h.Status.STARTED;this.updateTreeStateWithDiagnostics(e,t);this.refresh()}async setStatusStartedWithProgress(e){await(0,d.clearContext)(d.UniqueContext.statusClosed);this.status=h.Status.STARTED;this.state.lastStateUpdateTime=new Date;const t=this.state.progressStatus!==e.status;if(t||e.status===p.TrunkProgressStatus.Idle){this.updateTreeStateWithProgress(e);this.refresh()}else{const t=(0,a.default)(new Date);const n=(0,a.default)(this.state.lastRenderEventTime).add(y);if(t.isBefore(n)){return}this.updateTreeStateWithProgress(e);this.refresh()}}buildFileItems(){const e=new Set;const t=new Map;for(const[n,r]of this.state.diagnosticsByUri){e.add(n.fsPath);t.set(n.fsPath,r)}this.state.diagnosticsByUri.forEach(((n,r)=>{e.add(r.fsPath);t.set(r.fsPath,n)}));this.state.linterJobStatusesByPath.forEach(((t,n)=>e.add(n)));const n=new Map;for(const r of e){const e=this.state.linterJobStatusesByPath.get(r)||[];const i=l.Uri.file(r);const s=t.get(r)||[];if(e.length>0){n.set(r,(0,v.asInProgressFileItem)(i,e,s,this.workspaceRoot,this.cliSupportsJobStatus))}else{n.set(r,(0,v.asCompletedFileItem)(i,s,this.workspaceRoot))}}this.state.fileItemByPath=n}updateTreeStateWithProgress(e){var t;const n=new Set(["Scanning the filesystem"]);const r=new Array;let i=new Map;(t=e===null||e===void 0?void 0:e.linterStatuses)===null||t===void 0?void 0:t.forEach((e=>{var t;(t=e===null||e===void 0?void 0:e.linterJobStatuses)===null||t===void 0?void 0:t.forEach((t=>{const s=t.path;if(t.jobType===p.TrunkJobType.CheckFile||!this.cliSupportsJobStatus){let n=i.get(s);if(n===undefined){n=[];i.set(s,n)}n.push({linterName:e.linterName,...t})}else if(t.jobType===p.TrunkJobType.Prepare&&t.jobStatus===p.TrunkJobStatus.Running){if(!n.has(t.name)){n.add(t.name);r.push((0,v.asPrepareJobItem)(e.linterName,t))}}}))}));const s=new Map;i=consolidateLinterJobStatuses(i);i.forEach(((e,t)=>{const n=l.Uri.file(t);s.set(t,e.map((e=>(0,v.asFileJobItem)(n,e.linterName,e))))}));this.state.fileJobItemsByPath=s;this.state.linterJobStatusesByPath=i;this.state.prepareJobItems=r;this.buildFileItems()}updateFileDiagnostics(e,t){this.state.diagnosticsByUri.set(e,t)}updateTreeStateWithDiagnostics(e,t){this.updateFileDiagnostics(e,t);this.doFullDiagnosticStateUpdate();this.buildFileItems()}doFullDiagnosticStateUpdate(){const e=new Map;const t=new Map;this.state.diagnosticsByUri.forEach(((n,r)=>{const i=r.fsPath;e.set(i,n.map((e=>{const t=(0,p.tryGetTrunkData)(e);return(0,v.asBlockingIssueItem)(r,e,t)})));t.set(i,n.map((e=>{const t=(0,p.tryGetTrunkData)(e);if((0,p.isBlocking)(e)){return(0,v.asBlockingIssueItem)(r,e,t)}return(0,v.asNonBlockingIssueItem)(r,e,t)})))}));this.state.fileDiagnosticItemsByPath=e;this.state.fileDiagnosticItemsWithNonBlockingByPath=t}getChildren(e){let t=[];switch(this.status){case h.Status.STARTING:t=this.getChildrenWhenStarting(e);break;case h.Status.STARTED:t=this.getChildrenWhenStarted(e);break;case h.Status.CLOSED:t=this.getChildrenWhenClosed(e);break;case h.Status.PAUSED:t=this.getChildrenWhenPaused(e);break;default:throw new Error(`unexpected extension status ${this.status}`)}return t}getChildrenWhenStarting(e){if(e!==undefined){return[]}return[g.UI_ITEM_STARTING]}hasUnfinishedJobsOrDiagnostics(e){let t;if((0,p.isFilePath)(e)){t=this.state.fileItemByPath.get(e)}else{t=e}if(t===undefined){return false}return(0,g.hasUnfinishedJobs)(t.properties)||(0,g.hasDiagnostics)(t.properties)}getChildrenWhenStarted(e){var t,n,r;if(e===undefined){const e=Array.from(this.state.fileItemByPath.values());const t=e.filter((e=>this.hasUnfinishedJobsOrDiagnostics(e)));const n=[...this.state.prepareJobItems];return Promise.resolve([this.getIssueCountNode(),...n.sort(m.prepareJobItemComparator),...t.sort(m.fileItemComparator)])}if(e.ctx.kind===g.TreeItemKind.FileItem){const i=e;const s=this.options.grayOutNonBlocking?(t=this.state.fileDiagnosticItemsWithNonBlockingByPath.get(i.properties.uri.path))!==null&&t!==void 0?t:[]:(n=this.state.fileDiagnosticItemsByPath.get(i.properties.uri.path))!==null&&n!==void 0?n:[];const o=(r=this.state.fileJobItemsByPath.get(i.properties.uri.path))!==null&&r!==void 0?r:[];let a=[];a=a.concat([...s].sort(m.diagnosticItemComparator));if((0,g.hasUnfinishedJobs)(i.properties)&&this.cliSupportsJobStatus){a=a.concat([...o].sort(m.fileJobItemComparator))}return Promise.resolve([...a])}return Promise.resolve([])}getChildrenWhenPaused(e){if(e===undefined){return Promise.resolve([g.UI_ITEM_PAUSED])}return Promise.resolve([])}getChildrenWhenClosed(e){return[]}getIssueCountNode(){let e=0;let t=0;this.state.fileItemByPath.forEach(((n,r)=>{var i;const s=(i=n.properties)===null||i===void 0?void 0:i.progressSummary;if(s!==undefined){e+=s.blockingIssues;t+=s.totalIssues}}));const n=(0,a.default)(this.state.lastStateUpdateTime).format("HH:mm:ss");const r=t>0?`(blocking: ${e})`:"";return new g.TrunkTreeItem({ctx:{kind:g.TreeItemKind.UiElementItem},label:`${(0,c.default)("Issue",t)}: ${t}`,description:`${r} Last update: ${n}`,icon:undefined,collapsibleState:l.TreeItemCollapsibleState.None,tooltip:undefined})}refresh(){this.state.lastRenderEventTime=new Date;try{this.eventEmitter.fire()}catch(e){f.default.error(e)}}}t.TrunkTreeDataProvider=TrunkTreeDataProvider},63072:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){if(r===undefined)r=n;var i=Object.getOwnPropertyDescriptor(t,n);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[n]}}}Object.defineProperty(e,r,i)}:function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(n!=="default"&&Object.prototype.hasOwnProperty.call(e,n))r(t,e,n);i(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.UI_ITEM_PAUSED=t.UI_ITEM_STARTING=t.TrunkTreeItem=t.hasDiagnostics=t.hasUnfinishedJobs=t.hasRunningJobs=t.TreeItemContextOption=t.TreeItemKind=t.ProgressStatus=void 0;const o=s(n(76062));const a=n(30373);const c=n(3042);var u;(function(e){e[e["DONE"]=1]="DONE";e[e["LINTING"]=2]="LINTING"})(u=t.ProgressStatus||(t.ProgressStatus={}));var l;(function(e){e["FileItem"]="FileItem";e["DiagnosticItem"]="DiagnosticItem";e["CheckJobItem"]="CheckJobItem";e["PrepareJobItem"]="PrepareJobItem";e["UiElementItem"]="UiElementItem"})(l=t.TreeItemKind||(t.TreeItemKind={}));var d;(function(e){e["WithFormatFile"]="WithFormatFile";e["WithIgnoreIssue"]="WithIgnoreIssue";e["WithApplyAutofix"]="WithApplyAutofix"})(d=t.TreeItemContextOption||(t.TreeItemContextOption={}));const hasRunningJobs=e=>{if(e===null||e===void 0?void 0:e.jobs){for(const t of e.jobs){if(t.jobStatus===a.TrunkJobStatus.Running){return true}}}return false};t.hasRunningJobs=hasRunningJobs;const hasUnfinishedJobs=e=>{if(e===null||e===void 0?void 0:e.jobs){for(const t of e.jobs){const e=t.jobStatus;if(e===a.TrunkJobStatus.Running||e===a.TrunkJobStatus.NotStarted){return true}}}return false};t.hasUnfinishedJobs=hasUnfinishedJobs;const hasDiagnostics=e=>(e===null||e===void 0?void 0:e.diagnostics)&&(e===null||e===void 0?void 0:e.diagnostics.length)>0;t.hasDiagnostics=hasDiagnostics;class TrunkTreeItem extends o.TreeItem{constructor(e){super(e.label,e.collapsibleState);this.id=e.id;this.ctx=e.ctx;this.description=e.description;this.iconPath=e.icon;this.tooltip=new o.MarkdownString(e.tooltip,true);this.contextValue=TrunkTreeItem.formatContextValue(e.ctx);this.properties=e.properties;if([l.DiagnosticItem,l.FileItem].includes(e.ctx.kind)){this.command=TrunkTreeItem.makeOpenAtPositionCommand(this.properties)}if(e.ctx.kind===l.FileItem){const t=e.properties;this.resourceUri=t.uri}}static formatContextValue(e){return`${e.kind}${e.options&&e.options.length>0?`.${e.options.join(".")}`:""}`}static makeOpenAtPositionCommand(e){var t;if(!e){return undefined}return{command:"trunk.openAtPosition",title:"Open in editor",arguments:[e.uri,(t=e.range)!==null&&t!==void 0?t:new o.Range(0,0,1,0)]}}}t.TrunkTreeItem=TrunkTreeItem;t.UI_ITEM_STARTING=new TrunkTreeItem({ctx:{kind:l.UiElementItem},label:"",description:"loading issues explorer ...",icon:c.ICON_LOADING,collapsibleState:o.TreeItemCollapsibleState.None,tooltip:undefined});t.UI_ITEM_PAUSED=new TrunkTreeItem({ctx:{kind:l.UiElementItem},label:"Trunk is paused",description:"",icon:undefined,collapsibleState:o.TreeItemCollapsibleState.None,tooltip:undefined})},98418:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){if(r===undefined)r=n;var i=Object.getOwnPropertyDescriptor(t,n);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[n]}}}Object.defineProperty(e,r,i)}:function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(n!=="default"&&Object.prototype.hasOwnProperty.call(e,n))r(t,e,n);i(t,e);return t};var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.asNonBlockingIssueItem=t.asBlockingIssueItem=t.asFileJobItem=t.asPrepareJobItem=t.asCompletedFileItem=t.asInProgressFileItem=t.JOB_STATUS_NAME=void 0;const a=o(n(71017));const c=o(n(31974));const u=s(n(76062));const l=n(82743);const d=n(86332);const f=n(67473);const p=n(30373);const h=s(n(3042));const m=n(63072);t.JOB_STATUS_NAME=new Map([[p.TrunkJobStatus.Unspecified,"unspecified"],[p.TrunkJobStatus.NotStarted,"not started"],[p.TrunkJobStatus.Running,"running"],[p.TrunkJobStatus.Done,"done"]]);const getIconForLinterJob=e=>{if(e.jobStatus===p.TrunkJobStatus.Running){return h.ICON_LINTER_RUNNING}if(e.jobStatus===p.TrunkJobStatus.Done){return h.ICON_LINTER_DONE}return h.ICON_LINTER_NOT_STARTED};const asInProgressFileItem=(e,t,n,r,i)=>{const s=e.path;const o={status:m.ProgressStatus.LINTING,totalIssues:0,blockingIssues:0,totalJobs:t.length,inProgressJobs:t.filter((e=>e.jobStatus===p.TrunkJobStatus.Running)).length,finishedJobs:t.filter((e=>e.jobStatus===p.TrunkJobStatus.Done)).length};const c=a.default.basename(s);const d={kind:m.TreeItemKind.FileItem};const f=(0,l.getParentRelativePath)(s,r);const g=` ${f} â€“ linting ${o.finishedJobs}/${o.totalJobs}`;let v;for(const e of n){const t=(0,p.tryGetTrunkData)(e);if(t&&t.formatDocumentAutofix){d.options=[m.TreeItemContextOption.WithFormatFile];v=t.formatDocumentAutofix;break}}return new m.TrunkTreeItem({id:s,ctx:d,label:c,description:g,icon:h.ICON_LOADING,collapsibleState:i?u.TreeItemCollapsibleState.Collapsed:u.TreeItemCollapsibleState.None,tooltip:"Computing file diagnostics",properties:{uri:e,diagnostics:n,formatDocumentAutofix:v,jobs:t,progressSummary:o}})};t.asInProgressFileItem=asInProgressFileItem;const asCompletedFileItem=(e,t,n)=>{const r={status:m.ProgressStatus.DONE,totalJobs:0,finishedJobs:0,inProgressJobs:0,totalIssues:t.length,blockingIssues:t.filter(p.isBlocking).length};const i={kind:m.TreeItemKind.FileItem};let s;for(const e of t){const t=(0,p.tryGetTrunkData)(e);if(t&&t.formatDocumentAutofix){i.options=[m.TreeItemContextOption.WithFormatFile];s=t.formatDocumentAutofix;break}}const o=e.path;const d=a.default.basename(o);const f=(0,l.getParentRelativePath)(o,n);const g=(0,c.default)("issue",t.length);const v=`${o} â€¢ ${t.length} ${g} in this file`;const y=` ${f.length>0?`${f} `:""}â€“ ${t.length} ${g}`;return new m.TrunkTreeItem({id:o,ctx:i,label:d,description:y,icon:h.ICON_FILE,collapsibleState:u.TreeItemCollapsibleState.Expanded,tooltip:v,properties:{uri:e,diagnostics:t,formatDocumentAutofix:s,progressSummary:r,jobs:[]}})};t.asCompletedFileItem=asCompletedFileItem;const asPrepareJobItem=(e,t)=>{const n={kind:m.TreeItemKind.CheckJobItem};return new m.TrunkTreeItem({ctx:n,label:undefined,description:`${e}: ${t.name}`,icon:h.ICON_LINTER_RUNNING,collapsibleState:u.TreeItemCollapsibleState.None,tooltip:undefined,properties:{job:t}})};t.asPrepareJobItem=asPrepareJobItem;const asFileJobItem=(e,n,r)=>{const i={kind:m.TreeItemKind.CheckJobItem};return new m.TrunkTreeItem({ctx:i,label:n,description:t.JOB_STATUS_NAME.get(r.jobStatus),icon:getIconForLinterJob(r),collapsibleState:u.TreeItemCollapsibleState.None,tooltip:undefined,properties:{uri:e,job:r,linterName:n}})};t.asFileJobItem=asFileJobItem;const asBlockingIssueItem=(e,t,n)=>{const r={kind:m.TreeItemKind.DiagnosticItem,options:[]};if(n.formatDocumentAutofix){r.options.push(m.TreeItemContextOption.WithApplyAutofix)}if(n.ignoreIssueAutofix){r.options.push(m.TreeItemContextOption.WithIgnoreIssue)}const i=(0,d.extractCodeString)(t);const s=`${t.message}`;const o=i?`(${i})`:"";const a=`${(0,f.asString)(t.severity)}: ${t.message} ${t.source}${i}`;let c;if(n.issueClass!==p.TrunkIssueClass.Unformatted){c=` ${t.source}${o} ${t.range.start.line+1}:${t.range.start.character+1}`}else{c=` ${t.source}${o}`}const l=u.TreeItemCollapsibleState.None;const g=h.ISSUE_ICON_FILES.get(t.severity);const{range:v}=t;return new m.TrunkTreeItem({label:s,description:c,icon:g,collapsibleState:l,tooltip:a,ctx:r,properties:{uri:e,range:v,diagnostic:t,diagnosticData:n}})};t.asBlockingIssueItem=asBlockingIssueItem;const asNonBlockingIssueItem=(e,t,n)=>{const r={kind:m.TreeItemKind.DiagnosticItem,options:[]};if(n.formatDocumentAutofix){r.options.push(m.TreeItemContextOption.WithApplyAutofix)}if(n.ignoreIssueAutofix){r.options.push(m.TreeItemContextOption.WithIgnoreIssue)}const i=(0,d.extractCodeString)(t);const s="";const o=i?`(${i})`:"";const a=`${(0,f.asString)(t.severity)}: ${t.message} ${t.source}${i}`;const c=`${t.message} ${s} ${t.source}${o} ${t.range.start.line+1}:${t.range.start.character+1}`;const l=u.TreeItemCollapsibleState.None;const p=h.ISSUE_ICON_NONBLOCKING;const{range:g}=t;return new m.TrunkTreeItem({label:s,description:c,icon:p,collapsibleState:l,tooltip:a,ctx:r,properties:{uri:e,range:g,diagnostic:t,diagnosticData:n}})};t.asNonBlockingIssueItem=asNonBlockingIssueItem},47759:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:true});t.waitForProcessToExit=t.promisifyProcess=void 0;const promisifyProcess=e=>{const t={exitCode:undefined,stderr:"",stdout:""};e.stderr.setEncoding("utf-8");e.stdout.setEncoding("utf-8");e.stderr.on("data",(e=>{t.stderr+=e}));e.stdout.on("data",(e=>{t.stdout+=e}));return new Promise(((n,r)=>{e.addListener("error",r);e.addListener("exit",(e=>{t.exitCode=e;n(t)}))}))};t.promisifyProcess=promisifyProcess;const waitMs=e=>new Promise((t=>{setTimeout(t,e)}));const waitForProcessToExit=async(e,t=300)=>{let n=true;while(n){try{process.kill(e,0)}catch{n=false}await waitMs(t)}};t.waitForProcessToExit=waitForProcessToExit},6579:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){if(r===undefined)r=n;var i=Object.getOwnPropertyDescriptor(t,n);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[n]}}}Object.defineProperty(e,r,i)}:function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(n!=="default"&&Object.prototype.hasOwnProperty.call(e,n))r(t,e,n);i(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.TrunkDriver=void 0;const o=n(32081);const a=s(n(71017));const c=s(n(76062));const u=n(57733);const l=n(33071);const d=n(82743);const f=n(30235);const p=n(35405);const h=n(47759);var m;(function(e){e["Unknown"]="unknown";e["Version"]="version";e["Init"]="init";e["Upgrade"]="upgrade";e["PrintConfig"]="print-config"})(m||(m={}));class TrunkDriver{constructor(){this.isInitializing=false;this.createOrReuseTerminal=()=>{if(this.terminal===undefined||this.terminal.exitStatus!==undefined){this.terminal=c.window.createTerminal("trunk")}return this.terminal};this.spawnTrunkProcessPromise=async(e,t="",n=this.workspaceRoot,r={})=>{const i=await this.spawnTrunkProcess(e,t,n,r);return(0,h.promisifyProcess)(i)};this.spawnTrunkProcess=async(e,t="",n=this.workspaceRoot,r={TRUNK_LAUNCHER_QUIET:"true"})=>{await this.requireTrunkWorkspace();const i={cwd:n.fsPath,env:{...process.env,...r}};if(t){return(0,o.exec)(`${t} ${this.trunkScriptPath.fsPath} ${e}`,i)}return(0,o.exec)(`${this.trunkScriptPath.fsPath} ${e}`,i)};this.requireTrunkWorkspace=async()=>{if(!this.repoRoot){const e=await(0,d.tryFindPath)(this.workspaceRoot,".git",[c.FileType.Directory,c.FileType.File,c.FileType.SymbolicLink]);if(e===undefined){throw new Error("Unable to locate root of repo.")}this.repoRoot=c.Uri.parse(a.resolve(e,".."))}if(!this.trunkScriptPath){this.trunkScriptPath=c.Uri.parse(await(0,f.getTrunkPath)(this.workspaceRoot))}};this.version=async()=>{const e=await this.spawnTrunkProcessPromise(m.Version);if(e.exitCode!==0){throw new Error("Unable to identify trunk version")}return new l.CliVersion(e.stdout.split("\n").join(""))};this.getIsInitializing=()=>this.isInitializing;this.initWithTerminal=async()=>{if(this.isInitializing){return}await(0,u.clearContext)(u.UniqueContext.initRequired);await(0,u.setContext)(u.UniqueContext.initializing,true);this.isInitializing=true;const e=c.Uri.parse(a.resolve(this.workspaceRoot.fsPath,".trunk","trunk.yaml"));const t=await(0,d.tryCheckPathExists)(e,[c.FileType.File]);if(t){c.window.showInformationMessage("All set. Trunk already initialized.");return}await this.requireTrunkWorkspace();const n=`sh -c 'echo Y | ${this.trunkScriptPath.fsPath} ${m.Init} --nocheck-sample'`;await this.runShellTask(n,"init");this.isInitializing=false;await(0,u.clearContext)(u.UniqueContext.initializing);await c.commands.executeCommand("trunk.restartExtension")};this.upgradeWithTerminal=async()=>{await this.requireTrunkWorkspace();await this.runShellTask(`${this.trunkScriptPath.fsPath} ${m.Upgrade}`,"upgrade")};this.config=async()=>this.spawnTrunkProcessPromise(m.PrintConfig);this.configWithTerminal=async()=>{await this.requireTrunkWorkspace();const e=this.createOrReuseTerminal();const t=`${this.trunkScriptPath.fsPath} ${m.PrintConfig}`;e.sendText(t,true);e.show(false)};this.getRepoRoot=()=>this.repoRoot;this.workspaceRoot=(0,p.getWorkspaceRoot)()}async runShellTask(e,t){await this.requireTrunkWorkspace();const n=c.workspace.workspaceFolders[0];const r=`trunk: ${t}`;await c.tasks.executeTask(new c.Task({type:"trunk",task:r},n,r,"trunk",new c.ShellExecution(e,{})));return new Promise((e=>{const t=c.tasks.onDidEndTaskProcess((n=>{if(n.execution.task.name===r){e(n.exitCode);t.dispose()}}))}))}}t.TrunkDriver=TrunkDriver},24019:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){if(r===undefined)r=n;var i=Object.getOwnPropertyDescriptor(t,n);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[n]}}}Object.defineProperty(e,r,i)}:function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(n!=="default"&&Object.prototype.hasOwnProperty.call(e,n))r(t,e,n);i(t,e);return t};var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.checkCliVersionAndUpgrade=t.showUpgradeDialog=t.NotificationLevel=t.CliVersionCompatibility=void 0;const a=s(n(77546));const c=s(n(76062));const u=n(28749);const l=n(33071);const d=o(n(86287));var f;(function(e){e[e["CLI_INCOMPATIBLE"]=0]="CLI_INCOMPATIBLE";e[e["CLI_COMPATIBLE"]=1]="CLI_COMPATIBLE"})(f=t.CliVersionCompatibility||(t.CliVersionCompatibility={}));var p;(function(e){e[e["INFO"]=0]="INFO";e[e["WARN"]=1]="WARN";e[e["ERROR"]=2]="ERROR"})(p=t.NotificationLevel||(t.NotificationLevel={}));const showMessageOfLevel=(e,t,n,...r)=>{switch(e){case p.INFO:return c.window.showInformationMessage(t,n,...r);case p.WARN:return c.window.showWarningMessage(t,n,...r);case p.ERROR:return c.window.showErrorMessage(t,n,...r);default:d.default.error(`Unknown dialog level ${e}`);return c.window.showErrorMessage(t,n,...r)}};const showUpgradeDialog=async(e,t,n)=>{await showMessageOfLevel(t,n,{modal:false,detail:""},{title:"Upgrade Trunk",isCloseAffordance:true,onClick:async()=>{await e.upgradeWithTerminal()}}).then((async e=>{if(e&&e.onClick){await e.onClick()}}))};t.showUpgradeDialog=showUpgradeDialog;let h=false;const checkCliVersionAndUpgrade=async(e,n,r,i=u.CLI_MIN_VERSION)=>{const s=a.minVersion(`>=${i}`);const o=new l.CliVersion(r.cliVersion);if(o&&o.lt(s)&&!o.isDevOrTest()){await(0,t.showUpgradeDialog)(n,p.ERROR,`Please upgrade Trunk CLI. Minimum required version of Trunk is ${i}. `+`Current: ${o.cliVersion.version}`);return{cliCompatibility:f.CLI_INCOMPATIBLE,cliCurrentVersion:o}}if(o&&u.CLI_LATEST_KNOWN_VERSION&&o.lt(a.parse(u.CLI_LATEST_KNOWN_VERSION))&&!o.isDevOrTest()){h=true;await(0,t.showUpgradeDialog)(n,p.INFO,"A newer version of trunk is available, do you want to upgrade? Upgrade Trunk")}e.subscriptions.push(r.lspClient.base.onNotification("textDocument/releaseInfo",(async e=>{const r=a.parse(e.latest_version);const i=o.lt(r);if(o&&i&&!h){await(0,t.showUpgradeDialog)(n,p.INFO,"A newer version of trunk is available; do you want to "+`upgrade to ${e.latest_version}? Upgrade Trunk`)}})));return{cliCompatibility:f.CLI_COMPATIBLE,cliCurrentVersion:o}};t.checkCliVersionAndUpgrade=checkCliVersionAndUpgrade},49795:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.UsageRegistry=void 0;const i=r(n(27393));const s=n(28749);class UsageRegistry{constructor(e){this.userCache=e;this.persistUsageTime=undefined}async getUsage(){const e=await this.userCache.get(s.EXTENSION_FIRST_ACTIVATION_STORAGE_KEY);const t=await this.userCache.get(s.EXTENSION_LAST_ACTIVATION_STORAGE_KEY);const n=await this.userCache.get(s.EXTENSION_LAST_USAGE_STORAGE_KEY);return{firstActivation:e!==undefined?(0,i.default)(e):undefined,lastActivation:t!==undefined?(0,i.default)(t):undefined,lastUsage:n!==undefined?(0,i.default)(n):undefined}}async persistLastUsage(){const e=(0,i.default)(new Date);if(this.persistUsageTime===undefined){this.persistUsageTime=e;await this.userCache.set(s.EXTENSION_LAST_USAGE_STORAGE_KEY,e.format())}const t=i.default.duration(e.diff(this.persistUsageTime));if(t.asMinutes()>30){this.persistUsageTime=e;await this.userCache.set(s.EXTENSION_LAST_USAGE_STORAGE_KEY,e.format())}}async persistFirstActivation(){const e=(0,i.default)(new Date).format();await this.userCache.set(s.EXTENSION_FIRST_ACTIVATION_STORAGE_KEY,e)}async persistLastActivation(){const e=(0,i.default)(new Date).format();await this.userCache.set(s.EXTENSION_LAST_ACTIVATION_STORAGE_KEY,e)}}t.UsageRegistry=UsageRegistry},35405:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){if(r===undefined)r=n;var i=Object.getOwnPropertyDescriptor(t,n);if(!i||("get"in i?!t.__esModule:i.writable||i.configurable)){i={enumerable:true,get:function(){return t[n]}}}Object.defineProperty(e,r,i)}:function(e,t,n,r){if(r===undefined)r=n;e[r]=t[n]});var i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:true,value:t})}:function(e,t){e["default"]=t});var s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(n!=="default"&&Object.prototype.hasOwnProperty.call(e,n))r(t,e,n);i(t,e);return t};Object.defineProperty(t,"__esModule",{value:true});t.getWorkspaceRoot=t.tryGetWorkspaceRoot=void 0;const o=s(n(76062));const tryGetWorkspaceRoot=()=>{const{workspaceFolders:e}=o.workspace;if(e===undefined||e.length===0){return undefined}return e[0].uri};t.tryGetWorkspaceRoot=tryGetWorkspaceRoot;const getWorkspaceRoot=()=>{const e=(0,t.tryGetWorkspaceRoot)();if(e===undefined){throw Error("failed to access workspace root outside of the workspace")}return e};t.getWorkspaceRoot=getWorkspaceRoot},76062:module=>{module.exports=eval("require")("vscode")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},32081:e=>{"use strict";e.exports=require("child_process")},6113:e=>{"use strict";e.exports=require("crypto")},13639:e=>{"use strict";e.exports=require("domain")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},63477:e=>{"use strict";e.exports=require("querystring")},12781:e=>{"use strict";e.exports=require("stream")},71576:e=>{"use strict";e.exports=require("string_decoder")},24404:e=>{"use strict";e.exports=require("tls")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},58757:(e,t,n)=>{"use strict";var r=n(56690);var i=n(98281);var s=n(66478);var o=n(70752);var a=n(11004);function composeCollection(e,t,n,c,u){let l;switch(n.type){case"block-map":{l=s.resolveBlockMap(e,t,n,u);break}case"block-seq":{l=o.resolveBlockSeq(e,t,n,u);break}case"flow-collection":{l=a.resolveFlowCollection(e,t,n,u);break}}if(!c)return l;const d=t.directives.tagName(c.source,(e=>u(c,"TAG_RESOLVE_FAILED",e)));if(!d)return l;const f=l.constructor;if(d==="!"||d===f.tagName){l.tag=f.tagName;return l}const p=r.isMap(l)?"map":"seq";let h=t.schema.tags.find((e=>e.collection===p&&e.tag===d));if(!h){const e=t.schema.knownTags[d];if(e&&e.collection===p){t.schema.tags.push(Object.assign({},e,{default:false}));h=e}else{u(c,"TAG_RESOLVE_FAILED",`Unresolved tag: ${d}`,true);l.tag=d;return l}}const m=h.resolve(l,(e=>u(c,"TAG_RESOLVE_FAILED",e)),t.options);const g=r.isNode(m)?m:new i.Scalar(m);g.range=l.range;g.tag=d;if(h?.format)g.format=h.format;return g}t.composeCollection=composeCollection},34062:(e,t,n)=>{"use strict";var r=n(6759);var i=n(50617);var s=n(69909);var o=n(58974);function composeDoc(e,t,{offset:n,start:a,value:c,end:u},l){const d=Object.assign({_directives:t},e);const f=new r.Document(undefined,d);const p={atRoot:true,directives:f.directives,options:f.options,schema:f.schema};const h=o.resolveProps(a,{indicator:"doc-start",next:c??u?.[0],offset:n,onError:l,startOnNewline:true});if(h.found){f.directives.docStart=true;if(c&&(c.type==="block-map"||c.type==="block-seq")&&!h.hasNewline)l(h.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")}f.contents=c?i.composeNode(p,c,h,l):i.composeEmptyNode(p,h.end,a,null,h,l);const m=f.contents.range[2];const g=s.resolveEnd(u,m,false,l);if(g.comment)f.comment=g.comment;f.range=[n,m,g.offset];return f}t.composeDoc=composeDoc},50617:(e,t,n)=>{"use strict";var r=n(23861);var i=n(58757);var s=n(19234);var o=n(69909);var a=n(67863);const c={composeNode:composeNode,composeEmptyNode:composeEmptyNode};function composeNode(e,t,n,r){const{spaceBefore:o,comment:a,anchor:u,tag:l}=n;let d;let f=true;switch(t.type){case"alias":d=composeAlias(e,t,r);if(u||l)r(t,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":d=s.composeScalar(e,t,l,r);if(u)d.anchor=u.source.substring(1);break;case"block-map":case"block-seq":case"flow-collection":d=i.composeCollection(c,e,t,l,r);if(u)d.anchor=u.source.substring(1);break;default:{const i=t.type==="error"?t.message:`Unsupported token (type: ${t.type})`;r(t,"UNEXPECTED_TOKEN",i);d=composeEmptyNode(e,t.offset,undefined,null,n,r);f=false}}if(u&&d.anchor==="")r(u,"BAD_ALIAS","Anchor cannot be an empty string");if(o)d.spaceBefore=true;if(a){if(t.type==="scalar"&&t.source==="")d.comment=a;else d.commentBefore=a}if(e.options.keepSourceTokens&&f)d.srcToken=t;return d}function composeEmptyNode(e,t,n,r,{spaceBefore:i,comment:o,anchor:c,tag:u},l){const d={type:"scalar",offset:a.emptyScalarPosition(t,n,r),indent:-1,source:""};const f=s.composeScalar(e,d,u,l);if(c){f.anchor=c.source.substring(1);if(f.anchor==="")l(c,"BAD_ALIAS","Anchor cannot be an empty string")}if(i)f.spaceBefore=true;if(o)f.comment=o;return f}function composeAlias({options:e},{offset:t,source:n,end:i},s){const a=new r.Alias(n.substring(1));if(a.source==="")s(t,"BAD_ALIAS","Alias cannot be an empty string");if(a.source.endsWith(":"))s(t+n.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",true);const c=t+n.length;const u=o.resolveEnd(i,c,e.strict,s);a.range=[t,c,u.offset];if(u.comment)a.comment=u.comment;return a}t.composeEmptyNode=composeEmptyNode;t.composeNode=composeNode},19234:(e,t,n)=>{"use strict";var r=n(56690);var i=n(98281);var s=n(34176);var o=n(42928);function composeScalar(e,t,n,a){const{value:c,type:u,comment:l,range:d}=t.type==="block-scalar"?s.resolveBlockScalar(t,e.options.strict,a):o.resolveFlowScalar(t,e.options.strict,a);const f=n?e.directives.tagName(n.source,(e=>a(n,"TAG_RESOLVE_FAILED",e))):null;const p=n&&f?findScalarTagByName(e.schema,c,f,n,a):t.type==="scalar"?findScalarTagByTest(e,c,t,a):e.schema[r.SCALAR];let h;try{const s=p.resolve(c,(e=>a(n??t,"TAG_RESOLVE_FAILED",e)),e.options);h=r.isScalar(s)?s:new i.Scalar(s)}catch(e){const r=e instanceof Error?e.message:String(e);a(n??t,"TAG_RESOLVE_FAILED",r);h=new i.Scalar(c)}h.range=d;h.source=c;if(u)h.type=u;if(f)h.tag=f;if(p.format)h.format=p.format;if(l)h.comment=l;return h}function findScalarTagByName(e,t,n,i,s){if(n==="!")return e[r.SCALAR];const o=[];for(const t of e.tags){if(!t.collection&&t.tag===n){if(t.default&&t.test)o.push(t);else return t}}for(const e of o)if(e.test?.test(t))return e;const a=e.knownTags[n];if(a&&!a.collection){e.tags.push(Object.assign({},a,{default:false,test:undefined}));return a}s(i,"TAG_RESOLVE_FAILED",`Unresolved tag: ${n}`,n!=="tag:yaml.org,2002:str");return e[r.SCALAR]}function findScalarTagByTest({directives:e,schema:t},n,i,s){const o=t.tags.find((e=>e.default&&e.test?.test(n)))||t[r.SCALAR];if(t.compat){const a=t.compat.find((e=>e.default&&e.test?.test(n)))??t[r.SCALAR];if(o.tag!==a.tag){const t=e.tagString(o.tag);const n=e.tagString(a.tag);const r=`Value may be parsed as either ${t} or ${n}`;s(i,"TAG_RESOLVE_FAILED",r,true)}}return o}t.composeScalar=composeScalar},44964:(e,t,n)=>{"use strict";var r=n(91245);var i=n(6759);var s=n(29341);var o=n(56690);var a=n(34062);var c=n(69909);function getErrorPos(e){if(typeof e==="number")return[e,e+1];if(Array.isArray(e))return e.length===2?e:[e[0],e[1]];const{offset:t,source:n}=e;return[t,t+(typeof n==="string"?n.length:1)]}function parsePrelude(e){let t="";let n=false;let r=false;for(let i=0;i<e.length;++i){const s=e[i];switch(s[0]){case"#":t+=(t===""?"":r?"\n\n":"\n")+(s.substring(1)||" ");n=true;r=false;break;case"%":if(e[i+1]?.[0]!=="#")i+=1;n=false;break;default:if(!n)r=true;n=false}}return{comment:t,afterEmptyLine:r}}class Composer{constructor(e={}){this.doc=null;this.atDirectives=false;this.prelude=[];this.errors=[];this.warnings=[];this.onError=(e,t,n,r)=>{const i=getErrorPos(e);if(r)this.warnings.push(new s.YAMLWarning(i,t,n));else this.errors.push(new s.YAMLParseError(i,t,n))};this.directives=new r.Directives({version:e.version||"1.2"});this.options=e}decorate(e,t){const{comment:n,afterEmptyLine:r}=parsePrelude(this.prelude);if(n){const i=e.contents;if(t){e.comment=e.comment?`${e.comment}\n${n}`:n}else if(r||e.directives.docStart||!i){e.commentBefore=n}else if(o.isCollection(i)&&!i.flow&&i.items.length>0){let e=i.items[0];if(o.isPair(e))e=e.key;const t=e.commentBefore;e.commentBefore=t?`${n}\n${t}`:n}else{const e=i.commentBefore;i.commentBefore=e?`${n}\n${e}`:n}}if(t){Array.prototype.push.apply(e.errors,this.errors);Array.prototype.push.apply(e.warnings,this.warnings)}else{e.errors=this.errors;e.warnings=this.warnings}this.prelude=[];this.errors=[];this.warnings=[]}streamInfo(){return{comment:parsePrelude(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(e,t=false,n=-1){for(const t of e)yield*this.next(t);yield*this.end(t,n)}*next(e){if(process.env.LOG_STREAM)console.dir(e,{depth:null});switch(e.type){case"directive":this.directives.add(e.source,((t,n,r)=>{const i=getErrorPos(e);i[0]+=t;this.onError(i,"BAD_DIRECTIVE",n,r)}));this.prelude.push(e.source);this.atDirectives=true;break;case"document":{const t=a.composeDoc(this.options,this.directives,e,this.onError);if(this.atDirectives&&!t.directives.docStart)this.onError(e,"MISSING_CHAR","Missing directives-end/doc-start indicator line");this.decorate(t,false);if(this.doc)yield this.doc;this.doc=t;this.atDirectives=false;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(e.source);break;case"error":{const t=e.source?`${e.message}: ${JSON.stringify(e.source)}`:e.message;const n=new s.YAMLParseError(getErrorPos(e),"UNEXPECTED_TOKEN",t);if(this.atDirectives||!this.doc)this.errors.push(n);else this.doc.errors.push(n);break}case"doc-end":{if(!this.doc){const t="Unexpected doc-end without preceding document";this.errors.push(new s.YAMLParseError(getErrorPos(e),"UNEXPECTED_TOKEN",t));break}this.doc.directives.docEnd=true;const t=c.resolveEnd(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);this.decorate(this.doc,true);if(t.comment){const e=this.doc.comment;this.doc.comment=e?`${e}\n${t.comment}`:t.comment}this.doc.range[2]=t.offset;break}default:this.errors.push(new s.YAMLParseError(getErrorPos(e),"UNEXPECTED_TOKEN",`Unsupported token ${e.type}`))}}*end(e=false,t=-1){if(this.doc){this.decorate(this.doc,true);yield this.doc;this.doc=null}else if(e){const e=Object.assign({_directives:this.directives},this.options);const n=new i.Document(undefined,e);if(this.atDirectives)this.onError(t,"MISSING_CHAR","Missing directives-end indicator line");n.range=[0,t,t];this.decorate(n,false);yield n}}}t.Composer=Composer},66478:(e,t,n)=>{"use strict";var r=n(13863);var i=n(54254);var s=n(58974);var o=n(41667);var a=n(8037);var c=n(87564);const u="All mapping items must start at the same column";function resolveBlockMap({composeNode:e,composeEmptyNode:t},n,l,d){const f=new i.YAMLMap(n.schema);if(n.atRoot)n.atRoot=false;let p=l.offset;for(const i of l.items){const{start:h,key:m,sep:g,value:v}=i;const y=s.resolveProps(h,{indicator:"explicit-key-ind",next:m??g?.[0],offset:p,onError:d,startOnNewline:true});const b=!y.found;if(b){if(m){if(m.type==="block-seq")d(p,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key");else if("indent"in m&&m.indent!==l.indent)d(p,"BAD_INDENT",u)}if(!y.anchor&&!y.tag&&!g){if(y.comment){if(f.comment)f.comment+="\n"+y.comment;else f.comment=y.comment}continue}if(y.hasNewlineAfterProp||o.containsNewline(m)){d(m??h[h.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}}else if(y.found?.indent!==l.indent){d(p,"BAD_INDENT",u)}const _=y.end;const S=m?e(n,m,y,d):t(n,_,h,null,y,d);if(n.schema.compat)a.flowIndentCheck(l.indent,m,d);if(c.mapIncludes(n,f.items,S))d(_,"DUPLICATE_KEY","Map keys must be unique");const w=s.resolveProps(g??[],{indicator:"map-value-ind",next:v,offset:S.range[2],onError:d,startOnNewline:!m||m.type==="block-scalar"});p=w.end;if(w.found){if(b){if(v?.type==="block-map"&&!w.hasNewline)d(p,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings");if(n.options.strict&&y.start<w.found.offset-1024)d(S.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key")}const s=v?e(n,v,w,d):t(n,p,g,null,w,d);if(n.schema.compat)a.flowIndentCheck(l.indent,v,d);p=s.range[2];const o=new r.Pair(S,s);if(n.options.keepSourceTokens)o.srcToken=i;f.items.push(o)}else{if(b)d(S.range,"MISSING_CHAR","Implicit map keys need to be followed by map values");if(w.comment){if(S.comment)S.comment+="\n"+w.comment;else S.comment=w.comment}const e=new r.Pair(S);if(n.options.keepSourceTokens)e.srcToken=i;f.items.push(e)}}f.range=[l.offset,p,p];return f}t.resolveBlockMap=resolveBlockMap},34176:(e,t,n)=>{"use strict";var r=n(98281);function resolveBlockScalar(e,t,n){const i=e.offset;const s=parseBlockScalarHeader(e,t,n);if(!s)return{value:"",type:null,comment:"",range:[i,i,i]};const o=s.mode===">"?r.Scalar.BLOCK_FOLDED:r.Scalar.BLOCK_LITERAL;const a=e.source?splitLines(e.source):[];let c=a.length;for(let e=a.length-1;e>=0;--e){const t=a[e][1];if(t===""||t==="\r")c=e;else break}if(c===0){const t=s.chomp==="+"&&a.length>0?"\n".repeat(Math.max(1,a.length-1)):"";let n=i+s.length;if(e.source)n+=e.source.length;return{value:t,type:o,comment:s.comment,range:[i,n,n]}}let u=e.indent+s.indent;let l=e.offset+s.length;let d=0;for(let e=0;e<c;++e){const[t,r]=a[e];if(r===""||r==="\r"){if(s.indent===0&&t.length>u)u=t.length}else{if(t.length<u){const e="Block scalars with more-indented leading empty lines must use an explicit indentation indicator";n(l+t.length,"MISSING_CHAR",e)}if(s.indent===0)u=t.length;d=e;break}l+=t.length+r.length+1}for(let e=a.length-1;e>=c;--e){if(a[e][0].length>u)c=e+1}let f="";let p="";let h=false;for(let e=0;e<d;++e)f+=a[e][0].slice(u)+"\n";for(let e=d;e<c;++e){let[t,i]=a[e];l+=t.length+i.length+1;const c=i[i.length-1]==="\r";if(c)i=i.slice(0,-1);if(i&&t.length<u){const e=s.indent?"explicit indentation indicator":"first line";const r=`Block scalar lines must not be less indented than their ${e}`;n(l-i.length-(c?2:1),"BAD_INDENT",r);t=""}if(o===r.Scalar.BLOCK_LITERAL){f+=p+t.slice(u)+i;p="\n"}else if(t.length>u||i[0]==="\t"){if(p===" ")p="\n";else if(!h&&p==="\n")p="\n\n";f+=p+t.slice(u)+i;p="\n";h=true}else if(i===""){if(p==="\n")f+="\n";else p="\n"}else{f+=p+i;p=" ";h=false}}switch(s.chomp){case"-":break;case"+":for(let e=c;e<a.length;++e)f+="\n"+a[e][0].slice(u);if(f[f.length-1]!=="\n")f+="\n";break;default:f+="\n"}const m=i+s.length+e.source.length;return{value:f,type:o,comment:s.comment,range:[i,m,m]}}function parseBlockScalarHeader({offset:e,props:t},n,r){if(t[0].type!=="block-scalar-header"){r(t[0],"IMPOSSIBLE","Block scalar header not found");return null}const{source:i}=t[0];const s=i[0];let o=0;let a="";let c=-1;for(let t=1;t<i.length;++t){const n=i[t];if(!a&&(n==="-"||n==="+"))a=n;else{const r=Number(n);if(!o&&r)o=r;else if(c===-1)c=e+t}}if(c!==-1)r(c,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${i}`);let u=false;let l="";let d=i.length;for(let e=1;e<t.length;++e){const i=t[e];switch(i.type){case"space":u=true;case"newline":d+=i.source.length;break;case"comment":if(n&&!u){const e="Comments must be separated from other tokens by white space characters";r(i,"MISSING_CHAR",e)}d+=i.source.length;l=i.source.substring(1);break;case"error":r(i,"UNEXPECTED_TOKEN",i.message);d+=i.source.length;break;default:{const e=`Unexpected token in block scalar header: ${i.type}`;r(i,"UNEXPECTED_TOKEN",e);const t=i.source;if(t&&typeof t==="string")d+=t.length}}}return{mode:s,indent:o,chomp:a,comment:l,length:d}}function splitLines(e){const t=e.split(/\n( *)/);const n=t[0];const r=n.match(/^( *)/);const i=r?.[1]?[r[1],n.slice(r[1].length)]:["",n];const s=[i];for(let e=1;e<t.length;e+=2)s.push([t[e],t[e+1]]);return s}t.resolveBlockScalar=resolveBlockScalar},70752:(e,t,n)=>{"use strict";var r=n(74316);var i=n(58974);var s=n(8037);function resolveBlockSeq({composeNode:e,composeEmptyNode:t},n,o,a){const c=new r.YAMLSeq(n.schema);if(n.atRoot)n.atRoot=false;let u=o.offset;for(const{start:r,value:l}of o.items){const d=i.resolveProps(r,{indicator:"seq-item-ind",next:l,offset:u,onError:a,startOnNewline:true});u=d.end;if(!d.found){if(d.anchor||d.tag||l){if(l&&l.type==="block-seq")a(u,"BAD_INDENT","All sequence items must start at the same column");else a(u,"MISSING_CHAR","Sequence item without - indicator")}else{if(d.comment)c.comment=d.comment;continue}}const f=l?e(n,l,d,a):t(n,u,r,null,d,a);if(n.schema.compat)s.flowIndentCheck(o.indent,l,a);u=f.range[2];c.items.push(f)}c.range=[o.offset,u,u];return c}t.resolveBlockSeq=resolveBlockSeq},69909:(e,t)=>{"use strict";function resolveEnd(e,t,n,r){let i="";if(e){let s=false;let o="";for(const a of e){const{source:e,type:c}=a;switch(c){case"space":s=true;break;case"comment":{if(n&&!s)r(a,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const t=e.substring(1)||" ";if(!i)i=t;else i+=o+t;o="";break}case"newline":if(i)o+=e;s=true;break;default:r(a,"UNEXPECTED_TOKEN",`Unexpected ${c} at node end`)}t+=e.length}}return{comment:i,offset:t}}t.resolveEnd=resolveEnd},11004:(e,t,n)=>{"use strict";var r=n(56690);var i=n(13863);var s=n(54254);var o=n(74316);var a=n(69909);var c=n(58974);var u=n(41667);var l=n(87564);const d="Block collections are not allowed within flow collections";const isBlock=e=>e&&(e.type==="block-map"||e.type==="block-seq");function resolveFlowCollection({composeNode:e,composeEmptyNode:t},n,f,p){const h=f.start.source==="{";const m=h?"flow map":"flow sequence";const g=h?new s.YAMLMap(n.schema):new o.YAMLSeq(n.schema);g.flow=true;const v=n.atRoot;if(v)n.atRoot=false;let y=f.offset+f.start.source.length;for(let o=0;o<f.items.length;++o){const a=f.items[o];const{start:v,key:b,sep:_,value:S}=a;const w=c.resolveProps(v,{flow:m,indicator:"explicit-key-ind",next:b??_?.[0],offset:y,onError:p,startOnNewline:false});if(!w.found){if(!w.anchor&&!w.tag&&!_&&!S){if(o===0&&w.comma)p(w.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${m}`);else if(o<f.items.length-1)p(w.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${m}`);if(w.comment){if(g.comment)g.comment+="\n"+w.comment;else g.comment=w.comment}y=w.end;continue}if(!h&&n.options.strict&&u.containsNewline(b))p(b,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(o===0){if(w.comma)p(w.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${m}`)}else{if(!w.comma)p(w.start,"MISSING_CHAR",`Missing , between ${m} items`);if(w.comment){let e="";e:for(const t of v){switch(t.type){case"comma":case"space":break;case"comment":e=t.source.substring(1);break e;default:break e}}if(e){let t=g.items[g.items.length-1];if(r.isPair(t))t=t.value??t.key;if(t.comment)t.comment+="\n"+e;else t.comment=e;w.comment=w.comment.substring(e.length+1)}}}if(!h&&!_&&!w.found){const r=S?e(n,S,w,p):t(n,w.end,_,null,w,p);g.items.push(r);y=r.range[2];if(isBlock(S))p(r.range,"BLOCK_IN_FLOW",d)}else{const r=w.end;const o=b?e(n,b,w,p):t(n,r,v,null,w,p);if(isBlock(b))p(o.range,"BLOCK_IN_FLOW",d);const u=c.resolveProps(_??[],{flow:m,indicator:"map-value-ind",next:S,offset:o.range[2],onError:p,startOnNewline:false});if(u.found){if(!h&&!w.found&&n.options.strict){if(_)for(const e of _){if(e===u.found)break;if(e.type==="newline"){p(e,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}if(w.start<u.found.offset-1024)p(u.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else if(S){if("source"in S&&S.source&&S.source[0]===":")p(S,"MISSING_CHAR",`Missing space after : in ${m}`);else p(u.start,"MISSING_CHAR",`Missing , or : between ${m} items`)}const f=S?e(n,S,u,p):u.found?t(n,u.end,_,null,u,p):null;if(f){if(isBlock(S))p(f.range,"BLOCK_IN_FLOW",d)}else if(u.comment){if(o.comment)o.comment+="\n"+u.comment;else o.comment=u.comment}const T=new i.Pair(o,f);if(n.options.keepSourceTokens)T.srcToken=a;if(h){const e=g;if(l.mapIncludes(n,e.items,o))p(r,"DUPLICATE_KEY","Map keys must be unique");e.items.push(T)}else{const e=new s.YAMLMap(n.schema);e.flow=true;e.items.push(T);g.items.push(e)}y=f?f.range[2]:u.end}}const b=h?"}":"]";const[_,...S]=f.end;let w=y;if(_&&_.source===b)w=_.offset+_.source.length;else{const e=m[0].toUpperCase()+m.substring(1);const t=v?`${e} must end with a ${b}`:`${e} in block collection must be sufficiently indented and end with a ${b}`;p(y,v?"MISSING_CHAR":"BAD_INDENT",t);if(_&&_.source.length!==1)S.unshift(_)}if(S.length>0){const e=a.resolveEnd(S,w,n.options.strict,p);if(e.comment){if(g.comment)g.comment+="\n"+e.comment;else g.comment=e.comment}g.range=[f.offset,w,e.offset]}else{g.range=[f.offset,w,w]}return g}t.resolveFlowCollection=resolveFlowCollection},42928:(e,t,n)=>{"use strict";var r=n(98281);var i=n(69909);function resolveFlowScalar(e,t,n){const{offset:s,type:o,source:a,end:c}=e;let u;let l;const _onError=(e,t,r)=>n(s+e,t,r);switch(o){case"scalar":u=r.Scalar.PLAIN;l=plainValue(a,_onError);break;case"single-quoted-scalar":u=r.Scalar.QUOTE_SINGLE;l=singleQuotedValue(a,_onError);break;case"double-quoted-scalar":u=r.Scalar.QUOTE_DOUBLE;l=doubleQuotedValue(a,_onError);break;default:n(e,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${o}`);return{value:"",type:null,comment:"",range:[s,s+a.length,s+a.length]}}const d=s+a.length;const f=i.resolveEnd(c,d,t,n);return{value:l,type:u,comment:f.comment,range:[s,d,f.offset]}}function plainValue(e,t){let n="";switch(e[0]){case"\t":n="a tab character";break;case",":n="flow indicator character ,";break;case"%":n="directive indicator character %";break;case"|":case">":{n=`block scalar indicator ${e[0]}`;break}case"@":case"`":{n=`reserved character ${e[0]}`;break}}if(n)t(0,"BAD_SCALAR_START",`Plain value cannot start with ${n}`);return foldLines(e)}function singleQuotedValue(e,t){if(e[e.length-1]!=="'"||e.length===1)t(e.length,"MISSING_CHAR","Missing closing 'quote");return foldLines(e.slice(1,-1)).replace(/''/g,"'")}function foldLines(e){let t,n;try{t=new RegExp("(.*?)(?<![ \t])[ \t]*\r?\n","sy");n=new RegExp("[ \t]*(.*?)(?:(?<![ \t])[ \t]*)?\r?\n","sy")}catch(e){t=/(.*?)[ \t]*\r?\n/ys;n=/[ \t]*(.*?)[ \t]*\r?\n/ys}let r=t.exec(e);if(!r)return e;let i=r[1];let s=" ";let o=t.lastIndex;n.lastIndex=o;while(r=n.exec(e)){if(r[1]===""){if(s==="\n")i+=s;else s="\n"}else{i+=s+r[1];s=" "}o=n.lastIndex}const a=/[ \t]*(.*)/ys;a.lastIndex=o;r=a.exec(e);return i+s+(r?.[1]??"")}function doubleQuotedValue(e,t){let n="";for(let r=1;r<e.length-1;++r){const i=e[r];if(i==="\r"&&e[r+1]==="\n")continue;if(i==="\n"){const{fold:t,offset:i}=foldNewline(e,r);n+=t;r=i}else if(i==="\\"){let i=e[++r];const o=s[i];if(o)n+=o;else if(i==="\n"){i=e[r+1];while(i===" "||i==="\t")i=e[++r+1]}else if(i==="\r"&&e[r+1]==="\n"){i=e[++r+1];while(i===" "||i==="\t")i=e[++r+1]}else if(i==="x"||i==="u"||i==="U"){const s={x:2,u:4,U:8}[i];n+=parseCharCode(e,r+1,s,t);r+=s}else{const i=e.substr(r-1,2);t(r-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${i}`);n+=i}}else if(i===" "||i==="\t"){const t=r;let s=e[r+1];while(s===" "||s==="\t")s=e[++r+1];if(s!=="\n"&&!(s==="\r"&&e[r+2]==="\n"))n+=r>t?e.slice(t,r+1):i}else{n+=i}}if(e[e.length-1]!=='"'||e.length===1)t(e.length,"MISSING_CHAR",'Missing closing "quote');return n}function foldNewline(e,t){let n="";let r=e[t+1];while(r===" "||r==="\t"||r==="\n"||r==="\r"){if(r==="\r"&&e[t+2]!=="\n")break;if(r==="\n")n+="\n";t+=1;r=e[t+1]}if(!n)n=" ";return{fold:n,offset:t}}const s={0:"\0",a:"",b:"\b",e:"",f:"\f",n:"\n",r:"\r",t:"\t",v:"\v",N:"Â…",_:"Â ",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","\t":"\t"};function parseCharCode(e,t,n,r){const i=e.substr(t,n);const s=i.length===n&&/^[0-9a-fA-F]+$/.test(i);const o=s?parseInt(i,16):NaN;if(isNaN(o)){const i=e.substr(t-2,n+2);r(t-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${i}`);return i}return String.fromCodePoint(o)}t.resolveFlowScalar=resolveFlowScalar},58974:(e,t)=>{"use strict";function resolveProps(e,{flow:t,indicator:n,next:r,offset:i,onError:s,startOnNewline:o}){let a=false;let c=o;let u=o;let l="";let d="";let f=false;let p=false;let h=false;let m=null;let g=null;let v=null;let y=null;let b=null;for(const r of e){if(h){if(r.type!=="space"&&r.type!=="newline"&&r.type!=="comma")s(r.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space");h=false}switch(r.type){case"space":if(!t&&c&&n!=="doc-start"&&r.source[0]==="\t")s(r,"TAB_AS_INDENT","Tabs are not allowed as indentation");u=true;break;case"comment":{if(!u)s(r,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const e=r.source.substring(1)||" ";if(!l)l=e;else l+=d+e;d="";c=false;break}case"newline":if(c){if(l)l+=r.source;else a=true}else d+=r.source;c=true;f=true;if(m||g)p=true;u=true;break;case"anchor":if(m)s(r,"MULTIPLE_ANCHORS","A node can have at most one anchor");if(r.source.endsWith(":"))s(r.offset+r.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",true);m=r;if(b===null)b=r.offset;c=false;u=false;h=true;break;case"tag":{if(g)s(r,"MULTIPLE_TAGS","A node can have at most one tag");g=r;if(b===null)b=r.offset;c=false;u=false;h=true;break}case n:if(m||g)s(r,"BAD_PROP_ORDER",`Anchors and tags must be after the ${r.source} indicator`);if(y)s(r,"UNEXPECTED_TOKEN",`Unexpected ${r.source} in ${t??"collection"}`);y=r;c=false;u=false;break;case"comma":if(t){if(v)s(r,"UNEXPECTED_TOKEN",`Unexpected , in ${t}`);v=r;c=false;u=false;break}default:s(r,"UNEXPECTED_TOKEN",`Unexpected ${r.type} token`);c=false;u=false}}const _=e[e.length-1];const S=_?_.offset+_.source.length:i;if(h&&r&&r.type!=="space"&&r.type!=="newline"&&r.type!=="comma"&&(r.type!=="scalar"||r.source!==""))s(r.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space");return{comma:v,found:y,spaceBefore:a,comment:l,hasNewline:f,hasNewlineAfterProp:p,anchor:m,tag:g,end:S,start:b??S}}t.resolveProps=resolveProps},41667:(e,t)=>{"use strict";function containsNewline(e){if(!e)return null;switch(e.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(e.source.includes("\n"))return true;if(e.end)for(const t of e.end)if(t.type==="newline")return true;return false;case"flow-collection":for(const t of e.items){for(const e of t.start)if(e.type==="newline")return true;if(t.sep)for(const e of t.sep)if(e.type==="newline")return true;if(containsNewline(t.key)||containsNewline(t.value))return true}return false;default:return true}}t.containsNewline=containsNewline},67863:(e,t)=>{"use strict";function emptyScalarPosition(e,t,n){if(t){if(n===null)n=t.length;for(let r=n-1;r>=0;--r){let n=t[r];switch(n.type){case"space":case"comment":case"newline":e-=n.source.length;continue}n=t[++r];while(n?.type==="space"){e+=n.source.length;n=t[++r]}break}}return e}t.emptyScalarPosition=emptyScalarPosition},8037:(e,t,n)=>{"use strict";var r=n(41667);function flowIndentCheck(e,t,n){if(t?.type==="flow-collection"){const i=t.end[0];if(i.indent===e&&(i.source==="]"||i.source==="}")&&r.containsNewline(t)){const e="Flow end indicator should be more indented than parent";n(i,"BAD_INDENT",e,true)}}}t.flowIndentCheck=flowIndentCheck},87564:(e,t,n)=>{"use strict";var r=n(56690);function mapIncludes(e,t,n){const{uniqueKeys:i}=e.options;if(i===false)return false;const s=typeof i==="function"?i:(t,n)=>t===n||r.isScalar(t)&&r.isScalar(n)&&t.value===n.value&&!(t.value==="<<"&&e.schema.merge);return t.some((e=>s(e.key,n)))}t.mapIncludes=mapIncludes},6759:(e,t,n)=>{"use strict";var r=n(23861);var i=n(92480);var s=n(56690);var o=n(13863);var a=n(22943);var c=n(6169);var u=n(22399);var l=n(99559);var d=n(57973);var f=n(51940);var p=n(23627);var h=n(91245);class Document{constructor(e,t,n){this.commentBefore=null;this.comment=null;this.errors=[];this.warnings=[];Object.defineProperty(this,s.NODE_TYPE,{value:s.DOC});let r=null;if(typeof t==="function"||Array.isArray(t)){r=t}else if(n===undefined&&t){n=t;t=undefined}const i=Object.assign({intAsBigInt:false,keepSourceTokens:false,logLevel:"warn",prettyErrors:true,strict:true,uniqueKeys:true,version:"1.2"},n);this.options=i;let{version:o}=i;if(n?._directives){this.directives=n._directives.atDocument();if(this.directives.yaml.explicit)o=this.directives.yaml.version}else this.directives=new h.Directives({version:o});this.setSchema(o,n);if(e===undefined)this.contents=null;else{this.contents=this.createNode(e,r,n)}}clone(){const e=Object.create(Document.prototype,{[s.NODE_TYPE]:{value:s.DOC}});e.commentBefore=this.commentBefore;e.comment=this.comment;e.errors=this.errors.slice();e.warnings=this.warnings.slice();e.options=Object.assign({},this.options);if(this.directives)e.directives=this.directives.clone();e.schema=this.schema.clone();e.contents=s.isNode(this.contents)?this.contents.clone(e.schema):this.contents;if(this.range)e.range=this.range.slice();return e}add(e){if(assertCollection(this.contents))this.contents.add(e)}addIn(e,t){if(assertCollection(this.contents))this.contents.addIn(e,t)}createAlias(e,t){if(!e.anchor){const n=d.anchorNames(this);e.anchor=!t||n.has(t)?d.findNewAnchor(t||"a",n):t}return new r.Alias(e.anchor)}createNode(e,t,n){let r=undefined;if(typeof t==="function"){e=t.call({"":e},"",e);r=t}else if(Array.isArray(t)){const keyToStr=e=>typeof e==="number"||e instanceof String||e instanceof Number;const e=t.filter(keyToStr).map(String);if(e.length>0)t=t.concat(e);r=t}else if(n===undefined&&t){n=t;t=undefined}const{aliasDuplicateObjects:i,anchorPrefix:o,flow:a,keepUndefined:c,onTagObj:u,tag:l}=n??{};const{onAnchor:f,setAnchors:h,sourceObjects:m}=d.createNodeAnchors(this,o||"a");const g={aliasDuplicateObjects:i??true,keepUndefined:c??false,onAnchor:f,onTagObj:u,replacer:r,schema:this.schema,sourceObjects:m};const v=p.createNode(e,l,g);if(a&&s.isCollection(v))v.flow=true;h();return v}createPair(e,t,n={}){const r=this.createNode(e,null,n);const i=this.createNode(t,null,n);return new o.Pair(r,i)}delete(e){return assertCollection(this.contents)?this.contents.delete(e):false}deleteIn(e){if(i.isEmptyPath(e)){if(this.contents==null)return false;this.contents=null;return true}return assertCollection(this.contents)?this.contents.deleteIn(e):false}get(e,t){return s.isCollection(this.contents)?this.contents.get(e,t):undefined}getIn(e,t){if(i.isEmptyPath(e))return!t&&s.isScalar(this.contents)?this.contents.value:this.contents;return s.isCollection(this.contents)?this.contents.getIn(e,t):undefined}has(e){return s.isCollection(this.contents)?this.contents.has(e):false}hasIn(e){if(i.isEmptyPath(e))return this.contents!==undefined;return s.isCollection(this.contents)?this.contents.hasIn(e):false}set(e,t){if(this.contents==null){this.contents=i.collectionFromPath(this.schema,[e],t)}else if(assertCollection(this.contents)){this.contents.set(e,t)}}setIn(e,t){if(i.isEmptyPath(e))this.contents=t;else if(this.contents==null){this.contents=i.collectionFromPath(this.schema,Array.from(e),t)}else if(assertCollection(this.contents)){this.contents.setIn(e,t)}}setSchema(e,t={}){if(typeof e==="number")e=String(e);let n;switch(e){case"1.1":if(this.directives)this.directives.yaml.version="1.1";else this.directives=new h.Directives({version:"1.1"});n={merge:true,resolveKnownTags:false,schema:"yaml-1.1"};break;case"1.2":case"next":if(this.directives)this.directives.yaml.version=e;else this.directives=new h.Directives({version:e});n={merge:false,resolveKnownTags:true,schema:"core"};break;case null:if(this.directives)delete this.directives;n=null;break;default:{const t=JSON.stringify(e);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${t}`)}}if(t.schema instanceof Object)this.schema=t.schema;else if(n)this.schema=new c.Schema(Object.assign(n,t));else throw new Error(`With a null YAML version, the { schema: Schema } option is required`)}toJS({json:e,jsonArg:t,mapAsMap:n,maxAliasCount:r,onAnchor:i,reviver:s}={}){const o={anchors:new Map,doc:this,keep:!e,mapAsMap:n===true,mapKeyWarned:false,maxAliasCount:typeof r==="number"?r:100,stringify:u.stringify};const c=a.toJS(this.contents,t??"",o);if(typeof i==="function")for(const{count:e,res:t}of o.anchors.values())i(t,e);return typeof s==="function"?f.applyReviver(s,{"":c},"",c):c}toJSON(e,t){return this.toJS({json:true,jsonArg:e,mapAsMap:false,onAnchor:t})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){const t=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${t}`)}return l.stringifyDocument(this,e)}}function assertCollection(e){if(s.isCollection(e))return true;throw new Error("Expected a YAML collection as document contents")}t.Document=Document},57973:(e,t,n)=>{"use strict";var r=n(56690);var i=n(4315);function anchorIsValid(e){if(/[\x00-\x19\s,[\]{}]/.test(e)){const t=JSON.stringify(e);const n=`Anchor must not contain whitespace or control characters: ${t}`;throw new Error(n)}return true}function anchorNames(e){const t=new Set;i.visit(e,{Value(e,n){if(n.anchor)t.add(n.anchor)}});return t}function findNewAnchor(e,t){for(let n=1;true;++n){const r=`${e}${n}`;if(!t.has(r))return r}}function createNodeAnchors(e,t){const n=[];const i=new Map;let s=null;return{onAnchor:r=>{n.push(r);if(!s)s=anchorNames(e);const i=findNewAnchor(t,s);s.add(i);return i},setAnchors:()=>{for(const e of n){const t=i.get(e);if(typeof t==="object"&&t.anchor&&(r.isScalar(t.node)||r.isCollection(t.node))){t.node.anchor=t.anchor}else{const t=new Error("Failed to resolve repeated object (this should not happen)");t.source=e;throw t}}},sourceObjects:i}}t.anchorIsValid=anchorIsValid;t.anchorNames=anchorNames;t.createNodeAnchors=createNodeAnchors;t.findNewAnchor=findNewAnchor},51940:(e,t)=>{"use strict";function applyReviver(e,t,n,r){if(r&&typeof r==="object"){if(Array.isArray(r)){for(let t=0,n=r.length;t<n;++t){const n=r[t];const i=applyReviver(e,r,String(t),n);if(i===undefined)delete r[t];else if(i!==n)r[t]=i}}else if(r instanceof Map){for(const t of Array.from(r.keys())){const n=r.get(t);const i=applyReviver(e,r,t,n);if(i===undefined)r.delete(t);else if(i!==n)r.set(t,i)}}else if(r instanceof Set){for(const t of Array.from(r)){const n=applyReviver(e,r,t,t);if(n===undefined)r.delete(t);else if(n!==t){r.delete(t);r.add(n)}}}else{for(const[t,n]of Object.entries(r)){const i=applyReviver(e,r,t,n);if(i===undefined)delete r[t];else if(i!==n)r[t]=i}}}return e.call(t,n,r)}t.applyReviver=applyReviver},23627:(e,t,n)=>{"use strict";var r=n(23861);var i=n(56690);var s=n(98281);const o="tag:yaml.org,2002:";function findTagObject(e,t,n){if(t){const e=n.filter((e=>e.tag===t));const r=e.find((e=>!e.format))??e[0];if(!r)throw new Error(`Tag ${t} not found`);return r}return n.find((t=>t.identify?.(e)&&!t.format))}function createNode(e,t,n){if(i.isDocument(e))e=e.contents;if(i.isNode(e))return e;if(i.isPair(e)){const t=n.schema[i.MAP].createNode?.(n.schema,null,n);t.items.push(e);return t}if(e instanceof String||e instanceof Number||e instanceof Boolean||typeof BigInt==="function"&&e instanceof BigInt){e=e.valueOf()}const{aliasDuplicateObjects:a,onAnchor:c,onTagObj:u,schema:l,sourceObjects:d}=n;let f=undefined;if(a&&e&&typeof e==="object"){f=d.get(e);if(f){if(!f.anchor)f.anchor=c(e);return new r.Alias(f.anchor)}else{f={anchor:null,node:null};d.set(e,f)}}if(t?.startsWith("!!"))t=o+t.slice(2);let p=findTagObject(e,t,l.tags);if(!p){if(e&&typeof e.toJSON==="function"){e=e.toJSON()}if(!e||typeof e!=="object"){const t=new s.Scalar(e);if(f)f.node=t;return t}p=e instanceof Map?l[i.MAP]:Symbol.iterator in Object(e)?l[i.SEQ]:l[i.MAP]}if(u){u(p);delete n.onTagObj}const h=p?.createNode?p.createNode(n.schema,e,n):new s.Scalar(e);if(t)h.tag=t;if(f)f.node=h;return h}t.createNode=createNode},91245:(e,t,n)=>{"use strict";var r=n(56690);var i=n(4315);const s={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"};const escapeTagName=e=>e.replace(/[!,[\]{}]/g,(e=>s[e]));class Directives{constructor(e,t){this.docStart=null;this.docEnd=false;this.yaml=Object.assign({},Directives.defaultYaml,e);this.tags=Object.assign({},Directives.defaultTags,t)}clone(){const e=new Directives(this.yaml,this.tags);e.docStart=this.docStart;return e}atDocument(){const e=new Directives(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=true;break;case"1.2":this.atNextDocument=false;this.yaml={explicit:Directives.defaultYaml.explicit,version:"1.2"};this.tags=Object.assign({},Directives.defaultTags);break}return e}add(e,t){if(this.atNextDocument){this.yaml={explicit:Directives.defaultYaml.explicit,version:"1.1"};this.tags=Object.assign({},Directives.defaultTags);this.atNextDocument=false}const n=e.trim().split(/[ \t]+/);const r=n.shift();switch(r){case"%TAG":{if(n.length!==2){t(0,"%TAG directive should contain exactly two parts");if(n.length<2)return false}const[e,r]=n;this.tags[e]=r;return true}case"%YAML":{this.yaml.explicit=true;if(n.length!==1){t(0,"%YAML directive should contain exactly one part");return false}const[e]=n;if(e==="1.1"||e==="1.2"){this.yaml.version=e;return true}else{const n=/^\d+\.\d+$/.test(e);t(6,`Unsupported YAML version ${e}`,n);return false}}default:t(0,`Unknown directive ${r}`,true);return false}}tagName(e,t){if(e==="!")return"!";if(e[0]!=="!"){t(`Not a valid tag: ${e}`);return null}if(e[1]==="<"){const n=e.slice(2,-1);if(n==="!"||n==="!!"){t(`Verbatim tags aren't resolved, so ${e} is invalid.`);return null}if(e[e.length-1]!==">")t("Verbatim tags must end with a >");return n}const[,n,r]=e.match(/^(.*!)([^!]*)$/);if(!r)t(`The ${e} tag has no suffix`);const i=this.tags[n];if(i)return i+decodeURIComponent(r);if(n==="!")return e;t(`Could not resolve tag: ${e}`);return null}tagString(e){for(const[t,n]of Object.entries(this.tags)){if(e.startsWith(n))return t+escapeTagName(e.substring(n.length))}return e[0]==="!"?e:`!<${e}>`}toString(e){const t=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[];const n=Object.entries(this.tags);let s;if(e&&n.length>0&&r.isNode(e.contents)){const t={};i.visit(e.contents,((e,n)=>{if(r.isNode(n)&&n.tag)t[n.tag]=true}));s=Object.keys(t)}else s=[];for(const[r,i]of n){if(r==="!!"&&i==="tag:yaml.org,2002:")continue;if(!e||s.some((e=>e.startsWith(i))))t.push(`%TAG ${r} ${i}`)}return t.join("\n")}}Directives.defaultYaml={explicit:false,version:"1.2"};Directives.defaultTags={"!!":"tag:yaml.org,2002:"};t.Directives=Directives},29341:(e,t)=>{"use strict";class YAMLError extends Error{constructor(e,t,n,r){super();this.name=e;this.code=n;this.message=r;this.pos=t}}class YAMLParseError extends YAMLError{constructor(e,t,n){super("YAMLParseError",e,t,n)}}class YAMLWarning extends YAMLError{constructor(e,t,n){super("YAMLWarning",e,t,n)}}const prettifyError=(e,t)=>n=>{if(n.pos[0]===-1)return;n.linePos=n.pos.map((e=>t.linePos(e)));const{line:r,col:i}=n.linePos[0];n.message+=` at line ${r}, column ${i}`;let s=i-1;let o=e.substring(t.lineStarts[r-1],t.lineStarts[r]).replace(/[\n\r]+$/,"");if(s>=60&&o.length>80){const e=Math.min(s-39,o.length-79);o="â€¦"+o.substring(e);s-=e-1}if(o.length>80)o=o.substring(0,79)+"â€¦";if(r>1&&/^ *$/.test(o.substring(0,s))){let n=e.substring(t.lineStarts[r-2],t.lineStarts[r-1]);if(n.length>80)n=n.substring(0,79)+"â€¦\n";o=n+o}if(/[^ ]/.test(o)){let e=1;const t=n.linePos[1];if(t&&t.line===r&&t.col>i){e=Math.min(t.col-i,80-s)}const a=" ".repeat(s)+"^".repeat(e);n.message+=`:\n\n${o}\n${a}\n`}};t.YAMLError=YAMLError;t.YAMLParseError=YAMLParseError;t.YAMLWarning=YAMLWarning;t.prettifyError=prettifyError},69329:(e,t,n)=>{"use strict";var r=n(44964);var i=n(6759);var s=n(6169);var o=n(29341);var a=n(23861);var c=n(56690);var u=n(13863);var l=n(98281);var d=n(54254);var f=n(74316);var p=n(79358);var h=n(18701);var m=n(59690);var g=n(61501);var v=n(52923);var y=n(4315);t.Composer=r.Composer;t.Document=i.Document;t.Schema=s.Schema;t.YAMLError=o.YAMLError;t.YAMLParseError=o.YAMLParseError;t.YAMLWarning=o.YAMLWarning;t.Alias=a.Alias;t.isAlias=c.isAlias;t.isCollection=c.isCollection;t.isDocument=c.isDocument;t.isMap=c.isMap;t.isNode=c.isNode;t.isPair=c.isPair;t.isScalar=c.isScalar;t.isSeq=c.isSeq;t.Pair=u.Pair;t.Scalar=l.Scalar;t.YAMLMap=d.YAMLMap;t.YAMLSeq=f.YAMLSeq;t.CST=p;t.Lexer=h.Lexer;t.LineCounter=m.LineCounter;t.Parser=g.Parser;t.parse=v.parse;t.parseAllDocuments=v.parseAllDocuments;t.parseDocument=v.parseDocument;t.stringify=v.stringify;t.visit=y.visit;t.visitAsync=y.visitAsync},44254:(e,t)=>{"use strict";function debug(e,...t){if(e==="debug")console.log(...t)}function warn(e,t){if(e==="debug"||e==="warn"){if(typeof process!=="undefined"&&process.emitWarning)process.emitWarning(t);else console.warn(t)}}t.debug=debug;t.warn=warn},23861:(e,t,n)=>{"use strict";var r=n(57973);var i=n(4315);var s=n(56690);class Alias extends s.NodeBase{constructor(e){super(s.ALIAS);this.source=e;Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e){let t=undefined;i.visit(e,{Node:(e,n)=>{if(n===this)return i.visit.BREAK;if(n.anchor===this.source)t=n}});return t}toJSON(e,t){if(!t)return{source:this.source};const{anchors:n,doc:r,maxAliasCount:i}=t;const s=this.resolve(r);if(!s){const e=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(e)}const o=n.get(s);if(!o||o.res===undefined){const e="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(e)}if(i>=0){o.count+=1;if(o.aliasCount===0)o.aliasCount=getAliasCount(r,s,n);if(o.count*o.aliasCount>i){const e="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(e)}}return o.res}toString(e,t,n){const i=`*${this.source}`;if(e){r.anchorIsValid(this.source);if(e.options.verifyAliasOrder&&!e.anchors.has(this.source)){const e=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(e)}if(e.implicitKey)return`${i} `}return i}}function getAliasCount(e,t,n){if(s.isAlias(t)){const r=t.resolve(e);const i=n&&r&&n.get(r);return i?i.count*i.aliasCount:0}else if(s.isCollection(t)){let r=0;for(const i of t.items){const t=getAliasCount(e,i,n);if(t>r)r=t}return r}else if(s.isPair(t)){const r=getAliasCount(e,t.key,n);const i=getAliasCount(e,t.value,n);return Math.max(r,i)}return 1}t.Alias=Alias},92480:(e,t,n)=>{"use strict";var r=n(23627);var i=n(56690);function collectionFromPath(e,t,n){let i=n;for(let e=t.length-1;e>=0;--e){const n=t[e];if(typeof n==="number"&&Number.isInteger(n)&&n>=0){const e=[];e[n]=i;i=e}else{i=new Map([[n,i]])}}return r.createNode(i,undefined,{aliasDuplicateObjects:false,keepUndefined:false,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:e,sourceObjects:new Map})}const isEmptyPath=e=>e==null||typeof e==="object"&&!!e[Symbol.iterator]().next().done;class Collection extends i.NodeBase{constructor(e,t){super(e);Object.defineProperty(this,"schema",{value:t,configurable:true,enumerable:false,writable:true})}clone(e){const t=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));if(e)t.schema=e;t.items=t.items.map((t=>i.isNode(t)||i.isPair(t)?t.clone(e):t));if(this.range)t.range=this.range.slice();return t}addIn(e,t){if(isEmptyPath(e))this.add(t);else{const[n,...r]=e;const s=this.get(n,true);if(i.isCollection(s))s.addIn(r,t);else if(s===undefined&&this.schema)this.set(n,collectionFromPath(this.schema,r,t));else throw new Error(`Expected YAML collection at ${n}. Remaining path: ${r}`)}}deleteIn(e){const[t,...n]=e;if(n.length===0)return this.delete(t);const r=this.get(t,true);if(i.isCollection(r))return r.deleteIn(n);else throw new Error(`Expected YAML collection at ${t}. Remaining path: ${n}`)}getIn(e,t){const[n,...r]=e;const s=this.get(n,true);if(r.length===0)return!t&&i.isScalar(s)?s.value:s;else return i.isCollection(s)?s.getIn(r,t):undefined}hasAllNullValues(e){return this.items.every((t=>{if(!i.isPair(t))return false;const n=t.value;return n==null||e&&i.isScalar(n)&&n.value==null&&!n.commentBefore&&!n.comment&&!n.tag}))}hasIn(e){const[t,...n]=e;if(n.length===0)return this.has(t);const r=this.get(t,true);return i.isCollection(r)?r.hasIn(n):false}setIn(e,t){const[n,...r]=e;if(r.length===0){this.set(n,t)}else{const e=this.get(n,true);if(i.isCollection(e))e.setIn(r,t);else if(e===undefined&&this.schema)this.set(n,collectionFromPath(this.schema,r,t));else throw new Error(`Expected YAML collection at ${n}. Remaining path: ${r}`)}}}Collection.maxFlowStringSingleLineLength=60;t.Collection=Collection;t.collectionFromPath=collectionFromPath;t.isEmptyPath=isEmptyPath},56690:(e,t)=>{"use strict";const n=Symbol.for("yaml.alias");const r=Symbol.for("yaml.document");const i=Symbol.for("yaml.map");const s=Symbol.for("yaml.pair");const o=Symbol.for("yaml.scalar");const a=Symbol.for("yaml.seq");const c=Symbol.for("yaml.node.type");const isAlias=e=>!!e&&typeof e==="object"&&e[c]===n;const isDocument=e=>!!e&&typeof e==="object"&&e[c]===r;const isMap=e=>!!e&&typeof e==="object"&&e[c]===i;const isPair=e=>!!e&&typeof e==="object"&&e[c]===s;const isScalar=e=>!!e&&typeof e==="object"&&e[c]===o;const isSeq=e=>!!e&&typeof e==="object"&&e[c]===a;function isCollection(e){if(e&&typeof e==="object")switch(e[c]){case i:case a:return true}return false}function isNode(e){if(e&&typeof e==="object")switch(e[c]){case n:case i:case o:case a:return true}return false}const hasAnchor=e=>(isScalar(e)||isCollection(e))&&!!e.anchor;class NodeBase{constructor(e){Object.defineProperty(this,c,{value:e})}clone(){const e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));if(this.range)e.range=this.range.slice();return e}}t.ALIAS=n;t.DOC=r;t.MAP=i;t.NODE_TYPE=c;t.NodeBase=NodeBase;t.PAIR=s;t.SCALAR=o;t.SEQ=a;t.hasAnchor=hasAnchor;t.isAlias=isAlias;t.isCollection=isCollection;t.isDocument=isDocument;t.isMap=isMap;t.isNode=isNode;t.isPair=isPair;t.isScalar=isScalar;t.isSeq=isSeq},13863:(e,t,n)=>{"use strict";var r=n(23627);var i=n(24137);var s=n(47536);var o=n(56690);function createPair(e,t,n){const i=r.createNode(e,undefined,n);const s=r.createNode(t,undefined,n);return new Pair(i,s)}class Pair{constructor(e,t=null){Object.defineProperty(this,o.NODE_TYPE,{value:o.PAIR});this.key=e;this.value=t}clone(e){let{key:t,value:n}=this;if(o.isNode(t))t=t.clone(e);if(o.isNode(n))n=n.clone(e);return new Pair(t,n)}toJSON(e,t){const n=t?.mapAsMap?new Map:{};return s.addPairToJSMap(t,n,this)}toString(e,t,n){return e?.doc?i.stringifyPair(this,e,t,n):JSON.stringify(this)}}t.Pair=Pair;t.createPair=createPair},98281:(e,t,n)=>{"use strict";var r=n(56690);var i=n(22943);const isScalarValue=e=>!e||typeof e!=="function"&&typeof e!=="object";class Scalar extends r.NodeBase{constructor(e){super(r.SCALAR);this.value=e}toJSON(e,t){return t?.keep?this.value:i.toJS(this.value,e,t)}toString(){return String(this.value)}}Scalar.BLOCK_FOLDED="BLOCK_FOLDED";Scalar.BLOCK_LITERAL="BLOCK_LITERAL";Scalar.PLAIN="PLAIN";Scalar.QUOTE_DOUBLE="QUOTE_DOUBLE";Scalar.QUOTE_SINGLE="QUOTE_SINGLE";t.Scalar=Scalar;t.isScalarValue=isScalarValue},54254:(e,t,n)=>{"use strict";var r=n(77969);var i=n(47536);var s=n(92480);var o=n(56690);var a=n(13863);var c=n(98281);function findPair(e,t){const n=o.isScalar(t)?t.value:t;for(const r of e){if(o.isPair(r)){if(r.key===t||r.key===n)return r;if(o.isScalar(r.key)&&r.key.value===n)return r}}return undefined}class YAMLMap extends s.Collection{constructor(e){super(o.MAP,e);this.items=[]}static get tagName(){return"tag:yaml.org,2002:map"}add(e,t){let n;if(o.isPair(e))n=e;else if(!e||typeof e!=="object"||!("key"in e)){n=new a.Pair(e,e?.value)}else n=new a.Pair(e.key,e.value);const r=findPair(this.items,n.key);const i=this.schema?.sortMapEntries;if(r){if(!t)throw new Error(`Key ${n.key} already set`);if(o.isScalar(r.value)&&c.isScalarValue(n.value))r.value.value=n.value;else r.value=n.value}else if(i){const e=this.items.findIndex((e=>i(n,e)<0));if(e===-1)this.items.push(n);else this.items.splice(e,0,n)}else{this.items.push(n)}}delete(e){const t=findPair(this.items,e);if(!t)return false;const n=this.items.splice(this.items.indexOf(t),1);return n.length>0}get(e,t){const n=findPair(this.items,e);const r=n?.value;return(!t&&o.isScalar(r)?r.value:r)??undefined}has(e){return!!findPair(this.items,e)}set(e,t){this.add(new a.Pair(e,t),true)}toJSON(e,t,n){const r=n?new n:t?.mapAsMap?new Map:{};if(t?.onCreate)t.onCreate(r);for(const e of this.items)i.addPairToJSMap(t,r,e);return r}toString(e,t,n){if(!e)return JSON.stringify(this);for(const e of this.items){if(!o.isPair(e))throw new Error(`Map items must all be pairs; found ${JSON.stringify(e)} instead`)}if(!e.allNullValues&&this.hasAllNullValues(false))e=Object.assign({},e,{allNullValues:true});return r.stringifyCollection(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:n,onComment:t})}}t.YAMLMap=YAMLMap;t.findPair=findPair},74316:(e,t,n)=>{"use strict";var r=n(77969);var i=n(92480);var s=n(56690);var o=n(98281);var a=n(22943);class YAMLSeq extends i.Collection{constructor(e){super(s.SEQ,e);this.items=[]}static get tagName(){return"tag:yaml.org,2002:seq"}add(e){this.items.push(e)}delete(e){const t=asItemIndex(e);if(typeof t!=="number")return false;const n=this.items.splice(t,1);return n.length>0}get(e,t){const n=asItemIndex(e);if(typeof n!=="number")return undefined;const r=this.items[n];return!t&&s.isScalar(r)?r.value:r}has(e){const t=asItemIndex(e);return typeof t==="number"&&t<this.items.length}set(e,t){const n=asItemIndex(e);if(typeof n!=="number")throw new Error(`Expected a valid index, not ${e}.`);const r=this.items[n];if(s.isScalar(r)&&o.isScalarValue(t))r.value=t;else this.items[n]=t}toJSON(e,t){const n=[];if(t?.onCreate)t.onCreate(n);let r=0;for(const e of this.items)n.push(a.toJS(e,String(r++),t));return n}toString(e,t,n){if(!e)return JSON.stringify(this);return r.stringifyCollection(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:n,onComment:t})}}function asItemIndex(e){let t=s.isScalar(e)?e.value:e;if(t&&typeof t==="string")t=Number(t);return typeof t==="number"&&Number.isInteger(t)&&t>=0?t:null}t.YAMLSeq=YAMLSeq},47536:(e,t,n)=>{"use strict";var r=n(44254);var i=n(22399);var s=n(56690);var o=n(98281);var a=n(22943);const c="<<";function addPairToJSMap(e,t,{key:n,value:r}){if(e?.doc.schema.merge&&isMergeKey(n)){r=s.isAlias(r)?r.resolve(e.doc):r;if(s.isSeq(r))for(const n of r.items)mergeToJSMap(e,t,n);else if(Array.isArray(r))for(const n of r)mergeToJSMap(e,t,n);else mergeToJSMap(e,t,r)}else{const i=a.toJS(n,"",e);if(t instanceof Map){t.set(i,a.toJS(r,i,e))}else if(t instanceof Set){t.add(i)}else{const s=stringifyKey(n,i,e);const o=a.toJS(r,s,e);if(s in t)Object.defineProperty(t,s,{value:o,writable:true,enumerable:true,configurable:true});else t[s]=o}}return t}const isMergeKey=e=>e===c||s.isScalar(e)&&e.value===c&&(!e.type||e.type===o.Scalar.PLAIN);function mergeToJSMap(e,t,n){const r=e&&s.isAlias(n)?n.resolve(e.doc):n;if(!s.isMap(r))throw new Error("Merge sources must be maps or map aliases");const i=r.toJSON(null,e,Map);for(const[e,n]of i){if(t instanceof Map){if(!t.has(e))t.set(e,n)}else if(t instanceof Set){t.add(e)}else if(!Object.prototype.hasOwnProperty.call(t,e)){Object.defineProperty(t,e,{value:n,writable:true,enumerable:true,configurable:true})}}return t}function stringifyKey(e,t,n){if(t===null)return"";if(typeof t!=="object")return String(t);if(s.isNode(e)&&n&&n.doc){const t=i.createStringifyContext(n.doc,{});t.anchors=new Set;for(const e of n.anchors.keys())t.anchors.add(e.anchor);t.inFlow=true;t.inStringifyKey=true;const s=e.toString(t);if(!n.mapKeyWarned){let e=JSON.stringify(s);if(e.length>40)e=e.substring(0,36)+'..."';r.warn(n.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${e}. Set mapAsMap: true to use object keys.`);n.mapKeyWarned=true}return s}return JSON.stringify(t)}t.addPairToJSMap=addPairToJSMap},22943:(e,t,n)=>{"use strict";var r=n(56690);function toJS(e,t,n){if(Array.isArray(e))return e.map(((e,t)=>toJS(e,String(t),n)));if(e&&typeof e.toJSON==="function"){if(!n||!r.hasAnchor(e))return e.toJSON(t,n);const i={aliasCount:0,count:1,res:undefined};n.anchors.set(e,i);n.onCreate=e=>{i.res=e;delete n.onCreate};const s=e.toJSON(t,n);if(n.onCreate)n.onCreate(s);return s}if(typeof e==="bigint"&&!n?.keep)return Number(e);return e}t.toJS=toJS},57194:(e,t,n)=>{"use strict";var r=n(34176);var i=n(42928);var s=n(29341);var o=n(92319);function resolveAsScalar(e,t=true,n){if(e){const _onError=(e,t,r)=>{const i=typeof e==="number"?e:Array.isArray(e)?e[0]:e.offset;if(n)n(i,t,r);else throw new s.YAMLParseError([i,i+1],t,r)};switch(e.type){case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return i.resolveFlowScalar(e,t,_onError);case"block-scalar":return r.resolveBlockScalar(e,t,_onError)}}return null}function createScalarToken(e,t){const{implicitKey:n=false,indent:r,inFlow:i=false,offset:s=-1,type:a="PLAIN"}=t;const c=o.stringifyString({type:a,value:e},{implicitKey:n,indent:r>0?" ".repeat(r):"",inFlow:i,options:{blockQuote:true,lineWidth:-1}});const u=t.end??[{type:"newline",offset:-1,indent:r,source:"\n"}];switch(c[0]){case"|":case">":{const e=c.indexOf("\n");const t=c.substring(0,e);const n=c.substring(e+1)+"\n";const i=[{type:"block-scalar-header",offset:s,indent:r,source:t}];if(!addEndtoBlockProps(i,u))i.push({type:"newline",offset:-1,indent:r,source:"\n"});return{type:"block-scalar",offset:s,indent:r,props:i,source:n}}case'"':return{type:"double-quoted-scalar",offset:s,indent:r,source:c,end:u};case"'":return{type:"single-quoted-scalar",offset:s,indent:r,source:c,end:u};default:return{type:"scalar",offset:s,indent:r,source:c,end:u}}}function setScalarValue(e,t,n={}){let{afterKey:r=false,implicitKey:i=false,inFlow:s=false,type:a}=n;let c="indent"in e?e.indent:null;if(r&&typeof c==="number")c+=2;if(!a)switch(e.type){case"single-quoted-scalar":a="QUOTE_SINGLE";break;case"double-quoted-scalar":a="QUOTE_DOUBLE";break;case"block-scalar":{const t=e.props[0];if(t.type!=="block-scalar-header")throw new Error("Invalid block scalar header");a=t.source[0]===">"?"BLOCK_FOLDED":"BLOCK_LITERAL";break}default:a="PLAIN"}const u=o.stringifyString({type:a,value:t},{implicitKey:i||c===null,indent:c!==null&&c>0?" ".repeat(c):"",inFlow:s,options:{blockQuote:true,lineWidth:-1}});switch(u[0]){case"|":case">":setBlockScalarValue(e,u);break;case'"':setFlowScalarValue(e,u,"double-quoted-scalar");break;case"'":setFlowScalarValue(e,u,"single-quoted-scalar");break;default:setFlowScalarValue(e,u,"scalar")}}function setBlockScalarValue(e,t){const n=t.indexOf("\n");const r=t.substring(0,n);const i=t.substring(n+1)+"\n";if(e.type==="block-scalar"){const t=e.props[0];if(t.type!=="block-scalar-header")throw new Error("Invalid block scalar header");t.source=r;e.source=i}else{const{offset:t}=e;const n="indent"in e?e.indent:-1;const s=[{type:"block-scalar-header",offset:t,indent:n,source:r}];if(!addEndtoBlockProps(s,"end"in e?e.end:undefined))s.push({type:"newline",offset:-1,indent:n,source:"\n"});for(const t of Object.keys(e))if(t!=="type"&&t!=="offset")delete e[t];Object.assign(e,{type:"block-scalar",indent:n,props:s,source:i})}}function addEndtoBlockProps(e,t){if(t)for(const n of t)switch(n.type){case"space":case"comment":e.push(n);break;case"newline":e.push(n);return true}return false}function setFlowScalarValue(e,t,n){switch(e.type){case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":e.type=n;e.source=t;break;case"block-scalar":{const r=e.props.slice(1);let i=t.length;if(e.props[0].type==="block-scalar-header")i-=e.props[0].source.length;for(const e of r)e.offset+=i;delete e.props;Object.assign(e,{type:n,source:t,end:r});break}case"block-map":case"block-seq":{const r=e.offset+t.length;const i={type:"newline",offset:r,indent:e.indent,source:"\n"};delete e.items;Object.assign(e,{type:n,source:t,end:[i]});break}default:{const r="indent"in e?e.indent:-1;const i="end"in e&&Array.isArray(e.end)?e.end.filter((e=>e.type==="space"||e.type==="comment"||e.type==="newline")):[];for(const t of Object.keys(e))if(t!=="type"&&t!=="offset")delete e[t];Object.assign(e,{type:n,indent:r,source:t,end:i})}}}t.createScalarToken=createScalarToken;t.resolveAsScalar=resolveAsScalar;t.setScalarValue=setScalarValue},58926:(e,t)=>{"use strict";const stringify=e=>"type"in e?stringifyToken(e):stringifyItem(e);function stringifyToken(e){switch(e.type){case"block-scalar":{let t="";for(const n of e.props)t+=stringifyToken(n);return t+e.source}case"block-map":case"block-seq":{let t="";for(const n of e.items)t+=stringifyItem(n);return t}case"flow-collection":{let t=e.start.source;for(const n of e.items)t+=stringifyItem(n);for(const n of e.end)t+=n.source;return t}case"document":{let t=stringifyItem(e);if(e.end)for(const n of e.end)t+=n.source;return t}default:{let t=e.source;if("end"in e&&e.end)for(const n of e.end)t+=n.source;return t}}}function stringifyItem({start:e,key:t,sep:n,value:r}){let i="";for(const t of e)i+=t.source;if(t)i+=stringifyToken(t);if(n)for(const e of n)i+=e.source;if(r)i+=stringifyToken(r);return i}t.stringify=stringify},77191:(e,t)=>{"use strict";const n=Symbol("break visit");const r=Symbol("skip children");const i=Symbol("remove item");function visit(e,t){if("type"in e&&e.type==="document")e={start:e.start,value:e.value};_visit(Object.freeze([]),e,t)}visit.BREAK=n;visit.SKIP=r;visit.REMOVE=i;visit.itemAtPath=(e,t)=>{let n=e;for(const[e,r]of t){const t=n?.[e];if(t&&"items"in t){n=t.items[r]}else return undefined}return n};visit.parentCollection=(e,t)=>{const n=visit.itemAtPath(e,t.slice(0,-1));const r=t[t.length-1][0];const i=n?.[r];if(i&&"items"in i)return i;throw new Error("Parent collection not found")};function _visit(e,t,r){let s=r(t,e);if(typeof s==="symbol")return s;for(const o of["key","value"]){const a=t[o];if(a&&"items"in a){for(let t=0;t<a.items.length;++t){const s=_visit(Object.freeze(e.concat([[o,t]])),a.items[t],r);if(typeof s==="number")t=s-1;else if(s===n)return n;else if(s===i){a.items.splice(t,1);t-=1}}if(typeof s==="function"&&o==="key")s=s(t,e)}}return typeof s==="function"?s(t,e):s}t.visit=visit},79358:(e,t,n)=>{"use strict";var r=n(57194);var i=n(58926);var s=n(77191);const o="\ufeff";const a="";const c="";const u="";const isCollection=e=>!!e&&"items"in e;const isScalar=e=>!!e&&(e.type==="scalar"||e.type==="single-quoted-scalar"||e.type==="double-quoted-scalar"||e.type==="block-scalar");function prettyToken(e){switch(e){case o:return"<BOM>";case a:return"<DOC>";case c:return"<FLOW_END>";case u:return"<SCALAR>";default:return JSON.stringify(e)}}function tokenType(e){switch(e){case o:return"byte-order-mark";case a:return"doc-mode";case c:return"flow-error-end";case u:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case"\n":case"\r\n":return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(e[0]){case" ":case"\t":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}t.createScalarToken=r.createScalarToken;t.resolveAsScalar=r.resolveAsScalar;t.setScalarValue=r.setScalarValue;t.stringify=i.stringify;t.visit=s.visit;t.BOM=o;t.DOCUMENT=a;t.FLOW_END=c;t.SCALAR=u;t.isCollection=isCollection;t.isScalar=isScalar;t.prettyToken=prettyToken;t.tokenType=tokenType},18701:(e,t,n)=>{"use strict";var r=n(79358);function isEmpty(e){switch(e){case undefined:case" ":case"\n":case"\r":case"\t":return true;default:return false}}const i="0123456789ABCDEFabcdef".split("");const s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()".split("");const o=",[]{}".split("");const a=" ,[]{}\n\r\t".split("");const isNotAnchorChar=e=>!e||a.includes(e);class Lexer{constructor(){this.atEnd=false;this.blockScalarIndent=-1;this.blockScalarKeep=false;this.buffer="";this.flowKey=false;this.flowLevel=0;this.indentNext=0;this.indentValue=0;this.lineEndPos=null;this.next=null;this.pos=0}*lex(e,t=false){if(e){this.buffer=this.buffer?this.buffer+e:e;this.lineEndPos=null}this.atEnd=!t;let n=this.next??"stream";while(n&&(t||this.hasChars(1)))n=yield*this.parseNext(n)}atLineEnd(){let e=this.pos;let t=this.buffer[e];while(t===" "||t==="\t")t=this.buffer[++e];if(!t||t==="#"||t==="\n")return true;if(t==="\r")return this.buffer[e+1]==="\n";return false}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let t=this.buffer[e];if(this.indentNext>0){let n=0;while(t===" ")t=this.buffer[++n+e];if(t==="\r"){const t=this.buffer[n+e+1];if(t==="\n"||!t&&!this.atEnd)return e+n+1}return t==="\n"||n>=this.indentNext||!t&&!this.atEnd?e+n:-1}if(t==="-"||t==="."){const t=this.buffer.substr(e,3);if((t==="---"||t==="...")&&isEmpty(this.buffer[e+3]))return-1}return e}getLine(){let e=this.lineEndPos;if(typeof e!=="number"||e!==-1&&e<this.pos){e=this.buffer.indexOf("\n",this.pos);this.lineEndPos=e}if(e===-1)return this.atEnd?this.buffer.substring(this.pos):null;if(this.buffer[e-1]==="\r")e-=1;return this.buffer.substring(this.pos,e)}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){this.buffer=this.buffer.substring(this.pos);this.pos=0;this.lineEndPos=null;this.next=e;return null}peek(e){return this.buffer.substr(this.pos,e)}*parseNext(e){switch(e){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let e=this.getLine();if(e===null)return this.setNext("stream");if(e[0]===r.BOM){yield*this.pushCount(1);e=e.substring(1)}if(e[0]==="%"){let t=e.length;const n=e.indexOf("#");if(n!==-1){const r=e[n-1];if(r===" "||r==="\t")t=n-1}while(true){const n=e[t-1];if(n===" "||n==="\t")t-=1;else break}const r=(yield*this.pushCount(t))+(yield*this.pushSpaces(true));yield*this.pushCount(e.length-r);this.pushNewline();return"stream"}if(this.atLineEnd()){const t=yield*this.pushSpaces(true);yield*this.pushCount(e.length-t);yield*this.pushNewline();return"stream"}yield r.DOCUMENT;return yield*this.parseLineStart()}*parseLineStart(){const e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext("line-start");if(e==="-"||e==="."){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const e=this.peek(3);if(e==="---"&&isEmpty(this.charAt(3))){yield*this.pushCount(3);this.indentValue=0;this.indentNext=0;return"doc"}else if(e==="..."&&isEmpty(this.charAt(3))){yield*this.pushCount(3);return"stream"}}this.indentValue=yield*this.pushSpaces(false);if(this.indentNext>this.indentValue&&!isEmpty(this.charAt(1)))this.indentNext=this.indentValue;return yield*this.parseBlockStart()}*parseBlockStart(){const[e,t]=this.peek(2);if(!t&&!this.atEnd)return this.setNext("block-start");if((e==="-"||e==="?"||e===":")&&isEmpty(t)){const e=(yield*this.pushCount(1))+(yield*this.pushSpaces(true));this.indentNext=this.indentValue+1;this.indentValue+=e;return yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(true);const e=this.getLine();if(e===null)return this.setNext("doc");let t=yield*this.pushIndicators();switch(e[t]){case"#":yield*this.pushCount(e.length-t);case undefined:yield*this.pushNewline();return yield*this.parseLineStart();case"{":case"[":yield*this.pushCount(1);this.flowKey=false;this.flowLevel=1;return"flow";case"}":case"]":yield*this.pushCount(1);return"doc";case"*":yield*this.pushUntil(isNotAnchorChar);return"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":t+=(yield*this.parseBlockScalarHeader());t+=(yield*this.pushSpaces(true));yield*this.pushCount(e.length-t);yield*this.pushNewline();return yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let e,t;let n=-1;do{e=yield*this.pushNewline();if(e>0){t=yield*this.pushSpaces(false);this.indentValue=n=t}else{t=0}t+=(yield*this.pushSpaces(true))}while(e+t>0);const i=this.getLine();if(i===null)return this.setNext("flow");if(n!==-1&&n<this.indentNext&&i[0]!=="#"||n===0&&(i.startsWith("---")||i.startsWith("..."))&&isEmpty(i[3])){const e=n===this.indentNext-1&&this.flowLevel===1&&(i[0]==="]"||i[0]==="}");if(!e){this.flowLevel=0;yield r.FLOW_END;return yield*this.parseLineStart()}}let s=0;while(i[s]===","){s+=(yield*this.pushCount(1));s+=(yield*this.pushSpaces(true));this.flowKey=false}s+=(yield*this.pushIndicators());switch(i[s]){case undefined:return"flow";case"#":yield*this.pushCount(i.length-s);return"flow";case"{":case"[":yield*this.pushCount(1);this.flowKey=false;this.flowLevel+=1;return"flow";case"}":case"]":yield*this.pushCount(1);this.flowKey=true;this.flowLevel-=1;return this.flowLevel?"flow":"doc";case"*":yield*this.pushUntil(isNotAnchorChar);return"flow";case'"':case"'":this.flowKey=true;return yield*this.parseQuotedScalar();case":":{const e=this.charAt(1);if(this.flowKey||isEmpty(e)||e===","){this.flowKey=false;yield*this.pushCount(1);yield*this.pushSpaces(true);return"flow"}}default:this.flowKey=false;return yield*this.parsePlainScalar()}}*parseQuotedScalar(){const e=this.charAt(0);let t=this.buffer.indexOf(e,this.pos+1);if(e==="'"){while(t!==-1&&this.buffer[t+1]==="'")t=this.buffer.indexOf("'",t+2)}else{while(t!==-1){let e=0;while(this.buffer[t-1-e]==="\\")e+=1;if(e%2===0)break;t=this.buffer.indexOf('"',t+1)}}const n=this.buffer.substring(0,t);let r=n.indexOf("\n",this.pos);if(r!==-1){while(r!==-1){const e=this.continueScalar(r+1);if(e===-1)break;r=n.indexOf("\n",e)}if(r!==-1){t=r-(n[r-1]==="\r"?2:1)}}if(t===-1){if(!this.atEnd)return this.setNext("quoted-scalar");t=this.buffer.length}yield*this.pushToIndex(t+1,false);return this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1;this.blockScalarKeep=false;let e=this.pos;while(true){const t=this.buffer[++e];if(t==="+")this.blockScalarKeep=true;else if(t>"0"&&t<="9")this.blockScalarIndent=Number(t)-1;else if(t!=="-")break}return yield*this.pushUntil((e=>isEmpty(e)||e==="#"))}*parseBlockScalar(){let e=this.pos-1;let t=0;let n;e:for(let r=this.pos;n=this.buffer[r];++r){switch(n){case" ":t+=1;break;case"\n":e=r;t=0;break;case"\r":{const e=this.buffer[r+1];if(!e&&!this.atEnd)return this.setNext("block-scalar");if(e==="\n")break}default:break e}}if(!n&&!this.atEnd)return this.setNext("block-scalar");if(t>=this.indentNext){if(this.blockScalarIndent===-1)this.indentNext=t;else this.indentNext+=this.blockScalarIndent;do{const t=this.continueScalar(e+1);if(t===-1)break;e=this.buffer.indexOf("\n",t)}while(e!==-1);if(e===-1){if(!this.atEnd)return this.setNext("block-scalar");e=this.buffer.length}}if(!this.blockScalarKeep){do{let n=e-1;let r=this.buffer[n];if(r==="\r")r=this.buffer[--n];const i=n;while(r===" "||r==="\t")r=this.buffer[--n];if(r==="\n"&&n>=this.pos&&n+1+t>i)e=n;else break}while(true)}yield r.SCALAR;yield*this.pushToIndex(e+1,true);return yield*this.parseLineStart()}*parsePlainScalar(){const e=this.flowLevel>0;let t=this.pos-1;let n=this.pos-1;let i;while(i=this.buffer[++n]){if(i===":"){const r=this.buffer[n+1];if(isEmpty(r)||e&&r===",")break;t=n}else if(isEmpty(i)){let r=this.buffer[n+1];if(i==="\r"){if(r==="\n"){n+=1;i="\n";r=this.buffer[n+1]}else t=n}if(r==="#"||e&&o.includes(r))break;if(i==="\n"){const e=this.continueScalar(n+1);if(e===-1)break;n=Math.max(n,e-2)}}else{if(e&&o.includes(i))break;t=n}}if(!i&&!this.atEnd)return this.setNext("plain-scalar");yield r.SCALAR;yield*this.pushToIndex(t+1,true);return e?"flow":"doc"}*pushCount(e){if(e>0){yield this.buffer.substr(this.pos,e);this.pos+=e;return e}return 0}*pushToIndex(e,t){const n=this.buffer.slice(this.pos,e);if(n){yield n;this.pos+=n.length;return n.length}else if(t)yield"";return 0}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(true))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(isNotAnchorChar))+(yield*this.pushSpaces(true))+(yield*this.pushIndicators());case"-":case"?":case":":{const e=this.flowLevel>0;const t=this.charAt(1);if(isEmpty(t)||e&&o.includes(t)){if(!e)this.indentNext=this.indentValue+1;else if(this.flowKey)this.flowKey=false;return(yield*this.pushCount(1))+(yield*this.pushSpaces(true))+(yield*this.pushIndicators())}}}return 0}*pushTag(){if(this.charAt(1)==="<"){let e=this.pos+2;let t=this.buffer[e];while(!isEmpty(t)&&t!==">")t=this.buffer[++e];return yield*this.pushToIndex(t===">"?e+1:e,false)}else{let e=this.pos+1;let t=this.buffer[e];while(t){if(s.includes(t))t=this.buffer[++e];else if(t==="%"&&i.includes(this.buffer[e+1])&&i.includes(this.buffer[e+2])){t=this.buffer[e+=3]}else break}return yield*this.pushToIndex(e,false)}}*pushNewline(){const e=this.buffer[this.pos];if(e==="\n")return yield*this.pushCount(1);else if(e==="\r"&&this.charAt(1)==="\n")return yield*this.pushCount(2);else return 0}*pushSpaces(e){let t=this.pos-1;let n;do{n=this.buffer[++t]}while(n===" "||e&&n==="\t");const r=t-this.pos;if(r>0){yield this.buffer.substr(this.pos,r);this.pos=t}return r}*pushUntil(e){let t=this.pos;let n=this.buffer[t];while(!e(n))n=this.buffer[++t];return yield*this.pushToIndex(t,false)}}t.Lexer=Lexer},59690:(e,t)=>{"use strict";class LineCounter{constructor(){this.lineStarts=[];this.addNewLine=e=>this.lineStarts.push(e);this.linePos=e=>{let t=0;let n=this.lineStarts.length;while(t<n){const r=t+n>>1;if(this.lineStarts[r]<e)t=r+1;else n=r}if(this.lineStarts[t]===e)return{line:t+1,col:1};if(t===0)return{line:0,col:e};const r=this.lineStarts[t-1];return{line:t,col:e-r+1}}}}t.LineCounter=LineCounter},61501:(e,t,n)=>{"use strict";var r=n(79358);var i=n(18701);function includesToken(e,t){for(let n=0;n<e.length;++n)if(e[n].type===t)return true;return false}function findNonEmptyIndex(e){for(let t=0;t<e.length;++t){switch(e[t].type){case"space":case"comment":case"newline":break;default:return t}}return-1}function isFlowToken(e){switch(e?.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return true;default:return false}}function getPrevProps(e){switch(e.type){case"document":return e.start;case"block-map":{const t=e.items[e.items.length-1];return t.sep??t.start}case"block-seq":return e.items[e.items.length-1].start;default:return[]}}function getFirstKeyStartProps(e){if(e.length===0)return[];let t=e.length;e:while(--t>=0){switch(e[t].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}}while(e[++t]?.type==="space"){}return e.splice(t,e.length)}function fixFlowSeqItems(e){if(e.start.type==="flow-seq-start"){for(const t of e.items){if(t.sep&&!t.value&&!includesToken(t.start,"explicit-key-ind")&&!includesToken(t.sep,"map-value-ind")){if(t.key)t.value=t.key;delete t.key;if(isFlowToken(t.value)){if(t.value.end)Array.prototype.push.apply(t.value.end,t.sep);else t.value.end=t.sep}else Array.prototype.push.apply(t.start,t.sep);delete t.sep}}}}class Parser{constructor(e){this.atNewLine=true;this.atScalar=false;this.indent=0;this.offset=0;this.onKeyLine=false;this.stack=[];this.source="";this.type="";this.lexer=new i.Lexer;this.onNewLine=e}*parse(e,t=false){if(this.onNewLine&&this.offset===0)this.onNewLine(0);for(const n of this.lexer.lex(e,t))yield*this.next(n);if(!t)yield*this.end()}*next(e){this.source=e;if(process.env.LOG_TOKENS)console.log("|",r.prettyToken(e));if(this.atScalar){this.atScalar=false;yield*this.step();this.offset+=e.length;return}const t=r.tokenType(e);if(!t){const t=`Not a YAML token: ${e}`;yield*this.pop({type:"error",offset:this.offset,message:t,source:e});this.offset+=e.length}else if(t==="scalar"){this.atNewLine=false;this.atScalar=true;this.type="scalar"}else{this.type=t;yield*this.step();switch(t){case"newline":this.atNewLine=true;this.indent=0;if(this.onNewLine)this.onNewLine(this.offset+e.length);break;case"space":if(this.atNewLine&&e[0]===" ")this.indent+=e.length;break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":if(this.atNewLine)this.indent+=e.length;break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=false}this.offset+=e.length}}*end(){while(this.stack.length>0)yield*this.pop()}get sourceToken(){const e={type:this.type,offset:this.offset,indent:this.indent,source:this.source};return e}*step(){const e=this.peek(1);if(this.type==="doc-end"&&(!e||e.type!=="doc-end")){while(this.stack.length>0)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!e)return yield*this.stream();switch(e.type){case"document":return yield*this.document(e);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(e);case"block-scalar":return yield*this.blockScalar(e);case"block-map":return yield*this.blockMap(e);case"block-seq":return yield*this.blockSequence(e);case"flow-collection":return yield*this.flowCollection(e);case"doc-end":return yield*this.documentEnd(e)}yield*this.pop()}peek(e){return this.stack[this.stack.length-e]}*pop(e){const t=e??this.stack.pop();if(!t){const e="Tried to pop an empty stack";yield{type:"error",offset:this.offset,source:"",message:e}}else if(this.stack.length===0){yield t}else{const e=this.peek(1);if(t.type==="block-scalar"){t.indent="indent"in e?e.indent:0}else if(t.type==="flow-collection"&&e.type==="document"){t.indent=0}if(t.type==="flow-collection")fixFlowSeqItems(t);switch(e.type){case"document":e.value=t;break;case"block-scalar":e.props.push(t);break;case"block-map":{const n=e.items[e.items.length-1];if(n.value){e.items.push({start:[],key:t,sep:[]});this.onKeyLine=true;return}else if(n.sep){n.value=t}else{Object.assign(n,{key:t,sep:[]});this.onKeyLine=!includesToken(n.start,"explicit-key-ind");return}break}case"block-seq":{const n=e.items[e.items.length-1];if(n.value)e.items.push({start:[],value:t});else n.value=t;break}case"flow-collection":{const n=e.items[e.items.length-1];if(!n||n.value)e.items.push({start:[],key:t,sep:[]});else if(n.sep)n.value=t;else Object.assign(n,{key:t,sep:[]});return}default:yield*this.pop();yield*this.pop(t)}if((e.type==="document"||e.type==="block-map"||e.type==="block-seq")&&(t.type==="block-map"||t.type==="block-seq")){const n=t.items[t.items.length-1];if(n&&!n.sep&&!n.value&&n.start.length>0&&findNonEmptyIndex(n.start)===-1&&(t.indent===0||n.start.every((e=>e.type!=="comment"||e.indent<t.indent)))){if(e.type==="document")e.end=n.start;else e.items.push({start:n.start});t.items.splice(-1,1)}}}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{const e={type:"document",offset:this.offset,start:[]};if(this.type==="doc-start")e.start.push(this.sourceToken);this.stack.push(e);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(e){if(e.value)return yield*this.lineEnd(e);switch(this.type){case"doc-start":{if(findNonEmptyIndex(e.start)!==-1){yield*this.pop();yield*this.step()}else e.start.push(this.sourceToken);return}case"anchor":case"tag":case"space":case"comment":case"newline":e.start.push(this.sourceToken);return}const t=this.startBlockValue(e);if(t)this.stack.push(t);else{yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}}*scalar(e){if(this.type==="map-value-ind"){const t=getPrevProps(this.peek(2));const n=getFirstKeyStartProps(t);let r;if(e.end){r=e.end;r.push(this.sourceToken);delete e.end}else r=[this.sourceToken];const i={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:n,key:e,sep:r}]};this.onKeyLine=true;this.stack[this.stack.length-1]=i}else yield*this.lineEnd(e)}*blockScalar(e){switch(this.type){case"space":case"comment":case"newline":e.props.push(this.sourceToken);return;case"scalar":e.source=this.source;this.atNewLine=true;this.indent=0;if(this.onNewLine){let e=this.source.indexOf("\n")+1;while(e!==0){this.onNewLine(this.offset+e);e=this.source.indexOf("\n",e)+1}}yield*this.pop();break;default:yield*this.pop();yield*this.step()}}*blockMap(e){const t=e.items[e.items.length-1];switch(this.type){case"newline":this.onKeyLine=false;if(t.value){const n="end"in t.value?t.value.end:undefined;const r=Array.isArray(n)?n[n.length-1]:undefined;if(r?.type==="comment")n?.push(this.sourceToken);else e.items.push({start:[this.sourceToken]})}else if(t.sep){t.sep.push(this.sourceToken)}else{t.start.push(this.sourceToken)}return;case"space":case"comment":if(t.value){e.items.push({start:[this.sourceToken]})}else if(t.sep){t.sep.push(this.sourceToken)}else{if(this.atIndentedComment(t.start,e.indent)){const n=e.items[e.items.length-2];const r=n?.value?.end;if(Array.isArray(r)){Array.prototype.push.apply(r,t.start);r.push(this.sourceToken);e.items.pop();return}}t.start.push(this.sourceToken)}return}if(this.indent>=e.indent){const n=!this.onKeyLine&&this.indent===e.indent&&t.sep;let r=[];if(n&&t.sep&&!t.value){const n=[];for(let r=0;r<t.sep.length;++r){const i=t.sep[r];switch(i.type){case"newline":n.push(r);break;case"space":break;case"comment":if(i.indent>e.indent)n.length=0;break;default:n.length=0}}if(n.length>=2)r=t.sep.splice(n[1])}switch(this.type){case"anchor":case"tag":if(n||t.value){r.push(this.sourceToken);e.items.push({start:r});this.onKeyLine=true}else if(t.sep){t.sep.push(this.sourceToken)}else{t.start.push(this.sourceToken)}return;case"explicit-key-ind":if(!t.sep&&!includesToken(t.start,"explicit-key-ind")){t.start.push(this.sourceToken)}else if(n||t.value){r.push(this.sourceToken);e.items.push({start:r})}else{this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]})}this.onKeyLine=true;return;case"map-value-ind":if(includesToken(t.start,"explicit-key-ind")){if(!t.sep){if(includesToken(t.start,"newline")){Object.assign(t,{key:null,sep:[this.sourceToken]})}else{const e=getFirstKeyStartProps(t.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:e,key:null,sep:[this.sourceToken]}]})}}else if(t.value){e.items.push({start:[],key:null,sep:[this.sourceToken]})}else if(includesToken(t.sep,"map-value-ind")){this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:r,key:null,sep:[this.sourceToken]}]})}else if(isFlowToken(t.key)&&!includesToken(t.sep,"newline")){const e=getFirstKeyStartProps(t.start);const n=t.key;const r=t.sep;r.push(this.sourceToken);delete t.key,delete t.sep;this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:e,key:n,sep:r}]})}else if(r.length>0){t.sep=t.sep.concat(r,this.sourceToken)}else{t.sep.push(this.sourceToken)}}else{if(!t.sep){Object.assign(t,{key:null,sep:[this.sourceToken]})}else if(t.value||n){e.items.push({start:r,key:null,sep:[this.sourceToken]})}else if(includesToken(t.sep,"map-value-ind")){this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]})}else{t.sep.push(this.sourceToken)}}this.onKeyLine=true;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const i=this.flowScalar(this.type);if(n||t.value){e.items.push({start:r,key:i,sep:[]});this.onKeyLine=true}else if(t.sep){this.stack.push(i)}else{Object.assign(t,{key:i,sep:[]});this.onKeyLine=true}return}default:{const i=this.startBlockValue(e);if(i){if(n&&i.type!=="block-seq"&&includesToken(t.start,"explicit-key-ind")){e.items.push({start:r})}this.stack.push(i);return}}}}yield*this.pop();yield*this.step()}*blockSequence(e){const t=e.items[e.items.length-1];switch(this.type){case"newline":if(t.value){const n="end"in t.value?t.value.end:undefined;const r=Array.isArray(n)?n[n.length-1]:undefined;if(r?.type==="comment")n?.push(this.sourceToken);else e.items.push({start:[this.sourceToken]})}else t.start.push(this.sourceToken);return;case"space":case"comment":if(t.value)e.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(t.start,e.indent)){const n=e.items[e.items.length-2];const r=n?.value?.end;if(Array.isArray(r)){Array.prototype.push.apply(r,t.start);r.push(this.sourceToken);e.items.pop();return}}t.start.push(this.sourceToken)}return;case"anchor":case"tag":if(t.value||this.indent<=e.indent)break;t.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==e.indent)break;if(t.value||includesToken(t.start,"seq-item-ind"))e.items.push({start:[this.sourceToken]});else t.start.push(this.sourceToken);return}if(this.indent>e.indent){const t=this.startBlockValue(e);if(t){this.stack.push(t);return}}yield*this.pop();yield*this.step()}*flowCollection(e){const t=e.items[e.items.length-1];if(this.type==="flow-error-end"){let e;do{yield*this.pop();e=this.peek(1)}while(e&&e.type==="flow-collection")}else if(e.end.length===0){switch(this.type){case"comma":case"explicit-key-ind":if(!t||t.sep)e.items.push({start:[this.sourceToken]});else t.start.push(this.sourceToken);return;case"map-value-ind":if(!t||t.value)e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(t.sep)t.sep.push(this.sourceToken);else Object.assign(t,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":if(!t||t.value)e.items.push({start:[this.sourceToken]});else if(t.sep)t.sep.push(this.sourceToken);else t.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const n=this.flowScalar(this.type);if(!t||t.value)e.items.push({start:[],key:n,sep:[]});else if(t.sep)this.stack.push(n);else Object.assign(t,{key:n,sep:[]});return}case"flow-map-end":case"flow-seq-end":e.end.push(this.sourceToken);return}const n=this.startBlockValue(e);if(n)this.stack.push(n);else{yield*this.pop();yield*this.step()}}else{const t=this.peek(2);if(t.type==="block-map"&&(this.type==="map-value-ind"&&t.indent===e.indent||this.type==="newline"&&!t.items[t.items.length-1].sep)){yield*this.pop();yield*this.step()}else if(this.type==="map-value-ind"&&t.type!=="flow-collection"){const n=getPrevProps(t);const r=getFirstKeyStartProps(n);fixFlowSeqItems(e);const i=e.end.splice(1,e.end.length);i.push(this.sourceToken);const s={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:r,key:e,sep:i}]};this.onKeyLine=true;this.stack[this.stack.length-1]=s}else{yield*this.lineEnd(e)}}}flowScalar(e){if(this.onNewLine){let e=this.source.indexOf("\n")+1;while(e!==0){this.onNewLine(this.offset+e);e=this.source.indexOf("\n",e)+1}}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=true;const t=getPrevProps(e);const n=getFirstKeyStartProps(t);n.push(this.sourceToken);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:n}]}}case"map-value-ind":{this.onKeyLine=true;const t=getPrevProps(e);const n=getFirstKeyStartProps(t);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:n,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(e,t){if(this.type!=="comment")return false;if(this.indent<=t)return false;return e.every((e=>e.type==="newline"||e.type==="space"))}*documentEnd(e){if(this.type!=="doc-mode"){if(e.end)e.end.push(this.sourceToken);else e.end=[this.sourceToken];if(this.type==="newline")yield*this.pop()}}*lineEnd(e){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop();yield*this.step();break;case"newline":this.onKeyLine=false;case"space":case"comment":default:if(e.end)e.end.push(this.sourceToken);else e.end=[this.sourceToken];if(this.type==="newline")yield*this.pop()}}}t.Parser=Parser},52923:(e,t,n)=>{"use strict";var r=n(44964);var i=n(6759);var s=n(29341);var o=n(44254);var a=n(59690);var c=n(61501);function parseOptions(e){const t=e.prettyErrors!==false;const n=e.lineCounter||t&&new a.LineCounter||null;return{lineCounter:n,prettyErrors:t}}function parseAllDocuments(e,t={}){const{lineCounter:n,prettyErrors:i}=parseOptions(t);const o=new c.Parser(n?.addNewLine);const a=new r.Composer(t);const u=Array.from(a.compose(o.parse(e)));if(i&&n)for(const t of u){t.errors.forEach(s.prettifyError(e,n));t.warnings.forEach(s.prettifyError(e,n))}if(u.length>0)return u;return Object.assign([],{empty:true},a.streamInfo())}function parseDocument(e,t={}){const{lineCounter:n,prettyErrors:i}=parseOptions(t);const o=new c.Parser(n?.addNewLine);const a=new r.Composer(t);let u=null;for(const t of a.compose(o.parse(e),true,e.length)){if(!u)u=t;else if(u.options.logLevel!=="silent"){u.errors.push(new s.YAMLParseError(t.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}}if(i&&n){u.errors.forEach(s.prettifyError(e,n));u.warnings.forEach(s.prettifyError(e,n))}return u}function parse(e,t,n){let r=undefined;if(typeof t==="function"){r=t}else if(n===undefined&&t&&typeof t==="object"){n=t}const i=parseDocument(e,n);if(!i)return null;i.warnings.forEach((e=>o.warn(i.options.logLevel,e)));if(i.errors.length>0){if(i.options.logLevel!=="silent")throw i.errors[0];else i.errors=[]}return i.toJS(Object.assign({reviver:r},n))}function stringify(e,t,n){let r=null;if(typeof t==="function"||Array.isArray(t)){r=t}else if(n===undefined&&t){n=t}if(typeof n==="string")n=n.length;if(typeof n==="number"){const e=Math.round(n);n=e<1?undefined:e>8?{indent:8}:{indent:e}}if(e===undefined){const{keepUndefined:e}=n??t??{};if(!e)return undefined}return new i.Document(e,r,n).toString(n)}t.parse=parse;t.parseAllDocuments=parseAllDocuments;t.parseDocument=parseDocument;t.stringify=stringify},6169:(e,t,n)=>{"use strict";var r=n(56690);var i=n(1939);var s=n(80466);var o=n(21150);var a=n(11617);const sortMapEntriesByKey=(e,t)=>e.key<t.key?-1:e.key>t.key?1:0;class Schema{constructor({compat:e,customTags:t,merge:n,resolveKnownTags:c,schema:u,sortMapEntries:l,toStringDefaults:d}){this.compat=Array.isArray(e)?a.getTags(e,"compat"):e?a.getTags(null,e):null;this.merge=!!n;this.name=typeof u==="string"&&u||"core";this.knownTags=c?a.coreKnownTags:{};this.tags=a.getTags(t,this.name);this.toStringOptions=d??null;Object.defineProperty(this,r.MAP,{value:i.map});Object.defineProperty(this,r.SCALAR,{value:o.string});Object.defineProperty(this,r.SEQ,{value:s.seq});this.sortMapEntries=typeof l==="function"?l:l===true?sortMapEntriesByKey:null}clone(){const e=Object.create(Schema.prototype,Object.getOwnPropertyDescriptors(this));e.tags=this.tags.slice();return e}}t.Schema=Schema},1939:(e,t,n)=>{"use strict";var r=n(56690);var i=n(13863);var s=n(54254);function createMap(e,t,n){const{keepUndefined:r,replacer:o}=n;const a=new s.YAMLMap(e);const add=(e,s)=>{if(typeof o==="function")s=o.call(t,e,s);else if(Array.isArray(o)&&!o.includes(e))return;if(s!==undefined||r)a.items.push(i.createPair(e,s,n))};if(t instanceof Map){for(const[e,n]of t)add(e,n)}else if(t&&typeof t==="object"){for(const e of Object.keys(t))add(e,t[e])}if(typeof e.sortMapEntries==="function"){a.items.sort(e.sortMapEntries)}return a}const o={collection:"map",createNode:createMap,default:true,nodeClass:s.YAMLMap,tag:"tag:yaml.org,2002:map",resolve(e,t){if(!r.isMap(e))t("Expected a mapping for this tag");return e}};t.map=o},98249:(e,t,n)=>{"use strict";var r=n(98281);const i={identify:e=>e==null,createNode:()=>new r.Scalar(null),default:true,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new r.Scalar(null),stringify:({source:e},t)=>typeof e==="string"&&i.test.test(e)?e:t.options.nullStr};t.nullTag=i},80466:(e,t,n)=>{"use strict";var r=n(23627);var i=n(56690);var s=n(74316);function createSeq(e,t,n){const{replacer:i}=n;const o=new s.YAMLSeq(e);if(t&&Symbol.iterator in Object(t)){let e=0;for(let s of t){if(typeof i==="function"){const n=t instanceof Set?s:String(e++);s=i.call(t,n,s)}o.items.push(r.createNode(s,undefined,n))}}return o}const o={collection:"seq",createNode:createSeq,default:true,nodeClass:s.YAMLSeq,tag:"tag:yaml.org,2002:seq",resolve(e,t){if(!i.isSeq(e))t("Expected a sequence for this tag");return e}};t.seq=o},21150:(e,t,n)=>{"use strict";var r=n(92319);const i={identify:e=>typeof e==="string",default:true,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify(e,t,n,i){t=Object.assign({actualString:true},t);return r.stringifyString(e,t,n,i)}};t.string=i},98134:(e,t,n)=>{"use strict";var r=n(98281);const i={identify:e=>typeof e==="boolean",default:true,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:e=>new r.Scalar(e[0]==="t"||e[0]==="T"),stringify({source:e,value:t},n){if(e&&i.test.test(e)){const n=e[0]==="t"||e[0]==="T";if(t===n)return e}return t?n.options.trueStr:n.options.falseStr}};t.boolTag=i},14594:(e,t,n)=>{"use strict";var r=n(98281);var i=n(87602);const s={identify:e=>typeof e==="number",default:true,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN))$/,resolve:e=>e.slice(-3).toLowerCase()==="nan"?NaN:e[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:i.stringifyNumber};const o={identify:e=>typeof e==="number",default:true,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e),stringify(e){const t=Number(e.value);return isFinite(t)?t.toExponential():i.stringifyNumber(e)}};const a={identify:e=>typeof e==="number",default:true,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(e){const t=new r.Scalar(parseFloat(e));const n=e.indexOf(".");if(n!==-1&&e[e.length-1]==="0")t.minFractionDigits=e.length-n-1;return t},stringify:i.stringifyNumber};t.float=a;t.floatExp=o;t.floatNaN=s},48756:(e,t,n)=>{"use strict";var r=n(87602);const intIdentify=e=>typeof e==="bigint"||Number.isInteger(e);const intResolve=(e,t,n,{intAsBigInt:r})=>r?BigInt(e):parseInt(e.substring(t),n);function intStringify(e,t,n){const{value:i}=e;if(intIdentify(i)&&i>=0)return n+i.toString(t);return r.stringifyNumber(e)}const i={identify:e=>intIdentify(e)&&e>=0,default:true,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(e,t,n)=>intResolve(e,2,8,n),stringify:e=>intStringify(e,8,"0o")};const s={identify:intIdentify,default:true,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(e,t,n)=>intResolve(e,0,10,n),stringify:r.stringifyNumber};const o={identify:e=>intIdentify(e)&&e>=0,default:true,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(e,t,n)=>intResolve(e,2,16,n),stringify:e=>intStringify(e,16,"0x")};t.int=s;t.intHex=o;t.intOct=i},19836:(e,t,n)=>{"use strict";var r=n(1939);var i=n(98249);var s=n(80466);var o=n(21150);var a=n(98134);var c=n(14594);var u=n(48756);const l=[r.map,s.seq,o.string,i.nullTag,a.boolTag,u.intOct,u.int,u.intHex,c.floatNaN,c.floatExp,c.float];t.schema=l},51267:(e,t,n)=>{"use strict";var r=n(98281);var i=n(1939);var s=n(80466);function intIdentify(e){return typeof e==="bigint"||Number.isInteger(e)}const stringifyJSON=({value:e})=>JSON.stringify(e);const o=[{identify:e=>typeof e==="string",default:true,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify:stringifyJSON},{identify:e=>e==null,createNode:()=>new r.Scalar(null),default:true,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:stringifyJSON},{identify:e=>typeof e==="boolean",default:true,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:e=>e==="true",stringify:stringifyJSON},{identify:intIdentify,default:true,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(e,t,{intAsBigInt:n})=>n?BigInt(e):parseInt(e,10),stringify:({value:e})=>intIdentify(e)?e.toString():JSON.stringify(e)},{identify:e=>typeof e==="number",default:true,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:e=>parseFloat(e),stringify:stringifyJSON}];const a={default:true,tag:"",test:/^/,resolve(e,t){t(`Unresolved plain scalar ${JSON.stringify(e)}`);return e}};const c=[i.map,s.seq].concat(o,a);t.schema=c},11617:(e,t,n)=>{"use strict";var r=n(1939);var i=n(98249);var s=n(80466);var o=n(21150);var a=n(98134);var c=n(14594);var u=n(48756);var l=n(19836);var d=n(51267);var f=n(5697);var p=n(15737);var h=n(73147);var m=n(52344);var g=n(10602);var v=n(722);const y=new Map([["core",l.schema],["failsafe",[r.map,s.seq,o.string]],["json",d.schema],["yaml11",m.schema],["yaml-1.1",m.schema]]);const b={binary:f.binary,bool:a.boolTag,float:c.float,floatExp:c.floatExp,floatNaN:c.floatNaN,floatTime:v.floatTime,int:u.int,intHex:u.intHex,intOct:u.intOct,intTime:v.intTime,map:r.map,null:i.nullTag,omap:p.omap,pairs:h.pairs,seq:s.seq,set:g.set,timestamp:v.timestamp};const _={"tag:yaml.org,2002:binary":f.binary,"tag:yaml.org,2002:omap":p.omap,"tag:yaml.org,2002:pairs":h.pairs,"tag:yaml.org,2002:set":g.set,"tag:yaml.org,2002:timestamp":v.timestamp};function getTags(e,t){let n=y.get(t);if(!n){if(Array.isArray(e))n=[];else{const e=Array.from(y.keys()).filter((e=>e!=="yaml11")).map((e=>JSON.stringify(e))).join(", ");throw new Error(`Unknown schema "${t}"; use one of ${e} or define customTags array`)}}if(Array.isArray(e)){for(const t of e)n=n.concat(t)}else if(typeof e==="function"){n=e(n.slice())}return n.map((e=>{if(typeof e!=="string")return e;const t=b[e];if(t)return t;const n=Object.keys(b).map((e=>JSON.stringify(e))).join(", ");throw new Error(`Unknown custom tag "${e}"; use one of ${n}`)}))}t.coreKnownTags=_;t.getTags=getTags},5697:(e,t,n)=>{"use strict";var r=n(98281);var i=n(92319);const s={identify:e=>e instanceof Uint8Array,default:false,tag:"tag:yaml.org,2002:binary",resolve(e,t){if(typeof Buffer==="function"){return Buffer.from(e,"base64")}else if(typeof atob==="function"){const t=atob(e.replace(/[\n\r]/g,""));const n=new Uint8Array(t.length);for(let e=0;e<t.length;++e)n[e]=t.charCodeAt(e);return n}else{t("This environment does not support reading binary tags; either Buffer or atob is required");return e}},stringify({comment:e,type:t,value:n},s,o,a){const c=n;let u;if(typeof Buffer==="function"){u=c instanceof Buffer?c.toString("base64"):Buffer.from(c.buffer).toString("base64")}else if(typeof btoa==="function"){let e="";for(let t=0;t<c.length;++t)e+=String.fromCharCode(c[t]);u=btoa(e)}else{throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required")}if(!t)t=r.Scalar.BLOCK_LITERAL;if(t!==r.Scalar.QUOTE_DOUBLE){const e=Math.max(s.options.lineWidth-s.indent.length,s.options.minContentWidth);const n=Math.ceil(u.length/e);const i=new Array(n);for(let t=0,r=0;t<n;++t,r+=e){i[t]=u.substr(r,e)}u=i.join(t===r.Scalar.BLOCK_LITERAL?"\n":" ")}return i.stringifyString({comment:e,type:t,value:u},s,o,a)}};t.binary=s},68420:(e,t,n)=>{"use strict";var r=n(98281);function boolStringify({value:e,source:t},n){const r=e?i:s;if(t&&r.test.test(t))return t;return e?n.options.trueStr:n.options.falseStr}const i={identify:e=>e===true,default:true,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new r.Scalar(true),stringify:boolStringify};const s={identify:e=>e===false,default:true,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/i,resolve:()=>new r.Scalar(false),stringify:boolStringify};t.falseTag=s;t.trueTag=i},12811:(e,t,n)=>{"use strict";var r=n(98281);var i=n(87602);const s={identify:e=>typeof e==="number",default:true,tag:"tag:yaml.org,2002:float",test:/^[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN)$/,resolve:e=>e.slice(-3).toLowerCase()==="nan"?NaN:e[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:i.stringifyNumber};const o={identify:e=>typeof e==="number",default:true,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e.replace(/_/g,"")),stringify(e){const t=Number(e.value);return isFinite(t)?t.toExponential():i.stringifyNumber(e)}};const a={identify:e=>typeof e==="number",default:true,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(e){const t=new r.Scalar(parseFloat(e.replace(/_/g,"")));const n=e.indexOf(".");if(n!==-1){const r=e.substring(n+1).replace(/_/g,"");if(r[r.length-1]==="0")t.minFractionDigits=r.length}return t},stringify:i.stringifyNumber};t.float=a;t.floatExp=o;t.floatNaN=s},86963:(e,t,n)=>{"use strict";var r=n(87602);const intIdentify=e=>typeof e==="bigint"||Number.isInteger(e);function intResolve(e,t,n,{intAsBigInt:r}){const i=e[0];if(i==="-"||i==="+")t+=1;e=e.substring(t).replace(/_/g,"");if(r){switch(n){case 2:e=`0b${e}`;break;case 8:e=`0o${e}`;break;case 16:e=`0x${e}`;break}const t=BigInt(e);return i==="-"?BigInt(-1)*t:t}const s=parseInt(e,n);return i==="-"?-1*s:s}function intStringify(e,t,n){const{value:i}=e;if(intIdentify(i)){const e=i.toString(t);return i<0?"-"+n+e.substr(1):n+e}return r.stringifyNumber(e)}const i={identify:intIdentify,default:true,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(e,t,n)=>intResolve(e,2,2,n),stringify:e=>intStringify(e,2,"0b")};const s={identify:intIdentify,default:true,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(e,t,n)=>intResolve(e,1,8,n),stringify:e=>intStringify(e,8,"0")};const o={identify:intIdentify,default:true,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(e,t,n)=>intResolve(e,0,10,n),stringify:r.stringifyNumber};const a={identify:intIdentify,default:true,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(e,t,n)=>intResolve(e,2,16,n),stringify:e=>intStringify(e,16,"0x")};t.int=o;t.intBin=i;t.intHex=a;t.intOct=s},15737:(e,t,n)=>{"use strict";var r=n(74316);var i=n(22943);var s=n(56690);var o=n(54254);var a=n(73147);class YAMLOMap extends r.YAMLSeq{constructor(){super();this.add=o.YAMLMap.prototype.add.bind(this);this.delete=o.YAMLMap.prototype.delete.bind(this);this.get=o.YAMLMap.prototype.get.bind(this);this.has=o.YAMLMap.prototype.has.bind(this);this.set=o.YAMLMap.prototype.set.bind(this);this.tag=YAMLOMap.tag}toJSON(e,t){if(!t)return super.toJSON(e);const n=new Map;if(t?.onCreate)t.onCreate(n);for(const e of this.items){let r,o;if(s.isPair(e)){r=i.toJS(e.key,"",t);o=i.toJS(e.value,r,t)}else{r=i.toJS(e,"",t)}if(n.has(r))throw new Error("Ordered maps must not include duplicate keys");n.set(r,o)}return n}}YAMLOMap.tag="tag:yaml.org,2002:omap";const c={collection:"seq",identify:e=>e instanceof Map,nodeClass:YAMLOMap,default:false,tag:"tag:yaml.org,2002:omap",resolve(e,t){const n=a.resolvePairs(e,t);const r=[];for(const{key:e}of n.items){if(s.isScalar(e)){if(r.includes(e.value)){t(`Ordered maps must not include duplicate keys: ${e.value}`)}else{r.push(e.value)}}}return Object.assign(new YAMLOMap,n)},createNode(e,t,n){const r=a.createPairs(e,t,n);const i=new YAMLOMap;i.items=r.items;return i}};t.YAMLOMap=YAMLOMap;t.omap=c},73147:(e,t,n)=>{"use strict";var r=n(56690);var i=n(13863);var s=n(98281);var o=n(74316);function resolvePairs(e,t){if(r.isSeq(e)){for(let n=0;n<e.items.length;++n){let o=e.items[n];if(r.isPair(o))continue;else if(r.isMap(o)){if(o.items.length>1)t("Each pair must have its own sequence indicator");const e=o.items[0]||new i.Pair(new s.Scalar(null));if(o.commentBefore)e.key.commentBefore=e.key.commentBefore?`${o.commentBefore}\n${e.key.commentBefore}`:o.commentBefore;if(o.comment){const t=e.value??e.key;t.comment=t.comment?`${o.comment}\n${t.comment}`:o.comment}o=e}e.items[n]=r.isPair(o)?o:new i.Pair(o)}}else t("Expected a sequence for this tag");return e}function createPairs(e,t,n){const{replacer:r}=n;const s=new o.YAMLSeq(e);s.tag="tag:yaml.org,2002:pairs";let a=0;if(t&&Symbol.iterator in Object(t))for(let e of t){if(typeof r==="function")e=r.call(t,String(a++),e);let o,c;if(Array.isArray(e)){if(e.length===2){o=e[0];c=e[1]}else throw new TypeError(`Expected [key, value] tuple: ${e}`)}else if(e&&e instanceof Object){const t=Object.keys(e);if(t.length===1){o=t[0];c=e[o]}else throw new TypeError(`Expected { key: value } tuple: ${e}`)}else{o=e}s.items.push(i.createPair(o,c,n))}return s}const a={collection:"seq",default:false,tag:"tag:yaml.org,2002:pairs",resolve:resolvePairs,createNode:createPairs};t.createPairs=createPairs;t.pairs=a;t.resolvePairs=resolvePairs},52344:(e,t,n)=>{"use strict";var r=n(1939);var i=n(98249);var s=n(80466);var o=n(21150);var a=n(5697);var c=n(68420);var u=n(12811);var l=n(86963);var d=n(15737);var f=n(73147);var p=n(10602);var h=n(722);const m=[r.map,s.seq,o.string,i.nullTag,c.trueTag,c.falseTag,l.intBin,l.intOct,l.int,l.intHex,u.floatNaN,u.floatExp,u.float,a.binary,d.omap,f.pairs,p.set,h.intTime,h.floatTime,h.timestamp];t.schema=m},10602:(e,t,n)=>{"use strict";var r=n(56690);var i=n(13863);var s=n(54254);class YAMLSet extends s.YAMLMap{constructor(e){super(e);this.tag=YAMLSet.tag}add(e){let t;if(r.isPair(e))t=e;else if(typeof e==="object"&&"key"in e&&"value"in e&&e.value===null)t=new i.Pair(e.key,null);else t=new i.Pair(e,null);const n=s.findPair(this.items,t.key);if(!n)this.items.push(t)}get(e,t){const n=s.findPair(this.items,e);return!t&&r.isPair(n)?r.isScalar(n.key)?n.key.value:n.key:n}set(e,t){if(typeof t!=="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof t}`);const n=s.findPair(this.items,e);if(n&&!t){this.items.splice(this.items.indexOf(n),1)}else if(!n&&t){this.items.push(new i.Pair(e))}}toJSON(e,t){return super.toJSON(e,t,Set)}toString(e,t,n){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(true))return super.toString(Object.assign({},e,{allNullValues:true}),t,n);else throw new Error("Set items must all have null values")}}YAMLSet.tag="tag:yaml.org,2002:set";const o={collection:"map",identify:e=>e instanceof Set,nodeClass:YAMLSet,default:false,tag:"tag:yaml.org,2002:set",resolve(e,t){if(r.isMap(e)){if(e.hasAllNullValues(true))return Object.assign(new YAMLSet,e);else t("Set items must all have null values")}else t("Expected a mapping for this tag");return e},createNode(e,t,n){const{replacer:r}=n;const s=new YAMLSet(e);if(t&&Symbol.iterator in Object(t))for(let e of t){if(typeof r==="function")e=r.call(t,e,e);s.items.push(i.createPair(e,null,n))}return s}};t.YAMLSet=YAMLSet;t.set=o},722:(e,t,n)=>{"use strict";var r=n(87602);function parseSexagesimal(e,t){const n=e[0];const r=n==="-"||n==="+"?e.substring(1):e;const num=e=>t?BigInt(e):Number(e);const i=r.replace(/_/g,"").split(":").reduce(((e,t)=>e*num(60)+num(t)),num(0));return n==="-"?num(-1)*i:i}function stringifySexagesimal(e){let{value:t}=e;let num=e=>e;if(typeof t==="bigint")num=e=>BigInt(e);else if(isNaN(t)||!isFinite(t))return r.stringifyNumber(e);let n="";if(t<0){n="-";t*=num(-1)}const i=num(60);const s=[t%i];if(t<60){s.unshift(0)}else{t=(t-s[0])/i;s.unshift(t%i);if(t>=60){t=(t-s[0])/i;s.unshift(t)}}return n+s.map((e=>e<10?"0"+String(e):String(e))).join(":").replace(/000000\d*$/,"")}const i={identify:e=>typeof e==="bigint"||Number.isInteger(e),default:true,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(e,t,{intAsBigInt:n})=>parseSexagesimal(e,n),stringify:stringifySexagesimal};const s={identify:e=>typeof e==="number",default:true,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:e=>parseSexagesimal(e,false),stringify:stringifySexagesimal};const o={identify:e=>e instanceof Date,default:true,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})"+"(?:"+"(?:t|T|[ \\t]+)"+"([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)"+"(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?"+")?$"),resolve(e){const t=e.match(o.test);if(!t)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,n,r,i,s,a,c]=t.map(Number);const u=t[7]?Number((t[7]+"00").substr(1,3)):0;let l=Date.UTC(n,r-1,i,s||0,a||0,c||0,u);const d=t[8];if(d&&d!=="Z"){let e=parseSexagesimal(d,false);if(Math.abs(e)<30)e*=60;l-=6e4*e}return new Date(l)},stringify:({value:e})=>e.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")};t.floatTime=s;t.intTime=i;t.timestamp=o},73274:(e,t)=>{"use strict";const n="flow";const r="block";const i="quoted";function foldFlowLines(e,t,n="flow",{indentAtStart:s,lineWidth:o=80,minContentWidth:a=20,onFold:c,onOverflow:u}={}){if(!o||o<0)return e;const l=Math.max(1+a,1+o-t.length);if(e.length<=l)return e;const d=[];const f={};let p=o-t.length;if(typeof s==="number"){if(s>o-Math.max(2,a))d.push(0);else p=o-s}let h=undefined;let m=undefined;let g=false;let v=-1;let y=-1;let b=-1;if(n===r){v=consumeMoreIndentedLines(e,v);if(v!==-1)p=v+l}for(let t;t=e[v+=1];){if(n===i&&t==="\\"){y=v;switch(e[v+1]){case"x":v+=3;break;case"u":v+=5;break;case"U":v+=9;break;default:v+=1}b=v}if(t==="\n"){if(n===r)v=consumeMoreIndentedLines(e,v);p=v+l;h=undefined}else{if(t===" "&&m&&m!==" "&&m!=="\n"&&m!=="\t"){const t=e[v+1];if(t&&t!==" "&&t!=="\n"&&t!=="\t")h=v}if(v>=p){if(h){d.push(h);p=h+l;h=undefined}else if(n===i){while(m===" "||m==="\t"){m=t;t=e[v+=1];g=true}const n=v>b+1?v-2:y-1;if(f[n])return e;d.push(n);f[n]=true;p=n+l;h=undefined}else{g=true}}}m=t}if(g&&u)u();if(d.length===0)return e;if(c)c();let _=e.slice(0,d[0]);for(let r=0;r<d.length;++r){const s=d[r];const o=d[r+1]||e.length;if(s===0)_=`\n${t}${e.slice(0,o)}`;else{if(n===i&&f[s])_+=`${e[s]}\\`;_+=`\n${t}${e.slice(s+1,o)}`}}return _}function consumeMoreIndentedLines(e,t){let n=e[t+1];while(n===" "||n==="\t"){do{n=e[t+=1]}while(n&&n!=="\n");n=e[t+1]}return t}t.FOLD_BLOCK=r;t.FOLD_FLOW=n;t.FOLD_QUOTED=i;t.foldFlowLines=foldFlowLines},22399:(e,t,n)=>{"use strict";var r=n(57973);var i=n(56690);var s=n(59294);var o=n(92319);function createStringifyContext(e,t){const n=Object.assign({blockQuote:true,commentString:s.stringifyComment,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:false,doubleQuotedMinMultiLineLength:40,falseStr:"false",indentSeq:true,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:false,singleQuote:null,trueStr:"true",verifyAliasOrder:true},e.schema.toStringOptions,t);let r;switch(n.collectionStyle){case"block":r=false;break;case"flow":r=true;break;default:r=null}return{anchors:new Set,doc:e,indent:"",indentStep:typeof n.indent==="number"?" ".repeat(n.indent):"  ",inFlow:r,options:n}}function getTagObject(e,t){if(t.tag){const n=e.filter((e=>e.tag===t.tag));if(n.length>0)return n.find((e=>e.format===t.format))??n[0]}let n=undefined;let r;if(i.isScalar(t)){r=t.value;const i=e.filter((e=>e.identify?.(r)));n=i.find((e=>e.format===t.format))??i.find((e=>!e.format))}else{r=t;n=e.find((e=>e.nodeClass&&r instanceof e.nodeClass))}if(!n){const e=r?.constructor?.name??typeof r;throw new Error(`Tag not resolved for ${e} value`)}return n}function stringifyProps(e,t,{anchors:n,doc:s}){if(!s.directives)return"";const o=[];const a=(i.isScalar(e)||i.isCollection(e))&&e.anchor;if(a&&r.anchorIsValid(a)){n.add(a);o.push(`&${a}`)}const c=e.tag?e.tag:t.default?null:t.tag;if(c)o.push(s.directives.tagString(c));return o.join(" ")}function stringify(e,t,n,r){if(i.isPair(e))return e.toString(t,n,r);if(i.isAlias(e)){if(t.doc.directives)return e.toString(t);if(t.resolvedAliases?.has(e)){throw new TypeError(`Cannot stringify circular structure without alias nodes`)}else{if(t.resolvedAliases)t.resolvedAliases.add(e);else t.resolvedAliases=new Set([e]);e=e.resolve(t.doc)}}let s=undefined;const a=i.isNode(e)?e:t.doc.createNode(e,{onTagObj:e=>s=e});if(!s)s=getTagObject(t.doc.schema.tags,a);const c=stringifyProps(a,s,t);if(c.length>0)t.indentAtStart=(t.indentAtStart??0)+c.length+1;const u=typeof s.stringify==="function"?s.stringify(a,t,n,r):i.isScalar(a)?o.stringifyString(a,t,n,r):a.toString(t,n,r);if(!c)return u;return i.isScalar(a)||u[0]==="{"||u[0]==="["?`${c} ${u}`:`${c}\n${t.indent}${u}`}t.createStringifyContext=createStringifyContext;t.stringify=stringify},77969:(e,t,n)=>{"use strict";var r=n(92480);var i=n(56690);var s=n(22399);var o=n(59294);function stringifyCollection(e,t,n){const r=t.inFlow??e.flow;const i=r?stringifyFlowCollection:stringifyBlockCollection;return i(e,t,n)}function stringifyBlockCollection({comment:e,items:t},n,{blockItemPrefix:r,flowChars:a,itemIndent:c,onChompKeep:u,onComment:l}){const{indent:d,options:{commentString:f}}=n;const p=Object.assign({},n,{indent:c,type:null});let h=false;const m=[];for(let e=0;e<t.length;++e){const a=t[e];let u=null;if(i.isNode(a)){if(!h&&a.spaceBefore)m.push("");addCommentBefore(n,m,a.commentBefore,h);if(a.comment)u=a.comment}else if(i.isPair(a)){const e=i.isNode(a.key)?a.key:null;if(e){if(!h&&e.spaceBefore)m.push("");addCommentBefore(n,m,e.commentBefore,h)}}h=false;let l=s.stringify(a,p,(()=>u=null),(()=>h=true));if(u)l+=o.lineComment(l,c,f(u));if(h&&u)h=false;m.push(r+l)}let g;if(m.length===0){g=a.start+a.end}else{g=m[0];for(let e=1;e<m.length;++e){const t=m[e];g+=t?`\n${d}${t}`:"\n"}}if(e){g+="\n"+o.indentComment(f(e),d);if(l)l()}else if(h&&u)u();return g}function stringifyFlowCollection({comment:e,items:t},n,{flowChars:a,itemIndent:c,onComment:u}){const{indent:l,indentStep:d,options:{commentString:f}}=n;c+=d;const p=Object.assign({},n,{indent:c,inFlow:true,type:null});let h=false;let m=0;const g=[];for(let e=0;e<t.length;++e){const r=t[e];let a=null;if(i.isNode(r)){if(r.spaceBefore)g.push("");addCommentBefore(n,g,r.commentBefore,false);if(r.comment)a=r.comment}else if(i.isPair(r)){const e=i.isNode(r.key)?r.key:null;if(e){if(e.spaceBefore)g.push("");addCommentBefore(n,g,e.commentBefore,false);if(e.comment)h=true}const t=i.isNode(r.value)?r.value:null;if(t){if(t.comment)a=t.comment;if(t.commentBefore)h=true}else if(r.value==null&&e&&e.comment){a=e.comment}}if(a)h=true;let u=s.stringify(r,p,(()=>a=null));if(e<t.length-1)u+=",";if(a)u+=o.lineComment(u,c,f(a));if(!h&&(g.length>m||u.includes("\n")))h=true;g.push(u);m=g.length}let v;const{start:y,end:b}=a;if(g.length===0){v=y+b}else{if(!h){const e=g.reduce(((e,t)=>e+t.length+2),2);h=e>r.Collection.maxFlowStringSingleLineLength}if(h){v=y;for(const e of g)v+=e?`\n${d}${l}${e}`:"\n";v+=`\n${l}${b}`}else{v=`${y} ${g.join(" ")} ${b}`}}if(e){v+=o.lineComment(v,f(e),l);if(u)u()}return v}function addCommentBefore({indent:e,options:{commentString:t}},n,r,i){if(r&&i)r=r.replace(/^\n+/,"");if(r){const i=o.indentComment(t(r),e);n.push(i.trimStart())}}t.stringifyCollection=stringifyCollection},59294:(e,t)=>{"use strict";const stringifyComment=e=>e.replace(/^(?!$)(?: $)?/gm,"#");function indentComment(e,t){if(/^\n+$/.test(e))return e.substring(1);return t?e.replace(/^(?! *$)/gm,t):e}const lineComment=(e,t,n)=>e.endsWith("\n")?indentComment(n,t):n.includes("\n")?"\n"+indentComment(n,t):(e.endsWith(" ")?"":" ")+n;t.indentComment=indentComment;t.lineComment=lineComment;t.stringifyComment=stringifyComment},99559:(e,t,n)=>{"use strict";var r=n(56690);var i=n(22399);var s=n(59294);function stringifyDocument(e,t){const n=[];let o=t.directives===true;if(t.directives!==false&&e.directives){const t=e.directives.toString(e);if(t){n.push(t);o=true}else if(e.directives.docStart)o=true}if(o)n.push("---");const a=i.createStringifyContext(e,t);const{commentString:c}=a.options;if(e.commentBefore){if(n.length!==1)n.unshift("");const t=c(e.commentBefore);n.unshift(s.indentComment(t,""))}let u=false;let l=null;if(e.contents){if(r.isNode(e.contents)){if(e.contents.spaceBefore&&o)n.push("");if(e.contents.commentBefore){const t=c(e.contents.commentBefore);n.push(s.indentComment(t,""))}a.forceBlockIndent=!!e.comment;l=e.contents.comment}const t=l?undefined:()=>u=true;let d=i.stringify(e.contents,a,(()=>l=null),t);if(l)d+=s.lineComment(d,"",c(l));if((d[0]==="|"||d[0]===">")&&n[n.length-1]==="---"){n[n.length-1]=`--- ${d}`}else n.push(d)}else{n.push(i.stringify(e.contents,a))}if(e.directives?.docEnd){if(e.comment){const t=c(e.comment);if(t.includes("\n")){n.push("...");n.push(s.indentComment(t,""))}else{n.push(`... ${t}`)}}else{n.push("...")}}else{let t=e.comment;if(t&&u)t=t.replace(/^\n+/,"");if(t){if((!u||l)&&n[n.length-1]!=="")n.push("");n.push(s.indentComment(c(t),""))}}return n.join("\n")+"\n"}t.stringifyDocument=stringifyDocument},87602:(e,t)=>{"use strict";function stringifyNumber({format:e,minFractionDigits:t,tag:n,value:r}){if(typeof r==="bigint")return String(r);const i=typeof r==="number"?r:Number(r);if(!isFinite(i))return isNaN(i)?".nan":i<0?"-.inf":".inf";let s=JSON.stringify(r);if(!e&&t&&(!n||n==="tag:yaml.org,2002:float")&&/^\d/.test(s)){let e=s.indexOf(".");if(e<0){e=s.length;s+="."}let n=t-(s.length-e-1);while(n-- >0)s+="0"}return s}t.stringifyNumber=stringifyNumber},24137:(e,t,n)=>{"use strict";var r=n(56690);var i=n(98281);var s=n(22399);var o=n(59294);function stringifyPair({key:e,value:t},n,a,c){const{allNullValues:u,doc:l,indent:d,indentStep:f,options:{commentString:p,indentSeq:h,simpleKeys:m}}=n;let g=r.isNode(e)&&e.comment||null;if(m){if(g){throw new Error("With simple keys, key nodes cannot have comments")}if(r.isCollection(e)){const e="With simple keys, collection cannot be used as a key value";throw new Error(e)}}let v=!m&&(!e||g&&t==null&&!n.inFlow||r.isCollection(e)||(r.isScalar(e)?e.type===i.Scalar.BLOCK_FOLDED||e.type===i.Scalar.BLOCK_LITERAL:typeof e==="object"));n=Object.assign({},n,{allNullValues:false,implicitKey:!v&&(m||!u),indent:d+f});let y=false;let b=false;let _=s.stringify(e,n,(()=>y=true),(()=>b=true));if(!v&&!n.inFlow&&_.length>1024){if(m)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");v=true}if(n.inFlow){if(u||t==null){if(y&&a)a();return _===""?"?":v?`? ${_}`:_}}else if(u&&!m||t==null&&v){_=`? ${_}`;if(g&&!y){_+=o.lineComment(_,n.indent,p(g))}else if(b&&c)c();return _}if(y)g=null;if(v){if(g)_+=o.lineComment(_,n.indent,p(g));_=`? ${_}\n${d}:`}else{_=`${_}:`;if(g)_+=o.lineComment(_,n.indent,p(g))}let S="";let w=null;if(r.isNode(t)){if(t.spaceBefore)S="\n";if(t.commentBefore){const e=p(t.commentBefore);S+=`\n${o.indentComment(e,n.indent)}`}w=t.comment}else if(t&&typeof t==="object"){t=l.createNode(t)}n.implicitKey=false;if(!v&&!g&&r.isScalar(t))n.indentAtStart=_.length+1;b=false;if(!h&&f.length>=2&&!n.inFlow&&!v&&r.isSeq(t)&&!t.flow&&!t.tag&&!t.anchor){n.indent=n.indent.substr(2)}let T=false;const k=s.stringify(t,n,(()=>T=true),(()=>b=true));let C=" ";if(S||g){if(k===""&&!n.inFlow)C=S==="\n"?"\n\n":S;else C=`${S}\n${n.indent}`}else if(!v&&r.isCollection(t)){const e=k[0]==="["||k[0]==="{";if(!e||k.includes("\n"))C=`\n${n.indent}`}else if(k===""||k[0]==="\n")C="";_+=C+k;if(n.inFlow){if(T&&a)a()}else if(w&&!T){_+=o.lineComment(_,n.indent,p(w))}else if(b&&c){c()}return _}t.stringifyPair=stringifyPair},92319:(e,t,n)=>{"use strict";var r=n(98281);var i=n(73274);const getFoldOptions=e=>({indentAtStart:e.indentAtStart,lineWidth:e.options.lineWidth,minContentWidth:e.options.minContentWidth});const containsDocumentMarker=e=>/^(%|---|\.\.\.)/m.test(e);function lineLengthOverLimit(e,t,n){if(!t||t<0)return false;const r=t-n;const i=e.length;if(i<=r)return false;for(let t=0,n=0;t<i;++t){if(e[t]==="\n"){if(t-n>r)return true;n=t+1;if(i-n<=r)return false}}return true}function doubleQuotedString(e,t){const n=JSON.stringify(e);if(t.options.doubleQuotedAsJSON)return n;const{implicitKey:r}=t;const s=t.options.doubleQuotedMinMultiLineLength;const o=t.indent||(containsDocumentMarker(e)?"  ":"");let a="";let c=0;for(let e=0,t=n[e];t;t=n[++e]){if(t===" "&&n[e+1]==="\\"&&n[e+2]==="n"){a+=n.slice(c,e)+"\\ ";e+=1;c=e;t="\\"}if(t==="\\")switch(n[e+1]){case"u":{a+=n.slice(c,e);const t=n.substr(e+2,4);switch(t){case"0000":a+="\\0";break;case"0007":a+="\\a";break;case"000b":a+="\\v";break;case"001b":a+="\\e";break;case"0085":a+="\\N";break;case"00a0":a+="\\_";break;case"2028":a+="\\L";break;case"2029":a+="\\P";break;default:if(t.substr(0,2)==="00")a+="\\x"+t.substr(2);else a+=n.substr(e,6)}e+=5;c=e+1}break;case"n":if(r||n[e+2]==='"'||n.length<s){e+=1}else{a+=n.slice(c,e)+"\n\n";while(n[e+2]==="\\"&&n[e+3]==="n"&&n[e+4]!=='"'){a+="\n";e+=2}a+=o;if(n[e+2]===" ")a+="\\";e+=1;c=e+1}break;default:e+=1}}a=c?a+n.slice(c):n;return r?a:i.foldFlowLines(a,o,i.FOLD_QUOTED,getFoldOptions(t))}function singleQuotedString(e,t){if(t.options.singleQuote===false||t.implicitKey&&e.includes("\n")||/[ \t]\n|\n[ \t]/.test(e))return doubleQuotedString(e,t);const n=t.indent||(containsDocumentMarker(e)?"  ":"");const r="'"+e.replace(/'/g,"''").replace(/\n+/g,`$&\n${n}`)+"'";return t.implicitKey?r:i.foldFlowLines(r,n,i.FOLD_FLOW,getFoldOptions(t))}function quotedString(e,t){const{singleQuote:n}=t.options;let r;if(n===false)r=doubleQuotedString;else{const t=e.includes('"');const i=e.includes("'");if(t&&!i)r=singleQuotedString;else if(i&&!t)r=doubleQuotedString;else r=n?singleQuotedString:doubleQuotedString}return r(e,t)}function blockString({comment:e,type:t,value:n},s,o,a){const{blockQuote:c,commentString:u,lineWidth:l}=s.options;if(!c||/\n[\t ]+$/.test(n)||/^\s*$/.test(n)){return quotedString(n,s)}const d=s.indent||(s.forceBlockIndent||containsDocumentMarker(n)?"  ":"");const f=c==="literal"?true:c==="folded"||t===r.Scalar.BLOCK_FOLDED?false:t===r.Scalar.BLOCK_LITERAL?true:!lineLengthOverLimit(n,l,d.length);if(!n)return f?"|\n":">\n";let p;let h;for(h=n.length;h>0;--h){const e=n[h-1];if(e!=="\n"&&e!=="\t"&&e!==" ")break}let m=n.substring(h);const g=m.indexOf("\n");if(g===-1){p="-"}else if(n===m||g!==m.length-1){p="+";if(a)a()}else{p=""}if(m){n=n.slice(0,-m.length);if(m[m.length-1]==="\n")m=m.slice(0,-1);m=m.replace(/\n+(?!\n|$)/g,`$&${d}`)}let v=false;let y;let b=-1;for(y=0;y<n.length;++y){const e=n[y];if(e===" ")v=true;else if(e==="\n")b=y;else break}let _=n.substring(0,b<y?b+1:y);if(_){n=n.substring(_.length);_=_.replace(/\n+/g,`$&${d}`)}const S=d?"2":"1";let w=(f?"|":">")+(v?S:"")+p;if(e){w+=" "+u(e.replace(/ ?[\r\n]+/g," "));if(o)o()}if(f){n=n.replace(/\n+/g,`$&${d}`);return`${w}\n${d}${_}${n}${m}`}n=n.replace(/\n+/g,"\n$&").replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${d}`);const T=i.foldFlowLines(`${_}${n}${m}`,d,i.FOLD_BLOCK,getFoldOptions(s));return`${w}\n${d}${T}`}function plainString(e,t,n,s){const{type:o,value:a}=e;const{actualString:c,implicitKey:u,indent:l,inFlow:d}=t;if(u&&/[\n[\]{},]/.test(a)||d&&/[[\]{},]/.test(a)){return quotedString(a,t)}if(!a||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(a)){return u||d||!a.includes("\n")?quotedString(a,t):blockString(e,t,n,s)}if(!u&&!d&&o!==r.Scalar.PLAIN&&a.includes("\n")){return blockString(e,t,n,s)}if(l===""&&containsDocumentMarker(a)){t.forceBlockIndent=true;return blockString(e,t,n,s)}const f=a.replace(/\n+/g,`$&\n${l}`);if(c){const test=e=>e.default&&e.tag!=="tag:yaml.org,2002:str"&&e.test?.test(f);const{compat:e,tags:n}=t.doc.schema;if(n.some(test)||e?.some(test))return quotedString(a,t)}return u?f:i.foldFlowLines(f,l,i.FOLD_FLOW,getFoldOptions(t))}function stringifyString(e,t,n,i){const{implicitKey:s,inFlow:o}=t;const a=typeof e.value==="string"?e:Object.assign({},e,{value:String(e.value)});let{type:c}=e;if(c!==r.Scalar.QUOTE_DOUBLE){if(/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(a.value))c=r.Scalar.QUOTE_DOUBLE}const _stringify=e=>{switch(e){case r.Scalar.BLOCK_FOLDED:case r.Scalar.BLOCK_LITERAL:return s||o?quotedString(a.value,t):blockString(a,t,n,i);case r.Scalar.QUOTE_DOUBLE:return doubleQuotedString(a.value,t);case r.Scalar.QUOTE_SINGLE:return singleQuotedString(a.value,t);case r.Scalar.PLAIN:return plainString(a,t,n,i);default:return null}};let u=_stringify(c);if(u===null){const{defaultKeyType:e,defaultStringType:n}=t.options;const r=s&&e||n;u=_stringify(r);if(u===null)throw new Error(`Unsupported default string type ${r}`)}return u}t.stringifyString=stringifyString},4315:(e,t,n)=>{"use strict";var r=n(56690);const i=Symbol("break visit");const s=Symbol("skip children");const o=Symbol("remove node");function visit(e,t){const n=initVisitor(t);if(r.isDocument(e)){const t=visit_(null,e.contents,n,Object.freeze([e]));if(t===o)e.contents=null}else visit_(null,e,n,Object.freeze([]))}visit.BREAK=i;visit.SKIP=s;visit.REMOVE=o;function visit_(e,t,n,s){const a=callVisitor(e,t,n,s);if(r.isNode(a)||r.isPair(a)){replaceNode(e,s,a);return visit_(e,a,n,s)}if(typeof a!=="symbol"){if(r.isCollection(t)){s=Object.freeze(s.concat(t));for(let e=0;e<t.items.length;++e){const r=visit_(e,t.items[e],n,s);if(typeof r==="number")e=r-1;else if(r===i)return i;else if(r===o){t.items.splice(e,1);e-=1}}}else if(r.isPair(t)){s=Object.freeze(s.concat(t));const e=visit_("key",t.key,n,s);if(e===i)return i;else if(e===o)t.key=null;const r=visit_("value",t.value,n,s);if(r===i)return i;else if(r===o)t.value=null}}return a}async function visitAsync(e,t){const n=initVisitor(t);if(r.isDocument(e)){const t=await visitAsync_(null,e.contents,n,Object.freeze([e]));if(t===o)e.contents=null}else await visitAsync_(null,e,n,Object.freeze([]))}visitAsync.BREAK=i;visitAsync.SKIP=s;visitAsync.REMOVE=o;async function visitAsync_(e,t,n,s){const a=await callVisitor(e,t,n,s);if(r.isNode(a)||r.isPair(a)){replaceNode(e,s,a);return visitAsync_(e,a,n,s)}if(typeof a!=="symbol"){if(r.isCollection(t)){s=Object.freeze(s.concat(t));for(let e=0;e<t.items.length;++e){const r=await visitAsync_(e,t.items[e],n,s);if(typeof r==="number")e=r-1;else if(r===i)return i;else if(r===o){t.items.splice(e,1);e-=1}}}else if(r.isPair(t)){s=Object.freeze(s.concat(t));const e=await visitAsync_("key",t.key,n,s);if(e===i)return i;else if(e===o)t.key=null;const r=await visitAsync_("value",t.value,n,s);if(r===i)return i;else if(r===o)t.value=null}}return a}function initVisitor(e){if(typeof e==="object"&&(e.Collection||e.Node||e.Value)){return Object.assign({Alias:e.Node,Map:e.Node,Scalar:e.Node,Seq:e.Node},e.Value&&{Map:e.Value,Scalar:e.Value,Seq:e.Value},e.Collection&&{Map:e.Collection,Seq:e.Collection},e)}return e}function callVisitor(e,t,n,i){if(typeof n==="function")return n(e,t,i);if(r.isMap(t))return n.Map?.(e,t,i);if(r.isSeq(t))return n.Seq?.(e,t,i);if(r.isPair(t))return n.Pair?.(e,t,i);if(r.isScalar(t))return n.Scalar?.(e,t,i);if(r.isAlias(t))return n.Alias?.(e,t,i);return undefined}function replaceNode(e,t,n){const i=t[t.length-1];if(r.isCollection(i)){i.items[e]=n}else if(r.isPair(i)){if(e==="key")i.key=n;else i.value=n}else if(r.isDocument(i)){i.contents=n}else{const e=r.isAlias(i)?"alias":"scalar";throw new Error(`Cannot replace node with ${e} parent`)}}t.visit=visit;t.visitAsync=visitAsync},62023:e=>{"use strict";e.exports=JSON.parse('{"name":"mixpanel","description":"A simple server-side API for mixpanel","keywords":["mixpanel","analytics","api","stats"],"version":"0.16.0","homepage":"https://github.com/mixpanel/mixpanel-node","author":"Carl Sverre","license":"MIT","main":"lib/mixpanel-node","directories":{"lib":"lib"},"repository":{"type":"git","url":"http://github.com/mixpanel/mixpanel-node.git"},"engines":{"node":">=10.0"},"scripts":{"test":"nodeunit"},"types":"./lib/mixpanel-node.d.ts","devDependencies":{"nodeunit":"^0.11.3","proxyquire":"^1.7.11","sinon":"^7.1.1"},"dependencies":{"https-proxy-agent":"5.0.0"}}')},12561:e=>{"use strict";e.exports={version:"3.8.0"}},4147:e=>{"use strict";e.exports=JSON.parse('{"name":"io","displayName":"Trunk","description":"The last linter you\'ll ever need","publisher":"trunk","icon":"assets/icon.png","homepage":"https://trunk.io","galleryBanner":{"color":"#2F323D","theme":"dark"},"repository":{"url":"https://trunk.io"},"bugs":{"url":"https://slack.trunk.io"},"os":["darwin","linux"],"version":"3.2.0","engines":{"vscode":"^1.62.0","node":">=14.0.0"},"categories":["Linters","Formatters","Programming Languages","Other","Education"],"keywords":["actionlint","angular","ansible-lint","ansible","autopep8","bandit","bash","bazel","black","brakeman","buf","buildifier","C","C++","cfnlint","clang-format","clang-tidy","clippy","cloudformation","codespell","cspell","css","cue-fmt","cue","detekt","docker","dotenv-linter","dotenv-linter","eslint","flake8","flow","formatters","formatting","gitleaks","go","gofmt","goimports","golang","golangci-lint","graphql","grpc","hadolint","hadolint","haml-lint","haml","html","include-what-you-use","isort","iwyu","java","javascript","json","jsx","kotlin","kotlin","ktlint","markdown","markdownlint","mdx","megalinter","metalinter","prettier","protobuf","pylint","python","rubocop","ruby","rufo","rust","rustfmt","scala","scalafmt","scss","semgrep","shellcheck","shfmt","sql-formatter","sql","sqlfluff","standard","standardrb","starlark","starlark","stylelint","superlinter","svg","svgo","taplo","terraform-fmt","terraform-validate","terraform","tflint","toml","toml","tsx","typescript","vue","xml","yaml","yamllint","yapf"],"activationEvents":["onStartupFinished"],"extensionKind":["workspace"],"main":"./out/index.js","qna":"https://slack.trunk.io","contributes":{"viewsWelcome":[{"view":"trunkTreeView","contents":"In order to use trunk, you must open or clone a trunk enabled repository.\\n[Open Folder](command:vscode.openFolder)\\n[Clone Repository](command:git.clone)\\nTo learn more about how to use Trunk and it\'s integration with VS Code [read our docs](https://docs.trunk.io).","when":"os.platform != win32 && workbenchState == empty || os.platform != win32 && trunk.notRepo"},{"view":"trunkTreeView","contents":" ğŸ‘‹  Welcome to Trunk!\\nTo start, initialize trunk in your repo:\\n[Initialize Trunk](command:trunk.initTrunk)\\nâ˜ï¸ When you initialize, we\'ll scan the files in your repo and produce a good starting config in your repo\'s .trunk/trunk.yaml where you can enable new linters and formatters ([docs](https://docs.trunk.io)).\\n ğŸ™Š Don\'t want to commit a trunk config file yet? You can add a local-only gitignore for .trunk in your .git/info/exclude file to use trunk in the meantime ([docs](https://docs.trunk.io)).","when":"os.platform != win32 && workbenchState != empty && trunk.initRequired"},{"view":"explorerTrunkTreeView","contents":" ğŸ‘‹  Welcome to Trunk!\\nTo start, initialize trunk in your repo:\\n[Initialize Trunk](command:trunk.initTrunk)\\nâ˜ï¸ When you initialize, we\'ll scan the files in your repo and produce a good starting config in your repo\'s .trunk/trunk.yaml where you can enable new linters and formatters ([docs](https://docs.trunk.io)).\\n ğŸ™Š Don\'t want to commit a trunk config file yet? You can add a local-only gitignore for .trunk in your .git/info/exclude file to use trunk in the meantime ([docs](https://docs.trunk.io)).","when":"os.platform != win32 && workbenchState != empty && trunk.initRequired"},{"view":"trunkTreeView","contents":"The installed version of trunk is below the minimum required version for this extension.\\n[Upgrade Trunk](command:trunk.upgradeTrunk)","when":"trunk.upgradeRequired"},{"view":"explorerTrunkTreeView","contents":"In order to use trunk, you must open or clone a trunk enabled repository.\\n[Open Folder](command:vscode.openFolder)\\n[Clone Repository](command:git.clone)\\nTo learn more about how to use Trunk and it\'s integration with VS Code [read our docs](https://docs.trunk.io).","when":"os.platform != win32 && workbenchState == empty || os.platform != win32 && trunk.notRepo"},{"view":"explorerTrunkTreeView","contents":"The installed version of trunk is below the minimum required version for this extension.\\n[Upgrade Trunk](command:trunk.upgradeTrunk)","when":"trunk.upgradeRequired && workbenchState != empty"},{"view":"trunkTreeView","contents":"Trunk ran into a problem.\\n[Restart Trunk](command:trunk.restartExtension)","when":"trunk.statusClosed"},{"view":"explorerTrunkTreeView","contents":"Trunk ran into a problem.\\n[Restart Trunk](command:trunk.restartExtension)","when":"trunk.statusClosed"},{"view":"trunkTreeView","contents":"Invalid config detected. Please update your trunk config.","when":"trunk.invalidConfig"},{"view":"explorerTrunkTreeView","contents":"Invalid config detected. Please update your trunk config.","when":"trunk.invalidConfig"},{"view":"trunkTreeView","contents":"Trunk is only supported on Windows via WSL or when working inside a remote Linux or OS X workspace via SSH. Please see more information [here](https://code.visualstudio.com/docs/remote/remote-overview). If you are interested in us adding full Windows support, please contact us on our [Community Slack channel](https://slack.trunk.io).","when":"os.platform == win32"},{"view":"explorerTrunkTreeView","contents":"Trunk is only supported on Windows via WSL or when working inside a remote Linux or OS X workspace via SSH. Please see more information [here](https://code.visualstudio.com/docs/remote/remote-overview). If you are interested in us adding full Windows support, please contact us on our [Community Slack channel](https://slack.trunk.io).","when":"os.platform == win32"},{"view":"trunkTreeView","contents":"Unable to successfully initialize with Trunk. Please verify that the installed version of the extension is compatible with your installed version of Trunk.\\n[Restart Trunk](command:trunk.restartExtension)","when":"trunk.invalidInitializationParams"},{"view":"explorerTrunkTreeView","contents":"Unable to successfully initialize with Trunk. Please verify that the installed version of the extension is compatible with your installed version of Trunk.\\n[Restart Trunk](command:trunk.restartExtension)","when":"trunk.invalidInitializationParams"},{"view":"trunkTreeView","contents":"Initializing...","when":"trunk.initializing"},{"view":"explorerTrunkTreeView","contents":"Initializing...","when":"trunk.initializing"}],"commands":[{"command":"trunk.runNotificationCommand","title":"Trunk: Run Notification Command"},{"command":"trunk.continueTrunk","title":"Trunk: Continue","icon":"$(play)"},{"command":"trunk.pauseTrunk","title":"Trunk: Pause","icon":"$(primitive-square)"},{"command":"trunk.grayOutNonBlockingIssuesEnable","title":"Trunk: Enable Graying Out Non-blocking Issues","icon":{"light":"assets/show.svg","dark":"assets/show.svg"}},{"command":"trunk.grayOutNonBlockingIssueDisable","title":"Trunk: Disable Graying Out Non-blocking Issues","icon":{"light":"assets/hide.svg","dark":"assets/hide.svg"}},{"command":"trunk.printDebugState","title":"Debug: Print Trunk Extension State"},{"command":"trunk.internal.goToIssue","title":"Trunk: Go to Issue"},{"command":"trunk.internal.goToFile","title":"Trunk: Open File"},{"command":"trunk.internal.formatFile","title":"Trunk: Format File"},{"command":"trunk.internal.copyIssueToClipboard","title":"Trunk: Copy Message to Clipboard"},{"command":"trunk.internal.copyIssueCodeToClipboard","title":"Trunk: Copy Issue Code to Clipboard"},{"command":"trunk.installCommandLine","title":"Trunk: Install \'trunk\' command in PATH"},{"command":"trunk.internal.ignoreIssue","title":"Trunk: Ignore Issue"},{"command":"trunk.internal.applyAutofix","title":"Trunk: Apply Autofix"},{"command":"trunk.restartExtension","title":"Debug: Restart Trunk Extension"},{"command":"trunk.initTrunk","title":"Trunk: Initialize"},{"command":"trunk.upgradeTrunk","title":"Trunk: Upgrade"},{"command":"trunk.refreshTreeView","title":"Trunk: Refresh Tree View"}],"viewsContainers":{"activitybar":[{"id":"trunkContainer","title":"Trunk","icon":"assets/sidebar-icon.svg"}]},"views":{"trunkContainer":[{"id":"trunkTreeView","name":"Check"},{"id":"trunkActionsView","name":"Actions","type":"webview"},{"id":"helpAndFeedbackView","name":"Help & Feedback"}],"explorer":[{"id":"explorerTrunkTreeView","name":"Trunk Check"},{"id":"explorerHelpAndFeedbackView","name":"Trunk Help & Feedback"}]},"menus":{"commandPalette":[{"command":"trunk.internal.goToFile","when":"false"},{"command":"trunk.internal.formatFile","when":"false"},{"command":"trunk.internal.goToIssue","when":"false"},{"command":"trunk.internal.copyIssueToClipboard","when":"false"},{"command":"trunk.internal.copyIssueCodeToClipboard","when":"false"},{"command":"trunk.internal.ignoreIssue","when":"false"},{"command":"trunk.internal.applyAutofix","when":"false"}],"view/title":[{"command":"trunk.pauseTrunk","when":"view == trunkTreeView && trunk.linterQueueStrategy == auto || view == explorerTrunkTreeView && trunk.linterQueueStrategy == auto","group":"navigation@1"},{"command":"trunk.continueTrunk","when":"view == trunkTreeView && trunk.linterQueueStrategy == onDemand || view == explorerTrunkTreeView && trunk.linterQueueStrategy == onDemand","group":"navigation@1"},{"command":"trunk.grayOutNonBlockingIssuesEnable","when":"view == trunkTreeView && !trunk.grayOutNonBlockingIssuesEnabled || view == explorerTrunkTreeView && !trunk.grayOutNonBlockingIssuesEnabled","group":"navigation@2"},{"command":"trunk.grayOutNonBlockingIssueDisable","when":"view == trunkTreeView && trunk.grayOutNonBlockingIssuesEnabled || view == explorerTrunkTreeView && trunk.grayOutNonBlockingIssuesEnabled","group":"navigation@2"}],"view/item/context":[{"command":"trunk.internal.goToFile","when":"viewItem =~ /FileItem/","group":"navigation"},{"command":"trunk.internal.formatFile","when":"viewItem =~ /FileItem/ && viewItem =~ /WithFormatFile/","group":"navigation"},{"command":"trunk.internal.goToIssue","when":"viewItem =~ /DiagnosticItem/","group":"navigation"},{"command":"trunk.internal.copyIssueToClipboard","when":"viewItem =~ /DiagnosticItem/","group":"9_cutcopypaste"},{"command":"trunk.internal.copyIssueCodeToClipboard","when":"viewItem =~ /DiagnosticItem/","group":"9_cutcopypaste"},{"command":"trunk.internal.ignoreIssue","when":"viewItem =~ /DiagnosticItem/ && viewItem =~ /WithIgnoreIssue/","group":"1_modification"},{"command":"trunk.internal.applyAutofix","when":"viewItem =~ /DiagnosticItem/ && viewItem =~ /WithApplyAutofix/","group":"1_modification"}]},"configuration":{"type":"object","title":"Trunk","properties":{"trunk.inlineDecorators":{"scope":"resource","type":"boolean","default":true,"description":"Enable inline decorators for lint issues (default: on)."},"trunk.inlineDecoratorsForAllExtensions":{"scope":"resource","type":"boolean","default":false,"description":"Show inline decorators issues coming from any extension, not just Trunk (default: off)."},"trunk.trunkPath":{"scope":"resource","type":"string","default":"","description":"Absolute or workspace-relative path to Trunk (optional)."},"trunk.languageServerArguments":{"scope":"resource","type":"array","default":"","items":{"type":"string"},"description":"Arguments for the Trunk language server (optional)."},"trunk.trace.server":{"scope":"window","type":"string","enum":["off","messages","verbose"],"default":"off"},"trunk.trunkGrayOutNonBlockingIssues":{"scope":"resource","type":"boolean","default":false,"description":"Toggles visualization mode where non-blocking issues will be grayed out in the tree view"}}}},"scripts":{"vscode:uninstall":"node ./out/uninstall","vscode:prepublish":"rm -r out || true && ncc build src/extension.ts -o out --minify && ncc build src/uninstall/app.ts -o out/uninstall --minify","compile":"ncc build src/extension.ts -o out --source-map --no-source-map-register","build:test-runner":"tsc docker_tests/suite/*.ts --outDir docker_tests/compiled_suite --esModuleInterop --sourceMap --resolveJsonModule","build:tests":"mkdir -p docker_tests/compiled_suite && tsc docker_tests/suite/test/*.ts --outDir docker_tests/compiled_suite/test --esModuleInterop --sourceMap","pretest":"yarn compile && yarn build:test-runner && yarn build:tests","test:headless":"yarn pretest && xvfb-run -a node docker_tests/compiled_suite/runTest.js","test:container":"bazel run //trunk/vscode/docker_tests:test_image","test":"node docker_tests/compiled_suite/runTest.js","watch":"ncc build src/extension.ts -o out --watch --source-map --no-source-map-register","clean":"rm -r out || true"},"dependencies":{"@types/vscode":"1.68.1","mixpanel":"0.16.0","moment":"^2.29.3","pluralize":"^8.0.0","promise-retry":"^2.0.1","queue-typescript":"^1.0.1","semver":"^7.3.7","simple-git":"^3.10.0","vscode-languageclient":"8.0.2","vscode-test":"1.6.1","winston":"^3.8.0","winston-transport-sentry-node":"^2.4.0","nanoid":"4.0.0","yaml":"2.1.1"},"devDependencies":{"chai":"^4.3.6","@vscode/test-electron":"^2.1.5","@types/nanoid-dictionary":"4.2.0","@types/chai":"^4.3.1","@types/glob":"^7.2.0","@types/mocha":"9.1.1","@vercel/ncc":"0.34.0","@types/node":"16.10.3","@types/pluralize":"^0.0.29","@types/promise-retry":"^1.1.3","@types/semver":"^7.3.9","glob":"8.0.3","mocha":"10.0.0","typescript":"4.7.4","vsce":"2.9.2","chai-as-promised":"7.1.1","@types/chai-as-promised":"7.1.5","prettier":"^2.7.1"}}')}};var __webpack_module_cache__={};function __nccwpck_require__(e){var t=__webpack_module_cache__[e];if(t!==undefined){return t.exports}var n=__webpack_module_cache__[e]={id:e,loaded:false,exports:{}};var r=true;try{__webpack_modules__[e].call(n.exports,n,n.exports,__nccwpck_require__);r=false}finally{if(r)delete __webpack_module_cache__[e]}n.loaded=true;return n.exports}(()=>{__nccwpck_require__.nmd=e=>{e.paths=[];if(!e.children)e.children=[];return e}})();if(typeof __nccwpck_require__!=="undefined")__nccwpck_require__.ab=__dirname+"/";var __webpack_exports__=__nccwpck_require__(80035);module.exports=__webpack_exports__})();